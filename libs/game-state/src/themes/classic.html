<qspider-theme name="qspider:classic">
  <definitions>
    <qsp-css-variable name="--code-font-size" from="FSIZE" type="unit" unit="pt" default-value="12"></qsp-css-variable>
    <qsp-css-variable name="--code-font-name" from="$FNAME"></qsp-css-variable>
    <qsp-css-variable name="--code-color" from="FCOLOR" type="color" default-value="#000000"></qsp-css-variable>
    <qsp-css-variable name="--code-link-color" from="LCOLOR" type="color" defaul-value="#0000ff"></qsp-css-variable>
    <qsp-css-variable
      name="--code-background-color"
      from="BCOLOR"
      type="color"
      default-value="#e0e0e0"
      with-contrast
      with-inverted
    ></qsp-css-variable>
    <qsp-css-variable name="background-image" from="$BACKIMAGE" type="resource"></qsp-css-variable>
  </definitions>
  <template is="qsp-player">
    <qsp-cl-defaults></qsp-cl-defaults>
    <style>
      qsp-game-root,
      #portal-container {
        --border-color: var(--background-color-contrast, var(--cl-background-color-contrast, gray));
        --font-size: var(--code-font-size, var(--cl-font-size));
        --font-name: var(--code-font-name, var(--cl-font-name));
        --color: var(--code-color, var(--cl-color));
        --link-color: var(--code-link-color, var(--cl-link-color));
        --background-color: var(--code-background-color, var(--cl-background-color));
        --background-color-inverted: var(--code-background-color-inverted, var(--cl-background-color-inverted));
        --background-color-contrast: var(--code-background-color-contrast, var(--cl-background-color-contrast));
        --background-color-inverted-contrast: var(
          --code-background-color-inverted-contrast,
          var(--cl-background-color-inverted-contrast)
        );
        font-size: var(--font-size);
        font-family: var(--font-name);
        color: var(--color);
      }
      qsp-player button,
      qsp-player input,
      #portal-container input {
        color: var(--color);
        font-size: var(--font-size);
        font-family: var(--font-name);
      }
      qsp-player a,
      qsp-player a:visited,
      #portal-container a,
      #portal-container a:visited {
        color: var(--link-color);
      }
      a.plain {
        text-decoration: none;
      }

      qsp-player {
        width: 100vw;
        height: 100vh;
        background: var(--background-color);
        display: block;
      }
      .qsp-classic-layout {
        width: 100%;
        height: 100%;
      }
      qsp-main {
        width: 100%;
      }
      qsp-menu {
        border: 1px solid var(--border-color);
        background-color: var(--background-color);
      }
      nav {
        outline: none;
      }
      .panel {
        width: 100%;
        height: 100%;
        min-height: 100%;
        border: 1px solid var(--border-color);
      }

      .panel-background {
        background-image: var(--background-image, none);
        background-repeat: no-repeat;
        background-size: contain;
        background-position: center center;
      }

      .panel-content {
        padding: 8px;
        min-height: 100%;
        white-space: pre-wrap;
      }
      qsp-cmd form {
        display: block;
        height: 100%;
        width: 100%;
      }
      qsp-cmd input {
        background: var(--background-color);
        display: inline-block;
        height: 100%;
        width: 100%;
        border: 0;
      }
      qsp-cmd input:focus {
        outline: none;
        box-shadow: inset 0 0 5px 0px rgba(0, 0, 0, 0.75);
      }
      .view-container {
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .view-container img {
        max-width: 100%;
        max-height: 100%;
      }
      .menu-separator {
        margin: 3px 10px;
        border-top: 1px solid var(--border-color);
      }
      qsp-menu {
        display: block;
        border: 1px solid var(--border-color);
        background-color: var(--background-color);
      }
      .action-item > center {
        width: 100%;
      }
      .action-item {
        display: flex;
        justify-content: stretch;
        align-items: center;
        padding: 4px 8px;
        width: 100%;
        text-align: left;
        border-radius: 0;
        border: 0;
        cursor: pointer;
        background-color: var(--background-color);
        user-select: none;
      }
      .action-item:hover {
        background-color: var(--background-color-inverted);
        color: var(--background-color-inverted-contrast);
      }
      .action-item:focus {
        outline: none;
      }
      .action-img {
        margin-right: 8px;
      }
      .qsp-overlay {
        position: fixed;
        inset: 0;
        background-color: var(--background-color, black);
        opacity: 0.8;
      }
      .qsp-dialog-container {
        position: fixed;
        inset: 0;
        pointer-events: none;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .qsp-dialog-container > * {
        position: relative;
        pointer-events: auto;
        border-radius: var(--border-radius);
        min-width: 400px;
        padding: var(--spacer--md);
        background-color: var(--background-color, black);
        animation: contentShow 150ms cubic-bezier(0.16, 1, 0.3, 1);
        box-shadow: 0 3px 1px -2px rgb(0 0 0 / 20%), 0 2px 2px 0 rgb(0 0 0 / 14%), 0 1px 5px 0 rgb(0 0 0 / 12%);
      }
      .qsp-dialog-container p {
        margin: 0;
      }

      @keyframes contentShow {
        from {
          opacity: 0;
          transform: translate(0, -2%) scale(0.96);
        }
        to {
          opacity: 1;
          transform: translate(0, 0) scale(1);
        }
      }
      .close-button {
        background: transparent;
        border: none;
        position: absolute;
        top: 0px;
        right: 0px;
        cursor: pointer;
      }
      .close-button:focus {
        outline: none;
      }
      .qsp-button {
        cursor: pointer;
        background-color: var(--background-color);
        color: var(--background-color-contrast);
        border-radius: 4px;
        padding: 4px 16px;
        border: 1px solid var(--border-color);
      }
      .qsp-button:hover {
        background-color: var(--background-color-inverted);
        color: var(--background-color-inverted-contrast);
        border-color: var(--background-color-inverted);
      }
      .qsp-button:focus {
        outline: none;
        box-shadow: 0 0 0 2px #ffffff, 0 0 0 4px var(--background-color-inverted), 0 1px 2px 0 black;
      }
      .qsp-button + .qsp-button {
        margin-left: var(--spacer--sm);
      }
      .qsp-dialog-buttons {
        margin-top: var(--spacer--md);
        display: flex;
        justify-content: flex-end;
      }
      .qsp-input {
        margin-top: var(--spacer--sm);
        width: 100%;
        background-color: var(--background-color);
        border: 1px solid var(--border-color);
        border-radius: var(--border-radius);
        line-height: 1.8;
      }
      .qsp-input:focus {
        outline: none;
        box-shadow: 0 0 3px 1px var(--background-color-contrast);
      }
      .qsp-pause-screen {
        display: flex;
      }
      .qsp-pause-dialog {
        width: 90vw;
      }
      qsp-pause-screen-content {
        flex: 1;
      }
      .qsp-pause-screen-buttons {
        display: flex;
        flex-direction: column;
        width: 120px;
        margin-right: 24px;
      }
      .qsp-pause-screen-buttons .qsp-button {
        width: 100%;
      }
      .qsp-pause-screen-buttons .qsp-button + .qsp-button {
        margin-top: 8px;
        margin-left: 0;
      }
      qsp-slots-list {
        display: grid;
        row-gap: 8px;
        column-gap: 8px;
        grid-template-columns: repeat(var(--game-columns, 3), 1fr);
      }
      .qsp-save-slot {
        all: unset;
        cursor: pointer;
        padding: 4px;
        border: 1px solid var(--border-color);
        text-align: center;
        border-radius: var(--border-radius, 4px);
      }
      .qsp-save-slot:focus {
        box-shadow: 0 0 0 2px #ffffff, 0 0 0 4px var(--background-color-inverted), 0 1px 2px 0 black;
      }
      .qsp-save-slot:hover {
        background-color: var(--background-color-inverted);
        color: var(--background-color-inverted-contrast);
      }
      .qsp-save-slot:disabled {
        cursor: not-allowed;
        opacity: 0.5;
      }
      .qsp-save-slot:disabled:hover {
        background-color: inherit;
        color: inherit;
      }
    </style>
    <qsp-cl>
      <qsp-cl-layer>
        <qsp-cl-dock place="center">
          <qsp-cl-layer>
            <qsp-cl-dock place="center">
              <qsp-cl-pane>
                <qsp-main>
                  <div class="panel panel-background">
                    <qsp-scrollable>
                      <qsp-main-content class="panel-content"></qsp-main-content>
                    </qsp-scrollable>
                  </div>
                </qsp-main>
              </qsp-cl-pane>
            </qsp-cl-dock>
            <qsp-cl-dock place="right" visibility="objs" size="215">
              <qsp-cl-pane visibility="objs">
                <qsp-objects>
                  <div class="panel">
                    <qsp-scrollable>
                      <qsp-objects-list tag="nav" role="menu"></qsp-objects-list>
                    </qsp-scrollable>
                  </div>
                </qsp-objects>
              </qsp-cl-pane>
            </qsp-cl-dock>
            <qsp-cl-dock place="bottom" visibility="acts|vars" size="204">
              <qsp-cl-pane proportion="117349" visibility="acts">
                <qsp-actions>
                  <div class="panel">
                    <qsp-scrollable>
                      <qsp-actions-list tag="nav" role="menu"></qsp-actions-list>
                    </qsp-scrollable>
                  </div>
                </qsp-actions>
              </qsp-cl-pane>
              <qsp-cl-pane proportion="82651" visibility="vars">
                <qsp-stats>
                  <div class="panel">
                    <qsp-scrollable>
                      <qsp-stats-content class="panel-content"></qsp-stats-content>
                    </qsp-scrollable>
                  </div>
                </qsp-stats>
              </qsp-cl-pane>
            </qsp-cl-dock>
          </qsp-cl-layer>
        </qsp-cl-dock>
        <qsp-cl-dock place="bottom" visibility="input" size="41">
          <qsp-cl-pane visibility="input">
            <qsp-cmd>
              <div class="panel">
                <qsp-cmd-input></qsp-cmd-input>
              </div>
            </qsp-cmd>
          </qsp-cl-pane>
        </qsp-cl-dock>
      </qsp-cl-layer>
      <qsp-view modal>
        <div class="panel">
          <div class="view-container">
            <qsp-view-image></qsp-view-image>
          </div>
        </div>
      </qsp-view>
    </qsp-cl>
    <qsp-menu>
      <qsp-scrollable>
        <qsp-menu-list tag="nav" role="menu"></qsp-menu-list>
      </qsp-scrollable>
    </qsp-menu>
    <qsp-msg>
      <qsp-msg-content></qsp-msg-content>
      <div class="qsp-dialog-buttons">
        <qsp-ok-button class="qsp-button" focus><qsp-t>Ok</qsp-t></qsp-ok-button>
      </div>
      <qsp-close-button class="close-button">x</qsp-close-button>
    </qsp-msg>
    <qsp-input>
      <qsp-input-content></qsp-input-content>
      <qsp-input-tag class="qsp-input"></qsp-input-tag>
      <div class="qsp-dialog-buttons">
        <qsp-ok-button class="qsp-button"><qsp-t>Ok</qsp-t></qsp-ok-button>
        <qsp-cancel-button class="qsp-button"><qsp-t>Cancel</qsp-t></qsp-cancel-button>
      </div>
      <qsp-close-button class="close-button">x</qsp-close-button>
    </qsp-input>
    <qsp-pause-screen>
      <div class="qsp-pause-screen">
        <div class="qsp-pause-screen-buttons">
          <button qsp-action="resume" class="qsp-button"><qsp-t>Resume</qsp-t></button>
          <button qsp-action="restart" class="qsp-button"><qsp-t>Restart</qsp-t></button>
          <qsp-show when="NOSAVE=0">
            <button qsp-action="pause:save" class="qsp-button"><qsp-t>Save</qsp-t></button>
            <button qsp-action="pause:load" class="qsp-button"><qsp-t>Load</qsp-t></button>
          </qsp-show>
          <button qsp-action="pause:preferences" class="qsp-button"><qsp-t>Preferences</qsp-t></button>
          <button qsp-action="quit" class="qsp-button"><qsp-t>Quit</qsp-t></button>
        </div>
        <qsp-pause-screen-content>
          <qsp-pause-screen-panel name="credits"></qsp-pause-screen-panel>
          <qsp-show when="NOSAVE=0">
            <qsp-pause-screen-panel name="save">
              <h4><qsp-t>Save game</qsp-t></h4>
              <qsp-slots-list>
                <qsp-save-slot class="qsp-save-slot">
                  <h5 class="qsp-slot-index">
                    <qsp-save-slot-index></qsp-save-slot-index>
                  </h5>
                  <div class="qsp-slot-date">
                    <qsp-save-slot-date><qsp-t>Empty</qsp-t></qsp-save-slot-date>
                  </div>
                </qsp-save-slot>
              </qsp-slots-list>
            </qsp-pause-screen-panel>
            <qsp-pause-screen-panel name="load">
              <h4><qsp-t>Load game</qsp-t></h4>
              <qsp-slots-list>
                <qsp-save-slot class="qsp-save-slot">
                  <h5 class="qsp-slot-index">
                    <qsp-save-slot-index></qsp-save-slot-index>
                  </h5>
                  <div class="qsp-slot-date">
                    <qsp-save-slot-date><qsp-t>Empty</qsp-t></qsp-save-slot-date>
                  </div>
                </qsp-save-slot>
              </qsp-slots-list>
            </qsp-pause-screen-panel>
          </qsp-show>
          <qsp-pause-screen-panel name="preferences">
            <h2><qsp-t>Preferences</qsp-t></h2>
          </qsp-pause-screen-panel>
        </qsp-pause-screen-content>
      </div>
    </qsp-pause-screen>
  </template>
  <template is="qsp-action" tag="button" class="action-item">
    <qsp-action-image class="action-img"></qsp-action-image>
    <qsp-action-name></qsp-action-name>
  </template>
  <template is="qsp-object" tag="button" class="action-item">
    <qsp-object-image class="action-img"></qsp-object-image>
    <qsp-object-name></qsp-object-name>
  </template>
  <template is="qsp-menu-item" tag="button" class="action-item">
    <qsp-menu-image class="action-img"></qsp-menu-image>
    <qsp-menu-name> </qsp-menu-name>
  </template>
  <template is="qsp-menu-separator" tag="div" class="menu-separator"> </template>
</qspider-theme>
