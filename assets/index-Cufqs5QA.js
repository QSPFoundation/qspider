const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./7zz.es6-qIaVK2va.js","./__vite-browser-external-D7Ct-6yo.js"])))=>i.map(i=>d[i]);
var _a=Object.defineProperty;var ba=($,j,_e)=>j in $?_a($,j,{enumerable:!0,configurable:!0,writable:!0,value:_e}):$[j]=_e;var To=($,j,_e)=>ba($,typeof j!="symbol"?j+"":j,_e);function _mergeNamespaces($,j){for(var _e=0;_e<j.length;_e++){const et=j[_e];if(typeof et!="string"&&!Array.isArray(et)){for(const tt in et)if(tt!=="default"&&!(tt in $)){const nt=Object.getOwnPropertyDescriptor(et,tt);nt&&Object.defineProperty($,tt,nt.get?nt:{enumerable:!0,get:()=>et[tt]})}}}return Object.freeze(Object.defineProperty($,Symbol.toStringTag,{value:"Module"}))}(function(){const j=document.createElement("link").relList;if(j&&j.supports&&j.supports("modulepreload"))return;for(const tt of document.querySelectorAll('link[rel="modulepreload"]'))et(tt);new MutationObserver(tt=>{for(const nt of tt)if(nt.type==="childList")for(const rt of nt.addedNodes)rt.tagName==="LINK"&&rt.rel==="modulepreload"&&et(rt)}).observe(document,{childList:!0,subtree:!0});function _e(tt){const nt={};return tt.integrity&&(nt.integrity=tt.integrity),tt.referrerPolicy&&(nt.referrerPolicy=tt.referrerPolicy),tt.crossOrigin==="use-credentials"?nt.credentials="include":tt.crossOrigin==="anonymous"?nt.credentials="omit":nt.credentials="same-origin",nt}function et(tt){if(tt.ep)return;tt.ep=!0;const nt=_e(tt);fetch(tt.href,nt)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs($){return $&&$.__esModule&&Object.prototype.hasOwnProperty.call($,"default")?$.default:$}function getAugmentedNamespace($){if($.__esModule)return $;var j=$.default;if(typeof j=="function"){var _e=function et(){return this instanceof et?Reflect.construct(j,arguments,this.constructor):j.apply(this,arguments)};_e.prototype=j.prototype}else _e={};return Object.defineProperty(_e,"__esModule",{value:!0}),Object.keys($).forEach(function(et){var tt=Object.getOwnPropertyDescriptor($,et);Object.defineProperty(_e,et,tt.get?tt:{enumerable:!0,get:function(){return $[et]}})}),_e}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react$2={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$4=Symbol.for("react.element"),n$6=Symbol.for("react.portal"),p$4=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r$5=Symbol.for("react.profiler"),t$5=Symbol.for("react.provider"),u$3=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$2($){return $===null||typeof $!="object"?null:($=z$1&&$[z$1]||$["@@iterator"],typeof $=="function"?$:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$1={};function E$2($,j,_e){this.props=$,this.context=j,this.refs=D$1,this.updater=_e||B$1}E$2.prototype.isReactComponent={};E$2.prototype.setState=function($,j){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,j,"setState")};E$2.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function F(){}F.prototype=E$2.prototype;function G$1($,j,_e){this.props=$,this.context=j,this.refs=D$1,this.updater=_e||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$2(H$1,E$2.prototype);H$1.isPureReactComponent=!0;var I$2=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$2($,j,_e){var et,tt={},nt=null,rt=null;if(j!=null)for(et in j.ref!==void 0&&(rt=j.ref),j.key!==void 0&&(nt=""+j.key),j)J.call(j,et)&&!L$1.hasOwnProperty(et)&&(tt[et]=j[et]);var ot=arguments.length-2;if(ot===1)tt.children=_e;else if(1<ot){for(var it=Array(ot),at=0;at<ot;at++)it[at]=arguments[at+2];tt.children=it}if($&&$.defaultProps)for(et in ot=$.defaultProps,ot)tt[et]===void 0&&(tt[et]=ot[et]);return{$$typeof:l$4,type:$,key:nt,ref:rt,props:tt,_owner:K$1.current}}function N$1($,j){return{$$typeof:l$4,type:$.type,key:j,ref:$.ref,props:$.props,_owner:$._owner}}function O$2($){return typeof $=="object"&&$!==null&&$.$$typeof===l$4}function escape$1($){var j={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(_e){return j[_e]})}var P$1=/\/+/g;function Q$1($,j){return typeof $=="object"&&$!==null&&$.key!=null?escape$1(""+$.key):j.toString(36)}function R$1($,j,_e,et,tt){var nt=typeof $;(nt==="undefined"||nt==="boolean")&&($=null);var rt=!1;if($===null)rt=!0;else switch(nt){case"string":case"number":rt=!0;break;case"object":switch($.$$typeof){case l$4:case n$6:rt=!0}}if(rt)return rt=$,tt=tt(rt),$=et===""?"."+Q$1(rt,0):et,I$2(tt)?(_e="",$!=null&&(_e=$.replace(P$1,"$&/")+"/"),R$1(tt,j,_e,"",function(at){return at})):tt!=null&&(O$2(tt)&&(tt=N$1(tt,_e+(!tt.key||rt&&rt.key===tt.key?"":(""+tt.key).replace(P$1,"$&/")+"/")+$)),j.push(tt)),1;if(rt=0,et=et===""?".":et+":",I$2($))for(var ot=0;ot<$.length;ot++){nt=$[ot];var it=et+Q$1(nt,ot);rt+=R$1(nt,j,_e,it,tt)}else if(it=A$2($),typeof it=="function")for($=it.call($),ot=0;!(nt=$.next()).done;)nt=nt.value,it=et+Q$1(nt,ot++),rt+=R$1(nt,j,_e,it,tt);else if(nt==="object")throw j=String($),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.");return rt}function S$2($,j,_e){if($==null)return $;var et=[],tt=0;return R$1($,et,"","",function(nt){return j.call(_e,nt,tt++)}),et}function T$2($){if($._status===-1){var j=$._result;j=j(),j.then(function(_e){($._status===0||$._status===-1)&&($._status=1,$._result=_e)},function(_e){($._status===0||$._status===-1)&&($._status=2,$._result=_e)}),$._status===-1&&($._status=0,$._result=j)}if($._status===1)return $._result.default;throw $._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$2,forEach:function($,j,_e){S$2($,function(){j.apply(this,arguments)},_e)},count:function($){var j=0;return S$2($,function(){j++}),j},toArray:function($){return S$2($,function(j){return j})||[]},only:function($){if(!O$2($))throw Error("React.Children.only expected to receive a single React element child.");return $}};react_production_min.Component=E$2;react_production_min.Fragment=p$4;react_production_min.Profiler=r$5;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$2;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function($,j,_e){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var et=C$2({},$.props),tt=$.key,nt=$.ref,rt=$._owner;if(j!=null){if(j.ref!==void 0&&(nt=j.ref,rt=K$1.current),j.key!==void 0&&(tt=""+j.key),$.type&&$.type.defaultProps)var ot=$.type.defaultProps;for(it in j)J.call(j,it)&&!L$1.hasOwnProperty(it)&&(et[it]=j[it]===void 0&&ot!==void 0?ot[it]:j[it])}var it=arguments.length-2;if(it===1)et.children=_e;else if(1<it){ot=Array(it);for(var at=0;at<it;at++)ot[at]=arguments[at+2];et.children=ot}return{$$typeof:l$4,type:$.type,key:tt,ref:nt,props:et,_owner:rt}};react_production_min.createContext=function($){return $={$$typeof:u$3,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:t$5,_context:$},$.Consumer=$};react_production_min.createElement=M$2;react_production_min.createFactory=function($){var j=M$2.bind(null,$);return j.type=$,j};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function($){return{$$typeof:v$2,render:$}};react_production_min.isValidElement=O$2;react_production_min.lazy=function($){return{$$typeof:y,_payload:{_status:-1,_result:$},_init:T$2}};react_production_min.memo=function($,j){return{$$typeof:x,type:$,compare:j===void 0?null:j}};react_production_min.startTransition=function($){var j=V$1.transition;V$1.transition={};try{$()}finally{V$1.transition=j}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function($,j){return U$1.current.useCallback($,j)};react_production_min.useContext=function($){return U$1.current.useContext($)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function($){return U$1.current.useDeferredValue($)};react_production_min.useEffect=function($,j){return U$1.current.useEffect($,j)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function($,j,_e){return U$1.current.useImperativeHandle($,j,_e)};react_production_min.useInsertionEffect=function($,j){return U$1.current.useInsertionEffect($,j)};react_production_min.useLayoutEffect=function($,j){return U$1.current.useLayoutEffect($,j)};react_production_min.useMemo=function($,j){return U$1.current.useMemo($,j)};react_production_min.useReducer=function($,j,_e){return U$1.current.useReducer($,j,_e)};react_production_min.useRef=function($){return U$1.current.useRef($)};react_production_min.useState=function($){return U$1.current.useState($)};react_production_min.useSyncExternalStore=function($,j,_e){return U$1.current.useSyncExternalStore($,j,_e)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react$2.exports=react_production_min;var reactExports=react$2.exports;const React$1=getDefaultExportFromCjs(reactExports),React$2=_mergeNamespaces({__proto__:null,default:React$1},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$3=reactExports,k$1=Symbol.for("react.element"),l$3=Symbol.for("react.fragment"),m$3=Object.prototype.hasOwnProperty,n$5=f$3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$3={key:!0,ref:!0,__self:!0,__source:!0};function q$1($,j,_e){var et,tt={},nt=null,rt=null;_e!==void 0&&(nt=""+_e),j.key!==void 0&&(nt=""+j.key),j.ref!==void 0&&(rt=j.ref);for(et in j)m$3.call(j,et)&&!p$3.hasOwnProperty(et)&&(tt[et]=j[et]);if($&&$.defaultProps)for(et in j=$.defaultProps,j)tt[et]===void 0&&(tt[et]=j[et]);return{$$typeof:k$1,type:$,key:nt,ref:rt,props:tt,_owner:n$5.current}}reactJsxRuntime_production_min.Fragment=l$3;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function($){function j(Wt,Qt){var on=Wt.length;Wt.push(Qt);e:for(;0<on;){var nn=on-1>>>1,cn=Wt[nn];if(0<tt(cn,Qt))Wt[nn]=Qt,Wt[on]=cn,on=nn;else break e}}function _e(Wt){return Wt.length===0?null:Wt[0]}function et(Wt){if(Wt.length===0)return null;var Qt=Wt[0],on=Wt.pop();if(on!==Qt){Wt[0]=on;e:for(var nn=0,cn=Wt.length,Sn=cn>>>1;nn<Sn;){var vn=2*(nn+1)-1,En=Wt[vn],Rn=vn+1,tn=Wt[Rn];if(0>tt(En,on))Rn<cn&&0>tt(tn,En)?(Wt[nn]=tn,Wt[Rn]=on,nn=Rn):(Wt[nn]=En,Wt[vn]=on,nn=vn);else if(Rn<cn&&0>tt(tn,on))Wt[nn]=tn,Wt[Rn]=on,nn=Rn;else break e}}return Qt}function tt(Wt,Qt){var on=Wt.sortIndex-Qt.sortIndex;return on!==0?on:Wt.id-Qt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var nt=performance;$.unstable_now=function(){return nt.now()}}else{var rt=Date,ot=rt.now();$.unstable_now=function(){return rt.now()-ot}}var it=[],at=[],dt=1,st=null,ut=3,ft=!1,pt=!1,gt=!1,yt=typeof setTimeout=="function"?setTimeout:null,mt=typeof clearTimeout=="function"?clearTimeout:null,vt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _t(Wt){for(var Qt=_e(at);Qt!==null;){if(Qt.callback===null)et(at);else if(Qt.startTime<=Wt)et(at),Qt.sortIndex=Qt.expirationTime,j(it,Qt);else break;Qt=_e(at)}}function St(Wt){if(gt=!1,_t(Wt),!pt)if(_e(it)!==null)pt=!0,Jt(At);else{var Qt=_e(at);Qt!==null&&un(St,Qt.startTime-Wt)}}function At(Wt,Qt){pt=!1,gt&&(gt=!1,mt(Rt),Rt=-1),ft=!0;var on=ut;try{for(_t(Qt),st=_e(it);st!==null&&(!(st.expirationTime>Qt)||Wt&&!Yt());){var nn=st.callback;if(typeof nn=="function"){st.callback=null,ut=st.priorityLevel;var cn=nn(st.expirationTime<=Qt);Qt=$.unstable_now(),typeof cn=="function"?st.callback=cn:st===_e(it)&&et(it),_t(Qt)}else et(it);st=_e(it)}if(st!==null)var Sn=!0;else{var vn=_e(at);vn!==null&&un(St,vn.startTime-Qt),Sn=!1}return Sn}finally{st=null,ut=on,ft=!1}}var kt=!1,bt=null,Rt=-1,Ot=5,Ut=-1;function Yt(){return!($.unstable_now()-Ut<Ot)}function rn(){if(bt!==null){var Wt=$.unstable_now();Ut=Wt;var Qt=!0;try{Qt=bt(!0,Wt)}finally{Qt?mn():(kt=!1,bt=null)}}else kt=!1}var mn;if(typeof vt=="function")mn=function(){vt(rn)};else if(typeof MessageChannel<"u"){var qt=new MessageChannel,Zt=qt.port2;qt.port1.onmessage=rn,mn=function(){Zt.postMessage(null)}}else mn=function(){yt(rn,0)};function Jt(Wt){bt=Wt,kt||(kt=!0,mn())}function un(Wt,Qt){Rt=yt(function(){Wt($.unstable_now())},Qt)}$.unstable_IdlePriority=5,$.unstable_ImmediatePriority=1,$.unstable_LowPriority=4,$.unstable_NormalPriority=3,$.unstable_Profiling=null,$.unstable_UserBlockingPriority=2,$.unstable_cancelCallback=function(Wt){Wt.callback=null},$.unstable_continueExecution=function(){pt||ft||(pt=!0,Jt(At))},$.unstable_forceFrameRate=function(Wt){0>Wt||125<Wt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ot=0<Wt?Math.floor(1e3/Wt):5},$.unstable_getCurrentPriorityLevel=function(){return ut},$.unstable_getFirstCallbackNode=function(){return _e(it)},$.unstable_next=function(Wt){switch(ut){case 1:case 2:case 3:var Qt=3;break;default:Qt=ut}var on=ut;ut=Qt;try{return Wt()}finally{ut=on}},$.unstable_pauseExecution=function(){},$.unstable_requestPaint=function(){},$.unstable_runWithPriority=function(Wt,Qt){switch(Wt){case 1:case 2:case 3:case 4:case 5:break;default:Wt=3}var on=ut;ut=Wt;try{return Qt()}finally{ut=on}},$.unstable_scheduleCallback=function(Wt,Qt,on){var nn=$.unstable_now();switch(typeof on=="object"&&on!==null?(on=on.delay,on=typeof on=="number"&&0<on?nn+on:nn):on=nn,Wt){case 1:var cn=-1;break;case 2:cn=250;break;case 5:cn=1073741823;break;case 4:cn=1e4;break;default:cn=5e3}return cn=on+cn,Wt={id:dt++,callback:Qt,priorityLevel:Wt,startTime:on,expirationTime:cn,sortIndex:-1},on>nn?(Wt.sortIndex=on,j(at,Wt),_e(it)===null&&Wt===_e(at)&&(gt?(mt(Rt),Rt=-1):gt=!0,un(St,on-nn))):(Wt.sortIndex=cn,j(it,Wt),pt||ft||(pt=!0,Jt(At))),Wt},$.unstable_shouldYield=Yt,$.unstable_wrapCallback=function(Wt){var Qt=ut;return function(){var on=ut;ut=Qt;try{return Wt.apply(this,arguments)}finally{ut=on}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$2($){for(var j="https://reactjs.org/docs/error-decoder.html?invariant="+$,_e=1;_e<arguments.length;_e++)j+="&args[]="+encodeURIComponent(arguments[_e]);return"Minified React error #"+$+"; visit "+j+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa($,j){ha($,j),ha($+"Capture",j)}function ha($,j){for(ea[$]=j,$=0;$<j.length;$++)da.add(j[$])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa($){return ja.call(ma,$)?!0:ja.call(la,$)?!1:ka.test($)?ma[$]=!0:(la[$]=!0,!1)}function pa($,j,_e,et){if(_e!==null&&_e.type===0)return!1;switch(typeof j){case"function":case"symbol":return!0;case"boolean":return et?!1:_e!==null?!_e.acceptsBooleans:($=$.toLowerCase().slice(0,5),$!=="data-"&&$!=="aria-");default:return!1}}function qa($,j,_e,et){if(j===null||typeof j>"u"||pa($,j,_e,et))return!0;if(et)return!1;if(_e!==null)switch(_e.type){case 3:return!j;case 4:return j===!1;case 5:return isNaN(j);case 6:return isNaN(j)||1>j}return!1}function v$1($,j,_e,et,tt,nt,rt){this.acceptsBooleans=j===2||j===3||j===4,this.attributeName=et,this.attributeNamespace=tt,this.mustUseProperty=_e,this.propertyName=$,this.type=j,this.sanitizeURL=nt,this.removeEmptyString=rt}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function($){z[$]=new v$1($,0,!1,$,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function($){var j=$[0];z[j]=new v$1(j,1,!1,$[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function($){z[$]=new v$1($,2,!1,$.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function($){z[$]=new v$1($,2,!1,$,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function($){z[$]=new v$1($,3,!1,$.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function($){z[$]=new v$1($,3,!0,$,null,!1,!1)});["capture","download"].forEach(function($){z[$]=new v$1($,4,!1,$,null,!1,!1)});["cols","rows","size","span"].forEach(function($){z[$]=new v$1($,6,!1,$,null,!1,!1)});["rowSpan","start"].forEach(function($){z[$]=new v$1($,5,!1,$.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa($){return $[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function($){var j=$.replace(ra,sa);z[j]=new v$1(j,1,!1,$,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function($){var j=$.replace(ra,sa);z[j]=new v$1(j,1,!1,$,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function($){var j=$.replace(ra,sa);z[j]=new v$1(j,1,!1,$,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function($){z[$]=new v$1($,1,!1,$.toLowerCase(),null,!1,!1)});z.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function($){z[$]=new v$1($,1,!1,$.toLowerCase(),null,!0,!0)});function ta($,j,_e,et){var tt=z.hasOwnProperty(j)?z[j]:null;(tt!==null?tt.type!==0:et||!(2<j.length)||j[0]!=="o"&&j[0]!=="O"||j[1]!=="n"&&j[1]!=="N")&&(qa(j,_e,tt,et)&&(_e=null),et||tt===null?oa(j)&&(_e===null?$.removeAttribute(j):$.setAttribute(j,""+_e)):tt.mustUseProperty?$[tt.propertyName]=_e===null?tt.type===3?!1:"":_e:(j=tt.attributeName,et=tt.attributeNamespace,_e===null?$.removeAttribute(j):(tt=tt.type,_e=tt===3||tt===4&&_e===!0?"":""+_e,et?$.setAttributeNS(et,j,_e):$.setAttribute(j,_e))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka($){return $===null||typeof $!="object"?null:($=Ja&&$[Ja]||$["@@iterator"],typeof $=="function"?$:null)}var A$1=Object.assign,La;function Ma($){if(La===void 0)try{throw Error()}catch(_e){var j=_e.stack.trim().match(/\n( *(at )?)/);La=j&&j[1]||""}return`
`+La+$}var Na=!1;function Oa($,j){if(!$||Na)return"";Na=!0;var _e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(j)if(j=function(){throw Error()},Object.defineProperty(j.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(j,[])}catch(at){var et=at}Reflect.construct($,[],j)}else{try{j.call()}catch(at){et=at}$.call(j.prototype)}else{try{throw Error()}catch(at){et=at}$()}}catch(at){if(at&&et&&typeof at.stack=="string"){for(var tt=at.stack.split(`
`),nt=et.stack.split(`
`),rt=tt.length-1,ot=nt.length-1;1<=rt&&0<=ot&&tt[rt]!==nt[ot];)ot--;for(;1<=rt&&0<=ot;rt--,ot--)if(tt[rt]!==nt[ot]){if(rt!==1||ot!==1)do if(rt--,ot--,0>ot||tt[rt]!==nt[ot]){var it=`
`+tt[rt].replace(" at new "," at ");return $.displayName&&it.includes("<anonymous>")&&(it=it.replace("<anonymous>",$.displayName)),it}while(1<=rt&&0<=ot);break}}}finally{Na=!1,Error.prepareStackTrace=_e}return($=$?$.displayName||$.name:"")?Ma($):""}function Pa($){switch($.tag){case 5:return Ma($.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return $=Oa($.type,!1),$;case 11:return $=Oa($.type.render,!1),$;case 1:return $=Oa($.type,!0),$;default:return""}}function Qa($){if($==null)return null;if(typeof $=="function")return $.displayName||$.name||null;if(typeof $=="string")return $;switch($){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof $=="object")switch($.$$typeof){case Ca:return($.displayName||"Context")+".Consumer";case Ba:return($._context.displayName||"Context")+".Provider";case Da:var j=$.render;return $=$.displayName,$||($=j.displayName||j.name||"",$=$!==""?"ForwardRef("+$+")":"ForwardRef"),$;case Ga:return j=$.displayName||null,j!==null?j:Qa($.type)||"Memo";case Ha:j=$._payload,$=$._init;try{return Qa($(j))}catch{}}return null}function Ra($){var j=$.type;switch($.tag){case 24:return"Cache";case 9:return(j.displayName||"Context")+".Consumer";case 10:return(j._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return $=j.render,$=$.displayName||$.name||"",j.displayName||($!==""?"ForwardRef("+$+")":"ForwardRef");case 7:return"Fragment";case 5:return j;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(j);case 8:return j===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof j=="function")return j.displayName||j.name||null;if(typeof j=="string")return j}return null}function Sa($){switch(typeof $){case"boolean":case"number":case"string":case"undefined":return $;case"object":return $;default:return""}}function Ta($){var j=$.type;return($=$.nodeName)&&$.toLowerCase()==="input"&&(j==="checkbox"||j==="radio")}function Ua($){var j=Ta($)?"checked":"value",_e=Object.getOwnPropertyDescriptor($.constructor.prototype,j),et=""+$[j];if(!$.hasOwnProperty(j)&&typeof _e<"u"&&typeof _e.get=="function"&&typeof _e.set=="function"){var tt=_e.get,nt=_e.set;return Object.defineProperty($,j,{configurable:!0,get:function(){return tt.call(this)},set:function(rt){et=""+rt,nt.call(this,rt)}}),Object.defineProperty($,j,{enumerable:_e.enumerable}),{getValue:function(){return et},setValue:function(rt){et=""+rt},stopTracking:function(){$._valueTracker=null,delete $[j]}}}}function Va($){$._valueTracker||($._valueTracker=Ua($))}function Wa($){if(!$)return!1;var j=$._valueTracker;if(!j)return!0;var _e=j.getValue(),et="";return $&&(et=Ta($)?$.checked?"true":"false":$.value),$=et,$!==_e?(j.setValue($),!0):!1}function Xa($){if($=$||(typeof document<"u"?document:void 0),typeof $>"u")return null;try{return $.activeElement||$.body}catch{return $.body}}function Ya($,j){var _e=j.checked;return A$1({},j,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:_e??$._wrapperState.initialChecked})}function Za($,j){var _e=j.defaultValue==null?"":j.defaultValue,et=j.checked!=null?j.checked:j.defaultChecked;_e=Sa(j.value!=null?j.value:_e),$._wrapperState={initialChecked:et,initialValue:_e,controlled:j.type==="checkbox"||j.type==="radio"?j.checked!=null:j.value!=null}}function ab($,j){j=j.checked,j!=null&&ta($,"checked",j,!1)}function bb($,j){ab($,j);var _e=Sa(j.value),et=j.type;if(_e!=null)et==="number"?(_e===0&&$.value===""||$.value!=_e)&&($.value=""+_e):$.value!==""+_e&&($.value=""+_e);else if(et==="submit"||et==="reset"){$.removeAttribute("value");return}j.hasOwnProperty("value")?cb($,j.type,_e):j.hasOwnProperty("defaultValue")&&cb($,j.type,Sa(j.defaultValue)),j.checked==null&&j.defaultChecked!=null&&($.defaultChecked=!!j.defaultChecked)}function db($,j,_e){if(j.hasOwnProperty("value")||j.hasOwnProperty("defaultValue")){var et=j.type;if(!(et!=="submit"&&et!=="reset"||j.value!==void 0&&j.value!==null))return;j=""+$._wrapperState.initialValue,_e||j===$.value||($.value=j),$.defaultValue=j}_e=$.name,_e!==""&&($.name=""),$.defaultChecked=!!$._wrapperState.initialChecked,_e!==""&&($.name=_e)}function cb($,j,_e){(j!=="number"||Xa($.ownerDocument)!==$)&&(_e==null?$.defaultValue=""+$._wrapperState.initialValue:$.defaultValue!==""+_e&&($.defaultValue=""+_e))}var eb=Array.isArray;function fb($,j,_e,et){if($=$.options,j){j={};for(var tt=0;tt<_e.length;tt++)j["$"+_e[tt]]=!0;for(_e=0;_e<$.length;_e++)tt=j.hasOwnProperty("$"+$[_e].value),$[_e].selected!==tt&&($[_e].selected=tt),tt&&et&&($[_e].defaultSelected=!0)}else{for(_e=""+Sa(_e),j=null,tt=0;tt<$.length;tt++){if($[tt].value===_e){$[tt].selected=!0,et&&($[tt].defaultSelected=!0);return}j!==null||$[tt].disabled||(j=$[tt])}j!==null&&(j.selected=!0)}}function gb($,j){if(j.dangerouslySetInnerHTML!=null)throw Error(p$2(91));return A$1({},j,{value:void 0,defaultValue:void 0,children:""+$._wrapperState.initialValue})}function hb($,j){var _e=j.value;if(_e==null){if(_e=j.children,j=j.defaultValue,_e!=null){if(j!=null)throw Error(p$2(92));if(eb(_e)){if(1<_e.length)throw Error(p$2(93));_e=_e[0]}j=_e}j==null&&(j=""),_e=j}$._wrapperState={initialValue:Sa(_e)}}function ib($,j){var _e=Sa(j.value),et=Sa(j.defaultValue);_e!=null&&(_e=""+_e,_e!==$.value&&($.value=_e),j.defaultValue==null&&$.defaultValue!==_e&&($.defaultValue=_e)),et!=null&&($.defaultValue=""+et)}function jb($){var j=$.textContent;j===$._wrapperState.initialValue&&j!==""&&j!==null&&($.value=j)}function kb($){switch($){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb($,j){return $==null||$==="http://www.w3.org/1999/xhtml"?kb(j):$==="http://www.w3.org/2000/svg"&&j==="foreignObject"?"http://www.w3.org/1999/xhtml":$}var mb,nb=function($){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(j,_e,et,tt){MSApp.execUnsafeLocalFunction(function(){return $(j,_e,et,tt)})}:$}(function($,j){if($.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in $)$.innerHTML=j;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+j.valueOf().toString()+"</svg>",j=mb.firstChild;$.firstChild;)$.removeChild($.firstChild);for(;j.firstChild;)$.appendChild(j.firstChild)}});function ob($,j){if(j){var _e=$.firstChild;if(_e&&_e===$.lastChild&&_e.nodeType===3){_e.nodeValue=j;return}}$.textContent=j}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function($){qb.forEach(function(j){j=j+$.charAt(0).toUpperCase()+$.substring(1),pb[j]=pb[$]})});function rb($,j,_e){return j==null||typeof j=="boolean"||j===""?"":_e||typeof j!="number"||j===0||pb.hasOwnProperty($)&&pb[$]?(""+j).trim():j+"px"}function sb($,j){$=$.style;for(var _e in j)if(j.hasOwnProperty(_e)){var et=_e.indexOf("--")===0,tt=rb(_e,j[_e],et);_e==="float"&&(_e="cssFloat"),et?$.setProperty(_e,tt):$[_e]=tt}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub($,j){if(j){if(tb[$]&&(j.children!=null||j.dangerouslySetInnerHTML!=null))throw Error(p$2(137,$));if(j.dangerouslySetInnerHTML!=null){if(j.children!=null)throw Error(p$2(60));if(typeof j.dangerouslySetInnerHTML!="object"||!("__html"in j.dangerouslySetInnerHTML))throw Error(p$2(61))}if(j.style!=null&&typeof j.style!="object")throw Error(p$2(62))}}function vb($,j){if($.indexOf("-")===-1)return typeof j.is=="string";switch($){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb($){return $=$.target||$.srcElement||window,$.correspondingUseElement&&($=$.correspondingUseElement),$.nodeType===3?$.parentNode:$}var yb=null,zb=null,Ab=null;function Bb($){if($=Cb($)){if(typeof yb!="function")throw Error(p$2(280));var j=$.stateNode;j&&(j=Db(j),yb($.stateNode,$.type,j))}}function Eb($){zb?Ab?Ab.push($):Ab=[$]:zb=$}function Fb(){if(zb){var $=zb,j=Ab;if(Ab=zb=null,Bb($),j)for($=0;$<j.length;$++)Bb(j[$])}}function Gb($,j){return $(j)}function Hb(){}var Ib=!1;function Jb($,j,_e){if(Ib)return $(j,_e);Ib=!0;try{return Gb($,j,_e)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb($,j){var _e=$.stateNode;if(_e===null)return null;var et=Db(_e);if(et===null)return null;_e=et[j];e:switch(j){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(et=!et.disabled)||($=$.type,et=!($==="button"||$==="input"||$==="select"||$==="textarea")),$=!et;break e;default:$=!1}if($)return null;if(_e&&typeof _e!="function")throw Error(p$2(231,j,typeof _e));return _e}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb($,j,_e,et,tt,nt,rt,ot,it){var at=Array.prototype.slice.call(arguments,3);try{j.apply(_e,at)}catch(dt){this.onError(dt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function($){Ob=!0,Pb=$}};function Tb($,j,_e,et,tt,nt,rt,ot,it){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub($,j,_e,et,tt,nt,rt,ot,it){if(Tb.apply(this,arguments),Ob){if(Ob){var at=Pb;Ob=!1,Pb=null}else throw Error(p$2(198));Qb||(Qb=!0,Rb=at)}}function Vb($){var j=$,_e=$;if($.alternate)for(;j.return;)j=j.return;else{$=j;do j=$,j.flags&4098&&(_e=j.return),$=j.return;while($)}return j.tag===3?_e:null}function Wb($){if($.tag===13){var j=$.memoizedState;if(j===null&&($=$.alternate,$!==null&&(j=$.memoizedState)),j!==null)return j.dehydrated}return null}function Xb($){if(Vb($)!==$)throw Error(p$2(188))}function Yb($){var j=$.alternate;if(!j){if(j=Vb($),j===null)throw Error(p$2(188));return j!==$?null:$}for(var _e=$,et=j;;){var tt=_e.return;if(tt===null)break;var nt=tt.alternate;if(nt===null){if(et=tt.return,et!==null){_e=et;continue}break}if(tt.child===nt.child){for(nt=tt.child;nt;){if(nt===_e)return Xb(tt),$;if(nt===et)return Xb(tt),j;nt=nt.sibling}throw Error(p$2(188))}if(_e.return!==et.return)_e=tt,et=nt;else{for(var rt=!1,ot=tt.child;ot;){if(ot===_e){rt=!0,_e=tt,et=nt;break}if(ot===et){rt=!0,et=tt,_e=nt;break}ot=ot.sibling}if(!rt){for(ot=nt.child;ot;){if(ot===_e){rt=!0,_e=nt,et=tt;break}if(ot===et){rt=!0,et=nt,_e=tt;break}ot=ot.sibling}if(!rt)throw Error(p$2(189))}}if(_e.alternate!==et)throw Error(p$2(190))}if(_e.tag!==3)throw Error(p$2(188));return _e.stateNode.current===_e?$:j}function Zb($){return $=Yb($),$!==null?$b($):null}function $b($){if($.tag===5||$.tag===6)return $;for($=$.child;$!==null;){var j=$b($);if(j!==null)return j;$=$.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc($){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,$,void 0,($.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc($){return $>>>=0,$===0?32:31-(pc($)/qc|0)|0}var rc=64,sc=4194304;function tc($){switch($&-$){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return $&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return $&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return $}}function uc($,j){var _e=$.pendingLanes;if(_e===0)return 0;var et=0,tt=$.suspendedLanes,nt=$.pingedLanes,rt=_e&268435455;if(rt!==0){var ot=rt&~tt;ot!==0?et=tc(ot):(nt&=rt,nt!==0&&(et=tc(nt)))}else rt=_e&~tt,rt!==0?et=tc(rt):nt!==0&&(et=tc(nt));if(et===0)return 0;if(j!==0&&j!==et&&!(j&tt)&&(tt=et&-et,nt=j&-j,tt>=nt||tt===16&&(nt&4194240)!==0))return j;if(et&4&&(et|=_e&16),j=$.entangledLanes,j!==0)for($=$.entanglements,j&=et;0<j;)_e=31-oc(j),tt=1<<_e,et|=$[_e],j&=~tt;return et}function vc($,j){switch($){case 1:case 2:case 4:return j+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return j+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc($,j){for(var _e=$.suspendedLanes,et=$.pingedLanes,tt=$.expirationTimes,nt=$.pendingLanes;0<nt;){var rt=31-oc(nt),ot=1<<rt,it=tt[rt];it===-1?(!(ot&_e)||ot&et)&&(tt[rt]=vc(ot,j)):it<=j&&($.expiredLanes|=ot),nt&=~ot}}function xc($){return $=$.pendingLanes&-1073741825,$!==0?$:$&1073741824?1073741824:0}function yc(){var $=rc;return rc<<=1,!(rc&4194240)&&(rc=64),$}function zc($){for(var j=[],_e=0;31>_e;_e++)j.push($);return j}function Ac($,j,_e){$.pendingLanes|=j,j!==536870912&&($.suspendedLanes=0,$.pingedLanes=0),$=$.eventTimes,j=31-oc(j),$[j]=_e}function Bc($,j){var _e=$.pendingLanes&~j;$.pendingLanes=j,$.suspendedLanes=0,$.pingedLanes=0,$.expiredLanes&=j,$.mutableReadLanes&=j,$.entangledLanes&=j,j=$.entanglements;var et=$.eventTimes;for($=$.expirationTimes;0<_e;){var tt=31-oc(_e),nt=1<<tt;j[tt]=0,et[tt]=-1,$[tt]=-1,_e&=~nt}}function Cc($,j){var _e=$.entangledLanes|=j;for($=$.entanglements;_e;){var et=31-oc(_e),tt=1<<et;tt&j|$[et]&j&&($[et]|=j),_e&=~tt}}var C$1=0;function Dc($){return $&=-$,1<$?4<$?$&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc($,j){switch($){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(j.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(j.pointerId)}}function Tc($,j,_e,et,tt,nt){return $===null||$.nativeEvent!==nt?($={blockedOn:j,domEventName:_e,eventSystemFlags:et,nativeEvent:nt,targetContainers:[tt]},j!==null&&(j=Cb(j),j!==null&&Fc(j)),$):($.eventSystemFlags|=et,j=$.targetContainers,tt!==null&&j.indexOf(tt)===-1&&j.push(tt),$)}function Uc($,j,_e,et,tt){switch(j){case"focusin":return Lc=Tc(Lc,$,j,_e,et,tt),!0;case"dragenter":return Mc=Tc(Mc,$,j,_e,et,tt),!0;case"mouseover":return Nc=Tc(Nc,$,j,_e,et,tt),!0;case"pointerover":var nt=tt.pointerId;return Oc.set(nt,Tc(Oc.get(nt)||null,$,j,_e,et,tt)),!0;case"gotpointercapture":return nt=tt.pointerId,Pc.set(nt,Tc(Pc.get(nt)||null,$,j,_e,et,tt)),!0}return!1}function Vc($){var j=Wc($.target);if(j!==null){var _e=Vb(j);if(_e!==null){if(j=_e.tag,j===13){if(j=Wb(_e),j!==null){$.blockedOn=j,Ic($.priority,function(){Gc(_e)});return}}else if(j===3&&_e.stateNode.current.memoizedState.isDehydrated){$.blockedOn=_e.tag===3?_e.stateNode.containerInfo:null;return}}}$.blockedOn=null}function Xc($){if($.blockedOn!==null)return!1;for(var j=$.targetContainers;0<j.length;){var _e=Yc($.domEventName,$.eventSystemFlags,j[0],$.nativeEvent);if(_e===null){_e=$.nativeEvent;var et=new _e.constructor(_e.type,_e);wb=et,_e.target.dispatchEvent(et),wb=null}else return j=Cb(_e),j!==null&&Fc(j),$.blockedOn=_e,!1;j.shift()}return!0}function Zc($,j,_e){Xc($)&&_e.delete(j)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad($,j){$.blockedOn===j&&($.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd($){function j(tt){return ad(tt,$)}if(0<Kc.length){ad(Kc[0],$);for(var _e=1;_e<Kc.length;_e++){var et=Kc[_e];et.blockedOn===$&&(et.blockedOn=null)}}for(Lc!==null&&ad(Lc,$),Mc!==null&&ad(Mc,$),Nc!==null&&ad(Nc,$),Oc.forEach(j),Pc.forEach(j),_e=0;_e<Qc.length;_e++)et=Qc[_e],et.blockedOn===$&&(et.blockedOn=null);for(;0<Qc.length&&(_e=Qc[0],_e.blockedOn===null);)Vc(_e),_e.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed($,j,_e,et){var tt=C$1,nt=cd.transition;cd.transition=null;try{C$1=1,fd($,j,_e,et)}finally{C$1=tt,cd.transition=nt}}function gd($,j,_e,et){var tt=C$1,nt=cd.transition;cd.transition=null;try{C$1=4,fd($,j,_e,et)}finally{C$1=tt,cd.transition=nt}}function fd($,j,_e,et){if(dd){var tt=Yc($,j,_e,et);if(tt===null)hd($,j,et,id,_e),Sc($,et);else if(Uc(tt,$,j,_e,et))et.stopPropagation();else if(Sc($,et),j&4&&-1<Rc.indexOf($)){for(;tt!==null;){var nt=Cb(tt);if(nt!==null&&Ec(nt),nt=Yc($,j,_e,et),nt===null&&hd($,j,et,id,_e),nt===tt)break;tt=nt}tt!==null&&et.stopPropagation()}else hd($,j,et,null,_e)}}var id=null;function Yc($,j,_e,et){if(id=null,$=xb(et),$=Wc($),$!==null)if(j=Vb($),j===null)$=null;else if(_e=j.tag,_e===13){if($=Wb(j),$!==null)return $;$=null}else if(_e===3){if(j.stateNode.current.memoizedState.isDehydrated)return j.tag===3?j.stateNode.containerInfo:null;$=null}else j!==$&&($=null);return id=$,null}function jd($){switch($){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var $,j=ld,_e=j.length,et,tt="value"in kd?kd.value:kd.textContent,nt=tt.length;for($=0;$<_e&&j[$]===tt[$];$++);var rt=_e-$;for(et=1;et<=rt&&j[_e-et]===tt[nt-et];et++);return md=tt.slice($,1<et?1-et:void 0)}function od($){var j=$.keyCode;return"charCode"in $?($=$.charCode,$===0&&j===13&&($=13)):$=j,$===10&&($=13),32<=$||$===13?$:0}function pd(){return!0}function qd(){return!1}function rd($){function j(_e,et,tt,nt,rt){this._reactName=_e,this._targetInst=tt,this.type=et,this.nativeEvent=nt,this.target=rt,this.currentTarget=null;for(var ot in $)$.hasOwnProperty(ot)&&(_e=$[ot],this[ot]=_e?_e(nt):nt[ot]);return this.isDefaultPrevented=(nt.defaultPrevented!=null?nt.defaultPrevented:nt.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(j.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _e=this.nativeEvent;_e&&(_e.preventDefault?_e.preventDefault():typeof _e.returnValue!="unknown"&&(_e.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var _e=this.nativeEvent;_e&&(_e.stopPropagation?_e.stopPropagation():typeof _e.cancelBubble!="unknown"&&(_e.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),j}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function($){return $.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function($){return $.relatedTarget===void 0?$.fromElement===$.srcElement?$.toElement:$.fromElement:$.relatedTarget},movementX:function($){return"movementX"in $?$.movementX:($!==yd&&(yd&&$.type==="mousemove"?(wd=$.screenX-yd.screenX,xd=$.screenY-yd.screenY):xd=wd=0,yd=$),wd)},movementY:function($){return"movementY"in $?$.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function($){return"clipboardData"in $?$.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd($){var j=this.nativeEvent;return j.getModifierState?j.getModifierState($):($=Od[$])?!!j[$]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function($){if($.key){var j=Md[$.key]||$.key;if(j!=="Unidentified")return j}return $.type==="keypress"?($=od($),$===13?"Enter":String.fromCharCode($)):$.type==="keydown"||$.type==="keyup"?Nd[$.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function($){return $.type==="keypress"?od($):0},keyCode:function($){return $.type==="keydown"||$.type==="keyup"?$.keyCode:0},which:function($){return $.type==="keypress"?od($):$.type==="keydown"||$.type==="keyup"?$.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function($){return"deltaX"in $?$.deltaX:"wheelDeltaX"in $?-$.wheelDeltaX:0},deltaY:function($){return"deltaY"in $?$.deltaY:"wheelDeltaY"in $?-$.wheelDeltaY:"wheelDelta"in $?-$.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge($,j){switch($){case"keyup":return $d.indexOf(j.keyCode)!==-1;case"keydown":return j.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he($){return $=$.detail,typeof $=="object"&&"data"in $?$.data:null}var ie=!1;function je($,j){switch($){case"compositionend":return he(j);case"keypress":return j.which!==32?null:(fe=!0,ee);case"textInput":return $=j.data,$===ee&&fe?null:$;default:return null}}function ke($,j){if(ie)return $==="compositionend"||!ae&&ge($,j)?($=nd(),md=ld=kd=null,ie=!1,$):null;switch($){case"paste":return null;case"keypress":if(!(j.ctrlKey||j.altKey||j.metaKey)||j.ctrlKey&&j.altKey){if(j.char&&1<j.char.length)return j.char;if(j.which)return String.fromCharCode(j.which)}return null;case"compositionend":return de&&j.locale!=="ko"?null:j.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me($){var j=$&&$.nodeName&&$.nodeName.toLowerCase();return j==="input"?!!le[$.type]:j==="textarea"}function ne($,j,_e,et){Eb(et),j=oe(j,"onChange"),0<j.length&&(_e=new td("onChange","change",null,_e,et),$.push({event:_e,listeners:j}))}var pe=null,qe=null;function re($){se($,0)}function te($){var j=ue($);if(Wa(j))return $}function ve($,j){if($==="change")return j}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be($){if($.propertyName==="value"&&te(qe)){var j=[];ne(j,qe,$,xb($)),Jb(re,j)}}function Ce($,j,_e){$==="focusin"?(Ae(),pe=j,qe=_e,pe.attachEvent("onpropertychange",Be)):$==="focusout"&&Ae()}function De($){if($==="selectionchange"||$==="keyup"||$==="keydown")return te(qe)}function Ee($,j){if($==="click")return te(j)}function Fe($,j){if($==="input"||$==="change")return te(j)}function Ge($,j){return $===j&&($!==0||1/$===1/j)||$!==$&&j!==j}var He=typeof Object.is=="function"?Object.is:Ge;function Ie($,j){if(He($,j))return!0;if(typeof $!="object"||$===null||typeof j!="object"||j===null)return!1;var _e=Object.keys($),et=Object.keys(j);if(_e.length!==et.length)return!1;for(et=0;et<_e.length;et++){var tt=_e[et];if(!ja.call(j,tt)||!He($[tt],j[tt]))return!1}return!0}function Je($){for(;$&&$.firstChild;)$=$.firstChild;return $}function Ke($,j){var _e=Je($);$=0;for(var et;_e;){if(_e.nodeType===3){if(et=$+_e.textContent.length,$<=j&&et>=j)return{node:_e,offset:j-$};$=et}e:{for(;_e;){if(_e.nextSibling){_e=_e.nextSibling;break e}_e=_e.parentNode}_e=void 0}_e=Je(_e)}}function Le($,j){return $&&j?$===j?!0:$&&$.nodeType===3?!1:j&&j.nodeType===3?Le($,j.parentNode):"contains"in $?$.contains(j):$.compareDocumentPosition?!!($.compareDocumentPosition(j)&16):!1:!1}function Me(){for(var $=window,j=Xa();j instanceof $.HTMLIFrameElement;){try{var _e=typeof j.contentWindow.location.href=="string"}catch{_e=!1}if(_e)$=j.contentWindow;else break;j=Xa($.document)}return j}function Ne($){var j=$&&$.nodeName&&$.nodeName.toLowerCase();return j&&(j==="input"&&($.type==="text"||$.type==="search"||$.type==="tel"||$.type==="url"||$.type==="password")||j==="textarea"||$.contentEditable==="true")}function Oe($){var j=Me(),_e=$.focusedElem,et=$.selectionRange;if(j!==_e&&_e&&_e.ownerDocument&&Le(_e.ownerDocument.documentElement,_e)){if(et!==null&&Ne(_e)){if(j=et.start,$=et.end,$===void 0&&($=j),"selectionStart"in _e)_e.selectionStart=j,_e.selectionEnd=Math.min($,_e.value.length);else if($=(j=_e.ownerDocument||document)&&j.defaultView||window,$.getSelection){$=$.getSelection();var tt=_e.textContent.length,nt=Math.min(et.start,tt);et=et.end===void 0?nt:Math.min(et.end,tt),!$.extend&&nt>et&&(tt=et,et=nt,nt=tt),tt=Ke(_e,nt);var rt=Ke(_e,et);tt&&rt&&($.rangeCount!==1||$.anchorNode!==tt.node||$.anchorOffset!==tt.offset||$.focusNode!==rt.node||$.focusOffset!==rt.offset)&&(j=j.createRange(),j.setStart(tt.node,tt.offset),$.removeAllRanges(),nt>et?($.addRange(j),$.extend(rt.node,rt.offset)):(j.setEnd(rt.node,rt.offset),$.addRange(j)))}}for(j=[],$=_e;$=$.parentNode;)$.nodeType===1&&j.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof _e.focus=="function"&&_e.focus(),_e=0;_e<j.length;_e++)$=j[_e],$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue($,j,_e){var et=_e.window===_e?_e.document:_e.nodeType===9?_e:_e.ownerDocument;Te||Qe==null||Qe!==Xa(et)||(et=Qe,"selectionStart"in et&&Ne(et)?et={start:et.selectionStart,end:et.selectionEnd}:(et=(et.ownerDocument&&et.ownerDocument.defaultView||window).getSelection(),et={anchorNode:et.anchorNode,anchorOffset:et.anchorOffset,focusNode:et.focusNode,focusOffset:et.focusOffset}),Se&&Ie(Se,et)||(Se=et,et=oe(Re,"onSelect"),0<et.length&&(j=new td("onSelect","select",null,j,_e),$.push({event:j,listeners:et}),j.target=Qe)))}function Ve($,j){var _e={};return _e[$.toLowerCase()]=j.toLowerCase(),_e["Webkit"+$]="webkit"+j,_e["Moz"+$]="moz"+j,_e}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze($){if(Xe[$])return Xe[$];if(!We[$])return $;var j=We[$],_e;for(_e in j)if(j.hasOwnProperty(_e)&&_e in Ye)return Xe[$]=j[_e];return $}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff($,j){df.set($,j),fa(j,[$])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf($,j,_e){var et=$.type||"unknown-event";$.currentTarget=_e,Ub(et,j,void 0,$),$.currentTarget=null}function se($,j){j=(j&4)!==0;for(var _e=0;_e<$.length;_e++){var et=$[_e],tt=et.event;et=et.listeners;e:{var nt=void 0;if(j)for(var rt=et.length-1;0<=rt;rt--){var ot=et[rt],it=ot.instance,at=ot.currentTarget;if(ot=ot.listener,it!==nt&&tt.isPropagationStopped())break e;nf(tt,ot,at),nt=it}else for(rt=0;rt<et.length;rt++){if(ot=et[rt],it=ot.instance,at=ot.currentTarget,ot=ot.listener,it!==nt&&tt.isPropagationStopped())break e;nf(tt,ot,at),nt=it}}}if(Qb)throw $=Rb,Qb=!1,Rb=null,$}function D($,j){var _e=j[of];_e===void 0&&(_e=j[of]=new Set);var et=$+"__bubble";_e.has(et)||(pf(j,$,2,!1),_e.add(et))}function qf($,j,_e){var et=0;j&&(et|=4),pf(_e,$,et,j)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf($){if(!$[rf]){$[rf]=!0,da.forEach(function(_e){_e!=="selectionchange"&&(mf.has(_e)||qf(_e,!1,$),qf(_e,!0,$))});var j=$.nodeType===9?$:$.ownerDocument;j===null||j[rf]||(j[rf]=!0,qf("selectionchange",!1,j))}}function pf($,j,_e,et){switch(jd(j)){case 1:var tt=ed;break;case 4:tt=gd;break;default:tt=fd}_e=tt.bind(null,j,_e,$),tt=void 0,!Lb||j!=="touchstart"&&j!=="touchmove"&&j!=="wheel"||(tt=!0),et?tt!==void 0?$.addEventListener(j,_e,{capture:!0,passive:tt}):$.addEventListener(j,_e,!0):tt!==void 0?$.addEventListener(j,_e,{passive:tt}):$.addEventListener(j,_e,!1)}function hd($,j,_e,et,tt){var nt=et;if(!(j&1)&&!(j&2)&&et!==null)e:for(;;){if(et===null)return;var rt=et.tag;if(rt===3||rt===4){var ot=et.stateNode.containerInfo;if(ot===tt||ot.nodeType===8&&ot.parentNode===tt)break;if(rt===4)for(rt=et.return;rt!==null;){var it=rt.tag;if((it===3||it===4)&&(it=rt.stateNode.containerInfo,it===tt||it.nodeType===8&&it.parentNode===tt))return;rt=rt.return}for(;ot!==null;){if(rt=Wc(ot),rt===null)return;if(it=rt.tag,it===5||it===6){et=nt=rt;continue e}ot=ot.parentNode}}et=et.return}Jb(function(){var at=nt,dt=xb(_e),st=[];e:{var ut=df.get($);if(ut!==void 0){var ft=td,pt=$;switch($){case"keypress":if(od(_e)===0)break e;case"keydown":case"keyup":ft=Rd;break;case"focusin":pt="focus",ft=Fd;break;case"focusout":pt="blur",ft=Fd;break;case"beforeblur":case"afterblur":ft=Fd;break;case"click":if(_e.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ft=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ft=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ft=Vd;break;case $e:case af:case bf:ft=Hd;break;case cf:ft=Xd;break;case"scroll":ft=vd;break;case"wheel":ft=Zd;break;case"copy":case"cut":case"paste":ft=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ft=Td}var gt=(j&4)!==0,yt=!gt&&$==="scroll",mt=gt?ut!==null?ut+"Capture":null:ut;gt=[];for(var vt=at,_t;vt!==null;){_t=vt;var St=_t.stateNode;if(_t.tag===5&&St!==null&&(_t=St,mt!==null&&(St=Kb(vt,mt),St!=null&&gt.push(tf(vt,St,_t)))),yt)break;vt=vt.return}0<gt.length&&(ut=new ft(ut,pt,null,_e,dt),st.push({event:ut,listeners:gt}))}}if(!(j&7)){e:{if(ut=$==="mouseover"||$==="pointerover",ft=$==="mouseout"||$==="pointerout",ut&&_e!==wb&&(pt=_e.relatedTarget||_e.fromElement)&&(Wc(pt)||pt[uf]))break e;if((ft||ut)&&(ut=dt.window===dt?dt:(ut=dt.ownerDocument)?ut.defaultView||ut.parentWindow:window,ft?(pt=_e.relatedTarget||_e.toElement,ft=at,pt=pt?Wc(pt):null,pt!==null&&(yt=Vb(pt),pt!==yt||pt.tag!==5&&pt.tag!==6)&&(pt=null)):(ft=null,pt=at),ft!==pt)){if(gt=Bd,St="onMouseLeave",mt="onMouseEnter",vt="mouse",($==="pointerout"||$==="pointerover")&&(gt=Td,St="onPointerLeave",mt="onPointerEnter",vt="pointer"),yt=ft==null?ut:ue(ft),_t=pt==null?ut:ue(pt),ut=new gt(St,vt+"leave",ft,_e,dt),ut.target=yt,ut.relatedTarget=_t,St=null,Wc(dt)===at&&(gt=new gt(mt,vt+"enter",pt,_e,dt),gt.target=_t,gt.relatedTarget=yt,St=gt),yt=St,ft&&pt)t:{for(gt=ft,mt=pt,vt=0,_t=gt;_t;_t=vf(_t))vt++;for(_t=0,St=mt;St;St=vf(St))_t++;for(;0<vt-_t;)gt=vf(gt),vt--;for(;0<_t-vt;)mt=vf(mt),_t--;for(;vt--;){if(gt===mt||mt!==null&&gt===mt.alternate)break t;gt=vf(gt),mt=vf(mt)}gt=null}else gt=null;ft!==null&&wf(st,ut,ft,gt,!1),pt!==null&&yt!==null&&wf(st,yt,pt,gt,!0)}}e:{if(ut=at?ue(at):window,ft=ut.nodeName&&ut.nodeName.toLowerCase(),ft==="select"||ft==="input"&&ut.type==="file")var At=ve;else if(me(ut))if(we)At=Fe;else{At=De;var kt=Ce}else(ft=ut.nodeName)&&ft.toLowerCase()==="input"&&(ut.type==="checkbox"||ut.type==="radio")&&(At=Ee);if(At&&(At=At($,at))){ne(st,At,_e,dt);break e}kt&&kt($,ut,at),$==="focusout"&&(kt=ut._wrapperState)&&kt.controlled&&ut.type==="number"&&cb(ut,"number",ut.value)}switch(kt=at?ue(at):window,$){case"focusin":(me(kt)||kt.contentEditable==="true")&&(Qe=kt,Re=at,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(st,_e,dt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(st,_e,dt)}var bt;if(ae)e:{switch($){case"compositionstart":var Rt="onCompositionStart";break e;case"compositionend":Rt="onCompositionEnd";break e;case"compositionupdate":Rt="onCompositionUpdate";break e}Rt=void 0}else ie?ge($,_e)&&(Rt="onCompositionEnd"):$==="keydown"&&_e.keyCode===229&&(Rt="onCompositionStart");Rt&&(de&&_e.locale!=="ko"&&(ie||Rt!=="onCompositionStart"?Rt==="onCompositionEnd"&&ie&&(bt=nd()):(kd=dt,ld="value"in kd?kd.value:kd.textContent,ie=!0)),kt=oe(at,Rt),0<kt.length&&(Rt=new Ld(Rt,$,null,_e,dt),st.push({event:Rt,listeners:kt}),bt?Rt.data=bt:(bt=he(_e),bt!==null&&(Rt.data=bt)))),(bt=ce?je($,_e):ke($,_e))&&(at=oe(at,"onBeforeInput"),0<at.length&&(dt=new Ld("onBeforeInput","beforeinput",null,_e,dt),st.push({event:dt,listeners:at}),dt.data=bt))}se(st,j)})}function tf($,j,_e){return{instance:$,listener:j,currentTarget:_e}}function oe($,j){for(var _e=j+"Capture",et=[];$!==null;){var tt=$,nt=tt.stateNode;tt.tag===5&&nt!==null&&(tt=nt,nt=Kb($,_e),nt!=null&&et.unshift(tf($,nt,tt)),nt=Kb($,j),nt!=null&&et.push(tf($,nt,tt))),$=$.return}return et}function vf($){if($===null)return null;do $=$.return;while($&&$.tag!==5);return $||null}function wf($,j,_e,et,tt){for(var nt=j._reactName,rt=[];_e!==null&&_e!==et;){var ot=_e,it=ot.alternate,at=ot.stateNode;if(it!==null&&it===et)break;ot.tag===5&&at!==null&&(ot=at,tt?(it=Kb(_e,nt),it!=null&&rt.unshift(tf(_e,it,ot))):tt||(it=Kb(_e,nt),it!=null&&rt.push(tf(_e,it,ot)))),_e=_e.return}rt.length!==0&&$.push({event:j,listeners:rt})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf($){return(typeof $=="string"?$:""+$).replace(xf,`
`).replace(yf,"")}function Af($,j,_e){if(j=zf(j),zf($)!==j&&_e)throw Error(p$2(425))}function Bf(){}var Cf=null,Df=null;function Ef($,j){return $==="textarea"||$==="noscript"||typeof j.children=="string"||typeof j.children=="number"||typeof j.dangerouslySetInnerHTML=="object"&&j.dangerouslySetInnerHTML!==null&&j.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function($){return Hf.resolve(null).then($).catch(If)}:Ff;function If($){setTimeout(function(){throw $})}function Kf($,j){var _e=j,et=0;do{var tt=_e.nextSibling;if($.removeChild(_e),tt&&tt.nodeType===8)if(_e=tt.data,_e==="/$"){if(et===0){$.removeChild(tt),bd(j);return}et--}else _e!=="$"&&_e!=="$?"&&_e!=="$!"||et++;_e=tt}while(_e);bd(j)}function Lf($){for(;$!=null;$=$.nextSibling){var j=$.nodeType;if(j===1||j===3)break;if(j===8){if(j=$.data,j==="$"||j==="$!"||j==="$?")break;if(j==="/$")return null}}return $}function Mf($){$=$.previousSibling;for(var j=0;$;){if($.nodeType===8){var _e=$.data;if(_e==="$"||_e==="$!"||_e==="$?"){if(j===0)return $;j--}else _e==="/$"&&j++}$=$.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc($){var j=$[Of];if(j)return j;for(var _e=$.parentNode;_e;){if(j=_e[uf]||_e[Of]){if(_e=j.alternate,j.child!==null||_e!==null&&_e.child!==null)for($=Mf($);$!==null;){if(_e=$[Of])return _e;$=Mf($)}return j}$=_e,_e=$.parentNode}return null}function Cb($){return $=$[Of]||$[uf],!$||$.tag!==5&&$.tag!==6&&$.tag!==13&&$.tag!==3?null:$}function ue($){if($.tag===5||$.tag===6)return $.stateNode;throw Error(p$2(33))}function Db($){return $[Pf]||null}var Sf=[],Tf=-1;function Uf($){return{current:$}}function E$1($){0>Tf||($.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G($,j){Tf++,Sf[Tf]=$.current,$.current=j}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf($,j){var _e=$.type.contextTypes;if(!_e)return Vf;var et=$.stateNode;if(et&&et.__reactInternalMemoizedUnmaskedChildContext===j)return et.__reactInternalMemoizedMaskedChildContext;var tt={},nt;for(nt in _e)tt[nt]=j[nt];return et&&($=$.stateNode,$.__reactInternalMemoizedUnmaskedChildContext=j,$.__reactInternalMemoizedMaskedChildContext=tt),tt}function Zf($){return $=$.childContextTypes,$!=null}function $f(){E$1(Wf),E$1(H)}function ag($,j,_e){if(H.current!==Vf)throw Error(p$2(168));G(H,j),G(Wf,_e)}function bg($,j,_e){var et=$.stateNode;if(j=j.childContextTypes,typeof et.getChildContext!="function")return _e;et=et.getChildContext();for(var tt in et)if(!(tt in j))throw Error(p$2(108,Ra($)||"Unknown",tt));return A$1({},_e,et)}function cg($){return $=($=$.stateNode)&&$.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,$),G(Wf,Wf.current),!0}function dg($,j,_e){var et=$.stateNode;if(!et)throw Error(p$2(169));_e?($=bg($,j,Xf),et.__reactInternalMemoizedMergedChildContext=$,E$1(Wf),E$1(H),G(H,$)):E$1(Wf),G(Wf,_e)}var eg=null,fg=!1,gg=!1;function hg($){eg===null?eg=[$]:eg.push($)}function ig($){fg=!0,hg($)}function jg(){if(!gg&&eg!==null){gg=!0;var $=0,j=C$1;try{var _e=eg;for(C$1=1;$<_e.length;$++){var et=_e[$];do et=et(!0);while(et!==null)}eg=null,fg=!1}catch(tt){throw eg!==null&&(eg=eg.slice($+1)),ac(fc,jg),tt}finally{C$1=j,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg($,j){kg[lg++]=ng,kg[lg++]=mg,mg=$,ng=j}function ug($,j,_e){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=$;var et=rg;$=sg;var tt=32-oc(et)-1;et&=~(1<<tt),_e+=1;var nt=32-oc(j)+tt;if(30<nt){var rt=tt-tt%5;nt=(et&(1<<rt)-1).toString(32),et>>=rt,tt-=rt,rg=1<<32-oc(j)+tt|_e<<tt|et,sg=nt+$}else rg=1<<nt|_e<<tt|et,sg=$}function vg($){$.return!==null&&(tg($,1),ug($,1,0))}function wg($){for(;$===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;$===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag($,j){var _e=Bg(5,null,null,0);_e.elementType="DELETED",_e.stateNode=j,_e.return=$,j=$.deletions,j===null?($.deletions=[_e],$.flags|=16):j.push(_e)}function Cg($,j){switch($.tag){case 5:var _e=$.type;return j=j.nodeType!==1||_e.toLowerCase()!==j.nodeName.toLowerCase()?null:j,j!==null?($.stateNode=j,xg=$,yg=Lf(j.firstChild),!0):!1;case 6:return j=$.pendingProps===""||j.nodeType!==3?null:j,j!==null?($.stateNode=j,xg=$,yg=null,!0):!1;case 13:return j=j.nodeType!==8?null:j,j!==null?(_e=qg!==null?{id:rg,overflow:sg}:null,$.memoizedState={dehydrated:j,treeContext:_e,retryLane:1073741824},_e=Bg(18,null,null,0),_e.stateNode=j,_e.return=$,$.child=_e,xg=$,yg=null,!0):!1;default:return!1}}function Dg($){return($.mode&1)!==0&&($.flags&128)===0}function Eg($){if(I$1){var j=yg;if(j){var _e=j;if(!Cg($,j)){if(Dg($))throw Error(p$2(418));j=Lf(_e.nextSibling);var et=xg;j&&Cg($,j)?Ag(et,_e):($.flags=$.flags&-4097|2,I$1=!1,xg=$)}}else{if(Dg($))throw Error(p$2(418));$.flags=$.flags&-4097|2,I$1=!1,xg=$}}}function Fg($){for($=$.return;$!==null&&$.tag!==5&&$.tag!==3&&$.tag!==13;)$=$.return;xg=$}function Gg($){if($!==xg)return!1;if(!I$1)return Fg($),I$1=!0,!1;var j;if((j=$.tag!==3)&&!(j=$.tag!==5)&&(j=$.type,j=j!=="head"&&j!=="body"&&!Ef($.type,$.memoizedProps)),j&&(j=yg)){if(Dg($))throw Hg(),Error(p$2(418));for(;j;)Ag($,j),j=Lf(j.nextSibling)}if(Fg($),$.tag===13){if($=$.memoizedState,$=$!==null?$.dehydrated:null,!$)throw Error(p$2(317));e:{for($=$.nextSibling,j=0;$;){if($.nodeType===8){var _e=$.data;if(_e==="/$"){if(j===0){yg=Lf($.nextSibling);break e}j--}else _e!=="$"&&_e!=="$!"&&_e!=="$?"||j++}$=$.nextSibling}yg=null}}else yg=xg?Lf($.stateNode.nextSibling):null;return!0}function Hg(){for(var $=yg;$;)$=Lf($.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg($){zg===null?zg=[$]:zg.push($)}var Kg=ua.ReactCurrentBatchConfig;function Lg($,j,_e){if($=_e.ref,$!==null&&typeof $!="function"&&typeof $!="object"){if(_e._owner){if(_e=_e._owner,_e){if(_e.tag!==1)throw Error(p$2(309));var et=_e.stateNode}if(!et)throw Error(p$2(147,$));var tt=et,nt=""+$;return j!==null&&j.ref!==null&&typeof j.ref=="function"&&j.ref._stringRef===nt?j.ref:(j=function(rt){var ot=tt.refs;rt===null?delete ot[nt]:ot[nt]=rt},j._stringRef=nt,j)}if(typeof $!="string")throw Error(p$2(284));if(!_e._owner)throw Error(p$2(290,$))}return $}function Mg($,j){throw $=Object.prototype.toString.call(j),Error(p$2(31,$==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":$))}function Ng($){var j=$._init;return j($._payload)}function Og($){function j(mt,vt){if($){var _t=mt.deletions;_t===null?(mt.deletions=[vt],mt.flags|=16):_t.push(vt)}}function _e(mt,vt){if(!$)return null;for(;vt!==null;)j(mt,vt),vt=vt.sibling;return null}function et(mt,vt){for(mt=new Map;vt!==null;)vt.key!==null?mt.set(vt.key,vt):mt.set(vt.index,vt),vt=vt.sibling;return mt}function tt(mt,vt){return mt=Pg(mt,vt),mt.index=0,mt.sibling=null,mt}function nt(mt,vt,_t){return mt.index=_t,$?(_t=mt.alternate,_t!==null?(_t=_t.index,_t<vt?(mt.flags|=2,vt):_t):(mt.flags|=2,vt)):(mt.flags|=1048576,vt)}function rt(mt){return $&&mt.alternate===null&&(mt.flags|=2),mt}function ot(mt,vt,_t,St){return vt===null||vt.tag!==6?(vt=Qg(_t,mt.mode,St),vt.return=mt,vt):(vt=tt(vt,_t),vt.return=mt,vt)}function it(mt,vt,_t,St){var At=_t.type;return At===ya?dt(mt,vt,_t.props.children,St,_t.key):vt!==null&&(vt.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===Ha&&Ng(At)===vt.type)?(St=tt(vt,_t.props),St.ref=Lg(mt,vt,_t),St.return=mt,St):(St=Rg(_t.type,_t.key,_t.props,null,mt.mode,St),St.ref=Lg(mt,vt,_t),St.return=mt,St)}function at(mt,vt,_t,St){return vt===null||vt.tag!==4||vt.stateNode.containerInfo!==_t.containerInfo||vt.stateNode.implementation!==_t.implementation?(vt=Sg(_t,mt.mode,St),vt.return=mt,vt):(vt=tt(vt,_t.children||[]),vt.return=mt,vt)}function dt(mt,vt,_t,St,At){return vt===null||vt.tag!==7?(vt=Tg(_t,mt.mode,St,At),vt.return=mt,vt):(vt=tt(vt,_t),vt.return=mt,vt)}function st(mt,vt,_t){if(typeof vt=="string"&&vt!==""||typeof vt=="number")return vt=Qg(""+vt,mt.mode,_t),vt.return=mt,vt;if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case va:return _t=Rg(vt.type,vt.key,vt.props,null,mt.mode,_t),_t.ref=Lg(mt,null,vt),_t.return=mt,_t;case wa:return vt=Sg(vt,mt.mode,_t),vt.return=mt,vt;case Ha:var St=vt._init;return st(mt,St(vt._payload),_t)}if(eb(vt)||Ka(vt))return vt=Tg(vt,mt.mode,_t,null),vt.return=mt,vt;Mg(mt,vt)}return null}function ut(mt,vt,_t,St){var At=vt!==null?vt.key:null;if(typeof _t=="string"&&_t!==""||typeof _t=="number")return At!==null?null:ot(mt,vt,""+_t,St);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case va:return _t.key===At?it(mt,vt,_t,St):null;case wa:return _t.key===At?at(mt,vt,_t,St):null;case Ha:return At=_t._init,ut(mt,vt,At(_t._payload),St)}if(eb(_t)||Ka(_t))return At!==null?null:dt(mt,vt,_t,St,null);Mg(mt,_t)}return null}function ft(mt,vt,_t,St,At){if(typeof St=="string"&&St!==""||typeof St=="number")return mt=mt.get(_t)||null,ot(vt,mt,""+St,At);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case va:return mt=mt.get(St.key===null?_t:St.key)||null,it(vt,mt,St,At);case wa:return mt=mt.get(St.key===null?_t:St.key)||null,at(vt,mt,St,At);case Ha:var kt=St._init;return ft(mt,vt,_t,kt(St._payload),At)}if(eb(St)||Ka(St))return mt=mt.get(_t)||null,dt(vt,mt,St,At,null);Mg(vt,St)}return null}function pt(mt,vt,_t,St){for(var At=null,kt=null,bt=vt,Rt=vt=0,Ot=null;bt!==null&&Rt<_t.length;Rt++){bt.index>Rt?(Ot=bt,bt=null):Ot=bt.sibling;var Ut=ut(mt,bt,_t[Rt],St);if(Ut===null){bt===null&&(bt=Ot);break}$&&bt&&Ut.alternate===null&&j(mt,bt),vt=nt(Ut,vt,Rt),kt===null?At=Ut:kt.sibling=Ut,kt=Ut,bt=Ot}if(Rt===_t.length)return _e(mt,bt),I$1&&tg(mt,Rt),At;if(bt===null){for(;Rt<_t.length;Rt++)bt=st(mt,_t[Rt],St),bt!==null&&(vt=nt(bt,vt,Rt),kt===null?At=bt:kt.sibling=bt,kt=bt);return I$1&&tg(mt,Rt),At}for(bt=et(mt,bt);Rt<_t.length;Rt++)Ot=ft(bt,mt,Rt,_t[Rt],St),Ot!==null&&($&&Ot.alternate!==null&&bt.delete(Ot.key===null?Rt:Ot.key),vt=nt(Ot,vt,Rt),kt===null?At=Ot:kt.sibling=Ot,kt=Ot);return $&&bt.forEach(function(Yt){return j(mt,Yt)}),I$1&&tg(mt,Rt),At}function gt(mt,vt,_t,St){var At=Ka(_t);if(typeof At!="function")throw Error(p$2(150));if(_t=At.call(_t),_t==null)throw Error(p$2(151));for(var kt=At=null,bt=vt,Rt=vt=0,Ot=null,Ut=_t.next();bt!==null&&!Ut.done;Rt++,Ut=_t.next()){bt.index>Rt?(Ot=bt,bt=null):Ot=bt.sibling;var Yt=ut(mt,bt,Ut.value,St);if(Yt===null){bt===null&&(bt=Ot);break}$&&bt&&Yt.alternate===null&&j(mt,bt),vt=nt(Yt,vt,Rt),kt===null?At=Yt:kt.sibling=Yt,kt=Yt,bt=Ot}if(Ut.done)return _e(mt,bt),I$1&&tg(mt,Rt),At;if(bt===null){for(;!Ut.done;Rt++,Ut=_t.next())Ut=st(mt,Ut.value,St),Ut!==null&&(vt=nt(Ut,vt,Rt),kt===null?At=Ut:kt.sibling=Ut,kt=Ut);return I$1&&tg(mt,Rt),At}for(bt=et(mt,bt);!Ut.done;Rt++,Ut=_t.next())Ut=ft(bt,mt,Rt,Ut.value,St),Ut!==null&&($&&Ut.alternate!==null&&bt.delete(Ut.key===null?Rt:Ut.key),vt=nt(Ut,vt,Rt),kt===null?At=Ut:kt.sibling=Ut,kt=Ut);return $&&bt.forEach(function(rn){return j(mt,rn)}),I$1&&tg(mt,Rt),At}function yt(mt,vt,_t,St){if(typeof _t=="object"&&_t!==null&&_t.type===ya&&_t.key===null&&(_t=_t.props.children),typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case va:e:{for(var At=_t.key,kt=vt;kt!==null;){if(kt.key===At){if(At=_t.type,At===ya){if(kt.tag===7){_e(mt,kt.sibling),vt=tt(kt,_t.props.children),vt.return=mt,mt=vt;break e}}else if(kt.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===Ha&&Ng(At)===kt.type){_e(mt,kt.sibling),vt=tt(kt,_t.props),vt.ref=Lg(mt,kt,_t),vt.return=mt,mt=vt;break e}_e(mt,kt);break}else j(mt,kt);kt=kt.sibling}_t.type===ya?(vt=Tg(_t.props.children,mt.mode,St,_t.key),vt.return=mt,mt=vt):(St=Rg(_t.type,_t.key,_t.props,null,mt.mode,St),St.ref=Lg(mt,vt,_t),St.return=mt,mt=St)}return rt(mt);case wa:e:{for(kt=_t.key;vt!==null;){if(vt.key===kt)if(vt.tag===4&&vt.stateNode.containerInfo===_t.containerInfo&&vt.stateNode.implementation===_t.implementation){_e(mt,vt.sibling),vt=tt(vt,_t.children||[]),vt.return=mt,mt=vt;break e}else{_e(mt,vt);break}else j(mt,vt);vt=vt.sibling}vt=Sg(_t,mt.mode,St),vt.return=mt,mt=vt}return rt(mt);case Ha:return kt=_t._init,yt(mt,vt,kt(_t._payload),St)}if(eb(_t))return pt(mt,vt,_t,St);if(Ka(_t))return gt(mt,vt,_t,St);Mg(mt,_t)}return typeof _t=="string"&&_t!==""||typeof _t=="number"?(_t=""+_t,vt!==null&&vt.tag===6?(_e(mt,vt.sibling),vt=tt(vt,_t),vt.return=mt,mt=vt):(_e(mt,vt),vt=Qg(_t,mt.mode,St),vt.return=mt,mt=vt),rt(mt)):_e(mt,vt)}return yt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah($){var j=Wg.current;E$1(Wg),$._currentValue=j}function bh($,j,_e){for(;$!==null;){var et=$.alternate;if(($.childLanes&j)!==j?($.childLanes|=j,et!==null&&(et.childLanes|=j)):et!==null&&(et.childLanes&j)!==j&&(et.childLanes|=j),$===_e)break;$=$.return}}function ch($,j){Xg=$,Zg=Yg=null,$=$.dependencies,$!==null&&$.firstContext!==null&&($.lanes&j&&(dh=!0),$.firstContext=null)}function eh($){var j=$._currentValue;if(Zg!==$)if($={context:$,memoizedValue:j,next:null},Yg===null){if(Xg===null)throw Error(p$2(308));Yg=$,Xg.dependencies={lanes:0,firstContext:$}}else Yg=Yg.next=$;return j}var fh=null;function gh($){fh===null?fh=[$]:fh.push($)}function hh($,j,_e,et){var tt=j.interleaved;return tt===null?(_e.next=_e,gh(j)):(_e.next=tt.next,tt.next=_e),j.interleaved=_e,ih($,et)}function ih($,j){$.lanes|=j;var _e=$.alternate;for(_e!==null&&(_e.lanes|=j),_e=$,$=$.return;$!==null;)$.childLanes|=j,_e=$.alternate,_e!==null&&(_e.childLanes|=j),_e=$,$=$.return;return _e.tag===3?_e.stateNode:null}var jh=!1;function kh($){$.updateQueue={baseState:$.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh($,j){$=$.updateQueue,j.updateQueue===$&&(j.updateQueue={baseState:$.baseState,firstBaseUpdate:$.firstBaseUpdate,lastBaseUpdate:$.lastBaseUpdate,shared:$.shared,effects:$.effects})}function mh($,j){return{eventTime:$,lane:j,tag:0,payload:null,callback:null,next:null}}function nh($,j,_e){var et=$.updateQueue;if(et===null)return null;if(et=et.shared,K&2){var tt=et.pending;return tt===null?j.next=j:(j.next=tt.next,tt.next=j),et.pending=j,ih($,_e)}return tt=et.interleaved,tt===null?(j.next=j,gh(et)):(j.next=tt.next,tt.next=j),et.interleaved=j,ih($,_e)}function oh($,j,_e){if(j=j.updateQueue,j!==null&&(j=j.shared,(_e&4194240)!==0)){var et=j.lanes;et&=$.pendingLanes,_e|=et,j.lanes=_e,Cc($,_e)}}function ph($,j){var _e=$.updateQueue,et=$.alternate;if(et!==null&&(et=et.updateQueue,_e===et)){var tt=null,nt=null;if(_e=_e.firstBaseUpdate,_e!==null){do{var rt={eventTime:_e.eventTime,lane:_e.lane,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null};nt===null?tt=nt=rt:nt=nt.next=rt,_e=_e.next}while(_e!==null);nt===null?tt=nt=j:nt=nt.next=j}else tt=nt=j;_e={baseState:et.baseState,firstBaseUpdate:tt,lastBaseUpdate:nt,shared:et.shared,effects:et.effects},$.updateQueue=_e;return}$=_e.lastBaseUpdate,$===null?_e.firstBaseUpdate=j:$.next=j,_e.lastBaseUpdate=j}function qh($,j,_e,et){var tt=$.updateQueue;jh=!1;var nt=tt.firstBaseUpdate,rt=tt.lastBaseUpdate,ot=tt.shared.pending;if(ot!==null){tt.shared.pending=null;var it=ot,at=it.next;it.next=null,rt===null?nt=at:rt.next=at,rt=it;var dt=$.alternate;dt!==null&&(dt=dt.updateQueue,ot=dt.lastBaseUpdate,ot!==rt&&(ot===null?dt.firstBaseUpdate=at:ot.next=at,dt.lastBaseUpdate=it))}if(nt!==null){var st=tt.baseState;rt=0,dt=at=it=null,ot=nt;do{var ut=ot.lane,ft=ot.eventTime;if((et&ut)===ut){dt!==null&&(dt=dt.next={eventTime:ft,lane:0,tag:ot.tag,payload:ot.payload,callback:ot.callback,next:null});e:{var pt=$,gt=ot;switch(ut=j,ft=_e,gt.tag){case 1:if(pt=gt.payload,typeof pt=="function"){st=pt.call(ft,st,ut);break e}st=pt;break e;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=gt.payload,ut=typeof pt=="function"?pt.call(ft,st,ut):pt,ut==null)break e;st=A$1({},st,ut);break e;case 2:jh=!0}}ot.callback!==null&&ot.lane!==0&&($.flags|=64,ut=tt.effects,ut===null?tt.effects=[ot]:ut.push(ot))}else ft={eventTime:ft,lane:ut,tag:ot.tag,payload:ot.payload,callback:ot.callback,next:null},dt===null?(at=dt=ft,it=st):dt=dt.next=ft,rt|=ut;if(ot=ot.next,ot===null){if(ot=tt.shared.pending,ot===null)break;ut=ot,ot=ut.next,ut.next=null,tt.lastBaseUpdate=ut,tt.shared.pending=null}}while(!0);if(dt===null&&(it=st),tt.baseState=it,tt.firstBaseUpdate=at,tt.lastBaseUpdate=dt,j=tt.shared.interleaved,j!==null){tt=j;do rt|=tt.lane,tt=tt.next;while(tt!==j)}else nt===null&&(tt.shared.lanes=0);rh|=rt,$.lanes=rt,$.memoizedState=st}}function sh($,j,_e){if($=j.effects,j.effects=null,$!==null)for(j=0;j<$.length;j++){var et=$[j],tt=et.callback;if(tt!==null){if(et.callback=null,et=_e,typeof tt!="function")throw Error(p$2(191,tt));tt.call(et)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh($){if($===th)throw Error(p$2(174));return $}function yh($,j){switch(G(wh,j),G(vh,$),G(uh,th),$=j.nodeType,$){case 9:case 11:j=(j=j.documentElement)?j.namespaceURI:lb(null,"");break;default:$=$===8?j.parentNode:j,j=$.namespaceURI||null,$=$.tagName,j=lb(j,$)}E$1(uh),G(uh,j)}function zh(){E$1(uh),E$1(vh),E$1(wh)}function Ah($){xh(wh.current);var j=xh(uh.current),_e=lb(j,$.type);j!==_e&&(G(vh,$),G(uh,_e))}function Bh($){vh.current===$&&(E$1(uh),E$1(vh))}var L=Uf(0);function Ch($){for(var j=$;j!==null;){if(j.tag===13){var _e=j.memoizedState;if(_e!==null&&(_e=_e.dehydrated,_e===null||_e.data==="$?"||_e.data==="$!"))return j}else if(j.tag===19&&j.memoizedProps.revealOrder!==void 0){if(j.flags&128)return j}else if(j.child!==null){j.child.return=j,j=j.child;continue}if(j===$)break;for(;j.sibling===null;){if(j.return===null||j.return===$)return null;j=j.return}j.sibling.return=j.return,j=j.sibling}return null}var Dh=[];function Eh(){for(var $=0;$<Dh.length;$++)Dh[$]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$1=null,N=null,O$1=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p$2(321))}function Mh($,j){if(j===null)return!1;for(var _e=0;_e<j.length&&_e<$.length;_e++)if(!He($[_e],j[_e]))return!1;return!0}function Nh($,j,_e,et,tt,nt){if(Hh=nt,M$1=j,j.memoizedState=null,j.updateQueue=null,j.lanes=0,Fh.current=$===null||$.memoizedState===null?Oh:Ph,$=_e(et,tt),Jh){nt=0;do{if(Jh=!1,Kh=0,25<=nt)throw Error(p$2(301));nt+=1,O$1=N=null,j.updateQueue=null,Fh.current=Qh,$=_e(et,tt)}while(Jh)}if(Fh.current=Rh,j=N!==null&&N.next!==null,Hh=0,O$1=N=M$1=null,Ih=!1,j)throw Error(p$2(300));return $}function Sh(){var $=Kh!==0;return Kh=0,$}function Th(){var $={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$1===null?M$1.memoizedState=O$1=$:O$1=O$1.next=$,O$1}function Uh(){if(N===null){var $=M$1.alternate;$=$!==null?$.memoizedState:null}else $=N.next;var j=O$1===null?M$1.memoizedState:O$1.next;if(j!==null)O$1=j,N=$;else{if($===null)throw Error(p$2(310));N=$,$={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O$1===null?M$1.memoizedState=O$1=$:O$1=O$1.next=$}return O$1}function Vh($,j){return typeof j=="function"?j($):j}function Wh($){var j=Uh(),_e=j.queue;if(_e===null)throw Error(p$2(311));_e.lastRenderedReducer=$;var et=N,tt=et.baseQueue,nt=_e.pending;if(nt!==null){if(tt!==null){var rt=tt.next;tt.next=nt.next,nt.next=rt}et.baseQueue=tt=nt,_e.pending=null}if(tt!==null){nt=tt.next,et=et.baseState;var ot=rt=null,it=null,at=nt;do{var dt=at.lane;if((Hh&dt)===dt)it!==null&&(it=it.next={lane:0,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null}),et=at.hasEagerState?at.eagerState:$(et,at.action);else{var st={lane:dt,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null};it===null?(ot=it=st,rt=et):it=it.next=st,M$1.lanes|=dt,rh|=dt}at=at.next}while(at!==null&&at!==nt);it===null?rt=et:it.next=ot,He(et,j.memoizedState)||(dh=!0),j.memoizedState=et,j.baseState=rt,j.baseQueue=it,_e.lastRenderedState=et}if($=_e.interleaved,$!==null){tt=$;do nt=tt.lane,M$1.lanes|=nt,rh|=nt,tt=tt.next;while(tt!==$)}else tt===null&&(_e.lanes=0);return[j.memoizedState,_e.dispatch]}function Xh($){var j=Uh(),_e=j.queue;if(_e===null)throw Error(p$2(311));_e.lastRenderedReducer=$;var et=_e.dispatch,tt=_e.pending,nt=j.memoizedState;if(tt!==null){_e.pending=null;var rt=tt=tt.next;do nt=$(nt,rt.action),rt=rt.next;while(rt!==tt);He(nt,j.memoizedState)||(dh=!0),j.memoizedState=nt,j.baseQueue===null&&(j.baseState=nt),_e.lastRenderedState=nt}return[nt,et]}function Yh(){}function Zh($,j){var _e=M$1,et=Uh(),tt=j(),nt=!He(et.memoizedState,tt);if(nt&&(et.memoizedState=tt,dh=!0),et=et.queue,$h(ai.bind(null,_e,et,$),[$]),et.getSnapshot!==j||nt||O$1!==null&&O$1.memoizedState.tag&1){if(_e.flags|=2048,bi(9,ci.bind(null,_e,et,tt,j),void 0,null),Q===null)throw Error(p$2(349));Hh&30||di(_e,j,tt)}return tt}function di($,j,_e){$.flags|=16384,$={getSnapshot:j,value:_e},j=M$1.updateQueue,j===null?(j={lastEffect:null,stores:null},M$1.updateQueue=j,j.stores=[$]):(_e=j.stores,_e===null?j.stores=[$]:_e.push($))}function ci($,j,_e,et){j.value=_e,j.getSnapshot=et,ei(j)&&fi($)}function ai($,j,_e){return _e(function(){ei(j)&&fi($)})}function ei($){var j=$.getSnapshot;$=$.value;try{var _e=j();return!He($,_e)}catch{return!0}}function fi($){var j=ih($,1);j!==null&&gi(j,$,1,-1)}function hi($){var j=Th();return typeof $=="function"&&($=$()),j.memoizedState=j.baseState=$,$={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:$},j.queue=$,$=$.dispatch=ii.bind(null,M$1,$),[j.memoizedState,$]}function bi($,j,_e,et){return $={tag:$,create:j,destroy:_e,deps:et,next:null},j=M$1.updateQueue,j===null?(j={lastEffect:null,stores:null},M$1.updateQueue=j,j.lastEffect=$.next=$):(_e=j.lastEffect,_e===null?j.lastEffect=$.next=$:(et=_e.next,_e.next=$,$.next=et,j.lastEffect=$)),$}function ji(){return Uh().memoizedState}function ki($,j,_e,et){var tt=Th();M$1.flags|=$,tt.memoizedState=bi(1|j,_e,void 0,et===void 0?null:et)}function li($,j,_e,et){var tt=Uh();et=et===void 0?null:et;var nt=void 0;if(N!==null){var rt=N.memoizedState;if(nt=rt.destroy,et!==null&&Mh(et,rt.deps)){tt.memoizedState=bi(j,_e,nt,et);return}}M$1.flags|=$,tt.memoizedState=bi(1|j,_e,nt,et)}function mi($,j){return ki(8390656,8,$,j)}function $h($,j){return li(2048,8,$,j)}function ni($,j){return li(4,2,$,j)}function oi($,j){return li(4,4,$,j)}function pi($,j){if(typeof j=="function")return $=$(),j($),function(){j(null)};if(j!=null)return $=$(),j.current=$,function(){j.current=null}}function qi($,j,_e){return _e=_e!=null?_e.concat([$]):null,li(4,4,pi.bind(null,j,$),_e)}function ri(){}function si($,j){var _e=Uh();j=j===void 0?null:j;var et=_e.memoizedState;return et!==null&&j!==null&&Mh(j,et[1])?et[0]:(_e.memoizedState=[$,j],$)}function ti($,j){var _e=Uh();j=j===void 0?null:j;var et=_e.memoizedState;return et!==null&&j!==null&&Mh(j,et[1])?et[0]:($=$(),_e.memoizedState=[$,j],$)}function ui($,j,_e){return Hh&21?(He(_e,j)||(_e=yc(),M$1.lanes|=_e,rh|=_e,$.baseState=!0),j):($.baseState&&($.baseState=!1,dh=!0),$.memoizedState=_e)}function vi($,j){var _e=C$1;C$1=_e!==0&&4>_e?_e:4,$(!0);var et=Gh.transition;Gh.transition={};try{$(!1),j()}finally{C$1=_e,Gh.transition=et}}function wi(){return Uh().memoizedState}function xi($,j,_e){var et=yi($);if(_e={lane:et,action:_e,hasEagerState:!1,eagerState:null,next:null},zi($))Ai(j,_e);else if(_e=hh($,j,_e,et),_e!==null){var tt=R();gi(_e,$,et,tt),Bi(_e,j,et)}}function ii($,j,_e){var et=yi($),tt={lane:et,action:_e,hasEagerState:!1,eagerState:null,next:null};if(zi($))Ai(j,tt);else{var nt=$.alternate;if($.lanes===0&&(nt===null||nt.lanes===0)&&(nt=j.lastRenderedReducer,nt!==null))try{var rt=j.lastRenderedState,ot=nt(rt,_e);if(tt.hasEagerState=!0,tt.eagerState=ot,He(ot,rt)){var it=j.interleaved;it===null?(tt.next=tt,gh(j)):(tt.next=it.next,it.next=tt),j.interleaved=tt;return}}catch{}finally{}_e=hh($,j,tt,et),_e!==null&&(tt=R(),gi(_e,$,et,tt),Bi(_e,j,et))}}function zi($){var j=$.alternate;return $===M$1||j!==null&&j===M$1}function Ai($,j){Jh=Ih=!0;var _e=$.pending;_e===null?j.next=j:(j.next=_e.next,_e.next=j),$.pending=j}function Bi($,j,_e){if(_e&4194240){var et=j.lanes;et&=$.pendingLanes,_e|=et,j.lanes=_e,Cc($,_e)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function($,j){return Th().memoizedState=[$,j===void 0?null:j],$},useContext:eh,useEffect:mi,useImperativeHandle:function($,j,_e){return _e=_e!=null?_e.concat([$]):null,ki(4194308,4,pi.bind(null,j,$),_e)},useLayoutEffect:function($,j){return ki(4194308,4,$,j)},useInsertionEffect:function($,j){return ki(4,2,$,j)},useMemo:function($,j){var _e=Th();return j=j===void 0?null:j,$=$(),_e.memoizedState=[$,j],$},useReducer:function($,j,_e){var et=Th();return j=_e!==void 0?_e(j):j,et.memoizedState=et.baseState=j,$={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$,lastRenderedState:j},et.queue=$,$=$.dispatch=xi.bind(null,M$1,$),[et.memoizedState,$]},useRef:function($){var j=Th();return $={current:$},j.memoizedState=$},useState:hi,useDebugValue:ri,useDeferredValue:function($){return Th().memoizedState=$},useTransition:function(){var $=hi(!1),j=$[0];return $=vi.bind(null,$[1]),Th().memoizedState=$,[j,$]},useMutableSource:function(){},useSyncExternalStore:function($,j,_e){var et=M$1,tt=Th();if(I$1){if(_e===void 0)throw Error(p$2(407));_e=_e()}else{if(_e=j(),Q===null)throw Error(p$2(349));Hh&30||di(et,j,_e)}tt.memoizedState=_e;var nt={value:_e,getSnapshot:j};return tt.queue=nt,mi(ai.bind(null,et,nt,$),[$]),et.flags|=2048,bi(9,ci.bind(null,et,nt,_e,j),void 0,null),_e},useId:function(){var $=Th(),j=Q.identifierPrefix;if(I$1){var _e=sg,et=rg;_e=(et&~(1<<32-oc(et)-1)).toString(32)+_e,j=":"+j+"R"+_e,_e=Kh++,0<_e&&(j+="H"+_e.toString(32)),j+=":"}else _e=Lh++,j=":"+j+"r"+_e.toString(32)+":";return $.memoizedState=j},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function($){var j=Uh();return ui(j,N.memoizedState,$)},useTransition:function(){var $=Wh(Vh)[0],j=Uh().memoizedState;return[$,j]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function($){var j=Uh();return N===null?j.memoizedState=$:ui(j,N.memoizedState,$)},useTransition:function(){var $=Xh(Vh)[0],j=Uh().memoizedState;return[$,j]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci($,j){if($&&$.defaultProps){j=A$1({},j),$=$.defaultProps;for(var _e in $)j[_e]===void 0&&(j[_e]=$[_e]);return j}return j}function Di($,j,_e,et){j=$.memoizedState,_e=_e(et,j),_e=_e==null?j:A$1({},j,_e),$.memoizedState=_e,$.lanes===0&&($.updateQueue.baseState=_e)}var Ei={isMounted:function($){return($=$._reactInternals)?Vb($)===$:!1},enqueueSetState:function($,j,_e){$=$._reactInternals;var et=R(),tt=yi($),nt=mh(et,tt);nt.payload=j,_e!=null&&(nt.callback=_e),j=nh($,nt,tt),j!==null&&(gi(j,$,tt,et),oh(j,$,tt))},enqueueReplaceState:function($,j,_e){$=$._reactInternals;var et=R(),tt=yi($),nt=mh(et,tt);nt.tag=1,nt.payload=j,_e!=null&&(nt.callback=_e),j=nh($,nt,tt),j!==null&&(gi(j,$,tt,et),oh(j,$,tt))},enqueueForceUpdate:function($,j){$=$._reactInternals;var _e=R(),et=yi($),tt=mh(_e,et);tt.tag=2,j!=null&&(tt.callback=j),j=nh($,tt,et),j!==null&&(gi(j,$,et,_e),oh(j,$,et))}};function Fi($,j,_e,et,tt,nt,rt){return $=$.stateNode,typeof $.shouldComponentUpdate=="function"?$.shouldComponentUpdate(et,nt,rt):j.prototype&&j.prototype.isPureReactComponent?!Ie(_e,et)||!Ie(tt,nt):!0}function Gi($,j,_e){var et=!1,tt=Vf,nt=j.contextType;return typeof nt=="object"&&nt!==null?nt=eh(nt):(tt=Zf(j)?Xf:H.current,et=j.contextTypes,nt=(et=et!=null)?Yf($,tt):Vf),j=new j(_e,nt),$.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,j.updater=Ei,$.stateNode=j,j._reactInternals=$,et&&($=$.stateNode,$.__reactInternalMemoizedUnmaskedChildContext=tt,$.__reactInternalMemoizedMaskedChildContext=nt),j}function Hi($,j,_e,et){$=j.state,typeof j.componentWillReceiveProps=="function"&&j.componentWillReceiveProps(_e,et),typeof j.UNSAFE_componentWillReceiveProps=="function"&&j.UNSAFE_componentWillReceiveProps(_e,et),j.state!==$&&Ei.enqueueReplaceState(j,j.state,null)}function Ii($,j,_e,et){var tt=$.stateNode;tt.props=_e,tt.state=$.memoizedState,tt.refs={},kh($);var nt=j.contextType;typeof nt=="object"&&nt!==null?tt.context=eh(nt):(nt=Zf(j)?Xf:H.current,tt.context=Yf($,nt)),tt.state=$.memoizedState,nt=j.getDerivedStateFromProps,typeof nt=="function"&&(Di($,j,nt,_e),tt.state=$.memoizedState),typeof j.getDerivedStateFromProps=="function"||typeof tt.getSnapshotBeforeUpdate=="function"||typeof tt.UNSAFE_componentWillMount!="function"&&typeof tt.componentWillMount!="function"||(j=tt.state,typeof tt.componentWillMount=="function"&&tt.componentWillMount(),typeof tt.UNSAFE_componentWillMount=="function"&&tt.UNSAFE_componentWillMount(),j!==tt.state&&Ei.enqueueReplaceState(tt,tt.state,null),qh($,_e,tt,et),tt.state=$.memoizedState),typeof tt.componentDidMount=="function"&&($.flags|=4194308)}function Ji($,j){try{var _e="",et=j;do _e+=Pa(et),et=et.return;while(et);var tt=_e}catch(nt){tt=`
Error generating stack: `+nt.message+`
`+nt.stack}return{value:$,source:j,stack:tt,digest:null}}function Ki($,j,_e){return{value:$,source:null,stack:_e??null,digest:j??null}}function Li($,j){try{console.error(j.value)}catch(_e){setTimeout(function(){throw _e})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni($,j,_e){_e=mh(-1,_e),_e.tag=3,_e.payload={element:null};var et=j.value;return _e.callback=function(){Oi||(Oi=!0,Pi=et),Li($,j)},_e}function Qi($,j,_e){_e=mh(-1,_e),_e.tag=3;var et=$.type.getDerivedStateFromError;if(typeof et=="function"){var tt=j.value;_e.payload=function(){return et(tt)},_e.callback=function(){Li($,j)}}var nt=$.stateNode;return nt!==null&&typeof nt.componentDidCatch=="function"&&(_e.callback=function(){Li($,j),typeof et!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var rt=j.stack;this.componentDidCatch(j.value,{componentStack:rt!==null?rt:""})}),_e}function Si($,j,_e){var et=$.pingCache;if(et===null){et=$.pingCache=new Mi;var tt=new Set;et.set(j,tt)}else tt=et.get(j),tt===void 0&&(tt=new Set,et.set(j,tt));tt.has(_e)||(tt.add(_e),$=Ti.bind(null,$,j,_e),j.then($,$))}function Ui($){do{var j;if((j=$.tag===13)&&(j=$.memoizedState,j=j!==null?j.dehydrated!==null:!0),j)return $;$=$.return}while($!==null);return null}function Vi($,j,_e,et,tt){return $.mode&1?($.flags|=65536,$.lanes=tt,$):($===j?$.flags|=65536:($.flags|=128,_e.flags|=131072,_e.flags&=-52805,_e.tag===1&&(_e.alternate===null?_e.tag=17:(j=mh(-1,1),j.tag=2,nh(_e,j,1))),_e.lanes|=1),$)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi($,j,_e,et){j.child=$===null?Vg(j,null,_e,et):Ug(j,$.child,_e,et)}function Yi($,j,_e,et,tt){_e=_e.render;var nt=j.ref;return ch(j,tt),et=Nh($,j,_e,et,nt,tt),_e=Sh(),$!==null&&!dh?(j.updateQueue=$.updateQueue,j.flags&=-2053,$.lanes&=~tt,Zi($,j,tt)):(I$1&&_e&&vg(j),j.flags|=1,Xi($,j,et,tt),j.child)}function $i($,j,_e,et,tt){if($===null){var nt=_e.type;return typeof nt=="function"&&!aj(nt)&&nt.defaultProps===void 0&&_e.compare===null&&_e.defaultProps===void 0?(j.tag=15,j.type=nt,bj($,j,nt,et,tt)):($=Rg(_e.type,null,et,j,j.mode,tt),$.ref=j.ref,$.return=j,j.child=$)}if(nt=$.child,!($.lanes&tt)){var rt=nt.memoizedProps;if(_e=_e.compare,_e=_e!==null?_e:Ie,_e(rt,et)&&$.ref===j.ref)return Zi($,j,tt)}return j.flags|=1,$=Pg(nt,et),$.ref=j.ref,$.return=j,j.child=$}function bj($,j,_e,et,tt){if($!==null){var nt=$.memoizedProps;if(Ie(nt,et)&&$.ref===j.ref)if(dh=!1,j.pendingProps=et=nt,($.lanes&tt)!==0)$.flags&131072&&(dh=!0);else return j.lanes=$.lanes,Zi($,j,tt)}return cj($,j,_e,et,tt)}function dj($,j,_e){var et=j.pendingProps,tt=et.children,nt=$!==null?$.memoizedState:null;if(et.mode==="hidden")if(!(j.mode&1))j.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=_e;else{if(!(_e&1073741824))return $=nt!==null?nt.baseLanes|_e:_e,j.lanes=j.childLanes=1073741824,j.memoizedState={baseLanes:$,cachePool:null,transitions:null},j.updateQueue=null,G(ej,fj),fj|=$,null;j.memoizedState={baseLanes:0,cachePool:null,transitions:null},et=nt!==null?nt.baseLanes:_e,G(ej,fj),fj|=et}else nt!==null?(et=nt.baseLanes|_e,j.memoizedState=null):et=_e,G(ej,fj),fj|=et;return Xi($,j,tt,_e),j.child}function gj($,j){var _e=j.ref;($===null&&_e!==null||$!==null&&$.ref!==_e)&&(j.flags|=512,j.flags|=2097152)}function cj($,j,_e,et,tt){var nt=Zf(_e)?Xf:H.current;return nt=Yf(j,nt),ch(j,tt),_e=Nh($,j,_e,et,nt,tt),et=Sh(),$!==null&&!dh?(j.updateQueue=$.updateQueue,j.flags&=-2053,$.lanes&=~tt,Zi($,j,tt)):(I$1&&et&&vg(j),j.flags|=1,Xi($,j,_e,tt),j.child)}function hj($,j,_e,et,tt){if(Zf(_e)){var nt=!0;cg(j)}else nt=!1;if(ch(j,tt),j.stateNode===null)ij($,j),Gi(j,_e,et),Ii(j,_e,et,tt),et=!0;else if($===null){var rt=j.stateNode,ot=j.memoizedProps;rt.props=ot;var it=rt.context,at=_e.contextType;typeof at=="object"&&at!==null?at=eh(at):(at=Zf(_e)?Xf:H.current,at=Yf(j,at));var dt=_e.getDerivedStateFromProps,st=typeof dt=="function"||typeof rt.getSnapshotBeforeUpdate=="function";st||typeof rt.UNSAFE_componentWillReceiveProps!="function"&&typeof rt.componentWillReceiveProps!="function"||(ot!==et||it!==at)&&Hi(j,rt,et,at),jh=!1;var ut=j.memoizedState;rt.state=ut,qh(j,et,rt,tt),it=j.memoizedState,ot!==et||ut!==it||Wf.current||jh?(typeof dt=="function"&&(Di(j,_e,dt,et),it=j.memoizedState),(ot=jh||Fi(j,_e,ot,et,ut,it,at))?(st||typeof rt.UNSAFE_componentWillMount!="function"&&typeof rt.componentWillMount!="function"||(typeof rt.componentWillMount=="function"&&rt.componentWillMount(),typeof rt.UNSAFE_componentWillMount=="function"&&rt.UNSAFE_componentWillMount()),typeof rt.componentDidMount=="function"&&(j.flags|=4194308)):(typeof rt.componentDidMount=="function"&&(j.flags|=4194308),j.memoizedProps=et,j.memoizedState=it),rt.props=et,rt.state=it,rt.context=at,et=ot):(typeof rt.componentDidMount=="function"&&(j.flags|=4194308),et=!1)}else{rt=j.stateNode,lh($,j),ot=j.memoizedProps,at=j.type===j.elementType?ot:Ci(j.type,ot),rt.props=at,st=j.pendingProps,ut=rt.context,it=_e.contextType,typeof it=="object"&&it!==null?it=eh(it):(it=Zf(_e)?Xf:H.current,it=Yf(j,it));var ft=_e.getDerivedStateFromProps;(dt=typeof ft=="function"||typeof rt.getSnapshotBeforeUpdate=="function")||typeof rt.UNSAFE_componentWillReceiveProps!="function"&&typeof rt.componentWillReceiveProps!="function"||(ot!==st||ut!==it)&&Hi(j,rt,et,it),jh=!1,ut=j.memoizedState,rt.state=ut,qh(j,et,rt,tt);var pt=j.memoizedState;ot!==st||ut!==pt||Wf.current||jh?(typeof ft=="function"&&(Di(j,_e,ft,et),pt=j.memoizedState),(at=jh||Fi(j,_e,at,et,ut,pt,it)||!1)?(dt||typeof rt.UNSAFE_componentWillUpdate!="function"&&typeof rt.componentWillUpdate!="function"||(typeof rt.componentWillUpdate=="function"&&rt.componentWillUpdate(et,pt,it),typeof rt.UNSAFE_componentWillUpdate=="function"&&rt.UNSAFE_componentWillUpdate(et,pt,it)),typeof rt.componentDidUpdate=="function"&&(j.flags|=4),typeof rt.getSnapshotBeforeUpdate=="function"&&(j.flags|=1024)):(typeof rt.componentDidUpdate!="function"||ot===$.memoizedProps&&ut===$.memoizedState||(j.flags|=4),typeof rt.getSnapshotBeforeUpdate!="function"||ot===$.memoizedProps&&ut===$.memoizedState||(j.flags|=1024),j.memoizedProps=et,j.memoizedState=pt),rt.props=et,rt.state=pt,rt.context=it,et=at):(typeof rt.componentDidUpdate!="function"||ot===$.memoizedProps&&ut===$.memoizedState||(j.flags|=4),typeof rt.getSnapshotBeforeUpdate!="function"||ot===$.memoizedProps&&ut===$.memoizedState||(j.flags|=1024),et=!1)}return jj($,j,_e,et,nt,tt)}function jj($,j,_e,et,tt,nt){gj($,j);var rt=(j.flags&128)!==0;if(!et&&!rt)return tt&&dg(j,_e,!1),Zi($,j,nt);et=j.stateNode,Wi.current=j;var ot=rt&&typeof _e.getDerivedStateFromError!="function"?null:et.render();return j.flags|=1,$!==null&&rt?(j.child=Ug(j,$.child,null,nt),j.child=Ug(j,null,ot,nt)):Xi($,j,ot,nt),j.memoizedState=et.state,tt&&dg(j,_e,!0),j.child}function kj($){var j=$.stateNode;j.pendingContext?ag($,j.pendingContext,j.pendingContext!==j.context):j.context&&ag($,j.context,!1),yh($,j.containerInfo)}function lj($,j,_e,et,tt){return Ig(),Jg(tt),j.flags|=256,Xi($,j,_e,et),j.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj($){return{baseLanes:$,cachePool:null,transitions:null}}function oj($,j,_e){var et=j.pendingProps,tt=L.current,nt=!1,rt=(j.flags&128)!==0,ot;if((ot=rt)||(ot=$!==null&&$.memoizedState===null?!1:(tt&2)!==0),ot?(nt=!0,j.flags&=-129):($===null||$.memoizedState!==null)&&(tt|=1),G(L,tt&1),$===null)return Eg(j),$=j.memoizedState,$!==null&&($=$.dehydrated,$!==null)?(j.mode&1?$.data==="$!"?j.lanes=8:j.lanes=1073741824:j.lanes=1,null):(rt=et.children,$=et.fallback,nt?(et=j.mode,nt=j.child,rt={mode:"hidden",children:rt},!(et&1)&&nt!==null?(nt.childLanes=0,nt.pendingProps=rt):nt=pj(rt,et,0,null),$=Tg($,et,_e,null),nt.return=j,$.return=j,nt.sibling=$,j.child=nt,j.child.memoizedState=nj(_e),j.memoizedState=mj,$):qj(j,rt));if(tt=$.memoizedState,tt!==null&&(ot=tt.dehydrated,ot!==null))return rj($,j,rt,et,ot,tt,_e);if(nt){nt=et.fallback,rt=j.mode,tt=$.child,ot=tt.sibling;var it={mode:"hidden",children:et.children};return!(rt&1)&&j.child!==tt?(et=j.child,et.childLanes=0,et.pendingProps=it,j.deletions=null):(et=Pg(tt,it),et.subtreeFlags=tt.subtreeFlags&14680064),ot!==null?nt=Pg(ot,nt):(nt=Tg(nt,rt,_e,null),nt.flags|=2),nt.return=j,et.return=j,et.sibling=nt,j.child=et,et=nt,nt=j.child,rt=$.child.memoizedState,rt=rt===null?nj(_e):{baseLanes:rt.baseLanes|_e,cachePool:null,transitions:rt.transitions},nt.memoizedState=rt,nt.childLanes=$.childLanes&~_e,j.memoizedState=mj,et}return nt=$.child,$=nt.sibling,et=Pg(nt,{mode:"visible",children:et.children}),!(j.mode&1)&&(et.lanes=_e),et.return=j,et.sibling=null,$!==null&&(_e=j.deletions,_e===null?(j.deletions=[$],j.flags|=16):_e.push($)),j.child=et,j.memoizedState=null,et}function qj($,j){return j=pj({mode:"visible",children:j},$.mode,0,null),j.return=$,$.child=j}function sj($,j,_e,et){return et!==null&&Jg(et),Ug(j,$.child,null,_e),$=qj(j,j.pendingProps.children),$.flags|=2,j.memoizedState=null,$}function rj($,j,_e,et,tt,nt,rt){if(_e)return j.flags&256?(j.flags&=-257,et=Ki(Error(p$2(422))),sj($,j,rt,et)):j.memoizedState!==null?(j.child=$.child,j.flags|=128,null):(nt=et.fallback,tt=j.mode,et=pj({mode:"visible",children:et.children},tt,0,null),nt=Tg(nt,tt,rt,null),nt.flags|=2,et.return=j,nt.return=j,et.sibling=nt,j.child=et,j.mode&1&&Ug(j,$.child,null,rt),j.child.memoizedState=nj(rt),j.memoizedState=mj,nt);if(!(j.mode&1))return sj($,j,rt,null);if(tt.data==="$!"){if(et=tt.nextSibling&&tt.nextSibling.dataset,et)var ot=et.dgst;return et=ot,nt=Error(p$2(419)),et=Ki(nt,et,void 0),sj($,j,rt,et)}if(ot=(rt&$.childLanes)!==0,dh||ot){if(et=Q,et!==null){switch(rt&-rt){case 4:tt=2;break;case 16:tt=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:tt=32;break;case 536870912:tt=268435456;break;default:tt=0}tt=tt&(et.suspendedLanes|rt)?0:tt,tt!==0&&tt!==nt.retryLane&&(nt.retryLane=tt,ih($,tt),gi(et,$,tt,-1))}return tj(),et=Ki(Error(p$2(421))),sj($,j,rt,et)}return tt.data==="$?"?(j.flags|=128,j.child=$.child,j=uj.bind(null,$),tt._reactRetry=j,null):($=nt.treeContext,yg=Lf(tt.nextSibling),xg=j,I$1=!0,zg=null,$!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=$.id,sg=$.overflow,qg=j),j=qj(j,et.children),j.flags|=4096,j)}function vj($,j,_e){$.lanes|=j;var et=$.alternate;et!==null&&(et.lanes|=j),bh($.return,j,_e)}function wj($,j,_e,et,tt){var nt=$.memoizedState;nt===null?$.memoizedState={isBackwards:j,rendering:null,renderingStartTime:0,last:et,tail:_e,tailMode:tt}:(nt.isBackwards=j,nt.rendering=null,nt.renderingStartTime=0,nt.last=et,nt.tail=_e,nt.tailMode=tt)}function xj($,j,_e){var et=j.pendingProps,tt=et.revealOrder,nt=et.tail;if(Xi($,j,et.children,_e),et=L.current,et&2)et=et&1|2,j.flags|=128;else{if($!==null&&$.flags&128)e:for($=j.child;$!==null;){if($.tag===13)$.memoizedState!==null&&vj($,_e,j);else if($.tag===19)vj($,_e,j);else if($.child!==null){$.child.return=$,$=$.child;continue}if($===j)break e;for(;$.sibling===null;){if($.return===null||$.return===j)break e;$=$.return}$.sibling.return=$.return,$=$.sibling}et&=1}if(G(L,et),!(j.mode&1))j.memoizedState=null;else switch(tt){case"forwards":for(_e=j.child,tt=null;_e!==null;)$=_e.alternate,$!==null&&Ch($)===null&&(tt=_e),_e=_e.sibling;_e=tt,_e===null?(tt=j.child,j.child=null):(tt=_e.sibling,_e.sibling=null),wj(j,!1,tt,_e,nt);break;case"backwards":for(_e=null,tt=j.child,j.child=null;tt!==null;){if($=tt.alternate,$!==null&&Ch($)===null){j.child=tt;break}$=tt.sibling,tt.sibling=_e,_e=tt,tt=$}wj(j,!0,_e,null,nt);break;case"together":wj(j,!1,null,null,void 0);break;default:j.memoizedState=null}return j.child}function ij($,j){!(j.mode&1)&&$!==null&&($.alternate=null,j.alternate=null,j.flags|=2)}function Zi($,j,_e){if($!==null&&(j.dependencies=$.dependencies),rh|=j.lanes,!(_e&j.childLanes))return null;if($!==null&&j.child!==$.child)throw Error(p$2(153));if(j.child!==null){for($=j.child,_e=Pg($,$.pendingProps),j.child=_e,_e.return=j;$.sibling!==null;)$=$.sibling,_e=_e.sibling=Pg($,$.pendingProps),_e.return=j;_e.sibling=null}return j.child}function yj($,j,_e){switch(j.tag){case 3:kj(j),Ig();break;case 5:Ah(j);break;case 1:Zf(j.type)&&cg(j);break;case 4:yh(j,j.stateNode.containerInfo);break;case 10:var et=j.type._context,tt=j.memoizedProps.value;G(Wg,et._currentValue),et._currentValue=tt;break;case 13:if(et=j.memoizedState,et!==null)return et.dehydrated!==null?(G(L,L.current&1),j.flags|=128,null):_e&j.child.childLanes?oj($,j,_e):(G(L,L.current&1),$=Zi($,j,_e),$!==null?$.sibling:null);G(L,L.current&1);break;case 19:if(et=(_e&j.childLanes)!==0,$.flags&128){if(et)return xj($,j,_e);j.flags|=128}if(tt=j.memoizedState,tt!==null&&(tt.rendering=null,tt.tail=null,tt.lastEffect=null),G(L,L.current),et)break;return null;case 22:case 23:return j.lanes=0,dj($,j,_e)}return Zi($,j,_e)}var zj,Aj,Bj,Cj;zj=function($,j){for(var _e=j.child;_e!==null;){if(_e.tag===5||_e.tag===6)$.appendChild(_e.stateNode);else if(_e.tag!==4&&_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===j)break;for(;_e.sibling===null;){if(_e.return===null||_e.return===j)return;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}};Aj=function(){};Bj=function($,j,_e,et){var tt=$.memoizedProps;if(tt!==et){$=j.stateNode,xh(uh.current);var nt=null;switch(_e){case"input":tt=Ya($,tt),et=Ya($,et),nt=[];break;case"select":tt=A$1({},tt,{value:void 0}),et=A$1({},et,{value:void 0}),nt=[];break;case"textarea":tt=gb($,tt),et=gb($,et),nt=[];break;default:typeof tt.onClick!="function"&&typeof et.onClick=="function"&&($.onclick=Bf)}ub(_e,et);var rt;_e=null;for(at in tt)if(!et.hasOwnProperty(at)&&tt.hasOwnProperty(at)&&tt[at]!=null)if(at==="style"){var ot=tt[at];for(rt in ot)ot.hasOwnProperty(rt)&&(_e||(_e={}),_e[rt]="")}else at!=="dangerouslySetInnerHTML"&&at!=="children"&&at!=="suppressContentEditableWarning"&&at!=="suppressHydrationWarning"&&at!=="autoFocus"&&(ea.hasOwnProperty(at)?nt||(nt=[]):(nt=nt||[]).push(at,null));for(at in et){var it=et[at];if(ot=tt!=null?tt[at]:void 0,et.hasOwnProperty(at)&&it!==ot&&(it!=null||ot!=null))if(at==="style")if(ot){for(rt in ot)!ot.hasOwnProperty(rt)||it&&it.hasOwnProperty(rt)||(_e||(_e={}),_e[rt]="");for(rt in it)it.hasOwnProperty(rt)&&ot[rt]!==it[rt]&&(_e||(_e={}),_e[rt]=it[rt])}else _e||(nt||(nt=[]),nt.push(at,_e)),_e=it;else at==="dangerouslySetInnerHTML"?(it=it?it.__html:void 0,ot=ot?ot.__html:void 0,it!=null&&ot!==it&&(nt=nt||[]).push(at,it)):at==="children"?typeof it!="string"&&typeof it!="number"||(nt=nt||[]).push(at,""+it):at!=="suppressContentEditableWarning"&&at!=="suppressHydrationWarning"&&(ea.hasOwnProperty(at)?(it!=null&&at==="onScroll"&&D("scroll",$),nt||ot===it||(nt=[])):(nt=nt||[]).push(at,it))}_e&&(nt=nt||[]).push("style",_e);var at=nt;(j.updateQueue=at)&&(j.flags|=4)}};Cj=function($,j,_e,et){_e!==et&&(j.flags|=4)};function Dj($,j){if(!I$1)switch($.tailMode){case"hidden":j=$.tail;for(var _e=null;j!==null;)j.alternate!==null&&(_e=j),j=j.sibling;_e===null?$.tail=null:_e.sibling=null;break;case"collapsed":_e=$.tail;for(var et=null;_e!==null;)_e.alternate!==null&&(et=_e),_e=_e.sibling;et===null?j||$.tail===null?$.tail=null:$.tail.sibling=null:et.sibling=null}}function S$1($){var j=$.alternate!==null&&$.alternate.child===$.child,_e=0,et=0;if(j)for(var tt=$.child;tt!==null;)_e|=tt.lanes|tt.childLanes,et|=tt.subtreeFlags&14680064,et|=tt.flags&14680064,tt.return=$,tt=tt.sibling;else for(tt=$.child;tt!==null;)_e|=tt.lanes|tt.childLanes,et|=tt.subtreeFlags,et|=tt.flags,tt.return=$,tt=tt.sibling;return $.subtreeFlags|=et,$.childLanes=_e,j}function Ej($,j,_e){var et=j.pendingProps;switch(wg(j),j.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(j),null;case 1:return Zf(j.type)&&$f(),S$1(j),null;case 3:return et=j.stateNode,zh(),E$1(Wf),E$1(H),Eh(),et.pendingContext&&(et.context=et.pendingContext,et.pendingContext=null),($===null||$.child===null)&&(Gg(j)?j.flags|=4:$===null||$.memoizedState.isDehydrated&&!(j.flags&256)||(j.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj($,j),S$1(j),null;case 5:Bh(j);var tt=xh(wh.current);if(_e=j.type,$!==null&&j.stateNode!=null)Bj($,j,_e,et,tt),$.ref!==j.ref&&(j.flags|=512,j.flags|=2097152);else{if(!et){if(j.stateNode===null)throw Error(p$2(166));return S$1(j),null}if($=xh(uh.current),Gg(j)){et=j.stateNode,_e=j.type;var nt=j.memoizedProps;switch(et[Of]=j,et[Pf]=nt,$=(j.mode&1)!==0,_e){case"dialog":D("cancel",et),D("close",et);break;case"iframe":case"object":case"embed":D("load",et);break;case"video":case"audio":for(tt=0;tt<lf.length;tt++)D(lf[tt],et);break;case"source":D("error",et);break;case"img":case"image":case"link":D("error",et),D("load",et);break;case"details":D("toggle",et);break;case"input":Za(et,nt),D("invalid",et);break;case"select":et._wrapperState={wasMultiple:!!nt.multiple},D("invalid",et);break;case"textarea":hb(et,nt),D("invalid",et)}ub(_e,nt),tt=null;for(var rt in nt)if(nt.hasOwnProperty(rt)){var ot=nt[rt];rt==="children"?typeof ot=="string"?et.textContent!==ot&&(nt.suppressHydrationWarning!==!0&&Af(et.textContent,ot,$),tt=["children",ot]):typeof ot=="number"&&et.textContent!==""+ot&&(nt.suppressHydrationWarning!==!0&&Af(et.textContent,ot,$),tt=["children",""+ot]):ea.hasOwnProperty(rt)&&ot!=null&&rt==="onScroll"&&D("scroll",et)}switch(_e){case"input":Va(et),db(et,nt,!0);break;case"textarea":Va(et),jb(et);break;case"select":case"option":break;default:typeof nt.onClick=="function"&&(et.onclick=Bf)}et=tt,j.updateQueue=et,et!==null&&(j.flags|=4)}else{rt=tt.nodeType===9?tt:tt.ownerDocument,$==="http://www.w3.org/1999/xhtml"&&($=kb(_e)),$==="http://www.w3.org/1999/xhtml"?_e==="script"?($=rt.createElement("div"),$.innerHTML="<script><\/script>",$=$.removeChild($.firstChild)):typeof et.is=="string"?$=rt.createElement(_e,{is:et.is}):($=rt.createElement(_e),_e==="select"&&(rt=$,et.multiple?rt.multiple=!0:et.size&&(rt.size=et.size))):$=rt.createElementNS($,_e),$[Of]=j,$[Pf]=et,zj($,j,!1,!1),j.stateNode=$;e:{switch(rt=vb(_e,et),_e){case"dialog":D("cancel",$),D("close",$),tt=et;break;case"iframe":case"object":case"embed":D("load",$),tt=et;break;case"video":case"audio":for(tt=0;tt<lf.length;tt++)D(lf[tt],$);tt=et;break;case"source":D("error",$),tt=et;break;case"img":case"image":case"link":D("error",$),D("load",$),tt=et;break;case"details":D("toggle",$),tt=et;break;case"input":Za($,et),tt=Ya($,et),D("invalid",$);break;case"option":tt=et;break;case"select":$._wrapperState={wasMultiple:!!et.multiple},tt=A$1({},et,{value:void 0}),D("invalid",$);break;case"textarea":hb($,et),tt=gb($,et),D("invalid",$);break;default:tt=et}ub(_e,tt),ot=tt;for(nt in ot)if(ot.hasOwnProperty(nt)){var it=ot[nt];nt==="style"?sb($,it):nt==="dangerouslySetInnerHTML"?(it=it?it.__html:void 0,it!=null&&nb($,it)):nt==="children"?typeof it=="string"?(_e!=="textarea"||it!=="")&&ob($,it):typeof it=="number"&&ob($,""+it):nt!=="suppressContentEditableWarning"&&nt!=="suppressHydrationWarning"&&nt!=="autoFocus"&&(ea.hasOwnProperty(nt)?it!=null&&nt==="onScroll"&&D("scroll",$):it!=null&&ta($,nt,it,rt))}switch(_e){case"input":Va($),db($,et,!1);break;case"textarea":Va($),jb($);break;case"option":et.value!=null&&$.setAttribute("value",""+Sa(et.value));break;case"select":$.multiple=!!et.multiple,nt=et.value,nt!=null?fb($,!!et.multiple,nt,!1):et.defaultValue!=null&&fb($,!!et.multiple,et.defaultValue,!0);break;default:typeof tt.onClick=="function"&&($.onclick=Bf)}switch(_e){case"button":case"input":case"select":case"textarea":et=!!et.autoFocus;break e;case"img":et=!0;break e;default:et=!1}}et&&(j.flags|=4)}j.ref!==null&&(j.flags|=512,j.flags|=2097152)}return S$1(j),null;case 6:if($&&j.stateNode!=null)Cj($,j,$.memoizedProps,et);else{if(typeof et!="string"&&j.stateNode===null)throw Error(p$2(166));if(_e=xh(wh.current),xh(uh.current),Gg(j)){if(et=j.stateNode,_e=j.memoizedProps,et[Of]=j,(nt=et.nodeValue!==_e)&&($=xg,$!==null))switch($.tag){case 3:Af(et.nodeValue,_e,($.mode&1)!==0);break;case 5:$.memoizedProps.suppressHydrationWarning!==!0&&Af(et.nodeValue,_e,($.mode&1)!==0)}nt&&(j.flags|=4)}else et=(_e.nodeType===9?_e:_e.ownerDocument).createTextNode(et),et[Of]=j,j.stateNode=et}return S$1(j),null;case 13:if(E$1(L),et=j.memoizedState,$===null||$.memoizedState!==null&&$.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&j.mode&1&&!(j.flags&128))Hg(),Ig(),j.flags|=98560,nt=!1;else if(nt=Gg(j),et!==null&&et.dehydrated!==null){if($===null){if(!nt)throw Error(p$2(318));if(nt=j.memoizedState,nt=nt!==null?nt.dehydrated:null,!nt)throw Error(p$2(317));nt[Of]=j}else Ig(),!(j.flags&128)&&(j.memoizedState=null),j.flags|=4;S$1(j),nt=!1}else zg!==null&&(Fj(zg),zg=null),nt=!0;if(!nt)return j.flags&65536?j:null}return j.flags&128?(j.lanes=_e,j):(et=et!==null,et!==($!==null&&$.memoizedState!==null)&&et&&(j.child.flags|=8192,j.mode&1&&($===null||L.current&1?T$1===0&&(T$1=3):tj())),j.updateQueue!==null&&(j.flags|=4),S$1(j),null);case 4:return zh(),Aj($,j),$===null&&sf(j.stateNode.containerInfo),S$1(j),null;case 10:return ah(j.type._context),S$1(j),null;case 17:return Zf(j.type)&&$f(),S$1(j),null;case 19:if(E$1(L),nt=j.memoizedState,nt===null)return S$1(j),null;if(et=(j.flags&128)!==0,rt=nt.rendering,rt===null)if(et)Dj(nt,!1);else{if(T$1!==0||$!==null&&$.flags&128)for($=j.child;$!==null;){if(rt=Ch($),rt!==null){for(j.flags|=128,Dj(nt,!1),et=rt.updateQueue,et!==null&&(j.updateQueue=et,j.flags|=4),j.subtreeFlags=0,et=_e,_e=j.child;_e!==null;)nt=_e,$=et,nt.flags&=14680066,rt=nt.alternate,rt===null?(nt.childLanes=0,nt.lanes=$,nt.child=null,nt.subtreeFlags=0,nt.memoizedProps=null,nt.memoizedState=null,nt.updateQueue=null,nt.dependencies=null,nt.stateNode=null):(nt.childLanes=rt.childLanes,nt.lanes=rt.lanes,nt.child=rt.child,nt.subtreeFlags=0,nt.deletions=null,nt.memoizedProps=rt.memoizedProps,nt.memoizedState=rt.memoizedState,nt.updateQueue=rt.updateQueue,nt.type=rt.type,$=rt.dependencies,nt.dependencies=$===null?null:{lanes:$.lanes,firstContext:$.firstContext}),_e=_e.sibling;return G(L,L.current&1|2),j.child}$=$.sibling}nt.tail!==null&&B()>Gj&&(j.flags|=128,et=!0,Dj(nt,!1),j.lanes=4194304)}else{if(!et)if($=Ch(rt),$!==null){if(j.flags|=128,et=!0,_e=$.updateQueue,_e!==null&&(j.updateQueue=_e,j.flags|=4),Dj(nt,!0),nt.tail===null&&nt.tailMode==="hidden"&&!rt.alternate&&!I$1)return S$1(j),null}else 2*B()-nt.renderingStartTime>Gj&&_e!==1073741824&&(j.flags|=128,et=!0,Dj(nt,!1),j.lanes=4194304);nt.isBackwards?(rt.sibling=j.child,j.child=rt):(_e=nt.last,_e!==null?_e.sibling=rt:j.child=rt,nt.last=rt)}return nt.tail!==null?(j=nt.tail,nt.rendering=j,nt.tail=j.sibling,nt.renderingStartTime=B(),j.sibling=null,_e=L.current,G(L,et?_e&1|2:_e&1),j):(S$1(j),null);case 22:case 23:return Hj(),et=j.memoizedState!==null,$!==null&&$.memoizedState!==null!==et&&(j.flags|=8192),et&&j.mode&1?fj&1073741824&&(S$1(j),j.subtreeFlags&6&&(j.flags|=8192)):S$1(j),null;case 24:return null;case 25:return null}throw Error(p$2(156,j.tag))}function Ij($,j){switch(wg(j),j.tag){case 1:return Zf(j.type)&&$f(),$=j.flags,$&65536?(j.flags=$&-65537|128,j):null;case 3:return zh(),E$1(Wf),E$1(H),Eh(),$=j.flags,$&65536&&!($&128)?(j.flags=$&-65537|128,j):null;case 5:return Bh(j),null;case 13:if(E$1(L),$=j.memoizedState,$!==null&&$.dehydrated!==null){if(j.alternate===null)throw Error(p$2(340));Ig()}return $=j.flags,$&65536?(j.flags=$&-65537|128,j):null;case 19:return E$1(L),null;case 4:return zh(),null;case 10:return ah(j.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj($,j){var _e=$.ref;if(_e!==null)if(typeof _e=="function")try{_e(null)}catch(et){W($,j,et)}else _e.current=null}function Mj($,j,_e){try{_e()}catch(et){W($,j,et)}}var Nj=!1;function Oj($,j){if(Cf=dd,$=Me(),Ne($)){if("selectionStart"in $)var _e={start:$.selectionStart,end:$.selectionEnd};else e:{_e=(_e=$.ownerDocument)&&_e.defaultView||window;var et=_e.getSelection&&_e.getSelection();if(et&&et.rangeCount!==0){_e=et.anchorNode;var tt=et.anchorOffset,nt=et.focusNode;et=et.focusOffset;try{_e.nodeType,nt.nodeType}catch{_e=null;break e}var rt=0,ot=-1,it=-1,at=0,dt=0,st=$,ut=null;t:for(;;){for(var ft;st!==_e||tt!==0&&st.nodeType!==3||(ot=rt+tt),st!==nt||et!==0&&st.nodeType!==3||(it=rt+et),st.nodeType===3&&(rt+=st.nodeValue.length),(ft=st.firstChild)!==null;)ut=st,st=ft;for(;;){if(st===$)break t;if(ut===_e&&++at===tt&&(ot=rt),ut===nt&&++dt===et&&(it=rt),(ft=st.nextSibling)!==null)break;st=ut,ut=st.parentNode}st=ft}_e=ot===-1||it===-1?null:{start:ot,end:it}}else _e=null}_e=_e||{start:0,end:0}}else _e=null;for(Df={focusedElem:$,selectionRange:_e},dd=!1,V=j;V!==null;)if(j=V,$=j.child,(j.subtreeFlags&1028)!==0&&$!==null)$.return=j,V=$;else for(;V!==null;){j=V;try{var pt=j.alternate;if(j.flags&1024)switch(j.tag){case 0:case 11:case 15:break;case 1:if(pt!==null){var gt=pt.memoizedProps,yt=pt.memoizedState,mt=j.stateNode,vt=mt.getSnapshotBeforeUpdate(j.elementType===j.type?gt:Ci(j.type,gt),yt);mt.__reactInternalSnapshotBeforeUpdate=vt}break;case 3:var _t=j.stateNode.containerInfo;_t.nodeType===1?_t.textContent="":_t.nodeType===9&&_t.documentElement&&_t.removeChild(_t.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$2(163))}}catch(St){W(j,j.return,St)}if($=j.sibling,$!==null){$.return=j.return,V=$;break}V=j.return}return pt=Nj,Nj=!1,pt}function Pj($,j,_e){var et=j.updateQueue;if(et=et!==null?et.lastEffect:null,et!==null){var tt=et=et.next;do{if((tt.tag&$)===$){var nt=tt.destroy;tt.destroy=void 0,nt!==void 0&&Mj(j,_e,nt)}tt=tt.next}while(tt!==et)}}function Qj($,j){if(j=j.updateQueue,j=j!==null?j.lastEffect:null,j!==null){var _e=j=j.next;do{if((_e.tag&$)===$){var et=_e.create;_e.destroy=et()}_e=_e.next}while(_e!==j)}}function Rj($){var j=$.ref;if(j!==null){var _e=$.stateNode;switch($.tag){case 5:$=_e;break;default:$=_e}typeof j=="function"?j($):j.current=$}}function Sj($){var j=$.alternate;j!==null&&($.alternate=null,Sj(j)),$.child=null,$.deletions=null,$.sibling=null,$.tag===5&&(j=$.stateNode,j!==null&&(delete j[Of],delete j[Pf],delete j[of],delete j[Qf],delete j[Rf])),$.stateNode=null,$.return=null,$.dependencies=null,$.memoizedProps=null,$.memoizedState=null,$.pendingProps=null,$.stateNode=null,$.updateQueue=null}function Tj($){return $.tag===5||$.tag===3||$.tag===4}function Uj($){e:for(;;){for(;$.sibling===null;){if($.return===null||Tj($.return))return null;$=$.return}for($.sibling.return=$.return,$=$.sibling;$.tag!==5&&$.tag!==6&&$.tag!==18;){if($.flags&2||$.child===null||$.tag===4)continue e;$.child.return=$,$=$.child}if(!($.flags&2))return $.stateNode}}function Vj($,j,_e){var et=$.tag;if(et===5||et===6)$=$.stateNode,j?_e.nodeType===8?_e.parentNode.insertBefore($,j):_e.insertBefore($,j):(_e.nodeType===8?(j=_e.parentNode,j.insertBefore($,_e)):(j=_e,j.appendChild($)),_e=_e._reactRootContainer,_e!=null||j.onclick!==null||(j.onclick=Bf));else if(et!==4&&($=$.child,$!==null))for(Vj($,j,_e),$=$.sibling;$!==null;)Vj($,j,_e),$=$.sibling}function Wj($,j,_e){var et=$.tag;if(et===5||et===6)$=$.stateNode,j?_e.insertBefore($,j):_e.appendChild($);else if(et!==4&&($=$.child,$!==null))for(Wj($,j,_e),$=$.sibling;$!==null;)Wj($,j,_e),$=$.sibling}var X=null,Xj=!1;function Yj($,j,_e){for(_e=_e.child;_e!==null;)Zj($,j,_e),_e=_e.sibling}function Zj($,j,_e){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,_e)}catch{}switch(_e.tag){case 5:U||Lj(_e,j);case 6:var et=X,tt=Xj;X=null,Yj($,j,_e),X=et,Xj=tt,X!==null&&(Xj?($=X,_e=_e.stateNode,$.nodeType===8?$.parentNode.removeChild(_e):$.removeChild(_e)):X.removeChild(_e.stateNode));break;case 18:X!==null&&(Xj?($=X,_e=_e.stateNode,$.nodeType===8?Kf($.parentNode,_e):$.nodeType===1&&Kf($,_e),bd($)):Kf(X,_e.stateNode));break;case 4:et=X,tt=Xj,X=_e.stateNode.containerInfo,Xj=!0,Yj($,j,_e),X=et,Xj=tt;break;case 0:case 11:case 14:case 15:if(!U&&(et=_e.updateQueue,et!==null&&(et=et.lastEffect,et!==null))){tt=et=et.next;do{var nt=tt,rt=nt.destroy;nt=nt.tag,rt!==void 0&&(nt&2||nt&4)&&Mj(_e,j,rt),tt=tt.next}while(tt!==et)}Yj($,j,_e);break;case 1:if(!U&&(Lj(_e,j),et=_e.stateNode,typeof et.componentWillUnmount=="function"))try{et.props=_e.memoizedProps,et.state=_e.memoizedState,et.componentWillUnmount()}catch(ot){W(_e,j,ot)}Yj($,j,_e);break;case 21:Yj($,j,_e);break;case 22:_e.mode&1?(U=(et=U)||_e.memoizedState!==null,Yj($,j,_e),U=et):Yj($,j,_e);break;default:Yj($,j,_e)}}function ak($){var j=$.updateQueue;if(j!==null){$.updateQueue=null;var _e=$.stateNode;_e===null&&(_e=$.stateNode=new Kj),j.forEach(function(et){var tt=bk.bind(null,$,et);_e.has(et)||(_e.add(et),et.then(tt,tt))})}}function ck($,j){var _e=j.deletions;if(_e!==null)for(var et=0;et<_e.length;et++){var tt=_e[et];try{var nt=$,rt=j,ot=rt;e:for(;ot!==null;){switch(ot.tag){case 5:X=ot.stateNode,Xj=!1;break e;case 3:X=ot.stateNode.containerInfo,Xj=!0;break e;case 4:X=ot.stateNode.containerInfo,Xj=!0;break e}ot=ot.return}if(X===null)throw Error(p$2(160));Zj(nt,rt,tt),X=null,Xj=!1;var it=tt.alternate;it!==null&&(it.return=null),tt.return=null}catch(at){W(tt,j,at)}}if(j.subtreeFlags&12854)for(j=j.child;j!==null;)dk(j,$),j=j.sibling}function dk($,j){var _e=$.alternate,et=$.flags;switch($.tag){case 0:case 11:case 14:case 15:if(ck(j,$),ek($),et&4){try{Pj(3,$,$.return),Qj(3,$)}catch(gt){W($,$.return,gt)}try{Pj(5,$,$.return)}catch(gt){W($,$.return,gt)}}break;case 1:ck(j,$),ek($),et&512&&_e!==null&&Lj(_e,_e.return);break;case 5:if(ck(j,$),ek($),et&512&&_e!==null&&Lj(_e,_e.return),$.flags&32){var tt=$.stateNode;try{ob(tt,"")}catch(gt){W($,$.return,gt)}}if(et&4&&(tt=$.stateNode,tt!=null)){var nt=$.memoizedProps,rt=_e!==null?_e.memoizedProps:nt,ot=$.type,it=$.updateQueue;if($.updateQueue=null,it!==null)try{ot==="input"&&nt.type==="radio"&&nt.name!=null&&ab(tt,nt),vb(ot,rt);var at=vb(ot,nt);for(rt=0;rt<it.length;rt+=2){var dt=it[rt],st=it[rt+1];dt==="style"?sb(tt,st):dt==="dangerouslySetInnerHTML"?nb(tt,st):dt==="children"?ob(tt,st):ta(tt,dt,st,at)}switch(ot){case"input":bb(tt,nt);break;case"textarea":ib(tt,nt);break;case"select":var ut=tt._wrapperState.wasMultiple;tt._wrapperState.wasMultiple=!!nt.multiple;var ft=nt.value;ft!=null?fb(tt,!!nt.multiple,ft,!1):ut!==!!nt.multiple&&(nt.defaultValue!=null?fb(tt,!!nt.multiple,nt.defaultValue,!0):fb(tt,!!nt.multiple,nt.multiple?[]:"",!1))}tt[Pf]=nt}catch(gt){W($,$.return,gt)}}break;case 6:if(ck(j,$),ek($),et&4){if($.stateNode===null)throw Error(p$2(162));tt=$.stateNode,nt=$.memoizedProps;try{tt.nodeValue=nt}catch(gt){W($,$.return,gt)}}break;case 3:if(ck(j,$),ek($),et&4&&_e!==null&&_e.memoizedState.isDehydrated)try{bd(j.containerInfo)}catch(gt){W($,$.return,gt)}break;case 4:ck(j,$),ek($);break;case 13:ck(j,$),ek($),tt=$.child,tt.flags&8192&&(nt=tt.memoizedState!==null,tt.stateNode.isHidden=nt,!nt||tt.alternate!==null&&tt.alternate.memoizedState!==null||(fk=B())),et&4&&ak($);break;case 22:if(dt=_e!==null&&_e.memoizedState!==null,$.mode&1?(U=(at=U)||dt,ck(j,$),U=at):ck(j,$),ek($),et&8192){if(at=$.memoizedState!==null,($.stateNode.isHidden=at)&&!dt&&$.mode&1)for(V=$,dt=$.child;dt!==null;){for(st=V=dt;V!==null;){switch(ut=V,ft=ut.child,ut.tag){case 0:case 11:case 14:case 15:Pj(4,ut,ut.return);break;case 1:Lj(ut,ut.return);var pt=ut.stateNode;if(typeof pt.componentWillUnmount=="function"){et=ut,_e=ut.return;try{j=et,pt.props=j.memoizedProps,pt.state=j.memoizedState,pt.componentWillUnmount()}catch(gt){W(et,_e,gt)}}break;case 5:Lj(ut,ut.return);break;case 22:if(ut.memoizedState!==null){gk(st);continue}}ft!==null?(ft.return=ut,V=ft):gk(st)}dt=dt.sibling}e:for(dt=null,st=$;;){if(st.tag===5){if(dt===null){dt=st;try{tt=st.stateNode,at?(nt=tt.style,typeof nt.setProperty=="function"?nt.setProperty("display","none","important"):nt.display="none"):(ot=st.stateNode,it=st.memoizedProps.style,rt=it!=null&&it.hasOwnProperty("display")?it.display:null,ot.style.display=rb("display",rt))}catch(gt){W($,$.return,gt)}}}else if(st.tag===6){if(dt===null)try{st.stateNode.nodeValue=at?"":st.memoizedProps}catch(gt){W($,$.return,gt)}}else if((st.tag!==22&&st.tag!==23||st.memoizedState===null||st===$)&&st.child!==null){st.child.return=st,st=st.child;continue}if(st===$)break e;for(;st.sibling===null;){if(st.return===null||st.return===$)break e;dt===st&&(dt=null),st=st.return}dt===st&&(dt=null),st.sibling.return=st.return,st=st.sibling}}break;case 19:ck(j,$),ek($),et&4&&ak($);break;case 21:break;default:ck(j,$),ek($)}}function ek($){var j=$.flags;if(j&2){try{e:{for(var _e=$.return;_e!==null;){if(Tj(_e)){var et=_e;break e}_e=_e.return}throw Error(p$2(160))}switch(et.tag){case 5:var tt=et.stateNode;et.flags&32&&(ob(tt,""),et.flags&=-33);var nt=Uj($);Wj($,nt,tt);break;case 3:case 4:var rt=et.stateNode.containerInfo,ot=Uj($);Vj($,ot,rt);break;default:throw Error(p$2(161))}}catch(it){W($,$.return,it)}$.flags&=-3}j&4096&&($.flags&=-4097)}function hk($,j,_e){V=$,ik($)}function ik($,j,_e){for(var et=($.mode&1)!==0;V!==null;){var tt=V,nt=tt.child;if(tt.tag===22&&et){var rt=tt.memoizedState!==null||Jj;if(!rt){var ot=tt.alternate,it=ot!==null&&ot.memoizedState!==null||U;ot=Jj;var at=U;if(Jj=rt,(U=it)&&!at)for(V=tt;V!==null;)rt=V,it=rt.child,rt.tag===22&&rt.memoizedState!==null?jk(tt):it!==null?(it.return=rt,V=it):jk(tt);for(;nt!==null;)V=nt,ik(nt),nt=nt.sibling;V=tt,Jj=ot,U=at}kk($)}else tt.subtreeFlags&8772&&nt!==null?(nt.return=tt,V=nt):kk($)}}function kk($){for(;V!==null;){var j=V;if(j.flags&8772){var _e=j.alternate;try{if(j.flags&8772)switch(j.tag){case 0:case 11:case 15:U||Qj(5,j);break;case 1:var et=j.stateNode;if(j.flags&4&&!U)if(_e===null)et.componentDidMount();else{var tt=j.elementType===j.type?_e.memoizedProps:Ci(j.type,_e.memoizedProps);et.componentDidUpdate(tt,_e.memoizedState,et.__reactInternalSnapshotBeforeUpdate)}var nt=j.updateQueue;nt!==null&&sh(j,nt,et);break;case 3:var rt=j.updateQueue;if(rt!==null){if(_e=null,j.child!==null)switch(j.child.tag){case 5:_e=j.child.stateNode;break;case 1:_e=j.child.stateNode}sh(j,rt,_e)}break;case 5:var ot=j.stateNode;if(_e===null&&j.flags&4){_e=ot;var it=j.memoizedProps;switch(j.type){case"button":case"input":case"select":case"textarea":it.autoFocus&&_e.focus();break;case"img":it.src&&(_e.src=it.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(j.memoizedState===null){var at=j.alternate;if(at!==null){var dt=at.memoizedState;if(dt!==null){var st=dt.dehydrated;st!==null&&bd(st)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$2(163))}U||j.flags&512&&Rj(j)}catch(ut){W(j,j.return,ut)}}if(j===$){V=null;break}if(_e=j.sibling,_e!==null){_e.return=j.return,V=_e;break}V=j.return}}function gk($){for(;V!==null;){var j=V;if(j===$){V=null;break}var _e=j.sibling;if(_e!==null){_e.return=j.return,V=_e;break}V=j.return}}function jk($){for(;V!==null;){var j=V;try{switch(j.tag){case 0:case 11:case 15:var _e=j.return;try{Qj(4,j)}catch(it){W(j,_e,it)}break;case 1:var et=j.stateNode;if(typeof et.componentDidMount=="function"){var tt=j.return;try{et.componentDidMount()}catch(it){W(j,tt,it)}}var nt=j.return;try{Rj(j)}catch(it){W(j,nt,it)}break;case 5:var rt=j.return;try{Rj(j)}catch(it){W(j,rt,it)}}}catch(it){W(j,j.return,it)}if(j===$){V=null;break}var ot=j.sibling;if(ot!==null){ot.return=j.return,V=ot;break}V=j.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T$1=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi($){return $.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):($=C$1,$!==0||($=window.event,$=$===void 0?16:jd($.type)),$):1}function gi($,j,_e,et){if(50<yk)throw yk=0,zk=null,Error(p$2(185));Ac($,_e,et),(!(K&2)||$!==Q)&&($===Q&&(!(K&2)&&(qk|=_e),T$1===4&&Ck($,Z)),Dk($,et),_e===1&&K===0&&!(j.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk($,j){var _e=$.callbackNode;wc($,j);var et=uc($,$===Q?Z:0);if(et===0)_e!==null&&bc(_e),$.callbackNode=null,$.callbackPriority=0;else if(j=et&-et,$.callbackPriority!==j){if(_e!=null&&bc(_e),j===1)$.tag===0?ig(Ek.bind(null,$)):hg(Ek.bind(null,$)),Jf(function(){!(K&6)&&jg()}),_e=null;else{switch(Dc(et)){case 1:_e=fc;break;case 4:_e=gc;break;case 16:_e=hc;break;case 536870912:_e=jc;break;default:_e=hc}_e=Fk(_e,Gk.bind(null,$))}$.callbackPriority=j,$.callbackNode=_e}}function Gk($,j){if(Ak=-1,Bk=0,K&6)throw Error(p$2(327));var _e=$.callbackNode;if(Hk()&&$.callbackNode!==_e)return null;var et=uc($,$===Q?Z:0);if(et===0)return null;if(et&30||et&$.expiredLanes||j)j=Ik($,et);else{j=et;var tt=K;K|=2;var nt=Jk();(Q!==$||Z!==j)&&(uk=null,Gj=B()+500,Kk($,j));do try{Lk();break}catch(ot){Mk($,ot)}while(!0);$g(),mk.current=nt,K=tt,Y!==null?j=0:(Q=null,Z=0,j=T$1)}if(j!==0){if(j===2&&(tt=xc($),tt!==0&&(et=tt,j=Nk($,tt))),j===1)throw _e=pk,Kk($,0),Ck($,et),Dk($,B()),_e;if(j===6)Ck($,et);else{if(tt=$.current.alternate,!(et&30)&&!Ok(tt)&&(j=Ik($,et),j===2&&(nt=xc($),nt!==0&&(et=nt,j=Nk($,nt))),j===1))throw _e=pk,Kk($,0),Ck($,et),Dk($,B()),_e;switch($.finishedWork=tt,$.finishedLanes=et,j){case 0:case 1:throw Error(p$2(345));case 2:Pk($,tk,uk);break;case 3:if(Ck($,et),(et&130023424)===et&&(j=fk+500-B(),10<j)){if(uc($,0)!==0)break;if(tt=$.suspendedLanes,(tt&et)!==et){R(),$.pingedLanes|=$.suspendedLanes&tt;break}$.timeoutHandle=Ff(Pk.bind(null,$,tk,uk),j);break}Pk($,tk,uk);break;case 4:if(Ck($,et),(et&4194240)===et)break;for(j=$.eventTimes,tt=-1;0<et;){var rt=31-oc(et);nt=1<<rt,rt=j[rt],rt>tt&&(tt=rt),et&=~nt}if(et=tt,et=B()-et,et=(120>et?120:480>et?480:1080>et?1080:1920>et?1920:3e3>et?3e3:4320>et?4320:1960*lk(et/1960))-et,10<et){$.timeoutHandle=Ff(Pk.bind(null,$,tk,uk),et);break}Pk($,tk,uk);break;case 5:Pk($,tk,uk);break;default:throw Error(p$2(329))}}}return Dk($,B()),$.callbackNode===_e?Gk.bind(null,$):null}function Nk($,j){var _e=sk;return $.current.memoizedState.isDehydrated&&(Kk($,j).flags|=256),$=Ik($,j),$!==2&&(j=tk,tk=_e,j!==null&&Fj(j)),$}function Fj($){tk===null?tk=$:tk.push.apply(tk,$)}function Ok($){for(var j=$;;){if(j.flags&16384){var _e=j.updateQueue;if(_e!==null&&(_e=_e.stores,_e!==null))for(var et=0;et<_e.length;et++){var tt=_e[et],nt=tt.getSnapshot;tt=tt.value;try{if(!He(nt(),tt))return!1}catch{return!1}}}if(_e=j.child,j.subtreeFlags&16384&&_e!==null)_e.return=j,j=_e;else{if(j===$)break;for(;j.sibling===null;){if(j.return===null||j.return===$)return!0;j=j.return}j.sibling.return=j.return,j=j.sibling}}return!0}function Ck($,j){for(j&=~rk,j&=~qk,$.suspendedLanes|=j,$.pingedLanes&=~j,$=$.expirationTimes;0<j;){var _e=31-oc(j),et=1<<_e;$[_e]=-1,j&=~et}}function Ek($){if(K&6)throw Error(p$2(327));Hk();var j=uc($,0);if(!(j&1))return Dk($,B()),null;var _e=Ik($,j);if($.tag!==0&&_e===2){var et=xc($);et!==0&&(j=et,_e=Nk($,et))}if(_e===1)throw _e=pk,Kk($,0),Ck($,j),Dk($,B()),_e;if(_e===6)throw Error(p$2(345));return $.finishedWork=$.current.alternate,$.finishedLanes=j,Pk($,tk,uk),Dk($,B()),null}function Qk($,j){var _e=K;K|=1;try{return $(j)}finally{K=_e,K===0&&(Gj=B()+500,fg&&jg())}}function Rk($){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var j=K;K|=1;var _e=ok.transition,et=C$1;try{if(ok.transition=null,C$1=1,$)return $()}finally{C$1=et,ok.transition=_e,K=j,!(K&6)&&jg()}}function Hj(){fj=ej.current,E$1(ej)}function Kk($,j){$.finishedWork=null,$.finishedLanes=0;var _e=$.timeoutHandle;if(_e!==-1&&($.timeoutHandle=-1,Gf(_e)),Y!==null)for(_e=Y.return;_e!==null;){var et=_e;switch(wg(et),et.tag){case 1:et=et.type.childContextTypes,et!=null&&$f();break;case 3:zh(),E$1(Wf),E$1(H),Eh();break;case 5:Bh(et);break;case 4:zh();break;case 13:E$1(L);break;case 19:E$1(L);break;case 10:ah(et.type._context);break;case 22:case 23:Hj()}_e=_e.return}if(Q=$,Y=$=Pg($.current,null),Z=fj=j,T$1=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(j=0;j<fh.length;j++)if(_e=fh[j],et=_e.interleaved,et!==null){_e.interleaved=null;var tt=et.next,nt=_e.pending;if(nt!==null){var rt=nt.next;nt.next=tt,et.next=rt}_e.pending=et}fh=null}return $}function Mk($,j){do{var _e=Y;try{if($g(),Fh.current=Rh,Ih){for(var et=M$1.memoizedState;et!==null;){var tt=et.queue;tt!==null&&(tt.pending=null),et=et.next}Ih=!1}if(Hh=0,O$1=N=M$1=null,Jh=!1,Kh=0,nk.current=null,_e===null||_e.return===null){T$1=1,pk=j,Y=null;break}e:{var nt=$,rt=_e.return,ot=_e,it=j;if(j=Z,ot.flags|=32768,it!==null&&typeof it=="object"&&typeof it.then=="function"){var at=it,dt=ot,st=dt.tag;if(!(dt.mode&1)&&(st===0||st===11||st===15)){var ut=dt.alternate;ut?(dt.updateQueue=ut.updateQueue,dt.memoizedState=ut.memoizedState,dt.lanes=ut.lanes):(dt.updateQueue=null,dt.memoizedState=null)}var ft=Ui(rt);if(ft!==null){ft.flags&=-257,Vi(ft,rt,ot,nt,j),ft.mode&1&&Si(nt,at,j),j=ft,it=at;var pt=j.updateQueue;if(pt===null){var gt=new Set;gt.add(it),j.updateQueue=gt}else pt.add(it);break e}else{if(!(j&1)){Si(nt,at,j),tj();break e}it=Error(p$2(426))}}else if(I$1&&ot.mode&1){var yt=Ui(rt);if(yt!==null){!(yt.flags&65536)&&(yt.flags|=256),Vi(yt,rt,ot,nt,j),Jg(Ji(it,ot));break e}}nt=it=Ji(it,ot),T$1!==4&&(T$1=2),sk===null?sk=[nt]:sk.push(nt),nt=rt;do{switch(nt.tag){case 3:nt.flags|=65536,j&=-j,nt.lanes|=j;var mt=Ni(nt,it,j);ph(nt,mt);break e;case 1:ot=it;var vt=nt.type,_t=nt.stateNode;if(!(nt.flags&128)&&(typeof vt.getDerivedStateFromError=="function"||_t!==null&&typeof _t.componentDidCatch=="function"&&(Ri===null||!Ri.has(_t)))){nt.flags|=65536,j&=-j,nt.lanes|=j;var St=Qi(nt,ot,j);ph(nt,St);break e}}nt=nt.return}while(nt!==null)}Sk(_e)}catch(At){j=At,Y===_e&&_e!==null&&(Y=_e=_e.return);continue}break}while(!0)}function Jk(){var $=mk.current;return mk.current=Rh,$===null?Rh:$}function tj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik($,j){var _e=K;K|=2;var et=Jk();(Q!==$||Z!==j)&&(uk=null,Kk($,j));do try{Tk();break}catch(tt){Mk($,tt)}while(!0);if($g(),K=_e,mk.current=et,Y!==null)throw Error(p$2(261));return Q=null,Z=0,T$1}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk($){var j=Vk($.alternate,$,fj);$.memoizedProps=$.pendingProps,j===null?Sk($):Y=j,nk.current=null}function Sk($){var j=$;do{var _e=j.alternate;if($=j.return,j.flags&32768){if(_e=Ij(_e,j),_e!==null){_e.flags&=32767,Y=_e;return}if($!==null)$.flags|=32768,$.subtreeFlags=0,$.deletions=null;else{T$1=6,Y=null;return}}else if(_e=Ej(_e,j,fj),_e!==null){Y=_e;return}if(j=j.sibling,j!==null){Y=j;return}Y=j=$}while(j!==null);T$1===0&&(T$1=5)}function Pk($,j,_e){var et=C$1,tt=ok.transition;try{ok.transition=null,C$1=1,Wk($,j,_e,et)}finally{ok.transition=tt,C$1=et}return null}function Wk($,j,_e,et){do Hk();while(wk!==null);if(K&6)throw Error(p$2(327));_e=$.finishedWork;var tt=$.finishedLanes;if(_e===null)return null;if($.finishedWork=null,$.finishedLanes=0,_e===$.current)throw Error(p$2(177));$.callbackNode=null,$.callbackPriority=0;var nt=_e.lanes|_e.childLanes;if(Bc($,nt),$===Q&&(Y=Q=null,Z=0),!(_e.subtreeFlags&2064)&&!(_e.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),nt=(_e.flags&15990)!==0,_e.subtreeFlags&15990||nt){nt=ok.transition,ok.transition=null;var rt=C$1;C$1=1;var ot=K;K|=4,nk.current=null,Oj($,_e),dk(_e,$),Oe(Df),dd=!!Cf,Df=Cf=null,$.current=_e,hk(_e),dc(),K=ot,C$1=rt,ok.transition=nt}else $.current=_e;if(vk&&(vk=!1,wk=$,xk=tt),nt=$.pendingLanes,nt===0&&(Ri=null),mc(_e.stateNode),Dk($,B()),j!==null)for(et=$.onRecoverableError,_e=0;_e<j.length;_e++)tt=j[_e],et(tt.value,{componentStack:tt.stack,digest:tt.digest});if(Oi)throw Oi=!1,$=Pi,Pi=null,$;return xk&1&&$.tag!==0&&Hk(),nt=$.pendingLanes,nt&1?$===zk?yk++:(yk=0,zk=$):yk=0,jg(),null}function Hk(){if(wk!==null){var $=Dc(xk),j=ok.transition,_e=C$1;try{if(ok.transition=null,C$1=16>$?16:$,wk===null)var et=!1;else{if($=wk,wk=null,xk=0,K&6)throw Error(p$2(331));var tt=K;for(K|=4,V=$.current;V!==null;){var nt=V,rt=nt.child;if(V.flags&16){var ot=nt.deletions;if(ot!==null){for(var it=0;it<ot.length;it++){var at=ot[it];for(V=at;V!==null;){var dt=V;switch(dt.tag){case 0:case 11:case 15:Pj(8,dt,nt)}var st=dt.child;if(st!==null)st.return=dt,V=st;else for(;V!==null;){dt=V;var ut=dt.sibling,ft=dt.return;if(Sj(dt),dt===at){V=null;break}if(ut!==null){ut.return=ft,V=ut;break}V=ft}}}var pt=nt.alternate;if(pt!==null){var gt=pt.child;if(gt!==null){pt.child=null;do{var yt=gt.sibling;gt.sibling=null,gt=yt}while(gt!==null)}}V=nt}}if(nt.subtreeFlags&2064&&rt!==null)rt.return=nt,V=rt;else e:for(;V!==null;){if(nt=V,nt.flags&2048)switch(nt.tag){case 0:case 11:case 15:Pj(9,nt,nt.return)}var mt=nt.sibling;if(mt!==null){mt.return=nt.return,V=mt;break e}V=nt.return}}var vt=$.current;for(V=vt;V!==null;){rt=V;var _t=rt.child;if(rt.subtreeFlags&2064&&_t!==null)_t.return=rt,V=_t;else e:for(rt=vt;V!==null;){if(ot=V,ot.flags&2048)try{switch(ot.tag){case 0:case 11:case 15:Qj(9,ot)}}catch(At){W(ot,ot.return,At)}if(ot===rt){V=null;break e}var St=ot.sibling;if(St!==null){St.return=ot.return,V=St;break e}V=ot.return}}if(K=tt,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,$)}catch{}et=!0}return et}finally{C$1=_e,ok.transition=j}}return!1}function Xk($,j,_e){j=Ji(_e,j),j=Ni($,j,1),$=nh($,j,1),j=R(),$!==null&&(Ac($,1,j),Dk($,j))}function W($,j,_e){if($.tag===3)Xk($,$,_e);else for(;j!==null;){if(j.tag===3){Xk(j,$,_e);break}else if(j.tag===1){var et=j.stateNode;if(typeof j.type.getDerivedStateFromError=="function"||typeof et.componentDidCatch=="function"&&(Ri===null||!Ri.has(et))){$=Ji(_e,$),$=Qi(j,$,1),j=nh(j,$,1),$=R(),j!==null&&(Ac(j,1,$),Dk(j,$));break}}j=j.return}}function Ti($,j,_e){var et=$.pingCache;et!==null&&et.delete(j),j=R(),$.pingedLanes|=$.suspendedLanes&_e,Q===$&&(Z&_e)===_e&&(T$1===4||T$1===3&&(Z&130023424)===Z&&500>B()-fk?Kk($,0):rk|=_e),Dk($,j)}function Yk($,j){j===0&&($.mode&1?(j=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):j=1);var _e=R();$=ih($,j),$!==null&&(Ac($,j,_e),Dk($,_e))}function uj($){var j=$.memoizedState,_e=0;j!==null&&(_e=j.retryLane),Yk($,_e)}function bk($,j){var _e=0;switch($.tag){case 13:var et=$.stateNode,tt=$.memoizedState;tt!==null&&(_e=tt.retryLane);break;case 19:et=$.stateNode;break;default:throw Error(p$2(314))}et!==null&&et.delete(j),Yk($,_e)}var Vk;Vk=function($,j,_e){if($!==null)if($.memoizedProps!==j.pendingProps||Wf.current)dh=!0;else{if(!($.lanes&_e)&&!(j.flags&128))return dh=!1,yj($,j,_e);dh=!!($.flags&131072)}else dh=!1,I$1&&j.flags&1048576&&ug(j,ng,j.index);switch(j.lanes=0,j.tag){case 2:var et=j.type;ij($,j),$=j.pendingProps;var tt=Yf(j,H.current);ch(j,_e),tt=Nh(null,j,et,$,tt,_e);var nt=Sh();return j.flags|=1,typeof tt=="object"&&tt!==null&&typeof tt.render=="function"&&tt.$$typeof===void 0?(j.tag=1,j.memoizedState=null,j.updateQueue=null,Zf(et)?(nt=!0,cg(j)):nt=!1,j.memoizedState=tt.state!==null&&tt.state!==void 0?tt.state:null,kh(j),tt.updater=Ei,j.stateNode=tt,tt._reactInternals=j,Ii(j,et,$,_e),j=jj(null,j,et,!0,nt,_e)):(j.tag=0,I$1&&nt&&vg(j),Xi(null,j,tt,_e),j=j.child),j;case 16:et=j.elementType;e:{switch(ij($,j),$=j.pendingProps,tt=et._init,et=tt(et._payload),j.type=et,tt=j.tag=Zk(et),$=Ci(et,$),tt){case 0:j=cj(null,j,et,$,_e);break e;case 1:j=hj(null,j,et,$,_e);break e;case 11:j=Yi(null,j,et,$,_e);break e;case 14:j=$i(null,j,et,Ci(et.type,$),_e);break e}throw Error(p$2(306,et,""))}return j;case 0:return et=j.type,tt=j.pendingProps,tt=j.elementType===et?tt:Ci(et,tt),cj($,j,et,tt,_e);case 1:return et=j.type,tt=j.pendingProps,tt=j.elementType===et?tt:Ci(et,tt),hj($,j,et,tt,_e);case 3:e:{if(kj(j),$===null)throw Error(p$2(387));et=j.pendingProps,nt=j.memoizedState,tt=nt.element,lh($,j),qh(j,et,null,_e);var rt=j.memoizedState;if(et=rt.element,nt.isDehydrated)if(nt={element:et,isDehydrated:!1,cache:rt.cache,pendingSuspenseBoundaries:rt.pendingSuspenseBoundaries,transitions:rt.transitions},j.updateQueue.baseState=nt,j.memoizedState=nt,j.flags&256){tt=Ji(Error(p$2(423)),j),j=lj($,j,et,_e,tt);break e}else if(et!==tt){tt=Ji(Error(p$2(424)),j),j=lj($,j,et,_e,tt);break e}else for(yg=Lf(j.stateNode.containerInfo.firstChild),xg=j,I$1=!0,zg=null,_e=Vg(j,null,et,_e),j.child=_e;_e;)_e.flags=_e.flags&-3|4096,_e=_e.sibling;else{if(Ig(),et===tt){j=Zi($,j,_e);break e}Xi($,j,et,_e)}j=j.child}return j;case 5:return Ah(j),$===null&&Eg(j),et=j.type,tt=j.pendingProps,nt=$!==null?$.memoizedProps:null,rt=tt.children,Ef(et,tt)?rt=null:nt!==null&&Ef(et,nt)&&(j.flags|=32),gj($,j),Xi($,j,rt,_e),j.child;case 6:return $===null&&Eg(j),null;case 13:return oj($,j,_e);case 4:return yh(j,j.stateNode.containerInfo),et=j.pendingProps,$===null?j.child=Ug(j,null,et,_e):Xi($,j,et,_e),j.child;case 11:return et=j.type,tt=j.pendingProps,tt=j.elementType===et?tt:Ci(et,tt),Yi($,j,et,tt,_e);case 7:return Xi($,j,j.pendingProps,_e),j.child;case 8:return Xi($,j,j.pendingProps.children,_e),j.child;case 12:return Xi($,j,j.pendingProps.children,_e),j.child;case 10:e:{if(et=j.type._context,tt=j.pendingProps,nt=j.memoizedProps,rt=tt.value,G(Wg,et._currentValue),et._currentValue=rt,nt!==null)if(He(nt.value,rt)){if(nt.children===tt.children&&!Wf.current){j=Zi($,j,_e);break e}}else for(nt=j.child,nt!==null&&(nt.return=j);nt!==null;){var ot=nt.dependencies;if(ot!==null){rt=nt.child;for(var it=ot.firstContext;it!==null;){if(it.context===et){if(nt.tag===1){it=mh(-1,_e&-_e),it.tag=2;var at=nt.updateQueue;if(at!==null){at=at.shared;var dt=at.pending;dt===null?it.next=it:(it.next=dt.next,dt.next=it),at.pending=it}}nt.lanes|=_e,it=nt.alternate,it!==null&&(it.lanes|=_e),bh(nt.return,_e,j),ot.lanes|=_e;break}it=it.next}}else if(nt.tag===10)rt=nt.type===j.type?null:nt.child;else if(nt.tag===18){if(rt=nt.return,rt===null)throw Error(p$2(341));rt.lanes|=_e,ot=rt.alternate,ot!==null&&(ot.lanes|=_e),bh(rt,_e,j),rt=nt.sibling}else rt=nt.child;if(rt!==null)rt.return=nt;else for(rt=nt;rt!==null;){if(rt===j){rt=null;break}if(nt=rt.sibling,nt!==null){nt.return=rt.return,rt=nt;break}rt=rt.return}nt=rt}Xi($,j,tt.children,_e),j=j.child}return j;case 9:return tt=j.type,et=j.pendingProps.children,ch(j,_e),tt=eh(tt),et=et(tt),j.flags|=1,Xi($,j,et,_e),j.child;case 14:return et=j.type,tt=Ci(et,j.pendingProps),tt=Ci(et.type,tt),$i($,j,et,tt,_e);case 15:return bj($,j,j.type,j.pendingProps,_e);case 17:return et=j.type,tt=j.pendingProps,tt=j.elementType===et?tt:Ci(et,tt),ij($,j),j.tag=1,Zf(et)?($=!0,cg(j)):$=!1,ch(j,_e),Gi(j,et,tt),Ii(j,et,tt,_e),jj(null,j,et,!0,$,_e);case 19:return xj($,j,_e);case 22:return dj($,j,_e)}throw Error(p$2(156,j.tag))};function Fk($,j){return ac($,j)}function $k($,j,_e,et){this.tag=$,this.key=_e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=j,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=et,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg($,j,_e,et){return new $k($,j,_e,et)}function aj($){return $=$.prototype,!(!$||!$.isReactComponent)}function Zk($){if(typeof $=="function")return aj($)?1:0;if($!=null){if($=$.$$typeof,$===Da)return 11;if($===Ga)return 14}return 2}function Pg($,j){var _e=$.alternate;return _e===null?(_e=Bg($.tag,j,$.key,$.mode),_e.elementType=$.elementType,_e.type=$.type,_e.stateNode=$.stateNode,_e.alternate=$,$.alternate=_e):(_e.pendingProps=j,_e.type=$.type,_e.flags=0,_e.subtreeFlags=0,_e.deletions=null),_e.flags=$.flags&14680064,_e.childLanes=$.childLanes,_e.lanes=$.lanes,_e.child=$.child,_e.memoizedProps=$.memoizedProps,_e.memoizedState=$.memoizedState,_e.updateQueue=$.updateQueue,j=$.dependencies,_e.dependencies=j===null?null:{lanes:j.lanes,firstContext:j.firstContext},_e.sibling=$.sibling,_e.index=$.index,_e.ref=$.ref,_e}function Rg($,j,_e,et,tt,nt){var rt=2;if(et=$,typeof $=="function")aj($)&&(rt=1);else if(typeof $=="string")rt=5;else e:switch($){case ya:return Tg(_e.children,tt,nt,j);case za:rt=8,tt|=8;break;case Aa:return $=Bg(12,_e,j,tt|2),$.elementType=Aa,$.lanes=nt,$;case Ea:return $=Bg(13,_e,j,tt),$.elementType=Ea,$.lanes=nt,$;case Fa:return $=Bg(19,_e,j,tt),$.elementType=Fa,$.lanes=nt,$;case Ia:return pj(_e,tt,nt,j);default:if(typeof $=="object"&&$!==null)switch($.$$typeof){case Ba:rt=10;break e;case Ca:rt=9;break e;case Da:rt=11;break e;case Ga:rt=14;break e;case Ha:rt=16,et=null;break e}throw Error(p$2(130,$==null?$:typeof $,""))}return j=Bg(rt,_e,j,tt),j.elementType=$,j.type=et,j.lanes=nt,j}function Tg($,j,_e,et){return $=Bg(7,$,et,j),$.lanes=_e,$}function pj($,j,_e,et){return $=Bg(22,$,et,j),$.elementType=Ia,$.lanes=_e,$.stateNode={isHidden:!1},$}function Qg($,j,_e){return $=Bg(6,$,null,j),$.lanes=_e,$}function Sg($,j,_e){return j=Bg(4,$.children!==null?$.children:[],$.key,j),j.lanes=_e,j.stateNode={containerInfo:$.containerInfo,pendingChildren:null,implementation:$.implementation},j}function al($,j,_e,et,tt){this.tag=j,this.containerInfo=$,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=et,this.onRecoverableError=tt,this.mutableSourceEagerHydrationData=null}function bl($,j,_e,et,tt,nt,rt,ot,it){return $=new al($,j,_e,ot,it),j===1?(j=1,nt===!0&&(j|=8)):j=0,nt=Bg(3,null,null,j),$.current=nt,nt.stateNode=$,nt.memoizedState={element:et,isDehydrated:_e,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(nt),$}function cl($,j,_e){var et=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:et==null?null:""+et,children:$,containerInfo:j,implementation:_e}}function dl($){if(!$)return Vf;$=$._reactInternals;e:{if(Vb($)!==$||$.tag!==1)throw Error(p$2(170));var j=$;do{switch(j.tag){case 3:j=j.stateNode.context;break e;case 1:if(Zf(j.type)){j=j.stateNode.__reactInternalMemoizedMergedChildContext;break e}}j=j.return}while(j!==null);throw Error(p$2(171))}if($.tag===1){var _e=$.type;if(Zf(_e))return bg($,_e,j)}return j}function el($,j,_e,et,tt,nt,rt,ot,it){return $=bl(_e,et,!0,$,tt,nt,rt,ot,it),$.context=dl(null),_e=$.current,et=R(),tt=yi(_e),nt=mh(et,tt),nt.callback=j??null,nh(_e,nt,tt),$.current.lanes=tt,Ac($,tt,et),Dk($,et),$}function fl($,j,_e,et){var tt=j.current,nt=R(),rt=yi(tt);return _e=dl(_e),j.context===null?j.context=_e:j.pendingContext=_e,j=mh(nt,rt),j.payload={element:$},et=et===void 0?null:et,et!==null&&(j.callback=et),$=nh(tt,j,rt),$!==null&&(gi($,tt,rt,nt),oh($,tt,rt)),rt}function gl($){if($=$.current,!$.child)return null;switch($.child.tag){case 5:return $.child.stateNode;default:return $.child.stateNode}}function hl($,j){if($=$.memoizedState,$!==null&&$.dehydrated!==null){var _e=$.retryLane;$.retryLane=_e!==0&&_e<j?_e:j}}function il($,j){hl($,j),($=$.alternate)&&hl($,j)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function($){console.error($)};function ll($){this._internalRoot=$}ml.prototype.render=ll.prototype.render=function($){var j=this._internalRoot;if(j===null)throw Error(p$2(409));fl($,j,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var $=this._internalRoot;if($!==null){this._internalRoot=null;var j=$.containerInfo;Rk(function(){fl(null,$,null,null)}),j[uf]=null}};function ml($){this._internalRoot=$}ml.prototype.unstable_scheduleHydration=function($){if($){var j=Hc();$={blockedOn:null,target:$,priority:j};for(var _e=0;_e<Qc.length&&j!==0&&j<Qc[_e].priority;_e++);Qc.splice(_e,0,$),_e===0&&Vc($)}};function nl($){return!(!$||$.nodeType!==1&&$.nodeType!==9&&$.nodeType!==11)}function ol($){return!(!$||$.nodeType!==1&&$.nodeType!==9&&$.nodeType!==11&&($.nodeType!==8||$.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql($,j,_e,et,tt){if(tt){if(typeof et=="function"){var nt=et;et=function(){var at=gl(rt);nt.call(at)}}var rt=el(j,et,$,0,null,!1,!1,"",pl);return $._reactRootContainer=rt,$[uf]=rt.current,sf($.nodeType===8?$.parentNode:$),Rk(),rt}for(;tt=$.lastChild;)$.removeChild(tt);if(typeof et=="function"){var ot=et;et=function(){var at=gl(it);ot.call(at)}}var it=bl($,0,!1,null,null,!1,!1,"",pl);return $._reactRootContainer=it,$[uf]=it.current,sf($.nodeType===8?$.parentNode:$),Rk(function(){fl(j,it,_e,et)}),it}function rl($,j,_e,et,tt){var nt=_e._reactRootContainer;if(nt){var rt=nt;if(typeof tt=="function"){var ot=tt;tt=function(){var it=gl(rt);ot.call(it)}}fl(j,rt,$,tt)}else rt=ql(_e,j,$,tt,et);return gl(rt)}Ec=function($){switch($.tag){case 3:var j=$.stateNode;if(j.current.memoizedState.isDehydrated){var _e=tc(j.pendingLanes);_e!==0&&(Cc(j,_e|1),Dk(j,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var et=ih($,1);if(et!==null){var tt=R();gi(et,$,1,tt)}}),il($,1)}};Fc=function($){if($.tag===13){var j=ih($,134217728);if(j!==null){var _e=R();gi(j,$,134217728,_e)}il($,134217728)}};Gc=function($){if($.tag===13){var j=yi($),_e=ih($,j);if(_e!==null){var et=R();gi(_e,$,j,et)}il($,j)}};Hc=function(){return C$1};Ic=function($,j){var _e=C$1;try{return C$1=$,j()}finally{C$1=_e}};yb=function($,j,_e){switch(j){case"input":if(bb($,_e),j=_e.name,_e.type==="radio"&&j!=null){for(_e=$;_e.parentNode;)_e=_e.parentNode;for(_e=_e.querySelectorAll("input[name="+JSON.stringify(""+j)+'][type="radio"]'),j=0;j<_e.length;j++){var et=_e[j];if(et!==$&&et.form===$.form){var tt=Db(et);if(!tt)throw Error(p$2(90));Wa(et),bb(et,tt)}}}break;case"textarea":ib($,_e);break;case"select":j=_e.value,j!=null&&fb($,!!_e.multiple,j,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function($){return $=Zb($),$===null?null:$.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function($,j){var _e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(j))throw Error(p$2(200));return cl($,j,null,_e)};reactDom_production_min.createRoot=function($,j){if(!nl($))throw Error(p$2(299));var _e=!1,et="",tt=kl;return j!=null&&(j.unstable_strictMode===!0&&(_e=!0),j.identifierPrefix!==void 0&&(et=j.identifierPrefix),j.onRecoverableError!==void 0&&(tt=j.onRecoverableError)),j=bl($,1,!1,null,null,_e,!1,et,tt),$[uf]=j.current,sf($.nodeType===8?$.parentNode:$),new ll(j)};reactDom_production_min.findDOMNode=function($){if($==null)return null;if($.nodeType===1)return $;var j=$._reactInternals;if(j===void 0)throw typeof $.render=="function"?Error(p$2(188)):($=Object.keys($).join(","),Error(p$2(268,$)));return $=Zb(j),$=$===null?null:$.stateNode,$};reactDom_production_min.flushSync=function($){return Rk($)};reactDom_production_min.hydrate=function($,j,_e){if(!ol(j))throw Error(p$2(200));return rl(null,$,j,!0,_e)};reactDom_production_min.hydrateRoot=function($,j,_e){if(!nl($))throw Error(p$2(405));var et=_e!=null&&_e.hydratedSources||null,tt=!1,nt="",rt=kl;if(_e!=null&&(_e.unstable_strictMode===!0&&(tt=!0),_e.identifierPrefix!==void 0&&(nt=_e.identifierPrefix),_e.onRecoverableError!==void 0&&(rt=_e.onRecoverableError)),j=el(j,null,$,1,_e??null,tt,!1,nt,rt),$[uf]=j.current,sf($),et)for($=0;$<et.length;$++)_e=et[$],tt=_e._getVersion,tt=tt(_e._source),j.mutableSourceEagerHydrationData==null?j.mutableSourceEagerHydrationData=[_e,tt]:j.mutableSourceEagerHydrationData.push(_e,tt);return new ml(j)};reactDom_production_min.render=function($,j,_e){if(!ol(j))throw Error(p$2(200));return rl(null,$,j,!1,_e)};reactDom_production_min.unmountComponentAtNode=function($){if(!ol($))throw Error(p$2(40));return $._reactRootContainer?(Rk(function(){rl(null,null,$,!1,function(){$._reactRootContainer=null,$[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function($,j,_e,et){if(!ol(_e))throw Error(p$2(200));if($==null||$._reactInternals===void 0)throw Error(p$2(38));return rl($,j,_e,!1,et)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch($){console.error($)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);var m$2=reactDomExports;client.createRoot=m$2.createRoot,client.hydrateRoot=m$2.hydrateRoot;try{self["workbox:window:7.0.0"]&&_()}catch{}function n$4($,j){return new Promise(function(_e){var et=new MessageChannel;et.port1.onmessage=function(tt){_e(tt.data)},$.postMessage(j,[et.port2])})}function t$4($){var j=function(_e,et){if(typeof _e!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var nt=tt.call(_e,et);if(typeof nt!="object")return nt;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(_e)}($,"string");return typeof j=="symbol"?j:j+""}function r$4($,j){for(var _e=0;_e<j.length;_e++){var et=j[_e];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty($,t$4(et.key),et)}}function e$3($,j){return e$3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_e,et){return _e.__proto__=et,_e},e$3($,j)}function i$1($,j){(j==null||j>$.length)&&(j=$.length);for(var _e=0,et=new Array(j);_e<j;_e++)et[_e]=$[_e];return et}function o$2($,j){var _e=typeof Symbol<"u"&&$[Symbol.iterator]||$["@@iterator"];if(_e)return(_e=_e.call($)).next.bind(_e);if(Array.isArray($)||(_e=function(tt,nt){if(tt){if(typeof tt=="string")return i$1(tt,nt);var rt=Object.prototype.toString.call(tt).slice(8,-1);return rt==="Object"&&tt.constructor&&(rt=tt.constructor.name),rt==="Map"||rt==="Set"?Array.from(tt):rt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rt)?i$1(tt,nt):void 0}}($))||j){_e&&($=_e);var et=0;return function(){return et>=$.length?{done:!0}:{done:!1,value:$[et++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}try{self["workbox:core:7.0.0"]&&_()}catch{}var u$2=function(){var $=this;this.promise=new Promise(function(j,_e){$.resolve=j,$.reject=_e})};function a$1($,j){var _e=location.href;return new URL($,_e).href===new URL(j,_e).href}var c$1=function($,j){this.type=$,Object.assign(this,j)};function f$2($,j,_e){return _e?j?j($):$:($&&$.then||($=Promise.resolve($)),j?$.then(j):$)}function s$2(){}var v={type:"SKIP_WAITING"};function h$2($,j){return $&&$.then?$.then(s$2):Promise.resolve()}var l$2=function($){function j(ot,it){var at,dt;return it===void 0&&(it={}),(at=$.call(this)||this).nn={},at.tn=0,at.rn=new u$2,at.en=new u$2,at.on=new u$2,at.un=0,at.an=new Set,at.cn=function(){var st=at.fn,ut=st.installing;at.tn>0||!a$1(ut.scriptURL,at.sn.toString())||performance.now()>at.un+6e4?(at.vn=ut,st.removeEventListener("updatefound",at.cn)):(at.hn=ut,at.an.add(ut),at.rn.resolve(ut)),++at.tn,ut.addEventListener("statechange",at.ln)},at.ln=function(st){var ut=at.fn,ft=st.target,pt=ft.state,gt=ft===at.vn,yt={sw:ft,isExternal:gt,originalEvent:st};!gt&&at.mn&&(yt.isUpdate=!0),at.dispatchEvent(new c$1(pt,yt)),pt==="installed"?at.wn=self.setTimeout(function(){pt==="installed"&&ut.waiting===ft&&at.dispatchEvent(new c$1("waiting",yt))},200):pt==="activating"&&(clearTimeout(at.wn),gt||at.en.resolve(ft))},at.yn=function(st){var ut=at.hn,ft=ut!==navigator.serviceWorker.controller;at.dispatchEvent(new c$1("controlling",{isExternal:ft,originalEvent:st,sw:ut,isUpdate:at.mn})),ft||at.on.resolve(ut)},at.gn=(dt=function(st){var ut=st.data,ft=st.ports,pt=st.source;return f$2(at.getSW(),function(){at.an.has(pt)&&at.dispatchEvent(new c$1("message",{data:ut,originalEvent:st,ports:ft,sw:pt}))})},function(){for(var st=[],ut=0;ut<arguments.length;ut++)st[ut]=arguments[ut];try{return Promise.resolve(dt.apply(this,st))}catch(ft){return Promise.reject(ft)}}),at.sn=ot,at.nn=it,navigator.serviceWorker.addEventListener("message",at.gn),at}var _e,et;et=$,(_e=j).prototype=Object.create(et.prototype),_e.prototype.constructor=_e,e$3(_e,et);var tt,nt,rt=j.prototype;return rt.register=function(ot){var it=(ot===void 0?{}:ot).immediate,at=it!==void 0&&it;try{var dt=this;return f$2(function(st,ut){var ft=st();return ft&&ft.then?ft.then(ut):ut(ft)}(function(){if(!at&&document.readyState!=="complete")return h$2(new Promise(function(st){return window.addEventListener("load",st)}))},function(){return dt.mn=!!navigator.serviceWorker.controller,dt.dn=dt.pn(),f$2(dt.bn(),function(st){dt.fn=st,dt.dn&&(dt.hn=dt.dn,dt.en.resolve(dt.dn),dt.on.resolve(dt.dn),dt.dn.addEventListener("statechange",dt.ln,{once:!0}));var ut=dt.fn.waiting;return ut&&a$1(ut.scriptURL,dt.sn.toString())&&(dt.hn=ut,Promise.resolve().then(function(){dt.dispatchEvent(new c$1("waiting",{sw:ut,wasWaitingBeforeRegister:!0}))}).then(function(){})),dt.hn&&(dt.rn.resolve(dt.hn),dt.an.add(dt.hn)),dt.fn.addEventListener("updatefound",dt.cn),navigator.serviceWorker.addEventListener("controllerchange",dt.yn),dt.fn})}))}catch(st){return Promise.reject(st)}},rt.update=function(){try{return this.fn?f$2(h$2(this.fn.update())):f$2()}catch(ot){return Promise.reject(ot)}},rt.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},rt.messageSW=function(ot){try{return f$2(this.getSW(),function(it){return n$4(it,ot)})}catch(it){return Promise.reject(it)}},rt.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&n$4(this.fn.waiting,v)},rt.pn=function(){var ot=navigator.serviceWorker.controller;return ot&&a$1(ot.scriptURL,this.sn.toString())?ot:void 0},rt.bn=function(){try{var ot=this;return f$2(function(it,at){try{var dt=it()}catch(st){return at(st)}return dt&&dt.then?dt.then(void 0,at):dt}(function(){return f$2(navigator.serviceWorker.register(ot.sn,ot.nn),function(it){return ot.un=performance.now(),it})},function(it){throw it}))}catch(it){return Promise.reject(it)}},tt=j,(nt=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&r$4(tt.prototype,nt),Object.defineProperty(tt,"prototype",{writable:!1}),tt}(function(){function $(){this.Pn=new Map}var j=$.prototype;return j.addEventListener=function(_e,et){this.jn(_e).add(et)},j.removeEventListener=function(_e,et){this.jn(_e).delete(et)},j.dispatchEvent=function(_e){_e.target=this;for(var et,tt=o$2(this.jn(_e.type));!(et=tt()).done;)(0,et.value)(_e)},j.jn=function(_e){return this.Pn.has(_e)||this.Pn.set(_e,new Set),this.Pn.get(_e)},$}()),ProvidedComponents=($=>($.OpenGameButton="OpenGameButton",$))(ProvidedComponents||{});const GAME_DESCRIPTOR_NAME="game.cfg",locales$1=[{label:"English",value:"en-US"},{label:"Русский",value:"ru-RU"},{label:"Українська",value:"uk-UA"},{label:"简体中文",value:"zh"}],createEvent$1=()=>{const $=new Set;return{add:et=>{$.add(et)},fire:()=>{$.forEach(et=>et()),$.clear()}}},INTERNAL=Symbol(),shallowCopy=$=>Array.isArray($)?$.slice():Object.create(Object.getPrototypeOf($),Object.getOwnPropertyDescriptors($));function getIn($,j,_e=!1,et=0){if(et===j.length)return $;const tt=j[et];return _e&&!$[tt]&&($[tt]={}),getIn($[tt],j,_e,et+1)}function setIn($,j,_e,et=0){if(et===j.length)return _e;const tt=j[et],nt=$[tt],rt=setIn(nt,j,_e,et+1);if(rt===nt)return $;const ot=shallowCopy($);return ot[tt]=rt,ot}const handler$1={get:($,j)=>j===INTERNAL?$:new Proxy([...$,j],handler$1)},pathProxy=new Proxy([],handler$1),createFocus=($,j)=>_e=>{const et=typeof _e=="function"?_e(pathProxy)[INTERNAL]:[_e];$.cache||($.cache={});const tt=j.concat(et),{get:nt}=$,rt=getIn($.cache,tt,!0);return rt[INTERNAL]||(rt[INTERNAL]=createAtom(Object.assign(Object.assign({},$),{path:tt,get:()=>{const ot=nt();return ot?getIn(ot,tt):void 0},set:ot=>$.atom.set(setIn(nt(),tt,ot))})))},createStream=$=>(j,_e)=>{let et;const tt=createInternal();let nt=!0;const rt=()=>{tt.listeners.size?ot():nt=!0},ot=()=>{const it=$.get(),at=j(it,et);nt=!1,_e&&!at||(tt.set(at),et=at)};return createAtom(Object.assign(Object.assign({},tt),{get:()=>(!$.isStream&&nt&&ot(),tt.get()),isStream:_e||$.isStream,subscribe:it=>{const at=$.subscribe(rt),dt=tt.subscribe(it);return()=>{dt(),tt.listeners.size||at()}}}))},tools={symbol:INTERNAL,send:()=>{},wrap:$=>$},subscribeInternal=($,j,_e)=>et=>{const tt=createEvent$1();let nt=j();const rt=it=>{const at=et(it,nt);typeof at=="function"&&tt.add(at)};_e&&rt(nt);const ot=$(()=>{const it=j();it!==nt&&(tt.fire(),rt(it),nt=it)});return()=>{tt.fire(),ot()}},createInternal=$=>{const j=new Set,_e={listeners:j,get:()=>$,set:et=>{$!==et&&($=et,tools.send(_e),j.forEach(tt=>tt()))},subscribe:et=>(j.add(et),()=>void j.delete(et))};return _e};function createAtom($,j){const{get:_e,subscribe:et,atom:tt}=$,nt={get value(){return tools.get&&tools.get(nt),_e()},set value(ot){nt.set(ot)},get actions(){return tools.wrap(rt,nt)},set:ot=>$.set(ot),update:ot=>nt.set(ot(_e())),subscribe:subscribeInternal(et,_e),watch:subscribeInternal(et,_e,!0),focus:createFocus(tt?tt[INTERNAL]:$,$.path||[]),map:createStream($),[INTERNAL]:$};$.atom=nt,create.plugins.forEach(ot=>ot(nt));const rt=j&&j(nt);return nt}const createGetState=($,j)=>(_e,et)=>et?(j(et($)),_e()):(j(_e.subscribe($)),_e[INTERNAL].get()),createSelector=$=>{const j=createInternal(),{get:_e,set:et,listeners:tt}=j,nt=createEvent$1();let rt=!0;const ot=createGetState(()=>{tt.size?it():rt=!0},nt.add),it=()=>{nt.fire(),rt=!1;const at=tools.get;tools.get=j.track?ot:null,et($(ot)),tools.get=at};return j.get=()=>(rt&&it(),_e()),j};function atom($,j){const _e=(typeof $=="function"?createSelector:createInternal)($);return _e.isStream=!arguments.length,createAtom(_e,j)}atom.plugins=[];atom.internal=tools;const create=atom;var useConstant$3={};Object.defineProperty(useConstant$3,"__esModule",{value:!0});var react$1=reactExports;const useConstant$2=$=>{const j=react$1.useRef();return j.current||(j.current={c:$()}),j.current.c};var useConstant_2=useConstant$3.useConstant=useConstant$2,useAdapter$1={};const createEvent=()=>{const $=new Set;return{add:et=>{$.add(et)},fire:()=>{$.forEach(et=>et()),$.clear()}}},error=$=>{throw new Error(`[xoid] \`${$}\` cannot be used outside the setup context. To create a setup context, use the \`useSetup\` hook from a framework integration package.`)};let adapter={effect:()=>error("effect"),inject:()=>error("inject")};const inject$1=$=>adapter.inject($),effect=$=>adapter.effect($);function setup$1($){const j=adapter;adapter=this;const _e=$();return adapter=j,_e}const createAdapter=$=>{const j=createEvent(),_e=createEvent();return{inject:$.inject,mount:j.fire,unmount:_e.fire,effect:et=>j.add(()=>{const tt=et();typeof tt=="function"&&_e.add(tt)})}},setup_esm=Object.freeze(Object.defineProperty({__proto__:null,createAdapter,effect,inject:inject$1,setup:setup$1},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(setup_esm);Object.defineProperty(useAdapter$1,"__esModule",{value:!0});var React=reactExports,setup=require$$1,useConstant$1=useConstant$3;function _interopDefaultLegacy($){return $&&typeof $=="object"&&"default"in $?$:{default:$}}var React__default=_interopDefaultLegacy(React);const contextMap=new Map,createProvider=($,j)=>{const _e=React.createContext(j);return contextMap.set($,_e),_e.Provider},reactInternals=React__default.default.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,inject=$=>{if(typeof $!="symbol")throw new TypeError("An injection key should be a symbol.");return reactInternals.ReactCurrentDispatcher.current.readContext(contextMap.get($))},useAdapter=$=>{const j=useConstant$1.useConstant(()=>setup.createAdapter({inject}));return React.useEffect(()=>(j.mount(),()=>j.unmount()),[]),useConstant$1.useConstant(()=>setup.setup.call(j,$))};useAdapter$1.createProvider=createProvider;var useAdapter_2=useAdapter$1.useAdapter=useAdapter,useAtom$1={},shim$1={exports:{}},useSyncExternalStoreShim_production_min={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e$2=reactExports;function h$1($,j){return $===j&&($!==0||1/$===1/j)||$!==$&&j!==j}var k=typeof Object.is=="function"?Object.is:h$1,l$1=e$2.useState,m$1=e$2.useEffect,n$3=e$2.useLayoutEffect,p$1=e$2.useDebugValue;function q($,j){var _e=j(),et=l$1({inst:{value:_e,getSnapshot:j}}),tt=et[0].inst,nt=et[1];return n$3(function(){tt.value=_e,tt.getSnapshot=j,r$3(tt)&&nt({inst:tt})},[$,_e,j]),m$1(function(){return r$3(tt)&&nt({inst:tt}),$(function(){r$3(tt)&&nt({inst:tt})})},[$]),p$1(_e),_e}function r$3($){var j=$.getSnapshot;$=$.value;try{var _e=j();return!k($,_e)}catch{return!0}}function t$3($,j){return j()}var u$1=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t$3:q;useSyncExternalStoreShim_production_min.useSyncExternalStore=e$2.useSyncExternalStore!==void 0?e$2.useSyncExternalStore:u$1;shim$1.exports=useSyncExternalStoreShim_production_min;var shimExports=shim$1.exports;Object.defineProperty(useAtom$1,"__esModule",{value:!0});var shim=shimExports,react=reactExports,useConstant=useConstant$3;function useAtom($,j){const _e=useConstant.useConstant(()=>typeof $=="function"&&$())||$,et=shim.useSyncExternalStore(_e.subscribe,()=>_e.value,()=>_e.value);return react.useDebugValue(et),j?[et,_e.actions]:et}var useAtom_2=useAtom$1.useAtom=useAtom;const useIsoLayoutEffect=typeof window>"u"?reactExports.useEffect:reactExports.useLayoutEffect;function useSetup($,j){let _e;if(arguments.length>1){const et=useConstant_2(()=>atom(()=>j));useIsoLayoutEffect(()=>et.set(j),[j]),_e=useAdapter_2(()=>$(et))}else _e=useAdapter_2($);return reactExports.useDebugValue(_e),_e}const QspiderRoot=({children:$})=>$;var colorString$1={exports:{}},colorName={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},simpleSwizzle={exports:{}},isArrayish$1=function(j){return!j||typeof j=="string"?!1:j instanceof Array||Array.isArray(j)||j.length>=0&&(j.splice instanceof Function||Object.getOwnPropertyDescriptor(j,j.length-1)&&j.constructor.name!=="String")},isArrayish=isArrayish$1,concat=Array.prototype.concat,slice$2=Array.prototype.slice,swizzle$1=simpleSwizzle.exports=function(j){for(var _e=[],et=0,tt=j.length;et<tt;et++){var nt=j[et];isArrayish(nt)?_e=concat.call(_e,slice$2.call(nt)):_e.push(nt)}return _e};swizzle$1.wrap=function($){return function(){return $(swizzle$1(arguments))}};var simpleSwizzleExports=simpleSwizzle.exports,colorNames=colorName,swizzle=simpleSwizzleExports,hasOwnProperty$1=Object.hasOwnProperty,reverseNames=Object.create(null);for(var name in colorNames)hasOwnProperty$1.call(colorNames,name)&&(reverseNames[colorNames[name]]=name);var cs=colorString$1.exports={to:{},get:{}};cs.get=function($){var j=$.substring(0,3).toLowerCase(),_e,et;switch(j){case"hsl":_e=cs.get.hsl($),et="hsl";break;case"hwb":_e=cs.get.hwb($),et="hwb";break;default:_e=cs.get.rgb($),et="rgb";break}return _e?{model:et,value:_e}:null};cs.get.rgb=function($){if(!$)return null;var j=/^#([a-f0-9]{3,4})$/i,_e=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,et=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,tt=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,nt=/^(\w+)$/,rt=[0,0,0,1],ot,it,at;if(ot=$.match(_e)){for(at=ot[2],ot=ot[1],it=0;it<3;it++){var dt=it*2;rt[it]=parseInt(ot.slice(dt,dt+2),16)}at&&(rt[3]=parseInt(at,16)/255)}else if(ot=$.match(j)){for(ot=ot[1],at=ot[3],it=0;it<3;it++)rt[it]=parseInt(ot[it]+ot[it],16);at&&(rt[3]=parseInt(at+at,16)/255)}else if(ot=$.match(et)){for(it=0;it<3;it++)rt[it]=parseInt(ot[it+1],0);ot[4]&&(ot[5]?rt[3]=parseFloat(ot[4])*.01:rt[3]=parseFloat(ot[4]))}else if(ot=$.match(tt)){for(it=0;it<3;it++)rt[it]=Math.round(parseFloat(ot[it+1])*2.55);ot[4]&&(ot[5]?rt[3]=parseFloat(ot[4])*.01:rt[3]=parseFloat(ot[4]))}else return(ot=$.match(nt))?ot[1]==="transparent"?[0,0,0,0]:hasOwnProperty$1.call(colorNames,ot[1])?(rt=colorNames[ot[1]],rt[3]=1,rt):null:null;for(it=0;it<3;it++)rt[it]=clamp$4(rt[it],0,255);return rt[3]=clamp$4(rt[3],0,1),rt};cs.get.hsl=function($){if(!$)return null;var j=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,_e=$.match(j);if(_e){var et=parseFloat(_e[4]),tt=(parseFloat(_e[1])%360+360)%360,nt=clamp$4(parseFloat(_e[2]),0,100),rt=clamp$4(parseFloat(_e[3]),0,100),ot=clamp$4(isNaN(et)?1:et,0,1);return[tt,nt,rt,ot]}return null};cs.get.hwb=function($){if(!$)return null;var j=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,_e=$.match(j);if(_e){var et=parseFloat(_e[4]),tt=(parseFloat(_e[1])%360+360)%360,nt=clamp$4(parseFloat(_e[2]),0,100),rt=clamp$4(parseFloat(_e[3]),0,100),ot=clamp$4(isNaN(et)?1:et,0,1);return[tt,nt,rt,ot]}return null};cs.to.hex=function(){var $=swizzle(arguments);return"#"+hexDouble($[0])+hexDouble($[1])+hexDouble($[2])+($[3]<1?hexDouble(Math.round($[3]*255)):"")};cs.to.rgb=function(){var $=swizzle(arguments);return $.length<4||$[3]===1?"rgb("+Math.round($[0])+", "+Math.round($[1])+", "+Math.round($[2])+")":"rgba("+Math.round($[0])+", "+Math.round($[1])+", "+Math.round($[2])+", "+$[3]+")"};cs.to.rgb.percent=function(){var $=swizzle(arguments),j=Math.round($[0]/255*100),_e=Math.round($[1]/255*100),et=Math.round($[2]/255*100);return $.length<4||$[3]===1?"rgb("+j+"%, "+_e+"%, "+et+"%)":"rgba("+j+"%, "+_e+"%, "+et+"%, "+$[3]+")"};cs.to.hsl=function(){var $=swizzle(arguments);return $.length<4||$[3]===1?"hsl("+$[0]+", "+$[1]+"%, "+$[2]+"%)":"hsla("+$[0]+", "+$[1]+"%, "+$[2]+"%, "+$[3]+")"};cs.to.hwb=function(){var $=swizzle(arguments),j="";return $.length>=4&&$[3]!==1&&(j=", "+$[3]),"hwb("+$[0]+", "+$[1]+"%, "+$[2]+"%"+j+")"};cs.to.keyword=function($){return reverseNames[$.slice(0,3)]};function clamp$4($,j,_e){return Math.min(Math.max(j,$),_e)}function hexDouble($){var j=Math.round($).toString(16).toUpperCase();return j.length<2?"0"+j:j}var colorStringExports=colorString$1.exports;const cssKeywords=colorName,reverseKeywords={};for(const $ of Object.keys(cssKeywords))reverseKeywords[cssKeywords[$]]=$;const convert$2={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var conversions$2=convert$2;for(const $ of Object.keys(convert$2)){if(!("channels"in convert$2[$]))throw new Error("missing channels property: "+$);if(!("labels"in convert$2[$]))throw new Error("missing channel labels property: "+$);if(convert$2[$].labels.length!==convert$2[$].channels)throw new Error("channel and label counts mismatch: "+$);const{channels:j,labels:_e}=convert$2[$];delete convert$2[$].channels,delete convert$2[$].labels,Object.defineProperty(convert$2[$],"channels",{value:j}),Object.defineProperty(convert$2[$],"labels",{value:_e})}convert$2.rgb.hsl=function($){const j=$[0]/255,_e=$[1]/255,et=$[2]/255,tt=Math.min(j,_e,et),nt=Math.max(j,_e,et),rt=nt-tt;let ot,it;nt===tt?ot=0:j===nt?ot=(_e-et)/rt:_e===nt?ot=2+(et-j)/rt:et===nt&&(ot=4+(j-_e)/rt),ot=Math.min(ot*60,360),ot<0&&(ot+=360);const at=(tt+nt)/2;return nt===tt?it=0:at<=.5?it=rt/(nt+tt):it=rt/(2-nt-tt),[ot,it*100,at*100]};convert$2.rgb.hsv=function($){let j,_e,et,tt,nt;const rt=$[0]/255,ot=$[1]/255,it=$[2]/255,at=Math.max(rt,ot,it),dt=at-Math.min(rt,ot,it),st=function(ut){return(at-ut)/6/dt+1/2};return dt===0?(tt=0,nt=0):(nt=dt/at,j=st(rt),_e=st(ot),et=st(it),rt===at?tt=et-_e:ot===at?tt=1/3+j-et:it===at&&(tt=2/3+_e-j),tt<0?tt+=1:tt>1&&(tt-=1)),[tt*360,nt*100,at*100]};convert$2.rgb.hwb=function($){const j=$[0],_e=$[1];let et=$[2];const tt=convert$2.rgb.hsl($)[0],nt=1/255*Math.min(j,Math.min(_e,et));return et=1-1/255*Math.max(j,Math.max(_e,et)),[tt,nt*100,et*100]};convert$2.rgb.cmyk=function($){const j=$[0]/255,_e=$[1]/255,et=$[2]/255,tt=Math.min(1-j,1-_e,1-et),nt=(1-j-tt)/(1-tt)||0,rt=(1-_e-tt)/(1-tt)||0,ot=(1-et-tt)/(1-tt)||0;return[nt*100,rt*100,ot*100,tt*100]};function comparativeDistance($,j){return($[0]-j[0])**2+($[1]-j[1])**2+($[2]-j[2])**2}convert$2.rgb.keyword=function($){const j=reverseKeywords[$];if(j)return j;let _e=1/0,et;for(const tt of Object.keys(cssKeywords)){const nt=cssKeywords[tt],rt=comparativeDistance($,nt);rt<_e&&(_e=rt,et=tt)}return et};convert$2.keyword.rgb=function($){return cssKeywords[$]};convert$2.rgb.xyz=function($){let j=$[0]/255,_e=$[1]/255,et=$[2]/255;j=j>.04045?((j+.055)/1.055)**2.4:j/12.92,_e=_e>.04045?((_e+.055)/1.055)**2.4:_e/12.92,et=et>.04045?((et+.055)/1.055)**2.4:et/12.92;const tt=j*.4124+_e*.3576+et*.1805,nt=j*.2126+_e*.7152+et*.0722,rt=j*.0193+_e*.1192+et*.9505;return[tt*100,nt*100,rt*100]};convert$2.rgb.lab=function($){const j=convert$2.rgb.xyz($);let _e=j[0],et=j[1],tt=j[2];_e/=95.047,et/=100,tt/=108.883,_e=_e>.008856?_e**(1/3):7.787*_e+16/116,et=et>.008856?et**(1/3):7.787*et+16/116,tt=tt>.008856?tt**(1/3):7.787*tt+16/116;const nt=116*et-16,rt=500*(_e-et),ot=200*(et-tt);return[nt,rt,ot]};convert$2.hsl.rgb=function($){const j=$[0]/360,_e=$[1]/100,et=$[2]/100;let tt,nt,rt;if(_e===0)return rt=et*255,[rt,rt,rt];et<.5?tt=et*(1+_e):tt=et+_e-et*_e;const ot=2*et-tt,it=[0,0,0];for(let at=0;at<3;at++)nt=j+1/3*-(at-1),nt<0&&nt++,nt>1&&nt--,6*nt<1?rt=ot+(tt-ot)*6*nt:2*nt<1?rt=tt:3*nt<2?rt=ot+(tt-ot)*(2/3-nt)*6:rt=ot,it[at]=rt*255;return it};convert$2.hsl.hsv=function($){const j=$[0];let _e=$[1]/100,et=$[2]/100,tt=_e;const nt=Math.max(et,.01);et*=2,_e*=et<=1?et:2-et,tt*=nt<=1?nt:2-nt;const rt=(et+_e)/2,ot=et===0?2*tt/(nt+tt):2*_e/(et+_e);return[j,ot*100,rt*100]};convert$2.hsv.rgb=function($){const j=$[0]/60,_e=$[1]/100;let et=$[2]/100;const tt=Math.floor(j)%6,nt=j-Math.floor(j),rt=255*et*(1-_e),ot=255*et*(1-_e*nt),it=255*et*(1-_e*(1-nt));switch(et*=255,tt){case 0:return[et,it,rt];case 1:return[ot,et,rt];case 2:return[rt,et,it];case 3:return[rt,ot,et];case 4:return[it,rt,et];case 5:return[et,rt,ot]}};convert$2.hsv.hsl=function($){const j=$[0],_e=$[1]/100,et=$[2]/100,tt=Math.max(et,.01);let nt,rt;rt=(2-_e)*et;const ot=(2-_e)*tt;return nt=_e*tt,nt/=ot<=1?ot:2-ot,nt=nt||0,rt/=2,[j,nt*100,rt*100]};convert$2.hwb.rgb=function($){const j=$[0]/360;let _e=$[1]/100,et=$[2]/100;const tt=_e+et;let nt;tt>1&&(_e/=tt,et/=tt);const rt=Math.floor(6*j),ot=1-et;nt=6*j-rt,rt&1&&(nt=1-nt);const it=_e+nt*(ot-_e);let at,dt,st;switch(rt){default:case 6:case 0:at=ot,dt=it,st=_e;break;case 1:at=it,dt=ot,st=_e;break;case 2:at=_e,dt=ot,st=it;break;case 3:at=_e,dt=it,st=ot;break;case 4:at=it,dt=_e,st=ot;break;case 5:at=ot,dt=_e,st=it;break}return[at*255,dt*255,st*255]};convert$2.cmyk.rgb=function($){const j=$[0]/100,_e=$[1]/100,et=$[2]/100,tt=$[3]/100,nt=1-Math.min(1,j*(1-tt)+tt),rt=1-Math.min(1,_e*(1-tt)+tt),ot=1-Math.min(1,et*(1-tt)+tt);return[nt*255,rt*255,ot*255]};convert$2.xyz.rgb=function($){const j=$[0]/100,_e=$[1]/100,et=$[2]/100;let tt,nt,rt;return tt=j*3.2406+_e*-1.5372+et*-.4986,nt=j*-.9689+_e*1.8758+et*.0415,rt=j*.0557+_e*-.204+et*1.057,tt=tt>.0031308?1.055*tt**(1/2.4)-.055:tt*12.92,nt=nt>.0031308?1.055*nt**(1/2.4)-.055:nt*12.92,rt=rt>.0031308?1.055*rt**(1/2.4)-.055:rt*12.92,tt=Math.min(Math.max(0,tt),1),nt=Math.min(Math.max(0,nt),1),rt=Math.min(Math.max(0,rt),1),[tt*255,nt*255,rt*255]};convert$2.xyz.lab=function($){let j=$[0],_e=$[1],et=$[2];j/=95.047,_e/=100,et/=108.883,j=j>.008856?j**(1/3):7.787*j+16/116,_e=_e>.008856?_e**(1/3):7.787*_e+16/116,et=et>.008856?et**(1/3):7.787*et+16/116;const tt=116*_e-16,nt=500*(j-_e),rt=200*(_e-et);return[tt,nt,rt]};convert$2.lab.xyz=function($){const j=$[0],_e=$[1],et=$[2];let tt,nt,rt;nt=(j+16)/116,tt=_e/500+nt,rt=nt-et/200;const ot=nt**3,it=tt**3,at=rt**3;return nt=ot>.008856?ot:(nt-16/116)/7.787,tt=it>.008856?it:(tt-16/116)/7.787,rt=at>.008856?at:(rt-16/116)/7.787,tt*=95.047,nt*=100,rt*=108.883,[tt,nt,rt]};convert$2.lab.lch=function($){const j=$[0],_e=$[1],et=$[2];let tt;tt=Math.atan2(et,_e)*360/2/Math.PI,tt<0&&(tt+=360);const rt=Math.sqrt(_e*_e+et*et);return[j,rt,tt]};convert$2.lch.lab=function($){const j=$[0],_e=$[1],tt=$[2]/360*2*Math.PI,nt=_e*Math.cos(tt),rt=_e*Math.sin(tt);return[j,nt,rt]};convert$2.rgb.ansi16=function($,j=null){const[_e,et,tt]=$;let nt=j===null?convert$2.rgb.hsv($)[2]:j;if(nt=Math.round(nt/50),nt===0)return 30;let rt=30+(Math.round(tt/255)<<2|Math.round(et/255)<<1|Math.round(_e/255));return nt===2&&(rt+=60),rt};convert$2.hsv.ansi16=function($){return convert$2.rgb.ansi16(convert$2.hsv.rgb($),$[2])};convert$2.rgb.ansi256=function($){const j=$[0],_e=$[1],et=$[2];return j===_e&&_e===et?j<8?16:j>248?231:Math.round((j-8)/247*24)+232:16+36*Math.round(j/255*5)+6*Math.round(_e/255*5)+Math.round(et/255*5)};convert$2.ansi16.rgb=function($){let j=$%10;if(j===0||j===7)return $>50&&(j+=3.5),j=j/10.5*255,[j,j,j];const _e=(~~($>50)+1)*.5,et=(j&1)*_e*255,tt=(j>>1&1)*_e*255,nt=(j>>2&1)*_e*255;return[et,tt,nt]};convert$2.ansi256.rgb=function($){if($>=232){const nt=($-232)*10+8;return[nt,nt,nt]}$-=16;let j;const _e=Math.floor($/36)/5*255,et=Math.floor((j=$%36)/6)/5*255,tt=j%6/5*255;return[_e,et,tt]};convert$2.rgb.hex=function($){const _e=(((Math.round($[0])&255)<<16)+((Math.round($[1])&255)<<8)+(Math.round($[2])&255)).toString(16).toUpperCase();return"000000".substring(_e.length)+_e};convert$2.hex.rgb=function($){const j=$.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!j)return[0,0,0];let _e=j[0];j[0].length===3&&(_e=_e.split("").map(ot=>ot+ot).join(""));const et=parseInt(_e,16),tt=et>>16&255,nt=et>>8&255,rt=et&255;return[tt,nt,rt]};convert$2.rgb.hcg=function($){const j=$[0]/255,_e=$[1]/255,et=$[2]/255,tt=Math.max(Math.max(j,_e),et),nt=Math.min(Math.min(j,_e),et),rt=tt-nt;let ot,it;return rt<1?ot=nt/(1-rt):ot=0,rt<=0?it=0:tt===j?it=(_e-et)/rt%6:tt===_e?it=2+(et-j)/rt:it=4+(j-_e)/rt,it/=6,it%=1,[it*360,rt*100,ot*100]};convert$2.hsl.hcg=function($){const j=$[1]/100,_e=$[2]/100,et=_e<.5?2*j*_e:2*j*(1-_e);let tt=0;return et<1&&(tt=(_e-.5*et)/(1-et)),[$[0],et*100,tt*100]};convert$2.hsv.hcg=function($){const j=$[1]/100,_e=$[2]/100,et=j*_e;let tt=0;return et<1&&(tt=(_e-et)/(1-et)),[$[0],et*100,tt*100]};convert$2.hcg.rgb=function($){const j=$[0]/360,_e=$[1]/100,et=$[2]/100;if(_e===0)return[et*255,et*255,et*255];const tt=[0,0,0],nt=j%1*6,rt=nt%1,ot=1-rt;let it=0;switch(Math.floor(nt)){case 0:tt[0]=1,tt[1]=rt,tt[2]=0;break;case 1:tt[0]=ot,tt[1]=1,tt[2]=0;break;case 2:tt[0]=0,tt[1]=1,tt[2]=rt;break;case 3:tt[0]=0,tt[1]=ot,tt[2]=1;break;case 4:tt[0]=rt,tt[1]=0,tt[2]=1;break;default:tt[0]=1,tt[1]=0,tt[2]=ot}return it=(1-_e)*et,[(_e*tt[0]+it)*255,(_e*tt[1]+it)*255,(_e*tt[2]+it)*255]};convert$2.hcg.hsv=function($){const j=$[1]/100,_e=$[2]/100,et=j+_e*(1-j);let tt=0;return et>0&&(tt=j/et),[$[0],tt*100,et*100]};convert$2.hcg.hsl=function($){const j=$[1]/100,et=$[2]/100*(1-j)+.5*j;let tt=0;return et>0&&et<.5?tt=j/(2*et):et>=.5&&et<1&&(tt=j/(2*(1-et))),[$[0],tt*100,et*100]};convert$2.hcg.hwb=function($){const j=$[1]/100,_e=$[2]/100,et=j+_e*(1-j);return[$[0],(et-j)*100,(1-et)*100]};convert$2.hwb.hcg=function($){const j=$[1]/100,et=1-$[2]/100,tt=et-j;let nt=0;return tt<1&&(nt=(et-tt)/(1-tt)),[$[0],tt*100,nt*100]};convert$2.apple.rgb=function($){return[$[0]/65535*255,$[1]/65535*255,$[2]/65535*255]};convert$2.rgb.apple=function($){return[$[0]/255*65535,$[1]/255*65535,$[2]/255*65535]};convert$2.gray.rgb=function($){return[$[0]/100*255,$[0]/100*255,$[0]/100*255]};convert$2.gray.hsl=function($){return[0,0,$[0]]};convert$2.gray.hsv=convert$2.gray.hsl;convert$2.gray.hwb=function($){return[0,100,$[0]]};convert$2.gray.cmyk=function($){return[0,0,0,$[0]]};convert$2.gray.lab=function($){return[$[0],0,0]};convert$2.gray.hex=function($){const j=Math.round($[0]/100*255)&255,et=((j<<16)+(j<<8)+j).toString(16).toUpperCase();return"000000".substring(et.length)+et};convert$2.rgb.gray=function($){return[($[0]+$[1]+$[2])/3/255*100]};const conversions$1=conversions$2;function buildGraph(){const $={},j=Object.keys(conversions$1);for(let _e=j.length,et=0;et<_e;et++)$[j[et]]={distance:-1,parent:null};return $}function deriveBFS($){const j=buildGraph(),_e=[$];for(j[$].distance=0;_e.length;){const et=_e.pop(),tt=Object.keys(conversions$1[et]);for(let nt=tt.length,rt=0;rt<nt;rt++){const ot=tt[rt],it=j[ot];it.distance===-1&&(it.distance=j[et].distance+1,it.parent=et,_e.unshift(ot))}}return j}function link($,j){return function(_e){return j($(_e))}}function wrapConversion($,j){const _e=[j[$].parent,$];let et=conversions$1[j[$].parent][$],tt=j[$].parent;for(;j[tt].parent;)_e.unshift(j[tt].parent),et=link(conversions$1[j[tt].parent][tt],et),tt=j[tt].parent;return et.conversion=_e,et}var route$1=function($){const j=deriveBFS($),_e={},et=Object.keys(j);for(let tt=et.length,nt=0;nt<tt;nt++){const rt=et[nt];j[rt].parent!==null&&(_e[rt]=wrapConversion(rt,j))}return _e};const conversions=conversions$2,route=route$1,convert$1={},models=Object.keys(conversions);function wrapRaw($){const j=function(..._e){const et=_e[0];return et==null?et:(et.length>1&&(_e=et),$(_e))};return"conversion"in $&&(j.conversion=$.conversion),j}function wrapRounded($){const j=function(..._e){const et=_e[0];if(et==null)return et;et.length>1&&(_e=et);const tt=$(_e);if(typeof tt=="object")for(let nt=tt.length,rt=0;rt<nt;rt++)tt[rt]=Math.round(tt[rt]);return tt};return"conversion"in $&&(j.conversion=$.conversion),j}models.forEach($=>{convert$1[$]={},Object.defineProperty(convert$1[$],"channels",{value:conversions[$].channels}),Object.defineProperty(convert$1[$],"labels",{value:conversions[$].labels});const j=route($);Object.keys(j).forEach(et=>{const tt=j[et];convert$1[$][et]=wrapRounded(tt),convert$1[$][et].raw=wrapRaw(tt)})});var colorConvert=convert$1;const colorString=colorStringExports,convert=colorConvert,skippedModels=["keyword","gray","hex"],hashedModelKeys={};for(const $ of Object.keys(convert))hashedModelKeys[[...convert[$].labels].sort().join("")]=$;const limiters={};function Color($,j){if(!(this instanceof Color))return new Color($,j);if(j&&j in skippedModels&&(j=null),j&&!(j in convert))throw new Error("Unknown model: "+j);let _e,et;if($==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if($ instanceof Color)this.model=$.model,this.color=[...$.color],this.valpha=$.valpha;else if(typeof $=="string"){const tt=colorString.get($);if(tt===null)throw new Error("Unable to parse color from string: "+$);this.model=tt.model,et=convert[this.model].channels,this.color=tt.value.slice(0,et),this.valpha=typeof tt.value[et]=="number"?tt.value[et]:1}else if($.length>0){this.model=j||"rgb",et=convert[this.model].channels;const tt=Array.prototype.slice.call($,0,et);this.color=zeroArray(tt,et),this.valpha=typeof $[et]=="number"?$[et]:1}else if(typeof $=="number")this.model="rgb",this.color=[$>>16&255,$>>8&255,$&255],this.valpha=1;else{this.valpha=1;const tt=Object.keys($);"alpha"in $&&(tt.splice(tt.indexOf("alpha"),1),this.valpha=typeof $.alpha=="number"?$.alpha:0);const nt=tt.sort().join("");if(!(nt in hashedModelKeys))throw new Error("Unable to parse color from object: "+JSON.stringify($));this.model=hashedModelKeys[nt];const{labels:rt}=convert[this.model],ot=[];for(_e=0;_e<rt.length;_e++)ot.push($[rt[_e]]);this.color=zeroArray(ot)}if(limiters[this.model])for(et=convert[this.model].channels,_e=0;_e<et;_e++){const tt=limiters[this.model][_e];tt&&(this.color[_e]=tt(this.color[_e]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Color.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string($){let j=this.model in colorString.to?this:this.rgb();j=j.round(typeof $=="number"?$:1);const _e=j.valpha===1?j.color:[...j.color,this.valpha];return colorString.to[j.model](_e)},percentString($){const j=this.rgb().round(typeof $=="number"?$:1),_e=j.valpha===1?j.color:[...j.color,this.valpha];return colorString.to.rgb.percent(_e)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const $={},{channels:j}=convert[this.model],{labels:_e}=convert[this.model];for(let et=0;et<j;et++)$[_e[et]]=this.color[et];return this.valpha!==1&&($.alpha=this.valpha),$},unitArray(){const $=this.rgb().color;return $[0]/=255,$[1]/=255,$[2]/=255,this.valpha!==1&&$.push(this.valpha),$},unitObject(){const $=this.rgb().object();return $.r/=255,$.g/=255,$.b/=255,this.valpha!==1&&($.alpha=this.valpha),$},round($){return $=Math.max($||0,0),new Color([...this.color.map(roundToPlace($)),this.valpha],this.model)},alpha($){return $!==void 0?new Color([...this.color,Math.max(0,Math.min(1,$))],this.model):this.valpha},red:getset("rgb",0,maxfn(255)),green:getset("rgb",1,maxfn(255)),blue:getset("rgb",2,maxfn(255)),hue:getset(["hsl","hsv","hsl","hwb","hcg"],0,$=>($%360+360)%360),saturationl:getset("hsl",1,maxfn(100)),lightness:getset("hsl",2,maxfn(100)),saturationv:getset("hsv",1,maxfn(100)),value:getset("hsv",2,maxfn(100)),chroma:getset("hcg",1,maxfn(100)),gray:getset("hcg",2,maxfn(100)),white:getset("hwb",1,maxfn(100)),wblack:getset("hwb",2,maxfn(100)),cyan:getset("cmyk",0,maxfn(100)),magenta:getset("cmyk",1,maxfn(100)),yellow:getset("cmyk",2,maxfn(100)),black:getset("cmyk",3,maxfn(100)),x:getset("xyz",0,maxfn(95.047)),y:getset("xyz",1,maxfn(100)),z:getset("xyz",2,maxfn(108.833)),l:getset("lab",0,maxfn(100)),a:getset("lab",1),b:getset("lab",2),keyword($){return $!==void 0?new Color($):convert[this.model].keyword(this.color)},hex($){return $!==void 0?new Color($):colorString.to.hex(this.rgb().round().color)},hexa($){if($!==void 0)return new Color($);const j=this.rgb().round().color;let _e=Math.round(this.valpha*255).toString(16).toUpperCase();return _e.length===1&&(_e="0"+_e),colorString.to.hex(j)+_e},rgbNumber(){const $=this.rgb().color;return($[0]&255)<<16|($[1]&255)<<8|$[2]&255},luminosity(){const $=this.rgb().color,j=[];for(const[_e,et]of $.entries()){const tt=et/255;j[_e]=tt<=.04045?tt/12.92:((tt+.055)/1.055)**2.4}return .2126*j[0]+.7152*j[1]+.0722*j[2]},contrast($){const j=this.luminosity(),_e=$.luminosity();return j>_e?(j+.05)/(_e+.05):(_e+.05)/(j+.05)},level($){const j=this.contrast($);return j>=7?"AAA":j>=4.5?"AA":""},isDark(){const $=this.rgb().color;return($[0]*2126+$[1]*7152+$[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const $=this.rgb();for(let j=0;j<3;j++)$.color[j]=255-$.color[j];return $},lighten($){const j=this.hsl();return j.color[2]+=j.color[2]*$,j},darken($){const j=this.hsl();return j.color[2]-=j.color[2]*$,j},saturate($){const j=this.hsl();return j.color[1]+=j.color[1]*$,j},desaturate($){const j=this.hsl();return j.color[1]-=j.color[1]*$,j},whiten($){const j=this.hwb();return j.color[1]+=j.color[1]*$,j},blacken($){const j=this.hwb();return j.color[2]+=j.color[2]*$,j},grayscale(){const $=this.rgb().color,j=$[0]*.3+$[1]*.59+$[2]*.11;return Color.rgb(j,j,j)},fade($){return this.alpha(this.valpha-this.valpha*$)},opaquer($){return this.alpha(this.valpha+this.valpha*$)},rotate($){const j=this.hsl();let _e=j.color[0];return _e=(_e+$)%360,_e=_e<0?360+_e:_e,j.color[0]=_e,j},mix($,j){if(!$||!$.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof $);const _e=$.rgb(),et=this.rgb(),tt=j===void 0?.5:j,nt=2*tt-1,rt=_e.alpha()-et.alpha(),ot=((nt*rt===-1?nt:(nt+rt)/(1+nt*rt))+1)/2,it=1-ot;return Color.rgb(ot*_e.red()+it*et.red(),ot*_e.green()+it*et.green(),ot*_e.blue()+it*et.blue(),_e.alpha()*tt+et.alpha()*(1-tt))}};for(const $ of Object.keys(convert)){if(skippedModels.includes($))continue;const{channels:j}=convert[$];Color.prototype[$]=function(..._e){return this.model===$?new Color(this):_e.length>0?new Color(_e,$):new Color([...assertArray(convert[this.model][$].raw(this.color)),this.valpha],$)},Color[$]=function(..._e){let et=_e[0];return typeof et=="number"&&(et=zeroArray(_e,j)),new Color(et,$)}}function roundTo($,j){return Number($.toFixed(j))}function roundToPlace($){return function(j){return roundTo(j,$)}}function getset($,j,_e){$=Array.isArray($)?$:[$];for(const et of $)(limiters[et]||(limiters[et]=[]))[j]=_e;return $=$[0],function(et){let tt;return et!==void 0?(_e&&(et=_e(et)),tt=this[$](),tt.color[j]=et,tt):(tt=this[$]().color[j],_e&&(tt=_e(tt)),tt)}}function maxfn($){return function(j){return Math.max(0,Math.min($,j))}}function assertArray($){return Array.isArray($)?$:[$]}function zeroArray($,j){for(let _e=0;_e<j;_e++)typeof $[_e]!="number"&&($[_e]=0);return $}var color=Color;const Color$1=getDefaultExportFromCjs(color);function convertColor($,j=!0){if(!$)return null;const _e=new Uint8Array(4);if(new DataView(_e.buffer).setInt32(0,$),j){const[ot,it,at,dt]=_e;return`rgba(${dt},${at},${it},${ot===1?1:ot/255})`}const[,tt,nt,rt]=_e;return`rgb(${rt},${nt},${tt})`}function invertColor($){return Color$1($).negate().hex()}function getContrastColor($){const j=Color$1($),_e=j.red(),et=j.green(),tt=j.blue();return(_e*299+et*587+tt*114)/1e3>=128?"black":"white"}function defer$1(){let $,j;const _e=new Promise((et,tt)=>{$=et,j=tt});return{resolve:$,reject:j,promise:_e}}const hashString=$=>$.split("").reduce((j,_e)=>(j=(j<<5)-j+_e.charCodeAt(0),j&j),0);function prepareBaseUrl($){const j=new URL($);j.search="",j.hash="";const _e=j.toString();return _e.endsWith(j.hostname)?_e+"/":_e.slice(0,_e.lastIndexOf("/")+1)}function cyrb53($,j=0){let _e=3735928559^j,et=1103547991^j;for(let tt=0,nt;tt<$.length;tt++)nt=$.charCodeAt(tt),_e=Math.imul(_e^nt,2654435761),et=Math.imul(et^nt,1597334677);return _e=Math.imul(_e^_e>>>16,2246822507)^Math.imul(et^et>>>13,3266489909),et=Math.imul(et^et>>>16,2246822507)^Math.imul(_e^_e>>>13,3266489909),(4294967296*(2097151&et)+(_e>>>0)).toString(16)}const PROXY_URL="https://proxy.qspider.xyz/";function fetchProxyFallback($){return fetch($).catch(()=>fetch(PROXY_URL+window.btoa($)))}function throttle($,j){let _e,et;return function(...tt){return _e||(_e=!0,setTimeout(()=>_e=!1,j),et=$.apply(this,tt)),et}}function cleanPath($){return $.replace(/\\/g,"/")}typeof window<"u"&&typeof window.global>"u"&&(window.global=window);const ParserEND=1114112;class ParserError extends Error{constructor(j,_e,et){super("[ParserError] "+j,_e,et),this.name="ParserError",this.code="ParserError",Error.captureStackTrace&&Error.captureStackTrace(this,ParserError)}}class State{constructor(j){this.parser=j,this.buf="",this.returned=null,this.result=null,this.resultTable=null,this.resultArr=null}}class Parser{constructor(){this.pos=0,this.col=0,this.line=0,this.obj={},this.ctx=this.obj,this.stack=[],this._buf="",this.char=null,this.ii=0,this.state=new State(this.parseStart)}parse(j){if(j.length===0||j.length==null)return;this._buf=String(j),this.ii=-1,this.char=-1;let _e;for(;_e===!1||this.nextChar();)_e=this.runOne();this._buf=null}nextChar(){return this.char===10&&(++this.line,this.col=-1),++this.ii,this.char=this._buf.codePointAt(this.ii),++this.pos,++this.col,this.haveBuffer()}haveBuffer(){return this.ii<this._buf.length}runOne(){return this.state.parser.call(this,this.state.returned)}finish(){this.char=ParserEND;let j;do j=this.state.parser,this.runOne();while(this.state.parser!==j);return this.ctx=null,this.state=null,this._buf=null,this.obj}next(j){if(typeof j!="function")throw new ParserError("Tried to set state to non-existent state: "+JSON.stringify(j));this.state.parser=j}goto(j){return this.next(j),this.runOne()}call(j,_e){_e&&this.next(_e),this.stack.push(this.state),this.state=new State(j)}callNow(j,_e){return this.call(j,_e),this.runOne()}return(j){if(this.stack.length===0)throw this.error(new ParserError("Stack underflow"));j===void 0&&(j=this.state.buf),this.state=this.stack.pop(),this.state.returned=j}returnNow(j){return this.return(j),this.runOne()}consume(){if(this.char===ParserEND)throw this.error(new ParserError("Unexpected end-of-buffer"));this.state.buf+=this._buf[this.ii]}error(j){return j.line=this.line,j.col=this.col,j.pos=this.pos,j}parseStart(){throw new ParserError("Must declare a parseStart method")}}Parser.END=ParserEND;Parser.Error=ParserError;const createDateTime=$=>{const j=new Date($);if(isNaN(j))throw new TypeError("Invalid Datetime");return j},f$1=($,j)=>{for(j=String(j);j.length<$;)j="0"+j;return j};class FloatingDateTime extends Date{constructor(j){super(j+"Z"),this.isFloating=!0}toISOString(){const j=`${this.getUTCFullYear()}-${f$1(2,this.getUTCMonth()+1)}-${f$1(2,this.getUTCDate())}`,_e=`${f$1(2,this.getUTCHours())}:${f$1(2,this.getUTCMinutes())}:${f$1(2,this.getUTCSeconds())}.${f$1(3,this.getUTCMilliseconds())}`;return`${j}T${_e}`}}const createDateTimeFloat=$=>{const j=new FloatingDateTime($);if(isNaN(j))throw new TypeError("Invalid Datetime");return j};class Date_ extends Date{constructor(j){super(j),this.isDate=!0}toISOString(){return`${this.getUTCFullYear()}-${f$1(2,this.getUTCMonth()+1)}-${f$1(2,this.getUTCDate())}`}}const createDate=$=>{const j=new Date_($);if(isNaN(j))throw new TypeError("Invalid Datetime");return j};class Time extends Date{constructor(j){super(`0000-01-01T${j}Z`),this.isTime=!0}toISOString(){return`${f$1(2,this.getUTCHours())}:${f$1(2,this.getUTCMinutes())}:${f$1(2,this.getUTCSeconds())}.${f$1(3,this.getUTCMilliseconds())}`}}const createTime=$=>{const j=new Time($);if(isNaN(j))throw new TypeError("Invalid Datetime");return j},TOMLParser=makeParserClass(Parser);class TomlError extends Error{constructor(j){super(j),this.name="TomlError",Error.captureStackTrace&&Error.captureStackTrace(this,TomlError),this.fromTOML=!0,this.wrapped=null}}TomlError.wrap=$=>{const j=new TomlError($.message);return j.code=$.code,j.wrapped=$,j};const CTRL_I=9,CTRL_J=10,CTRL_M=13,CTRL_CHAR_BOUNDARY=31,CHAR_SP=32,CHAR_QUOT=34,CHAR_NUM=35,CHAR_APOS=39,CHAR_PLUS=43,CHAR_COMMA=44,CHAR_HYPHEN=45,CHAR_PERIOD=46,CHAR_0=48,CHAR_1=49,CHAR_7=55,CHAR_9=57,CHAR_COLON=58,CHAR_EQUALS=61,CHAR_A=65,CHAR_E=69,CHAR_F=70,CHAR_T=84,CHAR_U=85,CHAR_Z=90,CHAR_LOWBAR=95,CHAR_a=97,CHAR_b=98,CHAR_e=101,CHAR_f=102,CHAR_i=105,CHAR_l=108,CHAR_n=110,CHAR_o=111,CHAR_r=114,CHAR_s=115,CHAR_t=116,CHAR_u=117,CHAR_x=120,CHAR_z=122,CHAR_LCUB=123,CHAR_RCUB=125,CHAR_LSQB=91,CHAR_BSOL=92,CHAR_RSQB=93,CHAR_DEL=127,SURROGATE_FIRST=55296,SURROGATE_LAST=57343,escapes={[CHAR_b]:"\b",[CHAR_t]:"	",[CHAR_n]:`
`,[CHAR_f]:"\f",[CHAR_r]:"\r",[CHAR_QUOT]:'"',[CHAR_BSOL]:"\\"};function isDigit($){return $>=CHAR_0&&$<=CHAR_9}function isHexit($){return $>=CHAR_A&&$<=CHAR_F||$>=CHAR_a&&$<=CHAR_f||$>=CHAR_0&&$<=CHAR_9}function isBit($){return $===CHAR_1||$===CHAR_0}function isOctit($){return $>=CHAR_0&&$<=CHAR_7}function isAlphaNumQuoteHyphen($){return $>=CHAR_A&&$<=CHAR_Z||$>=CHAR_a&&$<=CHAR_z||$>=CHAR_0&&$<=CHAR_9||$===CHAR_APOS||$===CHAR_QUOT||$===CHAR_LOWBAR||$===CHAR_HYPHEN}function isAlphaNumHyphen($){return $>=CHAR_A&&$<=CHAR_Z||$>=CHAR_a&&$<=CHAR_z||$>=CHAR_0&&$<=CHAR_9||$===CHAR_LOWBAR||$===CHAR_HYPHEN}const _type=Symbol("type"),_declared=Symbol("declared"),hasOwnProperty=Object.prototype.hasOwnProperty,defineProperty=Object.defineProperty,descriptor={configurable:!0,enumerable:!0,writable:!0,value:void 0};function hasKey($,j){return hasOwnProperty.call($,j)?!0:(j==="__proto__"&&defineProperty($,"__proto__",descriptor),!1)}const INLINE_TABLE=Symbol("inline-table");function InlineTable(){return Object.defineProperties({},{[_type]:{value:INLINE_TABLE}})}function isInlineTable($){return $===null||typeof $!="object"?!1:$[_type]===INLINE_TABLE}const TABLE=Symbol("table");function Table$1(){return Object.defineProperties({},{[_type]:{value:TABLE},[_declared]:{value:!1,writable:!0}})}function isTable($){return $===null||typeof $!="object"?!1:$[_type]===TABLE}const _contentType=Symbol("content-type"),INLINE_LIST=Symbol("inline-list");function InlineList($){return Object.defineProperties([],{[_type]:{value:INLINE_LIST},[_contentType]:{value:$}})}function isInlineList($){return $===null||typeof $!="object"?!1:$[_type]===INLINE_LIST}const LIST=Symbol("list");function List(){return Object.defineProperties([],{[_type]:{value:LIST}})}function isList($){return $===null||typeof $!="object"?!1:$[_type]===LIST}let _custom;try{const utilInspect=eval("require('util').inspect");_custom=utilInspect.custom}catch($){}const _inspect=_custom||"inspect";class BoxedBigInt{constructor(j){try{this.value=global.BigInt.asIntN(64,j)}catch{this.value=null}Object.defineProperty(this,_type,{value:INTEGER})}isNaN(){return this.value===null}toString(){return String(this.value)}[_inspect](){return`[BigInt: ${this.toString()}]}`}valueOf(){return this.value}}const INTEGER=Symbol("integer");function Integer($){let j=Number($);return Object.is(j,-0)&&(j=0),global.BigInt&&!Number.isSafeInteger(j)?new BoxedBigInt($):Object.defineProperties(new Number(j),{isNaN:{value:function(){return isNaN(this)}},[_type]:{value:INTEGER},[_inspect]:{value:()=>`[Integer: ${$}]`}})}function isInteger($){return $===null||typeof $!="object"?!1:$[_type]===INTEGER}const FLOAT=Symbol("float");function Float($){return Object.defineProperties(new Number($),{[_type]:{value:FLOAT},[_inspect]:{value:()=>`[Float: ${$}]`}})}function isFloat($){return $===null||typeof $!="object"?!1:$[_type]===FLOAT}function tomlType$1($){const j=typeof $;if(j==="object"){if($===null)return"null";if($ instanceof Date)return"datetime";if(_type in $)switch($[_type]){case INLINE_TABLE:return"inline-table";case INLINE_LIST:return"inline-list";case TABLE:return"table";case LIST:return"list";case FLOAT:return"float";case INTEGER:return"integer"}}return j}function makeParserClass($){class j extends ${constructor(){super(),this.ctx=this.obj=Table$1()}atEndOfWord(){return this.char===CHAR_NUM||this.char===CTRL_I||this.char===CHAR_SP||this.atEndOfLine()}atEndOfLine(){return this.char===$.END||this.char===CTRL_J||this.char===CTRL_M}parseStart(){if(this.char===$.END)return null;if(this.char===CHAR_LSQB)return this.call(this.parseTableOrList);if(this.char===CHAR_NUM)return this.call(this.parseComment);if(this.char===CTRL_J||this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M)return null;if(isAlphaNumQuoteHyphen(this.char))return this.callNow(this.parseAssignStatement);throw this.error(new TomlError(`Unknown character "${this.char}"`))}parseWhitespaceToEOL(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M)return null;if(this.char===CHAR_NUM)return this.goto(this.parseComment);if(this.char===$.END||this.char===CTRL_J)return this.return();throw this.error(new TomlError("Unexpected character, expected only whitespace or comments till end of line"))}parseAssignStatement(){return this.callNow(this.parseAssign,this.recordAssignStatement)}recordAssignStatement(et){let tt=this.ctx,nt=et.key.pop();for(let rt of et.key){if(hasKey(tt,rt)&&!isTable(tt[rt]))throw this.error(new TomlError("Can't redefine existing key"));tt=tt[rt]=tt[rt]||Table$1()}if(hasKey(tt,nt))throw this.error(new TomlError("Can't redefine existing key"));return tt[_declared]=!0,isInteger(et.value)||isFloat(et.value)?tt[nt]=et.value.valueOf():tt[nt]=et.value,this.goto(this.parseWhitespaceToEOL)}parseAssign(){return this.callNow(this.parseKeyword,this.recordAssignKeyword)}recordAssignKeyword(et){return this.state.resultTable?this.state.resultTable.push(et):this.state.resultTable=[et],this.goto(this.parseAssignKeywordPreDot)}parseAssignKeywordPreDot(){if(this.char===CHAR_PERIOD)return this.next(this.parseAssignKeywordPostDot);if(this.char!==CHAR_SP&&this.char!==CTRL_I)return this.goto(this.parseAssignEqual)}parseAssignKeywordPostDot(){if(this.char!==CHAR_SP&&this.char!==CTRL_I)return this.callNow(this.parseKeyword,this.recordAssignKeyword)}parseAssignEqual(){if(this.char===CHAR_EQUALS)return this.next(this.parseAssignPreValue);throw this.error(new TomlError('Invalid character, expected "="'))}parseAssignPreValue(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseValue,this.recordAssignValue)}recordAssignValue(et){return this.returnNow({key:this.state.resultTable,value:et})}parseComment(){do{if(this.char===$.END||this.char===CTRL_J)return this.return();if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I)throw this.errorControlCharIn("comments")}while(this.nextChar())}parseTableOrList(){if(this.char===CHAR_LSQB)this.next(this.parseList);else return this.goto(this.parseTable)}parseTable(){return this.ctx=this.obj,this.goto(this.parseTableNext)}parseTableNext(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseKeyword,this.parseTableMore)}parseTableMore(et){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CHAR_RSQB){if(hasKey(this.ctx,et)&&(!isTable(this.ctx[et])||this.ctx[et][_declared]))throw this.error(new TomlError("Can't redefine existing key"));return this.ctx=this.ctx[et]=this.ctx[et]||Table$1(),this.ctx[_declared]=!0,this.next(this.parseWhitespaceToEOL)}else if(this.char===CHAR_PERIOD){if(!hasKey(this.ctx,et))this.ctx=this.ctx[et]=Table$1();else if(isTable(this.ctx[et]))this.ctx=this.ctx[et];else if(isList(this.ctx[et]))this.ctx=this.ctx[et][this.ctx[et].length-1];else throw this.error(new TomlError("Can't redefine existing key"));return this.next(this.parseTableNext)}else throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseList(){return this.ctx=this.obj,this.goto(this.parseListNext)}parseListNext(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseKeyword,this.parseListMore)}parseListMore(et){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CHAR_RSQB){if(hasKey(this.ctx,et)||(this.ctx[et]=List()),isInlineList(this.ctx[et]))throw this.error(new TomlError("Can't extend an inline array"));if(isList(this.ctx[et])){const tt=Table$1();this.ctx[et].push(tt),this.ctx=tt}else throw this.error(new TomlError("Can't redefine an existing key"));return this.next(this.parseListEnd)}else if(this.char===CHAR_PERIOD){if(!hasKey(this.ctx,et))this.ctx=this.ctx[et]=Table$1();else{if(isInlineList(this.ctx[et]))throw this.error(new TomlError("Can't extend an inline array"));if(isInlineTable(this.ctx[et]))throw this.error(new TomlError("Can't extend an inline table"));if(isList(this.ctx[et]))this.ctx=this.ctx[et][this.ctx[et].length-1];else if(isTable(this.ctx[et]))this.ctx=this.ctx[et];else throw this.error(new TomlError("Can't redefine an existing key"))}return this.next(this.parseListNext)}else throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseListEnd(et){if(this.char===CHAR_RSQB)return this.next(this.parseWhitespaceToEOL);throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseValue(){if(this.char===$.END)throw this.error(new TomlError("Key without value"));if(this.char===CHAR_QUOT)return this.next(this.parseDoubleString);if(this.char===CHAR_APOS)return this.next(this.parseSingleString);if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)return this.goto(this.parseNumberSign);if(this.char===CHAR_i)return this.next(this.parseInf);if(this.char===CHAR_n)return this.next(this.parseNan);if(isDigit(this.char))return this.goto(this.parseNumberOrDateTime);if(this.char===CHAR_t||this.char===CHAR_f)return this.goto(this.parseBoolean);if(this.char===CHAR_LSQB)return this.call(this.parseInlineList,this.recordValue);if(this.char===CHAR_LCUB)return this.call(this.parseInlineTable,this.recordValue);throw this.error(new TomlError("Unexpected character, expecting string, number, datetime, boolean, inline array or inline table"))}recordValue(et){return this.returnNow(et)}parseInf(){if(this.char===CHAR_n)return this.next(this.parseInf2);throw this.error(new TomlError('Unexpected character, expected "inf", "+inf" or "-inf"'))}parseInf2(){if(this.char===CHAR_f)return this.state.buf==="-"?this.return(-1/0):this.return(1/0);throw this.error(new TomlError('Unexpected character, expected "inf", "+inf" or "-inf"'))}parseNan(){if(this.char===CHAR_a)return this.next(this.parseNan2);throw this.error(new TomlError('Unexpected character, expected "nan"'))}parseNan2(){if(this.char===CHAR_n)return this.return(NaN);throw this.error(new TomlError('Unexpected character, expected "nan"'))}parseKeyword(){return this.char===CHAR_QUOT?this.next(this.parseBasicString):this.char===CHAR_APOS?this.next(this.parseLiteralString):this.goto(this.parseBareKey)}parseBareKey(){do{if(this.char===$.END)throw this.error(new TomlError("Key ended without value"));if(isAlphaNumHyphen(this.char))this.consume();else{if(this.state.buf.length===0)throw this.error(new TomlError("Empty bare keys are not allowed"));return this.returnNow()}}while(this.nextChar())}parseSingleString(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiStringMaybe):this.goto(this.parseLiteralString)}parseLiteralString(){do{if(this.char===CHAR_APOS)return this.return();if(this.atEndOfLine())throw this.error(new TomlError("Unterminated string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I)throw this.errorControlCharIn("strings");this.consume()}while(this.nextChar())}parseLiteralMultiStringMaybe(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiString):this.returnNow()}parseLiteralMultiString(){return this.char===CTRL_M?null:this.char===CTRL_J?this.next(this.parseLiteralMultiStringContent):this.goto(this.parseLiteralMultiStringContent)}parseLiteralMultiStringContent(){do{if(this.char===CHAR_APOS)return this.next(this.parseLiteralMultiEnd);if(this.char===$.END)throw this.error(new TomlError("Unterminated multi-line string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I&&this.char!==CTRL_J&&this.char!==CTRL_M)throw this.errorControlCharIn("strings");this.consume()}while(this.nextChar())}parseLiteralMultiEnd(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiEnd2):(this.state.buf+="'",this.goto(this.parseLiteralMultiStringContent))}parseLiteralMultiEnd2(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiEnd3):(this.state.buf+="''",this.goto(this.parseLiteralMultiStringContent))}parseLiteralMultiEnd3(){return this.char===CHAR_APOS?(this.state.buf+="'",this.next(this.parseLiteralMultiEnd4)):this.returnNow()}parseLiteralMultiEnd4(){return this.char===CHAR_APOS?(this.state.buf+="'",this.return()):this.returnNow()}parseDoubleString(){return this.char===CHAR_QUOT?this.next(this.parseMultiStringMaybe):this.goto(this.parseBasicString)}parseBasicString(){do{if(this.char===CHAR_BSOL)return this.call(this.parseEscape,this.recordEscapeReplacement);if(this.char===CHAR_QUOT)return this.return();if(this.atEndOfLine())throw this.error(new TomlError("Unterminated string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I)throw this.errorControlCharIn("strings");this.consume()}while(this.nextChar())}recordEscapeReplacement(et){return this.state.buf+=et,this.goto(this.parseBasicString)}parseMultiStringMaybe(){return this.char===CHAR_QUOT?this.next(this.parseMultiString):this.returnNow()}parseMultiString(){return this.char===CTRL_M?null:this.char===CTRL_J?this.next(this.parseMultiStringContent):this.goto(this.parseMultiStringContent)}parseMultiStringContent(){do{if(this.char===CHAR_BSOL)return this.call(this.parseMultiEscape,this.recordMultiEscapeReplacement);if(this.char===CHAR_QUOT)return this.next(this.parseMultiEnd);if(this.char===$.END)throw this.error(new TomlError("Unterminated multi-line string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I&&this.char!==CTRL_J&&this.char!==CTRL_M)throw this.errorControlCharIn("strings");this.consume()}while(this.nextChar())}errorControlCharIn(et){let tt="\\u00";return this.char<16&&(tt+="0"),tt+=this.char.toString(16),this.error(new TomlError(`Control characters (codes < 0x1f and 0x7f) are not allowed in ${et}, use ${tt} instead`))}recordMultiEscapeReplacement(et){return this.state.buf+=et,this.goto(this.parseMultiStringContent)}parseMultiEnd(){return this.char===CHAR_QUOT?this.next(this.parseMultiEnd2):(this.state.buf+='"',this.goto(this.parseMultiStringContent))}parseMultiEnd2(){return this.char===CHAR_QUOT?this.next(this.parseMultiEnd3):(this.state.buf+='""',this.goto(this.parseMultiStringContent))}parseMultiEnd3(){return this.char===CHAR_QUOT?(this.state.buf+='"',this.next(this.parseMultiEnd4)):this.returnNow()}parseMultiEnd4(){return this.char===CHAR_QUOT?(this.state.buf+='"',this.return()):this.returnNow()}parseMultiEscape(){return this.char===CTRL_M||this.char===CTRL_J?this.next(this.parseMultiTrim):this.char===CHAR_SP||this.char===CTRL_I?this.next(this.parsePreMultiTrim):this.goto(this.parseEscape)}parsePreMultiTrim(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CTRL_M||this.char===CTRL_J)return this.next(this.parseMultiTrim);throw this.error(new TomlError("Can't escape whitespace"))}parseMultiTrim(){return this.char===CTRL_J||this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M?null:this.returnNow()}parseEscape(){if(this.char in escapes)return this.return(escapes[this.char]);if(this.char===CHAR_u)return this.call(this.parseSmallUnicode,this.parseUnicodeReturn);if(this.char===CHAR_U)return this.call(this.parseLargeUnicode,this.parseUnicodeReturn);throw this.error(new TomlError("Unknown escape character: "+this.char))}parseUnicodeReturn(et){try{const tt=parseInt(et,16);if(tt>=SURROGATE_FIRST&&tt<=SURROGATE_LAST)throw this.error(new TomlError("Invalid unicode, character in range 0xD800 - 0xDFFF is reserved"));return this.returnNow(String.fromCodePoint(tt))}catch(tt){throw this.error(TomlError.wrap(tt))}}parseSmallUnicode(){if(isHexit(this.char)){if(this.consume(),this.state.buf.length>=4)return this.return()}else throw this.error(new TomlError("Invalid character in unicode sequence, expected hex"))}parseLargeUnicode(){if(isHexit(this.char)){if(this.consume(),this.state.buf.length>=8)return this.return()}else throw this.error(new TomlError("Invalid character in unicode sequence, expected hex"))}parseNumberSign(){return this.consume(),this.next(this.parseMaybeSignedInfOrNan)}parseMaybeSignedInfOrNan(){return this.char===CHAR_i?this.next(this.parseInf):this.char===CHAR_n?this.next(this.parseNan):this.callNow(this.parseNoUnder,this.parseNumberIntegerStart)}parseNumberIntegerStart(){return this.char===CHAR_0?(this.consume(),this.next(this.parseNumberIntegerExponentOrDecimal)):this.goto(this.parseNumberInteger)}parseNumberIntegerExponentOrDecimal(){return this.char===CHAR_PERIOD?(this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat)):this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.returnNow(Integer(this.state.buf))}parseNumberInteger(){if(isDigit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnder);if(this.char===CHAR_E||this.char===CHAR_e)return this.consume(),this.next(this.parseNumberExponentSign);if(this.char===CHAR_PERIOD)return this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat);{const et=Integer(this.state.buf);if(et.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(et)}}}parseNoUnder(){if(this.char===CHAR_LOWBAR||this.char===CHAR_PERIOD||this.char===CHAR_E||this.char===CHAR_e)throw this.error(new TomlError("Unexpected character, expected digit"));if(this.atEndOfWord())throw this.error(new TomlError("Incomplete number"));return this.returnNow()}parseNoUnderHexOctBinLiteral(){if(this.char===CHAR_LOWBAR||this.char===CHAR_PERIOD)throw this.error(new TomlError("Unexpected character, expected digit"));if(this.atEndOfWord())throw this.error(new TomlError("Incomplete number"));return this.returnNow()}parseNumberFloat(){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnder,this.parseNumberFloat);if(isDigit(this.char))this.consume();else return this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.returnNow(Float(this.state.buf))}parseNumberExponentSign(){if(isDigit(this.char))return this.goto(this.parseNumberExponent);if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)this.consume(),this.call(this.parseNoUnder,this.parseNumberExponent);else throw this.error(new TomlError("Unexpected character, expected -, + or digit"))}parseNumberExponent(){if(isDigit(this.char))this.consume();else return this.char===CHAR_LOWBAR?this.call(this.parseNoUnder):this.returnNow(Float(this.state.buf))}parseNumberOrDateTime(){return this.char===CHAR_0?(this.consume(),this.next(this.parseNumberBaseOrDateTime)):this.goto(this.parseNumberOrDateTimeOnly)}parseNumberOrDateTimeOnly(){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnder,this.parseNumberInteger);if(isDigit(this.char))this.consume(),this.state.buf.length>4&&this.next(this.parseNumberInteger);else return this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.char===CHAR_PERIOD?(this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat)):this.char===CHAR_HYPHEN?this.goto(this.parseDateTime):this.char===CHAR_COLON?this.goto(this.parseOnlyTimeHour):this.returnNow(Integer(this.state.buf))}parseDateTimeOnly(){if(this.state.buf.length<4){if(isDigit(this.char))return this.consume();if(this.char===CHAR_COLON)return this.goto(this.parseOnlyTimeHour);throw this.error(new TomlError("Expected digit while parsing year part of a date"))}else{if(this.char===CHAR_HYPHEN)return this.goto(this.parseDateTime);throw this.error(new TomlError("Expected hyphen (-) while parsing year part of date"))}}parseNumberBaseOrDateTime(){return this.char===CHAR_b?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerBin)):this.char===CHAR_o?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerOct)):this.char===CHAR_x?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerHex)):this.char===CHAR_PERIOD?this.goto(this.parseNumberInteger):isDigit(this.char)?this.goto(this.parseDateTimeOnly):this.returnNow(Integer(this.state.buf))}parseIntegerHex(){if(isHexit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{const et=Integer(this.state.buf);if(et.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(et)}}}parseIntegerOct(){if(isOctit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{const et=Integer(this.state.buf);if(et.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(et)}}}parseIntegerBin(){if(isBit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{const et=Integer(this.state.buf);if(et.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(et)}}}parseDateTime(){if(this.state.buf.length<4)throw this.error(new TomlError("Years less than 1000 must be zero padded to four characters"));return this.state.result=this.state.buf,this.state.buf="",this.next(this.parseDateMonth)}parseDateMonth(){if(this.char===CHAR_HYPHEN){if(this.state.buf.length<2)throw this.error(new TomlError("Months less than 10 must be zero padded to two characters"));return this.state.result+="-"+this.state.buf,this.state.buf="",this.next(this.parseDateDay)}else if(isDigit(this.char))this.consume();else throw this.error(new TomlError("Incomplete datetime"))}parseDateDay(){if(this.char===CHAR_T||this.char===CHAR_SP){if(this.state.buf.length<2)throw this.error(new TomlError("Days less than 10 must be zero padded to two characters"));return this.state.result+="-"+this.state.buf,this.state.buf="",this.next(this.parseStartTimeHour)}else{if(this.atEndOfWord())return this.returnNow(createDate(this.state.result+"-"+this.state.buf));if(isDigit(this.char))this.consume();else throw this.error(new TomlError("Incomplete datetime"))}}parseStartTimeHour(){return this.atEndOfWord()?this.returnNow(createDate(this.state.result)):this.goto(this.parseTimeHour)}parseTimeHour(){if(this.char===CHAR_COLON){if(this.state.buf.length<2)throw this.error(new TomlError("Hours less than 10 must be zero padded to two characters"));return this.state.result+="T"+this.state.buf,this.state.buf="",this.next(this.parseTimeMin)}else if(isDigit(this.char))this.consume();else throw this.error(new TomlError("Incomplete datetime"))}parseTimeMin(){if(this.state.buf.length<2&&isDigit(this.char))this.consume();else{if(this.state.buf.length===2&&this.char===CHAR_COLON)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseTimeSec);throw this.error(new TomlError("Incomplete datetime"))}}parseTimeSec(){if(isDigit(this.char)){if(this.consume(),this.state.buf.length===2)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseTimeZoneOrFraction)}else throw this.error(new TomlError("Incomplete datetime"))}parseOnlyTimeHour(){if(this.char===CHAR_COLON){if(this.state.buf.length<2)throw this.error(new TomlError("Hours less than 10 must be zero padded to two characters"));return this.state.result=this.state.buf,this.state.buf="",this.next(this.parseOnlyTimeMin)}else throw this.error(new TomlError("Incomplete time"))}parseOnlyTimeMin(){if(this.state.buf.length<2&&isDigit(this.char))this.consume();else{if(this.state.buf.length===2&&this.char===CHAR_COLON)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseOnlyTimeSec);throw this.error(new TomlError("Incomplete time"))}}parseOnlyTimeSec(){if(isDigit(this.char)){if(this.consume(),this.state.buf.length===2)return this.next(this.parseOnlyTimeFractionMaybe)}else throw this.error(new TomlError("Incomplete time"))}parseOnlyTimeFractionMaybe(){if(this.state.result+=":"+this.state.buf,this.char===CHAR_PERIOD)this.state.buf="",this.next(this.parseOnlyTimeFraction);else return this.return(createTime(this.state.result))}parseOnlyTimeFraction(){if(isDigit(this.char))this.consume();else if(this.atEndOfWord()){if(this.state.buf.length===0)throw this.error(new TomlError("Expected digit in milliseconds"));return this.returnNow(createTime(this.state.result+"."+this.state.buf))}else throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}parseTimeZoneOrFraction(){if(this.char===CHAR_PERIOD)this.consume(),this.next(this.parseDateTimeFraction);else if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)this.consume(),this.next(this.parseTimeZoneHour);else{if(this.char===CHAR_Z)return this.consume(),this.return(createDateTime(this.state.result+this.state.buf));if(this.atEndOfWord())return this.returnNow(createDateTimeFloat(this.state.result+this.state.buf));throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}}parseDateTimeFraction(){if(isDigit(this.char))this.consume();else{if(this.state.buf.length===1)throw this.error(new TomlError("Expected digit in milliseconds"));if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)this.consume(),this.next(this.parseTimeZoneHour);else{if(this.char===CHAR_Z)return this.consume(),this.return(createDateTime(this.state.result+this.state.buf));if(this.atEndOfWord())return this.returnNow(createDateTimeFloat(this.state.result+this.state.buf));throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}}}parseTimeZoneHour(){if(isDigit(this.char)){if(this.consume(),/\d\d$/.test(this.state.buf))return this.next(this.parseTimeZoneSep)}else throw this.error(new TomlError("Unexpected character in datetime, expected digit"))}parseTimeZoneSep(){if(this.char===CHAR_COLON)this.consume(),this.next(this.parseTimeZoneMin);else throw this.error(new TomlError("Unexpected character in datetime, expected colon"))}parseTimeZoneMin(){if(isDigit(this.char)){if(this.consume(),/\d\d$/.test(this.state.buf))return this.return(createDateTime(this.state.result+this.state.buf))}else throw this.error(new TomlError("Unexpected character in datetime, expected digit"))}parseBoolean(){if(this.char===CHAR_t)return this.consume(),this.next(this.parseTrue_r);if(this.char===CHAR_f)return this.consume(),this.next(this.parseFalse_a)}parseTrue_r(){if(this.char===CHAR_r)return this.consume(),this.next(this.parseTrue_u);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseTrue_u(){if(this.char===CHAR_u)return this.consume(),this.next(this.parseTrue_e);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseTrue_e(){if(this.char===CHAR_e)return this.return(!0);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_a(){if(this.char===CHAR_a)return this.consume(),this.next(this.parseFalse_l);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_l(){if(this.char===CHAR_l)return this.consume(),this.next(this.parseFalse_s);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_s(){if(this.char===CHAR_s)return this.consume(),this.next(this.parseFalse_e);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_e(){if(this.char===CHAR_e)return this.return(!1);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseInlineList(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M||this.char===CTRL_J)return null;if(this.char===$.END)throw this.error(new TomlError("Unterminated inline array"));return this.char===CHAR_NUM?this.call(this.parseComment):this.char===CHAR_RSQB?this.return(this.state.resultArr||InlineList()):this.callNow(this.parseValue,this.recordInlineListValue)}recordInlineListValue(et){return this.state.resultArr||(this.state.resultArr=InlineList(tomlType$1(et))),isFloat(et)||isInteger(et)?this.state.resultArr.push(et.valueOf()):this.state.resultArr.push(et),this.goto(this.parseInlineListNext)}parseInlineListNext(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M||this.char===CTRL_J)return null;if(this.char===CHAR_NUM)return this.call(this.parseComment);if(this.char===CHAR_COMMA)return this.next(this.parseInlineList);if(this.char===CHAR_RSQB)return this.goto(this.parseInlineList);throw this.error(new TomlError("Invalid character, expected whitespace, comma (,) or close bracket (])"))}parseInlineTable(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===$.END||this.char===CHAR_NUM||this.char===CTRL_J||this.char===CTRL_M)throw this.error(new TomlError("Unterminated inline array"));return this.char===CHAR_RCUB?this.return(this.state.resultTable||InlineTable()):(this.state.resultTable||(this.state.resultTable=InlineTable()),this.callNow(this.parseAssign,this.recordInlineTableValue))}recordInlineTableValue(et){let tt=this.state.resultTable,nt=et.key.pop();for(let rt of et.key){if(hasKey(tt,rt)&&(!isTable(tt[rt])||tt[rt][_declared]))throw this.error(new TomlError("Can't redefine existing key"));tt=tt[rt]=tt[rt]||Table$1()}if(hasKey(tt,nt))throw this.error(new TomlError("Can't redefine existing key"));return isInteger(et.value)||isFloat(et.value)?tt[nt]=et.value.valueOf():tt[nt]=et.value,this.goto(this.parseInlineTableNext)}parseInlineTableNext(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===$.END||this.char===CHAR_NUM||this.char===CTRL_J||this.char===CTRL_M)throw this.error(new TomlError("Unterminated inline array"));if(this.char===CHAR_COMMA)return this.next(this.parseInlineTablePostComma);if(this.char===CHAR_RCUB)return this.goto(this.parseInlineTable);throw this.error(new TomlError("Invalid character, expected whitespace, comma (,) or close bracket (])"))}parseInlineTablePostComma(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===$.END||this.char===CHAR_NUM||this.char===CTRL_J||this.char===CTRL_M)throw this.error(new TomlError("Unterminated inline array"));if(this.char===CHAR_COMMA)throw this.error(new TomlError("Empty elements in inline tables are not permitted"));if(this.char===CHAR_RCUB)throw this.error(new TomlError("Trailing commas in inline tables are not permitted"));return this.goto(this.parseInlineTable)}}return j}function prettyError($,j){if($.pos==null||$.line==null)return $;let _e=$.message;if(_e+=` at row ${$.line+1}, col ${$.col+1}, pos ${$.pos}:
`,j&&j.split){const et=j.split(/\n/),tt=String(Math.min(et.length,$.line+3)).length;let nt=" ";for(;nt.length<tt;)nt+=" ";for(let rt=Math.max(0,$.line-1);rt<Math.min(et.length,$.line+2);++rt){let ot=String(rt+1);if(ot.length<tt&&(ot=" "+ot),$.line===rt){_e+=ot+"> "+et[rt]+`
`,_e+=nt+"  ";for(let it=0;it<$.col;++it)_e+=" ";_e+=`^
`}else _e+=ot+": "+et[rt]+`
`}}return $.message=_e+`
`,$}function parseString($){global.Buffer&&global.Buffer.isBuffer($)&&($=$.toString("utf8"));const j=new TOMLParser;try{return j.parse($),j.finish()}catch(_e){throw prettyError(_e,$)}}function stringify$1($){if($===null)throw typeError("null");if($===void 0)throw typeError("undefined");if(typeof $!="object")throw typeError(typeof $);if(typeof $.toJSON=="function"&&($=$.toJSON()),$==null)return null;const j=tomlType($);if(j!=="table")throw typeError(j);return stringifyObject("","",$)}function typeError($){return new Error("Can only stringify objects, not "+$)}function getInlineKeys($){return Object.keys($).filter(j=>isInline($[j]))}function getComplexKeys($){return Object.keys($).filter(j=>!isInline($[j]))}function toJSON($){let j=Array.isArray($)?[]:Object.prototype.hasOwnProperty.call($,"__proto__")?{["__proto__"]:void 0}:{};for(let _e of Object.keys($))$[_e]&&typeof $[_e].toJSON=="function"&&!("toISOString"in $[_e])?j[_e]=$[_e].toJSON():j[_e]=$[_e];return j}function stringifyObject($,j,_e){_e=toJSON(_e);let et,tt;et=getInlineKeys(_e),tt=getComplexKeys(_e);const nt=[],rt=j||"";et.forEach(it=>{var at=tomlType(_e[it]);at!=="undefined"&&at!=="null"&&nt.push(rt+stringifyKey(it)+" = "+stringifyAnyInline(_e[it],!0))}),nt.length>0&&nt.push("");const ot=$&&et.length>0?j+"  ":"";return tt.forEach(it=>{nt.push(stringifyComplex($,ot,it,_e[it]))}),nt.join(`
`)}function isInline($){switch(tomlType($)){case"undefined":case"null":case"integer":case"nan":case"float":case"boolean":case"string":case"datetime":return!0;case"array":return $.length===0||tomlType($[0])!=="table";case"table":return Object.keys($).length===0;default:return!1}}function tomlType($){return $===void 0?"undefined":$===null?"null":typeof $=="bigint"||Number.isInteger($)&&!Object.is($,-0)?"integer":typeof $=="number"?"float":typeof $=="boolean"?"boolean":typeof $=="string"?"string":"toISOString"in $?isNaN($)?"undefined":"datetime":Array.isArray($)?"array":"table"}function stringifyKey($){const j=String($);return/^[-A-Za-z0-9_]+$/.test(j)?j:stringifyBasicString(j)}function stringifyBasicString($){return'"'+escapeString($).replace(/"/g,'\\"')+'"'}function stringifyLiteralString($){return"'"+$+"'"}function numpad($,j){for(;j.length<$;)j="0"+j;return j}function escapeString($){return $.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/([\u0000-\u001f\u007f])/,j=>"\\u"+numpad(4,j.codePointAt(0).toString(16)))}function stringifyMultilineString($){let j=$.split(/\n/).map(_e=>escapeString(_e).replace(/"(?="")/g,'\\"')).join(`
`);return j.slice(-1)==='"'&&(j+=`\\
`),`"""
`+j+'"""'}function stringifyAnyInline($,j){let _e=tomlType($);return _e==="string"&&(j&&/\n/.test($)?_e="string-multiline":!/[\b\t\n\f\r']/.test($)&&/"/.test($)&&(_e="string-literal")),stringifyInline($,_e)}function stringifyInline($,j){switch(j||(j=tomlType($)),j){case"string-multiline":return stringifyMultilineString($);case"string":return stringifyBasicString($);case"string-literal":return stringifyLiteralString($);case"integer":return stringifyInteger($);case"float":return stringifyFloat($);case"boolean":return stringifyBoolean($);case"datetime":return stringifyDatetime($);case"array":return stringifyInlineArray($.filter(_e=>tomlType(_e)!=="null"&&tomlType(_e)!=="undefined"&&tomlType(_e)!=="nan"));case"table":return stringifyInlineTable($);default:throw typeError(j)}}function stringifyInteger($){return String($).replace(/\B(?=(\d{3})+(?!\d))/g,"_")}function stringifyFloat($){if($===1/0)return"inf";if($===-1/0)return"-inf";if(Object.is($,NaN))return"nan";if(Object.is($,-0))return"-0.0";const[j,_e]=String($).split(".");return stringifyInteger(j)+"."+_e}function stringifyBoolean($){return String($)}function stringifyDatetime($){return $.toISOString()}function stringifyInlineArray($){$=toJSON($);let j="[";const _e=$.map(et=>stringifyInline(et));return _e.join(", ").length>60||/\n/.test(_e)?j+=`
  `+_e.join(`,
  `)+`
`:j+=" "+_e.join(", ")+(_e.length>0?" ":""),j+"]"}function stringifyInlineTable($){$=toJSON($);const j=[];return Object.keys($).forEach(_e=>{j.push(stringifyKey(_e)+" = "+stringifyAnyInline($[_e],!1))}),"{ "+j.join(", ")+(j.length>0?" ":"")+"}"}function stringifyComplex($,j,_e,et){const tt=tomlType(et);if(tt==="array")return stringifyArrayOfTables($,j,_e,et);if(tt==="table")return stringifyComplexTable($,j,_e,et);throw typeError(tt)}function stringifyArrayOfTables($,j,_e,et){et=toJSON(et);const tt=tomlType(et[0]);if(tt!=="table")throw typeError(tt);const nt=$+stringifyKey(_e);let rt="";return et.forEach(ot=>{rt.length>0&&(rt+=`
`),rt+=j+"[["+nt+`]]
`,rt+=stringifyObject(nt+".",j,ot)}),rt}function stringifyComplexTable($,j,_e,et){const tt=$+stringifyKey(_e);let nt="";return getInlineKeys(et).length>0&&(nt+=j+"["+tt+`]
`),nt+stringifyObject(tt+".",j,et)}const parse$1=parseString,stringify=stringify$1;function parseToml($){return $=$.replaceAll(/\r/gi,`
`),parse$1($)}const scriptRel="modulepreload",assetsURL=function($,j){return new URL($,j).href},seen={},__vitePreload=function $(j,_e,et){let tt=Promise.resolve();if(_e&&_e.length>0){const rt=document.getElementsByTagName("link"),ot=document.querySelector("meta[property=csp-nonce]"),it=(ot==null?void 0:ot.nonce)||(ot==null?void 0:ot.getAttribute("nonce"));tt=Promise.allSettled(_e.map(at=>{if(at=assetsURL(at,et),at in seen)return;seen[at]=!0;const dt=at.endsWith(".css"),st=dt?'[rel="stylesheet"]':"";if(!!et)for(let pt=rt.length-1;pt>=0;pt--){const gt=rt[pt];if(gt.href===at&&(!dt||gt.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${at}"]${st}`))return;const ft=document.createElement("link");if(ft.rel=dt?"stylesheet":scriptRel,dt||(ft.as="script"),ft.crossOrigin="",ft.href=at,it&&ft.setAttribute("nonce",it),document.head.appendChild(ft),dt)return new Promise((pt,gt)=>{ft.addEventListener("load",pt),ft.addEventListener("error",()=>gt(new Error(`Unable to preload CSS for ${at}`)))})}))}function nt(rt){const ot=new Event("vite:preloadError",{cancelable:!0});if(ot.payload=rt,window.dispatchEvent(ot),!ot.defaultPrevented)throw rt}return tt.then(rt=>{for(const ot of rt||[])ot.status==="rejected"&&nt(ot.reason);return j().catch(nt)})};var t$2,e$1;(function($){$[$.ACTS=0]="ACTS",$[$.OBJS=1]="OBJS",$[$.STAT=2]="STAT",$[$.INPUT=3]="INPUT"})(t$2||(t$2={})),function($){$[$.DEBUG=0]="DEBUG",$[$.ISPLAYINGFILE=1]="ISPLAYINGFILE",$[$.PLAYFILE=2]="PLAYFILE",$[$.CLOSEFILE=3]="CLOSEFILE",$[$.SHOWIMAGE=4]="SHOWIMAGE",$[$.SHOWWINDOW=5]="SHOWWINDOW",$[$.SHOWMENU=6]="SHOWMENU",$[$.SHOWMSGSTR=7]="SHOWMSGSTR",$[$.REFRESHINT=8]="REFRESHINT",$[$.SETTIMER=9]="SETTIMER",$[$.SETINPUTSTRTEXT=10]="SETINPUTSTRTEXT",$[$.SYSTEM=11]="SYSTEM",$[$.OPENGAME=12]="OPENGAME",$[$.OPENGAMESTATUS=13]="OPENGAMESTATUS",$[$.SAVEGAMESTATUS=14]="SAVEGAMESTATUS",$[$.SLEEP=15]="SLEEP",$[$.GETMSCOUNT=16]="GETMSCOUNT",$[$.INPUTBOX=17]="INPUTBOX",$[$.VERSION=18]="VERSION",$[$.DUMMY=19]="DUMMY"}(e$1||(e$1={}));const i=4;function s$1($){return $._malloc(i)}function n$2($,j){return g($,j)}function o$1($,j=1){return $+i*j}function r$2($,j){$._free(j)}function a($,j){return g($,j)}function h($,j){const _e=n$2($,j);return _e?function(et,tt,nt){let rt=0;const ot=[];for(;!(rt>=nt/4);){const it=et.HEAP32[tt+4*rt>>2];if(it==0)break;if(++rt,it>=65536){const at=it-65536;ot.push(String.fromCharCode(55296|at>>10,56320|1023&at))}else ot.push(String.fromCharCode(it))}return ot.join("")}($,_e,n$2($,o$1(j))-_e):""}function l($,j){const _e=function(tt){let nt=0;for(let rt=0;rt<tt.length;++rt){const ot=tt.charCodeAt(rt);ot>=55296&&ot<=57343&&++rt,nt+=4}return nt}(j),et=$._malloc(_e+4);return _$1($,j,et,_e+4),et}function u($,j){const _e=function(tt){return tt._malloc(2*i)}($);j(_e);const et=h($,_e);return r$2($,_e),et}function c($,j,_e){const et=l($,j);_e(et),$._free(et)}function d($,j){const _e=s$1($),et=j(_e),tt=f($,et,a($,_e));return $._freeItemsList(et),r$2($,_e),tt}function m($,j){const _e=s$1($),et=j(_e),tt=function(nt,rt,ot){const it=[];let at=rt;for(let dt=0;dt<ot;++dt){const st=h(nt,at);at=o$1(at,2),it.push(st)}return it}($,et,a($,_e));return $._freeStringsBuffer(et),r$2($,_e),tt}function S($,j,_e){const et=new Uint8Array(j),tt=$._malloc(et.length);$.HEAPU8.set(et,tt),_e(tt,et.length),$._free(tt)}function f($,j,_e){const et=[];let tt=j;for(let nt=0;nt<_e;nt++){const rt=h($,tt);tt=o$1(tt,2);const ot=h($,tt);tt=o$1(tt,2),et.push({name:ot,image:rt})}return et}function E($,j){return $.Asyncify.handleSleep(_e=>{j(et=>_e(et||0))})}function g($,j){return $.HEAP32[j>>2]}function _$1($,j,_e,et=2147483647){if(et<4)return 0;const tt=_e,nt=tt+et-4;for(let rt=0;rt<j.length;++rt){let ot=j.charCodeAt(rt);if(ot>=55296&&ot<=57343&&(ot=65536+((1023&ot)<<10)|1023&j.charCodeAt(++rt)),$.HEAP32[_e>>2]=ot,(_e+=4)+4>nt)break}return $.HEAP32[_e>>2]=0,_e-tt}const T=0,b=1,I=2,A=5;function C($,j,_e){const et=function(nt){return nt._malloc(3*i)}($);_e(et);const tt=M($,et,j);return r$2($,et),tt}function M($,j,_e){switch(function(tt,nt){return tt.HEAP8[nt]}($,o$1(j,2))){case T:return _e?_e.startsWith("%")?p($,j):_e.startsWith("$")?"":0:p($,j);case b:return _e?_e.startsWith("%")?[]:_e.startsWith("$")?"":g($,j):g($,j);case I:return _e?_e.startsWith("%")?[]:_e.startsWith("$")?h($,j):0:h($,j);case A:if(_e)return _e.startsWith("%")?[]:_e.startsWith("$")?"":0}return""}function p($,j){const _e=[],et=n$2($,j),tt=g($,o$1(j));for(let nt=0;nt<tt;++nt)_e.push(M($,o$1(et,3*nt)));return _e}class O{constructor(j){this.module=j,this.listeners=new Map,this.variableWatchers=new Set,this.variableValues=new Map,this.time=Date.now(),this.staticStrings=new Map,this.onError=()=>{const _e=function(tt){return tt._malloc(10*i)}(this.module);this.module._getLastError(_e);const et=function(tt,nt){return{errorCode:g(tt,nt),description:h(tt,o$1(nt)),location:h(tt,o$1(nt,3)),actionIndex:g(tt,o$1(nt,5)),line:g(tt,o$1(nt,6)),localLine:g(tt,o$1(nt,7)),lineSrc:h(tt,o$1(nt,8))}}(this.module,_e);et.errorCode>0&&this.emit("error",et),this.module._free(_e)},this.onRefresh=_e=>{if(_e||this.module._isMainDescChanged()){const et=u(this.module,tt=>this.module._getMainDesc(tt));this.emit("main_changed",et)}if(_e||this.module._isVarsDescChanged()){const et=u(this.module,tt=>this.module._getVarsDesc(tt));this.emit("stats_changed",et)}if(_e||this.module._isActionsChanged()){const et=d(this.module,tt=>this.module._getActions(tt));this.emit("actions_changed",et)}if(_e||this.module._isObjectsChanged()){const et=d(this.module,tt=>this.module._getObjects(tt));this.emit("objects_changed",et)}setTimeout(()=>this.reportWatched(),0)},this.onShowWindow=(_e,et)=>{this.emit("panel_visibility",_e,et)},this.onMenu=(_e,et)=>{const tt=f(this.module,_e,et);return E(this.module,nt=>{this.emit("menu",tt,rt=>{nt(rt)})})},this.onMsg=_e=>{const et=h(this.module,_e);return E(this.module,tt=>{this.emit("msg",et,()=>{tt()})})},this.onInput=(_e,et,tt)=>{const nt=h(this.module,_e);return E(this.module,rt=>{this.emit("input",nt,ot=>{_$1(this.module,ot,et,tt),rt()})})},this.onVersion=(_e,et,tt)=>{const nt=h(this.module,_e);return E(this.module,rt=>{this.emit("version",nt,ot=>{_$1(this.module,ot,et,tt),rt()})})},this.onWait=_e=>E(this.module,et=>{this.emit("wait",_e,()=>{et()})}),this.onSetTimer=_e=>{this.emit("timer",_e)},this.onSetUserInput=_e=>{const et=h(this.module,_e);this.emit("user_input",et)},this.onView=_e=>{const et=h(this.module,_e);this.emit("view",et)},this.onDebug=_e=>{const et=h(this.module,_e),tt=s$1(this.module),nt=s$1(this.module),rt=u(this.module,at=>this.module._getCurStateData(at,tt,nt)),ot=n$2(this.module,nt);this.module._free(nt);const it=n$2(this.module,tt);return this.module._free(tt),E(this.module,at=>{this.emit("debug",{code:et,loc:rt,line:ot,actIndex:it},at)})},this.onSystemCmd=_e=>{this.onRefresh(!1);const et=h(this.module,_e);this.emit("system_cmd",et)},this.onGetMS=()=>{const _e=Date.now()-this.time;return this.time=Date.now(),_e},this.onOpenGame=(_e,et)=>{const tt=h(this.module,_e);return E(this.module,nt=>{this.emit("open_game",tt,et,()=>{nt()})})},this.onOpenGameStatus=_e=>{const et=h(this.module,_e);return E(this.module,tt=>{this.emit("load_save",et,()=>{tt()})})},this.onSaveGameStatus=_e=>{const et=h(this.module,_e);return E(this.module,tt=>{this.emit("save_game",et,()=>{tt()})})},this.onIsPlay=_e=>{const et=h(this.module,_e);return E(this.module,tt=>{this.emit("is_play",et,nt=>{tt(nt?1:0)})})},this.onPlayFile=(_e,et)=>{const tt=h(this.module,_e);return E(this.module,nt=>{this.emit("play_file",tt,et,()=>{nt()})})},this.onCloseFile=_e=>{const et=h(this.module,_e);return E(this.module,tt=>{this.emit("close_file",et,()=>{tt()})})},this.init()}on(j,_e){var et;const tt=(et=this.listeners.get(j))!==null&&et!==void 0?et:[];tt.push(_e),this.listeners.set(j,tt)}off(j,_e){var et;let tt=(et=this.listeners.get(j))!==null&&et!==void 0?et:[];tt=tt.filter(nt=>nt!==_e),tt.length?this.listeners.set(j,tt):this.listeners.delete(j)}watchVariable(j,_e){let et=this.readVariable(j);_e(et);const tt=()=>{const nt=this.readVariable(j);et!==nt&&(et=nt,_e(et))};return this.variableWatchers.add(tt),()=>{this.variableWatchers.delete(tt)}}watchVariableByIndex(j,_e,et){let tt=this.readVariableByIndex(j,_e);et(tt);const nt=()=>{const rt=this.readVariableByIndex(j,_e);tt!==rt&&(tt=rt,et(tt))};return this.variableWatchers.add(nt),()=>{this.variableWatchers.delete(nt)}}watchVariableByKey(j,_e,et){let tt=this.readVariableByKey(j,_e);et(tt);const nt=()=>{const rt=this.readVariableByKey(j,_e);tt!==rt&&(tt=rt,et(tt))};return this.variableWatchers.add(nt),()=>{this.variableWatchers.delete(nt)}}emit(j,..._e){var et;console.log({event:j,args:_e});const tt=(et=this.listeners.get(j))!==null&&et!==void 0?et:[];for(const nt of tt)nt(..._e)}openGame(j,_e){_e&&this._cleanup(),S(this.module,j,(et,tt)=>this.module._loadGameData(et,tt,_e?1:0))}saveGame(){return function(_e,et){const tt=s$1(_e),nt=et(tt),rt=g(_e,tt);if(!rt)return r$2(_e,tt),null;const ot=_e.HEAPU8.slice(nt,nt+rt);return _e._freeSaveBuffer(nt),r$2(_e,tt),ot.buffer}(this.module,_e=>this.module._saveGameData(_e))||(this.onError(),null)}loadSave(j){S(this.module,j,(_e,et)=>this.module._loadSavedGameData(_e,et))}restartGame(){this.time=Date.now(),this.module._restartGame()}selectAction(j){this.module._selectAction(j)}execSelectedAction(){this.module._executeSelAction()}selectObject(j){this.module._selectObject(j)}version(){return u(this.module,j=>this.module._getVersion(j))}getStaticStringPointer(j){const _e=j.toLocaleUpperCase(),et=this.staticStrings.get(_e);if(et)return et;const tt=l(this.module,j);return this.staticStrings.set(_e,tt),tt}readVariable(j,_e=!1){const et=j.toUpperCase(),tt=`${et}[0]`;if(_e&&this.variableValues.has(tt))return this.variableValues.get(tt);const nt=this.getStaticStringPointer(et),rt=C(this.module,j,ot=>this.module._getVarValue(nt,ot));return this.variableValues.set(tt,rt),rt}readVariableByIndex(j,_e,et=!1){const tt=j.toUpperCase(),nt=`${tt}[${_e}]`;if(et&&this.variableValues.has(nt))return this.variableValues.get(nt);const rt=this.getStaticStringPointer(tt),ot=C(this.module,j,it=>this.module._getVarValueByIndex(rt,_e,it));return this.variableValues.set(nt,ot),ot}readVariableByKey(j,_e,et=!1){const tt=j.toUpperCase(),nt=`${tt}["${_e}"]`;if(et&&this.variableValues.has(nt))return this.variableValues.get(nt);const rt=this.getStaticStringPointer(tt),ot=this.getStaticStringPointer(_e),it=C(this.module,j,at=>this.module._getVarValueByKey(rt,ot,at));return this.variableValues.set(nt,it),it}readVariableSize(j){const _e=this.getStaticStringPointer(j.toLocaleUpperCase());return this.module._getVarSize(_e)}execCode(j,_e=!0){c(this.module,j,et=>this.module._execString(et,_e?1:0))}execCounter(){this.module._execCounter()}execLoc(j){c(this.module,j,_e=>this.module._execLoc(_e))}updateUserInput(j){c(this.module,j,_e=>this.module._execUserInput(_e))}enableDebugMode(){this.module._enableDebugMode()}disableDebugMode(){this.module._disableDebugMode()}getLocationsList(){return m(this.module,j=>this.module._getLocationsList(j))}getLocationCode(j){const _e=this.getStaticStringPointer(j);return m(this.module,et=>this.module._getLocationCode(_e,et))}getActionCode(j,_e){const et=this.getStaticStringPointer(j);return m(this.module,tt=>this.module._getActionCode(et,_e,tt))}init(){this.module._init(),this.registerCallbacks()}registerCallbacks(){this.module._setErrorCallback(this.module.addFunction(this.onError,"i"));const j=[[e$1.REFRESHINT,this.onRefresh,"ii"],[e$1.SHOWWINDOW,this.onShowWindow,"iii"],[e$1.SHOWMENU,this.onMenu,"iii"],[e$1.SHOWMSGSTR,this.onMsg,"ii"],[e$1.INPUTBOX,this.onInput,"iiii"],[e$1.SLEEP,this.onWait,"ii"],[e$1.SETTIMER,this.onSetTimer,"ii"],[e$1.SETINPUTSTRTEXT,this.onSetUserInput,"ii"],[e$1.SHOWIMAGE,this.onView,"ii"],[e$1.DEBUG,this.onDebug,"ii"],[e$1.GETMSCOUNT,this.onGetMS,"i"],[e$1.OPENGAME,this.onOpenGame,"iii"],[e$1.OPENGAMESTATUS,this.onOpenGameStatus,"ii"],[e$1.SAVEGAMESTATUS,this.onSaveGameStatus,"ii"],[e$1.ISPLAYINGFILE,this.onIsPlay,"ii"],[e$1.PLAYFILE,this.onPlayFile,"iii"],[e$1.CLOSEFILE,this.onCloseFile,"ii"],[e$1.SYSTEM,this.onSystemCmd,"ii"],[e$1.VERSION,this.onVersion,"iiii"]];for(const[_e,et,tt]of j)this.registerCallback(_e,et,tt)}registerCallback(j,_e,et){this.module._setCallback(j,this.module.addFunction(_e,et))}clearCache(){this.variableValues.clear()}_run_checks(){this.module.__run_checks()}_cleanup(){this.clearCache(),this.variableWatchers.clear();for(const j of this.staticStrings.values())this.module._free(j);this.staticStrings.clear()}reportWatched(){this.clearCache();for(const j of this.variableWatchers.values())j()}toJSON(){return"[QSP API]"}}var t$1,r$1=(t$1=import.meta.url,async function($={}){var j,_e,et=$,tt=new Promise(($t,Gt)=>{j=$t,_e=Gt}),nt=typeof window=="object",rt=typeof importScripts=="function",ot=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ot){const{createRequire:$t}=await __vitePreload(()=>import("./__vite-browser-external-D7Ct-6yo.js").then(Gt=>Gt._),[],import.meta.url);var it=$t(import.meta.url)}var at,dt,st=Object.assign({},et),ut="./this.program",ft=($t,Gt)=>{throw Gt},pt="";if(ot){var gt=it("fs"),yt=it("path");pt=it("url").fileURLToPath(new URL("./",import.meta.url)),dt=$t=>($t=on($t)?new URL($t):yt.normalize($t),gt.readFileSync($t)),at=($t,Gt=!0)=>($t=on($t)?new URL($t):yt.normalize($t),new Promise((hn,yn)=>{gt.readFile($t,Gt?void 0:"utf8",(Dn,Tn)=>{Dn?yn(Dn):hn(Gt?Tn.buffer:Tn)})})),!et.thisProgram&&process.argv.length>1&&(ut=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),ft=($t,Gt)=>{throw process.exitCode=$t,Gt}}else(nt||rt)&&(rt?pt=self.location.href:typeof document<"u"&&document.currentScript&&(pt=document.currentScript.src),t$1&&(pt=t$1),pt=pt.startsWith("blob:")?"":pt.substr(0,pt.replace(/[?#].*/,"").lastIndexOf("/")+1),rt&&(dt=$t=>{var Gt=new XMLHttpRequest;return Gt.open("GET",$t,!1),Gt.responseType="arraybuffer",Gt.send(null),new Uint8Array(Gt.response)}),at=$t=>on($t)?new Promise((Gt,hn)=>{var yn=new XMLHttpRequest;yn.open("GET",$t,!0),yn.responseType="arraybuffer",yn.onload=()=>{yn.status==200||yn.status==0&&yn.response?Gt(yn.response):hn(yn.status)},yn.onerror=hn,yn.send(null)}):fetch($t,{credentials:"same-origin"}).then(Gt=>Gt.ok?Gt.arrayBuffer():Promise.reject(new Error(Gt.status+" : "+Gt.url))));et.print||console.log.bind(console);var mt=et.printErr||console.error.bind(console);Object.assign(et,st),st=null,et.arguments&&et.arguments,et.thisProgram&&(ut=et.thisProgram);var vt,_t,St,At,kt,bt,Rt=et.wasmBinary,Ot=!1;function Ut(){var $t=vt.buffer;et.HEAP8=St=new Int8Array($t),et.HEAP16=new Int16Array($t),et.HEAPU8=At=new Uint8Array($t),et.HEAPU16=new Uint16Array($t),et.HEAP32=kt=new Int32Array($t),et.HEAPU32=bt=new Uint32Array($t),et.HEAPF32=new Float32Array($t),et.HEAPF64=new Float64Array($t)}function Yt(){if(!Ot){var $t=fr();$t==0&&($t+=4);var Gt=bt[$t>>2],hn=bt[$t+4>>2];Gt==34821223&&hn==2310721022||un(`Stack overflow! Stack cookie has been overwritten at ${en($t)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${en(hn)} ${en(Gt)}`),bt[0]!=1668509029&&un("Runtime error: The application has corrupted its heap memory area (address zero)!")}}var rn=[],mn=[],qt=[],Zt=0,Jt=null;function un($t){var hn;(hn=et.onAbort)==null||hn.call(et,$t),mt($t="Aborted("+$t+")"),Ot=!0,_t=1,$t+=". Build with -sASSERTIONS for more info.";var Gt=new WebAssembly.RuntimeError($t);throw _e(Gt),Gt}var Wt,Qt=$t=>$t.startsWith("data:application/octet-stream;base64,"),on=$t=>$t.startsWith("file://");function nn(){if(et.locateFile){var $t="qsp-engine.wasm";return Qt($t)?$t:(Gt=$t,et.locateFile?et.locateFile(Gt,pt):pt+Gt)}var Gt;return new URL(""+new URL("qsp-engine-KgPHYqd2.wasm",import.meta.url).href,import.meta.url).href}function cn($t){if($t==Wt&&Rt)return new Uint8Array(Rt);if(dt)return dt($t);throw"both async and sync fetching of the wasm failed"}function Sn($t,Gt,hn){return function(yn){return Rt?Promise.resolve().then(()=>cn(yn)):at(yn).then(Dn=>new Uint8Array(Dn),()=>cn(yn))}($t).then(yn=>WebAssembly.instantiate(yn,Gt)).then(hn,yn=>{mt(`failed to asynchronously prepare wasm: ${yn}`),un(yn)})}function vn($t){this.name="ExitStatus",this.message=`Program terminated with exit(${$t})`,this.status=$t}var En,Rn,tn=$t=>{for(;$t.length>0;)$t.shift()(et)},Cn=et.noExitRuntime||!0,en=$t=>"0x"+($t>>>=0).toString(16).padStart(8,"0"),An=()=>{var $t=yr(),Gt=fr();_n($t,Gt)},Nn=$t=>{var Gt=($t-vt.buffer.byteLength+65535)/65536;try{return vt.grow(Gt),Ut(),1}catch{}},xn={},Bn=()=>{if(!Bn.strings){var $t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:ut||"./this.program"};for(var Gt in xn)xn[Gt]===void 0?delete $t[Gt]:$t[Gt]=xn[Gt];var hn=[];for(var Gt in $t)hn.push(`${Gt}=${$t[Gt]}`);Bn.strings=hn}return Bn.strings},Gn=$t=>{try{return $t()}catch(Gt){un(Gt)}},Qn=$t=>{if($t instanceof vn||$t=="unwind")return _t;Yt(),$t instanceof WebAssembly.RuntimeError&&rr()<=0&&mt("Stack overflow detected.  You can try increasing -sSTACK_SIZE (currently set to 5242880)"),ft(1,$t)},sr=()=>Cn||!1,cr=($t,Gt)=>{var yn;var hn;_t=$t,_t=hn=$t,sr()||((yn=et.onExit)==null||yn.call(et,hn),Ot=!0),ft(hn,new vn(hn))},qr=$t=>{if(!Ot)try{$t(),(()=>{if(!sr())try{cr(_t)}catch(Gt){Qn(Gt)}})()}catch(Gt){Qn(Gt)}},bn={instrumentWasmImports($t){var Gt=/^(invoke_.*|__asyncjs__.*)$/;for(let[hn,yn]of Object.entries($t))typeof yn=="function"&&(yn.isAsync||Gt.test(hn))},instrumentWasmExports($t){var Gt={};for(let[hn,yn]of Object.entries($t))Gt[hn]=typeof yn=="function"?(...Dn)=>{bn.exportCallStack.push(hn);try{return yn(...Dn)}finally{Ot||(bn.exportCallStack.pop(),bn.maybeStopUnwind())}}:yn;return Gt},State:{Normal:0,Unwinding:1,Rewinding:2,Disabled:3},state:0,StackSize:16384,currData:null,handleSleepReturnValue:0,exportCallStack:[],callStackNameToId:{},callStackIdToName:{},callStackId:0,asyncPromiseHandlers:null,sleepCallbacks:[],getCallStackId($t){var Gt=bn.callStackNameToId[$t];return Gt===void 0&&(Gt=bn.callStackId++,bn.callStackNameToId[$t]=Gt,bn.callStackIdToName[Gt]=$t),Gt},maybeStopUnwind(){bn.currData&&bn.state===bn.State.Unwinding&&bn.exportCallStack.length===0&&(bn.state=bn.State.Normal,Gn(ar),typeof Fibers<"u"&&Fibers.trampoline())},whenDone:()=>new Promise(($t,Gt)=>{bn.asyncPromiseHandlers={resolve:$t,reject:Gt}}),allocateData(){var $t=xr(12+bn.StackSize);return bn.setDataHeader($t,$t+12,bn.StackSize),bn.setDataRewindFunc($t),$t},setDataHeader($t,Gt,hn){bt[$t>>2]=Gt,bt[$t+4>>2]=Gt+hn},setDataRewindFunc($t){var Gt=bn.exportCallStack[0],hn=bn.getCallStackId(Gt);kt[$t+8>>2]=hn},getDataRewindFuncName($t){var Gt=kt[$t+8>>2];return bn.callStackIdToName[Gt]},getDataRewindFunc:$t=>wn[$t],doRewind($t){var Gt=bn.getDataRewindFuncName($t);return bn.getDataRewindFunc(Gt)()},handleSleep($t){if(!Ot){if(bn.state===bn.State.Normal){var Gt=!1,hn=!1;$t((yn=0)=>{if(!Ot&&(bn.handleSleepReturnValue=yn,Gt=!0,hn)){bn.state=bn.State.Rewinding,Gn(()=>Pr(bn.currData)),typeof Browser<"u"&&Browser.mainLoop.func&&Browser.mainLoop.resume();var Dn,Tn=!1;try{Dn=bn.doRewind(bn.currData)}catch(qn){Dn=qn,Tn=!0}var In=!1;if(!bn.currData){var Hn=bn.asyncPromiseHandlers;Hn&&(bn.asyncPromiseHandlers=null,(Tn?Hn.reject:Hn.resolve)(Dn),In=!0)}if(Tn&&!In)throw Dn}}),hn=!0,Gt||(bn.state=bn.State.Unwinding,bn.currData=bn.allocateData(),typeof Browser<"u"&&Browser.mainLoop.func&&Browser.mainLoop.pause(),Gn(()=>Er(bn.currData)))}else bn.state===bn.State.Rewinding?(bn.state=bn.State.Normal,Gn(gn),Lr(bn.currData),bn.currData=null,bn.sleepCallbacks.forEach(qr)):un(`invalid state: ${bn.state}`);return bn.handleSleepReturnValue}},handleAsync:$t=>bn.handleSleep(Gt=>{$t().then(Gt)})},Mr=($t,Gt)=>{$t<128?Gt.push($t):Gt.push($t%128|128,$t>>7)},tr=($t,Gt)=>{if(typeof WebAssembly.Function=="function")return new WebAssembly.Function((Tn=>{for(var In={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},Hn={parameters:[],results:Tn[0]=="v"?[]:[In[Tn[0]]]},qn=1;qn<Tn.length;++qn)Hn.parameters.push(In[Tn[qn]]);return Hn})(Gt),$t);var hn=[1];((Tn,In)=>{var Hn=Tn.slice(0,1),qn=Tn.slice(1),Fn={i:127,p:127,j:126,f:125,d:124,e:111};In.push(96),Mr(qn.length,In);for(var Vn=0;Vn<qn.length;++Vn)In.push(Fn[qn[Vn]]);Hn=="v"?In.push(0):In.push(1,Fn[Hn])})(Gt,hn);var yn=[0,97,115,109,1,0,0,0,1];Mr(hn.length,yn),yn.push(...hn),yn.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var Dn=new WebAssembly.Module(new Uint8Array(yn));return new WebAssembly.Instance(Dn,{e:{f:$t}}).exports.f},gr=[],Ar=$t=>(Rn||(Rn=new WeakMap,((Gt,hn)=>{if(Rn)for(var yn=Gt;yn<Gt+hn;yn++){var Dn=(In=void 0,(In=gr[Tn=yn])||(Tn>=gr.length&&(gr.length=Tn+1),gr[Tn]=In=En.get(Tn)),In);Dn&&Rn.set(Dn,yn)}var Tn,In})(0,En.length)),Rn.get($t)||0),Wr=[],vr=($t,Gt)=>{En.set($t,Gt),gr[$t]=En.get($t)},Tr={a:$t=>{var Gt=yr(),hn=fr();un(`stack overflow (Attempt to set SP to ${en($t)}, with stack limits [${en(hn)} - ${en(Gt)}]). If you require more stack space build with -sSTACK_SIZE=<bytes>`)},f:($t,Gt,hn)=>At.copyWithin($t,Gt,Gt+hn),e:()=>Date.now(),b:$t=>{var Gt,hn,yn=At.length,Dn=2147483648;if(($t>>>=0)>Dn)return!1;for(var Tn=1;Tn<=4;Tn*=2){var In=yn*(1+.2/Tn);In=Math.min(In,$t+100663296);var Hn=Math.min(Dn,(Gt=Math.max($t,In),hn=65536,Math.ceil(Gt/hn)*hn));if(Nn(Hn))return!0}return!1},c:($t,Gt)=>{var hn=0;return Bn().forEach((yn,Dn)=>{var Tn=Gt+hn;bt[$t+4*Dn>>2]=Tn,((In,Hn)=>{for(var qn=0;qn<In.length;++qn)St[Hn++]=In.charCodeAt(qn);St[Hn]=0})(yn,Tn),hn+=yn.length+1}),0},d:($t,Gt)=>{var hn=Bn();bt[$t>>2]=hn.length;var yn=0;return hn.forEach(Dn=>yn+=Dn.length+1),bt[Gt>>2]=yn,0}},wn=function(){var In;var $t,Gt,hn,yn,Dn={a:Tr};function Tn(Hn,qn){var Fn;return wn=Hn.exports,wn=bn.instrumentWasmExports(wn),vt=wn.g,Ut(),En=wn.n,Fn=wn.h,mn.unshift(Fn),function(){var oo;if(Zt--,(oo=et.monitorRunDependencies)==null||oo.call(et,Zt),Zt==0&&Jt){var Vn=Jt;Jt=null,Vn()}}(),wn}if(Zt++,(In=et.monitorRunDependencies)==null||In.call(et,Zt),et.instantiateWasm)try{return et.instantiateWasm(Dn,Tn)}catch(Hn){mt(`Module.instantiateWasm callback failed with error: ${Hn}`),_e(Hn)}return Wt||(Wt=nn()),($t=Rt,Gt=Wt,hn=Dn,yn=function(Hn){Tn(Hn.instance)},$t||typeof WebAssembly.instantiateStreaming!="function"||Qt(Gt)||on(Gt)||ot||typeof fetch!="function"?Sn(Gt,hn,yn):fetch(Gt,{credentials:"same-origin"}).then(Hn=>WebAssembly.instantiateStreaming(Hn,hn).then(yn,function(qn){return mt(`wasm streaming compile failed: ${qn}`),mt("falling back to ArrayBuffer instantiation"),Sn(Gt,hn,yn)}))).catch(_e),{}}();et.___asan_default_options=()=>(et.___asan_default_options=wn.i)(),et._init=()=>(et._init=wn.j)(),et._dispose=()=>(et._dispose=wn.k)(),et._getVersion=$t=>(et._getVersion=wn.l)($t),et._setErrorCallback=$t=>(et._setErrorCallback=wn.m)($t),et._getMainDesc=$t=>(et._getMainDesc=wn.o)($t),et._isMainDescChanged=()=>(et._isMainDescChanged=wn.p)(),et._getVarsDesc=$t=>(et._getVarsDesc=wn.q)($t),et._isVarsDescChanged=()=>(et._isVarsDescChanged=wn.r)(),et._getActions=$t=>(et._getActions=wn.s)($t);var xr=et._malloc=$t=>(xr=et._malloc=wn.t)($t);et._selectAction=$t=>(et._selectAction=wn.u)($t),et._executeSelAction=()=>(et._executeSelAction=wn.v)(),et._isActionsChanged=()=>(et._isActionsChanged=wn.w)(),et._getObjects=$t=>(et._getObjects=wn.x)($t),et._selectObject=$t=>(et._selectObject=wn.y)($t),et._isObjectsChanged=()=>(et._isObjectsChanged=wn.z)(),et._loadGameData=($t,Gt,hn)=>(et._loadGameData=wn.A)($t,Gt,hn),et._restartGame=()=>(et._restartGame=wn.B)(),et._saveGameData=$t=>(et._saveGameData=wn.C)($t);var Lr=et._free=$t=>(Lr=et._free=wn.D)($t);et._loadSavedGameData=($t,Gt)=>(et._loadSavedGameData=wn.E)($t,Gt),et._execString=($t,Gt)=>(et._execString=wn.F)($t,Gt),et._execCounter=()=>(et._execCounter=wn.G)(),et._execLoc=$t=>(et._execLoc=wn.H)($t),et._execUserInput=$t=>(et._execUserInput=wn.I)($t),et._getLastError=$t=>(et._getLastError=wn.J)($t),et._getVarValue=($t,Gt)=>(et._getVarValue=wn.K)($t,Gt),et._getVarValueByIndex=($t,Gt,hn)=>(et._getVarValueByIndex=wn.L)($t,Gt,hn),et._getVarValueByKey=($t,Gt,hn)=>(et._getVarValueByKey=wn.M)($t,Gt,hn),et._getVarSize=$t=>(et._getVarSize=wn.N)($t),et._setCallback=($t,Gt)=>(et._setCallback=wn.O)($t,Gt),et._freeItemsList=$t=>(et._freeItemsList=wn.P)($t),et._freeSaveBuffer=$t=>(et._freeSaveBuffer=wn.Q)($t),et._freeStringsBuffer=$t=>(et._freeStringsBuffer=wn.R)($t),et._enableDebugMode=()=>(et._enableDebugMode=wn.S)(),et._disableDebugMode=()=>(et._disableDebugMode=wn.T)(),et._getCurStateData=($t,Gt,hn)=>(et._getCurStateData=wn.U)($t,Gt,hn),et.__run_checks=()=>(et.__run_checks=wn.V)();var dr,ir=()=>(ir=wn.W)(),yr=()=>(yr=wn.X)(),fr=()=>(fr=wn.Y)(),rr=()=>(rr=wn.Z)(),_n=et.___set_stack_limits=($t,Gt)=>(_n=et.___set_stack_limits=wn._)($t,Gt),Er=$t=>(Er=wn.$)($t),ar=()=>(ar=wn.aa)(),Pr=$t=>(Pr=wn.ba)($t),gn=()=>(gn=wn.ca)();function zr(){var $t;ir(),($t=fr())==0&&($t+=4),bt[$t>>2]=34821223,bt[$t+4>>2]=2310721022,bt[0]=1668509029}function Kr(){function $t(){var Gt;dr||(dr=!0,et.calledRun=!0,Ot||(Yt(),An(),tn(mn),j(et),(Gt=et.onRuntimeInitialized)==null||Gt.call(et),function(){if(Yt(),et.postRun)for(typeof et.postRun=="function"&&(et.postRun=[et.postRun]);et.postRun.length;)hn=et.postRun.shift(),qt.unshift(hn);var hn;tn(qt)}()))}Zt>0||(zr(),function(){if(et.preRun)for(typeof et.preRun=="function"&&(et.preRun=[et.preRun]);et.preRun.length;)Gt=et.preRun.shift(),rn.unshift(Gt);var Gt;tn(rn)}(),Zt>0||(et.setStatus?(et.setStatus("Running..."),setTimeout(function(){setTimeout(function(){et.setStatus("")},1),$t()},1)):$t(),Yt()))}if(et.addFunction=($t,Gt)=>{var hn=Ar($t);if(hn)return hn;var yn=(()=>{if(Wr.length)return Wr.pop();try{En.grow(1)}catch(Tn){throw Tn instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":Tn}return En.length-1})();try{vr(yn,$t)}catch(Tn){if(!(Tn instanceof TypeError))throw Tn;var Dn=tr($t,Gt);vr(yn,Dn)}return Rn.set($t,yn),yn},et.Asyncify=bn,Jt=function $t(){dr||Kr(),dr||(Jt=$t)},et.preInit)for(typeof et.preInit=="function"&&(et.preInit=[et.preInit]);et.preInit.length>0;)et.preInit.pop()();return Kr(),tt});function n$1($){return new Promise(j=>{r$1({wasmBinary:$}).then(_e=>{j(new O(_e))})})}const wasmUrl=""+new URL("qsp-engine-KgPHYqd2.wasm",import.meta.url).href,mainContent$=atom(""),nextMainContent$=atom(""),isNewLoc$=atom(!1),newLocHash$=atom(""),mainScroll$=atom(0),isStatsVisible$=atom(!1),statsContent$=atom(""),statsScroll$=atom(0),isActsVisible$=atom(!1),actions$=atom([]),selectedAction$=atom(-1);function canSelectAction($){return $>=0&&$<actions$.value.length}function selectAction($){var j;selectedAction$.set($),(j=qspApi$.value)==null||j.selectAction($)}function execSelectedAction(){var $;selectedAction$.set(-1),($=qspApi$.value)==null||$.execSelectedAction()}const isObjsVisible$=atom(!1),selectedObject$=atom(-1),objects$=atom([]);function selectObject($){var j;(j=qspApi$.value)==null||j.selectObject($)}const isCmdVisible$=atom(!1),cmdText$=atom("");function submitUserInput(){var $;($=qspApi$.value)==null||$.updateUserInput(cmdText$.value)}const view$=atom({isOpen:!1,path:"",isModal:!1},$=>{const j=$.focus(et=>et.isOpen),_e=$.focus(et=>et.isModal);return{open(et){$.set({isOpen:!0,path:et,isModal:_e.value})},setIsModal(et){_e.set(et)},close(){j.set(!1)},clear(){$.set({isOpen:!1,path:"",isModal:!1})}}}),regions$=atom({}),regionsScroll$=atom({});function reloadRegions(){var j;const $={};for(const _e of Object.keys(regions$.value))$[_e]=((j=qspApi$.value)==null?void 0:j.readVariableByKey("$qspider_region",_e))??"";regions$.set($)}const layers$=atom({});function readLayerState($){var j;return!!(((j=qspApi$.value)==null?void 0:j.readVariableByKey("qspider_layers",$))??0)}function registerLayer($){layers$.update(j=>({...j,[$]:readLayerState($)}))}function reloadLayers(){const $={};for(const j of Object.keys(layers$.value))$[j]=readLayerState(j);layers$.set($)}async function loadAdditionalResources($){if(!$)return;const{styles:j,scripts:_e,fonts:et}=$,tt=[];j&&tt.push(loadAdditionalStyles(j)),_e&&tt.push(loadAdditionalScripts(_e)),et&&loadAdditionalFonts(et),await Promise.allSettled([...tt,document.fonts.ready])}async function loadAdditionalStyles($){const j=[];for(const _e of $){const et=document.createElement("link");et.href=_e,et.rel="stylesheet",et.dataset.qspiderResource="style",document.head.appendChild(et)}await Promise.allSettled(j)}async function loadAdditionalScripts($){const j=[];for(const _e of $){const et=document.createElement("script");et.type="text/javascript",et.src=_e,et.dataset.qspiderResource="script";const tt=defer$1();et.onload=()=>tt.resolve(),et.onerror=()=>tt.reject(new Error(`File not found: ${_e}`)),j.push(tt.promise),document.head.appendChild(et)}await Promise.allSettled(j)}function loadAdditionalFonts($){const j=[];for(const[et,tt,nt,rt]of $)j.push(`
    @font-face {
      font-family: "${et}";
      src: url("${tt}");
      font-display: block;
      font-style: ${rt||"normal"};
      font-weight: ${nt||"normal"};
    }
  `);const _e=document.createElement("style");_e.innerText=j.join(`
`),_e.dataset.qspiderResource="style",document.head.appendChild(_e)}function clearAdditionalResources(){document.querySelectorAll("[data-qspider-resource]").forEach($=>$.remove())}const BOOLEAN_ATTRIBUTES=new Set(["autofocus","autoplay","checked","controls","default","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","novalidate","open","readonly","required","reversed","selected"]),valueProcessors={href($){return $.startsWith("javascript:")?"#":$}};function extractAttributes($){const j={};return Array.from($.attributes).forEach(_e=>{const{name:et,value:tt}=_e;et!=="is"&&(et==="style"?j.style=processStyles(tt):BOOLEAN_ATTRIBUTES.has(et)?j[et]=!0:j[et]=et in valueProcessors?valueProcessors[et](tt):tt)}),j}function processStyles($){const j=$.split(";"),_e={};for(const et of j){const[tt,nt]=et.trim().split(":"),rt=tt.replace(/^-ms-/,"ms-").replace(/-./g,it=>it.substring(1).toUpperCase());let ot=nt;rt==="backgroundImage"&&!nt.includes("url(")?ot=`url("${nt}")`:/^[+-]?\d+(\.\d+)?$/.test(nt)&&(ot=parseFloat(nt)),_e[rt]=ot}return _e}const MIN_SIZE_ID="min-size-style",MAX_SIZE_ID="max-size-style",windowManager={isBrowser:!0,platform:detectPlatform(),setTitle($){document.title=$},setIcon($,j){document.getElementById("favicon").href=j},goFullscreen(){var $;document.fullscreenEnabled&&(($=document.querySelector("qsp-game-root"))==null||$.requestFullscreen().catch(()=>{function j(){var _e;(_e=document.querySelector("qsp-game-root"))==null||_e.requestFullscreen(),document.removeEventListener("click",j)}document.addEventListener("click",j)}))},goWindowed(){document.fullscreenEnabled&&document.exitFullscreen()},async setMinSize($,j){const _e=document.createElement("style");_e.innerText=`qsp-game-root {min-width: ${$}px;min-height:${j}px;}`,_e.id=MIN_SIZE_ID,document.body.appendChild(_e)},unsetMinSize(){var $;($=document.getElementById(MIN_SIZE_ID))==null||$.remove()},async setMaxSize($,j){const _e=document.createElement("style");_e.innerText=`qsp-game-root {max-width: ${$}px;max-height:${j}px;}`,_e.id=MAX_SIZE_ID,document.body.appendChild(_e)},unsetMaxSize(){var $;($=document.getElementById(MAX_SIZE_ID))==null||$.remove()},setResizable($){},async resize($,j){},closeWindow(){window.close()}};function detectPlatform(){const $=navigator.userAgent;return $.includes("Windows")?"Windows":$.includes("Macintosh")?"Macintosh":$.includes("Linux")?"Linux":"Unknown"}var dexie_min={exports:{}};(function($,j){(function(_e,et){$.exports=et()})(commonjsGlobal,function(){var _e=function(lt,ct){return(_e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ht,xt){ht.__proto__=xt}||function(ht,xt){for(var Et in xt)Object.prototype.hasOwnProperty.call(xt,Et)&&(ht[Et]=xt[Et])})(lt,ct)},et=function(){return(et=Object.assign||function(lt){for(var ct,ht=1,xt=arguments.length;ht<xt;ht++)for(var Et in ct=arguments[ht])Object.prototype.hasOwnProperty.call(ct,Et)&&(lt[Et]=ct[Et]);return lt}).apply(this,arguments)};function tt(lt,ct,ht){for(var xt,Et=0,wt=ct.length;Et<wt;Et++)!xt&&Et in ct||((xt=xt||Array.prototype.slice.call(ct,0,Et))[Et]=ct[Et]);return lt.concat(xt||Array.prototype.slice.call(ct))}var nt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:commonjsGlobal,rt=Object.keys,ot=Array.isArray;function it(lt,ct){return typeof ct!="object"||rt(ct).forEach(function(ht){lt[ht]=ct[ht]}),lt}typeof Promise>"u"||nt.Promise||(nt.Promise=Promise);var at=Object.getPrototypeOf,dt={}.hasOwnProperty;function st(lt,ct){return dt.call(lt,ct)}function ut(lt,ct){typeof ct=="function"&&(ct=ct(at(lt))),(typeof Reflect>"u"?rt:Reflect.ownKeys)(ct).forEach(function(ht){pt(lt,ht,ct[ht])})}var ft=Object.defineProperty;function pt(lt,ct,ht,xt){ft(lt,ct,it(ht&&st(ht,"get")&&typeof ht.get=="function"?{get:ht.get,set:ht.set,configurable:!0}:{value:ht,configurable:!0,writable:!0},xt))}function gt(lt){return{from:function(ct){return lt.prototype=Object.create(ct.prototype),pt(lt.prototype,"constructor",lt),{extend:ut.bind(null,lt.prototype)}}}}var yt=Object.getOwnPropertyDescriptor,mt=[].slice;function vt(lt,ct,ht){return mt.call(lt,ct,ht)}function _t(lt,ct){return ct(lt)}function St(lt){if(!lt)throw new Error("Assertion Failed")}function At(lt){nt.setImmediate?setImmediate(lt):setTimeout(lt,0)}function kt(lt,ct){if(typeof ct=="string"&&st(lt,ct))return lt[ct];if(!ct)return lt;if(typeof ct!="string"){for(var ht=[],xt=0,Et=ct.length;xt<Et;++xt){var wt=kt(lt,ct[xt]);ht.push(wt)}return ht}var Ct=ct.indexOf(".");if(Ct!==-1){var Pt=lt[ct.substr(0,Ct)];return Pt==null?void 0:kt(Pt,ct.substr(Ct+1))}}function bt(lt,ct,ht){if(lt&&ct!==void 0&&!("isFrozen"in Object&&Object.isFrozen(lt)))if(typeof ct!="string"&&"length"in ct){St(typeof ht!="string"&&"length"in ht);for(var xt=0,Et=ct.length;xt<Et;++xt)bt(lt,ct[xt],ht[xt])}else{var wt,Ct,Pt=ct.indexOf(".");Pt!==-1?(wt=ct.substr(0,Pt),(Ct=ct.substr(Pt+1))===""?ht===void 0?ot(lt)&&!isNaN(parseInt(wt))?lt.splice(wt,1):delete lt[wt]:lt[wt]=ht:bt(Pt=!(Pt=lt[wt])||!st(lt,wt)?lt[wt]={}:Pt,Ct,ht)):ht===void 0?ot(lt)&&!isNaN(parseInt(ct))?lt.splice(ct,1):delete lt[ct]:lt[ct]=ht}}function Rt(lt){var ct,ht={};for(ct in lt)st(lt,ct)&&(ht[ct]=lt[ct]);return ht}var Ot=[].concat;function Ut(lt){return Ot.apply([],lt)}var hr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ut([8,16,32,64].map(function(lt){return["Int","Uint","Float"].map(function(ct){return ct+lt+"Array"})}))).filter(function(lt){return nt[lt]}),Yt=new Set(hr.map(function(lt){return nt[lt]})),rn=null;function mn(lt){return rn=new WeakMap,lt=function ct(ht){if(!ht||typeof ht!="object")return ht;var xt=rn.get(ht);if(xt)return xt;if(ot(ht)){xt=[],rn.set(ht,xt);for(var Et=0,wt=ht.length;Et<wt;++Et)xt.push(ct(ht[Et]))}else if(Yt.has(ht.constructor))xt=ht;else{var Ct,Pt=at(ht);for(Ct in xt=Pt===Object.prototype?{}:Object.create(Pt),rn.set(ht,xt),ht)st(ht,Ct)&&(xt[Ct]=ct(ht[Ct]))}return xt}(lt),rn=null,lt}var qt={}.toString;function Zt(lt){return qt.call(lt).slice(8,-1)}var Jt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",un=typeof Jt=="symbol"?function(lt){var ct;return lt!=null&&(ct=lt[Jt])&&ct.apply(lt)}:function(){return null};function Wt(lt,ct){return ct=lt.indexOf(ct),0<=ct&&lt.splice(ct,1),0<=ct}var Qt={};function on(lt){var ct,ht,xt,Et;if(arguments.length===1){if(ot(lt))return lt.slice();if(this===Qt&&typeof lt=="string")return[lt];if(Et=un(lt)){for(ht=[];!(xt=Et.next()).done;)ht.push(xt.value);return ht}if(lt==null)return[lt];if(typeof(ct=lt.length)!="number")return[lt];for(ht=new Array(ct);ct--;)ht[ct]=lt[ct];return ht}for(ct=arguments.length,ht=new Array(ct);ct--;)ht[ct]=arguments[ct];return ht}var nn=typeof Symbol<"u"?function(lt){return lt[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},vr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],nr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(vr),cn={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Sn(lt,ct){this.name=lt,this.message=ct}function vn(lt,ct){return lt+". Errors: "+Object.keys(ct).map(function(ht){return ct[ht].toString()}).filter(function(ht,xt,Et){return Et.indexOf(ht)===xt}).join(`
`)}function En(lt,ct,ht,xt){this.failures=ct,this.failedKeys=xt,this.successCount=ht,this.message=vn(lt,ct)}function Rn(lt,ct){this.name="BulkError",this.failures=Object.keys(ct).map(function(ht){return ct[ht]}),this.failuresByPos=ct,this.message=vn(lt,this.failures)}gt(Sn).from(Error).extend({toString:function(){return this.name+": "+this.message}}),gt(En).from(Sn),gt(Rn).from(Sn);var tn=nr.reduce(function(lt,ct){return lt[ct]=ct+"Error",lt},{}),Cn=Sn,en=nr.reduce(function(lt,ct){var ht=ct+"Error";function xt(Et,wt){this.name=ht,Et?typeof Et=="string"?(this.message="".concat(Et).concat(wt?`
 `+wt:""),this.inner=wt||null):typeof Et=="object"&&(this.message="".concat(Et.name," ").concat(Et.message),this.inner=Et):(this.message=cn[ct]||ht,this.inner=null)}return gt(xt).from(Cn),lt[ct]=xt,lt},{});en.Syntax=SyntaxError,en.Type=TypeError,en.Range=RangeError;var An=vr.reduce(function(lt,ct){return lt[ct+"Error"]=en[ct],lt},{}),Nn=nr.reduce(function(lt,ct){return["Syntax","Type","Range"].indexOf(ct)===-1&&(lt[ct+"Error"]=en[ct]),lt},{});function xn(){}function Bn(lt){return lt}function Gn(lt,ct){return lt==null||lt===Bn?ct:function(ht){return ct(lt(ht))}}function Qn(lt,ct){return function(){lt.apply(this,arguments),ct.apply(this,arguments)}}function sr(lt,ct){return lt===xn?ct:function(){var ht=lt.apply(this,arguments);ht!==void 0&&(arguments[0]=ht);var xt=this.onsuccess,Et=this.onerror;this.onsuccess=null,this.onerror=null;var wt=ct.apply(this,arguments);return xt&&(this.onsuccess=this.onsuccess?Qn(xt,this.onsuccess):xt),Et&&(this.onerror=this.onerror?Qn(Et,this.onerror):Et),wt!==void 0?wt:ht}}function cr(lt,ct){return lt===xn?ct:function(){lt.apply(this,arguments);var ht=this.onsuccess,xt=this.onerror;this.onsuccess=this.onerror=null,ct.apply(this,arguments),ht&&(this.onsuccess=this.onsuccess?Qn(ht,this.onsuccess):ht),xt&&(this.onerror=this.onerror?Qn(xt,this.onerror):xt)}}function qr(lt,ct){return lt===xn?ct:function(ht){var xt=lt.apply(this,arguments);it(ht,xt);var Et=this.onsuccess,wt=this.onerror;return this.onsuccess=null,this.onerror=null,ht=ct.apply(this,arguments),Et&&(this.onsuccess=this.onsuccess?Qn(Et,this.onsuccess):Et),wt&&(this.onerror=this.onerror?Qn(wt,this.onerror):wt),xt===void 0?ht===void 0?void 0:ht:it(xt,ht)}}function bn(lt,ct){return lt===xn?ct:function(){return ct.apply(this,arguments)!==!1&&lt.apply(this,arguments)}}function Mr(lt,ct){return lt===xn?ct:function(){var ht=lt.apply(this,arguments);if(ht&&typeof ht.then=="function"){for(var xt=this,Et=arguments.length,wt=new Array(Et);Et--;)wt[Et]=arguments[Et];return ht.then(function(){return ct.apply(xt,wt)})}return ct.apply(this,arguments)}}Nn.ModifyError=En,Nn.DexieError=Sn,Nn.BulkError=Rn;var tr=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function gr(lt){tr=lt}var Ar={},Wr=100,hr=typeof Promise>"u"?[]:function(){var lt=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[lt,at(lt),lt];var ct=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[ct,at(ct),lt]}(),vr=hr[0],nr=hr[1],hr=hr[2],nr=nr&&nr.then,Tr=vr&&vr.constructor,wn=!!hr,xr=function(lt,ct){Er.push([lt,ct]),dr&&(queueMicrotask(Dn),dr=!1)},Lr=!0,dr=!0,ir=[],yr=[],fr=Bn,rr={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:xn,pgp:!1,env:{},finalize:xn},_n=rr,Er=[],ar=0,Pr=[];function gn(lt){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var ct=this._PSD=_n;if(typeof lt!="function"){if(lt!==Ar)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&$t(this,this._value))}this._state=null,this._value=null,++ct.ref,function ht(xt,Et){try{Et(function(wt){if(xt._state===null){if(wt===xt)throw new TypeError("A promise cannot be resolved with itself.");var Ct=xt._lib&&Tn();wt&&typeof wt.then=="function"?ht(xt,function(Pt,Mt){wt instanceof gn?wt._then(Pt,Mt):wt.then(Pt,Mt)}):(xt._state=!0,xt._value=wt,Gt(xt)),Ct&&In()}},$t.bind(null,xt))}catch(wt){$t(xt,wt)}}(this,lt)}var zr={get:function(){var lt=_n,ct=ao;function ht(xt,Et){var wt=this,Ct=!lt.global&&(lt!==_n||ct!==ao),Pt=Ct&&!wr(),Mt=new gn(function(Nt,Ft){hn(wt,new Kr(ss(xt,lt,Ct,Pt),ss(Et,lt,Ct,Pt),Nt,Ft,lt))});return this._consoleTask&&(Mt._consoleTask=this._consoleTask),Mt}return ht.prototype=Ar,ht},set:function(lt){pt(this,"then",lt&&lt.prototype===Ar?zr:{get:function(){return lt},set:zr.set})}};function Kr(lt,ct,ht,xt,Et){this.onFulfilled=typeof lt=="function"?lt:null,this.onRejected=typeof ct=="function"?ct:null,this.resolve=ht,this.reject=xt,this.psd=Et}function $t(lt,ct){var ht,xt;yr.push(ct),lt._state===null&&(ht=lt._lib&&Tn(),ct=fr(ct),lt._state=!1,lt._value=ct,xt=lt,ir.some(function(Et){return Et._value===xt._value})||ir.push(xt),Gt(lt),ht&&In())}function Gt(lt){var ct=lt._listeners;lt._listeners=[];for(var ht=0,xt=ct.length;ht<xt;++ht)hn(lt,ct[ht]);var Et=lt._PSD;--Et.ref||Et.finalize(),ar===0&&(++ar,xr(function(){--ar==0&&Hn()},[]))}function hn(lt,ct){if(lt._state!==null){var ht=lt._state?ct.onFulfilled:ct.onRejected;if(ht===null)return(lt._state?ct.resolve:ct.reject)(lt._value);++ct.psd.ref,++ar,xr(yn,[ht,lt,ct])}else lt._listeners.push(ct)}function yn(lt,ct,ht){try{var xt,Et=ct._value;!ct._state&&yr.length&&(yr=[]),xt=tr&&ct._consoleTask?ct._consoleTask.run(function(){return lt(Et)}):lt(Et),ct._state||yr.indexOf(Et)!==-1||function(wt){for(var Ct=ir.length;Ct;)if(ir[--Ct]._value===wt._value)return ir.splice(Ct,1)}(ct),ht.resolve(xt)}catch(wt){ht.reject(wt)}finally{--ar==0&&Hn(),--ht.psd.ref||ht.psd.finalize()}}function Dn(){$r(rr,function(){Tn()&&In()})}function Tn(){var lt=Lr;return dr=Lr=!1,lt}function In(){var lt,ct,ht;do for(;0<Er.length;)for(lt=Er,Er=[],ht=lt.length,ct=0;ct<ht;++ct){var xt=lt[ct];xt[0].apply(null,xt[1])}while(0<Er.length);dr=Lr=!0}function Hn(){var lt=ir;ir=[],lt.forEach(function(xt){xt._PSD.onunhandled.call(null,xt._value,xt)});for(var ct=Pr.slice(0),ht=ct.length;ht;)ct[--ht]()}function qn(lt){return new gn(Ar,!1,lt)}function Fn(lt,ct){var ht=_n;return function(){var xt=Tn(),Et=_n;try{return br(ht,!0),lt.apply(this,arguments)}catch(wt){ct&&ct(wt)}finally{br(Et,!1),xt&&In()}}}ut(gn.prototype,{then:zr,_then:function(lt,ct){hn(this,new Kr(null,null,lt,ct,_n))},catch:function(lt){if(arguments.length===1)return this.then(null,lt);var ct=lt,ht=arguments[1];return typeof ct=="function"?this.then(null,function(xt){return(xt instanceof ct?ht:qn)(xt)}):this.then(null,function(xt){return(xt&&xt.name===ct?ht:qn)(xt)})},finally:function(lt){return this.then(function(ct){return gn.resolve(lt()).then(function(){return ct})},function(ct){return gn.resolve(lt()).then(function(){return qn(ct)})})},timeout:function(lt,ct){var ht=this;return lt<1/0?new gn(function(xt,Et){var wt=setTimeout(function(){return Et(new en.Timeout(ct))},lt);ht.then(xt,Et).finally(clearTimeout.bind(null,wt))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&pt(gn.prototype,Symbol.toStringTag,"Dexie.Promise"),rr.env=os(),ut(gn,{all:function(){var lt=on.apply(null,arguments).map(lo);return new gn(function(ct,ht){lt.length===0&&ct([]);var xt=lt.length;lt.forEach(function(Et,wt){return gn.resolve(Et).then(function(Ct){lt[wt]=Ct,--xt||ct(lt)},ht)})})},resolve:function(lt){return lt instanceof gn?lt:lt&&typeof lt.then=="function"?new gn(function(ct,ht){lt.then(ct,ht)}):new gn(Ar,!0,lt)},reject:qn,race:function(){var lt=on.apply(null,arguments).map(lo);return new gn(function(ct,ht){lt.map(function(xt){return gn.resolve(xt).then(ct,ht)})})},PSD:{get:function(){return _n},set:function(lt){return _n=lt}},totalEchoes:{get:function(){return ao}},newPSD:_r,usePSD:$r,scheduler:{get:function(){return xr},set:function(lt){xr=lt}},rejectionMapper:{get:function(){return fr},set:function(lt){fr=lt}},follow:function(lt,ct){return new gn(function(ht,xt){return _r(function(Et,wt){var Ct=_n;Ct.unhandleds=[],Ct.onunhandled=wt,Ct.finalize=Qn(function(){var Pt,Mt=this;Pt=function(){Mt.unhandleds.length===0?Et():wt(Mt.unhandleds[0])},Pr.push(function Nt(){Pt(),Pr.splice(Pr.indexOf(Nt),1)}),++ar,xr(function(){--ar==0&&Hn()},[])},Ct.finalize),lt()},ct,ht,xt)})}}),Tr&&(Tr.allSettled&&pt(gn,"allSettled",function(){var lt=on.apply(null,arguments).map(lo);return new gn(function(ct){lt.length===0&&ct([]);var ht=lt.length,xt=new Array(ht);lt.forEach(function(Et,wt){return gn.resolve(Et).then(function(Ct){return xt[wt]={status:"fulfilled",value:Ct}},function(Ct){return xt[wt]={status:"rejected",reason:Ct}}).then(function(){return--ht||ct(xt)})})})}),Tr.any&&typeof AggregateError<"u"&&pt(gn,"any",function(){var lt=on.apply(null,arguments).map(lo);return new gn(function(ct,ht){lt.length===0&&ht(new AggregateError([]));var xt=lt.length,Et=new Array(xt);lt.forEach(function(wt,Ct){return gn.resolve(wt).then(function(Pt){return ct(Pt)},function(Pt){Et[Ct]=Pt,--xt||ht(new AggregateError(Et))})})})}));var Vn={awaits:0,echoes:0,id:0},oo=0,so=[],io=0,ao=0,Ms=0;function _r(lt,ct,ht,xt){var Et=_n,wt=Object.create(Et);return wt.parent=Et,wt.ref=0,wt.global=!1,wt.id=++Ms,rr.env,wt.env=wn?{Promise:gn,PromiseProp:{value:gn,configurable:!0,writable:!0},all:gn.all,race:gn.race,allSettled:gn.allSettled,any:gn.any,resolve:gn.resolve,reject:gn.reject}:{},ct&&it(wt,ct),++Et.ref,wt.finalize=function(){--this.parent.ref||this.parent.finalize()},xt=$r(wt,lt,ht,xt),wt.ref===0&&wt.finalize(),xt}function Dr(){return Vn.id||(Vn.id=++oo),++Vn.awaits,Vn.echoes+=Wr,Vn.id}function wr(){return!!Vn.awaits&&(--Vn.awaits==0&&(Vn.id=0),Vn.echoes=Vn.awaits*Wr,!0)}function lo(lt){return Vn.echoes&&lt&&lt.constructor===Tr?(Dr(),lt.then(function(ct){return wr(),ct},function(ct){return wr(),Wn(ct)})):lt}function Ls(){var lt=so[so.length-1];so.pop(),br(lt,!1)}function br(lt,ct){var ht,xt=_n;(ct?!Vn.echoes||io++&&lt===_n:!io||--io&&lt===_n)||queueMicrotask(ct?(function(Et){++ao,Vn.echoes&&--Vn.echoes!=0||(Vn.echoes=Vn.awaits=Vn.id=0),so.push(_n),br(Et,!0)}).bind(null,lt):Ls),lt!==_n&&(_n=lt,xt===rr&&(rr.env=os()),wn&&(ht=rr.env.Promise,ct=lt.env,(xt.global||lt.global)&&(Object.defineProperty(nt,"Promise",ct.PromiseProp),ht.all=ct.all,ht.race=ct.race,ht.resolve=ct.resolve,ht.reject=ct.reject,ct.allSettled&&(ht.allSettled=ct.allSettled),ct.any&&(ht.any=ct.any))))}function os(){var lt=nt.Promise;return wn?{Promise:lt,PromiseProp:Object.getOwnPropertyDescriptor(nt,"Promise"),all:lt.all,race:lt.race,allSettled:lt.allSettled,any:lt.any,resolve:lt.resolve,reject:lt.reject}:{}}function $r(lt,ct,ht,xt,Et){var wt=_n;try{return br(lt,!0),ct(ht,xt,Et)}finally{br(wt,!1)}}function ss(lt,ct,ht,xt){return typeof lt!="function"?lt:function(){var Et=_n;ht&&Dr(),br(ct,!0);try{return lt.apply(this,arguments)}finally{br(Et,!1),xt&&queueMicrotask(wr)}}}function Po(lt){Promise===Tr&&Vn.echoes===0?io===0?lt():enqueueNativeMicroTask(lt):setTimeout(lt,0)}(""+nr).indexOf("[native code]")===-1&&(Dr=wr=xn);var Wn=gn.reject,jr="￿",pr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",as="String expected.",Fr=[],uo="__dbnames",$o="readonly",jo="readwrite";function kr(lt,ct){return lt?ct?function(){return lt.apply(this,arguments)&&ct.apply(this,arguments)}:lt:ct}var ls={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function co(lt){return typeof lt!="string"||/\./.test(lt)?function(ct){return ct}:function(ct){return ct[lt]===void 0&&lt in ct&&delete(ct=mn(ct))[lt],ct}}function us(){throw en.Type()}function Mn(lt,ct){try{var ht=ds(lt),xt=ds(ct);if(ht!==xt)return ht==="Array"?1:xt==="Array"?-1:ht==="binary"?1:xt==="binary"?-1:ht==="string"?1:xt==="string"?-1:ht==="Date"?1:xt!=="Date"?NaN:-1;switch(ht){case"number":case"Date":case"string":return ct<lt?1:lt<ct?-1:0;case"binary":return function(Et,wt){for(var Ct=Et.length,Pt=wt.length,Mt=Ct<Pt?Ct:Pt,Nt=0;Nt<Mt;++Nt)if(Et[Nt]!==wt[Nt])return Et[Nt]<wt[Nt]?-1:1;return Ct===Pt?0:Ct<Pt?-1:1}(fs(lt),fs(ct));case"Array":return function(Et,wt){for(var Ct=Et.length,Pt=wt.length,Mt=Ct<Pt?Ct:Pt,Nt=0;Nt<Mt;++Nt){var Ft=Mn(Et[Nt],wt[Nt]);if(Ft!==0)return Ft}return Ct===Pt?0:Ct<Pt?-1:1}(lt,ct)}}catch{}return NaN}function ds(lt){var ct=typeof lt;return ct!="object"?ct:ArrayBuffer.isView(lt)?"binary":(lt=Zt(lt),lt==="ArrayBuffer"?"binary":lt)}function fs(lt){return lt instanceof Uint8Array?lt:ArrayBuffer.isView(lt)?new Uint8Array(lt.buffer,lt.byteOffset,lt.byteLength):new Uint8Array(lt)}var ps=(Un.prototype._trans=function(lt,ct,ht){var xt=this._tx||_n.trans,Et=this.name,wt=tr&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(lt==="readonly"?"read":"write"," ").concat(this.name));function Ct(Nt,Ft,jt){if(!jt.schema[Et])throw new en.NotFound("Table "+Et+" not part of transaction");return ct(jt.idbtrans,jt)}var Pt=Tn();try{var Mt=xt&&xt.db._novip===this.db._novip?xt===_n.trans?xt._promise(lt,Ct,ht):_r(function(){return xt._promise(lt,Ct,ht)},{trans:xt,transless:_n.transless||_n}):function Nt(Ft,jt,Ht,It){if(Ft.idbdb&&(Ft._state.openComplete||_n.letThrough||Ft._vip)){var Dt=Ft._createTransaction(jt,Ht,Ft._dbSchema);try{Dt.create(),Ft._state.PR1398_maxLoop=3}catch(Bt){return Bt.name===tn.InvalidState&&Ft.isOpen()&&0<--Ft._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),Ft.close({disableAutoOpen:!1}),Ft.open().then(function(){return Nt(Ft,jt,Ht,It)})):Wn(Bt)}return Dt._promise(jt,function(Bt,Lt){return _r(function(){return _n.trans=Dt,It(Bt,Lt,Dt)})}).then(function(Bt){if(jt==="readwrite")try{Dt.idbtrans.commit()}catch{}return jt==="readonly"?Bt:Dt._completion.then(function(){return Bt})})}if(Ft._state.openComplete)return Wn(new en.DatabaseClosed(Ft._state.dbOpenError));if(!Ft._state.isBeingOpened){if(!Ft._state.autoOpen)return Wn(new en.DatabaseClosed);Ft.open().catch(xn)}return Ft._state.dbReadyPromise.then(function(){return Nt(Ft,jt,Ht,It)})}(this.db,lt,[this.name],Ct);return wt&&(Mt._consoleTask=wt,Mt=Mt.catch(function(Nt){return console.trace(Nt),Wn(Nt)})),Mt}finally{Pt&&In()}},Un.prototype.get=function(lt,ct){var ht=this;return lt&&lt.constructor===Object?this.where(lt).first(ct):lt==null?Wn(new en.Type("Invalid argument to Table.get()")):this._trans("readonly",function(xt){return ht.core.get({trans:xt,key:lt}).then(function(Et){return ht.hook.reading.fire(Et)})}).then(ct)},Un.prototype.where=function(lt){if(typeof lt=="string")return new this.db.WhereClause(this,lt);if(ot(lt))return new this.db.WhereClause(this,"[".concat(lt.join("+"),"]"));var ct=rt(lt);if(ct.length===1)return this.where(ct[0]).equals(lt[ct[0]]);var ht=this.schema.indexes.concat(this.schema.primKey).filter(function(Mt){if(Mt.compound&&ct.every(function(Ft){return 0<=Mt.keyPath.indexOf(Ft)})){for(var Nt=0;Nt<ct.length;++Nt)if(ct.indexOf(Mt.keyPath[Nt])===-1)return!1;return!0}return!1}).sort(function(Mt,Nt){return Mt.keyPath.length-Nt.keyPath.length})[0];if(ht&&this.db._maxKey!==jr){var Ct=ht.keyPath.slice(0,ct.length);return this.where(Ct).equals(Ct.map(function(Nt){return lt[Nt]}))}!ht&&tr&&console.warn("The query ".concat(JSON.stringify(lt)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(ct.join("+"),"]"));var xt=this.schema.idxByName,Et=this.db._deps.indexedDB;function wt(Mt,Nt){return Et.cmp(Mt,Nt)===0}var Pt=ct.reduce(function(Ht,Nt){var Ft=Ht[0],jt=Ht[1],Ht=xt[Nt],It=lt[Nt];return[Ft||Ht,Ft||!Ht?kr(jt,Ht&&Ht.multi?function(Dt){return Dt=kt(Dt,Nt),ot(Dt)&&Dt.some(function(Bt){return wt(It,Bt)})}:function(Dt){return wt(It,kt(Dt,Nt))}):jt]},[null,null]),Ct=Pt[0],Pt=Pt[1];return Ct?this.where(Ct.name).equals(lt[Ct.keyPath]).filter(Pt):ht?this.filter(Pt):this.where(ct).equals("")},Un.prototype.filter=function(lt){return this.toCollection().and(lt)},Un.prototype.count=function(lt){return this.toCollection().count(lt)},Un.prototype.offset=function(lt){return this.toCollection().offset(lt)},Un.prototype.limit=function(lt){return this.toCollection().limit(lt)},Un.prototype.each=function(lt){return this.toCollection().each(lt)},Un.prototype.toArray=function(lt){return this.toCollection().toArray(lt)},Un.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Un.prototype.orderBy=function(lt){return new this.db.Collection(new this.db.WhereClause(this,ot(lt)?"[".concat(lt.join("+"),"]"):lt))},Un.prototype.reverse=function(){return this.toCollection().reverse()},Un.prototype.mapToClass=function(lt){var ct,ht=this.db,xt=this.name;function Et(){return ct!==null&&ct.apply(this,arguments)||this}(this.schema.mappedClass=lt).prototype instanceof us&&(function(Mt,Nt){if(typeof Nt!="function"&&Nt!==null)throw new TypeError("Class extends value "+String(Nt)+" is not a constructor or null");function Ft(){this.constructor=Mt}_e(Mt,Nt),Mt.prototype=Nt===null?Object.create(Nt):(Ft.prototype=Nt.prototype,new Ft)}(Et,ct=lt),Object.defineProperty(Et.prototype,"db",{get:function(){return ht},enumerable:!1,configurable:!0}),Et.prototype.table=function(){return xt},lt=Et);for(var wt=new Set,Ct=lt.prototype;Ct;Ct=at(Ct))Object.getOwnPropertyNames(Ct).forEach(function(Mt){return wt.add(Mt)});function Pt(Mt){if(!Mt)return Mt;var Nt,Ft=Object.create(lt.prototype);for(Nt in Mt)if(!wt.has(Nt))try{Ft[Nt]=Mt[Nt]}catch{}return Ft}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=Pt,this.hook("reading",Pt),lt},Un.prototype.defineClass=function(){return this.mapToClass(function(lt){it(this,lt)})},Un.prototype.add=function(lt,ct){var ht=this,xt=this.schema.primKey,Et=xt.auto,wt=xt.keyPath,Ct=lt;return wt&&Et&&(Ct=co(wt)(lt)),this._trans("readwrite",function(Pt){return ht.core.mutate({trans:Pt,type:"add",keys:ct!=null?[ct]:null,values:[Ct]})}).then(function(Pt){return Pt.numFailures?gn.reject(Pt.failures[0]):Pt.lastResult}).then(function(Pt){if(wt)try{bt(lt,wt,Pt)}catch{}return Pt})},Un.prototype.update=function(lt,ct){return typeof lt!="object"||ot(lt)?this.where(":id").equals(lt).modify(ct):(lt=kt(lt,this.schema.primKey.keyPath),lt===void 0?Wn(new en.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(lt).modify(ct))},Un.prototype.put=function(lt,ct){var ht=this,xt=this.schema.primKey,Et=xt.auto,wt=xt.keyPath,Ct=lt;return wt&&Et&&(Ct=co(wt)(lt)),this._trans("readwrite",function(Pt){return ht.core.mutate({trans:Pt,type:"put",values:[Ct],keys:ct!=null?[ct]:null})}).then(function(Pt){return Pt.numFailures?gn.reject(Pt.failures[0]):Pt.lastResult}).then(function(Pt){if(wt)try{bt(lt,wt,Pt)}catch{}return Pt})},Un.prototype.delete=function(lt){var ct=this;return this._trans("readwrite",function(ht){return ct.core.mutate({trans:ht,type:"delete",keys:[lt]})}).then(function(ht){return ht.numFailures?gn.reject(ht.failures[0]):void 0})},Un.prototype.clear=function(){var lt=this;return this._trans("readwrite",function(ct){return lt.core.mutate({trans:ct,type:"deleteRange",range:ls})}).then(function(ct){return ct.numFailures?gn.reject(ct.failures[0]):void 0})},Un.prototype.bulkGet=function(lt){var ct=this;return this._trans("readonly",function(ht){return ct.core.getMany({keys:lt,trans:ht}).then(function(xt){return xt.map(function(Et){return ct.hook.reading.fire(Et)})})})},Un.prototype.bulkAdd=function(lt,ct,ht){var xt=this,Et=Array.isArray(ct)?ct:void 0,wt=(ht=ht||(Et?void 0:ct))?ht.allKeys:void 0;return this._trans("readwrite",function(Ct){var Nt=xt.schema.primKey,Pt=Nt.auto,Nt=Nt.keyPath;if(Nt&&Et)throw new en.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(Et&&Et.length!==lt.length)throw new en.InvalidArgument("Arguments objects and keys must have the same length");var Mt=lt.length,Nt=Nt&&Pt?lt.map(co(Nt)):lt;return xt.core.mutate({trans:Ct,type:"add",keys:Et,values:Nt,wantResults:wt}).then(function(Dt){var jt=Dt.numFailures,Ht=Dt.results,It=Dt.lastResult,Dt=Dt.failures;if(jt===0)return wt?Ht:It;throw new Rn("".concat(xt.name,".bulkAdd(): ").concat(jt," of ").concat(Mt," operations failed"),Dt)})})},Un.prototype.bulkPut=function(lt,ct,ht){var xt=this,Et=Array.isArray(ct)?ct:void 0,wt=(ht=ht||(Et?void 0:ct))?ht.allKeys:void 0;return this._trans("readwrite",function(Ct){var Nt=xt.schema.primKey,Pt=Nt.auto,Nt=Nt.keyPath;if(Nt&&Et)throw new en.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(Et&&Et.length!==lt.length)throw new en.InvalidArgument("Arguments objects and keys must have the same length");var Mt=lt.length,Nt=Nt&&Pt?lt.map(co(Nt)):lt;return xt.core.mutate({trans:Ct,type:"put",keys:Et,values:Nt,wantResults:wt}).then(function(Dt){var jt=Dt.numFailures,Ht=Dt.results,It=Dt.lastResult,Dt=Dt.failures;if(jt===0)return wt?Ht:It;throw new Rn("".concat(xt.name,".bulkPut(): ").concat(jt," of ").concat(Mt," operations failed"),Dt)})})},Un.prototype.bulkUpdate=function(lt){var ct=this,ht=this.core,xt=lt.map(function(Ct){return Ct.key}),Et=lt.map(function(Ct){return Ct.changes}),wt=[];return this._trans("readwrite",function(Ct){return ht.getMany({trans:Ct,keys:xt,cache:"clone"}).then(function(Pt){var Mt=[],Nt=[];lt.forEach(function(jt,Ht){var It=jt.key,Dt=jt.changes,Bt=Pt[Ht];if(Bt){for(var Lt=0,Vt=Object.keys(Dt);Lt<Vt.length;Lt++){var zt=Vt[Lt],Kt=Dt[zt];if(zt===ct.schema.primKey.keyPath){if(Mn(Kt,It)!==0)throw new en.Constraint("Cannot update primary key in bulkUpdate()")}else bt(Bt,zt,Kt)}wt.push(Ht),Mt.push(It),Nt.push(Bt)}});var Ft=Mt.length;return ht.mutate({trans:Ct,type:"put",keys:Mt,values:Nt,updates:{keys:xt,changeSpecs:Et}}).then(function(jt){var Ht=jt.numFailures,It=jt.failures;if(Ht===0)return Ft;for(var Dt=0,Bt=Object.keys(It);Dt<Bt.length;Dt++){var Lt,Vt=Bt[Dt],zt=wt[Number(Vt)];zt!=null&&(Lt=It[Vt],delete It[Vt],It[zt]=Lt)}throw new Rn("".concat(ct.name,".bulkUpdate(): ").concat(Ht," of ").concat(Ft," operations failed"),It)})})})},Un.prototype.bulkDelete=function(lt){var ct=this,ht=lt.length;return this._trans("readwrite",function(xt){return ct.core.mutate({trans:xt,type:"delete",keys:lt})}).then(function(Ct){var Et=Ct.numFailures,wt=Ct.lastResult,Ct=Ct.failures;if(Et===0)return wt;throw new Rn("".concat(ct.name,".bulkDelete(): ").concat(Et," of ").concat(ht," operations failed"),Ct)})},Un);function Un(){}function Gr(lt){function ct(Ct,Pt){if(Pt){for(var Mt=arguments.length,Nt=new Array(Mt-1);--Mt;)Nt[Mt-1]=arguments[Mt];return ht[Ct].subscribe.apply(null,Nt),lt}if(typeof Ct=="string")return ht[Ct]}var ht={};ct.addEventType=wt;for(var xt=1,Et=arguments.length;xt<Et;++xt)wt(arguments[xt]);return ct;function wt(Ct,Pt,Mt){if(typeof Ct!="object"){var Nt;Pt=Pt||bn;var Ft={subscribers:[],fire:Mt=Mt||xn,subscribe:function(jt){Ft.subscribers.indexOf(jt)===-1&&(Ft.subscribers.push(jt),Ft.fire=Pt(Ft.fire,jt))},unsubscribe:function(jt){Ft.subscribers=Ft.subscribers.filter(function(Ht){return Ht!==jt}),Ft.fire=Ft.subscribers.reduce(Pt,Mt)}};return ht[Ct]=ct[Ct]=Ft}rt(Nt=Ct).forEach(function(jt){var Ht=Nt[jt];if(ot(Ht))wt(jt,Nt[jt][0],Nt[jt][1]);else{if(Ht!=="asap")throw new en.InvalidArgument("Invalid event config");var It=wt(jt,Bn,function(){for(var Dt=arguments.length,Bt=new Array(Dt);Dt--;)Bt[Dt]=arguments[Dt];It.subscribers.forEach(function(Lt){At(function(){Lt.apply(null,Bt)})})})}})}}function Qr(lt,ct){return gt(ct).from({prototype:lt}),ct}function Br(lt,ct){return!(lt.filter||lt.algorithm||lt.or)&&(ct?lt.justLimit:!lt.replayFilter)}function ko(lt,ct){lt.filter=kr(lt.filter,ct)}function Oo(lt,ct,ht){var xt=lt.replayFilter;lt.replayFilter=xt?function(){return kr(xt(),ct())}:ct,lt.justLimit=ht&&!xt}function fo(lt,ct){if(lt.isPrimKey)return ct.primaryKey;var ht=ct.getIndexByKeyPath(lt.index);if(!ht)throw new en.Schema("KeyPath "+lt.index+" on object store "+ct.name+" is not indexed");return ht}function hs(lt,ct,ht){var xt=fo(lt,ct.schema);return ct.openCursor({trans:ht,values:!lt.keysOnly,reverse:lt.dir==="prev",unique:!!lt.unique,query:{index:xt,range:lt.range}})}function po(lt,ct,ht,xt){var Et=lt.replayFilter?kr(lt.filter,lt.replayFilter()):lt.filter;if(lt.or){var wt={},Ct=function(Pt,Mt,Nt){var Ft,jt;Et&&!Et(Mt,Nt,function(Ht){return Mt.stop(Ht)},function(Ht){return Mt.fail(Ht)})||((jt=""+(Ft=Mt.primaryKey))=="[object ArrayBuffer]"&&(jt=""+new Uint8Array(Ft)),st(wt,jt)||(wt[jt]=!0,ct(Pt,Mt,Nt)))};return Promise.all([lt.or._iterate(Ct,ht),ms(hs(lt,xt,ht),lt.algorithm,Ct,!lt.keysOnly&&lt.valueMapper)])}return ms(hs(lt,xt,ht),kr(lt.algorithm,Et),ct,!lt.keysOnly&&lt.valueMapper)}function ms(lt,ct,ht,xt){var Et=Fn(xt?function(wt,Ct,Pt){return ht(xt(wt),Ct,Pt)}:ht);return lt.then(function(wt){if(wt)return wt.start(function(){var Ct=function(){return wt.continue()};ct&&!ct(wt,function(Pt){return Ct=Pt},function(Pt){wt.stop(Pt),Ct=xn},function(Pt){wt.fail(Pt),Ct=xn})||Et(wt.value,wt,function(Pt){return Ct=Pt}),Ct()})})}var hr=Symbol(),Yr=(gs.prototype.execute=function(lt){if(this.add!==void 0){var ct=this.add;if(ot(ct))return tt(tt([],ot(lt)?lt:[],!0),ct).sort();if(typeof ct=="number")return(Number(lt)||0)+ct;if(typeof ct=="bigint")try{return BigInt(lt)+ct}catch{return BigInt(0)+ct}throw new TypeError("Invalid term ".concat(ct))}if(this.remove!==void 0){var ht=this.remove;if(ot(ht))return ot(lt)?lt.filter(function(xt){return!ht.includes(xt)}).sort():[];if(typeof ht=="number")return Number(lt)-ht;if(typeof ht=="bigint")try{return BigInt(lt)-ht}catch{return BigInt(0)-ht}throw new TypeError("Invalid subtrahend ".concat(ht))}return ct=(ct=this.replacePrefix)===null||ct===void 0?void 0:ct[0],ct&&typeof lt=="string"&&lt.startsWith(ct)?this.replacePrefix[1]+lt.substring(ct.length):lt},gs);function gs(lt){Object.assign(this,lt)}var Ds=(Ln.prototype._read=function(lt,ct){var ht=this._ctx;return ht.error?ht.table._trans(null,Wn.bind(null,ht.error)):ht.table._trans("readonly",lt).then(ct)},Ln.prototype._write=function(lt){var ct=this._ctx;return ct.error?ct.table._trans(null,Wn.bind(null,ct.error)):ct.table._trans("readwrite",lt,"locked")},Ln.prototype._addAlgorithm=function(lt){var ct=this._ctx;ct.algorithm=kr(ct.algorithm,lt)},Ln.prototype._iterate=function(lt,ct){return po(this._ctx,lt,ct,this._ctx.table.core)},Ln.prototype.clone=function(lt){var ct=Object.create(this.constructor.prototype),ht=Object.create(this._ctx);return lt&&it(ht,lt),ct._ctx=ht,ct},Ln.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ln.prototype.each=function(lt){var ct=this._ctx;return this._read(function(ht){return po(ct,lt,ht,ct.table.core)})},Ln.prototype.count=function(lt){var ct=this;return this._read(function(ht){var xt=ct._ctx,Et=xt.table.core;if(Br(xt,!0))return Et.count({trans:ht,query:{index:fo(xt,Et.schema),range:xt.range}}).then(function(Ct){return Math.min(Ct,xt.limit)});var wt=0;return po(xt,function(){return++wt,!1},ht,Et).then(function(){return wt})}).then(lt)},Ln.prototype.sortBy=function(lt,ct){var ht=lt.split(".").reverse(),xt=ht[0],Et=ht.length-1;function wt(Mt,Nt){return Nt?wt(Mt[ht[Nt]],Nt-1):Mt[xt]}var Ct=this._ctx.dir==="next"?1:-1;function Pt(Mt,Nt){return Mt=wt(Mt,Et),Nt=wt(Nt,Et),Mt<Nt?-Ct:Nt<Mt?Ct:0}return this.toArray(function(Mt){return Mt.sort(Pt)}).then(ct)},Ln.prototype.toArray=function(lt){var ct=this;return this._read(function(ht){var xt=ct._ctx;if(xt.dir==="next"&&Br(xt,!0)&&0<xt.limit){var Et=xt.valueMapper,wt=fo(xt,xt.table.core.schema);return xt.table.core.query({trans:ht,limit:xt.limit,values:!0,query:{index:wt,range:xt.range}}).then(function(Pt){return Pt=Pt.result,Et?Pt.map(Et):Pt})}var Ct=[];return po(xt,function(Pt){return Ct.push(Pt)},ht,xt.table.core).then(function(){return Ct})},lt)},Ln.prototype.offset=function(lt){var ct=this._ctx;return lt<=0||(ct.offset+=lt,Br(ct)?Oo(ct,function(){var ht=lt;return function(xt,Et){return ht===0||(ht===1?--ht:Et(function(){xt.advance(ht),ht=0}),!1)}}):Oo(ct,function(){var ht=lt;return function(){return--ht<0}})),this},Ln.prototype.limit=function(lt){return this._ctx.limit=Math.min(this._ctx.limit,lt),Oo(this._ctx,function(){var ct=lt;return function(ht,xt,Et){return--ct<=0&&xt(Et),0<=ct}},!0),this},Ln.prototype.until=function(lt,ct){return ko(this._ctx,function(ht,xt,Et){return!lt(ht.value)||(xt(Et),ct)}),this},Ln.prototype.first=function(lt){return this.limit(1).toArray(function(ct){return ct[0]}).then(lt)},Ln.prototype.last=function(lt){return this.reverse().first(lt)},Ln.prototype.filter=function(lt){var ct;return ko(this._ctx,function(ht){return lt(ht.value)}),(ct=this._ctx).isMatch=kr(ct.isMatch,lt),this},Ln.prototype.and=function(lt){return this.filter(lt)},Ln.prototype.or=function(lt){return new this.db.WhereClause(this._ctx.table,lt,this)},Ln.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ln.prototype.desc=function(){return this.reverse()},Ln.prototype.eachKey=function(lt){var ct=this._ctx;return ct.keysOnly=!ct.isMatch,this.each(function(ht,xt){lt(xt.key,xt)})},Ln.prototype.eachUniqueKey=function(lt){return this._ctx.unique="unique",this.eachKey(lt)},Ln.prototype.eachPrimaryKey=function(lt){var ct=this._ctx;return ct.keysOnly=!ct.isMatch,this.each(function(ht,xt){lt(xt.primaryKey,xt)})},Ln.prototype.keys=function(lt){var ct=this._ctx;ct.keysOnly=!ct.isMatch;var ht=[];return this.each(function(xt,Et){ht.push(Et.key)}).then(function(){return ht}).then(lt)},Ln.prototype.primaryKeys=function(lt){var ct=this._ctx;if(ct.dir==="next"&&Br(ct,!0)&&0<ct.limit)return this._read(function(xt){var Et=fo(ct,ct.table.core.schema);return ct.table.core.query({trans:xt,values:!1,limit:ct.limit,query:{index:Et,range:ct.range}})}).then(function(xt){return xt.result}).then(lt);ct.keysOnly=!ct.isMatch;var ht=[];return this.each(function(xt,Et){ht.push(Et.primaryKey)}).then(function(){return ht}).then(lt)},Ln.prototype.uniqueKeys=function(lt){return this._ctx.unique="unique",this.keys(lt)},Ln.prototype.firstKey=function(lt){return this.limit(1).keys(function(ct){return ct[0]}).then(lt)},Ln.prototype.lastKey=function(lt){return this.reverse().firstKey(lt)},Ln.prototype.distinct=function(){var lt=this._ctx,lt=lt.index&&lt.table.schema.idxByName[lt.index];if(!lt||!lt.multi)return this;var ct={};return ko(this._ctx,function(Et){var xt=Et.primaryKey.toString(),Et=st(ct,xt);return ct[xt]=!0,!Et}),this},Ln.prototype.modify=function(lt){var ct=this,ht=this._ctx;return this._write(function(xt){var Et,wt,Ct;Ct=typeof lt=="function"?lt:(Et=rt(lt),wt=Et.length,function(Lt){for(var Vt=!1,zt=0;zt<wt;++zt){var Kt=Et[zt],Xt=lt[Kt],an=kt(Lt,Kt);Xt instanceof Yr?(bt(Lt,Kt,Xt.execute(an)),Vt=!0):an!==Xt&&(bt(Lt,Kt,Xt),Vt=!0)}return Vt});function Pt(Lt,Kt){var zt=Kt.failures,Kt=Kt.numFailures;Dt+=Lt-Kt;for(var Xt=0,an=rt(zt);Xt<an.length;Xt++){var fn=an[Xt];It.push(zt[fn])}}var Mt=ht.table.core,Nt=Mt.schema.primaryKey,Ft=Nt.outbound,jt=Nt.extractKey,Ht=ct.db._options.modifyChunkSize||200,It=[],Dt=0,Bt=[];return ct.clone().primaryKeys().then(function(Lt){function Vt(Kt){var Xt=Math.min(Ht,Lt.length-Kt);return Mt.getMany({trans:xt,keys:Lt.slice(Kt,Kt+Xt),cache:"immutable"}).then(function(an){for(var fn=[],ln=[],dn=Ft?[]:null,pn=[],sn=0;sn<Xt;++sn){var Pn=an[sn],$n={value:mn(Pn),primKey:Lt[Kt+sn]};Ct.call($n,$n.value,$n)!==!1&&($n.value==null?pn.push(Lt[Kt+sn]):Ft||Mn(jt(Pn),jt($n.value))===0?(ln.push($n.value),Ft&&dn.push(Lt[Kt+sn])):(pn.push(Lt[Kt+sn]),fn.push($n.value)))}return Promise.resolve(0<fn.length&&Mt.mutate({trans:xt,type:"add",values:fn}).then(function(On){for(var jn in On.failures)pn.splice(parseInt(jn),1);Pt(fn.length,On)})).then(function(){return(0<ln.length||zt&&typeof lt=="object")&&Mt.mutate({trans:xt,type:"put",keys:dn,values:ln,criteria:zt,changeSpec:typeof lt!="function"&&lt,isAdditionalChunk:0<Kt}).then(function(On){return Pt(ln.length,On)})}).then(function(){return(0<pn.length||zt&&lt===No)&&Mt.mutate({trans:xt,type:"delete",keys:pn,criteria:zt,isAdditionalChunk:0<Kt}).then(function(On){return Pt(pn.length,On)})}).then(function(){return Lt.length>Kt+Xt&&Vt(Kt+Ht)})})}var zt=Br(ht)&&ht.limit===1/0&&(typeof lt!="function"||lt===No)&&{index:ht.index,range:ht.range};return Vt(0).then(function(){if(0<It.length)throw new En("Error modifying one or more objects",It,Dt,Bt);return Lt.length})})})},Ln.prototype.delete=function(){var lt=this._ctx,ct=lt.range;return Br(lt)&&(lt.isPrimKey||ct.type===3)?this._write(function(ht){var xt=lt.table.core.schema.primaryKey,Et=ct;return lt.table.core.count({trans:ht,query:{index:xt,range:Et}}).then(function(wt){return lt.table.core.mutate({trans:ht,type:"deleteRange",range:Et}).then(function(Ct){var Pt=Ct.failures;if(Ct.lastResult,Ct.results,Ct=Ct.numFailures,Ct)throw new En("Could not delete some values",Object.keys(Pt).map(function(Mt){return Pt[Mt]}),wt-Ct);return wt-Ct})})}):this.modify(No)},Ln);function Ln(){}var No=function(lt,ct){return ct.value=null};function Fs(lt,ct){return lt<ct?-1:lt===ct?0:1}function Hs(lt,ct){return ct<lt?-1:lt===ct?0:1}function er(lt,ct,ht){return lt=lt instanceof xs?new lt.Collection(lt):lt,lt._ctx.error=new(ht||TypeError)(ct),lt}function Ur(lt){return new lt.Collection(lt,function(){return vs("")}).limit(0)}function ho(lt,ct,ht,xt){var Et,wt,Ct,Pt,Mt,Nt,Ft,jt=ht.length;if(!ht.every(function(Dt){return typeof Dt=="string"}))return er(lt,as);function Ht(Dt){Et=Dt==="next"?function(Lt){return Lt.toUpperCase()}:function(Lt){return Lt.toLowerCase()},wt=Dt==="next"?function(Lt){return Lt.toLowerCase()}:function(Lt){return Lt.toUpperCase()},Ct=Dt==="next"?Fs:Hs;var Bt=ht.map(function(Lt){return{lower:wt(Lt),upper:Et(Lt)}}).sort(function(Lt,Vt){return Ct(Lt.lower,Vt.lower)});Pt=Bt.map(function(Lt){return Lt.upper}),Mt=Bt.map(function(Lt){return Lt.lower}),Ft=(Nt=Dt)==="next"?"":xt}Ht("next"),lt=new lt.Collection(lt,function(){return Sr(Pt[0],Mt[jt-1]+xt)}),lt._ondirectionchange=function(Dt){Ht(Dt)};var It=0;return lt._addAlgorithm(function(Dt,Bt,Lt){var Vt=Dt.key;if(typeof Vt!="string")return!1;var zt=wt(Vt);if(ct(zt,Mt,It))return!0;for(var Kt=null,Xt=It;Xt<jt;++Xt){var an=function(fn,ln,dn,pn,sn,Pn){for(var $n=Math.min(fn.length,pn.length),On=-1,jn=0;jn<$n;++jn){var or=ln[jn];if(or!==pn[jn])return sn(fn[jn],dn[jn])<0?fn.substr(0,jn)+dn[jn]+dn.substr(jn+1):sn(fn[jn],pn[jn])<0?fn.substr(0,jn)+pn[jn]+dn.substr(jn+1):0<=On?fn.substr(0,On)+ln[On]+dn.substr(On+1):null;sn(fn[jn],or)<0&&(On=jn)}return $n<pn.length&&Pn==="next"?fn+dn.substr(fn.length):$n<fn.length&&Pn==="prev"?fn.substr(0,dn.length):On<0?null:fn.substr(0,On)+pn[On]+dn.substr(On+1)}(Vt,zt,Pt[Xt],Mt[Xt],Ct,Nt);an===null&&Kt===null?It=Xt+1:(Kt===null||0<Ct(Kt,an))&&(Kt=an)}return Bt(Kt!==null?function(){Dt.continue(Kt+Ft)}:Lt),!1}),lt}function Sr(lt,ct,ht,xt){return{type:2,lower:lt,upper:ct,lowerOpen:ht,upperOpen:xt}}function vs(lt){return{type:1,lower:lt,upper:lt}}var xs=(Object.defineProperty(Kn.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Kn.prototype.between=function(lt,ct,ht,xt){ht=ht!==!1,xt=xt===!0;try{return 0<this._cmp(lt,ct)||this._cmp(lt,ct)===0&&(ht||xt)&&(!ht||!xt)?Ur(this):new this.Collection(this,function(){return Sr(lt,ct,!ht,!xt)})}catch{return er(this,pr)}},Kn.prototype.equals=function(lt){return lt==null?er(this,pr):new this.Collection(this,function(){return vs(lt)})},Kn.prototype.above=function(lt){return lt==null?er(this,pr):new this.Collection(this,function(){return Sr(lt,void 0,!0)})},Kn.prototype.aboveOrEqual=function(lt){return lt==null?er(this,pr):new this.Collection(this,function(){return Sr(lt,void 0,!1)})},Kn.prototype.below=function(lt){return lt==null?er(this,pr):new this.Collection(this,function(){return Sr(void 0,lt,!1,!0)})},Kn.prototype.belowOrEqual=function(lt){return lt==null?er(this,pr):new this.Collection(this,function(){return Sr(void 0,lt)})},Kn.prototype.startsWith=function(lt){return typeof lt!="string"?er(this,as):this.between(lt,lt+jr,!0,!0)},Kn.prototype.startsWithIgnoreCase=function(lt){return lt===""?this.startsWith(lt):ho(this,function(ct,ht){return ct.indexOf(ht[0])===0},[lt],jr)},Kn.prototype.equalsIgnoreCase=function(lt){return ho(this,function(ct,ht){return ct===ht[0]},[lt],"")},Kn.prototype.anyOfIgnoreCase=function(){var lt=on.apply(Qt,arguments);return lt.length===0?Ur(this):ho(this,function(ct,ht){return ht.indexOf(ct)!==-1},lt,"")},Kn.prototype.startsWithAnyOfIgnoreCase=function(){var lt=on.apply(Qt,arguments);return lt.length===0?Ur(this):ho(this,function(ct,ht){return ht.some(function(xt){return ct.indexOf(xt)===0})},lt,jr)},Kn.prototype.anyOf=function(){var lt=this,ct=on.apply(Qt,arguments),ht=this._cmp;try{ct.sort(ht)}catch{return er(this,pr)}if(ct.length===0)return Ur(this);var xt=new this.Collection(this,function(){return Sr(ct[0],ct[ct.length-1])});xt._ondirectionchange=function(wt){ht=wt==="next"?lt._ascending:lt._descending,ct.sort(ht)};var Et=0;return xt._addAlgorithm(function(wt,Ct,Pt){for(var Mt=wt.key;0<ht(Mt,ct[Et]);)if(++Et===ct.length)return Ct(Pt),!1;return ht(Mt,ct[Et])===0||(Ct(function(){wt.continue(ct[Et])}),!1)}),xt},Kn.prototype.notEqual=function(lt){return this.inAnyRange([[-1/0,lt],[lt,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Kn.prototype.noneOf=function(){var lt=on.apply(Qt,arguments);if(lt.length===0)return new this.Collection(this);try{lt.sort(this._ascending)}catch{return er(this,pr)}var ct=lt.reduce(function(ht,xt){return ht?ht.concat([[ht[ht.length-1][1],xt]]):[[-1/0,xt]]},null);return ct.push([lt[lt.length-1],this.db._maxKey]),this.inAnyRange(ct,{includeLowers:!1,includeUppers:!1})},Kn.prototype.inAnyRange=function(Vt,ct){var ht=this,xt=this._cmp,Et=this._ascending,wt=this._descending,Ct=this._min,Pt=this._max;if(Vt.length===0)return Ur(this);if(!Vt.every(function(zt){return zt[0]!==void 0&&zt[1]!==void 0&&Et(zt[0],zt[1])<=0}))return er(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",en.InvalidArgument);var Mt=!ct||ct.includeLowers!==!1,Nt=ct&&ct.includeUppers===!0,Ft,jt=Et;function Ht(zt,Kt){return jt(zt[0],Kt[0])}try{(Ft=Vt.reduce(function(zt,Kt){for(var Xt=0,an=zt.length;Xt<an;++Xt){var fn=zt[Xt];if(xt(Kt[0],fn[1])<0&&0<xt(Kt[1],fn[0])){fn[0]=Ct(fn[0],Kt[0]),fn[1]=Pt(fn[1],Kt[1]);break}}return Xt===an&&zt.push(Kt),zt},[])).sort(Ht)}catch{return er(this,pr)}var It=0,Dt=Nt?function(zt){return 0<Et(zt,Ft[It][1])}:function(zt){return 0<=Et(zt,Ft[It][1])},Bt=Mt?function(zt){return 0<wt(zt,Ft[It][0])}:function(zt){return 0<=wt(zt,Ft[It][0])},Lt=Dt,Vt=new this.Collection(this,function(){return Sr(Ft[0][0],Ft[Ft.length-1][1],!Mt,!Nt)});return Vt._ondirectionchange=function(zt){jt=zt==="next"?(Lt=Dt,Et):(Lt=Bt,wt),Ft.sort(Ht)},Vt._addAlgorithm(function(zt,Kt,Xt){for(var an,fn=zt.key;Lt(fn);)if(++It===Ft.length)return Kt(Xt),!1;return!Dt(an=fn)&&!Bt(an)||(ht._cmp(fn,Ft[It][1])===0||ht._cmp(fn,Ft[It][0])===0||Kt(function(){jt===Et?zt.continue(Ft[It][0]):zt.continue(Ft[It][1])}),!1)}),Vt},Kn.prototype.startsWithAnyOf=function(){var lt=on.apply(Qt,arguments);return lt.every(function(ct){return typeof ct=="string"})?lt.length===0?Ur(this):this.inAnyRange(lt.map(function(ct){return[ct,ct+jr]})):er(this,"startsWithAnyOf() only works with strings")},Kn);function Kn(){}function lr(lt){return Fn(function(ct){return Xr(ct),lt(ct.target.error),!1})}function Xr(lt){lt.stopPropagation&&lt.stopPropagation(),lt.preventDefault&&lt.preventDefault()}var Zr="storagemutated",Io="x-storagemutated-1",Cr=Gr(null,Zr),Bs=(ur.prototype._lock=function(){return St(!_n.global),++this._reculock,this._reculock!==1||_n.global||(_n.lockOwnerFor=this),this},ur.prototype._unlock=function(){if(St(!_n.global),--this._reculock==0)for(_n.global||(_n.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var lt=this._blockedFuncs.shift();try{$r(lt[1],lt[0])}catch{}}return this},ur.prototype._locked=function(){return this._reculock&&_n.lockOwnerFor!==this},ur.prototype.create=function(lt){var ct=this;if(!this.mode)return this;var ht=this.db.idbdb,xt=this.db._state.dbOpenError;if(St(!this.idbtrans),!lt&&!ht)switch(xt&&xt.name){case"DatabaseClosedError":throw new en.DatabaseClosed(xt);case"MissingAPIError":throw new en.MissingAPI(xt.message,xt);default:throw new en.OpenFailed(xt)}if(!this.active)throw new en.TransactionInactive;return St(this._completion._state===null),(lt=this.idbtrans=lt||(this.db.core||ht).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Fn(function(Et){Xr(Et),ct._reject(lt.error)}),lt.onabort=Fn(function(Et){Xr(Et),ct.active&&ct._reject(new en.Abort(lt.error)),ct.active=!1,ct.on("abort").fire(Et)}),lt.oncomplete=Fn(function(){ct.active=!1,ct._resolve(),"mutatedParts"in lt&&Cr.storagemutated.fire(lt.mutatedParts)}),this},ur.prototype._promise=function(lt,ct,ht){var xt=this;if(lt==="readwrite"&&this.mode!=="readwrite")return Wn(new en.ReadOnly("Transaction is readonly"));if(!this.active)return Wn(new en.TransactionInactive);if(this._locked())return new gn(function(wt,Ct){xt._blockedFuncs.push([function(){xt._promise(lt,ct,ht).then(wt,Ct)},_n])});if(ht)return _r(function(){var wt=new gn(function(Ct,Pt){xt._lock();var Mt=ct(Ct,Pt,xt);Mt&&Mt.then&&Mt.then(Ct,Pt)});return wt.finally(function(){return xt._unlock()}),wt._lib=!0,wt});var Et=new gn(function(wt,Ct){var Pt=ct(wt,Ct,xt);Pt&&Pt.then&&Pt.then(wt,Ct)});return Et._lib=!0,Et},ur.prototype._root=function(){return this.parent?this.parent._root():this},ur.prototype.waitFor=function(lt){var ct,ht=this._root(),xt=gn.resolve(lt);ht._waitingFor?ht._waitingFor=ht._waitingFor.then(function(){return xt}):(ht._waitingFor=xt,ht._waitingQueue=[],ct=ht.idbtrans.objectStore(ht.storeNames[0]),function wt(){for(++ht._spinCount;ht._waitingQueue.length;)ht._waitingQueue.shift()();ht._waitingFor&&(ct.get(-1/0).onsuccess=wt)}());var Et=ht._waitingFor;return new gn(function(wt,Ct){xt.then(function(Pt){return ht._waitingQueue.push(Fn(wt.bind(null,Pt)))},function(Pt){return ht._waitingQueue.push(Fn(Ct.bind(null,Pt)))}).finally(function(){ht._waitingFor===Et&&(ht._waitingFor=null)})})},ur.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new en.Abort))},ur.prototype.table=function(lt){var ct=this._memoizedTables||(this._memoizedTables={});if(st(ct,lt))return ct[lt];var ht=this.schema[lt];if(!ht)throw new en.NotFound("Table "+lt+" not part of transaction");return ht=new this.db.Table(lt,ht,this),ht.core=this.db.core.table(lt),ct[lt]=ht},ur);function ur(){}function Mo(lt,ct,ht,xt,Et,wt,Ct){return{name:lt,keyPath:ct,unique:ht,multi:xt,auto:Et,compound:wt,src:(ht&&!Ct?"&":"")+(xt?"*":"")+(Et?"++":"")+ys(ct)}}function ys(lt){return typeof lt=="string"?lt:lt?"["+[].join.call(lt,"+")+"]":""}function Lo(lt,ct,ht){return{name:lt,primKey:ct,indexes:ht,mappedClass:null,idxByName:(xt=function(Et){return[Et.name,Et]},ht.reduce(function(Et,wt,Ct){return Ct=xt(wt,Ct),Ct&&(Et[Ct[0]]=Ct[1]),Et},{}))};var xt}var Jr=function(lt){try{return lt.only([[]]),Jr=function(){return[[]]},[[]]}catch{return Jr=function(){return jr},jr}};function Do(lt){return lt==null?function(){}:typeof lt=="string"?(ct=lt).split(".").length===1?function(ht){return ht[ct]}:function(ht){return kt(ht,ct)}:function(ht){return kt(ht,lt)};var ct}function Es(lt){return[].slice.call(lt)}var Us=0;function eo(lt){return lt==null?":id":typeof lt=="string"?lt:"[".concat(lt.join("+"),"]")}function Vs(lt,ct,Mt){function xt(Lt){if(Lt.type===3)return null;if(Lt.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var It=Lt.lower,Dt=Lt.upper,Bt=Lt.lowerOpen,Lt=Lt.upperOpen;return It===void 0?Dt===void 0?null:ct.upperBound(Dt,!!Lt):Dt===void 0?ct.lowerBound(It,!!Bt):ct.bound(It,Dt,!!Bt,!!Lt)}function Et(Ht){var It,Dt=Ht.name;return{name:Dt,schema:Ht,mutate:function(Bt){var Lt=Bt.trans,Vt=Bt.type,zt=Bt.keys,Kt=Bt.values,Xt=Bt.range;return new Promise(function(an,fn){an=Fn(an);var ln=Lt.objectStore(Dt),dn=ln.keyPath==null,pn=Vt==="put"||Vt==="add";if(!pn&&Vt!=="delete"&&Vt!=="deleteRange")throw new Error("Invalid operation type: "+Vt);var sn,Pn=(zt||Kt||{length:1}).length;if(zt&&Kt&&zt.length!==Kt.length)throw new Error("Given keys array must have same length as given values array.");if(Pn===0)return an({numFailures:0,failures:{},results:[],lastResult:void 0});function $n(Jn){++or,Xr(Jn)}var On=[],jn=[],or=0;if(Vt==="deleteRange"){if(Xt.type===4)return an({numFailures:or,failures:jn,results:[],lastResult:void 0});Xt.type===3?On.push(sn=ln.clear()):On.push(sn=ln.delete(xt(Xt)))}else{var dn=pn?dn?[Kt,zt]:[Kt,null]:[zt,null],kn=dn[0],Yn=dn[1];if(pn)for(var Xn=0;Xn<Pn;++Xn)On.push(sn=Yn&&Yn[Xn]!==void 0?ln[Vt](kn[Xn],Yn[Xn]):ln[Vt](kn[Xn])),sn.onerror=$n;else for(Xn=0;Xn<Pn;++Xn)On.push(sn=ln[Vt](kn[Xn])),sn.onerror=$n}function Ao(Jn){Jn=Jn.target.result,On.forEach(function(Ir,rs){return Ir.error!=null&&(jn[rs]=Ir.error)}),an({numFailures:or,failures:jn,results:Vt==="delete"?zt:On.map(function(Ir){return Ir.result}),lastResult:Jn})}sn.onerror=function(Jn){$n(Jn),Ao(Jn)},sn.onsuccess=Ao})},getMany:function(Bt){var Lt=Bt.trans,Vt=Bt.keys;return new Promise(function(zt,Kt){zt=Fn(zt);for(var Xt,an=Lt.objectStore(Dt),fn=Vt.length,ln=new Array(fn),dn=0,pn=0,sn=function(On){On=On.target,ln[On._pos]=On.result,++pn===dn&&zt(ln)},Pn=lr(Kt),$n=0;$n<fn;++$n)Vt[$n]!=null&&((Xt=an.get(Vt[$n]))._pos=$n,Xt.onsuccess=sn,Xt.onerror=Pn,++dn);dn===0&&zt(ln)})},get:function(Bt){var Lt=Bt.trans,Vt=Bt.key;return new Promise(function(zt,Kt){zt=Fn(zt);var Xt=Lt.objectStore(Dt).get(Vt);Xt.onsuccess=function(an){return zt(an.target.result)},Xt.onerror=lr(Kt)})},query:(It=Nt,function(Bt){return new Promise(function(Lt,Vt){Lt=Fn(Lt);var zt,Kt,Xt,dn=Bt.trans,an=Bt.values,fn=Bt.limit,sn=Bt.query,ln=fn===1/0?void 0:fn,pn=sn.index,sn=sn.range,dn=dn.objectStore(Dt),pn=pn.isPrimaryKey?dn:dn.index(pn.name),sn=xt(sn);if(fn===0)return Lt({result:[]});It?((ln=an?pn.getAll(sn,ln):pn.getAllKeys(sn,ln)).onsuccess=function(Pn){return Lt({result:Pn.target.result})},ln.onerror=lr(Vt)):(zt=0,Kt=!an&&"openKeyCursor"in pn?pn.openKeyCursor(sn):pn.openCursor(sn),Xt=[],Kt.onsuccess=function(Pn){var $n=Kt.result;return $n?(Xt.push(an?$n.value:$n.primaryKey),++zt===fn?Lt({result:Xt}):void $n.continue()):Lt({result:Xt})},Kt.onerror=lr(Vt))})}),openCursor:function(Bt){var Lt=Bt.trans,Vt=Bt.values,zt=Bt.query,Kt=Bt.reverse,Xt=Bt.unique;return new Promise(function(an,fn){an=Fn(an);var pn=zt.index,ln=zt.range,dn=Lt.objectStore(Dt),dn=pn.isPrimaryKey?dn:dn.index(pn.name),pn=Kt?Xt?"prevunique":"prev":Xt?"nextunique":"next",sn=!Vt&&"openKeyCursor"in dn?dn.openKeyCursor(xt(ln),pn):dn.openCursor(xt(ln),pn);sn.onerror=lr(fn),sn.onsuccess=Fn(function(Pn){var $n,On,jn,or,kn=sn.result;kn?(kn.___id=++Us,kn.done=!1,$n=kn.continue.bind(kn),On=(On=kn.continuePrimaryKey)&&On.bind(kn),jn=kn.advance.bind(kn),or=function(){throw new Error("Cursor not stopped")},kn.trans=Lt,kn.stop=kn.continue=kn.continuePrimaryKey=kn.advance=function(){throw new Error("Cursor not started")},kn.fail=Fn(fn),kn.next=function(){var Yn=this,Xn=1;return this.start(function(){return Xn--?Yn.continue():Yn.stop()}).then(function(){return Yn})},kn.start=function(Yn){function Xn(){if(sn.result)try{Yn()}catch(Jn){kn.fail(Jn)}else kn.done=!0,kn.start=function(){throw new Error("Cursor behind last entry")},kn.stop()}var Ao=new Promise(function(Jn,Ir){Jn=Fn(Jn),sn.onerror=lr(Ir),kn.fail=Ir,kn.stop=function(rs){kn.stop=kn.continue=kn.continuePrimaryKey=kn.advance=or,Jn(rs)}});return sn.onsuccess=Fn(function(Jn){sn.onsuccess=Xn,Xn()}),kn.continue=$n,kn.continuePrimaryKey=On,kn.advance=jn,Xn(),Ao},an(kn)):an(null)},fn)})},count:function(Bt){var Lt=Bt.query,Vt=Bt.trans,zt=Lt.index,Kt=Lt.range;return new Promise(function(Xt,an){var fn=Vt.objectStore(Dt),ln=zt.isPrimaryKey?fn:fn.index(zt.name),fn=xt(Kt),ln=fn?ln.count(fn):ln.count();ln.onsuccess=Fn(function(dn){return Xt(dn.target.result)}),ln.onerror=lr(an)})}}}var wt,Ct,Pt,Ft=(Ct=Mt,Pt=Es((wt=lt).objectStoreNames),{schema:{name:wt.name,tables:Pt.map(function(Ht){return Ct.objectStore(Ht)}).map(function(Ht){var It=Ht.keyPath,Lt=Ht.autoIncrement,Dt=ot(It),Bt={},Lt={name:Ht.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:It==null,compound:Dt,keyPath:It,autoIncrement:Lt,unique:!0,extractKey:Do(It)},indexes:Es(Ht.indexNames).map(function(Vt){return Ht.index(Vt)}).map(function(Xt){var zt=Xt.name,Kt=Xt.unique,an=Xt.multiEntry,Xt=Xt.keyPath,an={name:zt,compound:ot(Xt),keyPath:Xt,unique:Kt,multiEntry:an,extractKey:Do(Xt)};return Bt[eo(Xt)]=an}),getIndexByKeyPath:function(Vt){return Bt[eo(Vt)]}};return Bt[":id"]=Lt.primaryKey,It!=null&&(Bt[eo(It)]=Lt.primaryKey),Lt})},hasGetAll:0<Pt.length&&"getAll"in Ct.objectStore(Pt[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),Mt=Ft.schema,Nt=Ft.hasGetAll,Ft=Mt.tables.map(Et),jt={};return Ft.forEach(function(Ht){return jt[Ht.name]=Ht}),{stack:"dbcore",transaction:lt.transaction.bind(lt),table:function(Ht){if(!jt[Ht])throw new Error("Table '".concat(Ht,"' not found"));return jt[Ht]},MIN_KEY:-1/0,MAX_KEY:Jr(ct),schema:Mt}}function qs(lt,ct,ht,xt){var Et=ht.IDBKeyRange;return ht.indexedDB,{dbcore:(xt=Vs(ct,Et,xt),lt.dbcore.reduce(function(wt,Ct){return Ct=Ct.create,et(et({},wt),Ct(wt))},xt))}}function mo(lt,xt){var ht=xt.db,xt=qs(lt._middlewares,ht,lt._deps,xt);lt.core=xt.dbcore,lt.tables.forEach(function(Et){var wt=Et.name;lt.core.schema.tables.some(function(Ct){return Ct.name===wt})&&(Et.core=lt.core.table(wt),lt[wt]instanceof lt.Table&&(lt[wt].core=Et.core))})}function go(lt,ct,ht,xt){ht.forEach(function(Et){var wt=xt[Et];ct.forEach(function(Ct){var Pt=function Mt(Nt,Ft){return yt(Nt,Ft)||(Nt=at(Nt))&&Mt(Nt,Ft)}(Ct,Et);(!Pt||"value"in Pt&&Pt.value===void 0)&&(Ct===lt.Transaction.prototype||Ct instanceof lt.Transaction?pt(Ct,Et,{get:function(){return this.table(Et)},set:function(Mt){ft(this,Et,{value:Mt,writable:!0,configurable:!0,enumerable:!0})}}):Ct[Et]=new lt.Table(Et,wt))})})}function Fo(lt,ct){ct.forEach(function(ht){for(var xt in ht)ht[xt]instanceof lt.Table&&delete ht[xt]})}function Ws(lt,ct){return lt._cfg.version-ct._cfg.version}function zs(lt,ct,ht,xt){var Et=lt._dbSchema;ht.objectStoreNames.contains("$meta")&&!Et.$meta&&(Et.$meta=Lo("$meta",ws("")[0],[]),lt._storeNames.push("$meta"));var wt=lt._createTransaction("readwrite",lt._storeNames,Et);wt.create(ht),wt._completion.catch(xt);var Ct=wt._reject.bind(wt),Pt=_n.transless||_n;_r(function(){return _n.trans=wt,_n.transless=Pt,ct!==0?(mo(lt,ht),Nt=ct,((Mt=wt).storeNames.includes("$meta")?Mt.table("$meta").get("version").then(function(Ft){return Ft??Nt}):gn.resolve(Nt)).then(function(Ft){return Ht=Ft,It=wt,Dt=ht,Bt=[],Ft=(jt=lt)._versions,Lt=jt._dbSchema=xo(0,jt.idbdb,Dt),(Ft=Ft.filter(function(Vt){return Vt._cfg.version>=Ht})).length!==0?(Ft.forEach(function(Vt){Bt.push(function(){var zt=Lt,Kt=Vt._cfg.dbschema;yo(jt,zt,Dt),yo(jt,Kt,Dt),Lt=jt._dbSchema=Kt;var Xt=Ho(zt,Kt);Xt.add.forEach(function(pn){Bo(Dt,pn[0],pn[1].primKey,pn[1].indexes)}),Xt.change.forEach(function(pn){if(pn.recreate)throw new en.Upgrade("Not yet support for changing primary key");var sn=Dt.objectStore(pn.name);pn.add.forEach(function(Pn){return vo(sn,Pn)}),pn.change.forEach(function(Pn){sn.deleteIndex(Pn.name),vo(sn,Pn)}),pn.del.forEach(function(Pn){return sn.deleteIndex(Pn)})});var an=Vt._cfg.contentUpgrade;if(an&&Vt._cfg.version>Ht){mo(jt,Dt),It._memoizedTables={};var fn=Rt(Kt);Xt.del.forEach(function(pn){fn[pn]=zt[pn]}),Fo(jt,[jt.Transaction.prototype]),go(jt,[jt.Transaction.prototype],rt(fn),fn),It.schema=fn;var ln,dn=nn(an);return dn&&Dr(),Xt=gn.follow(function(){var pn;(ln=an(It))&&dn&&(pn=wr.bind(null,null),ln.then(pn,pn))}),ln&&typeof ln.then=="function"?gn.resolve(ln):Xt.then(function(){return ln})}}),Bt.push(function(zt){var Kt,Xt,an=Vt._cfg.dbschema;Kt=an,Xt=zt,[].slice.call(Xt.db.objectStoreNames).forEach(function(fn){return Kt[fn]==null&&Xt.db.deleteObjectStore(fn)}),Fo(jt,[jt.Transaction.prototype]),go(jt,[jt.Transaction.prototype],jt._storeNames,jt._dbSchema),It.schema=jt._dbSchema}),Bt.push(function(zt){jt.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(jt.idbdb.version/10)===Vt._cfg.version?(jt.idbdb.deleteObjectStore("$meta"),delete jt._dbSchema.$meta,jt._storeNames=jt._storeNames.filter(function(Kt){return Kt!=="$meta"})):zt.objectStore("$meta").put(Vt._cfg.version,"version"))})}),function Vt(){return Bt.length?gn.resolve(Bt.shift()(It.idbtrans)).then(Vt):gn.resolve()}().then(function(){_s(Lt,Dt)})):gn.resolve();var jt,Ht,It,Dt,Bt,Lt}).catch(Ct)):(rt(Et).forEach(function(Ft){Bo(ht,Ft,Et[Ft].primKey,Et[Ft].indexes)}),mo(lt,ht),void gn.follow(function(){return lt.on.populate.fire(wt)}).catch(Ct));var Mt,Nt})}function Ks(lt,ct){_s(lt._dbSchema,ct),ct.db.version%10!=0||ct.objectStoreNames.contains("$meta")||ct.db.createObjectStore("$meta").add(Math.ceil(ct.db.version/10-1),"version");var ht=xo(0,lt.idbdb,ct);yo(lt,lt._dbSchema,ct);for(var xt=0,Et=Ho(ht,lt._dbSchema).change;xt<Et.length;xt++){var wt=function(Ct){if(Ct.change.length||Ct.recreate)return console.warn("Unable to patch indexes of table ".concat(Ct.name," because it has changes on the type of index or primary key.")),{value:void 0};var Pt=ct.objectStore(Ct.name);Ct.add.forEach(function(Mt){tr&&console.debug("Dexie upgrade patch: Creating missing index ".concat(Ct.name,".").concat(Mt.src)),vo(Pt,Mt)})}(Et[xt]);if(typeof wt=="object")return wt.value}}function Ho(lt,ct){var ht,xt={del:[],add:[],change:[]};for(ht in lt)ct[ht]||xt.del.push(ht);for(ht in ct){var Et=lt[ht],wt=ct[ht];if(Et){var Ct={name:ht,def:wt,recreate:!1,del:[],add:[],change:[]};if(""+(Et.primKey.keyPath||"")!=""+(wt.primKey.keyPath||"")||Et.primKey.auto!==wt.primKey.auto)Ct.recreate=!0,xt.change.push(Ct);else{var Pt=Et.idxByName,Mt=wt.idxByName,Nt=void 0;for(Nt in Pt)Mt[Nt]||Ct.del.push(Nt);for(Nt in Mt){var Ft=Pt[Nt],jt=Mt[Nt];Ft?Ft.src!==jt.src&&Ct.change.push(jt):Ct.add.push(jt)}(0<Ct.del.length||0<Ct.add.length||0<Ct.change.length)&&xt.change.push(Ct)}}else xt.add.push([ht,wt])}return xt}function Bo(lt,ct,ht,xt){var Et=lt.db.createObjectStore(ct,ht.keyPath?{keyPath:ht.keyPath,autoIncrement:ht.auto}:{autoIncrement:ht.auto});return xt.forEach(function(wt){return vo(Et,wt)}),Et}function _s(lt,ct){rt(lt).forEach(function(ht){ct.db.objectStoreNames.contains(ht)||(tr&&console.debug("Dexie: Creating missing table",ht),Bo(ct,ht,lt[ht].primKey,lt[ht].indexes))})}function vo(lt,ct){lt.createIndex(ct.name,ct.keyPath,{unique:ct.unique,multiEntry:ct.multi})}function xo(lt,ct,ht){var xt={};return vt(ct.objectStoreNames,0).forEach(function(Et){for(var wt=ht.objectStore(Et),Ct=Mo(ys(Nt=wt.keyPath),Nt||"",!0,!1,!!wt.autoIncrement,Nt&&typeof Nt!="string",!0),Pt=[],Mt=0;Mt<wt.indexNames.length;++Mt){var Ft=wt.index(wt.indexNames[Mt]),Nt=Ft.keyPath,Ft=Mo(Ft.name,Nt,!!Ft.unique,!!Ft.multiEntry,!1,Nt&&typeof Nt!="string",!1);Pt.push(Ft)}xt[Et]=Lo(Et,Ct,Pt)}),xt}function yo(lt,ct,ht){for(var xt=ht.db.objectStoreNames,Et=0;Et<xt.length;++Et){var wt=xt[Et],Ct=ht.objectStore(wt);lt._hasGetAll="getAll"in Ct;for(var Pt=0;Pt<Ct.indexNames.length;++Pt){var Mt=Ct.indexNames[Pt],Nt=Ct.index(Mt).keyPath,Ft=typeof Nt=="string"?Nt:"["+vt(Nt).join("+")+"]";!ct[wt]||(Nt=ct[wt].idxByName[Ft])&&(Nt.name=Mt,delete ct[wt].idxByName[Ft],ct[wt].idxByName[Mt]=Nt)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&nt.WorkerGlobalScope&&nt instanceof nt.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(lt._hasGetAll=!1)}function ws(lt){return lt.split(",").map(function(ct,ht){var xt=(ct=ct.trim()).replace(/([&*]|\+\+)/g,""),Et=/^\[/.test(xt)?xt.match(/^\[(.*)\]$/)[1].split("+"):xt;return Mo(xt,Et||null,/\&/.test(ct),/\*/.test(ct),/\+\+/.test(ct),ot(Et),ht===0)})}var Gs=(Eo.prototype._parseStoresSpec=function(lt,ct){rt(lt).forEach(function(ht){if(lt[ht]!==null){var xt=ws(lt[ht]),Et=xt.shift();if(Et.unique=!0,Et.multi)throw new en.Schema("Primary key cannot be multi-valued");xt.forEach(function(wt){if(wt.auto)throw new en.Schema("Only primary key can be marked as autoIncrement (++)");if(!wt.keyPath)throw new en.Schema("Index must have a name and cannot be an empty string")}),ct[ht]=Lo(ht,Et,xt)}})},Eo.prototype.stores=function(ht){var ct=this.db;this._cfg.storesSource=this._cfg.storesSource?it(this._cfg.storesSource,ht):ht;var ht=ct._versions,xt={},Et={};return ht.forEach(function(wt){it(xt,wt._cfg.storesSource),Et=wt._cfg.dbschema={},wt._parseStoresSpec(xt,Et)}),ct._dbSchema=Et,Fo(ct,[ct._allTables,ct,ct.Transaction.prototype]),go(ct,[ct._allTables,ct,ct.Transaction.prototype,this._cfg.tables],rt(Et),Et),ct._storeNames=rt(Et),this},Eo.prototype.upgrade=function(lt){return this._cfg.contentUpgrade=Mr(this._cfg.contentUpgrade||xn,lt),this},Eo);function Eo(){}function Uo(lt,ct){var ht=lt._dbNamesDB;return ht||(ht=lt._dbNamesDB=new mr(uo,{addons:[],indexedDB:lt,IDBKeyRange:ct})).version(1).stores({dbnames:"name"}),ht.table("dbnames")}function Vo(lt){return lt&&typeof lt.databases=="function"}function qo(lt){return _r(function(){return _n.letThrough=!0,lt()})}function Wo(lt){return!("from"in lt)}var Zn=function(lt,ct){if(!this){var ht=new Zn;return lt&&"d"in lt&&it(ht,lt),ht}it(this,arguments.length?{d:1,from:lt,to:1<arguments.length?ct:lt}:{d:0})};function no(lt,ct,ht){var xt=Mn(ct,ht);if(!isNaN(xt)){if(0<xt)throw RangeError();if(Wo(lt))return it(lt,{from:ct,to:ht,d:1});var Et=lt.l,xt=lt.r;if(Mn(ht,lt.from)<0)return Et?no(Et,ct,ht):lt.l={from:ct,to:ht,d:1,l:null,r:null},Ss(lt);if(0<Mn(ct,lt.to))return xt?no(xt,ct,ht):lt.r={from:ct,to:ht,d:1,l:null,r:null},Ss(lt);Mn(ct,lt.from)<0&&(lt.from=ct,lt.l=null,lt.d=xt?xt.d+1:1),0<Mn(ht,lt.to)&&(lt.to=ht,lt.r=null,lt.d=lt.l?lt.l.d+1:1),ht=!lt.r,Et&&!lt.l&&ro(lt,Et),xt&&ht&&ro(lt,xt)}}function ro(lt,ct){Wo(ct)||function ht(xt,Mt){var wt=Mt.from,Ct=Mt.to,Pt=Mt.l,Mt=Mt.r;no(xt,wt,Ct),Pt&&ht(xt,Pt),Mt&&ht(xt,Mt)}(lt,ct)}function bs(lt,ct){var ht=_o(ct),xt=ht.next();if(xt.done)return!1;for(var Et=xt.value,wt=_o(lt),Ct=wt.next(Et.from),Pt=Ct.value;!xt.done&&!Ct.done;){if(Mn(Pt.from,Et.to)<=0&&0<=Mn(Pt.to,Et.from))return!0;Mn(Et.from,Pt.from)<0?Et=(xt=ht.next(Pt.from)).value:Pt=(Ct=wt.next(Et.from)).value}return!1}function _o(lt){var ct=Wo(lt)?null:{s:0,n:lt};return{next:function(ht){for(var xt=0<arguments.length;ct;)switch(ct.s){case 0:if(ct.s=1,xt)for(;ct.n.l&&Mn(ht,ct.n.from)<0;)ct={up:ct,n:ct.n.l,s:1};else for(;ct.n.l;)ct={up:ct,n:ct.n.l,s:1};case 1:if(ct.s=2,!xt||Mn(ht,ct.n.to)<=0)return{value:ct.n,done:!1};case 2:if(ct.n.r){ct.s=3,ct={up:ct,n:ct.n.r,s:0};continue}case 3:ct=ct.up}return{done:!0}}}}function Ss(lt){var ct,ht,xt=(((ct=lt.r)===null||ct===void 0?void 0:ct.d)||0)-(((ht=lt.l)===null||ht===void 0?void 0:ht.d)||0),Et=1<xt?"r":xt<-1?"l":"";Et&&(ct=Et=="r"?"l":"r",ht=et({},lt),xt=lt[Et],lt.from=xt.from,lt.to=xt.to,lt[Et]=xt[Et],ht[Et]=xt[ct],(lt[ct]=ht).d=Cs(ht)),lt.d=Cs(lt)}function Cs(ht){var ct=ht.r,ht=ht.l;return(ct?ht?Math.max(ct.d,ht.d):ct.d:ht?ht.d:0)+1}function wo(lt,ct){return rt(ct).forEach(function(ht){lt[ht]?ro(lt[ht],ct[ht]):lt[ht]=function xt(Et){var wt,Ct,Pt={};for(wt in Et)st(Et,wt)&&(Ct=Et[wt],Pt[wt]=!Ct||typeof Ct!="object"||Yt.has(Ct.constructor)?Ct:xt(Ct));return Pt}(ct[ht])}),lt}function zo(lt,ct){return lt.all||ct.all||Object.keys(lt).some(function(ht){return ct[ht]&&bs(ct[ht],lt[ht])})}ut(Zn.prototype,((nr={add:function(lt){return ro(this,lt),this},addKey:function(lt){return no(this,lt,lt),this},addKeys:function(lt){var ct=this;return lt.forEach(function(ht){return no(ct,ht,ht)}),this},hasKey:function(lt){var ct=_o(this).next(lt).value;return ct&&Mn(ct.from,lt)<=0&&0<=Mn(ct.to,lt)}})[Jt]=function(){return _o(this)},nr));var Or={},Ko={},Go=!1;function bo(lt){wo(Ko,lt),Go||(Go=!0,setTimeout(function(){Go=!1,Qo(Ko,!(Ko={}))},0))}function Qo(lt,ct){ct===void 0&&(ct=!1);var ht=new Set;if(lt.all)for(var xt=0,Et=Object.values(Or);xt<Et.length;xt++)Rs(Ct=Et[xt],lt,ht,ct);else for(var wt in lt){var Ct,Pt=/^idb\:\/\/(.*)\/(.*)\//.exec(wt);Pt&&(wt=Pt[1],Pt=Pt[2],(Ct=Or["idb://".concat(wt,"/").concat(Pt)])&&Rs(Ct,lt,ht,ct))}ht.forEach(function(Mt){return Mt()})}function Rs(lt,ct,ht,xt){for(var Et=[],wt=0,Ct=Object.entries(lt.queries.query);wt<Ct.length;wt++){for(var Pt=Ct[wt],Mt=Pt[0],Nt=[],Ft=0,jt=Pt[1];Ft<jt.length;Ft++){var Ht=jt[Ft];zo(ct,Ht.obsSet)?Ht.subscribers.forEach(function(Lt){return ht.add(Lt)}):xt&&Nt.push(Ht)}xt&&Et.push([Mt,Nt])}if(xt)for(var It=0,Dt=Et;It<Dt.length;It++){var Bt=Dt[It],Mt=Bt[0],Nt=Bt[1];lt.queries.query[Mt]=Nt}}function Qs(lt){var ct=lt._state,ht=lt._deps.indexedDB;if(ct.isBeingOpened||lt.idbdb)return ct.dbReadyPromise.then(function(){return ct.dbOpenError?Wn(ct.dbOpenError):lt});ct.isBeingOpened=!0,ct.dbOpenError=null,ct.openComplete=!1;var xt=ct.openCanceller,Et=Math.round(10*lt.verno),wt=!1;function Ct(){if(ct.openCanceller!==xt)throw new en.DatabaseClosed("db.open() was cancelled")}function Pt(){return new gn(function(Ht,It){if(Ct(),!ht)throw new en.MissingAPI;var Dt=lt.name,Bt=ct.autoSchema||!Et?ht.open(Dt):ht.open(Dt,Et);if(!Bt)throw new en.MissingAPI;Bt.onerror=lr(It),Bt.onblocked=Fn(lt._fireOnBlocked),Bt.onupgradeneeded=Fn(function(Lt){var Vt;Ft=Bt.transaction,ct.autoSchema&&!lt._options.allowEmptyDB?(Bt.onerror=Xr,Ft.abort(),Bt.result.close(),(Vt=ht.deleteDatabase(Dt)).onsuccess=Vt.onerror=Fn(function(){It(new en.NoSuchDatabase("Database ".concat(Dt," doesnt exist")))})):(Ft.onerror=lr(It),Lt=Lt.oldVersion>Math.pow(2,62)?0:Lt.oldVersion,jt=Lt<1,lt.idbdb=Bt.result,wt&&Ks(lt,Ft),zs(lt,Lt/10,Ft,It))},It),Bt.onsuccess=Fn(function(){Ft=null;var Lt,Vt,zt,Kt,Xt,an=lt.idbdb=Bt.result,fn=vt(an.objectStoreNames);if(0<fn.length)try{var ln=an.transaction((Kt=fn).length===1?Kt[0]:Kt,"readonly");if(ct.autoSchema)Vt=an,zt=ln,(Lt=lt).verno=Vt.version/10,zt=Lt._dbSchema=xo(0,Vt,zt),Lt._storeNames=vt(Vt.objectStoreNames,0),go(Lt,[Lt._allTables],rt(zt),zt);else if(yo(lt,lt._dbSchema,ln),((Xt=Ho(xo(0,(Xt=lt).idbdb,ln),Xt._dbSchema)).add.length||Xt.change.some(function(dn){return dn.add.length||dn.change.length}))&&!wt)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),an.close(),Et=an.version+1,wt=!0,Ht(Pt());mo(lt,ln)}catch{}Fr.push(lt),an.onversionchange=Fn(function(dn){ct.vcFired=!0,lt.on("versionchange").fire(dn)}),an.onclose=Fn(function(dn){lt.on("close").fire(dn)}),jt&&(Xt=lt._deps,ln=Dt,an=Xt.indexedDB,Xt=Xt.IDBKeyRange,Vo(an)||ln===uo||Uo(an,Xt).put({name:ln}).catch(xn)),Ht()},It)}).catch(function(Ht){switch(Ht==null?void 0:Ht.name){case"UnknownError":if(0<ct.PR1398_maxLoop)return ct.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),Pt();break;case"VersionError":if(0<Et)return Et=0,Pt()}return gn.reject(Ht)})}var Mt,Nt=ct.dbReadyResolve,Ft=null,jt=!1;return gn.race([xt,(typeof navigator>"u"?gn.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Ht){function It(){return indexedDB.databases().finally(Ht)}Mt=setInterval(It,100),It()}).finally(function(){return clearInterval(Mt)}):Promise.resolve()).then(Pt)]).then(function(){return Ct(),ct.onReadyBeingFired=[],gn.resolve(qo(function(){return lt.on.ready.fire(lt.vip)})).then(function Ht(){if(0<ct.onReadyBeingFired.length){var It=ct.onReadyBeingFired.reduce(Mr,xn);return ct.onReadyBeingFired=[],gn.resolve(qo(function(){return It(lt.vip)})).then(Ht)}})}).finally(function(){ct.openCanceller===xt&&(ct.onReadyBeingFired=null,ct.isBeingOpened=!1)}).catch(function(Ht){ct.dbOpenError=Ht;try{Ft&&Ft.abort()}catch{}return xt===ct.openCanceller&&lt._close(),Wn(Ht)}).finally(function(){ct.openComplete=!0,Nt()}).then(function(){var Ht;return jt&&(Ht={},lt.tables.forEach(function(It){It.schema.indexes.forEach(function(Dt){Dt.name&&(Ht["idb://".concat(lt.name,"/").concat(It.name,"/").concat(Dt.name)]=new Zn(-1/0,[[[]]]))}),Ht["idb://".concat(lt.name,"/").concat(It.name,"/")]=Ht["idb://".concat(lt.name,"/").concat(It.name,"/:dels")]=new Zn(-1/0,[[[]]])}),Cr(Zr).fire(Ht),Qo(Ht,!0)),lt})}function Yo(lt){function ct(wt){return lt.next(wt)}var ht=Et(ct),xt=Et(function(wt){return lt.throw(wt)});function Et(wt){return function(Mt){var Pt=wt(Mt),Mt=Pt.value;return Pt.done?Mt:Mt&&typeof Mt.then=="function"?Mt.then(ht,xt):ot(Mt)?Promise.all(Mt).then(ht,xt):ht(Mt)}}return Et(ct)()}function So(lt,ct,ht){for(var xt=ot(lt)?lt.slice():[lt],Et=0;Et<ht;++Et)xt.push(ct);return xt}var Ys={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(lt){return et(et({},lt),{table:function(ct){var ht=lt.table(ct),xt=ht.schema,Et={},wt=[];function Ct(jt,Ht,It){var Dt=eo(jt),Bt=Et[Dt]=Et[Dt]||[],Lt=jt==null?0:typeof jt=="string"?1:jt.length,Vt=0<Ht,Vt=et(et({},It),{name:Vt?"".concat(Dt,"(virtual-from:").concat(It.name,")"):It.name,lowLevelIndex:It,isVirtual:Vt,keyTail:Ht,keyLength:Lt,extractKey:Do(jt),unique:!Vt&&It.unique});return Bt.push(Vt),Vt.isPrimaryKey||wt.push(Vt),1<Lt&&Ct(Lt===2?jt[0]:jt.slice(0,Lt-1),Ht+1,It),Bt.sort(function(zt,Kt){return zt.keyTail-Kt.keyTail}),Vt}ct=Ct(xt.primaryKey.keyPath,0,xt.primaryKey),Et[":id"]=[ct];for(var Pt=0,Mt=xt.indexes;Pt<Mt.length;Pt++){var Nt=Mt[Pt];Ct(Nt.keyPath,0,Nt)}function Ft(jt){var Ht,It=jt.query.index;return It.isVirtual?et(et({},jt),{query:{index:It.lowLevelIndex,range:(Ht=jt.query.range,It=It.keyTail,{type:Ht.type===1?2:Ht.type,lower:So(Ht.lower,Ht.lowerOpen?lt.MAX_KEY:lt.MIN_KEY,It),lowerOpen:!0,upper:So(Ht.upper,Ht.upperOpen?lt.MIN_KEY:lt.MAX_KEY,It),upperOpen:!0})}}):jt}return et(et({},ht),{schema:et(et({},xt),{primaryKey:ct,indexes:wt,getIndexByKeyPath:function(jt){return(jt=Et[eo(jt)])&&jt[0]}}),count:function(jt){return ht.count(Ft(jt))},query:function(jt){return ht.query(Ft(jt))},openCursor:function(jt){var Ht=jt.query.index,It=Ht.keyTail,Dt=Ht.isVirtual,Bt=Ht.keyLength;return Dt?ht.openCursor(Ft(jt)).then(function(Vt){return Vt&&Lt(Vt)}):ht.openCursor(jt);function Lt(Vt){return Object.create(Vt,{continue:{value:function(zt){zt!=null?Vt.continue(So(zt,jt.reverse?lt.MAX_KEY:lt.MIN_KEY,It)):jt.unique?Vt.continue(Vt.key.slice(0,Bt).concat(jt.reverse?lt.MIN_KEY:lt.MAX_KEY,It)):Vt.continue()}},continuePrimaryKey:{value:function(zt,Kt){Vt.continuePrimaryKey(So(zt,lt.MAX_KEY,It),Kt)}},primaryKey:{get:function(){return Vt.primaryKey}},key:{get:function(){var zt=Vt.key;return Bt===1?zt[0]:zt.slice(0,Bt)}},value:{get:function(){return Vt.value}}})}}})}})}};function Xo(lt,ct,ht,xt){return ht=ht||{},xt=xt||"",rt(lt).forEach(function(Et){var wt,Ct,Pt;st(ct,Et)?(wt=lt[Et],Ct=ct[Et],typeof wt=="object"&&typeof Ct=="object"&&wt&&Ct?(Pt=Zt(wt))!==Zt(Ct)?ht[xt+Et]=ct[Et]:Pt==="Object"?Xo(wt,Ct,ht,xt+Et+"."):wt!==Ct&&(ht[xt+Et]=ct[Et]):wt!==Ct&&(ht[xt+Et]=ct[Et])):ht[xt+Et]=void 0}),rt(ct).forEach(function(Et){st(lt,Et)||(ht[xt+Et]=ct[Et])}),ht}function Zo(lt,ct){return ct.type==="delete"?ct.keys:ct.keys||ct.values.map(lt.extractKey)}var Xs={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(lt){return et(et({},lt),{table:function(ct){var ht=lt.table(ct),xt=ht.schema.primaryKey;return et(et({},ht),{mutate:function(Et){var wt=_n.trans,Ct=wt.table(ct).hook,Pt=Ct.deleting,Mt=Ct.creating,Nt=Ct.updating;switch(Et.type){case"add":if(Mt.fire===xn)break;return wt._promise("readwrite",function(){return Ft(Et)},!0);case"put":if(Mt.fire===xn&&Nt.fire===xn)break;return wt._promise("readwrite",function(){return Ft(Et)},!0);case"delete":if(Pt.fire===xn)break;return wt._promise("readwrite",function(){return Ft(Et)},!0);case"deleteRange":if(Pt.fire===xn)break;return wt._promise("readwrite",function(){return function jt(Ht,It,Dt){return ht.query({trans:Ht,values:!1,query:{index:xt,range:It},limit:Dt}).then(function(Bt){var Lt=Bt.result;return Ft({type:"delete",keys:Lt,trans:Ht}).then(function(Vt){return 0<Vt.numFailures?Promise.reject(Vt.failures[0]):Lt.length<Dt?{failures:[],numFailures:0,lastResult:void 0}:jt(Ht,et(et({},It),{lower:Lt[Lt.length-1],lowerOpen:!0}),Dt)})})}(Et.trans,Et.range,1e4)},!0)}return ht.mutate(Et);function Ft(jt){var Ht,It,Dt,Bt=_n.trans,Lt=jt.keys||Zo(xt,jt);if(!Lt)throw new Error("Keys missing");return(jt=jt.type==="add"||jt.type==="put"?et(et({},jt),{keys:Lt}):et({},jt)).type!=="delete"&&(jt.values=tt([],jt.values)),jt.keys&&(jt.keys=tt([],jt.keys)),Ht=ht,Dt=Lt,((It=jt).type==="add"?Promise.resolve([]):Ht.getMany({trans:It.trans,keys:Dt,cache:"immutable"})).then(function(Vt){var zt=Lt.map(function(Kt,Xt){var an,fn,ln,dn=Vt[Xt],pn={onerror:null,onsuccess:null};return jt.type==="delete"?Pt.fire.call(pn,Kt,dn,Bt):jt.type==="add"||dn===void 0?(an=Mt.fire.call(pn,Kt,jt.values[Xt],Bt),Kt==null&&an!=null&&(jt.keys[Xt]=Kt=an,xt.outbound||bt(jt.values[Xt],xt.keyPath,Kt))):(an=Xo(dn,jt.values[Xt]),(fn=Nt.fire.call(pn,an,Kt,dn,Bt))&&(ln=jt.values[Xt],Object.keys(fn).forEach(function(sn){st(ln,sn)?ln[sn]=fn[sn]:bt(ln,sn,fn[sn])}))),pn});return ht.mutate(jt).then(function(Kt){for(var Xt=Kt.failures,an=Kt.results,fn=Kt.numFailures,Kt=Kt.lastResult,ln=0;ln<Lt.length;++ln){var dn=(an||Lt)[ln],pn=zt[ln];dn==null?pn.onerror&&pn.onerror(Xt[ln]):pn.onsuccess&&pn.onsuccess(jt.type==="put"&&Vt[ln]?jt.values[ln]:dn)}return{failures:Xt,results:an,numFailures:fn,lastResult:Kt}}).catch(function(Kt){return zt.forEach(function(Xt){return Xt.onerror&&Xt.onerror(Kt)}),Promise.reject(Kt)})})}}})}})}};function As(lt,ct,ht){try{if(!ct||ct.keys.length<lt.length)return null;for(var xt=[],Et=0,wt=0;Et<ct.keys.length&&wt<lt.length;++Et)Mn(ct.keys[Et],lt[wt])===0&&(xt.push(ht?mn(ct.values[Et]):ct.values[Et]),++wt);return xt.length===lt.length?xt:null}catch{return null}}var Zs={stack:"dbcore",level:-1,create:function(lt){return{table:function(ct){var ht=lt.table(ct);return et(et({},ht),{getMany:function(xt){if(!xt.cache)return ht.getMany(xt);var Et=As(xt.keys,xt.trans._cache,xt.cache==="clone");return Et?gn.resolve(Et):ht.getMany(xt).then(function(wt){return xt.trans._cache={keys:xt.keys,values:xt.cache==="clone"?mn(wt):wt},wt})},mutate:function(xt){return xt.type!=="add"&&(xt.trans._cache=null),ht.mutate(xt)}})}}}};function Ts(lt,ct){return lt.trans.mode==="readonly"&&!!lt.subscr&&!lt.trans.explicit&&lt.trans.db._options.cache!=="disabled"&&!ct.schema.primaryKey.outbound}function Ps(lt,ct){switch(lt){case"query":return ct.values&&!ct.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Js={stack:"dbcore",level:0,name:"Observability",create:function(lt){var ct=lt.schema.name,ht=new Zn(lt.MIN_KEY,lt.MAX_KEY);return et(et({},lt),{transaction:function(xt,Et,wt){if(_n.subscr&&Et!=="readonly")throw new en.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(_n.querier));return lt.transaction(xt,Et,wt)},table:function(xt){var Et=lt.table(xt),wt=Et.schema,Ct=wt.primaryKey,jt=wt.indexes,Pt=Ct.extractKey,Mt=Ct.outbound,Nt=Ct.autoIncrement&&jt.filter(function(It){return It.compound&&It.keyPath.includes(Ct.keyPath)}),Ft=et(et({},Et),{mutate:function(It){function Dt(sn){return sn="idb://".concat(ct,"/").concat(xt,"/").concat(sn),Kt[sn]||(Kt[sn]=new Zn)}var Bt,Lt,Vt,zt=It.trans,Kt=It.mutatedParts||(It.mutatedParts={}),Xt=Dt(""),an=Dt(":dels"),fn=It.type,pn=It.type==="deleteRange"?[It.range]:It.type==="delete"?[It.keys]:It.values.length<50?[Zo(Ct,It).filter(function(sn){return sn}),It.values]:[],ln=pn[0],dn=pn[1],pn=It.trans._cache;return ot(ln)?(Xt.addKeys(ln),(pn=fn==="delete"||ln.length===dn.length?As(ln,pn):null)||an.addKeys(ln),(pn||dn)&&(Bt=Dt,Lt=pn,Vt=dn,wt.indexes.forEach(function(sn){var Pn=Bt(sn.name||"");function $n(jn){return jn!=null?sn.extractKey(jn):null}function On(jn){return sn.multiEntry&&ot(jn)?jn.forEach(function(or){return Pn.addKey(or)}):Pn.addKey(jn)}(Lt||Vt).forEach(function(jn,Yn){var kn=Lt&&$n(Lt[Yn]),Yn=Vt&&$n(Vt[Yn]);Mn(kn,Yn)!==0&&(kn!=null&&On(kn),Yn!=null&&On(Yn))})}))):ln?(dn={from:ln.lower,to:ln.upper},an.add(dn),Xt.add(dn)):(Xt.add(ht),an.add(ht),wt.indexes.forEach(function(sn){return Dt(sn.name).add(ht)})),Et.mutate(It).then(function(sn){return!ln||It.type!=="add"&&It.type!=="put"||(Xt.addKeys(sn.results),Nt&&Nt.forEach(function(Pn){var $n=It.values.map(function(jn){return Pn.extractKey(jn)}),On=Pn.keyPath.findIndex(function(jn){return jn===Ct.keyPath});sn.results.forEach(function(jn){return $n[On]=jn}),Dt(Pn.name).addKeys($n)})),zt.mutatedParts=wo(zt.mutatedParts||{},Kt),sn})}}),jt=function(Dt){var Bt=Dt.query,Dt=Bt.index,Bt=Bt.range;return[Dt,new Zn((Dt=Bt.lower)!==null&&Dt!==void 0?Dt:lt.MIN_KEY,(Bt=Bt.upper)!==null&&Bt!==void 0?Bt:lt.MAX_KEY)]},Ht={get:function(It){return[Ct,new Zn(It.key)]},getMany:function(It){return[Ct,new Zn().addKeys(It.keys)]},count:jt,query:jt,openCursor:jt};return rt(Ht).forEach(function(It){Ft[It]=function(Dt){var Bt=_n.subscr,Lt=!!Bt,Vt=Ts(_n,Et)&&Ps(It,Dt)?Dt.obsSet={}:Bt;if(Lt){var zt=function(dn){return dn="idb://".concat(ct,"/").concat(xt,"/").concat(dn),Vt[dn]||(Vt[dn]=new Zn)},Kt=zt(""),Xt=zt(":dels"),Bt=Ht[It](Dt),Lt=Bt[0],Bt=Bt[1];if((It==="query"&&Lt.isPrimaryKey&&!Dt.values?Xt:zt(Lt.name||"")).add(Bt),!Lt.isPrimaryKey){if(It!=="count"){var an=It==="query"&&Mt&&Dt.values&&Et.query(et(et({},Dt),{values:!1}));return Et[It].apply(this,arguments).then(function(dn){if(It==="query"){if(Mt&&Dt.values)return an.then(function($n){return $n=$n.result,Kt.addKeys($n),dn});var pn=Dt.values?dn.result.map(Pt):dn.result;(Dt.values?Kt:Xt).addKeys(pn)}else if(It==="openCursor"){var sn=dn,Pn=Dt.values;return sn&&Object.create(sn,{key:{get:function(){return Xt.addKey(sn.primaryKey),sn.key}},primaryKey:{get:function(){var $n=sn.primaryKey;return Xt.addKey($n),$n}},value:{get:function(){return Pn&&Kt.addKey(sn.primaryKey),sn.value}}})}return dn})}Xt.add(ht)}}return Et[It].apply(this,arguments)}}),Ft}})}};function $s(lt,ct,ht){if(ht.numFailures===0)return ct;if(ct.type==="deleteRange")return null;var xt=ct.keys?ct.keys.length:"values"in ct&&ct.values?ct.values.length:1;return ht.numFailures===xt?null:(ct=et({},ct),ot(ct.keys)&&(ct.keys=ct.keys.filter(function(Et,wt){return!(wt in ht.failures)})),"values"in ct&&ot(ct.values)&&(ct.values=ct.values.filter(function(Et,wt){return!(wt in ht.failures)})),ct)}function Jo(lt,ct){return ht=lt,((xt=ct).lower===void 0||(xt.lowerOpen?0<Mn(ht,xt.lower):0<=Mn(ht,xt.lower)))&&(lt=lt,(ct=ct).upper===void 0||(ct.upperOpen?Mn(lt,ct.upper)<0:Mn(lt,ct.upper)<=0));var ht,xt}function js(lt,ct,Ht,xt,Et,wt){if(!Ht||Ht.length===0)return lt;var Ct=ct.query.index,Pt=Ct.multiEntry,Mt=ct.query.range,Nt=xt.schema.primaryKey.extractKey,Ft=Ct.extractKey,jt=(Ct.lowLevelIndex||Ct).extractKey,Ht=Ht.reduce(function(It,Dt){var Bt=It,Lt=[];if(Dt.type==="add"||Dt.type==="put")for(var Vt=new Zn,zt=Dt.values.length-1;0<=zt;--zt){var Kt,Xt=Dt.values[zt],an=Nt(Xt);Vt.hasKey(an)||(Kt=Ft(Xt),(Pt&&ot(Kt)?Kt.some(function(pn){return Jo(pn,Mt)}):Jo(Kt,Mt))&&(Vt.addKey(an),Lt.push(Xt)))}switch(Dt.type){case"add":Bt=It.concat(ct.values?Lt:Lt.map(function(sn){return Nt(sn)}));break;case"put":var fn=new Zn().addKeys(Dt.values.map(function(sn){return Nt(sn)})),Bt=It.filter(function(sn){return!fn.hasKey(ct.values?Nt(sn):sn)}).concat(ct.values?Lt:Lt.map(function(sn){return Nt(sn)}));break;case"delete":var ln=new Zn().addKeys(Dt.keys);Bt=It.filter(function(sn){return!ln.hasKey(ct.values?Nt(sn):sn)});break;case"deleteRange":var dn=Dt.range;Bt=It.filter(function(sn){return!Jo(Nt(sn),dn)})}return Bt},lt);return Ht===lt?lt:(Ht.sort(function(It,Dt){return Mn(jt(It),jt(Dt))||Mn(Nt(It),Nt(Dt))}),ct.limit&&ct.limit<1/0&&(Ht.length>ct.limit?Ht.length=ct.limit:lt.length===ct.limit&&Ht.length<ct.limit&&(Et.dirty=!0)),wt?Object.freeze(Ht):Ht)}function ks(lt,ct){return Mn(lt.lower,ct.lower)===0&&Mn(lt.upper,ct.upper)===0&&!!lt.lowerOpen==!!ct.lowerOpen&&!!lt.upperOpen==!!ct.upperOpen}function _i(lt,ct){return function(ht,xt,Et,wt){if(ht===void 0)return xt!==void 0?-1:0;if(xt===void 0)return 1;if((xt=Mn(ht,xt))===0){if(Et&&wt)return 0;if(Et)return 1;if(wt)return-1}return xt}(lt.lower,ct.lower,lt.lowerOpen,ct.lowerOpen)<=0&&0<=function(ht,xt,Et,wt){if(ht===void 0)return xt!==void 0?1:0;if(xt===void 0)return-1;if((xt=Mn(ht,xt))===0){if(Et&&wt)return 0;if(Et)return-1;if(wt)return 1}return xt}(lt.upper,ct.upper,lt.upperOpen,ct.upperOpen)}function na(lt,ct,ht,xt){lt.subscribers.add(ht),xt.addEventListener("abort",function(){var Et,wt;lt.subscribers.delete(ht),lt.subscribers.size===0&&(Et=lt,wt=ct,setTimeout(function(){Et.subscribers.size===0&&Wt(wt,Et)},3e3))})}var ga={stack:"dbcore",level:0,name:"Cache",create:function(lt){var ct=lt.schema.name;return et(et({},lt),{transaction:function(ht,xt,Et){var wt,Ct,Pt=lt.transaction(ht,xt,Et);return xt==="readwrite"&&(Ct=(wt=new AbortController).signal,Et=function(Mt){return function(){if(wt.abort(),xt==="readwrite"){for(var Nt=new Set,Ft=0,jt=ht;Ft<jt.length;Ft++){var Ht=jt[Ft],It=Or["idb://".concat(ct,"/").concat(Ht)];if(It){var Dt=lt.table(Ht),Bt=It.optimisticOps.filter(function(Pn){return Pn.trans===Pt});if(Pt._explicit&&Mt&&Pt.mutatedParts)for(var Lt=0,Vt=Object.values(It.queries.query);Lt<Vt.length;Lt++)for(var zt=0,Kt=(fn=Vt[Lt]).slice();zt<Kt.length;zt++)zo((ln=Kt[zt]).obsSet,Pt.mutatedParts)&&(Wt(fn,ln),ln.subscribers.forEach(function(Pn){return Nt.add(Pn)}));else if(0<Bt.length){It.optimisticOps=It.optimisticOps.filter(function(Pn){return Pn.trans!==Pt});for(var Xt=0,an=Object.values(It.queries.query);Xt<an.length;Xt++)for(var fn,ln,dn,pn=0,sn=(fn=an[Xt]).slice();pn<sn.length;pn++)(ln=sn[pn]).res!=null&&Pt.mutatedParts&&(Mt&&!ln.dirty?(dn=Object.isFrozen(ln.res),dn=js(ln.res,ln.req,Bt,Dt,ln,dn),ln.dirty?(Wt(fn,ln),ln.subscribers.forEach(function(Pn){return Nt.add(Pn)})):dn!==ln.res&&(ln.res=dn,ln.promise=gn.resolve({result:dn}))):(ln.dirty&&Wt(fn,ln),ln.subscribers.forEach(function(Pn){return Nt.add(Pn)})))}}}Nt.forEach(function(Pn){return Pn()})}}},Pt.addEventListener("abort",Et(!1),{signal:Ct}),Pt.addEventListener("error",Et(!1),{signal:Ct}),Pt.addEventListener("complete",Et(!0),{signal:Ct})),Pt},table:function(ht){var xt=lt.table(ht),Et=xt.schema.primaryKey;return et(et({},xt),{mutate:function(wt){var Ct=_n.trans;if(Et.outbound||Ct.db._options.cache==="disabled"||Ct.explicit)return xt.mutate(wt);var Pt=Or["idb://".concat(ct,"/").concat(ht)];return Pt?(Ct=xt.mutate(wt),wt.type!=="add"&&wt.type!=="put"||!(50<=wt.values.length||Zo(Et,wt).some(function(Mt){return Mt==null}))?(Pt.optimisticOps.push(wt),wt.mutatedParts&&bo(wt.mutatedParts),Ct.then(function(Mt){0<Mt.numFailures&&(Wt(Pt.optimisticOps,wt),(Mt=$s(0,wt,Mt))&&Pt.optimisticOps.push(Mt),wt.mutatedParts&&bo(wt.mutatedParts))}),Ct.catch(function(){Wt(Pt.optimisticOps,wt),wt.mutatedParts&&bo(wt.mutatedParts)})):Ct.then(function(Mt){var Nt=$s(0,et(et({},wt),{values:wt.values.map(function(It,jt){var Ht,It=(Ht=Et.keyPath)!==null&&Ht!==void 0&&Ht.includes(".")?mn(It):et({},It);return bt(It,Et.keyPath,Mt.results[jt]),It})}),Mt);Pt.optimisticOps.push(Nt),queueMicrotask(function(){return wt.mutatedParts&&bo(wt.mutatedParts)})}),Ct):xt.mutate(wt)},query:function(wt){if(!Ts(_n,xt)||!Ps("query",wt))return xt.query(wt);var Ct=((Nt=_n.trans)===null||Nt===void 0?void 0:Nt.db._options.cache)==="immutable",jt=_n,Pt=jt.requery,Mt=jt.signal,Nt=function(Dt,Bt,Lt,Vt){var zt=Or["idb://".concat(Dt,"/").concat(Bt)];if(!zt)return[];if(!(Bt=zt.queries[Lt]))return[null,!1,zt,null];var Kt=Bt[(Vt.query?Vt.query.index.name:null)||""];if(!Kt)return[null,!1,zt,null];switch(Lt){case"query":var Xt=Kt.find(function(an){return an.req.limit===Vt.limit&&an.req.values===Vt.values&&ks(an.req.query.range,Vt.query.range)});return Xt?[Xt,!0,zt,Kt]:[Kt.find(function(an){return("limit"in an.req?an.req.limit:1/0)>=Vt.limit&&(!Vt.values||an.req.values)&&_i(an.req.query.range,Vt.query.range)}),!1,zt,Kt];case"count":return Xt=Kt.find(function(an){return ks(an.req.query.range,Vt.query.range)}),[Xt,!!Xt,zt,Kt]}}(ct,ht,"query",wt),Ft=Nt[0],jt=Nt[1],Ht=Nt[2],It=Nt[3];return Ft&&jt?Ft.obsSet=wt.obsSet:(jt=xt.query(wt).then(function(Dt){var Bt=Dt.result;if(Ft&&(Ft.res=Bt),Ct){for(var Lt=0,Vt=Bt.length;Lt<Vt;++Lt)Object.freeze(Bt[Lt]);Object.freeze(Bt)}else Dt.result=mn(Bt);return Dt}).catch(function(Dt){return It&&Ft&&Wt(It,Ft),Promise.reject(Dt)}),Ft={obsSet:wt.obsSet,promise:jt,subscribers:new Set,type:"query",req:wt,dirty:!1},It?It.push(Ft):(It=[Ft],(Ht=Ht||(Or["idb://".concat(ct,"/").concat(ht)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[wt.query.index.name||""]=It)),na(Ft,It,Pt,Mt),Ft.promise.then(function(Dt){return{result:js(Dt.result,wt,Ht==null?void 0:Ht.optimisticOps,xt,Ft,Ct)}})}})}})}};function Co(lt,ct){return new Proxy(lt,{get:function(ht,xt,Et){return xt==="db"?ct:Reflect.get(ht,xt,Et)}})}var mr=(zn.prototype.version=function(lt){if(isNaN(lt)||lt<.1)throw new en.Type("Given version is not a positive number");if(lt=Math.round(10*lt)/10,this.idbdb||this._state.isBeingOpened)throw new en.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,lt);var ct=this._versions,ht=ct.filter(function(xt){return xt._cfg.version===lt})[0];return ht||(ht=new this.Version(lt),ct.push(ht),ct.sort(Ws),ht.stores({}),this._state.autoSchema=!1,ht)},zn.prototype._whenReady=function(lt){var ct=this;return this.idbdb&&(this._state.openComplete||_n.letThrough||this._vip)?lt():new gn(function(ht,xt){if(ct._state.openComplete)return xt(new en.DatabaseClosed(ct._state.dbOpenError));if(!ct._state.isBeingOpened){if(!ct._state.autoOpen)return void xt(new en.DatabaseClosed);ct.open().catch(xn)}ct._state.dbReadyPromise.then(ht,xt)}).then(lt)},zn.prototype.use=function(lt){var ct=lt.stack,ht=lt.create,xt=lt.level,Et=lt.name;return Et&&this.unuse({stack:ct,name:Et}),lt=this._middlewares[ct]||(this._middlewares[ct]=[]),lt.push({stack:ct,create:ht,level:xt??10,name:Et}),lt.sort(function(wt,Ct){return wt.level-Ct.level}),this},zn.prototype.unuse=function(lt){var ct=lt.stack,ht=lt.name,xt=lt.create;return ct&&this._middlewares[ct]&&(this._middlewares[ct]=this._middlewares[ct].filter(function(Et){return xt?Et.create!==xt:!!ht&&Et.name!==ht})),this},zn.prototype.open=function(){var lt=this;return $r(rr,function(){return Qs(lt)})},zn.prototype._close=function(){var lt=this._state,ct=Fr.indexOf(this);if(0<=ct&&Fr.splice(ct,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}lt.isBeingOpened||(lt.dbReadyPromise=new gn(function(ht){lt.dbReadyResolve=ht}),lt.openCanceller=new gn(function(ht,xt){lt.cancelOpen=xt}))},zn.prototype.close=function(ht){var ct=(ht===void 0?{disableAutoOpen:!0}:ht).disableAutoOpen,ht=this._state;ct?(ht.isBeingOpened&&ht.cancelOpen(new en.DatabaseClosed),this._close(),ht.autoOpen=!1,ht.dbOpenError=new en.DatabaseClosed):(this._close(),ht.autoOpen=this._options.autoOpen||ht.isBeingOpened,ht.openComplete=!1,ht.dbOpenError=null)},zn.prototype.delete=function(lt){var ct=this;lt===void 0&&(lt={disableAutoOpen:!0});var ht=0<arguments.length&&typeof arguments[0]!="object",xt=this._state;return new gn(function(Et,wt){function Ct(){ct.close(lt);var Pt=ct._deps.indexedDB.deleteDatabase(ct.name);Pt.onsuccess=Fn(function(){var Mt,Nt,Ft;Mt=ct._deps,Nt=ct.name,Ft=Mt.indexedDB,Mt=Mt.IDBKeyRange,Vo(Ft)||Nt===uo||Uo(Ft,Mt).delete(Nt).catch(xn),Et()}),Pt.onerror=lr(wt),Pt.onblocked=ct._fireOnBlocked}if(ht)throw new en.InvalidArgument("Invalid closeOptions argument to db.delete()");xt.isBeingOpened?xt.dbReadyPromise.then(Ct):Ct()})},zn.prototype.backendDB=function(){return this.idbdb},zn.prototype.isOpen=function(){return this.idbdb!==null},zn.prototype.hasBeenClosed=function(){var lt=this._state.dbOpenError;return lt&&lt.name==="DatabaseClosed"},zn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},zn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(zn.prototype,"tables",{get:function(){var lt=this;return rt(this._allTables).map(function(ct){return lt._allTables[ct]})},enumerable:!1,configurable:!0}),zn.prototype.transaction=function(){var lt=(function(ct,ht,xt){var Et=arguments.length;if(Et<2)throw new en.InvalidArgument("Too few arguments");for(var wt=new Array(Et-1);--Et;)wt[Et-1]=arguments[Et];return xt=wt.pop(),[ct,Ut(wt),xt]}).apply(this,arguments);return this._transaction.apply(this,lt)},zn.prototype._transaction=function(lt,ct,ht){var xt=this,Et=_n.trans;Et&&Et.db===this&&lt.indexOf("!")===-1||(Et=null);var wt,Ct,Pt=lt.indexOf("?")!==-1;lt=lt.replace("!","").replace("?","");try{if(Ct=ct.map(function(Nt){if(Nt=Nt instanceof xt.Table?Nt.name:Nt,typeof Nt!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Nt}),lt=="r"||lt===$o)wt=$o;else{if(lt!="rw"&&lt!=jo)throw new en.InvalidArgument("Invalid transaction mode: "+lt);wt=jo}if(Et){if(Et.mode===$o&&wt===jo){if(!Pt)throw new en.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");Et=null}Et&&Ct.forEach(function(Nt){if(Et&&Et.storeNames.indexOf(Nt)===-1){if(!Pt)throw new en.SubTransaction("Table "+Nt+" not included in parent transaction.");Et=null}}),Pt&&Et&&!Et.active&&(Et=null)}}catch(Nt){return Et?Et._promise(null,function(Ft,jt){jt(Nt)}):Wn(Nt)}var Mt=(function Nt(Ft,jt,Ht,It,Dt){return gn.resolve().then(function(){var Bt=_n.transless||_n,Lt=Ft._createTransaction(jt,Ht,Ft._dbSchema,It);if(Lt.explicit=!0,Bt={trans:Lt,transless:Bt},It)Lt.idbtrans=It.idbtrans;else try{Lt.create(),Lt.idbtrans._explicit=!0,Ft._state.PR1398_maxLoop=3}catch(Kt){return Kt.name===tn.InvalidState&&Ft.isOpen()&&0<--Ft._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),Ft.close({disableAutoOpen:!1}),Ft.open().then(function(){return Nt(Ft,jt,Ht,null,Dt)})):Wn(Kt)}var Vt,zt=nn(Dt);return zt&&Dr(),Bt=gn.follow(function(){var Kt;(Vt=Dt.call(Lt,Lt))&&(zt?(Kt=wr.bind(null,null),Vt.then(Kt,Kt)):typeof Vt.next=="function"&&typeof Vt.throw=="function"&&(Vt=Yo(Vt)))},Bt),(Vt&&typeof Vt.then=="function"?gn.resolve(Vt).then(function(Kt){return Lt.active?Kt:Wn(new en.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Bt.then(function(){return Vt})).then(function(Kt){return It&&Lt._resolve(),Lt._completion.then(function(){return Kt})}).catch(function(Kt){return Lt._reject(Kt),Wn(Kt)})})}).bind(null,this,wt,Ct,Et,ht);return Et?Et._promise(wt,Mt,"lock"):_n.trans?$r(_n.transless,function(){return xt._whenReady(Mt)}):this._whenReady(Mt)},zn.prototype.table=function(lt){if(!st(this._allTables,lt))throw new en.InvalidTable("Table ".concat(lt," does not exist"));return this._allTables[lt]},zn);function zn(lt,ct){var ht=this;this._middlewares={},this.verno=0;var xt=zn.dependencies;this._options=ct=et({addons:zn.addons,autoOpen:!0,indexedDB:xt.indexedDB,IDBKeyRange:xt.IDBKeyRange,cache:"cloned"},ct),this._deps={indexedDB:ct.indexedDB,IDBKeyRange:ct.IDBKeyRange},xt=ct.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var Et,wt,Ct,Pt,Mt,Nt={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:xn,dbReadyPromise:null,cancelOpen:xn,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:ct.autoOpen};Nt.dbReadyPromise=new gn(function(jt){Nt.dbReadyResolve=jt}),Nt.openCanceller=new gn(function(jt,Ht){Nt.cancelOpen=Ht}),this._state=Nt,this.name=lt,this.on=Gr(this,"populate","blocked","versionchange","close",{ready:[Mr,xn]}),this.on.ready.subscribe=_t(this.on.ready.subscribe,function(jt){return function(Ht,It){zn.vip(function(){var Dt,Bt=ht._state;Bt.openComplete?(Bt.dbOpenError||gn.resolve().then(Ht),It&&jt(Ht)):Bt.onReadyBeingFired?(Bt.onReadyBeingFired.push(Ht),It&&jt(Ht)):(jt(Ht),Dt=ht,It||jt(function Lt(){Dt.on.ready.unsubscribe(Ht),Dt.on.ready.unsubscribe(Lt)}))})}}),this.Collection=(Et=this,Qr(Ds.prototype,function(Vt,Lt){this.db=Et;var It=ls,Dt=null;if(Lt)try{It=Lt()}catch(zt){Dt=zt}var Bt=Vt._ctx,Lt=Bt.table,Vt=Lt.hook.reading.fire;this._ctx={table:Lt,index:Bt.index,isPrimKey:!Bt.index||Lt.schema.primKey.keyPath&&Bt.index===Lt.schema.primKey.name,range:It,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Dt,or:Bt.or,valueMapper:Vt!==Bn?Vt:null}})),this.Table=(wt=this,Qr(ps.prototype,function(jt,Ht,It){this.db=wt,this._tx=It,this.name=jt,this.schema=Ht,this.hook=wt._allTables[jt]?wt._allTables[jt].hook:Gr(null,{creating:[sr,xn],reading:[Gn,Bn],updating:[qr,xn],deleting:[cr,xn]})})),this.Transaction=(Ct=this,Qr(Bs.prototype,function(jt,Ht,It,Dt,Bt){var Lt=this;this.db=Ct,this.mode=jt,this.storeNames=Ht,this.schema=It,this.chromeTransactionDurability=Dt,this.idbtrans=null,this.on=Gr(this,"complete","error","abort"),this.parent=Bt||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new gn(function(Vt,zt){Lt._resolve=Vt,Lt._reject=zt}),this._completion.then(function(){Lt.active=!1,Lt.on.complete.fire()},function(Vt){var zt=Lt.active;return Lt.active=!1,Lt.on.error.fire(Vt),Lt.parent?Lt.parent._reject(Vt):zt&&Lt.idbtrans&&Lt.idbtrans.abort(),Wn(Vt)})})),this.Version=(Pt=this,Qr(Gs.prototype,function(jt){this.db=Pt,this._cfg={version:jt,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(Mt=this,Qr(xs.prototype,function(jt,Ht,It){if(this.db=Mt,this._ctx={table:jt,index:Ht===":id"?null:Ht,or:It},this._cmp=this._ascending=Mn,this._descending=function(Dt,Bt){return Mn(Bt,Dt)},this._max=function(Dt,Bt){return 0<Mn(Dt,Bt)?Dt:Bt},this._min=function(Dt,Bt){return Mn(Dt,Bt)<0?Dt:Bt},this._IDBKeyRange=Mt._deps.IDBKeyRange,!this._IDBKeyRange)throw new en.MissingAPI})),this.on("versionchange",function(jt){0<jt.newVersion?console.warn("Another connection wants to upgrade database '".concat(ht.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(ht.name,"'. Closing db now to resume the delete request.")),ht.close({disableAutoOpen:!1})}),this.on("blocked",function(jt){!jt.newVersion||jt.newVersion<jt.oldVersion?console.warn("Dexie.delete('".concat(ht.name,"') was blocked")):console.warn("Upgrade '".concat(ht.name,"' blocked by other connection holding version ").concat(jt.oldVersion/10))}),this._maxKey=Jr(ct.IDBKeyRange),this._createTransaction=function(jt,Ht,It,Dt){return new ht.Transaction(jt,Ht,It,ht._options.chromeTransactionDurability,Dt)},this._fireOnBlocked=function(jt){ht.on("blocked").fire(jt),Fr.filter(function(Ht){return Ht.name===ht.name&&Ht!==ht&&!Ht._state.vcFired}).map(function(Ht){return Ht.on("versionchange").fire(jt)})},this.use(Zs),this.use(ga),this.use(Js),this.use(Ys),this.use(Xs);var Ft=new Proxy(this,{get:function(jt,Ht,It){if(Ht==="_vip")return!0;if(Ht==="table")return function(Bt){return Co(ht.table(Bt),Ft)};var Dt=Reflect.get(jt,Ht,It);return Dt instanceof ps?Co(Dt,Ft):Ht==="tables"?Dt.map(function(Bt){return Co(Bt,Ft)}):Ht==="_createTransaction"?function(){return Co(Dt.apply(this,arguments),Ft)}:Dt}});this.vip=Ft,xt.forEach(function(jt){return jt(ht)})}var Ro,nr=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",xa=(es.prototype.subscribe=function(lt,ct,ht){return this._subscribe(lt&&typeof lt!="function"?lt:{next:lt,error:ct,complete:ht})},es.prototype[nr]=function(){return this},es);function es(lt){this._subscribe=lt}try{Ro={indexedDB:nt.indexedDB||nt.mozIndexedDB||nt.webkitIndexedDB||nt.msIndexedDB,IDBKeyRange:nt.IDBKeyRange||nt.webkitIDBKeyRange}}catch{Ro={indexedDB:null,IDBKeyRange:null}}function Os(lt){var ct,ht=!1,xt=new xa(function(Et){var wt=nn(lt),Ct,Pt=!1,Mt={},Nt={},Ft={get closed(){return Pt},unsubscribe:function(){Pt||(Pt=!0,Ct&&Ct.abort(),jt&&Cr.storagemutated.unsubscribe(It))}};Et.start&&Et.start(Ft);var jt=!1,Ht=function(){return Po(Dt)},It=function(Bt){wo(Mt,Bt),zo(Nt,Mt)&&Ht()},Dt=function(){var Bt,Lt,Vt;!Pt&&Ro.indexedDB&&(Mt={},Bt={},Ct&&Ct.abort(),Ct=new AbortController,Vt=function(zt){var Kt=Tn();try{wt&&Dr();var Xt=_r(lt,zt);return Xt=wt?Xt.finally(wr):Xt}finally{Kt&&In()}}(Lt={subscr:Bt,signal:Ct.signal,requery:Ht,querier:lt,trans:null}),Promise.resolve(Vt).then(function(zt){ht=!0,ct=zt,Pt||Lt.signal.aborted||(Mt={},function(Kt){for(var Xt in Kt)if(st(Kt,Xt))return;return 1}(Nt=Bt)||jt||(Cr(Zr,It),jt=!0),Po(function(){return!Pt&&Et.next&&Et.next(zt)}))},function(zt){ht=!1,["DatabaseClosedError","AbortError"].includes(zt==null?void 0:zt.name)||Pt||Po(function(){Pt||Et.error&&Et.error(zt)})}))};return setTimeout(Ht,0),Ft});return xt.hasValue=function(){return ht},xt.getValue=function(){return ct},xt}var Nr=mr;function ns(lt){var ct=Rr;try{Rr=!0,Cr.storagemutated.fire(lt),Qo(lt,!0)}finally{Rr=ct}}ut(Nr,et(et({},Nn),{delete:function(lt){return new Nr(lt,{addons:[]}).delete()},exists:function(lt){return new Nr(lt,{addons:[]}).open().then(function(ct){return ct.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(lt){try{return ct=Nr.dependencies,ht=ct.indexedDB,ct=ct.IDBKeyRange,(Vo(ht)?Promise.resolve(ht.databases()).then(function(xt){return xt.map(function(Et){return Et.name}).filter(function(Et){return Et!==uo})}):Uo(ht,ct).toCollection().primaryKeys()).then(lt)}catch{return Wn(new en.MissingAPI)}var ct,ht},defineClass:function(){return function(lt){it(this,lt)}},ignoreTransaction:function(lt){return _n.trans?$r(_n.transless,lt):lt()},vip:qo,async:function(lt){return function(){try{var ct=Yo(lt.apply(this,arguments));return ct&&typeof ct.then=="function"?ct:gn.resolve(ct)}catch(ht){return Wn(ht)}}},spawn:function(lt,ct,ht){try{var xt=Yo(lt.apply(ht,ct||[]));return xt&&typeof xt.then=="function"?xt:gn.resolve(xt)}catch(Et){return Wn(Et)}},currentTransaction:{get:function(){return _n.trans||null}},waitFor:function(lt,ct){return ct=gn.resolve(typeof lt=="function"?Nr.ignoreTransaction(lt):lt).timeout(ct||6e4),_n.trans?_n.trans.waitFor(ct):ct},Promise:gn,debug:{get:function(){return tr},set:function(lt){gr(lt)}},derive:gt,extend:it,props:ut,override:_t,Events:Gr,on:Cr,liveQuery:Os,extendObservabilitySet:wo,getByKeyPath:kt,setByKeyPath:bt,delByKeyPath:function(lt,ct){typeof ct=="string"?bt(lt,ct,void 0):"length"in ct&&[].map.call(ct,function(ht){bt(lt,ht,void 0)})},shallowClone:Rt,deepClone:mn,getObjectDiff:Xo,cmp:Mn,asap:At,minKey:-1/0,addons:[],connections:Fr,errnames:tn,dependencies:Ro,cache:Or,semVer:"4.0.8",version:"4.0.8".split(".").map(function(lt){return parseInt(lt)}).reduce(function(lt,ct,ht){return lt+ct/Math.pow(10,2*ht)})})),Nr.maxKey=Jr(Nr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Cr(Zr,function(lt){Rr||(lt=new CustomEvent(Io,{detail:lt}),Rr=!0,dispatchEvent(lt),Rr=!1)}),addEventListener(Io,function(lt){lt=lt.detail,Rr||ns(lt)}));var Vr,Rr=!1,Ns=function(){};return typeof BroadcastChannel<"u"&&((Ns=function(){(Vr=new BroadcastChannel(Io)).onmessage=function(lt){return lt.data&&ns(lt.data)}})(),typeof Vr.unref=="function"&&Vr.unref(),Cr(Zr,function(lt){Rr||Vr.postMessage(lt)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(lt){if(!mr.disableBfCache&&lt.persisted){tr&&console.debug("Dexie: handling persisted pagehide"),Vr!=null&&Vr.close();for(var ct=0,ht=Fr;ct<ht.length;ct++)ht[ct].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(lt){!mr.disableBfCache&&lt.persisted&&(tr&&console.debug("Dexie: handling persisted pageshow"),Ns(),ns({all:new Zn(-1/0,[[]])}))})),gn.rejectionMapper=function(lt,ct){return!lt||lt instanceof Sn||lt instanceof TypeError||lt instanceof SyntaxError||!lt.name||!An[lt.name]?lt:(ct=new An[lt.name](ct||lt.message,lt),"stack"in lt&&pt(ct,"stack",{get:function(){return this.inner.stack}}),ct)},gr(tr),et(mr,Object.freeze({__proto__:null,Dexie:mr,liveQuery:Os,Entity:us,cmp:Mn,PropModSymbol:hr,PropModification:Yr,replacePrefix:function(lt,ct){return new Yr({replacePrefix:[lt,ct]})},add:function(lt){return new Yr({add:lt})},remove:function(lt){return new Yr({remove:lt})},default:mr,RangeSet:Zn,mergeRanges:ro,rangesOverlap:bs}),{default:mr}),mr})})(dexie_min);var dexie_minExports=dexie_min.exports;const _Dexie=getDefaultExportFromCjs(dexie_minExports),DexieSymbol=Symbol.for("Dexie"),Dexie=globalThis[DexieSymbol]||(globalThis[DexieSymbol]=_Dexie);if(_Dexie.semVer!==Dexie.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${_Dexie.semVer} and ${Dexie.semVer}`);class QspiderDatabase extends Dexie{constructor(){super("QspiderDatabase"),this.version(2).stores({games:"id, title",gameResources:"++, game_id, &[game_id+path]",gameSaves:"++, game_id, &[game_id+key+slot], slot, [game_id+slot], [game_id+key]"})}}class WebStorage{constructor(){this.db=new QspiderDatabase}async prepareLoadConfig(j,_e){return{url:`/qspider-files/${j}/`,entrypoint:_e}}async getGames(){return(await this.db.games.toArray()).reduce((_e,et)=>(_e[et.id]=et,_e),{})}async addGame(j,_e){await this.db.games.put(_e,j)}async updateGame(j,_e){await this.db.games.update(j,_e)}async removeGame(j){await this.db.transaction("rw",this.db.games,this.db.gameResources,async()=>{await this.db.games.delete(j),await this.db.gameResources.where("game_id").equals(j).delete()})}async addGameResource(j,_e,et){const tt=_e.toLowerCase();await this.db.gameResources.where({game_id:j,path:tt}).delete(),await this.db.gameResources.put({game_id:j,path:tt,content:et})}async getGameResource(j,_e){const et=_e.toLowerCase(),tt=await this.db.gameResources.where({game_id:j,path:et}).first();return(tt==null?void 0:tt.content)||null}async saveByKey(j,_e,et){await this.db.gameSaves.where({game_id:j,key:_e,slot:-1}).delete();const tt={timestamp:Date.now(),game_id:j,key:_e,slot:-1,data:et};await this.db.gameSaves.put(tt)}async saveBySlot(j,_e,et){await this.db.gameSaves.where({game_id:j,key:"",slot:_e}).delete();const tt={timestamp:Date.now(),game_id:j,key:"",slot:_e,data:et};await this.db.gameSaves.put(tt)}async hasSaveByKey(j,_e){return await this.db.gameSaves.where({game_id:j,key:_e}).count()>0}async hasSaveBySlot(j,_e){return await this.db.gameSaves.where({game_id:j,slot:_e}).count()>0}async getSaveDataByKey(j,_e){const et=await this.db.gameSaves.where({game_id:j,key:_e}).first();return(et==null?void 0:et.data)||null}async getSaveDataBySlot(j,_e){const et=await this.db.gameSaves.where({game_id:j,slot:_e}).first();return(et==null?void 0:et.data)||null}async getSavedSlots(j){return await this.db.gameSaves.where({game_id:j}).and(_e=>_e.slot>0).toArray()}async getNamedSaves(j){return await this.db.gameSaves.where({game_id:j}).and(_e=>_e.key!=="").toArray()}async clearSaveSlot(j,_e){await this.db.gameSaves.where({game_id:j,key:"",slot:_e}).delete()}async clearSaveKey(j,_e){await this.db.gameSaves.where({game_id:j,key:_e,slot:-1}).delete()}}let instance$1=null;function getStorage(){return instance$1||(instance$1=new WebStorage),instance$1}async function fetchTextContent($,j){const _e=`${$}${cleanPath(j)}`,et=await fetchProxyFallback(_e);if(!et.ok)throw new Error("File not found");return await et.text()}async function fetchBinaryContent($,j){const _e=`${$}${cleanPath(j)}`,et=await fetchProxyFallback(_e);if(!et.ok)throw new Error("File not found");return await et.arrayBuffer()}const CLASSIC_THEME="qspider:classic",AERO_THEME="qspider:aero",DEFAULT_LIST_FORMAT='<table><tr><td><img src="%IMAGE%"/></td><td style="width:100%;">%TEXT%</td></tr></table>',DEFAULT_SELECTED_LIST_FORMAT='<table><tr><td><img src="%IMAGE%"/></td><td style="width:100%;color:#0000FF;">%TEXT%</td></tr></table>',TEXT_PLACEHOLDER="%TEXT%",IMAGE_PLACEHOLDER="%IMAGE%",themeRegistry$=atom({},$=>({add(j,_e){$.update(et=>({...et,[j]:_e}))},reset(){$.update(j=>Object.entries(j).reduce((_e,[et,tt])=>(tt.is_user_defined||(_e[et]=tt),_e),{}))}})),currentTheme$=atom(CLASSIC_THEME),currentThemeData$=atom($=>$(themeRegistry$)[$(currentTheme$)]??{}),defaultClassicTheme$=atom($=>$(themeRegistry$)["qspider:classic"]),currentCssVariables$=atom($=>$(currentThemeData$).css_variables??[]),currentCssLinks$=atom($=>$(currentThemeData$).css_links??[]),currentScriptLinks$=atom($=>$(currentThemeData$).script_links??[]),currentTranslations$=atom($=>$(currentThemeData$).translations??[]);async function registerThemes($){for(const j of $){const _e=await fetchTextContent(baseUrl$.value,j),et=parseTheme(_e);for(const[tt,nt]of Object.entries(et))themeRegistry$.actions.add(tt,nt)}}const defaultThemes=["themes/classic.html","themes/aero.html"];async function registerDefaultThemes($){for(const j of defaultThemes){const _e=await fetch(new URL(j,$).href).then(tt=>tt.text()),et=parseTheme(_e,!1);for(const[tt,nt]of Object.entries(et))themeRegistry$.actions.add(tt,nt)}}const parser=new DOMParser;function parseTheme($,j=!0){const _e={},tt=parser.parseFromString($,"text/html").querySelectorAll("qspider-theme");for(const nt of tt){const rt=nt.getAttribute("name");if(!rt){console.error("Malformed theme definition - missing theme name in qspider-theme tag");continue}_e[rt]={is_user_defined:j,css_variables:extractCssVariables(nt),translations:extractTranslations(nt),css_links:extractLinks(nt,"css-link"),script_links:extractLinks(nt,"script-link"),qsp_player:extractTagData(nt,"qsp-player")}}return _e}function extractTagData($,j){const _e=$.querySelector(j);if(_e)return{attrs:extractAttributes(_e),template:_e.innerHTML.replace(/[ \t]*\r?\n[ \t]*/gm,"")}}function extractCssVariables($){const j=[];for(const _e of $.querySelectorAll("definitions qsp-css-variable")){const et=_e.getAttribute("name"),tt=_e.getAttribute("from");!et||!tt||j.push({name:et,from:tt,defaultValue:_e.getAttribute("default-value")||"",type:_e.getAttribute("type"),unit:_e.getAttribute("unit"),withSize:_e.hasAttribute("with-size"),withContrast:_e.hasAttribute("with-contrast"),withInverted:_e.hasAttribute("with-inverted")})}return j}function extractTranslations($){const j=[];for(const _e of $.querySelectorAll("definitions qsp-translation")){const et=_e.getAttribute("lang")||"",tt=_e.getAttribute("tkey")||"",nt=_e.getAttribute("value")||"";j.push({lang:et,tkey:tt,value:nt})}return j}function extractLinks($,j){const _e=[];for(const et of $.querySelectorAll(j)){const tt=et.getAttribute("src");tt&&_e.push(tt)}return _e}const counterDelay$=atom(500),isPaused$=atom(!0),counterTimeout$=atom(),pauseStack=[];async function withCounterPaused($){pauseStack.push(isPaused$.value);try{isPaused$.set(!0),await $()}finally{const j=pauseStack.pop()||!1;isPaused$.set(j)}}function scheduleCounter(){counterTimeout$.set(setTimeout(()=>{var $;($=qspApi$.value)==null||$.execCounter(),scheduleCounter()},counterDelay$.value))}isPaused$.watch($=>{$?clearTimeout(counterTimeout$.value):scheduleCounter()});counterDelay$.subscribe(()=>{clearTimeout(counterTimeout$.value),isPaused$.value||scheduleCounter()});var howler={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function($){(function(){var j=function(){this.init()};j.prototype={init:function(){var st=this||_e;return st._counter=1e3,st._html5AudioPool=[],st.html5PoolSize=10,st._codecs={},st._howls=[],st._muted=!1,st._volume=1,st._canPlayEvent="canplaythrough",st._navigator=typeof window<"u"&&window.navigator?window.navigator:null,st.masterGain=null,st.noAudio=!1,st.usingWebAudio=!0,st.autoSuspend=!0,st.ctx=null,st.autoUnlock=!0,st._setup(),st},volume:function(st){var ut=this||_e;if(st=parseFloat(st),ut.ctx||dt(),typeof st<"u"&&st>=0&&st<=1){if(ut._volume=st,ut._muted)return ut;ut.usingWebAudio&&ut.masterGain.gain.setValueAtTime(st,_e.ctx.currentTime);for(var ft=0;ft<ut._howls.length;ft++)if(!ut._howls[ft]._webAudio)for(var pt=ut._howls[ft]._getSoundIds(),gt=0;gt<pt.length;gt++){var yt=ut._howls[ft]._soundById(pt[gt]);yt&&yt._node&&(yt._node.volume=yt._volume*st)}return ut}return ut._volume},mute:function(st){var ut=this||_e;ut.ctx||dt(),ut._muted=st,ut.usingWebAudio&&ut.masterGain.gain.setValueAtTime(st?0:ut._volume,_e.ctx.currentTime);for(var ft=0;ft<ut._howls.length;ft++)if(!ut._howls[ft]._webAudio)for(var pt=ut._howls[ft]._getSoundIds(),gt=0;gt<pt.length;gt++){var yt=ut._howls[ft]._soundById(pt[gt]);yt&&yt._node&&(yt._node.muted=st?!0:yt._muted)}return ut},stop:function(){for(var st=this||_e,ut=0;ut<st._howls.length;ut++)st._howls[ut].stop();return st},unload:function(){for(var st=this||_e,ut=st._howls.length-1;ut>=0;ut--)st._howls[ut].unload();return st.usingWebAudio&&st.ctx&&typeof st.ctx.close<"u"&&(st.ctx.close(),st.ctx=null,dt()),st},codecs:function(st){return(this||_e)._codecs[st.replace(/^x-/,"")]},_setup:function(){var st=this||_e;if(st.state=st.ctx&&st.ctx.state||"suspended",st._autoSuspend(),!st.usingWebAudio)if(typeof Audio<"u")try{var ut=new Audio;typeof ut.oncanplaythrough>"u"&&(st._canPlayEvent="canplay")}catch{st.noAudio=!0}else st.noAudio=!0;try{var ut=new Audio;ut.muted&&(st.noAudio=!0)}catch{}return st.noAudio||st._setupCodecs(),st},_setupCodecs:function(){var st=this||_e,ut=null;try{ut=typeof Audio<"u"?new Audio:null}catch{return st}if(!ut||typeof ut.canPlayType!="function")return st;var ft=ut.canPlayType("audio/mpeg;").replace(/^no$/,""),pt=st._navigator?st._navigator.userAgent:"",gt=pt.match(/OPR\/(\d+)/g),yt=gt&&parseInt(gt[0].split("/")[1],10)<33,mt=pt.indexOf("Safari")!==-1&&pt.indexOf("Chrome")===-1,vt=pt.match(/Version\/(.*?) /),_t=mt&&vt&&parseInt(vt[1],10)<15;return st._codecs={mp3:!!(!yt&&(ft||ut.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!ft,opus:!!ut.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!ut.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!ut.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(ut.canPlayType('audio/wav; codecs="1"')||ut.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!ut.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!ut.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(ut.canPlayType("audio/x-m4a;")||ut.canPlayType("audio/m4a;")||ut.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(ut.canPlayType("audio/x-m4b;")||ut.canPlayType("audio/m4b;")||ut.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(ut.canPlayType("audio/x-mp4;")||ut.canPlayType("audio/mp4;")||ut.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!_t&&ut.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!_t&&ut.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!ut.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(ut.canPlayType("audio/x-flac;")||ut.canPlayType("audio/flac;")).replace(/^no$/,"")},st},_unlockAudio:function(){var st=this||_e;if(!(st._audioUnlocked||!st.ctx)){st._audioUnlocked=!1,st.autoUnlock=!1,!st._mobileUnloaded&&st.ctx.sampleRate!==44100&&(st._mobileUnloaded=!0,st.unload()),st._scratchBuffer=st.ctx.createBuffer(1,1,22050);var ut=function(ft){for(;st._html5AudioPool.length<st.html5PoolSize;)try{var pt=new Audio;pt._unlocked=!0,st._releaseHtml5Audio(pt)}catch{st.noAudio=!0;break}for(var gt=0;gt<st._howls.length;gt++)if(!st._howls[gt]._webAudio)for(var yt=st._howls[gt]._getSoundIds(),mt=0;mt<yt.length;mt++){var vt=st._howls[gt]._soundById(yt[mt]);vt&&vt._node&&!vt._node._unlocked&&(vt._node._unlocked=!0,vt._node.load())}st._autoResume();var _t=st.ctx.createBufferSource();_t.buffer=st._scratchBuffer,_t.connect(st.ctx.destination),typeof _t.start>"u"?_t.noteOn(0):_t.start(0),typeof st.ctx.resume=="function"&&st.ctx.resume(),_t.onended=function(){_t.disconnect(0),st._audioUnlocked=!0,document.removeEventListener("touchstart",ut,!0),document.removeEventListener("touchend",ut,!0),document.removeEventListener("click",ut,!0),document.removeEventListener("keydown",ut,!0);for(var St=0;St<st._howls.length;St++)st._howls[St]._emit("unlock")}};return document.addEventListener("touchstart",ut,!0),document.addEventListener("touchend",ut,!0),document.addEventListener("click",ut,!0),document.addEventListener("keydown",ut,!0),st}},_obtainHtml5Audio:function(){var st=this||_e;if(st._html5AudioPool.length)return st._html5AudioPool.pop();var ut=new Audio().play();return ut&&typeof Promise<"u"&&(ut instanceof Promise||typeof ut.then=="function")&&ut.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(st){var ut=this||_e;return st._unlocked&&ut._html5AudioPool.push(st),ut},_autoSuspend:function(){var st=this;if(!(!st.autoSuspend||!st.ctx||typeof st.ctx.suspend>"u"||!_e.usingWebAudio)){for(var ut=0;ut<st._howls.length;ut++)if(st._howls[ut]._webAudio){for(var ft=0;ft<st._howls[ut]._sounds.length;ft++)if(!st._howls[ut]._sounds[ft]._paused)return st}return st._suspendTimer&&clearTimeout(st._suspendTimer),st._suspendTimer=setTimeout(function(){if(st.autoSuspend){st._suspendTimer=null,st.state="suspending";var pt=function(){st.state="suspended",st._resumeAfterSuspend&&(delete st._resumeAfterSuspend,st._autoResume())};st.ctx.suspend().then(pt,pt)}},3e4),st}},_autoResume:function(){var st=this;if(!(!st.ctx||typeof st.ctx.resume>"u"||!_e.usingWebAudio))return st.state==="running"&&st.ctx.state!=="interrupted"&&st._suspendTimer?(clearTimeout(st._suspendTimer),st._suspendTimer=null):st.state==="suspended"||st.state==="running"&&st.ctx.state==="interrupted"?(st.ctx.resume().then(function(){st.state="running";for(var ut=0;ut<st._howls.length;ut++)st._howls[ut]._emit("resume")}),st._suspendTimer&&(clearTimeout(st._suspendTimer),st._suspendTimer=null)):st.state==="suspending"&&(st._resumeAfterSuspend=!0),st}};var _e=new j,et=function(st){var ut=this;if(!st.src||st.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}ut.init(st)};et.prototype={init:function(st){var ut=this;return _e.ctx||dt(),ut._autoplay=st.autoplay||!1,ut._format=typeof st.format!="string"?st.format:[st.format],ut._html5=st.html5||!1,ut._muted=st.mute||!1,ut._loop=st.loop||!1,ut._pool=st.pool||5,ut._preload=typeof st.preload=="boolean"||st.preload==="metadata"?st.preload:!0,ut._rate=st.rate||1,ut._sprite=st.sprite||{},ut._src=typeof st.src!="string"?st.src:[st.src],ut._volume=st.volume!==void 0?st.volume:1,ut._xhr={method:st.xhr&&st.xhr.method?st.xhr.method:"GET",headers:st.xhr&&st.xhr.headers?st.xhr.headers:null,withCredentials:st.xhr&&st.xhr.withCredentials?st.xhr.withCredentials:!1},ut._duration=0,ut._state="unloaded",ut._sounds=[],ut._endTimers={},ut._queue=[],ut._playLock=!1,ut._onend=st.onend?[{fn:st.onend}]:[],ut._onfade=st.onfade?[{fn:st.onfade}]:[],ut._onload=st.onload?[{fn:st.onload}]:[],ut._onloaderror=st.onloaderror?[{fn:st.onloaderror}]:[],ut._onplayerror=st.onplayerror?[{fn:st.onplayerror}]:[],ut._onpause=st.onpause?[{fn:st.onpause}]:[],ut._onplay=st.onplay?[{fn:st.onplay}]:[],ut._onstop=st.onstop?[{fn:st.onstop}]:[],ut._onmute=st.onmute?[{fn:st.onmute}]:[],ut._onvolume=st.onvolume?[{fn:st.onvolume}]:[],ut._onrate=st.onrate?[{fn:st.onrate}]:[],ut._onseek=st.onseek?[{fn:st.onseek}]:[],ut._onunlock=st.onunlock?[{fn:st.onunlock}]:[],ut._onresume=[],ut._webAudio=_e.usingWebAudio&&!ut._html5,typeof _e.ctx<"u"&&_e.ctx&&_e.autoUnlock&&_e._unlockAudio(),_e._howls.push(ut),ut._autoplay&&ut._queue.push({event:"play",action:function(){ut.play()}}),ut._preload&&ut._preload!=="none"&&ut.load(),ut},load:function(){var st=this,ut=null;if(_e.noAudio){st._emit("loaderror",null,"No audio support.");return}typeof st._src=="string"&&(st._src=[st._src]);for(var ft=0;ft<st._src.length;ft++){var pt,gt;if(st._format&&st._format[ft])pt=st._format[ft];else{if(gt=st._src[ft],typeof gt!="string"){st._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}pt=/^data:audio\/([^;,]+);/i.exec(gt),pt||(pt=/\.([^.]+)$/.exec(gt.split("?",1)[0])),pt&&(pt=pt[1].toLowerCase())}if(pt||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),pt&&_e.codecs(pt)){ut=st._src[ft];break}}if(!ut){st._emit("loaderror",null,"No codec support for selected audio sources.");return}return st._src=ut,st._state="loading",window.location.protocol==="https:"&&ut.slice(0,5)==="http:"&&(st._html5=!0,st._webAudio=!1),new tt(st),st._webAudio&&rt(st),st},play:function(st,ut){var ft=this,pt=null;if(typeof st=="number")pt=st,st=null;else{if(typeof st=="string"&&ft._state==="loaded"&&!ft._sprite[st])return null;if(typeof st>"u"&&(st="__default",!ft._playLock)){for(var gt=0,yt=0;yt<ft._sounds.length;yt++)ft._sounds[yt]._paused&&!ft._sounds[yt]._ended&&(gt++,pt=ft._sounds[yt]._id);gt===1?st=null:pt=null}}var mt=pt?ft._soundById(pt):ft._inactiveSound();if(!mt)return null;if(pt&&!st&&(st=mt._sprite||"__default"),ft._state!=="loaded"){mt._sprite=st,mt._ended=!1;var vt=mt._id;return ft._queue.push({event:"play",action:function(){ft.play(vt)}}),vt}if(pt&&!mt._paused)return ut||ft._loadQueue("play"),mt._id;ft._webAudio&&_e._autoResume();var _t=Math.max(0,mt._seek>0?mt._seek:ft._sprite[st][0]/1e3),St=Math.max(0,(ft._sprite[st][0]+ft._sprite[st][1])/1e3-_t),At=St*1e3/Math.abs(mt._rate),kt=ft._sprite[st][0]/1e3,bt=(ft._sprite[st][0]+ft._sprite[st][1])/1e3;mt._sprite=st,mt._ended=!1;var Rt=function(){mt._paused=!1,mt._seek=_t,mt._start=kt,mt._stop=bt,mt._loop=!!(mt._loop||ft._sprite[st][2])};if(_t>=bt){ft._ended(mt);return}var Ot=mt._node;if(ft._webAudio){var Ut=function(){ft._playLock=!1,Rt(),ft._refreshBuffer(mt);var qt=mt._muted||ft._muted?0:mt._volume;Ot.gain.setValueAtTime(qt,_e.ctx.currentTime),mt._playStart=_e.ctx.currentTime,typeof Ot.bufferSource.start>"u"?mt._loop?Ot.bufferSource.noteGrainOn(0,_t,86400):Ot.bufferSource.noteGrainOn(0,_t,St):mt._loop?Ot.bufferSource.start(0,_t,86400):Ot.bufferSource.start(0,_t,St),At!==1/0&&(ft._endTimers[mt._id]=setTimeout(ft._ended.bind(ft,mt),At)),ut||setTimeout(function(){ft._emit("play",mt._id),ft._loadQueue()},0)};_e.state==="running"&&_e.ctx.state!=="interrupted"?Ut():(ft._playLock=!0,ft.once("resume",Ut),ft._clearTimer(mt._id))}else{var Yt=function(){Ot.currentTime=_t,Ot.muted=mt._muted||ft._muted||_e._muted||Ot.muted,Ot.volume=mt._volume*_e.volume(),Ot.playbackRate=mt._rate;try{var qt=Ot.play();if(qt&&typeof Promise<"u"&&(qt instanceof Promise||typeof qt.then=="function")?(ft._playLock=!0,Rt(),qt.then(function(){ft._playLock=!1,Ot._unlocked=!0,ut?ft._loadQueue():ft._emit("play",mt._id)}).catch(function(){ft._playLock=!1,ft._emit("playerror",mt._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),mt._ended=!0,mt._paused=!0})):ut||(ft._playLock=!1,Rt(),ft._emit("play",mt._id)),Ot.playbackRate=mt._rate,Ot.paused){ft._emit("playerror",mt._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}st!=="__default"||mt._loop?ft._endTimers[mt._id]=setTimeout(ft._ended.bind(ft,mt),At):(ft._endTimers[mt._id]=function(){ft._ended(mt),Ot.removeEventListener("ended",ft._endTimers[mt._id],!1)},Ot.addEventListener("ended",ft._endTimers[mt._id],!1))}catch(Zt){ft._emit("playerror",mt._id,Zt)}};Ot.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(Ot.src=ft._src,Ot.load());var rn=window&&window.ejecta||!Ot.readyState&&_e._navigator.isCocoonJS;if(Ot.readyState>=3||rn)Yt();else{ft._playLock=!0,ft._state="loading";var mn=function(){ft._state="loaded",Yt(),Ot.removeEventListener(_e._canPlayEvent,mn,!1)};Ot.addEventListener(_e._canPlayEvent,mn,!1),ft._clearTimer(mt._id)}}return mt._id},pause:function(st){var ut=this;if(ut._state!=="loaded"||ut._playLock)return ut._queue.push({event:"pause",action:function(){ut.pause(st)}}),ut;for(var ft=ut._getSoundIds(st),pt=0;pt<ft.length;pt++){ut._clearTimer(ft[pt]);var gt=ut._soundById(ft[pt]);if(gt&&!gt._paused&&(gt._seek=ut.seek(ft[pt]),gt._rateSeek=0,gt._paused=!0,ut._stopFade(ft[pt]),gt._node))if(ut._webAudio){if(!gt._node.bufferSource)continue;typeof gt._node.bufferSource.stop>"u"?gt._node.bufferSource.noteOff(0):gt._node.bufferSource.stop(0),ut._cleanBuffer(gt._node)}else(!isNaN(gt._node.duration)||gt._node.duration===1/0)&&gt._node.pause();arguments[1]||ut._emit("pause",gt?gt._id:null)}return ut},stop:function(st,ut){var ft=this;if(ft._state!=="loaded"||ft._playLock)return ft._queue.push({event:"stop",action:function(){ft.stop(st)}}),ft;for(var pt=ft._getSoundIds(st),gt=0;gt<pt.length;gt++){ft._clearTimer(pt[gt]);var yt=ft._soundById(pt[gt]);yt&&(yt._seek=yt._start||0,yt._rateSeek=0,yt._paused=!0,yt._ended=!0,ft._stopFade(pt[gt]),yt._node&&(ft._webAudio?yt._node.bufferSource&&(typeof yt._node.bufferSource.stop>"u"?yt._node.bufferSource.noteOff(0):yt._node.bufferSource.stop(0),ft._cleanBuffer(yt._node)):(!isNaN(yt._node.duration)||yt._node.duration===1/0)&&(yt._node.currentTime=yt._start||0,yt._node.pause(),yt._node.duration===1/0&&ft._clearSound(yt._node))),ut||ft._emit("stop",yt._id))}return ft},mute:function(st,ut){var ft=this;if(ft._state!=="loaded"||ft._playLock)return ft._queue.push({event:"mute",action:function(){ft.mute(st,ut)}}),ft;if(typeof ut>"u")if(typeof st=="boolean")ft._muted=st;else return ft._muted;for(var pt=ft._getSoundIds(ut),gt=0;gt<pt.length;gt++){var yt=ft._soundById(pt[gt]);yt&&(yt._muted=st,yt._interval&&ft._stopFade(yt._id),ft._webAudio&&yt._node?yt._node.gain.setValueAtTime(st?0:yt._volume,_e.ctx.currentTime):yt._node&&(yt._node.muted=_e._muted?!0:st),ft._emit("mute",yt._id))}return ft},volume:function(){var st=this,ut=arguments,ft,pt;if(ut.length===0)return st._volume;if(ut.length===1||ut.length===2&&typeof ut[1]>"u"){var gt=st._getSoundIds(),yt=gt.indexOf(ut[0]);yt>=0?pt=parseInt(ut[0],10):ft=parseFloat(ut[0])}else ut.length>=2&&(ft=parseFloat(ut[0]),pt=parseInt(ut[1],10));var mt;if(typeof ft<"u"&&ft>=0&&ft<=1){if(st._state!=="loaded"||st._playLock)return st._queue.push({event:"volume",action:function(){st.volume.apply(st,ut)}}),st;typeof pt>"u"&&(st._volume=ft),pt=st._getSoundIds(pt);for(var vt=0;vt<pt.length;vt++)mt=st._soundById(pt[vt]),mt&&(mt._volume=ft,ut[2]||st._stopFade(pt[vt]),st._webAudio&&mt._node&&!mt._muted?mt._node.gain.setValueAtTime(ft,_e.ctx.currentTime):mt._node&&!mt._muted&&(mt._node.volume=ft*_e.volume()),st._emit("volume",mt._id))}else return mt=pt?st._soundById(pt):st._sounds[0],mt?mt._volume:0;return st},fade:function(st,ut,ft,pt){var gt=this;if(gt._state!=="loaded"||gt._playLock)return gt._queue.push({event:"fade",action:function(){gt.fade(st,ut,ft,pt)}}),gt;st=Math.min(Math.max(0,parseFloat(st)),1),ut=Math.min(Math.max(0,parseFloat(ut)),1),ft=parseFloat(ft),gt.volume(st,pt);for(var yt=gt._getSoundIds(pt),mt=0;mt<yt.length;mt++){var vt=gt._soundById(yt[mt]);if(vt){if(pt||gt._stopFade(yt[mt]),gt._webAudio&&!vt._muted){var _t=_e.ctx.currentTime,St=_t+ft/1e3;vt._volume=st,vt._node.gain.setValueAtTime(st,_t),vt._node.gain.linearRampToValueAtTime(ut,St)}gt._startFadeInterval(vt,st,ut,ft,yt[mt],typeof pt>"u")}}return gt},_startFadeInterval:function(st,ut,ft,pt,gt,yt){var mt=this,vt=ut,_t=ft-ut,St=Math.abs(_t/.01),At=Math.max(4,St>0?pt/St:pt),kt=Date.now();st._fadeTo=ft,st._interval=setInterval(function(){var bt=(Date.now()-kt)/pt;kt=Date.now(),vt+=_t*bt,vt=Math.round(vt*100)/100,_t<0?vt=Math.max(ft,vt):vt=Math.min(ft,vt),mt._webAudio?st._volume=vt:mt.volume(vt,st._id,!0),yt&&(mt._volume=vt),(ft<ut&&vt<=ft||ft>ut&&vt>=ft)&&(clearInterval(st._interval),st._interval=null,st._fadeTo=null,mt.volume(ft,st._id),mt._emit("fade",st._id))},At)},_stopFade:function(st){var ut=this,ft=ut._soundById(st);return ft&&ft._interval&&(ut._webAudio&&ft._node.gain.cancelScheduledValues(_e.ctx.currentTime),clearInterval(ft._interval),ft._interval=null,ut.volume(ft._fadeTo,st),ft._fadeTo=null,ut._emit("fade",st)),ut},loop:function(){var st=this,ut=arguments,ft,pt,gt;if(ut.length===0)return st._loop;if(ut.length===1)if(typeof ut[0]=="boolean")ft=ut[0],st._loop=ft;else return gt=st._soundById(parseInt(ut[0],10)),gt?gt._loop:!1;else ut.length===2&&(ft=ut[0],pt=parseInt(ut[1],10));for(var yt=st._getSoundIds(pt),mt=0;mt<yt.length;mt++)gt=st._soundById(yt[mt]),gt&&(gt._loop=ft,st._webAudio&&gt._node&&gt._node.bufferSource&&(gt._node.bufferSource.loop=ft,ft&&(gt._node.bufferSource.loopStart=gt._start||0,gt._node.bufferSource.loopEnd=gt._stop,st.playing(yt[mt])&&(st.pause(yt[mt],!0),st.play(yt[mt],!0)))));return st},rate:function(){var st=this,ut=arguments,ft,pt;if(ut.length===0)pt=st._sounds[0]._id;else if(ut.length===1){var gt=st._getSoundIds(),yt=gt.indexOf(ut[0]);yt>=0?pt=parseInt(ut[0],10):ft=parseFloat(ut[0])}else ut.length===2&&(ft=parseFloat(ut[0]),pt=parseInt(ut[1],10));var mt;if(typeof ft=="number"){if(st._state!=="loaded"||st._playLock)return st._queue.push({event:"rate",action:function(){st.rate.apply(st,ut)}}),st;typeof pt>"u"&&(st._rate=ft),pt=st._getSoundIds(pt);for(var vt=0;vt<pt.length;vt++)if(mt=st._soundById(pt[vt]),mt){st.playing(pt[vt])&&(mt._rateSeek=st.seek(pt[vt]),mt._playStart=st._webAudio?_e.ctx.currentTime:mt._playStart),mt._rate=ft,st._webAudio&&mt._node&&mt._node.bufferSource?mt._node.bufferSource.playbackRate.setValueAtTime(ft,_e.ctx.currentTime):mt._node&&(mt._node.playbackRate=ft);var _t=st.seek(pt[vt]),St=(st._sprite[mt._sprite][0]+st._sprite[mt._sprite][1])/1e3-_t,At=St*1e3/Math.abs(mt._rate);(st._endTimers[pt[vt]]||!mt._paused)&&(st._clearTimer(pt[vt]),st._endTimers[pt[vt]]=setTimeout(st._ended.bind(st,mt),At)),st._emit("rate",mt._id)}}else return mt=st._soundById(pt),mt?mt._rate:st._rate;return st},seek:function(){var st=this,ut=arguments,ft,pt;if(ut.length===0)st._sounds.length&&(pt=st._sounds[0]._id);else if(ut.length===1){var gt=st._getSoundIds(),yt=gt.indexOf(ut[0]);yt>=0?pt=parseInt(ut[0],10):st._sounds.length&&(pt=st._sounds[0]._id,ft=parseFloat(ut[0]))}else ut.length===2&&(ft=parseFloat(ut[0]),pt=parseInt(ut[1],10));if(typeof pt>"u")return 0;if(typeof ft=="number"&&(st._state!=="loaded"||st._playLock))return st._queue.push({event:"seek",action:function(){st.seek.apply(st,ut)}}),st;var mt=st._soundById(pt);if(mt)if(typeof ft=="number"&&ft>=0){var vt=st.playing(pt);vt&&st.pause(pt,!0),mt._seek=ft,mt._ended=!1,st._clearTimer(pt),!st._webAudio&&mt._node&&!isNaN(mt._node.duration)&&(mt._node.currentTime=ft);var _t=function(){vt&&st.play(pt,!0),st._emit("seek",pt)};if(vt&&!st._webAudio){var St=function(){st._playLock?setTimeout(St,0):_t()};setTimeout(St,0)}else _t()}else if(st._webAudio){var At=st.playing(pt)?_e.ctx.currentTime-mt._playStart:0,kt=mt._rateSeek?mt._rateSeek-mt._seek:0;return mt._seek+(kt+At*Math.abs(mt._rate))}else return mt._node.currentTime;return st},playing:function(st){var ut=this;if(typeof st=="number"){var ft=ut._soundById(st);return ft?!ft._paused:!1}for(var pt=0;pt<ut._sounds.length;pt++)if(!ut._sounds[pt]._paused)return!0;return!1},duration:function(st){var ut=this,ft=ut._duration,pt=ut._soundById(st);return pt&&(ft=ut._sprite[pt._sprite][1]/1e3),ft},state:function(){return this._state},unload:function(){for(var st=this,ut=st._sounds,ft=0;ft<ut.length;ft++)ut[ft]._paused||st.stop(ut[ft]._id),st._webAudio||(st._clearSound(ut[ft]._node),ut[ft]._node.removeEventListener("error",ut[ft]._errorFn,!1),ut[ft]._node.removeEventListener(_e._canPlayEvent,ut[ft]._loadFn,!1),ut[ft]._node.removeEventListener("ended",ut[ft]._endFn,!1),_e._releaseHtml5Audio(ut[ft]._node)),delete ut[ft]._node,st._clearTimer(ut[ft]._id);var pt=_e._howls.indexOf(st);pt>=0&&_e._howls.splice(pt,1);var gt=!0;for(ft=0;ft<_e._howls.length;ft++)if(_e._howls[ft]._src===st._src||st._src.indexOf(_e._howls[ft]._src)>=0){gt=!1;break}return nt&&gt&&delete nt[st._src],_e.noAudio=!1,st._state="unloaded",st._sounds=[],st=null,null},on:function(st,ut,ft,pt){var gt=this,yt=gt["_on"+st];return typeof ut=="function"&&yt.push(pt?{id:ft,fn:ut,once:pt}:{id:ft,fn:ut}),gt},off:function(st,ut,ft){var pt=this,gt=pt["_on"+st],yt=0;if(typeof ut=="number"&&(ft=ut,ut=null),ut||ft)for(yt=0;yt<gt.length;yt++){var mt=ft===gt[yt].id;if(ut===gt[yt].fn&&mt||!ut&&mt){gt.splice(yt,1);break}}else if(st)pt["_on"+st]=[];else{var vt=Object.keys(pt);for(yt=0;yt<vt.length;yt++)vt[yt].indexOf("_on")===0&&Array.isArray(pt[vt[yt]])&&(pt[vt[yt]]=[])}return pt},once:function(st,ut,ft){var pt=this;return pt.on(st,ut,ft,1),pt},_emit:function(st,ut,ft){for(var pt=this,gt=pt["_on"+st],yt=gt.length-1;yt>=0;yt--)(!gt[yt].id||gt[yt].id===ut||st==="load")&&(setTimeout((function(mt){mt.call(this,ut,ft)}).bind(pt,gt[yt].fn),0),gt[yt].once&&pt.off(st,gt[yt].fn,gt[yt].id));return pt._loadQueue(st),pt},_loadQueue:function(st){var ut=this;if(ut._queue.length>0){var ft=ut._queue[0];ft.event===st&&(ut._queue.shift(),ut._loadQueue()),st||ft.action()}return ut},_ended:function(st){var ut=this,ft=st._sprite;if(!ut._webAudio&&st._node&&!st._node.paused&&!st._node.ended&&st._node.currentTime<st._stop)return setTimeout(ut._ended.bind(ut,st),100),ut;var pt=!!(st._loop||ut._sprite[ft][2]);if(ut._emit("end",st._id),!ut._webAudio&&pt&&ut.stop(st._id,!0).play(st._id),ut._webAudio&&pt){ut._emit("play",st._id),st._seek=st._start||0,st._rateSeek=0,st._playStart=_e.ctx.currentTime;var gt=(st._stop-st._start)*1e3/Math.abs(st._rate);ut._endTimers[st._id]=setTimeout(ut._ended.bind(ut,st),gt)}return ut._webAudio&&!pt&&(st._paused=!0,st._ended=!0,st._seek=st._start||0,st._rateSeek=0,ut._clearTimer(st._id),ut._cleanBuffer(st._node),_e._autoSuspend()),!ut._webAudio&&!pt&&ut.stop(st._id,!0),ut},_clearTimer:function(st){var ut=this;if(ut._endTimers[st]){if(typeof ut._endTimers[st]!="function")clearTimeout(ut._endTimers[st]);else{var ft=ut._soundById(st);ft&&ft._node&&ft._node.removeEventListener("ended",ut._endTimers[st],!1)}delete ut._endTimers[st]}return ut},_soundById:function(st){for(var ut=this,ft=0;ft<ut._sounds.length;ft++)if(st===ut._sounds[ft]._id)return ut._sounds[ft];return null},_inactiveSound:function(){var st=this;st._drain();for(var ut=0;ut<st._sounds.length;ut++)if(st._sounds[ut]._ended)return st._sounds[ut].reset();return new tt(st)},_drain:function(){var st=this,ut=st._pool,ft=0,pt=0;if(!(st._sounds.length<ut)){for(pt=0;pt<st._sounds.length;pt++)st._sounds[pt]._ended&&ft++;for(pt=st._sounds.length-1;pt>=0;pt--){if(ft<=ut)return;st._sounds[pt]._ended&&(st._webAudio&&st._sounds[pt]._node&&st._sounds[pt]._node.disconnect(0),st._sounds.splice(pt,1),ft--)}}},_getSoundIds:function(st){var ut=this;if(typeof st>"u"){for(var ft=[],pt=0;pt<ut._sounds.length;pt++)ft.push(ut._sounds[pt]._id);return ft}else return[st]},_refreshBuffer:function(st){var ut=this;return st._node.bufferSource=_e.ctx.createBufferSource(),st._node.bufferSource.buffer=nt[ut._src],st._panner?st._node.bufferSource.connect(st._panner):st._node.bufferSource.connect(st._node),st._node.bufferSource.loop=st._loop,st._loop&&(st._node.bufferSource.loopStart=st._start||0,st._node.bufferSource.loopEnd=st._stop||0),st._node.bufferSource.playbackRate.setValueAtTime(st._rate,_e.ctx.currentTime),ut},_cleanBuffer:function(st){var ut=this,ft=_e._navigator&&_e._navigator.vendor.indexOf("Apple")>=0;if(!st.bufferSource)return ut;if(_e._scratchBuffer&&st.bufferSource&&(st.bufferSource.onended=null,st.bufferSource.disconnect(0),ft))try{st.bufferSource.buffer=_e._scratchBuffer}catch{}return st.bufferSource=null,ut},_clearSound:function(st){var ut=/MSIE |Trident\//.test(_e._navigator&&_e._navigator.userAgent);ut||(st.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var tt=function(st){this._parent=st,this.init()};tt.prototype={init:function(){var st=this,ut=st._parent;return st._muted=ut._muted,st._loop=ut._loop,st._volume=ut._volume,st._rate=ut._rate,st._seek=0,st._paused=!0,st._ended=!0,st._sprite="__default",st._id=++_e._counter,ut._sounds.push(st),st.create(),st},create:function(){var st=this,ut=st._parent,ft=_e._muted||st._muted||st._parent._muted?0:st._volume;return ut._webAudio?(st._node=typeof _e.ctx.createGain>"u"?_e.ctx.createGainNode():_e.ctx.createGain(),st._node.gain.setValueAtTime(ft,_e.ctx.currentTime),st._node.paused=!0,st._node.connect(_e.masterGain)):_e.noAudio||(st._node=_e._obtainHtml5Audio(),st._errorFn=st._errorListener.bind(st),st._node.addEventListener("error",st._errorFn,!1),st._loadFn=st._loadListener.bind(st),st._node.addEventListener(_e._canPlayEvent,st._loadFn,!1),st._endFn=st._endListener.bind(st),st._node.addEventListener("ended",st._endFn,!1),st._node.src=ut._src,st._node.preload=ut._preload===!0?"auto":ut._preload,st._node.volume=ft*_e.volume(),st._node.load()),st},reset:function(){var st=this,ut=st._parent;return st._muted=ut._muted,st._loop=ut._loop,st._volume=ut._volume,st._rate=ut._rate,st._seek=0,st._rateSeek=0,st._paused=!0,st._ended=!0,st._sprite="__default",st._id=++_e._counter,st},_errorListener:function(){var st=this;st._parent._emit("loaderror",st._id,st._node.error?st._node.error.code:0),st._node.removeEventListener("error",st._errorFn,!1)},_loadListener:function(){var st=this,ut=st._parent;ut._duration=Math.ceil(st._node.duration*10)/10,Object.keys(ut._sprite).length===0&&(ut._sprite={__default:[0,ut._duration*1e3]}),ut._state!=="loaded"&&(ut._state="loaded",ut._emit("load"),ut._loadQueue()),st._node.removeEventListener(_e._canPlayEvent,st._loadFn,!1)},_endListener:function(){var st=this,ut=st._parent;ut._duration===1/0&&(ut._duration=Math.ceil(st._node.duration*10)/10,ut._sprite.__default[1]===1/0&&(ut._sprite.__default[1]=ut._duration*1e3),ut._ended(st)),st._node.removeEventListener("ended",st._endFn,!1)}};var nt={},rt=function(st){var ut=st._src;if(nt[ut]){st._duration=nt[ut].duration,at(st);return}if(/^data:[^;]+;base64,/.test(ut)){for(var ft=atob(ut.split(",")[1]),pt=new Uint8Array(ft.length),gt=0;gt<ft.length;++gt)pt[gt]=ft.charCodeAt(gt);it(pt.buffer,st)}else{var yt=new XMLHttpRequest;yt.open(st._xhr.method,ut,!0),yt.withCredentials=st._xhr.withCredentials,yt.responseType="arraybuffer",st._xhr.headers&&Object.keys(st._xhr.headers).forEach(function(mt){yt.setRequestHeader(mt,st._xhr.headers[mt])}),yt.onload=function(){var mt=(yt.status+"")[0];if(mt!=="0"&&mt!=="2"&&mt!=="3"){st._emit("loaderror",null,"Failed loading audio file with status: "+yt.status+".");return}it(yt.response,st)},yt.onerror=function(){st._webAudio&&(st._html5=!0,st._webAudio=!1,st._sounds=[],delete nt[ut],st.load())},ot(yt)}},ot=function(st){try{st.send()}catch{st.onerror()}},it=function(st,ut){var ft=function(){ut._emit("loaderror",null,"Decoding audio data failed.")},pt=function(gt){gt&&ut._sounds.length>0?(nt[ut._src]=gt,at(ut,gt)):ft()};typeof Promise<"u"&&_e.ctx.decodeAudioData.length===1?_e.ctx.decodeAudioData(st).then(pt).catch(ft):_e.ctx.decodeAudioData(st,pt,ft)},at=function(st,ut){ut&&!st._duration&&(st._duration=ut.duration),Object.keys(st._sprite).length===0&&(st._sprite={__default:[0,st._duration*1e3]}),st._state!=="loaded"&&(st._state="loaded",st._emit("load"),st._loadQueue())},dt=function(){if(_e.usingWebAudio){try{typeof AudioContext<"u"?_e.ctx=new AudioContext:typeof webkitAudioContext<"u"?_e.ctx=new webkitAudioContext:_e.usingWebAudio=!1}catch{_e.usingWebAudio=!1}_e.ctx||(_e.usingWebAudio=!1);var st=/iP(hone|od|ad)/.test(_e._navigator&&_e._navigator.platform),ut=_e._navigator&&_e._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),ft=ut?parseInt(ut[1],10):null;if(st&&ft&&ft<9){var pt=/safari/.test(_e._navigator&&_e._navigator.userAgent.toLowerCase());_e._navigator&&!pt&&(_e.usingWebAudio=!1)}_e.usingWebAudio&&(_e.masterGain=typeof _e.ctx.createGain>"u"?_e.ctx.createGainNode():_e.ctx.createGain(),_e.masterGain.gain.setValueAtTime(_e._muted?0:_e._volume,_e.ctx.currentTime),_e.masterGain.connect(_e.ctx.destination)),_e._setup()}};$.Howler=_e,$.Howl=et,typeof commonjsGlobal<"u"?(commonjsGlobal.HowlerGlobal=j,commonjsGlobal.Howler=_e,commonjsGlobal.Howl=et,commonjsGlobal.Sound=tt):typeof window<"u"&&(window.HowlerGlobal=j,window.Howler=_e,window.Howl=et,window.Sound=tt)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(_e){var et=this;if(!et.ctx||!et.ctx.listener)return et;for(var tt=et._howls.length-1;tt>=0;tt--)et._howls[tt].stereo(_e);return et},HowlerGlobal.prototype.pos=function(_e,et,tt){var nt=this;if(!nt.ctx||!nt.ctx.listener)return nt;if(et=typeof et!="number"?nt._pos[1]:et,tt=typeof tt!="number"?nt._pos[2]:tt,typeof _e=="number")nt._pos=[_e,et,tt],typeof nt.ctx.listener.positionX<"u"?(nt.ctx.listener.positionX.setTargetAtTime(nt._pos[0],Howler.ctx.currentTime,.1),nt.ctx.listener.positionY.setTargetAtTime(nt._pos[1],Howler.ctx.currentTime,.1),nt.ctx.listener.positionZ.setTargetAtTime(nt._pos[2],Howler.ctx.currentTime,.1)):nt.ctx.listener.setPosition(nt._pos[0],nt._pos[1],nt._pos[2]);else return nt._pos;return nt},HowlerGlobal.prototype.orientation=function(_e,et,tt,nt,rt,ot){var it=this;if(!it.ctx||!it.ctx.listener)return it;var at=it._orientation;if(et=typeof et!="number"?at[1]:et,tt=typeof tt!="number"?at[2]:tt,nt=typeof nt!="number"?at[3]:nt,rt=typeof rt!="number"?at[4]:rt,ot=typeof ot!="number"?at[5]:ot,typeof _e=="number")it._orientation=[_e,et,tt,nt,rt,ot],typeof it.ctx.listener.forwardX<"u"?(it.ctx.listener.forwardX.setTargetAtTime(_e,Howler.ctx.currentTime,.1),it.ctx.listener.forwardY.setTargetAtTime(et,Howler.ctx.currentTime,.1),it.ctx.listener.forwardZ.setTargetAtTime(tt,Howler.ctx.currentTime,.1),it.ctx.listener.upX.setTargetAtTime(nt,Howler.ctx.currentTime,.1),it.ctx.listener.upY.setTargetAtTime(rt,Howler.ctx.currentTime,.1),it.ctx.listener.upZ.setTargetAtTime(ot,Howler.ctx.currentTime,.1)):it.ctx.listener.setOrientation(_e,et,tt,nt,rt,ot);else return at;return it},Howl.prototype.init=function(_e){return function(et){var tt=this;return tt._orientation=et.orientation||[1,0,0],tt._stereo=et.stereo||null,tt._pos=et.pos||null,tt._pannerAttr={coneInnerAngle:typeof et.coneInnerAngle<"u"?et.coneInnerAngle:360,coneOuterAngle:typeof et.coneOuterAngle<"u"?et.coneOuterAngle:360,coneOuterGain:typeof et.coneOuterGain<"u"?et.coneOuterGain:0,distanceModel:typeof et.distanceModel<"u"?et.distanceModel:"inverse",maxDistance:typeof et.maxDistance<"u"?et.maxDistance:1e4,panningModel:typeof et.panningModel<"u"?et.panningModel:"HRTF",refDistance:typeof et.refDistance<"u"?et.refDistance:1,rolloffFactor:typeof et.rolloffFactor<"u"?et.rolloffFactor:1},tt._onstereo=et.onstereo?[{fn:et.onstereo}]:[],tt._onpos=et.onpos?[{fn:et.onpos}]:[],tt._onorientation=et.onorientation?[{fn:et.onorientation}]:[],_e.call(this,et)}}(Howl.prototype.init),Howl.prototype.stereo=function(_e,et){var tt=this;if(!tt._webAudio)return tt;if(tt._state!=="loaded")return tt._queue.push({event:"stereo",action:function(){tt.stereo(_e,et)}}),tt;var nt=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof et>"u")if(typeof _e=="number")tt._stereo=_e,tt._pos=[_e,0,0];else return tt._stereo;for(var rt=tt._getSoundIds(et),ot=0;ot<rt.length;ot++){var it=tt._soundById(rt[ot]);if(it)if(typeof _e=="number")it._stereo=_e,it._pos=[_e,0,0],it._node&&(it._pannerAttr.panningModel="equalpower",(!it._panner||!it._panner.pan)&&j(it,nt),nt==="spatial"?typeof it._panner.positionX<"u"?(it._panner.positionX.setValueAtTime(_e,Howler.ctx.currentTime),it._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),it._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):it._panner.setPosition(_e,0,0):it._panner.pan.setValueAtTime(_e,Howler.ctx.currentTime)),tt._emit("stereo",it._id);else return it._stereo}return tt},Howl.prototype.pos=function(_e,et,tt,nt){var rt=this;if(!rt._webAudio)return rt;if(rt._state!=="loaded")return rt._queue.push({event:"pos",action:function(){rt.pos(_e,et,tt,nt)}}),rt;if(et=typeof et!="number"?0:et,tt=typeof tt!="number"?-.5:tt,typeof nt>"u")if(typeof _e=="number")rt._pos=[_e,et,tt];else return rt._pos;for(var ot=rt._getSoundIds(nt),it=0;it<ot.length;it++){var at=rt._soundById(ot[it]);if(at)if(typeof _e=="number")at._pos=[_e,et,tt],at._node&&((!at._panner||at._panner.pan)&&j(at,"spatial"),typeof at._panner.positionX<"u"?(at._panner.positionX.setValueAtTime(_e,Howler.ctx.currentTime),at._panner.positionY.setValueAtTime(et,Howler.ctx.currentTime),at._panner.positionZ.setValueAtTime(tt,Howler.ctx.currentTime)):at._panner.setPosition(_e,et,tt)),rt._emit("pos",at._id);else return at._pos}return rt},Howl.prototype.orientation=function(_e,et,tt,nt){var rt=this;if(!rt._webAudio)return rt;if(rt._state!=="loaded")return rt._queue.push({event:"orientation",action:function(){rt.orientation(_e,et,tt,nt)}}),rt;if(et=typeof et!="number"?rt._orientation[1]:et,tt=typeof tt!="number"?rt._orientation[2]:tt,typeof nt>"u")if(typeof _e=="number")rt._orientation=[_e,et,tt];else return rt._orientation;for(var ot=rt._getSoundIds(nt),it=0;it<ot.length;it++){var at=rt._soundById(ot[it]);if(at)if(typeof _e=="number")at._orientation=[_e,et,tt],at._node&&(at._panner||(at._pos||(at._pos=rt._pos||[0,0,-.5]),j(at,"spatial")),typeof at._panner.orientationX<"u"?(at._panner.orientationX.setValueAtTime(_e,Howler.ctx.currentTime),at._panner.orientationY.setValueAtTime(et,Howler.ctx.currentTime),at._panner.orientationZ.setValueAtTime(tt,Howler.ctx.currentTime)):at._panner.setOrientation(_e,et,tt)),rt._emit("orientation",at._id);else return at._orientation}return rt},Howl.prototype.pannerAttr=function(){var _e=this,et=arguments,tt,nt,rt;if(!_e._webAudio)return _e;if(et.length===0)return _e._pannerAttr;if(et.length===1)if(typeof et[0]=="object")tt=et[0],typeof nt>"u"&&(tt.pannerAttr||(tt.pannerAttr={coneInnerAngle:tt.coneInnerAngle,coneOuterAngle:tt.coneOuterAngle,coneOuterGain:tt.coneOuterGain,distanceModel:tt.distanceModel,maxDistance:tt.maxDistance,refDistance:tt.refDistance,rolloffFactor:tt.rolloffFactor,panningModel:tt.panningModel}),_e._pannerAttr={coneInnerAngle:typeof tt.pannerAttr.coneInnerAngle<"u"?tt.pannerAttr.coneInnerAngle:_e._coneInnerAngle,coneOuterAngle:typeof tt.pannerAttr.coneOuterAngle<"u"?tt.pannerAttr.coneOuterAngle:_e._coneOuterAngle,coneOuterGain:typeof tt.pannerAttr.coneOuterGain<"u"?tt.pannerAttr.coneOuterGain:_e._coneOuterGain,distanceModel:typeof tt.pannerAttr.distanceModel<"u"?tt.pannerAttr.distanceModel:_e._distanceModel,maxDistance:typeof tt.pannerAttr.maxDistance<"u"?tt.pannerAttr.maxDistance:_e._maxDistance,refDistance:typeof tt.pannerAttr.refDistance<"u"?tt.pannerAttr.refDistance:_e._refDistance,rolloffFactor:typeof tt.pannerAttr.rolloffFactor<"u"?tt.pannerAttr.rolloffFactor:_e._rolloffFactor,panningModel:typeof tt.pannerAttr.panningModel<"u"?tt.pannerAttr.panningModel:_e._panningModel});else return rt=_e._soundById(parseInt(et[0],10)),rt?rt._pannerAttr:_e._pannerAttr;else et.length===2&&(tt=et[0],nt=parseInt(et[1],10));for(var ot=_e._getSoundIds(nt),it=0;it<ot.length;it++)if(rt=_e._soundById(ot[it]),rt){var at=rt._pannerAttr;at={coneInnerAngle:typeof tt.coneInnerAngle<"u"?tt.coneInnerAngle:at.coneInnerAngle,coneOuterAngle:typeof tt.coneOuterAngle<"u"?tt.coneOuterAngle:at.coneOuterAngle,coneOuterGain:typeof tt.coneOuterGain<"u"?tt.coneOuterGain:at.coneOuterGain,distanceModel:typeof tt.distanceModel<"u"?tt.distanceModel:at.distanceModel,maxDistance:typeof tt.maxDistance<"u"?tt.maxDistance:at.maxDistance,refDistance:typeof tt.refDistance<"u"?tt.refDistance:at.refDistance,rolloffFactor:typeof tt.rolloffFactor<"u"?tt.rolloffFactor:at.rolloffFactor,panningModel:typeof tt.panningModel<"u"?tt.panningModel:at.panningModel};var dt=rt._panner;dt||(rt._pos||(rt._pos=_e._pos||[0,0,-.5]),j(rt,"spatial"),dt=rt._panner),dt.coneInnerAngle=at.coneInnerAngle,dt.coneOuterAngle=at.coneOuterAngle,dt.coneOuterGain=at.coneOuterGain,dt.distanceModel=at.distanceModel,dt.maxDistance=at.maxDistance,dt.refDistance=at.refDistance,dt.rolloffFactor=at.rolloffFactor,dt.panningModel=at.panningModel}return _e},Sound.prototype.init=function(_e){return function(){var et=this,tt=et._parent;et._orientation=tt._orientation,et._stereo=tt._stereo,et._pos=tt._pos,et._pannerAttr=tt._pannerAttr,_e.call(this),et._stereo?tt.stereo(et._stereo):et._pos&&tt.pos(et._pos[0],et._pos[1],et._pos[2],et._id)}}(Sound.prototype.init),Sound.prototype.reset=function(_e){return function(){var et=this,tt=et._parent;return et._orientation=tt._orientation,et._stereo=tt._stereo,et._pos=tt._pos,et._pannerAttr=tt._pannerAttr,et._stereo?tt.stereo(et._stereo):et._pos?tt.pos(et._pos[0],et._pos[1],et._pos[2],et._id):et._panner&&(et._panner.disconnect(0),et._panner=void 0,tt._refreshBuffer(et)),_e.call(this)}}(Sound.prototype.reset);var j=function(_e,et){et=et||"spatial",et==="spatial"?(_e._panner=Howler.ctx.createPanner(),_e._panner.coneInnerAngle=_e._pannerAttr.coneInnerAngle,_e._panner.coneOuterAngle=_e._pannerAttr.coneOuterAngle,_e._panner.coneOuterGain=_e._pannerAttr.coneOuterGain,_e._panner.distanceModel=_e._pannerAttr.distanceModel,_e._panner.maxDistance=_e._pannerAttr.maxDistance,_e._panner.refDistance=_e._pannerAttr.refDistance,_e._panner.rolloffFactor=_e._pannerAttr.rolloffFactor,_e._panner.panningModel=_e._pannerAttr.panningModel,typeof _e._panner.positionX<"u"?(_e._panner.positionX.setValueAtTime(_e._pos[0],Howler.ctx.currentTime),_e._panner.positionY.setValueAtTime(_e._pos[1],Howler.ctx.currentTime),_e._panner.positionZ.setValueAtTime(_e._pos[2],Howler.ctx.currentTime)):_e._panner.setPosition(_e._pos[0],_e._pos[1],_e._pos[2]),typeof _e._panner.orientationX<"u"?(_e._panner.orientationX.setValueAtTime(_e._orientation[0],Howler.ctx.currentTime),_e._panner.orientationY.setValueAtTime(_e._orientation[1],Howler.ctx.currentTime),_e._panner.orientationZ.setValueAtTime(_e._orientation[2],Howler.ctx.currentTime)):_e._panner.setOrientation(_e._orientation[0],_e._orientation[1],_e._orientation[2])):(_e._panner=Howler.ctx.createStereoPanner(),_e._panner.pan.setValueAtTime(_e._stereo,Howler.ctx.currentTime)),_e._panner.connect(_e._node),_e._paused||_e._parent.pause(_e._id,!0).play(_e._id,!0)}})()})(howler);const normalizeVolume=$=>$>1?$*.01:$;let Sound$1=class Is{constructor(j,_e){this._state=0,this._error=null,this.isScheduled=!1,this.howl=new howler.Howl({src:[j],volume:normalizeVolume(_e),loop:!1,preload:!0,autoplay:!1,onload:()=>{this._state=2,this.isScheduled&&this.howl.play()},onloaderror:(et,tt)=>{console.error(j,tt),this._state=1,this._error=tt},onplayerror:(et,tt)=>{console.error(j,tt),this._state=3,this._error=tt},onplay:()=>{this._state=4},onend:()=>{this._state=6},onpause:()=>{this._state=5},onstop:()=>{this._state=6},onunlock:()=>{this._state===2&&this.isScheduled&&(this._state=4,this.howl.play())}})}static create(j,_e){return new Is(j,_e)}get state(){return this._state}get error(){return this._error}get isPlaying(){return this._state===4||this._state===0}play(j){this.howl.volume(normalizeVolume(j)),this.isScheduled=!0,this.howl.state()==="loaded"&&!this.howl.playing()&&this.howl.play()}stop(){this.isScheduled=!1,this.howl.stop()}dispose(){this.isScheduled=!1,this.howl.stop(),this.howl.unload()}};const n=[1026,1027,8218,1107,8222,8230,8224,8225,8364,8240,1033,8249,1034,1036,1035,1039,1106,8216,8217,8220,8221,8226,8211,8212,32,8482,1113,8250,1114,1116,1115,1119,160,1038,1118,1032,164,1168,166,167,1025,169,1028,171,172,173,174,1031,176,177,1030,1110,1169,181,182,183,1105,8470,1108,187,1112,1029,1109,1111,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103];function t($){return String.fromCharCode($>=128?n[$-128]:$)}class e{constructor(j){this.cursor=0,this.content=void 0,this.view=void 0,this.isUnicode=void 0,this.content=j??new ArrayBuffer(256),this.view=new DataView(this.content),this.isUnicode=this.view.getUint8(1)===0}ensureSize(j){if(this.content.byteLength>=j)return;const _e=new ArrayBuffer(2*this.content.byteLength);new Uint8Array(_e).set(new Uint8Array(this.content)),this.content=_e,this.view=new DataView(this.content)}finalize(){return this.content=this.content.slice(0,this.cursor),this.content}get eof(){return this.cursor>=this.content.byteLength}read(){const j=this.cursor;return this.cursor+=this.isUnicode?Uint16Array.BYTES_PER_ELEMENT:Uint8Array.BYTES_PER_ELEMENT,this.isUnicode?this.view.getUint16(j,!0):this.view.getUint8(j)}readLine(j=!0){const _e=[];for(;!this.eof;){const et=this.read();if(et===13){this.read();break}_e.push(j?et===-5?5:et+5:et)}return this.isUnicode?_e.map(et=>String.fromCharCode(et)).join(""):_e.map(t).join("")}write(j){this.ensureSize(this.cursor+Int16Array.BYTES_PER_ELEMENT);const _e=this.cursor;this.cursor+=Int16Array.BYTES_PER_ELEMENT,this.view.setUint16(_e,j,!0)}writeString(j,_e=!0){const et=j.split("").map(tt=>tt.charCodeAt(0));for(const tt of et.values())this.write(_e?tt===5?-5:tt-5:tt)}writeLine(j,_e=!0){j&&this.writeString(j,_e),this.writeString(`\r
`,!1)}seek(j){this.cursor=j}}const r=["'",'"'];function s($){const j=[];let _e=!1,et=null,tt=[];const nt=$.split(/\r?\n/);let rt="",ot=0;for(const it of nt)if(_e){if(!rt&&!ot&&it.startsWith("-")){_e=!1,et&&(et.code=tt,tt=[],j.push(et),et=null);continue}tt.push(it);const at=it.split("");for(let dt=0;dt<at.length;++dt){const st=at[dt];rt?st==rt&&(at[dt+1]==rt?dt++:rt=""):st=="{"?++ot:st=="}"?ot&&--ot:r.includes(st)&&(rt=st)}}else it.startsWith("#")&&(_e=!0,et={name:it.slice(1).trim(),description:[],code:[],actions:[]});return _e&&et&&(et.code=tt,j.push(et)),j}function o($){const j=new e;j.writeLine("QSPGAME",!1),j.writeLine("@qsp/converters 1.0",!1),j.writeLine("No"),j.writeLine(String($.length));for(const et of $){j.writeLine(et.name),j.writeLine(et.description.join(`\r
`)),j.writeLine(et.code.join(`\r
`)),j.writeLine(String(et.actions.length));for(const tt of et.actions){var _e;j.writeLine((_e=tt.image)!=null?_e:""),j.writeLine(tt.name),j.writeLine(tt.code.join(`\r
`))}}return j.finalize()}function convertQsps($){const j=new Uint8Array($.slice(0,2)),_e=j[0]===255&&j[1]===254?"utf-16le":"utf-8",tt=new TextDecoder(_e).decode($);return o(s(tt))}function prepareContent($){return $.replace(/&gt([^;])/gi,(j,_e)=>"& gt "+_e).replace(/\\"/g,"&quot;")}function prepareList($){return $.map(j=>({name:prepareContent(j.name),image:cleanPath(j.image)}))}const clamp$3=function($,j,_e){return Math.min(Math.max($,j),_e)},VOLUME_STEP=10,sounds$=atom(new Map,$=>({isPlaying(j){const _e=getFileKey(j),et=$.value.get(_e);return!!(et!=null&&et.isPlaying)},play(j,_e){const et=getFileKey(j);let tt=$.value.get(et);tt||(tt=Sound$1.create(j,_e),$.value.set(et,tt)),tt.play(_e)},close(j){const _e=getFileKey(j),et=$.value.get(_e);et&&et.stop()},closeAll(){for(const j of $.value.values())j.stop()},clear(){for(const j of $.value.values())j.dispose();$.set(new Map)}})),muted$=atom(!1),volume$=atom(100,$=>({increase(){$.update(j=>clamp$3(j+VOLUME_STEP,0,100))},decrease(){$.update(j=>clamp$3(j-VOLUME_STEP,0,100))}}));muted$.watch($=>{howler.Howler.mute($)});volume$.watch($=>{howler.Howler.volume(normalizeVolume(clamp$3($,0,100)))});function getFileKey($){return $.replace("/","__").toUpperCase()}const saveLoadedCallback$=create(),gameSavedCallback$=create(),saveSlots$=create([]),namedSlots$=create([]),requestedAction$=create(null),QUICK_SAVE_KEY="__quicksave_qspider__";async function loadSaveList(){const $=currentGameEntry$.value;if(!$){saveSlots$.set([]),namedSlots$.set([]);return}const j=await getStorage().getSavedSlots($.id);saveSlots$.set(j||[]);const _e=await getStorage().getNamedSaves($.id);namedSlots$.set(_e||[])}async function saveToSlot($){var tt;const j=currentGameEntry$.value;if(!j)return;const _e=(tt=qspApi$.value)==null?void 0:tt.saveGame();_e&&await getStorage().saveBySlot(j.id,$,_e);const et=gameSavedCallback$.value;et==null||et(),gameSavedCallback$.set(null),requestedAction$.set(null),await loadSaveList()}async function saveToPath($){var tt;const j=currentGameEntry$.value;if(!j)return;const _e=(tt=qspApi$.value)==null?void 0:tt.saveGame();_e&&await getStorage().saveByKey(j.id,$,_e);const et=gameSavedCallback$.value;et==null||et(),gameSavedCallback$.set(null),requestedAction$.set(null),await loadSaveList()}async function restoreFromSlot($){var tt;const j=currentGameEntry$.value;if(!j)return;const _e=await getStorage().getSaveDataBySlot(j.id,$),et=saveLoadedCallback$.value;et==null||et(),saveLoadedCallback$.set(null),requestedAction$.set(null),_e&&((tt=qspApi$.value)==null||tt.loadSave(_e))}async function restoreFromPath($){var tt;const j=currentGameEntry$.value;if(!j)return;const _e=await getStorage().getSaveDataByKey(j.id,$),et=saveLoadedCallback$.value;et==null||et(),saveLoadedCallback$.set(null),requestedAction$.set(null),_e&&((tt=qspApi$.value)==null||tt.loadSave(_e))}async function clearSlot($){const j=currentGameEntry$.value;j&&(await getStorage().clearSaveSlot(j.id,$),await loadSaveList())}async function clearPath($){const j=currentGameEntry$.value;j&&(await getStorage().clearSaveKey(j.id,$),await loadSaveList())}async function quickSave(){var _e;if((_e=qspApi$.value)==null?void 0:_e.readVariable("NOSAVE"))return;const j=currentGameEntry$.value;j&&await withCounterPaused(async()=>{var tt;const et=(tt=qspApi$.value)==null?void 0:tt.saveGame();et&&await getStorage().saveByKey(j.id,QUICK_SAVE_KEY,et)})}async function quickLoad(){const $=currentGameEntry$.value;$&&await withCounterPaused(async()=>{var _e;const j=await getStorage().getSaveDataByKey($.id,QUICK_SAVE_KEY);j&&((_e=qspApi$.value)==null||_e.loadSave(j),onRestore())})}async function onSaveCommand($,j){const{slot_index:_e,save_path:et}=j;switch($){case"load":_e>0?await restoreFromSlot(_e):et&&await restoreFromPath(et),onRestore(),closePauseScreen();break;case"save":_e>0?await saveToSlot(_e):et&&await saveToPath(et),closePauseScreen();break;case"clear":_e>0?clearSlot(_e):et&&clearPath(et);break;default:console.error(`Unknown save action: ${$}`)}}const isPauseScreenVisible$=atom(!1),pauseScreenCurrentPanel$=atom("credits");function openPauseScreen(){isPauseScreenVisible$.set(!0)}function closePauseScreen(){isPauseScreenVisible$.set(!1),saveLoadedCallback$.value&&(saveLoadedCallback$.value(),saveLoadedCallback$.set(null)),gameSavedCallback$.value&&(gameSavedCallback$.value(),gameSavedCallback$.set(null))}isPauseScreenVisible$.subscribe($=>{$?isPaused$.set(!0):isPaused$.set(!1)});var mousetrap={exports:{}};(function($){(function(j,_e,et){if(!j)return;for(var tt={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},nt={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},rt={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},ot={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},it,at=1;at<20;++at)tt[111+at]="f"+at;for(at=0;at<=9;++at)tt[at+96]=at.toString();function dt(bt,Rt,Ot){if(bt.addEventListener){bt.addEventListener(Rt,Ot,!1);return}bt.attachEvent("on"+Rt,Ot)}function st(bt){if(bt.type=="keypress"){var Rt=String.fromCharCode(bt.which);return bt.shiftKey||(Rt=Rt.toLowerCase()),Rt}return tt[bt.which]?tt[bt.which]:nt[bt.which]?nt[bt.which]:String.fromCharCode(bt.which).toLowerCase()}function ut(bt,Rt){return bt.sort().join(",")===Rt.sort().join(",")}function ft(bt){var Rt=[];return bt.shiftKey&&Rt.push("shift"),bt.altKey&&Rt.push("alt"),bt.ctrlKey&&Rt.push("ctrl"),bt.metaKey&&Rt.push("meta"),Rt}function pt(bt){if(bt.preventDefault){bt.preventDefault();return}bt.returnValue=!1}function gt(bt){if(bt.stopPropagation){bt.stopPropagation();return}bt.cancelBubble=!0}function yt(bt){return bt=="shift"||bt=="ctrl"||bt=="alt"||bt=="meta"}function mt(){if(!it){it={};for(var bt in tt)bt>95&&bt<112||tt.hasOwnProperty(bt)&&(it[tt[bt]]=bt)}return it}function vt(bt,Rt,Ot){return Ot||(Ot=mt()[bt]?"keydown":"keypress"),Ot=="keypress"&&Rt.length&&(Ot="keydown"),Ot}function _t(bt){return bt==="+"?["+"]:(bt=bt.replace(/\+{2}/g,"+plus"),bt.split("+"))}function St(bt,Rt){var Ot,Ut,Yt,rn=[];for(Ot=_t(bt),Yt=0;Yt<Ot.length;++Yt)Ut=Ot[Yt],ot[Ut]&&(Ut=ot[Ut]),Rt&&Rt!="keypress"&&rt[Ut]&&(Ut=rt[Ut],rn.push("shift")),yt(Ut)&&rn.push(Ut);return Rt=vt(Ut,rn,Rt),{key:Ut,modifiers:rn,action:Rt}}function At(bt,Rt){return bt===null||bt===_e?!1:bt===Rt?!0:At(bt.parentNode,Rt)}function kt(bt){var Rt=this;if(bt=bt||_e,!(Rt instanceof kt))return new kt(bt);Rt.target=bt,Rt._callbacks={},Rt._directMap={};var Ot={},Ut,Yt=!1,rn=!1,mn=!1;function qt(nn){nn=nn||{};var cn=!1,Sn;for(Sn in Ot){if(nn[Sn]){cn=!0;continue}Ot[Sn]=0}cn||(mn=!1)}function Zt(nn,cn,Sn,vn,En,Rn){var tn,Cn,en=[],An=Sn.type;if(!Rt._callbacks[nn])return[];for(An=="keyup"&&yt(nn)&&(cn=[nn]),tn=0;tn<Rt._callbacks[nn].length;++tn)if(Cn=Rt._callbacks[nn][tn],!(!vn&&Cn.seq&&Ot[Cn.seq]!=Cn.level)&&An==Cn.action&&(An=="keypress"&&!Sn.metaKey&&!Sn.ctrlKey||ut(cn,Cn.modifiers))){var Nn=!vn&&Cn.combo==En,xn=vn&&Cn.seq==vn&&Cn.level==Rn;(Nn||xn)&&Rt._callbacks[nn].splice(tn,1),en.push(Cn)}return en}function Jt(nn,cn,Sn,vn){Rt.stopCallback(cn,cn.target||cn.srcElement,Sn,vn)||nn(cn,Sn)===!1&&(pt(cn),gt(cn))}Rt._handleKey=function(nn,cn,Sn){var vn=Zt(nn,cn,Sn),En,Rn={},tn=0,Cn=!1;for(En=0;En<vn.length;++En)vn[En].seq&&(tn=Math.max(tn,vn[En].level));for(En=0;En<vn.length;++En){if(vn[En].seq){if(vn[En].level!=tn)continue;Cn=!0,Rn[vn[En].seq]=1,Jt(vn[En].callback,Sn,vn[En].combo,vn[En].seq);continue}Cn||Jt(vn[En].callback,Sn,vn[En].combo)}var en=Sn.type=="keypress"&&rn;Sn.type==mn&&!yt(nn)&&!en&&qt(Rn),rn=Cn&&Sn.type=="keydown"};function un(nn){typeof nn.which!="number"&&(nn.which=nn.keyCode);var cn=st(nn);if(cn){if(nn.type=="keyup"&&Yt===cn){Yt=!1;return}Rt.handleKey(cn,ft(nn),nn)}}function Wt(){clearTimeout(Ut),Ut=setTimeout(qt,1e3)}function Qt(nn,cn,Sn,vn){Ot[nn]=0;function En(An){return function(){mn=An,++Ot[nn],Wt()}}function Rn(An){Jt(Sn,An,nn),vn!=="keyup"&&(Yt=st(An)),setTimeout(qt,10)}for(var tn=0;tn<cn.length;++tn){var Cn=tn+1===cn.length,en=Cn?Rn:En(vn||St(cn[tn+1]).action);on(cn[tn],en,vn,nn,tn)}}function on(nn,cn,Sn,vn,En){Rt._directMap[nn+":"+Sn]=cn,nn=nn.replace(/\s+/g," ");var Rn=nn.split(" "),tn;if(Rn.length>1){Qt(nn,Rn,cn,Sn);return}tn=St(nn,Sn),Rt._callbacks[tn.key]=Rt._callbacks[tn.key]||[],Zt(tn.key,tn.modifiers,{type:tn.action},vn,nn,En),Rt._callbacks[tn.key][vn?"unshift":"push"]({callback:cn,modifiers:tn.modifiers,action:tn.action,seq:vn,level:En,combo:nn})}Rt._bindMultiple=function(nn,cn,Sn){for(var vn=0;vn<nn.length;++vn)on(nn[vn],cn,Sn)},dt(bt,"keypress",un),dt(bt,"keydown",un),dt(bt,"keyup",un)}kt.prototype.bind=function(bt,Rt,Ot){var Ut=this;return bt=bt instanceof Array?bt:[bt],Ut._bindMultiple.call(Ut,bt,Rt,Ot),Ut},kt.prototype.unbind=function(bt,Rt){var Ot=this;return Ot.bind.call(Ot,bt,function(){},Rt)},kt.prototype.trigger=function(bt,Rt){var Ot=this;return Ot._directMap[bt+":"+Rt]&&Ot._directMap[bt+":"+Rt]({},bt),Ot},kt.prototype.reset=function(){var bt=this;return bt._callbacks={},bt._directMap={},bt},kt.prototype.stopCallback=function(bt,Rt){var Ot=this;if((" "+Rt.className+" ").indexOf(" mousetrap ")>-1||At(Rt,Ot.target))return!1;if("composedPath"in bt&&typeof bt.composedPath=="function"){var Ut=bt.composedPath()[0];Ut!==bt.target&&(Rt=Ut)}return Rt.tagName=="INPUT"||Rt.tagName=="SELECT"||Rt.tagName=="TEXTAREA"||Rt.isContentEditable},kt.prototype.handleKey=function(){var bt=this;return bt._handleKey.apply(bt,arguments)},kt.addKeycodes=function(bt){for(var Rt in bt)bt.hasOwnProperty(Rt)&&(tt[Rt]=bt[Rt]);it=null},kt.init=function(){var bt=kt(_e);for(var Rt in bt)Rt.charAt(0)!=="_"&&(kt[Rt]=function(Ot){return function(){return bt[Ot].apply(bt,arguments)}}(Rt))},kt.init(),j.Mousetrap=kt,$.exports&&($.exports=kt)})(typeof window<"u"?window:null,typeof window<"u"?document:null)})(mousetrap);var mousetrapExports=mousetrap.exports;const Mousetrap=getDefaultExportFromCjs(mousetrapExports),globalHotKeys$=create([{when_paused:!1,description:"Action #1",keys:"1",on_press:{type:"action",index:0}},{when_paused:!1,description:"Action #2",keys:"2",on_press:{type:"action",index:1}},{when_paused:!1,description:"Action #3",keys:"3",on_press:{type:"action",index:2}},{when_paused:!1,description:"Action #4",keys:"4",on_press:{type:"action",index:3}},{when_paused:!1,description:"Action #5",keys:"5",on_press:{type:"action",index:4}},{when_paused:!1,description:"Action #6",keys:"6",on_press:{type:"action",index:5}},{when_paused:!1,description:"Action #7",keys:"7",on_press:{type:"action",index:6}},{when_paused:!1,description:"Action #8",keys:"8",on_press:{type:"action",index:7}},{when_paused:!1,description:"Action #9",keys:"9",on_press:{type:"action",index:8}},{when_paused:!1,keys:"space",description:"Single action",on_press:()=>isPaused$.value?void 0:(actions$.value.length===1&&(selectAction(0),execSelectedAction()),!1)},{when_paused:!0,description:"Restart",keys:"mod+r",on_press:{type:"game_action",action:"restart"}},{when_paused:!1,description:"Quicksave",keys:"f5",on_press:{type:"game_action",action:"quicksave"}},{when_paused:!1,description:"Quickload",keys:"f9",on_press:{type:"game_action",action:"quickload"}},{when_paused:!1,keys:"mod+s",description:"Save",on_press:()=>{var j;if(!((j=qspApi$.value)!=null&&j.readVariable("NOSAVE")))return requestedAction$.set("save"),onGameCommand("pause:saves"),!1}},{when_paused:!1,keys:"mod+o",description:"Load",on_press:()=>(requestedAction$.set("load"),onGameCommand("pause:saves"),!1)},{when_paused:!0,keys:"pageup",description:"Increase volume",on_press:()=>(volume$.actions.increase(),!1)},{when_paused:!0,keys:"pagedown",description:"Decrease volume",on_press:()=>(volume$.actions.decrease(),!1)},{when_paused:!0,description:"Mute",keys:"home",on_press:{type:"game_action",action:"mute"}},{when_paused:!0,description:"Unmute",keys:"end",on_press:{type:"game_action",action:"unmute"}}]);function setupGlobalHotKeys(){for(const $ of globalHotKeys$.value)Mousetrap.bind([$.keys],(j,_e)=>{if(!(!$.when_paused&&isPaused$.value)){if(typeof $.on_press=="function")return $.on_press(j,_e);if($.on_press.type==="action"){if(canSelectAction($.on_press.index))return selectAction($.on_press.index),execSelectedAction(),!1}else if($.on_press.type==="game_action")return onGameCommand($.on_press.action),!1}})}function setupCustomHotKeys($){for(const[j,_e]of Object.entries($))Mousetrap.bind(j,()=>{var et;if(!isPaused$.value)return(et=qspApi$.value)==null||et.execLoc(_e),!1})}const prettySymbolsCommon={backspace:"BackSpace",tab:"Tab",enter:"↵ Enter",capslock:"CapsLock",space:"Space",pageup:"PageUp",pagedown:"PageDown",end:"End",home:"Home",left:"←",up:"↑",right:"→",down:"↓",ins:"Insert",del:"Delete",plus:"+",shift:"Shift",ctrl:"Ctrl",alt:"Alt",mod:"Ctrl"},prettySymbolsMacOs={shift:"⇧",ctrl:"⌃",alt:"⌥",mod:"⌘"};function prettifyHotkeys($){const j=[],_e=$.split(" ");for(let et=0;et<_e.length;et++){const tt=_e[et].split("+");for(let nt=0;nt<tt.length;nt++){let rt=tt[nt];rt in prettySymbolsCommon&&(rt=prettySymbolsCommon[rt]),windowManager.platform==="Macintosh"&&tt[nt]in prettySymbolsMacOs&&(rt=prettySymbolsMacOs[tt[nt]]),j.push({type:"key",symbol:rt}),nt<tt.length-1&&j.push({type:"separator",symbol:"+"})}et<_e.length-1&&j.push({type:"separator",symbol:" "})}return j}function clearHotkeys(){Mousetrap.reset()}var WxWidgetsDirection=($=>($[$.top=1]="top",$[$.right=2]="right",$[$.bottom=3]="bottom",$[$.left=4]="left",$[$.center=5]="center",$))(WxWidgetsDirection||{});const CAPTION_SIZE=20,qspGuiCfg$=atom(null);function buildLayoutTree($){const j=getMaxLayer($),_e=$.filter(nt=>nt.floating&&nt.name==="imgview"),et=$.filter(nt=>!nt.floating);let tt=null;for(let nt=0;nt<=j;nt++){const rt=getLayerPanels(nt,et);tt={index:nt,top:[],right:[],bottom:[],left:[],center:tt||[]};for(const ot of rt)ot.dir==="center"&&ot.name!=="desc"||tt[ot.dir].push(ot)}return{layer:tt?cleanEmptyLayers(tt):null,floating:_e}}function cleanEmptyLayers($){return Array.isArray($.center)?$:!$.top.length&&!$.right.length&&!$.bottom.length&&!$.left.length?cleanEmptyLayers($.center):($.center=cleanEmptyLayers($.center),$)}function convertLayer($,j,_e){return`<qsp-cl-layer>${convertDock("top",$.top,j,_e)}${convertDock("left",$.left,j,_e)}${Array.isArray($.center)?convertDock("center",$.center,j,_e):convertLayer($.center,j,_e)}${convertDock("right",$.right,j,_e)}${convertDock("bottom",$.bottom,j,_e)}</qsp-cl-layer>`}function convertDock($,j,_e,et){if(!j.length)return"";const tt=j.map(at=>at.name!=="desc"?at.name:"").filter(Boolean),nt=tt.length>0?` visibility="${tt.join("|")}"`:"",[rt]=j,ot=`${WxWidgetsDirection[rt.dir]},${rt.layer},${rt.row}`;let it="";if($!=="center")if(_e[ot])it=` size="${$==="bottom"||$==="top"?_e[ot]-CAPTION_SIZE:_e[ot]}"`;else{const at=$==="left"||$==="right"?"bestw":"besth";it=` size="${Math.max(...j.map(st=>st[at]))}"`}return`<qsp-cl-dock place="${$}"${nt}${it}>${j.map(at=>convertPane(at,et,!1)).join("")}</qsp-cl-dock>`}function convertPane($,j,_e){return`<qsp-cl-pane visibility="${$.name!=="desc"?$.name:""}" proportion="${$.prop}">${extractFromDefaultTheme($.name,j,_e)}</qsp-cl-pane>`}function getMaxLayer($){return Math.max(...$.map(({layer:j})=>j))}function getLayerPanels($,j){return j.filter(_e=>_e.layer===$).sort((_e,et)=>_e.pos-et.pos)}const paneToTagMap={imgview:"qsp-view",acts:"qsp-actions",desc:"qsp-main",objs:"qsp-objects",vars:"qsp-stats",input:"qsp-cmd"};function extractFromDefaultTheme($,j,_e){const et=paneToTagMap[$];if(!et)return"";const tt=new RegExp(`<${et}([\\s\\S]*?)</${et}>`,"im"),nt=j.match(tt),rt=(nt==null?void 0:nt[0])??"";return _e?rt.replace(new RegExp(`<${et}(.*?)>`,"im"),`<${et} modal>`):rt.replace(new RegExp(`<${et}(.*?)>`,"im"),`<${et}>`)}const GROUP_REGEXP=/\[(.*?)\]/i,LINE_REGEXP=/(.*?)=(.*)/i,DOCK_LINE=/dock_size\((.*?)\)=(.*)/,IS_FLOATABLE_MASK=1,asNumber=($,j)=>({[$]:Number(j)}),asString=($,j)=>({[$]:j}),converters={BackColor:asNumber,FontColor:asNumber,LinkColor:asNumber,FontSize:asNumber,FontName:asString,Panels:parsePanels,dir:($,j)=>({[$]:WxWidgetsDirection[j]}),layer:asNumber,name:asString,pos:asNumber,row:asNumber,prop:asNumber,bestw:asNumber,besth:asNumber};function processData($,j){const _e=converters[$];return(_e==null?void 0:_e($,j))??{}}function parsePanels($,j){const _e=[],et={};for(const tt of j.split("|").filter(Boolean))if(tt!=="layout2")if(tt.startsWith("dock_size")){const nt=tt.match(DOCK_LINE);if(nt){const[,rt,ot]=nt;rt&&ot&&(et[rt]=Number(ot))}}else{const nt=tt.split(";").map(extractLineData).reduce((rt,[ot,it])=>{if(ot==="state")rt.floating=(Number(it)&IS_FLOATABLE_MASK)!==0;else if(ot&&it&&ot in converters)return{...rt,...processData(ot,it)};return rt},{});_e.push(nt)}return{Panels:_e,Docks:et}}function extractLineData($){const j=$.match(LINE_REGEXP);if(j){const[,_e,et]=j;return[_e,et]}return[]}function parseCfg($){let j={};for(const _e of $.split(/\r?\n/gim).filter(Boolean)){if(GROUP_REGEXP.test(_e))continue;const[et,tt]=extractLineData(_e);et&&tt&&et in converters&&(j={...j,...processData(et,tt)})}return j}const consoleLogger={type:"logger",log($){this.output("log",$)},warn($){this.output("warn",$)},error($){this.output("error",$)},output($,j){console&&console[$]&&console[$].apply(console,j)}};class Logger{constructor(j){let _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(j,_e)}init(j){let _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=_e.prefix||"i18next:",this.logger=j||consoleLogger,this.options=_e,this.debug=_e.debug}log(){for(var j=arguments.length,_e=new Array(j),et=0;et<j;et++)_e[et]=arguments[et];return this.forward(_e,"log","",!0)}warn(){for(var j=arguments.length,_e=new Array(j),et=0;et<j;et++)_e[et]=arguments[et];return this.forward(_e,"warn","",!0)}error(){for(var j=arguments.length,_e=new Array(j),et=0;et<j;et++)_e[et]=arguments[et];return this.forward(_e,"error","")}deprecate(){for(var j=arguments.length,_e=new Array(j),et=0;et<j;et++)_e[et]=arguments[et];return this.forward(_e,"warn","WARNING DEPRECATED: ",!0)}forward(j,_e,et,tt){return tt&&!this.debug?null:(typeof j[0]=="string"&&(j[0]=`${et}${this.prefix} ${j[0]}`),this.logger[_e](j))}create(j){return new Logger(this.logger,{prefix:`${this.prefix}:${j}:`,...this.options})}clone(j){return j=j||this.options,j.prefix=j.prefix||this.prefix,new Logger(this.logger,j)}}var baseLogger=new Logger;class EventEmitter{constructor(){this.observers={}}on(j,_e){return j.split(" ").forEach(et=>{this.observers[et]||(this.observers[et]=new Map);const tt=this.observers[et].get(_e)||0;this.observers[et].set(_e,tt+1)}),this}off(j,_e){if(this.observers[j]){if(!_e){delete this.observers[j];return}this.observers[j].delete(_e)}}emit(j){for(var _e=arguments.length,et=new Array(_e>1?_e-1:0),tt=1;tt<_e;tt++)et[tt-1]=arguments[tt];this.observers[j]&&Array.from(this.observers[j].entries()).forEach(rt=>{let[ot,it]=rt;for(let at=0;at<it;at++)ot(...et)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(rt=>{let[ot,it]=rt;for(let at=0;at<it;at++)ot.apply(ot,[j,...et])})}}const defer=()=>{let $,j;const _e=new Promise((et,tt)=>{$=et,j=tt});return _e.resolve=$,_e.reject=j,_e},makeString=$=>$==null?"":""+$,copy=($,j,_e)=>{$.forEach(et=>{j[et]&&(_e[et]=j[et])})},lastOfPathSeparatorRegExp=/###/g,cleanKey=$=>$&&$.indexOf("###")>-1?$.replace(lastOfPathSeparatorRegExp,"."):$,canNotTraverseDeeper=$=>!$||typeof $=="string",getLastOfPath=($,j,_e)=>{const et=typeof j!="string"?j:j.split(".");let tt=0;for(;tt<et.length-1;){if(canNotTraverseDeeper($))return{};const nt=cleanKey(et[tt]);!$[nt]&&_e&&($[nt]=new _e),Object.prototype.hasOwnProperty.call($,nt)?$=$[nt]:$={},++tt}return canNotTraverseDeeper($)?{}:{obj:$,k:cleanKey(et[tt])}},setPath=($,j,_e)=>{const{obj:et,k:tt}=getLastOfPath($,j,Object);if(et!==void 0||j.length===1){et[tt]=_e;return}let nt=j[j.length-1],rt=j.slice(0,j.length-1),ot=getLastOfPath($,rt,Object);for(;ot.obj===void 0&&rt.length;)nt=`${rt[rt.length-1]}.${nt}`,rt=rt.slice(0,rt.length-1),ot=getLastOfPath($,rt,Object),ot&&ot.obj&&typeof ot.obj[`${ot.k}.${nt}`]<"u"&&(ot.obj=void 0);ot.obj[`${ot.k}.${nt}`]=_e},pushPath=($,j,_e,et)=>{const{obj:tt,k:nt}=getLastOfPath($,j,Object);tt[nt]=tt[nt]||[],tt[nt].push(_e)},getPath=($,j)=>{const{obj:_e,k:et}=getLastOfPath($,j);if(_e)return _e[et]},getPathWithDefaults=($,j,_e)=>{const et=getPath($,_e);return et!==void 0?et:getPath(j,_e)},deepExtend=($,j,_e)=>{for(const et in j)et!=="__proto__"&&et!=="constructor"&&(et in $?typeof $[et]=="string"||$[et]instanceof String||typeof j[et]=="string"||j[et]instanceof String?_e&&($[et]=j[et]):deepExtend($[et],j[et],_e):$[et]=j[et]);return $},regexEscape=$=>$.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var _entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const escape=$=>typeof $=="string"?$.replace(/[&<>"'\/]/g,j=>_entityMap[j]):$;class RegExpCache{constructor(j){this.capacity=j,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(j){const _e=this.regExpMap.get(j);if(_e!==void 0)return _e;const et=new RegExp(j);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(j,et),this.regExpQueue.push(j),et}}const chars=[" ",",","?","!",";"],looksLikeObjectPathRegExpCache=new RegExpCache(20),looksLikeObjectPath=($,j,_e)=>{j=j||"",_e=_e||"";const et=chars.filter(rt=>j.indexOf(rt)<0&&_e.indexOf(rt)<0);if(et.length===0)return!0;const tt=looksLikeObjectPathRegExpCache.getRegExp(`(${et.map(rt=>rt==="?"?"\\?":rt).join("|")})`);let nt=!tt.test($);if(!nt){const rt=$.indexOf(_e);rt>0&&!tt.test($.substring(0,rt))&&(nt=!0)}return nt},deepFind=function($,j){let _e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!$)return;if($[j])return $[j];const et=j.split(_e);let tt=$;for(let nt=0;nt<et.length;){if(!tt||typeof tt!="object")return;let rt,ot="";for(let it=nt;it<et.length;++it)if(it!==nt&&(ot+=_e),ot+=et[it],rt=tt[ot],rt!==void 0){if(["string","number","boolean"].indexOf(typeof rt)>-1&&it<et.length-1)continue;nt+=it-nt+1;break}tt=rt}return tt},getCleanedCode=$=>$&&$.indexOf("_")>0?$.replace("_","-"):$;class ResourceStore extends EventEmitter{constructor(j){let _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=j||{},this.options=_e,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(j){this.options.ns.indexOf(j)<0&&this.options.ns.push(j)}removeNamespaces(j){const _e=this.options.ns.indexOf(j);_e>-1&&this.options.ns.splice(_e,1)}getResource(j,_e,et){let tt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const nt=tt.keySeparator!==void 0?tt.keySeparator:this.options.keySeparator,rt=tt.ignoreJSONStructure!==void 0?tt.ignoreJSONStructure:this.options.ignoreJSONStructure;let ot;j.indexOf(".")>-1?ot=j.split("."):(ot=[j,_e],et&&(Array.isArray(et)?ot.push(...et):typeof et=="string"&&nt?ot.push(...et.split(nt)):ot.push(et)));const it=getPath(this.data,ot);return!it&&!_e&&!et&&j.indexOf(".")>-1&&(j=ot[0],_e=ot[1],et=ot.slice(2).join(".")),it||!rt||typeof et!="string"?it:deepFind(this.data&&this.data[j]&&this.data[j][_e],et,nt)}addResource(j,_e,et,tt){let nt=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const rt=nt.keySeparator!==void 0?nt.keySeparator:this.options.keySeparator;let ot=[j,_e];et&&(ot=ot.concat(rt?et.split(rt):et)),j.indexOf(".")>-1&&(ot=j.split("."),tt=_e,_e=ot[1]),this.addNamespaces(_e),setPath(this.data,ot,tt),nt.silent||this.emit("added",j,_e,et,tt)}addResources(j,_e,et){let tt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const nt in et)(typeof et[nt]=="string"||Array.isArray(et[nt]))&&this.addResource(j,_e,nt,et[nt],{silent:!0});tt.silent||this.emit("added",j,_e,et)}addResourceBundle(j,_e,et,tt,nt){let rt=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},ot=[j,_e];j.indexOf(".")>-1&&(ot=j.split("."),tt=et,et=_e,_e=ot[1]),this.addNamespaces(_e);let it=getPath(this.data,ot)||{};rt.skipCopy||(et=JSON.parse(JSON.stringify(et))),tt?deepExtend(it,et,nt):it={...it,...et},setPath(this.data,ot,it),rt.silent||this.emit("added",j,_e,et)}removeResourceBundle(j,_e){this.hasResourceBundle(j,_e)&&delete this.data[j][_e],this.removeNamespaces(_e),this.emit("removed",j,_e)}hasResourceBundle(j,_e){return this.getResource(j,_e)!==void 0}getResourceBundle(j,_e){return _e||(_e=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(j,_e)}:this.getResource(j,_e)}getDataByLanguage(j){return this.data[j]}hasLanguageSomeTranslations(j){const _e=this.getDataByLanguage(j);return!!(_e&&Object.keys(_e)||[]).find(tt=>_e[tt]&&Object.keys(_e[tt]).length>0)}toJSON(){return this.data}}var postProcessor={processors:{},addPostProcessor($){this.processors[$.name]=$},handle($,j,_e,et,tt){return $.forEach(nt=>{this.processors[nt]&&(j=this.processors[nt].process(j,_e,et,tt))}),j}};const checkedLoadedFor={};class Translator extends EventEmitter{constructor(j){let _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],j,this),this.options=_e,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=baseLogger.create("translator")}changeLanguage(j){j&&(this.language=j)}exists(j){let _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(j==null)return!1;const et=this.resolve(j,_e);return et&&et.res!==void 0}extractFromKey(j,_e){let et=_e.nsSeparator!==void 0?_e.nsSeparator:this.options.nsSeparator;et===void 0&&(et=":");const tt=_e.keySeparator!==void 0?_e.keySeparator:this.options.keySeparator;let nt=_e.ns||this.options.defaultNS||[];const rt=et&&j.indexOf(et)>-1,ot=!this.options.userDefinedKeySeparator&&!_e.keySeparator&&!this.options.userDefinedNsSeparator&&!_e.nsSeparator&&!looksLikeObjectPath(j,et,tt);if(rt&&!ot){const it=j.match(this.interpolator.nestingRegexp);if(it&&it.length>0)return{key:j,namespaces:nt};const at=j.split(et);(et!==tt||et===tt&&this.options.ns.indexOf(at[0])>-1)&&(nt=at.shift()),j=at.join(tt)}return typeof nt=="string"&&(nt=[nt]),{key:j,namespaces:nt}}translate(j,_e,et){if(typeof _e!="object"&&this.options.overloadTranslationOptionHandler&&(_e=this.options.overloadTranslationOptionHandler(arguments)),typeof _e=="object"&&(_e={..._e}),_e||(_e={}),j==null)return"";Array.isArray(j)||(j=[String(j)]);const tt=_e.returnDetails!==void 0?_e.returnDetails:this.options.returnDetails,nt=_e.keySeparator!==void 0?_e.keySeparator:this.options.keySeparator,{key:rt,namespaces:ot}=this.extractFromKey(j[j.length-1],_e),it=ot[ot.length-1],at=_e.lng||this.language,dt=_e.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(at&&at.toLowerCase()==="cimode"){if(dt){const St=_e.nsSeparator||this.options.nsSeparator;return tt?{res:`${it}${St}${rt}`,usedKey:rt,exactUsedKey:rt,usedLng:at,usedNS:it,usedParams:this.getUsedParamsDetails(_e)}:`${it}${St}${rt}`}return tt?{res:rt,usedKey:rt,exactUsedKey:rt,usedLng:at,usedNS:it,usedParams:this.getUsedParamsDetails(_e)}:rt}const st=this.resolve(j,_e);let ut=st&&st.res;const ft=st&&st.usedKey||rt,pt=st&&st.exactUsedKey||rt,gt=Object.prototype.toString.apply(ut),yt=["[object Number]","[object Function]","[object RegExp]"],mt=_e.joinArrays!==void 0?_e.joinArrays:this.options.joinArrays,vt=!this.i18nFormat||this.i18nFormat.handleAsObject;if(vt&&ut&&(typeof ut!="string"&&typeof ut!="boolean"&&typeof ut!="number")&&yt.indexOf(gt)<0&&!(typeof mt=="string"&&Array.isArray(ut))){if(!_e.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const St=this.options.returnedObjectHandler?this.options.returnedObjectHandler(ft,ut,{..._e,ns:ot}):`key '${rt} (${this.language})' returned an object instead of string.`;return tt?(st.res=St,st.usedParams=this.getUsedParamsDetails(_e),st):St}if(nt){const St=Array.isArray(ut),At=St?[]:{},kt=St?pt:ft;for(const bt in ut)if(Object.prototype.hasOwnProperty.call(ut,bt)){const Rt=`${kt}${nt}${bt}`;At[bt]=this.translate(Rt,{..._e,joinArrays:!1,ns:ot}),At[bt]===Rt&&(At[bt]=ut[bt])}ut=At}}else if(vt&&typeof mt=="string"&&Array.isArray(ut))ut=ut.join(mt),ut&&(ut=this.extendTranslation(ut,j,_e,et));else{let St=!1,At=!1;const kt=_e.count!==void 0&&typeof _e.count!="string",bt=Translator.hasDefaultValue(_e),Rt=kt?this.pluralResolver.getSuffix(at,_e.count,_e):"",Ot=_e.ordinal&&kt?this.pluralResolver.getSuffix(at,_e.count,{ordinal:!1}):"",Ut=kt&&!_e.ordinal&&_e.count===0&&this.pluralResolver.shouldUseIntlApi(),Yt=Ut&&_e[`defaultValue${this.options.pluralSeparator}zero`]||_e[`defaultValue${Rt}`]||_e[`defaultValue${Ot}`]||_e.defaultValue;!this.isValidLookup(ut)&&bt&&(St=!0,ut=Yt),this.isValidLookup(ut)||(At=!0,ut=rt);const mn=(_e.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&At?void 0:ut,qt=bt&&Yt!==ut&&this.options.updateMissing;if(At||St||qt){if(this.logger.log(qt?"updateKey":"missingKey",at,it,rt,qt?Yt:ut),nt){const Wt=this.resolve(rt,{..._e,keySeparator:!1});Wt&&Wt.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Zt=[];const Jt=this.languageUtils.getFallbackCodes(this.options.fallbackLng,_e.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Jt&&Jt[0])for(let Wt=0;Wt<Jt.length;Wt++)Zt.push(Jt[Wt]);else this.options.saveMissingTo==="all"?Zt=this.languageUtils.toResolveHierarchy(_e.lng||this.language):Zt.push(_e.lng||this.language);const un=(Wt,Qt,on)=>{const nn=bt&&on!==ut?on:mn;this.options.missingKeyHandler?this.options.missingKeyHandler(Wt,it,Qt,nn,qt,_e):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(Wt,it,Qt,nn,qt,_e),this.emit("missingKey",Wt,it,Qt,ut)};this.options.saveMissing&&(this.options.saveMissingPlurals&&kt?Zt.forEach(Wt=>{const Qt=this.pluralResolver.getSuffixes(Wt,_e);Ut&&_e[`defaultValue${this.options.pluralSeparator}zero`]&&Qt.indexOf(`${this.options.pluralSeparator}zero`)<0&&Qt.push(`${this.options.pluralSeparator}zero`),Qt.forEach(on=>{un([Wt],rt+on,_e[`defaultValue${on}`]||Yt)})}):un(Zt,rt,Yt))}ut=this.extendTranslation(ut,j,_e,st,et),At&&ut===rt&&this.options.appendNamespaceToMissingKey&&(ut=`${it}:${rt}`),(At||St)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?ut=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${it}:${rt}`:rt,St?ut:void 0):ut=this.options.parseMissingKeyHandler(ut))}return tt?(st.res=ut,st.usedParams=this.getUsedParamsDetails(_e),st):ut}extendTranslation(j,_e,et,tt,nt){var rt=this;if(this.i18nFormat&&this.i18nFormat.parse)j=this.i18nFormat.parse(j,{...this.options.interpolation.defaultVariables,...et},et.lng||this.language||tt.usedLng,tt.usedNS,tt.usedKey,{resolved:tt});else if(!et.skipInterpolation){et.interpolation&&this.interpolator.init({...et,interpolation:{...this.options.interpolation,...et.interpolation}});const at=typeof j=="string"&&(et&&et.interpolation&&et.interpolation.skipOnVariables!==void 0?et.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let dt;if(at){const ut=j.match(this.interpolator.nestingRegexp);dt=ut&&ut.length}let st=et.replace&&typeof et.replace!="string"?et.replace:et;if(this.options.interpolation.defaultVariables&&(st={...this.options.interpolation.defaultVariables,...st}),j=this.interpolator.interpolate(j,st,et.lng||this.language||tt.usedLng,et),at){const ut=j.match(this.interpolator.nestingRegexp),ft=ut&&ut.length;dt<ft&&(et.nest=!1)}!et.lng&&this.options.compatibilityAPI!=="v1"&&tt&&tt.res&&(et.lng=this.language||tt.usedLng),et.nest!==!1&&(j=this.interpolator.nest(j,function(){for(var ut=arguments.length,ft=new Array(ut),pt=0;pt<ut;pt++)ft[pt]=arguments[pt];return nt&&nt[0]===ft[0]&&!et.context?(rt.logger.warn(`It seems you are nesting recursively key: ${ft[0]} in key: ${_e[0]}`),null):rt.translate(...ft,_e)},et)),et.interpolation&&this.interpolator.reset()}const ot=et.postProcess||this.options.postProcess,it=typeof ot=="string"?[ot]:ot;return j!=null&&it&&it.length&&et.applyPostProcessor!==!1&&(j=postProcessor.handle(it,j,_e,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...tt,usedParams:this.getUsedParamsDetails(et)},...et}:et,this)),j}resolve(j){let _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},et,tt,nt,rt,ot;return typeof j=="string"&&(j=[j]),j.forEach(it=>{if(this.isValidLookup(et))return;const at=this.extractFromKey(it,_e),dt=at.key;tt=dt;let st=at.namespaces;this.options.fallbackNS&&(st=st.concat(this.options.fallbackNS));const ut=_e.count!==void 0&&typeof _e.count!="string",ft=ut&&!_e.ordinal&&_e.count===0&&this.pluralResolver.shouldUseIntlApi(),pt=_e.context!==void 0&&(typeof _e.context=="string"||typeof _e.context=="number")&&_e.context!=="",gt=_e.lngs?_e.lngs:this.languageUtils.toResolveHierarchy(_e.lng||this.language,_e.fallbackLng);st.forEach(yt=>{this.isValidLookup(et)||(ot=yt,!checkedLoadedFor[`${gt[0]}-${yt}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(ot)&&(checkedLoadedFor[`${gt[0]}-${yt}`]=!0,this.logger.warn(`key "${tt}" for languages "${gt.join(", ")}" won't get resolved as namespace "${ot}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),gt.forEach(mt=>{if(this.isValidLookup(et))return;rt=mt;const vt=[dt];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(vt,dt,mt,yt,_e);else{let St;ut&&(St=this.pluralResolver.getSuffix(mt,_e.count,_e));const At=`${this.options.pluralSeparator}zero`,kt=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(ut&&(vt.push(dt+St),_e.ordinal&&St.indexOf(kt)===0&&vt.push(dt+St.replace(kt,this.options.pluralSeparator)),ft&&vt.push(dt+At)),pt){const bt=`${dt}${this.options.contextSeparator}${_e.context}`;vt.push(bt),ut&&(vt.push(bt+St),_e.ordinal&&St.indexOf(kt)===0&&vt.push(bt+St.replace(kt,this.options.pluralSeparator)),ft&&vt.push(bt+At))}}let _t;for(;_t=vt.pop();)this.isValidLookup(et)||(nt=_t,et=this.getResource(mt,yt,_t,_e))}))})}),{res:et,usedKey:tt,exactUsedKey:nt,usedLng:rt,usedNS:ot}}isValidLookup(j){return j!==void 0&&!(!this.options.returnNull&&j===null)&&!(!this.options.returnEmptyString&&j==="")}getResource(j,_e,et){let tt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(j,_e,et,tt):this.resourceStore.getResource(j,_e,et,tt)}getUsedParamsDetails(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const _e=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],et=j.replace&&typeof j.replace!="string";let tt=et?j.replace:j;if(et&&typeof j.count<"u"&&(tt.count=j.count),this.options.interpolation.defaultVariables&&(tt={...this.options.interpolation.defaultVariables,...tt}),!et){tt={...tt};for(const nt of _e)delete tt[nt]}return tt}static hasDefaultValue(j){const _e="defaultValue";for(const et in j)if(Object.prototype.hasOwnProperty.call(j,et)&&_e===et.substring(0,_e.length)&&j[et]!==void 0)return!0;return!1}}const capitalize=$=>$.charAt(0).toUpperCase()+$.slice(1);class LanguageUtil{constructor(j){this.options=j,this.supportedLngs=this.options.supportedLngs||!1,this.logger=baseLogger.create("languageUtils")}getScriptPartFromCode(j){if(j=getCleanedCode(j),!j||j.indexOf("-")<0)return null;const _e=j.split("-");return _e.length===2||(_e.pop(),_e[_e.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(_e.join("-"))}getLanguagePartFromCode(j){if(j=getCleanedCode(j),!j||j.indexOf("-")<0)return j;const _e=j.split("-");return this.formatLanguageCode(_e[0])}formatLanguageCode(j){if(typeof j=="string"&&j.indexOf("-")>-1){const _e=["hans","hant","latn","cyrl","cans","mong","arab"];let et=j.split("-");return this.options.lowerCaseLng?et=et.map(tt=>tt.toLowerCase()):et.length===2?(et[0]=et[0].toLowerCase(),et[1]=et[1].toUpperCase(),_e.indexOf(et[1].toLowerCase())>-1&&(et[1]=capitalize(et[1].toLowerCase()))):et.length===3&&(et[0]=et[0].toLowerCase(),et[1].length===2&&(et[1]=et[1].toUpperCase()),et[0]!=="sgn"&&et[2].length===2&&(et[2]=et[2].toUpperCase()),_e.indexOf(et[1].toLowerCase())>-1&&(et[1]=capitalize(et[1].toLowerCase())),_e.indexOf(et[2].toLowerCase())>-1&&(et[2]=capitalize(et[2].toLowerCase()))),et.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?j.toLowerCase():j}isSupportedCode(j){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(j=this.getLanguagePartFromCode(j)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(j)>-1}getBestMatchFromCodes(j){if(!j)return null;let _e;return j.forEach(et=>{if(_e)return;const tt=this.formatLanguageCode(et);(!this.options.supportedLngs||this.isSupportedCode(tt))&&(_e=tt)}),!_e&&this.options.supportedLngs&&j.forEach(et=>{if(_e)return;const tt=this.getLanguagePartFromCode(et);if(this.isSupportedCode(tt))return _e=tt;_e=this.options.supportedLngs.find(nt=>{if(nt===tt)return nt;if(!(nt.indexOf("-")<0&&tt.indexOf("-")<0)&&(nt.indexOf("-")>0&&tt.indexOf("-")<0&&nt.substring(0,nt.indexOf("-"))===tt||nt.indexOf(tt)===0&&tt.length>1))return nt})}),_e||(_e=this.getFallbackCodes(this.options.fallbackLng)[0]),_e}getFallbackCodes(j,_e){if(!j)return[];if(typeof j=="function"&&(j=j(_e)),typeof j=="string"&&(j=[j]),Array.isArray(j))return j;if(!_e)return j.default||[];let et=j[_e];return et||(et=j[this.getScriptPartFromCode(_e)]),et||(et=j[this.formatLanguageCode(_e)]),et||(et=j[this.getLanguagePartFromCode(_e)]),et||(et=j.default),et||[]}toResolveHierarchy(j,_e){const et=this.getFallbackCodes(_e||this.options.fallbackLng||[],j),tt=[],nt=rt=>{rt&&(this.isSupportedCode(rt)?tt.push(rt):this.logger.warn(`rejecting language code not found in supportedLngs: ${rt}`))};return typeof j=="string"&&(j.indexOf("-")>-1||j.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&nt(this.formatLanguageCode(j)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&nt(this.getScriptPartFromCode(j)),this.options.load!=="currentOnly"&&nt(this.getLanguagePartFromCode(j))):typeof j=="string"&&nt(this.formatLanguageCode(j)),et.forEach(rt=>{tt.indexOf(rt)<0&&nt(this.formatLanguageCode(rt))}),tt}}let sets=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],_rulesPluralsTypes={1:$=>+($>1),2:$=>+($!=1),3:$=>0,4:$=>$%10==1&&$%100!=11?0:$%10>=2&&$%10<=4&&($%100<10||$%100>=20)?1:2,5:$=>$==0?0:$==1?1:$==2?2:$%100>=3&&$%100<=10?3:$%100>=11?4:5,6:$=>$==1?0:$>=2&&$<=4?1:2,7:$=>$==1?0:$%10>=2&&$%10<=4&&($%100<10||$%100>=20)?1:2,8:$=>$==1?0:$==2?1:$!=8&&$!=11?2:3,9:$=>+($>=2),10:$=>$==1?0:$==2?1:$<7?2:$<11?3:4,11:$=>$==1||$==11?0:$==2||$==12?1:$>2&&$<20?2:3,12:$=>+($%10!=1||$%100==11),13:$=>+($!==0),14:$=>$==1?0:$==2?1:$==3?2:3,15:$=>$%10==1&&$%100!=11?0:$%10>=2&&($%100<10||$%100>=20)?1:2,16:$=>$%10==1&&$%100!=11?0:$!==0?1:2,17:$=>$==1||$%10==1&&$%100!=11?0:1,18:$=>$==0?0:$==1?1:2,19:$=>$==1?0:$==0||$%100>1&&$%100<11?1:$%100>10&&$%100<20?2:3,20:$=>$==1?0:$==0||$%100>0&&$%100<20?1:2,21:$=>$%100==1?1:$%100==2?2:$%100==3||$%100==4?3:0,22:$=>$==1?0:$==2?1:($<0||$>10)&&$%10==0?2:3};const nonIntlVersions=["v1","v2","v3"],intlVersions=["v4"],suffixesOrder={zero:0,one:1,two:2,few:3,many:4,other:5},createRules=()=>{const $={};return sets.forEach(j=>{j.lngs.forEach(_e=>{$[_e]={numbers:j.nr,plurals:_rulesPluralsTypes[j.fc]}})}),$};class PluralResolver{constructor(j){let _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=j,this.options=_e,this.logger=baseLogger.create("pluralResolver"),(!this.options.compatibilityJSON||intlVersions.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=createRules(),this.pluralRulesCache={}}addRule(j,_e){this.rules[j]=_e}clearCache(){this.pluralRulesCache={}}getRule(j){let _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{const et=getCleanedCode(j==="dev"?"en":j),tt=_e.ordinal?"ordinal":"cardinal",nt=JSON.stringify({cleanedCode:et,type:tt});if(nt in this.pluralRulesCache)return this.pluralRulesCache[nt];const rt=new Intl.PluralRules(et,{type:tt});return this.pluralRulesCache[nt]=rt,rt}catch{return}return this.rules[j]||this.rules[this.languageUtils.getLanguagePartFromCode(j)]}needsPlural(j){let _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const et=this.getRule(j,_e);return this.shouldUseIntlApi()?et&&et.resolvedOptions().pluralCategories.length>1:et&&et.numbers.length>1}getPluralFormsOfKey(j,_e){let et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(j,et).map(tt=>`${_e}${tt}`)}getSuffixes(j){let _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const et=this.getRule(j,_e);return et?this.shouldUseIntlApi()?et.resolvedOptions().pluralCategories.sort((tt,nt)=>suffixesOrder[tt]-suffixesOrder[nt]).map(tt=>`${this.options.prepend}${_e.ordinal?`ordinal${this.options.prepend}`:""}${tt}`):et.numbers.map(tt=>this.getSuffix(j,tt,_e)):[]}getSuffix(j,_e){let et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const tt=this.getRule(j,et);return tt?this.shouldUseIntlApi()?`${this.options.prepend}${et.ordinal?`ordinal${this.options.prepend}`:""}${tt.select(_e)}`:this.getSuffixRetroCompatible(tt,_e):(this.logger.warn(`no plural rule found for: ${j}`),"")}getSuffixRetroCompatible(j,_e){const et=j.noAbs?j.plurals(_e):j.plurals(Math.abs(_e));let tt=j.numbers[et];this.options.simplifyPluralSuffix&&j.numbers.length===2&&j.numbers[0]===1&&(tt===2?tt="plural":tt===1&&(tt=""));const nt=()=>this.options.prepend&&tt.toString()?this.options.prepend+tt.toString():tt.toString();return this.options.compatibilityJSON==="v1"?tt===1?"":typeof tt=="number"?`_plural_${tt.toString()}`:nt():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&j.numbers.length===2&&j.numbers[0]===1?nt():this.options.prepend&&et.toString()?this.options.prepend+et.toString():et.toString()}shouldUseIntlApi(){return!nonIntlVersions.includes(this.options.compatibilityJSON)}}const deepFindWithDefaults=function($,j,_e){let et=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",tt=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,nt=getPathWithDefaults($,j,_e);return!nt&&tt&&typeof _e=="string"&&(nt=deepFind($,_e,et),nt===void 0&&(nt=deepFind(j,_e,et))),nt},regexSafe=$=>$.replace(/\$/g,"$$$$");class Interpolator{constructor(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=baseLogger.create("interpolator"),this.options=j,this.format=j.interpolation&&j.interpolation.format||(_e=>_e),this.init(j)}init(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};j.interpolation||(j.interpolation={escapeValue:!0});const{escape:_e,escapeValue:et,useRawValueToEscape:tt,prefix:nt,prefixEscaped:rt,suffix:ot,suffixEscaped:it,formatSeparator:at,unescapeSuffix:dt,unescapePrefix:st,nestingPrefix:ut,nestingPrefixEscaped:ft,nestingSuffix:pt,nestingSuffixEscaped:gt,nestingOptionsSeparator:yt,maxReplaces:mt,alwaysFormat:vt}=j.interpolation;this.escape=_e!==void 0?_e:escape,this.escapeValue=et!==void 0?et:!0,this.useRawValueToEscape=tt!==void 0?tt:!1,this.prefix=nt?regexEscape(nt):rt||"{{",this.suffix=ot?regexEscape(ot):it||"}}",this.formatSeparator=at||",",this.unescapePrefix=dt?"":st||"-",this.unescapeSuffix=this.unescapePrefix?"":dt||"",this.nestingPrefix=ut?regexEscape(ut):ft||regexEscape("$t("),this.nestingSuffix=pt?regexEscape(pt):gt||regexEscape(")"),this.nestingOptionsSeparator=yt||",",this.maxReplaces=mt||1e3,this.alwaysFormat=vt!==void 0?vt:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const j=(_e,et)=>_e&&_e.source===et?(_e.lastIndex=0,_e):new RegExp(et,"g");this.regexp=j(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=j(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=j(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(j,_e,et,tt){let nt,rt,ot;const it=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},at=ft=>{if(ft.indexOf(this.formatSeparator)<0){const mt=deepFindWithDefaults(_e,it,ft,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(mt,void 0,et,{...tt,..._e,interpolationkey:ft}):mt}const pt=ft.split(this.formatSeparator),gt=pt.shift().trim(),yt=pt.join(this.formatSeparator).trim();return this.format(deepFindWithDefaults(_e,it,gt,this.options.keySeparator,this.options.ignoreJSONStructure),yt,et,{...tt,..._e,interpolationkey:gt})};this.resetRegExp();const dt=tt&&tt.missingInterpolationHandler||this.options.missingInterpolationHandler,st=tt&&tt.interpolation&&tt.interpolation.skipOnVariables!==void 0?tt.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:ft=>regexSafe(ft)},{regex:this.regexp,safeValue:ft=>this.escapeValue?regexSafe(this.escape(ft)):regexSafe(ft)}].forEach(ft=>{for(ot=0;nt=ft.regex.exec(j);){const pt=nt[1].trim();if(rt=at(pt),rt===void 0)if(typeof dt=="function"){const yt=dt(j,nt,tt);rt=typeof yt=="string"?yt:""}else if(tt&&Object.prototype.hasOwnProperty.call(tt,pt))rt="";else if(st){rt=nt[0];continue}else this.logger.warn(`missed to pass in variable ${pt} for interpolating ${j}`),rt="";else typeof rt!="string"&&!this.useRawValueToEscape&&(rt=makeString(rt));const gt=ft.safeValue(rt);if(j=j.replace(nt[0],gt),st?(ft.regex.lastIndex+=rt.length,ft.regex.lastIndex-=nt[0].length):ft.regex.lastIndex=0,ot++,ot>=this.maxReplaces)break}}),j}nest(j,_e){let et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},tt,nt,rt;const ot=(it,at)=>{const dt=this.nestingOptionsSeparator;if(it.indexOf(dt)<0)return it;const st=it.split(new RegExp(`${dt}[ ]*{`));let ut=`{${st[1]}`;it=st[0],ut=this.interpolate(ut,rt);const ft=ut.match(/'/g),pt=ut.match(/"/g);(ft&&ft.length%2===0&&!pt||pt.length%2!==0)&&(ut=ut.replace(/'/g,'"'));try{rt=JSON.parse(ut),at&&(rt={...at,...rt})}catch(gt){return this.logger.warn(`failed parsing options string in nesting for key ${it}`,gt),`${it}${dt}${ut}`}return rt.defaultValue&&rt.defaultValue.indexOf(this.prefix)>-1&&delete rt.defaultValue,it};for(;tt=this.nestingRegexp.exec(j);){let it=[];rt={...et},rt=rt.replace&&typeof rt.replace!="string"?rt.replace:rt,rt.applyPostProcessor=!1,delete rt.defaultValue;let at=!1;if(tt[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(tt[1])){const dt=tt[1].split(this.formatSeparator).map(st=>st.trim());tt[1]=dt.shift(),it=dt,at=!0}if(nt=_e(ot.call(this,tt[1].trim(),rt),rt),nt&&tt[0]===j&&typeof nt!="string")return nt;typeof nt!="string"&&(nt=makeString(nt)),nt||(this.logger.warn(`missed to resolve ${tt[1]} for nesting ${j}`),nt=""),at&&(nt=it.reduce((dt,st)=>this.format(dt,st,et.lng,{...et,interpolationkey:tt[1].trim()}),nt.trim())),j=j.replace(tt[0],nt),this.regexp.lastIndex=0}return j}}const parseFormatStr=$=>{let j=$.toLowerCase().trim();const _e={};if($.indexOf("(")>-1){const et=$.split("(");j=et[0].toLowerCase().trim();const tt=et[1].substring(0,et[1].length-1);j==="currency"&&tt.indexOf(":")<0?_e.currency||(_e.currency=tt.trim()):j==="relativetime"&&tt.indexOf(":")<0?_e.range||(_e.range=tt.trim()):tt.split(";").forEach(rt=>{if(rt){const[ot,...it]=rt.split(":"),at=it.join(":").trim().replace(/^'+|'+$/g,""),dt=ot.trim();_e[dt]||(_e[dt]=at),at==="false"&&(_e[dt]=!1),at==="true"&&(_e[dt]=!0),isNaN(at)||(_e[dt]=parseInt(at,10))}})}return{formatName:j,formatOptions:_e}},createCachedFormatter=$=>{const j={};return(_e,et,tt)=>{let nt=tt;tt&&tt.interpolationkey&&tt.formatParams&&tt.formatParams[tt.interpolationkey]&&tt[tt.interpolationkey]&&(nt={...nt,[tt.interpolationkey]:void 0});const rt=et+JSON.stringify(nt);let ot=j[rt];return ot||(ot=$(getCleanedCode(et),tt),j[rt]=ot),ot(_e)}};class Formatter{constructor(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=baseLogger.create("formatter"),this.options=j,this.formats={number:createCachedFormatter((_e,et)=>{const tt=new Intl.NumberFormat(_e,{...et});return nt=>tt.format(nt)}),currency:createCachedFormatter((_e,et)=>{const tt=new Intl.NumberFormat(_e,{...et,style:"currency"});return nt=>tt.format(nt)}),datetime:createCachedFormatter((_e,et)=>{const tt=new Intl.DateTimeFormat(_e,{...et});return nt=>tt.format(nt)}),relativetime:createCachedFormatter((_e,et)=>{const tt=new Intl.RelativeTimeFormat(_e,{...et});return nt=>tt.format(nt,et.range||"day")}),list:createCachedFormatter((_e,et)=>{const tt=new Intl.ListFormat(_e,{...et});return nt=>tt.format(nt)})},this.init(j)}init(j){const et=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=et.formatSeparator?et.formatSeparator:et.formatSeparator||","}add(j,_e){this.formats[j.toLowerCase().trim()]=_e}addCached(j,_e){this.formats[j.toLowerCase().trim()]=createCachedFormatter(_e)}format(j,_e,et){let tt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const nt=_e.split(this.formatSeparator);if(nt.length>1&&nt[0].indexOf("(")>1&&nt[0].indexOf(")")<0&&nt.find(ot=>ot.indexOf(")")>-1)){const ot=nt.findIndex(it=>it.indexOf(")")>-1);nt[0]=[nt[0],...nt.splice(1,ot)].join(this.formatSeparator)}return nt.reduce((ot,it)=>{const{formatName:at,formatOptions:dt}=parseFormatStr(it);if(this.formats[at]){let st=ot;try{const ut=tt&&tt.formatParams&&tt.formatParams[tt.interpolationkey]||{},ft=ut.locale||ut.lng||tt.locale||tt.lng||et;st=this.formats[at](ot,ft,{...dt,...tt,...ut})}catch(ut){this.logger.warn(ut)}return st}else this.logger.warn(`there was no format function for ${at}`);return ot},j)}}const removePending=($,j)=>{$.pending[j]!==void 0&&(delete $.pending[j],$.pendingCount--)};class Connector extends EventEmitter{constructor(j,_e,et){let tt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=j,this.store=_e,this.services=et,this.languageUtils=et.languageUtils,this.options=tt,this.logger=baseLogger.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=tt.maxParallelReads||10,this.readingCalls=0,this.maxRetries=tt.maxRetries>=0?tt.maxRetries:5,this.retryTimeout=tt.retryTimeout>=1?tt.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(et,tt.backend,tt)}queueLoad(j,_e,et,tt){const nt={},rt={},ot={},it={};return j.forEach(at=>{let dt=!0;_e.forEach(st=>{const ut=`${at}|${st}`;!et.reload&&this.store.hasResourceBundle(at,st)?this.state[ut]=2:this.state[ut]<0||(this.state[ut]===1?rt[ut]===void 0&&(rt[ut]=!0):(this.state[ut]=1,dt=!1,rt[ut]===void 0&&(rt[ut]=!0),nt[ut]===void 0&&(nt[ut]=!0),it[st]===void 0&&(it[st]=!0)))}),dt||(ot[at]=!0)}),(Object.keys(nt).length||Object.keys(rt).length)&&this.queue.push({pending:rt,pendingCount:Object.keys(rt).length,loaded:{},errors:[],callback:tt}),{toLoad:Object.keys(nt),pending:Object.keys(rt),toLoadLanguages:Object.keys(ot),toLoadNamespaces:Object.keys(it)}}loaded(j,_e,et){const tt=j.split("|"),nt=tt[0],rt=tt[1];_e&&this.emit("failedLoading",nt,rt,_e),!_e&&et&&this.store.addResourceBundle(nt,rt,et,void 0,void 0,{skipCopy:!0}),this.state[j]=_e?-1:2,_e&&et&&(this.state[j]=0);const ot={};this.queue.forEach(it=>{pushPath(it.loaded,[nt],rt),removePending(it,j),_e&&it.errors.push(_e),it.pendingCount===0&&!it.done&&(Object.keys(it.loaded).forEach(at=>{ot[at]||(ot[at]={});const dt=it.loaded[at];dt.length&&dt.forEach(st=>{ot[at][st]===void 0&&(ot[at][st]=!0)})}),it.done=!0,it.errors.length?it.callback(it.errors):it.callback())}),this.emit("loaded",ot),this.queue=this.queue.filter(it=>!it.done)}read(j,_e,et){let tt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,nt=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,rt=arguments.length>5?arguments[5]:void 0;if(!j.length)return rt(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:j,ns:_e,fcName:et,tried:tt,wait:nt,callback:rt});return}this.readingCalls++;const ot=(at,dt)=>{if(this.readingCalls--,this.waitingReads.length>0){const st=this.waitingReads.shift();this.read(st.lng,st.ns,st.fcName,st.tried,st.wait,st.callback)}if(at&&dt&&tt<this.maxRetries){setTimeout(()=>{this.read.call(this,j,_e,et,tt+1,nt*2,rt)},nt);return}rt(at,dt)},it=this.backend[et].bind(this.backend);if(it.length===2){try{const at=it(j,_e);at&&typeof at.then=="function"?at.then(dt=>ot(null,dt)).catch(ot):ot(null,at)}catch(at){ot(at)}return}return it(j,_e,ot)}prepareLoading(j,_e){let et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},tt=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),tt&&tt();typeof j=="string"&&(j=this.languageUtils.toResolveHierarchy(j)),typeof _e=="string"&&(_e=[_e]);const nt=this.queueLoad(j,_e,et,tt);if(!nt.toLoad.length)return nt.pending.length||tt(),null;nt.toLoad.forEach(rt=>{this.loadOne(rt)})}load(j,_e,et){this.prepareLoading(j,_e,{},et)}reload(j,_e,et){this.prepareLoading(j,_e,{reload:!0},et)}loadOne(j){let _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const et=j.split("|"),tt=et[0],nt=et[1];this.read(tt,nt,"read",void 0,void 0,(rt,ot)=>{rt&&this.logger.warn(`${_e}loading namespace ${nt} for language ${tt} failed`,rt),!rt&&ot&&this.logger.log(`${_e}loaded namespace ${nt} for language ${tt}`,ot),this.loaded(j,rt,ot)})}saveMissing(j,_e,et,tt,nt){let rt=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},ot=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(_e)){this.logger.warn(`did not save key "${et}" as the namespace "${_e}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(et==null||et==="")){if(this.backend&&this.backend.create){const it={...rt,isUpdate:nt},at=this.backend.create.bind(this.backend);if(at.length<6)try{let dt;at.length===5?dt=at(j,_e,et,tt,it):dt=at(j,_e,et,tt),dt&&typeof dt.then=="function"?dt.then(st=>ot(null,st)).catch(ot):ot(null,dt)}catch(dt){ot(dt)}else at(j,_e,et,tt,ot,it)}!j||!j[0]||this.store.addResource(j[0],_e,et,tt)}}}const get=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:$=>{let j={};if(typeof $[1]=="object"&&(j=$[1]),typeof $[1]=="string"&&(j.defaultValue=$[1]),typeof $[2]=="string"&&(j.tDescription=$[2]),typeof $[2]=="object"||typeof $[3]=="object"){const _e=$[3]||$[2];Object.keys(_e).forEach(et=>{j[et]=_e[et]})}return j},interpolation:{escapeValue:!0,format:$=>$,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),transformOptions=$=>(typeof $.ns=="string"&&($.ns=[$.ns]),typeof $.fallbackLng=="string"&&($.fallbackLng=[$.fallbackLng]),typeof $.fallbackNS=="string"&&($.fallbackNS=[$.fallbackNS]),$.supportedLngs&&$.supportedLngs.indexOf("cimode")<0&&($.supportedLngs=$.supportedLngs.concat(["cimode"])),$),noop$2=()=>{},bindMemberFunctions=$=>{Object.getOwnPropertyNames(Object.getPrototypeOf($)).forEach(_e=>{typeof $[_e]=="function"&&($[_e]=$[_e].bind($))})};class I18n extends EventEmitter{constructor(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_e=arguments.length>1?arguments[1]:void 0;if(super(),this.options=transformOptions(j),this.services={},this.logger=baseLogger,this.modules={external:[]},bindMemberFunctions(this),_e&&!this.isInitialized&&!j.isClone){if(!this.options.initImmediate)return this.init(j,_e),this;setTimeout(()=>{this.init(j,_e)},0)}}init(){var j=this;let _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},et=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof _e=="function"&&(et=_e,_e={}),!_e.defaultNS&&_e.defaultNS!==!1&&_e.ns&&(typeof _e.ns=="string"?_e.defaultNS=_e.ns:_e.ns.indexOf("translation")<0&&(_e.defaultNS=_e.ns[0]));const tt=get();this.options={...tt,...this.options,...transformOptions(_e)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...tt.interpolation,...this.options.interpolation}),_e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=_e.keySeparator),_e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=_e.nsSeparator);const nt=dt=>dt?typeof dt=="function"?new dt:dt:null;if(!this.options.isClone){this.modules.logger?baseLogger.init(nt(this.modules.logger),this.options):baseLogger.init(null,this.options);let dt;this.modules.formatter?dt=this.modules.formatter:typeof Intl<"u"&&(dt=Formatter);const st=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);const ut=this.services;ut.logger=baseLogger,ut.resourceStore=this.store,ut.languageUtils=st,ut.pluralResolver=new PluralResolver(st,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),dt&&(!this.options.interpolation.format||this.options.interpolation.format===tt.interpolation.format)&&(ut.formatter=nt(dt),ut.formatter.init(ut,this.options),this.options.interpolation.format=ut.formatter.format.bind(ut.formatter)),ut.interpolator=new Interpolator(this.options),ut.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},ut.backendConnector=new Connector(nt(this.modules.backend),ut.resourceStore,ut,this.options),ut.backendConnector.on("*",function(ft){for(var pt=arguments.length,gt=new Array(pt>1?pt-1:0),yt=1;yt<pt;yt++)gt[yt-1]=arguments[yt];j.emit(ft,...gt)}),this.modules.languageDetector&&(ut.languageDetector=nt(this.modules.languageDetector),ut.languageDetector.init&&ut.languageDetector.init(ut,this.options.detection,this.options)),this.modules.i18nFormat&&(ut.i18nFormat=nt(this.modules.i18nFormat),ut.i18nFormat.init&&ut.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",function(ft){for(var pt=arguments.length,gt=new Array(pt>1?pt-1:0),yt=1;yt<pt;yt++)gt[yt-1]=arguments[yt];j.emit(ft,...gt)}),this.modules.external.forEach(ft=>{ft.init&&ft.init(this)})}if(this.format=this.options.interpolation.format,et||(et=noop$2),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const dt=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);dt.length>0&&dt[0]!=="dev"&&(this.options.lng=dt[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(dt=>{this[dt]=function(){return j.store[dt](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(dt=>{this[dt]=function(){return j.store[dt](...arguments),j}});const it=defer(),at=()=>{const dt=(st,ut)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),it.resolve(ut),et(st,ut)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return dt(null,this.t.bind(this));this.changeLanguage(this.options.lng,dt)};return this.options.resources||!this.options.initImmediate?at():setTimeout(at,0),it}loadResources(j){let et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop$2;const tt=typeof j=="string"?j:this.language;if(typeof j=="function"&&(et=j),!this.options.resources||this.options.partialBundledLanguages){if(tt&&tt.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return et();const nt=[],rt=ot=>{if(!ot||ot==="cimode")return;this.services.languageUtils.toResolveHierarchy(ot).forEach(at=>{at!=="cimode"&&nt.indexOf(at)<0&&nt.push(at)})};tt?rt(tt):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(it=>rt(it)),this.options.preload&&this.options.preload.forEach(ot=>rt(ot)),this.services.backendConnector.load(nt,this.options.ns,ot=>{!ot&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),et(ot)})}else et(null)}reloadResources(j,_e,et){const tt=defer();return typeof j=="function"&&(et=j,j=void 0),typeof _e=="function"&&(et=_e,_e=void 0),j||(j=this.languages),_e||(_e=this.options.ns),et||(et=noop$2),this.services.backendConnector.reload(j,_e,nt=>{tt.resolve(),et(nt)}),tt}use(j){if(!j)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!j.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return j.type==="backend"&&(this.modules.backend=j),(j.type==="logger"||j.log&&j.warn&&j.error)&&(this.modules.logger=j),j.type==="languageDetector"&&(this.modules.languageDetector=j),j.type==="i18nFormat"&&(this.modules.i18nFormat=j),j.type==="postProcessor"&&postProcessor.addPostProcessor(j),j.type==="formatter"&&(this.modules.formatter=j),j.type==="3rdParty"&&this.modules.external.push(j),this}setResolvedLanguage(j){if(!(!j||!this.languages)&&!(["cimode","dev"].indexOf(j)>-1))for(let _e=0;_e<this.languages.length;_e++){const et=this.languages[_e];if(!(["cimode","dev"].indexOf(et)>-1)&&this.store.hasLanguageSomeTranslations(et)){this.resolvedLanguage=et;break}}}changeLanguage(j,_e){var et=this;this.isLanguageChangingTo=j;const tt=defer();this.emit("languageChanging",j);const nt=it=>{this.language=it,this.languages=this.services.languageUtils.toResolveHierarchy(it),this.resolvedLanguage=void 0,this.setResolvedLanguage(it)},rt=(it,at)=>{at?(nt(at),this.translator.changeLanguage(at),this.isLanguageChangingTo=void 0,this.emit("languageChanged",at),this.logger.log("languageChanged",at)):this.isLanguageChangingTo=void 0,tt.resolve(function(){return et.t(...arguments)}),_e&&_e(it,function(){return et.t(...arguments)})},ot=it=>{!j&&!it&&this.services.languageDetector&&(it=[]);const at=typeof it=="string"?it:this.services.languageUtils.getBestMatchFromCodes(it);at&&(this.language||nt(at),this.translator.language||this.translator.changeLanguage(at),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(at)),this.loadResources(at,dt=>{rt(dt,at)})};return!j&&this.services.languageDetector&&!this.services.languageDetector.async?ot(this.services.languageDetector.detect()):!j&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(ot):this.services.languageDetector.detect(ot):ot(j),tt}getFixedT(j,_e,et){var tt=this;const nt=function(rt,ot){let it;if(typeof ot!="object"){for(var at=arguments.length,dt=new Array(at>2?at-2:0),st=2;st<at;st++)dt[st-2]=arguments[st];it=tt.options.overloadTranslationOptionHandler([rt,ot].concat(dt))}else it={...ot};it.lng=it.lng||nt.lng,it.lngs=it.lngs||nt.lngs,it.ns=it.ns||nt.ns,it.keyPrefix!==""&&(it.keyPrefix=it.keyPrefix||et||nt.keyPrefix);const ut=tt.options.keySeparator||".";let ft;return it.keyPrefix&&Array.isArray(rt)?ft=rt.map(pt=>`${it.keyPrefix}${ut}${pt}`):ft=it.keyPrefix?`${it.keyPrefix}${ut}${rt}`:rt,tt.t(ft,it)};return typeof j=="string"?nt.lng=j:nt.lngs=j,nt.ns=_e,nt.keyPrefix=et,nt}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(j){this.options.defaultNS=j}hasLoadedNamespace(j){let _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const et=_e.lng||this.resolvedLanguage||this.languages[0],tt=this.options?this.options.fallbackLng:!1,nt=this.languages[this.languages.length-1];if(et.toLowerCase()==="cimode")return!0;const rt=(ot,it)=>{const at=this.services.backendConnector.state[`${ot}|${it}`];return at===-1||at===0||at===2};if(_e.precheck){const ot=_e.precheck(this,rt);if(ot!==void 0)return ot}return!!(this.hasResourceBundle(et,j)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||rt(et,j)&&(!tt||rt(nt,j)))}loadNamespaces(j,_e){const et=defer();return this.options.ns?(typeof j=="string"&&(j=[j]),j.forEach(tt=>{this.options.ns.indexOf(tt)<0&&this.options.ns.push(tt)}),this.loadResources(tt=>{et.resolve(),_e&&_e(tt)}),et):(_e&&_e(),Promise.resolve())}loadLanguages(j,_e){const et=defer();typeof j=="string"&&(j=[j]);const tt=this.options.preload||[],nt=j.filter(rt=>tt.indexOf(rt)<0&&this.services.languageUtils.isSupportedCode(rt));return nt.length?(this.options.preload=tt.concat(nt),this.loadResources(rt=>{et.resolve(),_e&&_e(rt)}),et):(_e&&_e(),Promise.resolve())}dir(j){if(j||(j=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!j)return"rtl";const _e=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],et=this.services&&this.services.languageUtils||new LanguageUtil(get());return _e.indexOf(et.getLanguagePartFromCode(j))>-1||j.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_e=arguments.length>1?arguments[1]:void 0;return new I18n(j,_e)}cloneInstance(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop$2;const et=j.forkResourceStore;et&&delete j.forkResourceStore;const tt={...this.options,...j,isClone:!0},nt=new I18n(tt);return(j.debug!==void 0||j.prefix!==void 0)&&(nt.logger=nt.logger.clone(j)),["store","services","language"].forEach(ot=>{nt[ot]=this[ot]}),nt.services={...this.services},nt.services.utils={hasLoadedNamespace:nt.hasLoadedNamespace.bind(nt)},et&&(nt.store=new ResourceStore(this.store.data,tt),nt.services.resourceStore=nt.store),nt.translator=new Translator(nt.services,tt),nt.translator.on("*",function(ot){for(var it=arguments.length,at=new Array(it>1?it-1:0),dt=1;dt<it;dt++)at[dt-1]=arguments[dt];nt.emit(ot,...at)}),nt.init(tt,_e),nt.translator.options=tt,nt.translator.backendConnector.services.utils={hasLoadedNamespace:nt.hasLoadedNamespace.bind(nt)},nt}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const instance=I18n.createInstance();instance.createInstance=I18n.createInstance;instance.createInstance;instance.dir;instance.init;instance.loadResources;instance.reloadResources;instance.use;instance.changeLanguage;instance.getFixedT;instance.t;instance.exists;instance.setDefaultNamespace;instance.hasLoadedNamespace;instance.loadNamespaces;instance.loadLanguages;const warn=(...$)=>{console!=null&&console.warn&&(isString($[0])&&($[0]=`react-i18next:: ${$[0]}`),console.warn(...$))},alreadyWarned={},warnOnce=(...$)=>{isString($[0])&&alreadyWarned[$[0]]||(isString($[0])&&(alreadyWarned[$[0]]=new Date),warn(...$))},loadedClb=($,j)=>()=>{if($.isInitialized)j();else{const _e=()=>{setTimeout(()=>{$.off("initialized",_e)},0),j()};$.on("initialized",_e)}},loadNamespaces=($,j,_e)=>{$.loadNamespaces(j,loadedClb($,_e))},loadLanguages=($,j,_e,et)=>{isString(_e)&&(_e=[_e]),_e.forEach(tt=>{$.options.ns.indexOf(tt)<0&&$.options.ns.push(tt)}),$.loadLanguages(j,loadedClb($,et))},hasLoadedNamespace=($,j,_e={})=>!j.languages||!j.languages.length?(warnOnce("i18n.languages were undefined or empty",j.languages),!0):j.hasLoadedNamespace($,{lng:_e.lng,precheck:(et,tt)=>{var nt;if(((nt=_e.bindI18n)==null?void 0:nt.indexOf("languageChanging"))>-1&&et.services.backendConnector.backend&&et.isLanguageChangingTo&&!tt(et.isLanguageChangingTo,$))return!1}}),isString=$=>typeof $=="string",isObject=$=>typeof $=="object"&&$!==null,matchHtmlEntity=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,htmlEntities={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},unescapeHtmlEntity=$=>htmlEntities[$],unescape=$=>$.replace(matchHtmlEntity,unescapeHtmlEntity);let defaultOptions={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape};const setDefaults=($={})=>{defaultOptions={...defaultOptions,...$}},getDefaults$2=()=>defaultOptions;let i18nInstance;const setI18n=$=>{i18nInstance=$},getI18n=()=>i18nInstance,initReactI18next={type:"3rdParty",init($){setDefaults($.options.react),setI18n($)}},I18nContext=reactExports.createContext();class ReportNamespaces{constructor(){this.usedNamespaces={}}addUsedNamespaces(j){j.forEach(_e=>{var et;(et=this.usedNamespaces)[_e]??(et[_e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const usePrevious$2=($,j)=>{const _e=reactExports.useRef();return reactExports.useEffect(()=>{_e.current=$},[$,j]),_e.current},alwaysNewT=($,j,_e,et)=>$.getFixedT(j,_e,et),useMemoizedT=($,j,_e,et)=>reactExports.useCallback(alwaysNewT($,j,_e,et),[$,j,_e,et]),useTranslation=($,j={})=>{var St,At,kt,bt;const{i18n:_e}=j,{i18n:et,defaultNS:tt}=reactExports.useContext(I18nContext)||{},nt=_e||et||getI18n();if(nt&&!nt.reportNamespaces&&(nt.reportNamespaces=new ReportNamespaces),!nt){warnOnce("You will need to pass in an i18next instance by using initReactI18next");const Rt=(Ut,Yt)=>isString(Yt)?Yt:isObject(Yt)&&isString(Yt.defaultValue)?Yt.defaultValue:Array.isArray(Ut)?Ut[Ut.length-1]:Ut,Ot=[Rt,{},!1];return Ot.t=Rt,Ot.i18n={},Ot.ready=!1,Ot}(St=nt.options.react)!=null&&St.wait&&warnOnce("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const rt={...getDefaults$2(),...nt.options.react,...j},{useSuspense:ot,keyPrefix:it}=rt;let at=tt||((At=nt.options)==null?void 0:At.defaultNS);at=isString(at)?[at]:at||["translation"],(bt=(kt=nt.reportNamespaces).addUsedNamespaces)==null||bt.call(kt,at);const dt=(nt.isInitialized||nt.initializedStoreOnce)&&at.every(Rt=>hasLoadedNamespace(Rt,nt,rt)),st=useMemoizedT(nt,j.lng||null,rt.nsMode==="fallback"?at:at[0],it),ut=()=>st,ft=()=>alwaysNewT(nt,j.lng||null,rt.nsMode==="fallback"?at:at[0],it),[pt,gt]=reactExports.useState(ut);let yt=at.join();j.lng&&(yt=`${j.lng}${yt}`);const mt=usePrevious$2(yt),vt=reactExports.useRef(!0);reactExports.useEffect(()=>{const{bindI18n:Rt,bindI18nStore:Ot}=rt;vt.current=!0,!dt&&!ot&&(j.lng?loadLanguages(nt,j.lng,at,()=>{vt.current&&gt(ft)}):loadNamespaces(nt,at,()=>{vt.current&&gt(ft)})),dt&&mt&&mt!==yt&&vt.current&&gt(ft);const Ut=()=>{vt.current&&gt(ft)};return Rt&&(nt==null||nt.on(Rt,Ut)),Ot&&(nt==null||nt.store.on(Ot,Ut)),()=>{vt.current=!1,nt&&(Rt==null||Rt.split(" ").forEach(Yt=>nt.off(Yt,Ut))),Ot&&nt&&Ot.split(" ").forEach(Yt=>nt.store.off(Yt,Ut))}},[nt,yt]),reactExports.useEffect(()=>{vt.current&&dt&&gt(ut)},[nt,it,dt]);const _t=[pt,nt,dt];if(_t.t=pt,_t.i18n=nt,_t.ready=dt,dt||!dt&&!ot)return _t;throw new Promise(Rt=>{j.lng?loadLanguages(nt,j.lng,at,()=>Rt()):loadNamespaces(nt,at,()=>Rt())})};function _classCallCheck($,j){if(!($ instanceof j))throw new TypeError("Cannot call a class as a function")}function _typeof($){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},_typeof($)}function toPrimitive($,j){if(_typeof($)!="object"||!$)return $;var _e=$[Symbol.toPrimitive];if(_e!==void 0){var et=_e.call($,j);if(_typeof(et)!="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return String($)}function toPropertyKey($){var j=toPrimitive($,"string");return _typeof(j)=="symbol"?j:j+""}function _defineProperties($,j){for(var _e=0;_e<j.length;_e++){var et=j[_e];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty($,toPropertyKey(et.key),et)}}function _createClass($,j,_e){return j&&_defineProperties($.prototype,j),Object.defineProperty($,"prototype",{writable:!1}),$}var arr=[],each$1=arr.forEach,slice$1=arr.slice;function defaults$3($){return each$1.call(slice$1.call(arguments,1),function(j){if(j)for(var _e in j)$[_e]===void 0&&($[_e]=j[_e])}),$}function createClassOnDemand($){return $?typeof $=="function"?new $:$:null}function getDefaults$1(){return{handleEmptyResourcesAsFailed:!0,cacheHitMode:"none"}}function handleCorrectReadFunction($,j,_e,et){var tt=$.read.bind($);if(tt.length===2){try{var nt=tt(j,_e);nt&&typeof nt.then=="function"?nt.then(function(rt){return et(null,rt)}).catch(et):et(null,nt)}catch(rt){et(rt)}return}tt(j,_e,et)}var Backend$1=function(){function $(j){var _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};_classCallCheck(this,$),this.backends=[],this.type="backend",this.allOptions=et,this.init(j,_e)}return _createClass($,[{key:"init",value:function(_e){var et=this,tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},nt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=_e,this.options=defaults$3(tt,this.options||{},getDefaults$1()),this.allOptions=nt,this.options.backends&&this.options.backends.forEach(function(rt,ot){et.backends[ot]=et.backends[ot]||createClassOnDemand(rt),et.backends[ot].init(_e,et.options.backendOptions&&et.options.backendOptions[ot]||{},nt)}),this.services&&this.options.reloadInterval&&setInterval(function(){return et.reload()},this.options.reloadInterval)}},{key:"read",value:function(_e,et,tt){var nt=this,rt=this.backends.length,ot=function at(dt){if(dt>=rt)return tt(new Error("non of the backend loaded data",!0));var st=dt===rt-1,ut=nt.options.handleEmptyResourcesAsFailed&&!st?0:-1,ft=nt.backends[dt];ft.read?handleCorrectReadFunction(ft,_e,et,function(pt,gt,yt){if(!pt&&gt&&Object.keys(gt).length>ut){if(tt(null,gt,dt),it(dt-1,gt),ft.save&&nt.options.cacheHitMode&&["refresh","refreshAndUpdateStore"].indexOf(nt.options.cacheHitMode)>-1){if(yt&&nt.options.refreshExpirationTime&&yt+nt.options.refreshExpirationTime>Date.now())return;var mt=nt.backends[dt+1];mt&&mt.read&&handleCorrectReadFunction(mt,_e,et,function(vt,_t){vt||_t&&(Object.keys(_t).length<=ut||(it(dt,_t),nt.options.cacheHitMode==="refreshAndUpdateStore"&&nt.services&&nt.services.resourceStore&&nt.services.resourceStore.addResourceBundle(_e,et,_t)))})}}else at(dt+1)}):at(dt+1)},it=function at(dt,st){if(!(dt<0)){var ut=nt.backends[dt];ut.save&&ut.save(_e,et,st),at(dt-1,st)}};ot(0)}},{key:"create",value:function(_e,et,tt,nt){var rt=arguments.length>4&&arguments[4]!==void 0?arguments[4]:function(){},ot=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};this.backends.forEach(function(it){if(it.create){var at=it.create.bind(it);if(at.length<6){try{var dt;at.length===5?dt=at(_e,et,tt,nt,ot):dt=at(_e,et,tt,nt),dt&&typeof dt.then=="function"?dt.then(function(st){return rt(null,st)}).catch(rt):rt(null,dt)}catch(st){rt(st)}return}at(_e,et,tt,nt,rt,ot)}})}},{key:"reload",value:function(){var _e=this,et=this.services,tt=et.backendConnector,nt=et.languageUtils,rt=et.logger,ot=tt.language;if(!(ot&&ot.toLowerCase()==="cimode")){var it=[],at=function(st){var ut=nt.toResolveHierarchy(st);ut.forEach(function(ft){it.indexOf(ft)<0&&it.push(ft)})};at(ot),this.allOptions.preload&&this.allOptions.preload.forEach(function(dt){return at(dt)}),it.forEach(function(dt){_e.allOptions.ns.forEach(function(st){tt.read(dt,st,"read",null,null,function(ut,ft){ut&&rt.warn("loading namespace ".concat(st," for language ").concat(dt," failed"),ut),!ut&&ft&&rt.log("loaded namespace ".concat(st," for language ").concat(dt),ft),tt.loaded("".concat(dt,"|").concat(st),ut,ft)})})})}}}]),$}();Backend$1.type="backend";const defaults$2={loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",multiSeparator:"+",allowMultiLoading:!1,fetch:typeof fetch>"u"?void 0:fetch,parse:JSON.parse,stringify:JSON.stringify,requestOptions:{}},arrify=$=>Array.isArray($)?$:[$],normalize=($,...j)=>typeof $=="function"?$(...j):$;class BackendError extends Error{constructor(_e,et=!1){super(_e);To(this,"retry",null);this.retry=et}}class Backend{constructor(j,_e){To(this,"type","backend");this.init(j,_e)}init(j,_e={}){this.services=j,this.options={...defaults$2,...this.options,..._e}}getLoadPath(j,_e){return normalize(this.options.loadPath,j,_e)}read(j,_e,et){const tt=this.getLoadPath(j,_e),nt=this.services.interpolator.interpolate(tt,{lng:j,ns:_e});this.loadUrl(nt,et)}readMulti(j,_e,et){const tt=this.getLoadPath(j,_e),{multiSeparator:nt}=this.options,rt=this.services.interpolator.interpolate(tt,{lng:j.join(nt),ns:_e.join(nt)});this.loadUrl(rt,et)}loadUrl(j,_e){const{fetch:et,requestOptions:tt,parse:nt}=this.options;et(j,tt).then(rt=>{const{ok:ot,status:it}=rt;if(!ot){const at=it>=500&&it<600;throw new BackendError(`failed loading ${j}`,at)}return rt.text()},()=>{throw new BackendError(`failed loading ${j}`)}).then(rt=>{try{return _e(null,nt(rt,j))}catch{throw new BackendError(`failed parsing ${j} to json`,!1)}}).catch(rt=>{rt instanceof BackendError&&_e(rt.message,rt.retry)})}create(j,_e,et,tt){const nt={[et]:tt||""};arrify(j).forEach(rt=>{const{addPath:ot,requestOptions:it,fetch:at,stringify:dt}=this.options,st=this.services.interpolator.interpolate(ot,{lng:rt,ns:_e});try{at(st,{method:"POST",body:dt(nt),...it})}catch(ut){console.error(ut)}})}}To(Backend,"type","backend");const{slice,forEach}=[];function defaults$1($){return forEach.call(slice.call(arguments,1),j=>{if(j)for(const _e in j)$[_e]===void 0&&($[_e]=j[_e])}),$}const fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,serializeCookie=($,j,_e)=>{const et=_e||{};et.path=et.path||"/";const tt=encodeURIComponent(j);let nt=`${$}=${tt}`;if(et.maxAge>0){const rt=et.maxAge-0;if(Number.isNaN(rt))throw new Error("maxAge should be a Number");nt+=`; Max-Age=${Math.floor(rt)}`}if(et.domain){if(!fieldContentRegExp.test(et.domain))throw new TypeError("option domain is invalid");nt+=`; Domain=${et.domain}`}if(et.path){if(!fieldContentRegExp.test(et.path))throw new TypeError("option path is invalid");nt+=`; Path=${et.path}`}if(et.expires){if(typeof et.expires.toUTCString!="function")throw new TypeError("option expires is invalid");nt+=`; Expires=${et.expires.toUTCString()}`}if(et.httpOnly&&(nt+="; HttpOnly"),et.secure&&(nt+="; Secure"),et.sameSite)switch(typeof et.sameSite=="string"?et.sameSite.toLowerCase():et.sameSite){case!0:nt+="; SameSite=Strict";break;case"lax":nt+="; SameSite=Lax";break;case"strict":nt+="; SameSite=Strict";break;case"none":nt+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return nt},cookie={create($,j,_e,et){let tt=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};_e&&(tt.expires=new Date,tt.expires.setTime(tt.expires.getTime()+_e*60*1e3)),et&&(tt.domain=et),document.cookie=serializeCookie($,encodeURIComponent(j),tt)},read($){const j=`${$}=`,_e=document.cookie.split(";");for(let et=0;et<_e.length;et++){let tt=_e[et];for(;tt.charAt(0)===" ";)tt=tt.substring(1,tt.length);if(tt.indexOf(j)===0)return tt.substring(j.length,tt.length)}return null},remove($){this.create($,"",-1)}};var cookie$1={name:"cookie",lookup($){let{lookupCookie:j}=$;if(j&&typeof document<"u")return cookie.read(j)||void 0},cacheUserLanguage($,j){let{lookupCookie:_e,cookieMinutes:et,cookieDomain:tt,cookieOptions:nt}=j;_e&&typeof document<"u"&&cookie.create(_e,$,et,tt,nt)}},querystring={name:"querystring",lookup($){var et;let{lookupQuerystring:j}=$,_e;if(typeof window<"u"){let{search:tt}=window.location;!window.location.search&&((et=window.location.hash)==null?void 0:et.indexOf("?"))>-1&&(tt=window.location.hash.substring(window.location.hash.indexOf("?")));const rt=tt.substring(1).split("&");for(let ot=0;ot<rt.length;ot++){const it=rt[ot].indexOf("=");it>0&&rt[ot].substring(0,it)===j&&(_e=rt[ot].substring(it+1))}}return _e}};let hasLocalStorageSupport=null;const localStorageAvailable=()=>{if(hasLocalStorageSupport!==null)return hasLocalStorageSupport;try{hasLocalStorageSupport=window!=="undefined"&&window.localStorage!==null;const $="i18next.translate.boo";window.localStorage.setItem($,"foo"),window.localStorage.removeItem($)}catch{hasLocalStorageSupport=!1}return hasLocalStorageSupport};var localStorage$1={name:"localStorage",lookup($){let{lookupLocalStorage:j}=$;if(j&&localStorageAvailable())return window.localStorage.getItem(j)||void 0},cacheUserLanguage($,j){let{lookupLocalStorage:_e}=j;_e&&localStorageAvailable()&&window.localStorage.setItem(_e,$)}};let hasSessionStorageSupport=null;const sessionStorageAvailable=()=>{if(hasSessionStorageSupport!==null)return hasSessionStorageSupport;try{hasSessionStorageSupport=window!=="undefined"&&window.sessionStorage!==null;const $="i18next.translate.boo";window.sessionStorage.setItem($,"foo"),window.sessionStorage.removeItem($)}catch{hasSessionStorageSupport=!1}return hasSessionStorageSupport};var sessionStorage={name:"sessionStorage",lookup($){let{lookupSessionStorage:j}=$;if(j&&sessionStorageAvailable())return window.sessionStorage.getItem(j)||void 0},cacheUserLanguage($,j){let{lookupSessionStorage:_e}=j;_e&&sessionStorageAvailable()&&window.sessionStorage.setItem(_e,$)}},navigator$1={name:"navigator",lookup($){const j=[];if(typeof navigator<"u"){const{languages:_e,userLanguage:et,language:tt}=navigator;if(_e)for(let nt=0;nt<_e.length;nt++)j.push(_e[nt]);et&&j.push(et),tt&&j.push(tt)}return j.length>0?j:void 0}},htmlTag={name:"htmlTag",lookup($){let{htmlTag:j}=$,_e;const et=j||(typeof document<"u"?document.documentElement:null);return et&&typeof et.getAttribute=="function"&&(_e=et.getAttribute("lang")),_e}},path={name:"path",lookup($){var tt;let{lookupFromPathIndex:j}=$;if(typeof window>"u")return;const _e=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(_e)?(tt=_e[typeof j=="number"?j:0])==null?void 0:tt.replace("/",""):void 0}},subdomain={name:"subdomain",lookup($){var tt,nt;let{lookupFromSubdomainIndex:j}=$;const _e=typeof j=="number"?j+1:1,et=typeof window<"u"&&((nt=(tt=window.location)==null?void 0:tt.hostname)==null?void 0:nt.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(et)return et[_e]}};function getDefaults(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:$=>$}}let Browser$1=class{constructor(j){let _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(j,_e)}init(j){let _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=j||{languageUtils:{}},this.options=defaults$1(_e,this.options||{},getDefaults()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=tt=>tt.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=et,this.addDetector(cookie$1),this.addDetector(querystring),this.addDetector(localStorage$1),this.addDetector(sessionStorage),this.addDetector(navigator$1),this.addDetector(htmlTag),this.addDetector(path),this.addDetector(subdomain)}addDetector(j){return this.detectors[j.name]=j,this}detect(j){j||(j=this.options.order);let _e=[];return j.forEach(et=>{if(this.detectors[et]){let tt=this.detectors[et].lookup(this.options);tt&&typeof tt=="string"&&(tt=[tt]),tt&&(_e=_e.concat(tt))}}),_e=_e.map(et=>this.options.convertDetectedLanguage(et)),this.services.languageUtils.getBestMatchFromCodes?_e:_e.length>0?_e[0]:null}cacheUserLanguage(j,_e){_e||(_e=this.options.caches),_e&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(j)>-1||_e.forEach(et=>{this.detectors[et]&&this.detectors[et].cacheUserLanguage(j,this.options)}))}};Browser$1.type="languageDetector";const locales=["en-US","en","ru-RU","uk-UA","zh"];instance.use(Backend$1).use(Browser$1).use(initReactI18next).init({fallbackLng:"en",supportedLngs:locales,defaultNS:"theme",fallbackNS:"translation",load:"currentOnly",debug:!0,interpolation:{escapeValue:!1},backend:{backends:[Backend],backendOptions:[{loadPath:new URL("locales/",window.location.href).href+"{{lng}}/{{ns}}.json"}]}});function loadThemeTranslations($){const j={};for(const _e of $){if(!locales.includes(_e.lang))continue;const et=j[_e.lang]??{};et[_e.tkey]=_e.value,j[_e.lang]=et}for(const[_e,et]of Object.entries(j))instance.addResourceBundle(_e,"theme",et,!0,!0)}function unloadThemeTranslations(){for(const $ of locales)instance.removeResourceBundle($,"theme")}function formatDate($){return new Intl.DateTimeFormat(instance.language,{dateStyle:"long",timeStyle:"short"}).format($)}const baseInit$=atom(!1),initDeferred$=atom(defer$1()),initialBaseUrl$=atom("/"),input$=create({isOpen:!1,content:"",entered:"",onfinished:null},$=>{const j=$.focus(et=>et.isOpen),_e=$.focus(et=>et.entered);return{open(et,tt){isPaused$.set(!0),$.set({isOpen:!0,content:et,entered:"",onfinished:tt})},enter(et){_e.set(et)},finish(){var et,tt;j.value&&(j.set(!1),isPaused$.set(!1),(tt=(et=$.value).onfinished)==null||tt.call(et,_e.value))},close(){var et,tt;j.value&&(j.set(!1),isPaused$.set(!1),(tt=(et=$.value).onfinished)==null||tt.call(et,""))},clear(){var et,tt;j.value&&((tt=(et=$.value).onfinished)==null||tt.call(et,""),isPaused$.set(!1)),$.set({isOpen:!1,content:"",entered:"",onfinished:null})}}}),selectedMenuItem$=atom(-1),menu$=atom({isOpen:!1,items:[],onselect:null},$=>{const j=$.focus(_e=>_e.isOpen);return{open(_e,et){$.set({isOpen:!0,items:_e,onselect:et})},select(_e){var et,tt;j.set(!1),(tt=(et=$.value).onselect)==null||tt.call(et,_e),$.value.onselect=null},close(){var _e,et;j.set(!1),(et=(_e=$.value).onselect)==null||et.call(_e,-1),$.value.onselect=null},clear(){var _e,et;j.value&&((et=(_e=$.value).onselect)==null||et.call(_e,-1)),$.set({isOpen:!1,items:[],onselect:null})}}}),msg$=create({isOpen:!1,content:"",onclosed:null},$=>{const j=$.focus(_e=>_e.isOpen);return{open(_e,et){isPaused$.set(!0),$.set({isOpen:!0,content:_e,onclosed:et})},close(){var _e,et;j.value&&(isPaused$.set(!1),j.set(!1),(et=(_e=$.value).onclosed)==null||et.call(_e))},clear(){var _e,et;j.value&&(isPaused$.set(!1),(et=(_e=$.value).onclosed)==null||et.call(_e)),$.set({isOpen:!1,content:"",onclosed:null})}}}),errorMessage$=atom(""),isErrorShown$=atom(!1);function showError($){errorMessage$.set($),isErrorShown$.set(!0)}const noticeMessage$=atom(""),isNoticeShown$=atom(!1);let noticeTimeout=null;function showNotice($){noticeMessage$.set($),isNoticeShown$.set(!0),noticeTimeout&&clearTimeout(noticeTimeout),noticeTimeout=setTimeout(()=>{isNoticeShown$.set(!1)},3e3)}const currentGameEntry$=atom(null),currentGame$=atom(),currentGameMode$=atom($=>{var j;return((j=$(currentGame$))==null?void 0:j.mode)||"classic"}),currentAeroWidth$=atom($=>{var j,_e;return((_e=(j=$(currentGame$))==null?void 0:j.aero)==null?void 0:_e.width)??800}),currentAeroHeight$=atom($=>{var j,_e;return((_e=(j=$(currentGame$))==null?void 0:j.aero)==null?void 0:_e.height)??600}),saveSlotsCount$=atom($=>{var j;return((j=$(currentGame$))==null?void 0:j.save_slots)??9}),onGameEnd$=atom(null),baseUrl$=atom("");async function runGame($){var j,_e,et,tt,nt;if(!$)throw new Error("Game not found");try{baseUrl$.set($.loadConfig.url);let rt=$.loadConfig.descriptor||{id:$.id,mode:$.mode,title:$.title,file:""};try{const at=await fetchTextContent(baseUrl$.value,"game.cfg"),dt=parseToml(at);if(((j=dt.game)==null?void 0:j.length)===1)[rt]=dt.game;else{const st=(_e=dt.game)==null?void 0:_e.find(ut=>ut.id===$.id);if(!st)throw new Error("Config not found");rt=st}}catch(at){console.error("Game config not loaded",at)}if((rt==null?void 0:rt.mode)==="classic"||!(rt!=null&&rt.mode))try{const at=await fetchTextContent(baseUrl$.value,"qspgui.cfg"),dt=parseCfg(at);if(!dt||!Object.keys(dt).length)throw new Error("Invalid config file");qspGuiCfg$.set(dt)}catch{}if(rt.mode==="aero")if(rt.aero)rt.window={...rt.window??{},...rt.aero,resizable:!1};else try{const at=await fetchTextContent(baseUrl$.value,"config.xml"),ut=new DOMParser().parseFromString(at,"application/xml").querySelector("game");if(ut){const ft=parseInt(ut.getAttribute("width")||"800"),pt=parseInt(ut.getAttribute("height")||"600");rt.aero={width:ft,height:pt},rt.window={...rt.window??{},width:ft,height:pt,resizable:!1}}}catch{rt.aero={width:800,height:600},rt.window={...rt.window??{},width:800,height:600,resizable:!1}}windowManager.setTitle($.title),setupGlobalHotKeys(),rt!=null&&rt.hotkeys&&setupCustomHotKeys(rt.hotkeys),(et=rt==null?void 0:rt.resources)!=null&&et.icon&&windowManager.setIcon(baseUrl$.value,rt.resources.icon),loadAdditionalResources(rt==null?void 0:rt.resources),rt!=null&&rt.themes&&await registerThemes(rt.themes),rt!=null&&rt.defaultTheme?themeRegistry$.value[rt.defaultTheme]?currentTheme$.set(rt.defaultTheme):showNotice(`Theme ${rt.defaultTheme} not found`):(rt==null?void 0:rt.mode)==="aero"?currentTheme$.set(AERO_THEME):currentTheme$.set(CLASSIC_THEME),loadThemeTranslations(currentTranslations$.value),rt&&applyWindowSettings(rt.window);let ot=await fetchBinaryContent(baseUrl$.value,$.loadConfig.entrypoint);if(!ot)throw new Error("Failed to load game");$.loadConfig.entrypoint.toLowerCase().endsWith(".qsps")&&(ot=convertQsps(ot)),(tt=qspApi$.value)==null||tt.openGame(ot,!0),(nt=qspApi$.value)==null||nt.restartGame(),currentGameEntry$.set($),rt&&currentGame$.set(rt),loadSaveList(),isPaused$.set(!1)}catch(rt){console.error(rt),showNotice(rt instanceof Error?rt.message:String(rt)),stopCurrentGame()}}let wasResized=!1;async function applyWindowSettings($){$&&($.width&&$.height&&(await windowManager.resize($.width,$.height),wasResized=!0),($.resizable??!0)&&($.minWidth&&$.minHeight&&await windowManager.setMinSize($.minWidth,$.minHeight),$.maxWidth&&$.maxHeight&&await windowManager.setMaxSize($.maxWidth,$.maxHeight)),$.fullscreen&&setTimeout(()=>windowManager.goFullscreen(),0))}baseUrl$.subscribe($=>{const j=document.querySelector("#page-base");j.href=$||"/"});function stopCurrentGame(){var $;baseUrl$.set(initialBaseUrl$.value),currentGameEntry$.set(null),currentGame$.set(null),qspGuiCfg$.set(null),closePauseScreen(),pauseScreenCurrentPanel$.set("credits"),isPaused$.set(!0),input$.actions.clear(),menu$.actions.clear(),msg$.actions.clear(),mainContent$.set(""),statsContent$.set(""),actions$.set([]),objects$.set([]),cmdText$.set(""),windowManager.setTitle("qSpider"),windowManager.setIcon(initialBaseUrl$.value,"favicon.ico"),windowManager.unsetMaxSize(),windowManager.unsetMinSize(),wasResized&&windowManager.resize(1024,768),sounds$.actions.clear(),regions$.set({}),layers$.set({}),clearAdditionalResources(),clearHotkeys(),unloadThemeTranslations(),currentTheme$.set(CLASSIC_THEME),themeRegistry$.actions.reset(),window.dispatchEvent(new Event("game-unload")),wasResized=!1,($=onGameEnd$.value)==null||$.call(onGameEnd$)}function onRestart(){reloadRegions(),reloadLayers()}function onRestore(){reloadRegions(),reloadLayers()}function onGameCommand($){var j;if($.startsWith("pause:")){const[,_e]=$.split(":");isPauseScreenVisible$.value||openPauseScreen(),pauseScreenCurrentPanel$.set(_e)}else if($.startsWith("scroll:")){const[,_e,et]=$.split(":");switch(_e){case"main":mainScroll$.update(tt=>et==="top"?-1:Math.max(tt,0)+1);break;case"stats":statsScroll$.update(tt=>et==="top"?-1:Math.max(tt,0)+1);break}}switch($){case"quit":stopCurrentGame();break;case"restart":isPaused$.set(!0),(j=qspApi$.value)==null||j.restartGame(),onRestart(),closePauseScreen(),pauseScreenCurrentPanel$.set("credits");break;case"resume":closePauseScreen();break;case"mute":muted$.set(!0);break;case"unmute":muted$.set(!1);break;case"toggle-mute":muted$.update(_e=>!_e);break;case"quicksave":quickSave();break;case"quickload":quickLoad();break}}const wait$=create(null),waitTimeout$=create();function finishWait(){const $=wait$.value;$&&(clearTimeout(waitTimeout$.value),isPaused$.set(!1),wait$.set(null),$.finish())}wait$.subscribe($=>{$&&(clearTimeout(waitTimeout$.value),isPaused$.set(!0),waitTimeout$.set(setTimeout(()=>{finishWait()},$.ms)))});const qspiderCommands={"action:"($){onGameCommand($)},"event:"($){setTimeout(()=>{const j=$.trim().match(/(.*?)(\[(.*?)\])/i);if(j){const _e=j[1],et=j[3].split(",").map(tt=>{const nt=tt.trim();return nt.startsWith('"')||nt.startsWith("'")?nt.replace(/['"](.*?)['"]/gim,(rt,ot)=>ot):parseInt(nt)});window.dispatchEvent(new CustomEvent("qspider-event",{detail:{name:_e,args:et}}))}else window.dispatchEvent(new CustomEvent("qspider-event",{detail:{name:$.trim()}}))},0)},"change_theme:"($){if(!themeRegistry$.value[$]){errorMessage$.set(`Theme ${$} is not registered`);return}currentTheme$.set($)},"update_region:"($){var _e;regions$.focus(et=>et[$]).set(((_e=qspApi$.value)==null?void 0:_e.readVariableByKey("$qspider_region",$))??"")},"scroll_region:"($){const[j,_e]=$.split(":"),et=regionsScroll$.focus(tt=>tt[j]);_e==="top"?et.set(-1):et.update(tt=>Math.max(tt,0)+1)},"update_layer:"($){layers$.focus(_e=>_e[$]).set(readLayerState($))},update_layers(){const $=layers$.value??{},j={};for(const _e of Object.keys($))j[_e]=readLayerState(_e);layers$.set(j)},"fullscreen:"($){$==="on"?windowManager.goFullscreen():windowManager.goWindowed()},quit(){stopCurrentGame()}},qspiderModuleContent=`# qspider_change_theme
! $args[0] - theme name
exec('qspider.change_theme:<<$args[0]>>')
---

# qspider_update_region
! $args[0] - region name
! $args[1] - content
$qspider_region[$args[0]] = $args[1]
exec('qspider.update_region:<<$args[0]>>')
---
# qspider_append_region
! $args[0] - region name
! $args[1] - content
$qspider_region[$args[0]] += $args[1]
exec('qspider.update_region:<<$args[0]>>')
---
# qspider_prepend_region
! $args[0] - region name
! $args[1] - content
$qspider_region[$args[0]] = $args[1] + $qspider_region[$args[0]]
exec('qspider.update_region:<<$args[0]>>')
---
# qspider_scroll_region
! $args[0] - region name
! $args[1] - direction (top or bottom)
exec('qspider.scroll_region:<<$args[0]>>:<<$args[1]>>')
---
# qspider_clear_region
! $args[0] - region name
! $args[1] - content
$qspider_region[$args[0]] = ''
exec('qspider.update_region:<<$args[0]>>')
---

# qspider_show_layer
! $args[0] - layer name
qspider_layers[$args[0]] = 1
exec('qspider.update_layer:<<$args[0]>>')
---

# qspider_hide_layer
! $args[0] - layer name
qspider_layers[$args[0]] = 0
exec('qspider.update_layer:<<$args[0]>>')
---

# qspider_show_only_layer
! $args[0] - layer name
killvar 'qspider_layers'
qspider_layers[$args[0]] = 1
exec('qspider.update_layers')
---

# qspider_quicksave
exec('qspider.action:quicksave')
---

# qspider_quickload
exec('qspider.action:quickload')
---

# qspider_restart
exec('qspider.action:restart')
---

# qspider_resume
exec('qspider.action:resume')
---

# qspider_quit
exec('qspider.action:quit')
---

# qspider_mute
exec('qspider.action:mute')
---

# qspider_unmute
exec('qspider.action:unmute')
---

# qspider_toggle_mute
exec('qspider.action:toggle-mute')
---

# qspider_open_pause_screen
! $args[0] - panel name
exec('qspider.action:pause:<<$args[0]>>')
---

# qspider_scroll
! $args[0] - panel (main or stats)
! $args[1] - direction (top or bottom)
exec('qspider.action:scroll:<<$args[0]>>:<<$args[1]>>')
---

#qspider_event
! $args[0] - event name
! any further args will be added as event args

local $event_args = ''
if ARRSIZE('$args') > 1:
  loop local i = 1 while i < ARRSIZE('$args') step i += 1:
    if LEN($event_args) > 0:  $event_args += ','
    if args[i] <> 0:
      $event_args += args[i]
    else:
      $event_args += '"<<$args[i]>>"'
    end
  end
end

if $event_args <> '':
  exec('qspider.event: <<$args[0]>>[<<$event_args>>]')
else:
  exec('qspider.event: <<$args[0]>>')
end
---
`,conditionAttributes=["equals","not-equals","is","is-not","contains","not-contains","greater","less","greater-or-equal","less-or-equal"];function checkCondition($,j){const[_e,et]=j;switch(_e){case"equals":case"is":return String($)===String(et);case"not-equals":case"is-not":return String($)!==String(et);case"contains":return typeof $=="string"?$.includes(et):!1;case"not-contains":return typeof $=="string"?!$.includes(et):!1;case"greater":return typeof $=="number"?$>Number(et):$>et;case"less":return typeof $=="number"?$<Number(et):$<et;case"greater-or-equal":return typeof $=="number"?$>=Number(et):$>=et;case"less-or-equal":return typeof $=="number"?$<=Number(et):$<=et}return!1}const qspApi$=atom(),qspApiInitialized$=atom(!1),qspError$=atom(null),qspiderModule$=atom(o(s(qspiderModuleContent)));async function initQspApi(){const $=await fetch(wasmUrl).then(_e=>_e.arrayBuffer()),j=await n$1($);console.log(`QSP version: ${j.version()}`),qspApi$.set(j),qspApiInitialized$.set(!0)}function execCode($){var j;(j=qspApi$.value)==null||j.execCode($)}function onLinkClicked($){$.toLowerCase().startsWith("exec:")?execCode($.substring(5)):window.location.href=$}function useQspVariable($,j,_e,et){const[tt,nt]=reactExports.useState(et);return reactExports.useEffect(()=>{var ot,it;if(!$)return;const rt=j?(ot=qspApi$.value)==null?void 0:ot.watchVariableByKey($,j,at=>nt(at||et)):(it=qspApi$.value)==null?void 0:it.watchVariableByIndex($,_e,at=>nt(at||et));return()=>{rt==null||rt()}},[$,j,_e,et]),tt}function useQspExpression($,j){const[_e,et]=reactExports.useState(!1);return reactExports.useEffect(()=>{var nt;if(!$)return;const tt=(nt=qspApi$.value)==null?void 0:nt.watchVariable($,rt=>{et(checkCondition(rt,j))});return()=>{tt==null||tt()}},[$,j]),_e}qspApi$.subscribe($=>{$.on("version",(j,_e)=>{switch(j){case"player":return _e("qSpider");case"platform":return _e("browser")}return _e($.version())}),$.on("error",qspError$.set),$.on("system_cmd",j=>{if(!j.startsWith("qspider"))return;const[,_e]=j.split(".");for(const[et,tt]of Object.entries(qspiderCommands))if(_e.trim().startsWith(et)){const nt=_e.replace(et,"");tt(nt)}}),$.on("is_play",(j,_e)=>{_e(sounds$.actions.isPlaying(j))}),$.on("play_file",(j,_e,et)=>{sounds$.actions.play(j,_e),et()}),$.on("close_file",(j,_e)=>{j?sounds$.actions.close(j):sounds$.actions.closeAll(),_e()}),$.on("timer",j=>{counterDelay$.set(j)}),$.on("open_game",async(j,_e,et)=>{if(j==="qspider"){$.openGame(qspiderModule$.value,!1),et();return}withCounterPaused(async()=>{const tt=await fetchBinaryContent(baseUrl$.value,j);let nt=tt;if(j.toLowerCase().endsWith(".qsps")&&(nt=convertQsps(tt)),_e){const ot=cleanPath(j);baseUrl$.update(it=>it+ot.slice(0,ot.lastIndexOf("/")+1))}$.openGame(nt,_e),et()})}),$.on("input",(j,_e)=>{input$.actions.open(j,_e)}),$.on("menu",(j,_e)=>{menu$.actions.open(prepareList(j),_e)}),$.on("msg",(j,_e)=>{msg$.actions.open(j,_e)}),$.on("main_changed",j=>{const _e=mainContent$.value,et=prepareContent(j),tt=!_e||et!==_e&&!et.startsWith(_e);isNewLoc$.set(tt),nextMainContent$.set(et),tt?newLocHash$.set(String(hashString(nextMainContent$.value))):mainContent$.set(et)}),$.on("stats_changed",j=>{statsContent$.set(prepareContent(j))}),$.on("actions_changed",j=>{actions$.set(prepareList(j))}),$.on("objects_changed",j=>{objects$.set(prepareList(j))}),$.on("user_input",j=>{cmdText$.set(j)}),$.on("view",j=>{j?view$.actions.open(j):view$.actions.close()}),$.on("panel_visibility",(j,_e)=>{switch(j){case t$2.STAT:isStatsVisible$.set(_e);break;case t$2.ACTS:isActsVisible$.set(_e);break;case t$2.OBJS:isObjsVisible$.set(_e);break;case t$2.INPUT:isCmdVisible$.set(_e);break}}),$.on("load_save",async(j,_e)=>{if(!currentGameEntry$.value)return _e();saveLoadedCallback$.set(()=>{_e()}),j?await restoreFromPath(j):(requestedAction$.set("load"),onGameCommand("pause:saves"))}),$.on("save_game",async(j,_e)=>{if(!currentGameEntry$.value)return _e();gameSavedCallback$.set(()=>{_e()}),j?await saveToPath(j):(requestedAction$.set("save"),onGameCommand("pause:saves"))}),$.on("wait",(j,_e)=>{wait$.set({ms:j,finish:_e})})});function usePrevious$1($){const j=reactExports.useRef();return reactExports.useEffect(()=>{j.current=$},[$]),j.current}const playerTheme$=create("light");function initTheme(){var j;let $=localStorage.getItem("qspider-theme");!$&&((j=window.matchMedia)!=null&&j.call(window,"(prefers-color-scheme: dark)").matches)?$="dark":$="light",playerTheme$.set($)}function toggleTheme(){playerTheme$.update($=>$==="dark"?"light":"dark")}playerTheme$.subscribe($=>{$==="dark"?document.body.classList.add("dark-theme"):document.body.classList.remove("dark-theme"),localStorage.setItem("qspider-theme",$)});const componentsRegistry$=atom(new Map,$=>({register(j,_e){$.value.set(j,_e)}})),useComponent=$=>componentsRegistry$.value.get($)||(()=>null),edgeHasTranslation$=atom(!1),othersHasTranslation$=atom(!1),hasBrowserTranslation$=atom($=>$(edgeHasTranslation$)||$(othersHasTranslation$)),originalLanguge=document.documentElement.lang,langObserver=new MutationObserver(()=>{othersHasTranslation$.set(document.documentElement.lang!==originalLanguge)});langObserver.observe(document.documentElement,{attributes:!0,attributeFilter:["lang"],childList:!1,characterData:!1});const[title]=document.getElementsByTagName("title"),titleObserver=new MutationObserver(()=>{edgeHasTranslation$.set(title.hasAttribute("_msttexthash"))});titleObserver.observe(title,{attributes:!0,attributeFilter:["_msttexthash"],childList:!1,characterData:!1});const fontSizeMap={"-2":"x-small","-1":"small","+0":"medium","+1":"large","+2":"x-large","+3":"xx-large","+4":"xxx-large",0:"medium",1:"x-small",2:"small",3:"medium",4:"large",5:"x-large",6:"xx-large",7:"xxx-large"},Font=({size:$,children:j,attrs:_e})=>{const[,et,tt]=useAttributes(_e,"span"),nt={...et,fontSize:$!=null?fontSizeMap[$]||"medium":"inherit"};return jsxRuntimeExports.jsx("span",{...tt,style:nt,children:j})},ATTRIBUTES_TO_PROPS$1=Object.freeze({class:"className",colspan:"colSpan",datetime:"dateTime",rowspan:"rowSpan",srclang:"srcLang",srcset:"srcSet",usemap:"useMap",cellspacing:"cellSpacing",cellpadding:"cellPadding",autoplay:"autoPlay","xlink:href":"xlinkHref","xmlns:xlink":"xmlnsXlink",for:"htmlFor",minlength:"minLength",maxlength:"maxLength"}),attributeToStyle={size:"fontSize",color:"color",face:"fontFace",valign:"verticalAlign",bgcolor:"backgroundColor",width:"width",height:"height"},imgAlignMap={texttop:"text-top",center:"middle",abscenter:"middle",bottom:"bottom"},attributeToStyleConverters={width:$=>/^\d+$/.test($)?`${$}px`:$,height:$=>/^\d+$/.test($)?`${$}px`:$,fontSize:$=>/^[+-]?\d+$/.test($)?fontSizeMap[$]:$},attributesToStyle=($,j)=>{var et;const _e={};for(const tt of Object.keys($)){const nt=attributeToStyle[tt];if(j==="img"&&tt==="align"){const rt=(et=$[tt])==null?void 0:et.toLowerCase();if(rt){const ot=imgAlignMap[rt];ot&&(_e.verticalAlign=ot)}}if(nt){const rt=$[tt];if(!rt)continue;attributeToStyleConverters[nt]?_e[nt]=attributeToStyleConverters[nt](rt):_e[nt]=rt}}return _e},supportedEvents=["click","mouseenter","mouseleave","contextmenu","dblclick","wheel"],eventsMap={click:"onClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},useAttributes=($,j,_e=j)=>{const et={};_e.includes("-")&&(et["data-qsp"]=_e.replace("qsp-",""));const{tag:tt=j,style:nt={},"qsp-command":rt,"qsp-save-command":ot,...it}=$;for(const[dt,st]of Object.entries(it)){if(dt.startsWith("on"))continue;if(dt.startsWith("qsp-on")){const ft=st.slice(5),[,pt]=dt.split(":");supportedEvents.includes(pt)&&(et[eventsMap[pt]]=gt=>{gt.preventDefault(),execCode(ft)});continue}let ut=ATTRIBUTES_TO_PROPS$1[dt]||dt;ut.includes("-")&&!ut.startsWith("aria-")&&!ut.startsWith("data-")&&ut!=="mask-type"&&(ut=ut.replace(/-([a-z])/g,function(ft,pt){return pt.toUpperCase()})),et[ut]=st}tt.includes("-")&&et.className&&(et.class=et.className,delete et.className),tt==="iframe"&&(et.sandbox="allow-scripts allow-same-origin"),rt?(et.onClick=dt=>{dt.preventDefault(),onGameCommand(rt)},et["data-qsp-command"]=rt):ot&&(et["data-qsp-save-command"]=ot,et.onClick=dt=>{if(dt.preventDefault(),!dt.target)return;const st=getSaveContext(dt.target);st&&onSaveCommand(ot,st)});const at=attributesToStyle($,tt);return[tt,{...nt,...at},et]};function getSaveContext($){const j=$.closest("[data-qsp-save]");if(!j)return console.error("qsp-save-command used on element outside of save tag"),null;const _e="qspSaveIndex"in j.dataset?parseInt(j.dataset.qspSaveIndex??"-1",0):-1,et=j.dataset.qspSavePath??"";return{slot_index:_e,save_path:et}}const Element$2=function({attributes:$={},className:j,children:_e=null,selfClose:et=!1,tagName:tt}){const nt=tt;return et?jsxRuntimeExports.jsx(nt,{className:j,...$}):jsxRuntimeExports.jsx(nt,{className:j,...$,children:_e})},Markup=function($){const{content:j}=$,_e=j.length===1?j[0]:j;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:_e})},TYPE_FLOW=1,TYPE_SECTION=2,TYPE_HEADING=4,TYPE_PHRASING=8,TYPE_EMBEDDED=16,TYPE_INTERACTIVE=32,TYPE_PALPABLE=64,tagConfigs={a:{content:TYPE_FLOW|TYPE_PHRASING,self:!1,type:TYPE_FLOW|TYPE_PHRASING|TYPE_INTERACTIVE|TYPE_PALPABLE},address:{invalid:["h1","h2","h3","h4","h5","h6","address","article","aside","section","div","header","footer"],self:!1},audio:{children:["track","source"]},br:{type:TYPE_FLOW|TYPE_PHRASING,void:!0},body:{content:TYPE_FLOW|TYPE_SECTION|TYPE_HEADING|TYPE_PHRASING|TYPE_EMBEDDED|TYPE_INTERACTIVE|TYPE_PALPABLE},button:{content:TYPE_PHRASING,type:TYPE_FLOW|TYPE_PHRASING|TYPE_INTERACTIVE|TYPE_PALPABLE},caption:{content:TYPE_FLOW,parent:["table"]},col:{parent:["colgroup"],void:!0},colgroup:{children:["col"],parent:["table"]},details:{children:["summary"],type:TYPE_FLOW|TYPE_INTERACTIVE|TYPE_PALPABLE},dd:{content:TYPE_FLOW,parent:["dl"]},dl:{children:["dt","dd"],type:TYPE_FLOW},dt:{content:TYPE_FLOW,invalid:["footer","header"],parent:["dl"]},figcaption:{content:TYPE_FLOW,parent:["figure"]},footer:{invalid:["footer","header"]},header:{invalid:["footer","header"]},hr:{type:TYPE_FLOW,void:!0},img:{void:!0},li:{content:TYPE_FLOW,parent:["ul","ol","menu"]},main:{self:!1},ol:{children:["li"],type:TYPE_FLOW},picture:{children:["source","img"],type:TYPE_FLOW|TYPE_PHRASING|TYPE_EMBEDDED},rb:{parent:["ruby","rtc"]},rp:{parent:["ruby","rtc"]},rt:{content:TYPE_PHRASING,parent:["ruby","rtc"]},rtc:{content:TYPE_PHRASING,parent:["ruby"]},ruby:{children:["rb","rp","rt","rtc"]},source:{parent:["audio","video","picture"],void:!0},summary:{content:TYPE_PHRASING,parent:["details"]},table:{children:["caption","colgroup","thead","tbody","tfoot","tr"],type:TYPE_FLOW},tbody:{parent:["table"],children:["tr"]},td:{content:TYPE_FLOW,parent:["tr"]},tfoot:{parent:["table"],children:["tr"]},th:{content:TYPE_FLOW,parent:["tr"]},thead:{parent:["table"],children:["tr"]},tr:{parent:["table","tbody","thead","tfoot"],children:["th","td"]},track:{parent:["audio","video"],void:!0},ul:{children:["li"],type:TYPE_FLOW},video:{children:["track","source"]},wbr:{type:TYPE_FLOW|TYPE_PHRASING,void:!0}};function createConfigBuilder($){return j=>{tagConfigs[j]={...$,...tagConfigs[j]}}}["address","main","div","figure","p","pre"].forEach(createConfigBuilder({content:TYPE_FLOW,type:TYPE_FLOW|TYPE_PALPABLE}));["abbr","b","bdi","bdo","cite","code","data","dfn","em","i","kbd","mark","q","ruby","samp","strong","sub","sup","time","u","var"].forEach(createConfigBuilder({content:TYPE_PHRASING,type:TYPE_FLOW|TYPE_PHRASING|TYPE_PALPABLE}));["p","pre"].forEach(createConfigBuilder({content:TYPE_PHRASING,type:TYPE_FLOW|TYPE_PALPABLE}));["s","small","span","del","ins"].forEach(createConfigBuilder({content:TYPE_PHRASING,type:TYPE_FLOW|TYPE_PHRASING}));["article","aside","footer","header","nav","section","blockquote"].forEach(createConfigBuilder({content:TYPE_FLOW,type:TYPE_FLOW|TYPE_SECTION|TYPE_PALPABLE}));["h1","h2","h3","h4","h5","h6"].forEach(createConfigBuilder({content:TYPE_PHRASING,type:TYPE_FLOW|TYPE_HEADING|TYPE_PALPABLE}));["audio","canvas","iframe","img","video"].forEach(createConfigBuilder({type:TYPE_FLOW|TYPE_PHRASING|TYPE_EMBEDDED|TYPE_PALPABLE}));const TAGS=Object.freeze(tagConfigs),BANNED_TAG_LIST=["applet","base","body","command","embed","frame","frameset","head","html","link","meta","noscript","object","script","style","title"],ALLOWED_TAG_LIST=Object.keys(TAGS).filter($=>$!=="canvas"&&$!=="iframe"),FILTER_ALLOW=1,FILTER_DENY=2,FILTER_CAST_NUMBER=3,FILTER_CAST_BOOL=4,FILTER_NO_CAST=5,ATTRIBUTES=Object.freeze({alt:FILTER_ALLOW,cite:FILTER_ALLOW,class:FILTER_ALLOW,colspan:FILTER_CAST_NUMBER,controls:FILTER_CAST_BOOL,datetime:FILTER_ALLOW,default:FILTER_CAST_BOOL,disabled:FILTER_CAST_BOOL,dir:FILTER_ALLOW,height:FILTER_ALLOW,href:FILTER_ALLOW,id:FILTER_ALLOW,kind:FILTER_ALLOW,label:FILTER_ALLOW,lang:FILTER_ALLOW,loading:FILTER_ALLOW,loop:FILTER_CAST_BOOL,media:FILTER_ALLOW,muted:FILTER_CAST_BOOL,poster:FILTER_ALLOW,rel:FILTER_ALLOW,role:FILTER_ALLOW,rowspan:FILTER_CAST_NUMBER,scope:FILTER_ALLOW,sizes:FILTER_ALLOW,span:FILTER_CAST_NUMBER,start:FILTER_CAST_NUMBER,style:FILTER_NO_CAST,src:FILTER_ALLOW,srclang:FILTER_ALLOW,srcset:FILTER_ALLOW,tabindex:FILTER_ALLOW,target:FILTER_ALLOW,title:FILTER_ALLOW,type:FILTER_ALLOW,width:FILTER_ALLOW}),ATTRIBUTES_TO_PROPS=Object.freeze({class:"className",colspan:"colSpan",datetime:"dateTime",rowspan:"rowSpan",srclang:"srcLang",srcset:"srcSet",tabindex:"tabIndex"});function isHtmlElement($){return $.nodeType===1}function isTextNode($){return $.nodeType===3}const ALLOWED_ATTRS=/^(aria-|data-|\w+:)/iu,domParser=new DOMParser;class HtmlParser{constructor(j={}){this.allowed=new Set(j.allowList??ALLOWED_TAG_LIST),this.banned=new Set(BANNED_TAG_LIST),this.blocked=new Set(j.blockList),this.transform=j.transform}parse(j,_e=!0){if(!j)return[];const et=domParser.parseFromString(_e?this.convertLineBreaks(j):j,"text/html");return et.body?this.parseNode(et.body,this.getTagConfig(et.body.nodeName.toLowerCase())):[]}parseNode(j,_e){const et=[];let tt=[],nt=0;for(const rt of j.childNodes)if(isHtmlElement(rt)){const ot=rt.nodeName.toLowerCase(),it=this.getTagConfig(ot);tt.length>0&&(et.push(tt.join("")),tt=[]);let at;if(this.transform){at=this.parseNode(rt,it);const dt=this.transform(rt,at,it);if(dt===null)continue;if(typeof dt<"u"){nt++,et.push(React$1.cloneElement(dt,{key:nt}));continue}}if(this.banned.has(ot))continue;if(this.isTagAllowed(ot)&&this.canRenderChild(_e,it)){const dt=this.extractAttributes(rt),st={tagName:ot};dt&&(st.attributes=dt),it.void&&(st.selfClose=it.void),++nt,et.push(React$1.createElement(Element$2,{...st,key:nt},at??this.parseNode(rt,it)))}else et.push(...this.parseNode(rt,it.tagName?it:_e))}else if(isTextNode(rt)){const ot=rt.textContent;ot&&tt.push(ot)}return tt.length>0&&et.push(tt.join("")),et}getTagConfig(j){const _e={children:[],content:0,invalid:[],parent:[],self:!0,tagName:"",type:0,void:!1};return TAGS[j]?{..._e,...TAGS[j],tagName:j}:_e}convertLineBreaks(j){if(j.match(/<((?:\/[ a-z]+)|(?:[ a-z]+\/))>/gi))return j;let _e=j.replace(/\r\n/g,`
`);return _e=_e.replace(/\n{3,}/g,`


`),_e=_e.replace(/\n/g,"<br/>"),_e}canRenderChild(j,_e){return!j.tagName||!_e.tagName||j.void?!1:j.children.length>0?j.children.includes(_e.tagName):j.invalid.length>0&&j.invalid.includes(_e.tagName)?!1:_e.parent.length>0?_e.parent.includes(j.tagName):!j.self&&j.tagName===_e.tagName?!1:!!(j&&j.content&_e.type)}extractAttributes(j){const _e={};let et=0;if(!isHtmlElement(j)||!j.attributes)return null;for(const tt of j.attributes){const{name:nt,value:rt}=tt,ot=nt.toLowerCase(),it=ATTRIBUTES[ot]||ATTRIBUTES[nt];if(!this.isSafe(j)||!ot.match(ALLOWED_ATTRS)&&(!it||it===FILTER_DENY||ot.startsWith("on")||rt.replace(/(\s|\0|&#x0([9AD]);)/,"").match(/(javascript|vbscript|livescript|xss):/i)))continue;let at=ot==="style"?this.extractStyleAttribute(j):rt;it===FILTER_CAST_BOOL?at=!0:it===FILTER_CAST_NUMBER?at=Number.parseFloat(String(at)):it!==FILTER_NO_CAST&&(at=String(at)),_e[ATTRIBUTES_TO_PROPS[ot]||ot]=at,et+=1}return et===0?null:_e}extractStyleAttribute(j){const _e={};return Array.from(j.style).forEach(et=>{const tt=j.style[et];(typeof tt=="string"||typeof tt=="number")&&(_e[et.replace(/-([a-z])/g,(nt,rt)=>String(rt).toUpperCase())]=tt)}),_e}isSafe(j){if(typeof HTMLAnchorElement<"u"&&j instanceof HTMLAnchorElement){const _e=j.getAttribute("href");if(_e!=null&&_e.startsWith("#"))return!0;const et=j.protocol.toLowerCase();return et===":"||et==="http:"||et==="https:"||et==="mailto:"||et==="tel:"}return!0}isTagAllowed(j){return!(this.banned.has(j)||this.blocked.has(j))}}const actionContext=reactExports.createContext({action:{name:[],image:""},index:-1}),QspActions=({attrs:$,children:j})=>{const[_e,et,tt]=useAttributes($,"qsp-actions");return useAtom_2(isActsVisible$)?jsxRuntimeExports.jsx(_e,{style:et,...tt,children:j}):null},QspActionsList=({attrs:$,children:j})=>{const _e=useAtom_2(actionsWithParsedName$),[et,tt,nt]=useAttributes($,"qsp-actions-list");return jsxRuntimeExports.jsx(et,{style:tt,...nt,children:_e.map((rt,ot)=>jsxRuntimeExports.jsx(actionContext.Provider,{value:{action:rt,index:ot},children:React$1.Children.map(j,it=>React$1.cloneElement(it))},rt.key))})},QspActionItem=({attrs:$,children:j})=>{const _e=useAtom_2(selectedAction$),{action:et,index:tt}=reactExports.useContext(actionContext),[nt,rt,{useFormat:ot,...it}]=useAttributes($,"qsp-action"),at={...rt,"--action-image":et.image?`url("${et.image}")`:""},dt=()=>{selectAction(tt)},st=()=>{selectAction(-1)},ut=pt=>{pt.preventDefault(),selectedAction$.value<0&&selectAction(tt),execSelectedAction()},ft=_e===tt;return jsxRuntimeExports.jsx(nt,{...it,style:at,"data-qsp-selected":ft?"":null,onMouseOver:dt,onMouseLeave:st,onClick:ut,children:j})},QspActionName=({attrs:$})=>{const[j,_e,et]=useAttributes($,"qsp-action-name"),{action:tt}=reactExports.useContext(actionContext);return jsxRuntimeExports.jsx(j,{...et,style:_e,children:jsxRuntimeExports.jsx(Markup,{content:tt.name})})},QspActionImage=({attrs:$})=>{const{action:j}=reactExports.useContext(actionContext),[,_e,et]=useAttributes($,"img","qsp-action-image");return j.image?jsxRuntimeExports.jsx("img",{alt:"",style:_e,...et,src:j.image}):null},QspActionIndex=({attrs:$})=>{const[j,_e,et]=useAttributes($,"qsp-action-index"),{index:tt}=reactExports.useContext(actionContext);return jsxRuntimeExports.jsx(j,{...et,style:_e,children:tt+1})};function composeEventHandlers($,j,{checkForDefaultPrevented:_e=!0}={}){return function(tt){if($==null||$(tt),_e===!1||!tt.defaultPrevented)return j==null?void 0:j(tt)}}function setRef($,j){typeof $=="function"?$(j):$!=null&&($.current=j)}function composeRefs(...$){return j=>$.forEach(_e=>setRef(_e,j))}function useComposedRefs(...$){return reactExports.useCallback(composeRefs(...$),$)}function createContext2($,j){const _e=reactExports.createContext(j);function et(nt){const{children:rt,...ot}=nt,it=reactExports.useMemo(()=>ot,Object.values(ot));return jsxRuntimeExports.jsx(_e.Provider,{value:it,children:rt})}function tt(nt){const rt=reactExports.useContext(_e);if(rt)return rt;if(j!==void 0)return j;throw new Error(`\`${nt}\` must be used within \`${$}\``)}return et.displayName=$+"Provider",[et,tt]}function createContextScope($,j=[]){let _e=[];function et(nt,rt){const ot=reactExports.createContext(rt),it=_e.length;_e=[..._e,rt];function at(st){const{scope:ut,children:ft,...pt}=st,gt=(ut==null?void 0:ut[$][it])||ot,yt=reactExports.useMemo(()=>pt,Object.values(pt));return jsxRuntimeExports.jsx(gt.Provider,{value:yt,children:ft})}function dt(st,ut){const ft=(ut==null?void 0:ut[$][it])||ot,pt=reactExports.useContext(ft);if(pt)return pt;if(rt!==void 0)return rt;throw new Error(`\`${st}\` must be used within \`${nt}\``)}return at.displayName=nt+"Provider",[at,dt]}const tt=()=>{const nt=_e.map(rt=>reactExports.createContext(rt));return function(ot){const it=(ot==null?void 0:ot[$])||nt;return reactExports.useMemo(()=>({[`__scope${$}`]:{...ot,[$]:it}}),[ot,it])}};return tt.scopeName=$,[et,composeContextScopes(tt,...j)]}function composeContextScopes(...$){const j=$[0];if($.length===1)return j;const _e=()=>{const et=$.map(tt=>({useScope:tt(),scopeName:tt.scopeName}));return function(nt){const rt=et.reduce((ot,{useScope:it,scopeName:at})=>{const st=it(nt)[`__scope${at}`];return{...ot,...st}},{});return reactExports.useMemo(()=>({[`__scope${j.scopeName}`]:rt}),[rt])}};return _e.scopeName=j.scopeName,_e}var useLayoutEffect2=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{},useReactId=React$2.useId||(()=>{}),count$1=0;function useId($){const[j,_e]=reactExports.useState(useReactId());return useLayoutEffect2(()=>{$||_e(et=>et??String(count$1++))},[$]),$||(j?`radix-${j}`:"")}function useCallbackRef$1($){const j=reactExports.useRef($);return reactExports.useEffect(()=>{j.current=$}),reactExports.useMemo(()=>(..._e)=>{var et;return(et=j.current)==null?void 0:et.call(j,..._e)},[])}function useControllableState({prop:$,defaultProp:j,onChange:_e=()=>{}}){const[et,tt]=useUncontrolledState({defaultProp:j,onChange:_e}),nt=$!==void 0,rt=nt?$:et,ot=useCallbackRef$1(_e),it=reactExports.useCallback(at=>{if(nt){const st=typeof at=="function"?at($):at;st!==$&&ot(st)}else tt(at)},[nt,$,tt,ot]);return[rt,it]}function useUncontrolledState({defaultProp:$,onChange:j}){const _e=reactExports.useState($),[et]=_e,tt=reactExports.useRef(et),nt=useCallbackRef$1(j);return reactExports.useEffect(()=>{tt.current!==et&&(nt(et),tt.current=et)},[et,tt,nt]),_e}var Slot=reactExports.forwardRef(($,j)=>{const{children:_e,...et}=$,tt=reactExports.Children.toArray(_e),nt=tt.find(isSlottable);if(nt){const rt=nt.props.children,ot=tt.map(it=>it===nt?reactExports.Children.count(rt)>1?reactExports.Children.only(null):reactExports.isValidElement(rt)?rt.props.children:null:it);return jsxRuntimeExports.jsx(SlotClone,{...et,ref:j,children:reactExports.isValidElement(rt)?reactExports.cloneElement(rt,void 0,ot):null})}return jsxRuntimeExports.jsx(SlotClone,{...et,ref:j,children:_e})});Slot.displayName="Slot";var SlotClone=reactExports.forwardRef(($,j)=>{const{children:_e,...et}=$;if(reactExports.isValidElement(_e)){const tt=getElementRef$1(_e);return reactExports.cloneElement(_e,{...mergeProps(et,_e.props),ref:j?composeRefs(j,tt):tt})}return reactExports.Children.count(_e)>1?reactExports.Children.only(null):null});SlotClone.displayName="SlotClone";var Slottable=({children:$})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:$});function isSlottable($){return reactExports.isValidElement($)&&$.type===Slottable}function mergeProps($,j){const _e={...j};for(const et in j){const tt=$[et],nt=j[et];/^on[A-Z]/.test(et)?tt&&nt?_e[et]=(...ot)=>{nt(...ot),tt(...ot)}:tt&&(_e[et]=tt):et==="style"?_e[et]={...tt,...nt}:et==="className"&&(_e[et]=[tt,nt].filter(Boolean).join(" "))}return{...$,..._e}}function getElementRef$1($){var et,tt;let j=(et=Object.getOwnPropertyDescriptor($.props,"ref"))==null?void 0:et.get,_e=j&&"isReactWarning"in j&&j.isReactWarning;return _e?$.ref:(j=(tt=Object.getOwnPropertyDescriptor($,"ref"))==null?void 0:tt.get,_e=j&&"isReactWarning"in j&&j.isReactWarning,_e?$.props.ref:$.props.ref||$.ref)}var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Primitive=NODES.reduce(($,j)=>{const _e=reactExports.forwardRef((et,tt)=>{const{asChild:nt,...rt}=et,ot=nt?Slot:j;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(ot,{...rt,ref:tt})});return _e.displayName=`Primitive.${j}`,{...$,[j]:_e}},{});function dispatchDiscreteCustomEvent($,j){$&&reactDomExports.flushSync(()=>$.dispatchEvent(j))}function useEscapeKeydown($,j=globalThis==null?void 0:globalThis.document){const _e=useCallbackRef$1($);reactExports.useEffect(()=>{const et=tt=>{tt.key==="Escape"&&_e(tt)};return j.addEventListener("keydown",et,{capture:!0}),()=>j.removeEventListener("keydown",et,{capture:!0})},[_e,j])}var DISMISSABLE_LAYER_NAME="DismissableLayer",CONTEXT_UPDATE="dismissableLayer.update",POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",FOCUS_OUTSIDE="dismissableLayer.focusOutside",originalBodyPointerEvents,DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DismissableLayer=reactExports.forwardRef(($,j)=>{const{disableOutsidePointerEvents:_e=!1,onEscapeKeyDown:et,onPointerDownOutside:tt,onFocusOutside:nt,onInteractOutside:rt,onDismiss:ot,...it}=$,at=reactExports.useContext(DismissableLayerContext),[dt,st]=reactExports.useState(null),ut=(dt==null?void 0:dt.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,ft]=reactExports.useState({}),pt=useComposedRefs(j,bt=>st(bt)),gt=Array.from(at.layers),[yt]=[...at.layersWithOutsidePointerEventsDisabled].slice(-1),mt=gt.indexOf(yt),vt=dt?gt.indexOf(dt):-1,_t=at.layersWithOutsidePointerEventsDisabled.size>0,St=vt>=mt,At=usePointerDownOutside(bt=>{const Rt=bt.target,Ot=[...at.branches].some(Ut=>Ut.contains(Rt));!St||Ot||(tt==null||tt(bt),rt==null||rt(bt),bt.defaultPrevented||ot==null||ot())},ut),kt=useFocusOutside(bt=>{const Rt=bt.target;[...at.branches].some(Ut=>Ut.contains(Rt))||(nt==null||nt(bt),rt==null||rt(bt),bt.defaultPrevented||ot==null||ot())},ut);return useEscapeKeydown(bt=>{vt===at.layers.size-1&&(et==null||et(bt),!bt.defaultPrevented&&ot&&(bt.preventDefault(),ot()))},ut),reactExports.useEffect(()=>{if(dt)return _e&&(at.layersWithOutsidePointerEventsDisabled.size===0&&(originalBodyPointerEvents=ut.body.style.pointerEvents,ut.body.style.pointerEvents="none"),at.layersWithOutsidePointerEventsDisabled.add(dt)),at.layers.add(dt),dispatchUpdate(),()=>{_e&&at.layersWithOutsidePointerEventsDisabled.size===1&&(ut.body.style.pointerEvents=originalBodyPointerEvents)}},[dt,ut,_e,at]),reactExports.useEffect(()=>()=>{dt&&(at.layers.delete(dt),at.layersWithOutsidePointerEventsDisabled.delete(dt),dispatchUpdate())},[dt,at]),reactExports.useEffect(()=>{const bt=()=>ft({});return document.addEventListener(CONTEXT_UPDATE,bt),()=>document.removeEventListener(CONTEXT_UPDATE,bt)},[]),jsxRuntimeExports.jsx(Primitive.div,{...it,ref:pt,style:{pointerEvents:_t?St?"auto":"none":void 0,...$.style},onFocusCapture:composeEventHandlers($.onFocusCapture,kt.onFocusCapture),onBlurCapture:composeEventHandlers($.onBlurCapture,kt.onBlurCapture),onPointerDownCapture:composeEventHandlers($.onPointerDownCapture,At.onPointerDownCapture)})});DismissableLayer.displayName=DISMISSABLE_LAYER_NAME;var BRANCH_NAME="DismissableLayerBranch",DismissableLayerBranch=reactExports.forwardRef(($,j)=>{const _e=reactExports.useContext(DismissableLayerContext),et=reactExports.useRef(null),tt=useComposedRefs(j,et);return reactExports.useEffect(()=>{const nt=et.current;if(nt)return _e.branches.add(nt),()=>{_e.branches.delete(nt)}},[_e.branches]),jsxRuntimeExports.jsx(Primitive.div,{...$,ref:tt})});DismissableLayerBranch.displayName=BRANCH_NAME;function usePointerDownOutside($,j=globalThis==null?void 0:globalThis.document){const _e=useCallbackRef$1($),et=reactExports.useRef(!1),tt=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const nt=ot=>{if(ot.target&&!et.current){let it=function(){handleAndDispatchCustomEvent$1(POINTER_DOWN_OUTSIDE,_e,at,{discrete:!0})};const at={originalEvent:ot};ot.pointerType==="touch"?(j.removeEventListener("click",tt.current),tt.current=it,j.addEventListener("click",tt.current,{once:!0})):it()}else j.removeEventListener("click",tt.current);et.current=!1},rt=window.setTimeout(()=>{j.addEventListener("pointerdown",nt)},0);return()=>{window.clearTimeout(rt),j.removeEventListener("pointerdown",nt),j.removeEventListener("click",tt.current)}},[j,_e]),{onPointerDownCapture:()=>et.current=!0}}function useFocusOutside($,j=globalThis==null?void 0:globalThis.document){const _e=useCallbackRef$1($),et=reactExports.useRef(!1);return reactExports.useEffect(()=>{const tt=nt=>{nt.target&&!et.current&&handleAndDispatchCustomEvent$1(FOCUS_OUTSIDE,_e,{originalEvent:nt},{discrete:!1})};return j.addEventListener("focusin",tt),()=>j.removeEventListener("focusin",tt)},[j,_e]),{onFocusCapture:()=>et.current=!0,onBlurCapture:()=>et.current=!1}}function dispatchUpdate(){const $=new CustomEvent(CONTEXT_UPDATE);document.dispatchEvent($)}function handleAndDispatchCustomEvent$1($,j,_e,{discrete:et}){const tt=_e.originalEvent.target,nt=new CustomEvent($,{bubbles:!1,cancelable:!0,detail:_e});j&&tt.addEventListener($,j,{once:!0}),et?dispatchDiscreteCustomEvent(tt,nt):tt.dispatchEvent(nt)}var Root$7=DismissableLayer,Branch=DismissableLayerBranch,AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",EVENT_OPTIONS$1={bubbles:!1,cancelable:!0},FOCUS_SCOPE_NAME="FocusScope",FocusScope=reactExports.forwardRef(($,j)=>{const{loop:_e=!1,trapped:et=!1,onMountAutoFocus:tt,onUnmountAutoFocus:nt,...rt}=$,[ot,it]=reactExports.useState(null),at=useCallbackRef$1(tt),dt=useCallbackRef$1(nt),st=reactExports.useRef(null),ut=useComposedRefs(j,gt=>it(gt)),ft=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(et){let gt=function(_t){if(ft.paused||!ot)return;const St=_t.target;ot.contains(St)?st.current=St:focus(st.current,{select:!0})},yt=function(_t){if(ft.paused||!ot)return;const St=_t.relatedTarget;St!==null&&(ot.contains(St)||focus(st.current,{select:!0}))},mt=function(_t){if(document.activeElement===document.body)for(const At of _t)At.removedNodes.length>0&&focus(ot)};document.addEventListener("focusin",gt),document.addEventListener("focusout",yt);const vt=new MutationObserver(mt);return ot&&vt.observe(ot,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",gt),document.removeEventListener("focusout",yt),vt.disconnect()}}},[et,ot,ft.paused]),reactExports.useEffect(()=>{if(ot){focusScopesStack.add(ft);const gt=document.activeElement;if(!ot.contains(gt)){const mt=new CustomEvent(AUTOFOCUS_ON_MOUNT,EVENT_OPTIONS$1);ot.addEventListener(AUTOFOCUS_ON_MOUNT,at),ot.dispatchEvent(mt),mt.defaultPrevented||(focusFirst$3(removeLinks(getTabbableCandidates$1(ot)),{select:!0}),document.activeElement===gt&&focus(ot))}return()=>{ot.removeEventListener(AUTOFOCUS_ON_MOUNT,at),setTimeout(()=>{const mt=new CustomEvent(AUTOFOCUS_ON_UNMOUNT,EVENT_OPTIONS$1);ot.addEventListener(AUTOFOCUS_ON_UNMOUNT,dt),ot.dispatchEvent(mt),mt.defaultPrevented||focus(gt??document.body,{select:!0}),ot.removeEventListener(AUTOFOCUS_ON_UNMOUNT,dt),focusScopesStack.remove(ft)},0)}}},[ot,at,dt,ft]);const pt=reactExports.useCallback(gt=>{if(!_e&&!et||ft.paused)return;const yt=gt.key==="Tab"&&!gt.altKey&&!gt.ctrlKey&&!gt.metaKey,mt=document.activeElement;if(yt&&mt){const vt=gt.currentTarget,[_t,St]=getTabbableEdges(vt);_t&&St?!gt.shiftKey&&mt===St?(gt.preventDefault(),_e&&focus(_t,{select:!0})):gt.shiftKey&&mt===_t&&(gt.preventDefault(),_e&&focus(St,{select:!0})):mt===vt&&gt.preventDefault()}},[_e,et,ft.paused]);return jsxRuntimeExports.jsx(Primitive.div,{tabIndex:-1,...rt,ref:ut,onKeyDown:pt})});FocusScope.displayName=FOCUS_SCOPE_NAME;function focusFirst$3($,{select:j=!1}={}){const _e=document.activeElement;for(const et of $)if(focus(et,{select:j}),document.activeElement!==_e)return}function getTabbableEdges($){const j=getTabbableCandidates$1($),_e=findVisible(j,$),et=findVisible(j.reverse(),$);return[_e,et]}function getTabbableCandidates$1($){const j=[],_e=document.createTreeWalker($,NodeFilter.SHOW_ELEMENT,{acceptNode:et=>{const tt=et.tagName==="INPUT"&&et.type==="hidden";return et.disabled||et.hidden||tt?NodeFilter.FILTER_SKIP:et.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;_e.nextNode();)j.push(_e.currentNode);return j}function findVisible($,j){for(const _e of $)if(!isHidden(_e,{upTo:j}))return _e}function isHidden($,{upTo:j}){if(getComputedStyle($).visibility==="hidden")return!0;for(;$;){if(j!==void 0&&$===j)return!1;if(getComputedStyle($).display==="none")return!0;$=$.parentElement}return!1}function isSelectableInput($){return $ instanceof HTMLInputElement&&"select"in $}function focus($,{select:j=!1}={}){if($&&$.focus){const _e=document.activeElement;$.focus({preventScroll:!0}),$!==_e&&isSelectableInput($)&&j&&$.select()}}var focusScopesStack=createFocusScopesStack();function createFocusScopesStack(){let $=[];return{add(j){const _e=$[0];j!==_e&&(_e==null||_e.pause()),$=arrayRemove($,j),$.unshift(j)},remove(j){var _e;$=arrayRemove($,j),(_e=$[0])==null||_e.resume()}}}function arrayRemove($,j){const _e=[...$],et=_e.indexOf(j);return et!==-1&&_e.splice(et,1),_e}function removeLinks($){return $.filter(j=>j.tagName!=="A")}var PORTAL_NAME$6="Portal",Portal$4=reactExports.forwardRef(($,j)=>{var ot;const{container:_e,...et}=$,[tt,nt]=reactExports.useState(!1);useLayoutEffect2(()=>nt(!0),[]);const rt=_e||tt&&((ot=globalThis==null?void 0:globalThis.document)==null?void 0:ot.body);return rt?ReactDOM.createPortal(jsxRuntimeExports.jsx(Primitive.div,{...et,ref:j}),rt):null});Portal$4.displayName=PORTAL_NAME$6;function useStateMachine$1($,j){return reactExports.useReducer((_e,et)=>j[_e][et]??_e,$)}var Presence=$=>{const{present:j,children:_e}=$,et=usePresence(j),tt=typeof _e=="function"?_e({present:et.isPresent}):reactExports.Children.only(_e),nt=useComposedRefs(et.ref,getElementRef(tt));return typeof _e=="function"||et.isPresent?reactExports.cloneElement(tt,{ref:nt}):null};Presence.displayName="Presence";function usePresence($){const[j,_e]=reactExports.useState(),et=reactExports.useRef({}),tt=reactExports.useRef($),nt=reactExports.useRef("none"),rt=$?"mounted":"unmounted",[ot,it]=useStateMachine$1(rt,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const at=getAnimationName(et.current);nt.current=ot==="mounted"?at:"none"},[ot]),useLayoutEffect2(()=>{const at=et.current,dt=tt.current;if(dt!==$){const ut=nt.current,ft=getAnimationName(at);$?it("MOUNT"):ft==="none"||(at==null?void 0:at.display)==="none"?it("UNMOUNT"):it(dt&&ut!==ft?"ANIMATION_OUT":"UNMOUNT"),tt.current=$}},[$,it]),useLayoutEffect2(()=>{if(j){const at=st=>{const ft=getAnimationName(et.current).includes(st.animationName);st.target===j&&ft&&reactDomExports.flushSync(()=>it("ANIMATION_END"))},dt=st=>{st.target===j&&(nt.current=getAnimationName(et.current))};return j.addEventListener("animationstart",dt),j.addEventListener("animationcancel",at),j.addEventListener("animationend",at),()=>{j.removeEventListener("animationstart",dt),j.removeEventListener("animationcancel",at),j.removeEventListener("animationend",at)}}else it("ANIMATION_END")},[j,it]),{isPresent:["mounted","unmountSuspended"].includes(ot),ref:reactExports.useCallback(at=>{at&&(et.current=getComputedStyle(at)),_e(at)},[])}}function getAnimationName($){return($==null?void 0:$.animationName)||"none"}function getElementRef($){var et,tt;let j=(et=Object.getOwnPropertyDescriptor($.props,"ref"))==null?void 0:et.get,_e=j&&"isReactWarning"in j&&j.isReactWarning;return _e?$.ref:(j=(tt=Object.getOwnPropertyDescriptor($,"ref"))==null?void 0:tt.get,_e=j&&"isReactWarning"in j&&j.isReactWarning,_e?$.props.ref:$.props.ref||$.ref)}var count=0;function useFocusGuards(){reactExports.useEffect(()=>{const $=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",$[0]??createFocusGuard()),document.body.insertAdjacentElement("beforeend",$[1]??createFocusGuard()),count++,()=>{count===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(j=>j.remove()),count--}},[])}function createFocusGuard(){const $=document.createElement("span");return $.setAttribute("data-radix-focus-guard",""),$.tabIndex=0,$.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",$}var __assign=function(){return __assign=Object.assign||function(j){for(var _e,et=1,tt=arguments.length;et<tt;et++){_e=arguments[et];for(var nt in _e)Object.prototype.hasOwnProperty.call(_e,nt)&&(j[nt]=_e[nt])}return j},__assign.apply(this,arguments)};function __rest($,j){var _e={};for(var et in $)Object.prototype.hasOwnProperty.call($,et)&&j.indexOf(et)<0&&(_e[et]=$[et]);if($!=null&&typeof Object.getOwnPropertySymbols=="function")for(var tt=0,et=Object.getOwnPropertySymbols($);tt<et.length;tt++)j.indexOf(et[tt])<0&&Object.prototype.propertyIsEnumerable.call($,et[tt])&&(_e[et[tt]]=$[et[tt]]);return _e}function __spreadArray($,j,_e){if(_e||arguments.length===2)for(var et=0,tt=j.length,nt;et<tt;et++)(nt||!(et in j))&&(nt||(nt=Array.prototype.slice.call(j,0,et)),nt[et]=j[et]);return $.concat(nt||Array.prototype.slice.call(j))}typeof SuppressedError=="function"&&SuppressedError;var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef($,j){return typeof $=="function"?$(j):$&&($.current=j),$}function useCallbackRef($,j){var _e=reactExports.useState(function(){return{value:$,callback:j,facade:{get current(){return _e.value},set current(et){var tt=_e.value;tt!==et&&(_e.value=et,_e.callback(et,tt))}}}})[0];return _e.callback=j,_e.facade}function useMergeRefs($,j){return useCallbackRef(null,function(_e){return $.forEach(function(et){return assignRef(et,_e)})})}function ItoI($){return $}function innerCreateMedium($,j){j===void 0&&(j=ItoI);var _e=[],et=!1,tt={read:function(){if(et)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return _e.length?_e[_e.length-1]:$},useMedium:function(nt){var rt=j(nt,et);return _e.push(rt),function(){_e=_e.filter(function(ot){return ot!==rt})}},assignSyncMedium:function(nt){for(et=!0;_e.length;){var rt=_e;_e=[],rt.forEach(nt)}_e={push:function(ot){return nt(ot)},filter:function(){return _e}}},assignMedium:function(nt){et=!0;var rt=[];if(_e.length){var ot=_e;_e=[],ot.forEach(nt),rt=_e}var it=function(){var dt=rt;rt=[],dt.forEach(nt)},at=function(){return Promise.resolve().then(it)};at(),_e={push:function(dt){rt.push(dt),at()},filter:function(dt){return rt=rt.filter(dt),_e}}}};return tt}function createSidecarMedium($){$===void 0&&($={});var j=innerCreateMedium(null);return j.options=__assign({async:!0,ssr:!1},$),j}var SideCar$1=function($){var j=$.sideCar,_e=__rest($,["sideCar"]);if(!j)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var et=j.read();if(!et)throw new Error("Sidecar medium not found");return reactExports.createElement(et,__assign({},_e))};SideCar$1.isSideCarExport=!0;function exportSidecar($,j){return $.useMedium(j),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function($,j){var _e=reactExports.useRef(null),et=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),tt=et[0],nt=et[1],rt=$.forwardProps,ot=$.children,it=$.className,at=$.removeScrollBar,dt=$.enabled,st=$.shards,ut=$.sideCar,ft=$.noIsolation,pt=$.inert,gt=$.allowPinchZoom,yt=$.as,mt=yt===void 0?"div":yt,vt=$.gapMode,_t=__rest($,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),St=ut,At=useMergeRefs([_e,j]),kt=__assign(__assign({},_t),tt);return reactExports.createElement(reactExports.Fragment,null,dt&&reactExports.createElement(St,{sideCar:effectCar,removeScrollBar:at,shards:st,noIsolation:ft,inert:pt,setCallbacks:nt,allowPinchZoom:!!gt,lockRef:_e,gapMode:vt}),rt?reactExports.cloneElement(reactExports.Children.only(ot),__assign(__assign({},kt),{ref:At})):reactExports.createElement(mt,__assign({},kt,{className:it,ref:At}),ot))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var $=document.createElement("style");$.type="text/css";var j=getNonce();return j&&$.setAttribute("nonce",j),$}function injectStyles($,j){$.styleSheet?$.styleSheet.cssText=j:$.appendChild(document.createTextNode(j))}function insertStyleTag($){var j=document.head||document.getElementsByTagName("head")[0];j.appendChild($)}var stylesheetSingleton=function(){var $=0,j=null;return{add:function(_e){$==0&&(j=makeStyleTag())&&(injectStyles(j,_e),insertStyleTag(j)),$++},remove:function(){$--,!$&&j&&(j.parentNode&&j.parentNode.removeChild(j),j=null)}}},styleHookSingleton=function(){var $=stylesheetSingleton();return function(j,_e){reactExports.useEffect(function(){return $.add(j),function(){$.remove()}},[j&&_e])}},styleSingleton=function(){var $=styleHookSingleton(),j=function(_e){var et=_e.styles,tt=_e.dynamic;return $(et,tt),null};return j},zeroGap={left:0,top:0,right:0,gap:0},parse=function($){return parseInt($||"",10)||0},getOffset=function($){var j=window.getComputedStyle(document.body),_e=j[$==="padding"?"paddingLeft":"marginLeft"],et=j[$==="padding"?"paddingTop":"marginTop"],tt=j[$==="padding"?"paddingRight":"marginRight"];return[parse(_e),parse(et),parse(tt)]},getGapWidth=function($){if($===void 0&&($="margin"),typeof window>"u")return zeroGap;var j=getOffset($),_e=document.documentElement.clientWidth,et=window.innerWidth;return{left:j[0],top:j[1],right:j[2],gap:Math.max(0,et-_e+j[2]-j[0])}},Style=styleSingleton(),getStyles=function($,j,_e,et){var tt=$.left,nt=$.top,rt=$.right,ot=$.gap;return _e===void 0&&(_e="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(et,`;
   padding-right: `).concat(ot,"px ").concat(et,`;
  }
  body {
    overflow: hidden `).concat(et,`;
    overscroll-behavior: contain;
    `).concat([j&&"position: relative ".concat(et,";"),_e==="margin"&&`
    padding-left: `.concat(tt,`px;
    padding-top: `).concat(nt,`px;
    padding-right: `).concat(rt,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(ot,"px ").concat(et,`;
    `),_e==="padding"&&"padding-right: ".concat(ot,"px ").concat(et,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(ot,"px ").concat(et,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(ot,"px ").concat(et,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(et,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(et,`;
  }
  
  body {
    `).concat(removedBarSizeVariable,": ").concat(ot,`px;
  }
`)},RemoveScrollBar=function($){var j=$.noRelative,_e=$.noImportant,et=$.gapMode,tt=et===void 0?"margin":et,nt=reactExports.useMemo(function(){return getGapWidth(tt)},[tt]);return reactExports.createElement(Style,{styles:getStyles(nt,!j,tt,_e?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function($){return $.tagName==="TEXTAREA"},elementCanBeScrolled=function($,j){var _e=window.getComputedStyle($);return _e[j]!=="hidden"&&!(_e.overflowY===_e.overflowX&&!alwaysContainsScroll($)&&_e[j]==="visible")},elementCouldBeVScrolled=function($){return elementCanBeScrolled($,"overflowY")},elementCouldBeHScrolled=function($){return elementCanBeScrolled($,"overflowX")},locationCouldBeScrolled=function($,j){var _e=j.ownerDocument,et=j;do{typeof ShadowRoot<"u"&&et instanceof ShadowRoot&&(et=et.host);var tt=elementCouldBeScrolled($,et);if(tt){var nt=getScrollVariables($,et),rt=nt[1],ot=nt[2];if(rt>ot)return!0}et=et.parentNode}while(et&&et!==_e.body);return!1},getVScrollVariables=function($){var j=$.scrollTop,_e=$.scrollHeight,et=$.clientHeight;return[j,_e,et]},getHScrollVariables=function($){var j=$.scrollLeft,_e=$.scrollWidth,et=$.clientWidth;return[j,_e,et]},elementCouldBeScrolled=function($,j){return $==="v"?elementCouldBeVScrolled(j):elementCouldBeHScrolled(j)},getScrollVariables=function($,j){return $==="v"?getVScrollVariables(j):getHScrollVariables(j)},getDirectionFactor=function($,j){return $==="h"&&j==="rtl"?-1:1},handleScroll=function($,j,_e,et,tt){var nt=getDirectionFactor($,window.getComputedStyle(j).direction),rt=nt*et,ot=_e.target,it=j.contains(ot),at=!1,dt=rt>0,st=0,ut=0;do{var ft=getScrollVariables($,ot),pt=ft[0],gt=ft[1],yt=ft[2],mt=gt-yt-nt*pt;(pt||mt)&&elementCouldBeScrolled($,ot)&&(st+=mt,ut+=pt),ot instanceof ShadowRoot?ot=ot.host:ot=ot.parentNode}while(!it&&ot!==document.body||it&&(j.contains(ot)||j===ot));return(dt&&(Math.abs(st)<1||!tt)||!dt&&(Math.abs(ut)<1||!tt))&&(at=!0),at},getTouchXY=function($){return"changedTouches"in $?[$.changedTouches[0].clientX,$.changedTouches[0].clientY]:[0,0]},getDeltaXY=function($){return[$.deltaX,$.deltaY]},extractRef=function($){return $&&"current"in $?$.current:$},deltaCompare=function($,j){return $[0]===j[0]&&$[1]===j[1]},generateStyle=function($){return`
  .block-interactivity-`.concat($,` {pointer-events: none;}
  .allow-interactivity-`).concat($,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar($){var j=reactExports.useRef([]),_e=reactExports.useRef([0,0]),et=reactExports.useRef(),tt=reactExports.useState(idCounter++)[0],nt=reactExports.useState(styleSingleton)[0],rt=reactExports.useRef($);reactExports.useEffect(function(){rt.current=$},[$]),reactExports.useEffect(function(){if($.inert){document.body.classList.add("block-interactivity-".concat(tt));var gt=__spreadArray([$.lockRef.current],($.shards||[]).map(extractRef),!0).filter(Boolean);return gt.forEach(function(yt){return yt.classList.add("allow-interactivity-".concat(tt))}),function(){document.body.classList.remove("block-interactivity-".concat(tt)),gt.forEach(function(yt){return yt.classList.remove("allow-interactivity-".concat(tt))})}}},[$.inert,$.lockRef.current,$.shards]);var ot=reactExports.useCallback(function(gt,yt){if("touches"in gt&&gt.touches.length===2)return!rt.current.allowPinchZoom;var mt=getTouchXY(gt),vt=_e.current,_t="deltaX"in gt?gt.deltaX:vt[0]-mt[0],St="deltaY"in gt?gt.deltaY:vt[1]-mt[1],At,kt=gt.target,bt=Math.abs(_t)>Math.abs(St)?"h":"v";if("touches"in gt&&bt==="h"&&kt.type==="range")return!1;var Rt=locationCouldBeScrolled(bt,kt);if(!Rt)return!0;if(Rt?At=bt:(At=bt==="v"?"h":"v",Rt=locationCouldBeScrolled(bt,kt)),!Rt)return!1;if(!et.current&&"changedTouches"in gt&&(_t||St)&&(et.current=At),!At)return!0;var Ot=et.current||At;return handleScroll(Ot,yt,gt,Ot==="h"?_t:St,!0)},[]),it=reactExports.useCallback(function(gt){var yt=gt;if(!(!lockStack.length||lockStack[lockStack.length-1]!==nt)){var mt="deltaY"in yt?getDeltaXY(yt):getTouchXY(yt),vt=j.current.filter(function(At){return At.name===yt.type&&(At.target===yt.target||yt.target===At.shadowParent)&&deltaCompare(At.delta,mt)})[0];if(vt&&vt.should){yt.cancelable&&yt.preventDefault();return}if(!vt){var _t=(rt.current.shards||[]).map(extractRef).filter(Boolean).filter(function(At){return At.contains(yt.target)}),St=_t.length>0?ot(yt,_t[0]):!rt.current.noIsolation;St&&yt.cancelable&&yt.preventDefault()}}},[]),at=reactExports.useCallback(function(gt,yt,mt,vt){var _t={name:gt,delta:yt,target:mt,should:vt,shadowParent:getOutermostShadowParent(mt)};j.current.push(_t),setTimeout(function(){j.current=j.current.filter(function(St){return St!==_t})},1)},[]),dt=reactExports.useCallback(function(gt){_e.current=getTouchXY(gt),et.current=void 0},[]),st=reactExports.useCallback(function(gt){at(gt.type,getDeltaXY(gt),gt.target,ot(gt,$.lockRef.current))},[]),ut=reactExports.useCallback(function(gt){at(gt.type,getTouchXY(gt),gt.target,ot(gt,$.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(nt),$.setCallbacks({onScrollCapture:st,onWheelCapture:st,onTouchMoveCapture:ut}),document.addEventListener("wheel",it,nonPassive),document.addEventListener("touchmove",it,nonPassive),document.addEventListener("touchstart",dt,nonPassive),function(){lockStack=lockStack.filter(function(gt){return gt!==nt}),document.removeEventListener("wheel",it,nonPassive),document.removeEventListener("touchmove",it,nonPassive),document.removeEventListener("touchstart",dt,nonPassive)}},[]);var ft=$.removeScrollBar,pt=$.inert;return reactExports.createElement(reactExports.Fragment,null,pt?reactExports.createElement(nt,{styles:generateStyle(tt)}):null,ft?reactExports.createElement(RemoveScrollBar,{gapMode:$.gapMode}):null)}function getOutermostShadowParent($){for(var j=null;$!==null;)$ instanceof ShadowRoot&&(j=$.host,$=$.host),$=$.parentNode;return j}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function($,j){return reactExports.createElement(RemoveScroll,__assign({},$,{ref:j,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;var getDefaultParent=function($){if(typeof document>"u")return null;var j=Array.isArray($)?$[0]:$;return j.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function($){return $&&($.host||unwrapHost($.parentNode))},correctTargets=function($,j){return j.map(function(_e){if($.contains(_e))return _e;var et=unwrapHost(_e);return et&&$.contains(et)?et:(console.error("aria-hidden",_e,"in not contained inside",$,". Doing nothing"),null)}).filter(function(_e){return!!_e})},applyAttributeToOthers=function($,j,_e,et){var tt=correctTargets(j,Array.isArray($)?$:[$]);markerMap[_e]||(markerMap[_e]=new WeakMap);var nt=markerMap[_e],rt=[],ot=new Set,it=new Set(tt),at=function(st){!st||ot.has(st)||(ot.add(st),at(st.parentNode))};tt.forEach(at);var dt=function(st){!st||it.has(st)||Array.prototype.forEach.call(st.children,function(ut){if(ot.has(ut))dt(ut);else{var ft=ut.getAttribute(et),pt=ft!==null&&ft!=="false",gt=(counterMap.get(ut)||0)+1,yt=(nt.get(ut)||0)+1;counterMap.set(ut,gt),nt.set(ut,yt),rt.push(ut),gt===1&&pt&&uncontrolledNodes.set(ut,!0),yt===1&&ut.setAttribute(_e,"true"),pt||ut.setAttribute(et,"true")}})};return dt(j),ot.clear(),lockCount++,function(){rt.forEach(function(st){var ut=counterMap.get(st)-1,ft=nt.get(st)-1;counterMap.set(st,ut),nt.set(st,ft),ut||(uncontrolledNodes.has(st)||st.removeAttribute(et),uncontrolledNodes.delete(st)),ft||st.removeAttribute(_e)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function($,j,_e){_e===void 0&&(_e="data-aria-hidden");var et=Array.from(Array.isArray($)?$:[$]),tt=getDefaultParent($);return tt?(et.push.apply(et,Array.from(tt.querySelectorAll("[aria-live]"))),applyAttributeToOthers(et,tt,_e,"aria-hidden")):function(){return null}},DIALOG_NAME="Dialog",[createDialogContext,createDialogScope]=createContextScope(DIALOG_NAME),[DialogProvider,useDialogContext]=createDialogContext(DIALOG_NAME),Dialog=$=>{const{__scopeDialog:j,children:_e,open:et,defaultOpen:tt,onOpenChange:nt,modal:rt=!0}=$,ot=reactExports.useRef(null),it=reactExports.useRef(null),[at=!1,dt]=useControllableState({prop:et,defaultProp:tt,onChange:nt});return jsxRuntimeExports.jsx(DialogProvider,{scope:j,triggerRef:ot,contentRef:it,contentId:useId(),titleId:useId(),descriptionId:useId(),open:at,onOpenChange:dt,onOpenToggle:reactExports.useCallback(()=>dt(st=>!st),[dt]),modal:rt,children:_e})};Dialog.displayName=DIALOG_NAME;var TRIGGER_NAME$4="DialogTrigger",DialogTrigger=reactExports.forwardRef(($,j)=>{const{__scopeDialog:_e,...et}=$,tt=useDialogContext(TRIGGER_NAME$4,_e),nt=useComposedRefs(j,tt.triggerRef);return jsxRuntimeExports.jsx(Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":tt.open,"aria-controls":tt.contentId,"data-state":getState$1(tt.open),...et,ref:nt,onClick:composeEventHandlers($.onClick,tt.onOpenToggle)})});DialogTrigger.displayName=TRIGGER_NAME$4;var PORTAL_NAME$5="DialogPortal",[PortalProvider$2,usePortalContext$2]=createDialogContext(PORTAL_NAME$5,{forceMount:void 0}),DialogPortal=$=>{const{__scopeDialog:j,forceMount:_e,children:et,container:tt}=$,nt=useDialogContext(PORTAL_NAME$5,j);return jsxRuntimeExports.jsx(PortalProvider$2,{scope:j,forceMount:_e,children:reactExports.Children.map(et,rt=>jsxRuntimeExports.jsx(Presence,{present:_e||nt.open,children:jsxRuntimeExports.jsx(Portal$4,{asChild:!0,container:tt,children:rt})}))})};DialogPortal.displayName=PORTAL_NAME$5;var OVERLAY_NAME$1="DialogOverlay",DialogOverlay=reactExports.forwardRef(($,j)=>{const _e=usePortalContext$2(OVERLAY_NAME$1,$.__scopeDialog),{forceMount:et=_e.forceMount,...tt}=$,nt=useDialogContext(OVERLAY_NAME$1,$.__scopeDialog);return nt.modal?jsxRuntimeExports.jsx(Presence,{present:et||nt.open,children:jsxRuntimeExports.jsx(DialogOverlayImpl,{...tt,ref:j})}):null});DialogOverlay.displayName=OVERLAY_NAME$1;var DialogOverlayImpl=reactExports.forwardRef(($,j)=>{const{__scopeDialog:_e,...et}=$,tt=useDialogContext(OVERLAY_NAME$1,_e);return jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot,allowPinchZoom:!0,shards:[tt.contentRef],children:jsxRuntimeExports.jsx(Primitive.div,{"data-state":getState$1(tt.open),...et,ref:j,style:{pointerEvents:"auto",...et.style}})})}),CONTENT_NAME$6="DialogContent",DialogContent=reactExports.forwardRef(($,j)=>{const _e=usePortalContext$2(CONTENT_NAME$6,$.__scopeDialog),{forceMount:et=_e.forceMount,...tt}=$,nt=useDialogContext(CONTENT_NAME$6,$.__scopeDialog);return jsxRuntimeExports.jsx(Presence,{present:et||nt.open,children:nt.modal?jsxRuntimeExports.jsx(DialogContentModal,{...tt,ref:j}):jsxRuntimeExports.jsx(DialogContentNonModal,{...tt,ref:j})})});DialogContent.displayName=CONTENT_NAME$6;var DialogContentModal=reactExports.forwardRef(($,j)=>{const _e=useDialogContext(CONTENT_NAME$6,$.__scopeDialog),et=reactExports.useRef(null),tt=useComposedRefs(j,_e.contentRef,et);return reactExports.useEffect(()=>{const nt=et.current;if(nt)return hideOthers(nt)},[]),jsxRuntimeExports.jsx(DialogContentImpl,{...$,ref:tt,trapFocus:_e.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:composeEventHandlers($.onCloseAutoFocus,nt=>{var rt;nt.preventDefault(),(rt=_e.triggerRef.current)==null||rt.focus()}),onPointerDownOutside:composeEventHandlers($.onPointerDownOutside,nt=>{const rt=nt.detail.originalEvent,ot=rt.button===0&&rt.ctrlKey===!0;(rt.button===2||ot)&&nt.preventDefault()}),onFocusOutside:composeEventHandlers($.onFocusOutside,nt=>nt.preventDefault())})}),DialogContentNonModal=reactExports.forwardRef(($,j)=>{const _e=useDialogContext(CONTENT_NAME$6,$.__scopeDialog),et=reactExports.useRef(!1),tt=reactExports.useRef(!1);return jsxRuntimeExports.jsx(DialogContentImpl,{...$,ref:j,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:nt=>{var rt,ot;(rt=$.onCloseAutoFocus)==null||rt.call($,nt),nt.defaultPrevented||(et.current||(ot=_e.triggerRef.current)==null||ot.focus(),nt.preventDefault()),et.current=!1,tt.current=!1},onInteractOutside:nt=>{var it,at;(it=$.onInteractOutside)==null||it.call($,nt),nt.defaultPrevented||(et.current=!0,nt.detail.originalEvent.type==="pointerdown"&&(tt.current=!0));const rt=nt.target;((at=_e.triggerRef.current)==null?void 0:at.contains(rt))&&nt.preventDefault(),nt.detail.originalEvent.type==="focusin"&&tt.current&&nt.preventDefault()}})}),DialogContentImpl=reactExports.forwardRef(($,j)=>{const{__scopeDialog:_e,trapFocus:et,onOpenAutoFocus:tt,onCloseAutoFocus:nt,...rt}=$,ot=useDialogContext(CONTENT_NAME$6,_e),it=reactExports.useRef(null),at=useComposedRefs(j,it);return useFocusGuards(),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FocusScope,{asChild:!0,loop:!0,trapped:et,onMountAutoFocus:tt,onUnmountAutoFocus:nt,children:jsxRuntimeExports.jsx(DismissableLayer,{role:"dialog",id:ot.contentId,"aria-describedby":ot.descriptionId,"aria-labelledby":ot.titleId,"data-state":getState$1(ot.open),...rt,ref:at,onDismiss:()=>ot.onOpenChange(!1)})}),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TitleWarning,{titleId:ot.titleId}),jsxRuntimeExports.jsx(DescriptionWarning$1,{contentRef:it,descriptionId:ot.descriptionId})]})]})}),TITLE_NAME$2="DialogTitle",DialogTitle=reactExports.forwardRef(($,j)=>{const{__scopeDialog:_e,...et}=$,tt=useDialogContext(TITLE_NAME$2,_e);return jsxRuntimeExports.jsx(Primitive.h2,{id:tt.titleId,...et,ref:j})});DialogTitle.displayName=TITLE_NAME$2;var DESCRIPTION_NAME$2="DialogDescription",DialogDescription=reactExports.forwardRef(($,j)=>{const{__scopeDialog:_e,...et}=$,tt=useDialogContext(DESCRIPTION_NAME$2,_e);return jsxRuntimeExports.jsx(Primitive.p,{id:tt.descriptionId,...et,ref:j})});DialogDescription.displayName=DESCRIPTION_NAME$2;var CLOSE_NAME$1="DialogClose",DialogClose=reactExports.forwardRef(($,j)=>{const{__scopeDialog:_e,...et}=$,tt=useDialogContext(CLOSE_NAME$1,_e);return jsxRuntimeExports.jsx(Primitive.button,{type:"button",...et,ref:j,onClick:composeEventHandlers($.onClick,()=>tt.onOpenChange(!1))})});DialogClose.displayName=CLOSE_NAME$1;function getState$1($){return $?"open":"closed"}var TITLE_WARNING_NAME="DialogTitleWarning",[WarningProvider,useWarningContext]=createContext2(TITLE_WARNING_NAME,{contentName:CONTENT_NAME$6,titleName:TITLE_NAME$2,docsSlug:"dialog"}),TitleWarning=({titleId:$})=>{const j=useWarningContext(TITLE_WARNING_NAME),_e=`\`${j.contentName}\` requires a \`${j.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${j.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${j.docsSlug}`;return reactExports.useEffect(()=>{$&&(document.getElementById($)||console.error(_e))},[_e,$]),null},DESCRIPTION_WARNING_NAME="DialogDescriptionWarning",DescriptionWarning$1=({contentRef:$,descriptionId:j})=>{const et=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${useWarningContext(DESCRIPTION_WARNING_NAME).contentName}}.`;return reactExports.useEffect(()=>{var nt;const tt=(nt=$.current)==null?void 0:nt.getAttribute("aria-describedby");j&&tt&&(document.getElementById(j)||console.warn(et))},[et,$,j]),null},Root$6=Dialog,Trigger$3=DialogTrigger,Portal$3=DialogPortal,Overlay=DialogOverlay,Content$1=DialogContent,Title=DialogTitle,Description$1=DialogDescription,Close$1=DialogClose;const noop$1=$=>{},buttonContext=reactExports.createContext({okAction:noop$1,cancelAction:noop$1}),QspCloseButton=({attrs:$,children:j})=>{const[,_e,et]=useAttributes($,"button","qsp-close-button");return jsxRuntimeExports.jsx(Close$1,{asChild:!0,children:jsxRuntimeExports.jsx("button",{style:_e,...et,children:j})})},QspOkButton=({attrs:$,children:j})=>{const[,_e,et]=useAttributes($,"button","qsp-ok-button"),{okAction:tt}=reactExports.useContext(buttonContext);return jsxRuntimeExports.jsx("button",{style:_e,...et,onClick:tt,children:j})},QspCancelButton=({attrs:$,children:j})=>{const[,_e,et]=useAttributes($,"button","qsp-cancel-button"),{cancelAction:tt}=reactExports.useContext(buttonContext);return jsxRuntimeExports.jsx("button",{style:_e,...et,onClick:tt,children:j})},QspCmd=({attrs:$,children:j})=>{const[_e,et,tt]=useAttributes($,"qsp-cmd"),nt=useAtom_2(isCmdVisible$),rt=ot=>{ot.preventDefault(),submitUserInput()};return nt?jsxRuntimeExports.jsx(_e,{style:et,...tt,children:jsxRuntimeExports.jsx("form",{onSubmit:rt,children:j})}):null},QspCmdInput=({attrs:$})=>{const j=useAtom_2(cmdText$),[,_e,et]=useAttributes($,"input","qsp-cmd-input"),tt=nt=>{cmdText$.set(nt.target.value)};return jsxRuntimeExports.jsx("input",{style:_e,...et,type:"text",value:j,onInput:tt})};var DirectionContext=reactExports.createContext(void 0);function useDirection($){const j=reactExports.useContext(DirectionContext);return $||j||"ltr"}function clamp$2($,[j,_e]){return Math.min(_e,Math.max(j,$))}function useStateMachine($,j){return reactExports.useReducer((_e,et)=>j[_e][et]??_e,$)}var SCROLL_AREA_NAME="ScrollArea",[createScrollAreaContext,createScrollAreaScope]=createContextScope(SCROLL_AREA_NAME),[ScrollAreaProvider,useScrollAreaContext]=createScrollAreaContext(SCROLL_AREA_NAME),ScrollArea=reactExports.forwardRef(($,j)=>{const{__scopeScrollArea:_e,type:et="hover",dir:tt,scrollHideDelay:nt=600,...rt}=$,[ot,it]=reactExports.useState(null),[at,dt]=reactExports.useState(null),[st,ut]=reactExports.useState(null),[ft,pt]=reactExports.useState(null),[gt,yt]=reactExports.useState(null),[mt,vt]=reactExports.useState(0),[_t,St]=reactExports.useState(0),[At,kt]=reactExports.useState(!1),[bt,Rt]=reactExports.useState(!1),Ot=useComposedRefs(j,Yt=>it(Yt)),Ut=useDirection(tt);return jsxRuntimeExports.jsx(ScrollAreaProvider,{scope:_e,type:et,dir:Ut,scrollHideDelay:nt,scrollArea:ot,viewport:at,onViewportChange:dt,content:st,onContentChange:ut,scrollbarX:ft,onScrollbarXChange:pt,scrollbarXEnabled:At,onScrollbarXEnabledChange:kt,scrollbarY:gt,onScrollbarYChange:yt,scrollbarYEnabled:bt,onScrollbarYEnabledChange:Rt,onCornerWidthChange:vt,onCornerHeightChange:St,children:jsxRuntimeExports.jsx(Primitive.div,{dir:Ut,...rt,ref:Ot,style:{position:"relative","--radix-scroll-area-corner-width":mt+"px","--radix-scroll-area-corner-height":_t+"px",...$.style}})})});ScrollArea.displayName=SCROLL_AREA_NAME;var VIEWPORT_NAME$2="ScrollAreaViewport",ScrollAreaViewport=reactExports.forwardRef(($,j)=>{const{__scopeScrollArea:_e,children:et,nonce:tt,...nt}=$,rt=useScrollAreaContext(VIEWPORT_NAME$2,_e),ot=reactExports.useRef(null),it=useComposedRefs(j,ot,rt.onViewportChange);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:tt}),jsxRuntimeExports.jsx(Primitive.div,{"data-radix-scroll-area-viewport":"",...nt,ref:it,style:{overflowX:rt.scrollbarXEnabled?"scroll":"hidden",overflowY:rt.scrollbarYEnabled?"scroll":"hidden",...$.style},children:jsxRuntimeExports.jsx("div",{ref:rt.onContentChange,style:{minWidth:"100%",display:"table"},children:et})})]})});ScrollAreaViewport.displayName=VIEWPORT_NAME$2;var SCROLLBAR_NAME="ScrollAreaScrollbar",ScrollAreaScrollbar=reactExports.forwardRef(($,j)=>{const{forceMount:_e,...et}=$,tt=useScrollAreaContext(SCROLLBAR_NAME,$.__scopeScrollArea),{onScrollbarXEnabledChange:nt,onScrollbarYEnabledChange:rt}=tt,ot=$.orientation==="horizontal";return reactExports.useEffect(()=>(ot?nt(!0):rt(!0),()=>{ot?nt(!1):rt(!1)}),[ot,nt,rt]),tt.type==="hover"?jsxRuntimeExports.jsx(ScrollAreaScrollbarHover,{...et,ref:j,forceMount:_e}):tt.type==="scroll"?jsxRuntimeExports.jsx(ScrollAreaScrollbarScroll,{...et,ref:j,forceMount:_e}):tt.type==="auto"?jsxRuntimeExports.jsx(ScrollAreaScrollbarAuto,{...et,ref:j,forceMount:_e}):tt.type==="always"?jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{...et,ref:j}):null});ScrollAreaScrollbar.displayName=SCROLLBAR_NAME;var ScrollAreaScrollbarHover=reactExports.forwardRef(($,j)=>{const{forceMount:_e,...et}=$,tt=useScrollAreaContext(SCROLLBAR_NAME,$.__scopeScrollArea),[nt,rt]=reactExports.useState(!1);return reactExports.useEffect(()=>{const ot=tt.scrollArea;let it=0;if(ot){const at=()=>{window.clearTimeout(it),rt(!0)},dt=()=>{it=window.setTimeout(()=>rt(!1),tt.scrollHideDelay)};return ot.addEventListener("pointerenter",at),ot.addEventListener("pointerleave",dt),()=>{window.clearTimeout(it),ot.removeEventListener("pointerenter",at),ot.removeEventListener("pointerleave",dt)}}},[tt.scrollArea,tt.scrollHideDelay]),jsxRuntimeExports.jsx(Presence,{present:_e||nt,children:jsxRuntimeExports.jsx(ScrollAreaScrollbarAuto,{"data-state":nt?"visible":"hidden",...et,ref:j})})}),ScrollAreaScrollbarScroll=reactExports.forwardRef(($,j)=>{const{forceMount:_e,...et}=$,tt=useScrollAreaContext(SCROLLBAR_NAME,$.__scopeScrollArea),nt=$.orientation==="horizontal",rt=useDebounceCallback(()=>it("SCROLL_END"),100),[ot,it]=useStateMachine("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return reactExports.useEffect(()=>{if(ot==="idle"){const at=window.setTimeout(()=>it("HIDE"),tt.scrollHideDelay);return()=>window.clearTimeout(at)}},[ot,tt.scrollHideDelay,it]),reactExports.useEffect(()=>{const at=tt.viewport,dt=nt?"scrollLeft":"scrollTop";if(at){let st=at[dt];const ut=()=>{const ft=at[dt];st!==ft&&(it("SCROLL"),rt()),st=ft};return at.addEventListener("scroll",ut),()=>at.removeEventListener("scroll",ut)}},[tt.viewport,nt,it,rt]),jsxRuntimeExports.jsx(Presence,{present:_e||ot!=="hidden",children:jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{"data-state":ot==="hidden"?"hidden":"visible",...et,ref:j,onPointerEnter:composeEventHandlers($.onPointerEnter,()=>it("POINTER_ENTER")),onPointerLeave:composeEventHandlers($.onPointerLeave,()=>it("POINTER_LEAVE"))})})}),ScrollAreaScrollbarAuto=reactExports.forwardRef(($,j)=>{const _e=useScrollAreaContext(SCROLLBAR_NAME,$.__scopeScrollArea),{forceMount:et,...tt}=$,[nt,rt]=reactExports.useState(!1),ot=$.orientation==="horizontal",it=useDebounceCallback(()=>{if(_e.viewport){const at=_e.viewport.offsetWidth<_e.viewport.scrollWidth,dt=_e.viewport.offsetHeight<_e.viewport.scrollHeight;rt(ot?at:dt)}},10);return useResizeObserver(_e.viewport,it),useResizeObserver(_e.content,it),jsxRuntimeExports.jsx(Presence,{present:et||nt,children:jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{"data-state":nt?"visible":"hidden",...tt,ref:j})})}),ScrollAreaScrollbarVisible=reactExports.forwardRef(($,j)=>{const{orientation:_e="vertical",...et}=$,tt=useScrollAreaContext(SCROLLBAR_NAME,$.__scopeScrollArea),nt=reactExports.useRef(null),rt=reactExports.useRef(0),[ot,it]=reactExports.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),at=getThumbRatio(ot.viewport,ot.content),dt={...et,sizes:ot,onSizesChange:it,hasThumb:at>0&&at<1,onThumbChange:ut=>nt.current=ut,onThumbPointerUp:()=>rt.current=0,onThumbPointerDown:ut=>rt.current=ut};function st(ut,ft){return getScrollPositionFromPointer(ut,rt.current,ot,ft)}return _e==="horizontal"?jsxRuntimeExports.jsx(ScrollAreaScrollbarX,{...dt,ref:j,onThumbPositionChange:()=>{if(tt.viewport&&nt.current){const ut=tt.viewport.scrollLeft,ft=getThumbOffsetFromScroll(ut,ot,tt.dir);nt.current.style.transform=`translate3d(${ft}px, 0, 0)`}},onWheelScroll:ut=>{tt.viewport&&(tt.viewport.scrollLeft=ut)},onDragScroll:ut=>{tt.viewport&&(tt.viewport.scrollLeft=st(ut,tt.dir))}}):_e==="vertical"?jsxRuntimeExports.jsx(ScrollAreaScrollbarY,{...dt,ref:j,onThumbPositionChange:()=>{if(tt.viewport&&nt.current){const ut=tt.viewport.scrollTop,ft=getThumbOffsetFromScroll(ut,ot);nt.current.style.transform=`translate3d(0, ${ft}px, 0)`}},onWheelScroll:ut=>{tt.viewport&&(tt.viewport.scrollTop=ut)},onDragScroll:ut=>{tt.viewport&&(tt.viewport.scrollTop=st(ut))}}):null}),ScrollAreaScrollbarX=reactExports.forwardRef(($,j)=>{const{sizes:_e,onSizesChange:et,...tt}=$,nt=useScrollAreaContext(SCROLLBAR_NAME,$.__scopeScrollArea),[rt,ot]=reactExports.useState(),it=reactExports.useRef(null),at=useComposedRefs(j,it,nt.onScrollbarXChange);return reactExports.useEffect(()=>{it.current&&ot(getComputedStyle(it.current))},[it]),jsxRuntimeExports.jsx(ScrollAreaScrollbarImpl,{"data-orientation":"horizontal",...tt,ref:at,sizes:_e,style:{bottom:0,left:nt.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:nt.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":getThumbSize(_e)+"px",...$.style},onThumbPointerDown:dt=>$.onThumbPointerDown(dt.x),onDragScroll:dt=>$.onDragScroll(dt.x),onWheelScroll:(dt,st)=>{if(nt.viewport){const ut=nt.viewport.scrollLeft+dt.deltaX;$.onWheelScroll(ut),isScrollingWithinScrollbarBounds(ut,st)&&dt.preventDefault()}},onResize:()=>{it.current&&nt.viewport&&rt&&et({content:nt.viewport.scrollWidth,viewport:nt.viewport.offsetWidth,scrollbar:{size:it.current.clientWidth,paddingStart:toInt(rt.paddingLeft),paddingEnd:toInt(rt.paddingRight)}})}})}),ScrollAreaScrollbarY=reactExports.forwardRef(($,j)=>{const{sizes:_e,onSizesChange:et,...tt}=$,nt=useScrollAreaContext(SCROLLBAR_NAME,$.__scopeScrollArea),[rt,ot]=reactExports.useState(),it=reactExports.useRef(null),at=useComposedRefs(j,it,nt.onScrollbarYChange);return reactExports.useEffect(()=>{it.current&&ot(getComputedStyle(it.current))},[it]),jsxRuntimeExports.jsx(ScrollAreaScrollbarImpl,{"data-orientation":"vertical",...tt,ref:at,sizes:_e,style:{top:0,right:nt.dir==="ltr"?0:void 0,left:nt.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":getThumbSize(_e)+"px",...$.style},onThumbPointerDown:dt=>$.onThumbPointerDown(dt.y),onDragScroll:dt=>$.onDragScroll(dt.y),onWheelScroll:(dt,st)=>{if(nt.viewport){const ut=nt.viewport.scrollTop+dt.deltaY;$.onWheelScroll(ut),isScrollingWithinScrollbarBounds(ut,st)&&dt.preventDefault()}},onResize:()=>{it.current&&nt.viewport&&rt&&et({content:nt.viewport.scrollHeight,viewport:nt.viewport.offsetHeight,scrollbar:{size:it.current.clientHeight,paddingStart:toInt(rt.paddingTop),paddingEnd:toInt(rt.paddingBottom)}})}})}),[ScrollbarProvider,useScrollbarContext]=createScrollAreaContext(SCROLLBAR_NAME),ScrollAreaScrollbarImpl=reactExports.forwardRef(($,j)=>{const{__scopeScrollArea:_e,sizes:et,hasThumb:tt,onThumbChange:nt,onThumbPointerUp:rt,onThumbPointerDown:ot,onThumbPositionChange:it,onDragScroll:at,onWheelScroll:dt,onResize:st,...ut}=$,ft=useScrollAreaContext(SCROLLBAR_NAME,_e),[pt,gt]=reactExports.useState(null),yt=useComposedRefs(j,Ot=>gt(Ot)),mt=reactExports.useRef(null),vt=reactExports.useRef(""),_t=ft.viewport,St=et.content-et.viewport,At=useCallbackRef$1(dt),kt=useCallbackRef$1(it),bt=useDebounceCallback(st,10);function Rt(Ot){if(mt.current){const Ut=Ot.clientX-mt.current.left,Yt=Ot.clientY-mt.current.top;at({x:Ut,y:Yt})}}return reactExports.useEffect(()=>{const Ot=Ut=>{const Yt=Ut.target;(pt==null?void 0:pt.contains(Yt))&&At(Ut,St)};return document.addEventListener("wheel",Ot,{passive:!1}),()=>document.removeEventListener("wheel",Ot,{passive:!1})},[_t,pt,St,At]),reactExports.useEffect(kt,[et,kt]),useResizeObserver(pt,bt),useResizeObserver(ft.content,bt),jsxRuntimeExports.jsx(ScrollbarProvider,{scope:_e,scrollbar:pt,hasThumb:tt,onThumbChange:useCallbackRef$1(nt),onThumbPointerUp:useCallbackRef$1(rt),onThumbPositionChange:kt,onThumbPointerDown:useCallbackRef$1(ot),children:jsxRuntimeExports.jsx(Primitive.div,{...ut,ref:yt,style:{position:"absolute",...ut.style},onPointerDown:composeEventHandlers($.onPointerDown,Ot=>{Ot.button===0&&(Ot.target.setPointerCapture(Ot.pointerId),mt.current=pt.getBoundingClientRect(),vt.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",ft.viewport&&(ft.viewport.style.scrollBehavior="auto"),Rt(Ot))}),onPointerMove:composeEventHandlers($.onPointerMove,Rt),onPointerUp:composeEventHandlers($.onPointerUp,Ot=>{const Ut=Ot.target;Ut.hasPointerCapture(Ot.pointerId)&&Ut.releasePointerCapture(Ot.pointerId),document.body.style.webkitUserSelect=vt.current,ft.viewport&&(ft.viewport.style.scrollBehavior=""),mt.current=null})})})}),THUMB_NAME$2="ScrollAreaThumb",ScrollAreaThumb=reactExports.forwardRef(($,j)=>{const{forceMount:_e,...et}=$,tt=useScrollbarContext(THUMB_NAME$2,$.__scopeScrollArea);return jsxRuntimeExports.jsx(Presence,{present:_e||tt.hasThumb,children:jsxRuntimeExports.jsx(ScrollAreaThumbImpl,{ref:j,...et})})}),ScrollAreaThumbImpl=reactExports.forwardRef(($,j)=>{const{__scopeScrollArea:_e,style:et,...tt}=$,nt=useScrollAreaContext(THUMB_NAME$2,_e),rt=useScrollbarContext(THUMB_NAME$2,_e),{onThumbPositionChange:ot}=rt,it=useComposedRefs(j,st=>rt.onThumbChange(st)),at=reactExports.useRef(),dt=useDebounceCallback(()=>{at.current&&(at.current(),at.current=void 0)},100);return reactExports.useEffect(()=>{const st=nt.viewport;if(st){const ut=()=>{if(dt(),!at.current){const ft=addUnlinkedScrollListener(st,ot);at.current=ft,ot()}};return ot(),st.addEventListener("scroll",ut),()=>st.removeEventListener("scroll",ut)}},[nt.viewport,dt,ot]),jsxRuntimeExports.jsx(Primitive.div,{"data-state":rt.hasThumb?"visible":"hidden",...tt,ref:it,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...et},onPointerDownCapture:composeEventHandlers($.onPointerDownCapture,st=>{const ft=st.target.getBoundingClientRect(),pt=st.clientX-ft.left,gt=st.clientY-ft.top;rt.onThumbPointerDown({x:pt,y:gt})}),onPointerUp:composeEventHandlers($.onPointerUp,rt.onThumbPointerUp)})});ScrollAreaThumb.displayName=THUMB_NAME$2;var CORNER_NAME="ScrollAreaCorner",ScrollAreaCorner=reactExports.forwardRef(($,j)=>{const _e=useScrollAreaContext(CORNER_NAME,$.__scopeScrollArea),et=!!(_e.scrollbarX&&_e.scrollbarY);return _e.type!=="scroll"&&et?jsxRuntimeExports.jsx(ScrollAreaCornerImpl,{...$,ref:j}):null});ScrollAreaCorner.displayName=CORNER_NAME;var ScrollAreaCornerImpl=reactExports.forwardRef(($,j)=>{const{__scopeScrollArea:_e,...et}=$,tt=useScrollAreaContext(CORNER_NAME,_e),[nt,rt]=reactExports.useState(0),[ot,it]=reactExports.useState(0),at=!!(nt&&ot);return useResizeObserver(tt.scrollbarX,()=>{var st;const dt=((st=tt.scrollbarX)==null?void 0:st.offsetHeight)||0;tt.onCornerHeightChange(dt),it(dt)}),useResizeObserver(tt.scrollbarY,()=>{var st;const dt=((st=tt.scrollbarY)==null?void 0:st.offsetWidth)||0;tt.onCornerWidthChange(dt),rt(dt)}),at?jsxRuntimeExports.jsx(Primitive.div,{...et,ref:j,style:{width:nt,height:ot,position:"absolute",right:tt.dir==="ltr"?0:void 0,left:tt.dir==="rtl"?0:void 0,bottom:0,...$.style}}):null});function toInt($){return $?parseInt($,10):0}function getThumbRatio($,j){const _e=$/j;return isNaN(_e)?0:_e}function getThumbSize($){const j=getThumbRatio($.viewport,$.content),_e=$.scrollbar.paddingStart+$.scrollbar.paddingEnd,et=($.scrollbar.size-_e)*j;return Math.max(et,18)}function getScrollPositionFromPointer($,j,_e,et="ltr"){const tt=getThumbSize(_e),nt=tt/2,rt=j||nt,ot=tt-rt,it=_e.scrollbar.paddingStart+rt,at=_e.scrollbar.size-_e.scrollbar.paddingEnd-ot,dt=_e.content-_e.viewport,st=et==="ltr"?[0,dt]:[dt*-1,0];return linearScale$1([it,at],st)($)}function getThumbOffsetFromScroll($,j,_e="ltr"){const et=getThumbSize(j),tt=j.scrollbar.paddingStart+j.scrollbar.paddingEnd,nt=j.scrollbar.size-tt,rt=j.content-j.viewport,ot=nt-et,it=_e==="ltr"?[0,rt]:[rt*-1,0],at=clamp$2($,it);return linearScale$1([0,rt],[0,ot])(at)}function linearScale$1($,j){return _e=>{if($[0]===$[1]||j[0]===j[1])return j[0];const et=(j[1]-j[0])/($[1]-$[0]);return j[0]+et*(_e-$[0])}}function isScrollingWithinScrollbarBounds($,j){return $>0&&$<j}var addUnlinkedScrollListener=($,j=()=>{})=>{let _e={left:$.scrollLeft,top:$.scrollTop},et=0;return function tt(){const nt={left:$.scrollLeft,top:$.scrollTop},rt=_e.left!==nt.left,ot=_e.top!==nt.top;(rt||ot)&&j(),_e=nt,et=window.requestAnimationFrame(tt)}(),()=>window.cancelAnimationFrame(et)};function useDebounceCallback($,j){const _e=useCallbackRef$1($),et=reactExports.useRef(0);return reactExports.useEffect(()=>()=>window.clearTimeout(et.current),[]),reactExports.useCallback(()=>{window.clearTimeout(et.current),et.current=window.setTimeout(_e,j)},[_e,j])}function useResizeObserver($,j){const _e=useCallbackRef$1(j);useLayoutEffect2(()=>{let et=0;if($){const tt=new ResizeObserver(()=>{cancelAnimationFrame(et),et=window.requestAnimationFrame(_e)});return tt.observe($),()=>{window.cancelAnimationFrame(et),tt.unobserve($)}}},[$,_e])}var Root$5=ScrollArea,Viewport$2=ScrollAreaViewport,Scrollbar=ScrollAreaScrollbar,Thumb$2=ScrollAreaThumb,Corner=ScrollAreaCorner;const noopScrollAtom$=atom(0),scrollContext=reactExports.createContext(noopScrollAtom$),isScrollType=$=>typeof $=="string"&&["both","horizontal","vertical"].includes($),QspScrollable=({children:$,attrs:j,scroll:_e="both"})=>{const[,et,{className:tt="",...nt}]=useAttributes(j,"div","qsp-scrollable"),rt=reactExports.useRef(null),ot=useAtom_2(reactExports.useContext(scrollContext)),it=useSetup(()=>atom(!1)),at=useAtom_2(it),dt=useSetup(()=>atom(!1)),st=useAtom_2(dt);return reactExports.useEffect(()=>{rt.current&&ot&&(rt.current.scrollTop=ot>0?rt.current.scrollHeight:0)},[ot]),reactExports.useLayoutEffect(()=>{const ut=rt.current;if(!ut)return;function ft(){const gt=rt.current?rt.current.scrollTop>0:!1;it.value!==gt&&it.set(gt);const yt=rt.current?rt.current.offsetHeight+rt.current.scrollTop<rt.current.scrollHeight:!0;yt!==dt.value&&dt.set(yt)}ft();const pt=setInterval(ft,300);return ut.addEventListener("scroll",ft,{passive:!0}),()=>{ut.removeEventListener("scroll",ft),clearInterval(pt)}},[]),jsxRuntimeExports.jsxs(Root$5,{style:et,...nt,className:tt+" qsp-scroll-root","data-upscroll":at||void 0,"data-downscroll":st||void 0,children:[jsxRuntimeExports.jsx(Viewport$2,{ref:rt,className:"qsp-scroll-area",children:$}),_e==="both"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Scrollbar,{className:"qsp-scrollbar",orientation:"horizontal",children:jsxRuntimeExports.jsx(Thumb$2,{className:"qsp-scrollbar-thumb"})}),jsxRuntimeExports.jsx(Scrollbar,{className:"qsp-scrollbar",orientation:"vertical",children:jsxRuntimeExports.jsx(Thumb$2,{className:"qsp-scrollbar-thumb"})})]}):jsxRuntimeExports.jsx(Scrollbar,{className:"qsp-scrollbar",orientation:_e,children:jsxRuntimeExports.jsx(Thumb$2,{className:"qsp-scrollbar-thumb"})}),jsxRuntimeExports.jsx(Corner,{className:"qsp-scrollbar-corner"})]})};var updateQueue=makeQueue(),raf=$=>schedule($,updateQueue),writeQueue=makeQueue();raf.write=$=>schedule($,writeQueue);var onStartQueue=makeQueue();raf.onStart=$=>schedule($,onStartQueue);var onFrameQueue=makeQueue();raf.onFrame=$=>schedule($,onFrameQueue);var onFinishQueue=makeQueue();raf.onFinish=$=>schedule($,onFinishQueue);var timeouts=[];raf.setTimeout=($,j)=>{const _e=raf.now()+j,et=()=>{const nt=timeouts.findIndex(rt=>rt.cancel==et);~nt&&timeouts.splice(nt,1),pendingCount-=~nt?1:0},tt={time:_e,handler:$,cancel:et};return timeouts.splice(findTimeout(_e),0,tt),pendingCount+=1,start(),tt};var findTimeout=$=>~(~timeouts.findIndex(j=>j.time>$)||~timeouts.length);raf.cancel=$=>{onStartQueue.delete($),onFrameQueue.delete($),onFinishQueue.delete($),updateQueue.delete($),writeQueue.delete($)};raf.sync=$=>{sync=!0,raf.batchedUpdates($),sync=!1};raf.throttle=$=>{let j;function _e(){try{$(...j)}finally{j=null}}function et(...tt){j=tt,raf.onStart(_e)}return et.handler=$,et.cancel=()=>{onStartQueue.delete(_e),j=null},et};var nativeRaf=typeof window<"u"?window.requestAnimationFrame:()=>{};raf.use=$=>nativeRaf=$;raf.now=typeof performance<"u"?()=>performance.now():Date.now;raf.batchedUpdates=$=>$();raf.catch=console.error;raf.frameLoop="always";raf.advance=()=>{raf.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):update()};var ts=-1,pendingCount=0,sync=!1;function schedule($,j){sync?(j.delete($),$(0)):(j.add($),start())}function start(){ts<0&&(ts=0,raf.frameLoop!=="demand"&&nativeRaf(loop))}function stop(){ts=-1}function loop(){~ts&&(nativeRaf(loop),raf.batchedUpdates(update))}function update(){const $=ts;ts=raf.now();const j=findTimeout(ts);if(j&&(eachSafely(timeouts.splice(0,j),_e=>_e.handler()),pendingCount-=j),!pendingCount){stop();return}onStartQueue.flush(),updateQueue.flush($?Math.min(64,ts-$):16.667),onFrameQueue.flush(),writeQueue.flush(),onFinishQueue.flush()}function makeQueue(){let $=new Set,j=$;return{add(_e){pendingCount+=j==$&&!$.has(_e)?1:0,$.add(_e)},delete(_e){return pendingCount-=j==$&&$.has(_e)?1:0,$.delete(_e)},flush(_e){j.size&&($=new Set,pendingCount-=j.size,eachSafely(j,et=>et(_e)&&$.add(et)),pendingCount+=$.size,j=$)}}}function eachSafely($,j){$.forEach(_e=>{try{j(_e)}catch(et){raf.catch(et)}})}var __defProp=Object.defineProperty,__export=($,j)=>{for(var _e in j)__defProp($,_e,{get:j[_e],enumerable:!0})},globals_exports={};__export(globals_exports,{assign:()=>assign,colors:()=>colors,createStringInterpolator:()=>createStringInterpolator,skipAnimation:()=>skipAnimation,to:()=>to,willAdvance:()=>willAdvance});function noop(){}var defineHidden=($,j,_e)=>Object.defineProperty($,j,{value:_e,writable:!0,configurable:!0}),is={arr:Array.isArray,obj:$=>!!$&&$.constructor.name==="Object",fun:$=>typeof $=="function",str:$=>typeof $=="string",num:$=>typeof $=="number",und:$=>$===void 0};function isEqual($,j){if(is.arr($)){if(!is.arr(j)||$.length!==j.length)return!1;for(let _e=0;_e<$.length;_e++)if($[_e]!==j[_e])return!1;return!0}return $===j}var each=($,j)=>$.forEach(j);function eachProp($,j,_e){if(is.arr($)){for(let et=0;et<$.length;et++)j.call(_e,$[et],`${et}`);return}for(const et in $)$.hasOwnProperty(et)&&j.call(_e,$[et],et)}var toArray=$=>is.und($)?[]:is.arr($)?$:[$];function flush($,j){if($.size){const _e=Array.from($);$.clear(),each(_e,j)}}var flushCalls=($,...j)=>flush($,_e=>_e(...j)),isSSR=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),createStringInterpolator,to,colors=null,skipAnimation=!1,willAdvance=noop,assign=$=>{$.to&&(to=$.to),$.now&&(raf.now=$.now),$.colors!==void 0&&(colors=$.colors),$.skipAnimation!=null&&(skipAnimation=$.skipAnimation),$.createStringInterpolator&&(createStringInterpolator=$.createStringInterpolator),$.requestAnimationFrame&&raf.use($.requestAnimationFrame),$.batchedUpdates&&(raf.batchedUpdates=$.batchedUpdates),$.willAdvance&&(willAdvance=$.willAdvance),$.frameLoop&&(raf.frameLoop=$.frameLoop)},startQueue=new Set,currentFrame=[],prevFrame=[],priority=0,frameLoop={get idle(){return!startQueue.size&&!currentFrame.length},start($){priority>$.priority?(startQueue.add($),raf.onStart(flushStartQueue)):(startSafely($),raf(advance))},advance,sort($){if(priority)raf.onFrame(()=>frameLoop.sort($));else{const j=currentFrame.indexOf($);~j&&(currentFrame.splice(j,1),startUnsafely($))}},clear(){currentFrame=[],startQueue.clear()}};function flushStartQueue(){startQueue.forEach(startSafely),startQueue.clear(),raf(advance)}function startSafely($){currentFrame.includes($)||startUnsafely($)}function startUnsafely($){currentFrame.splice(findIndex(currentFrame,j=>j.priority>$.priority),0,$)}function advance($){const j=prevFrame;for(let _e=0;_e<currentFrame.length;_e++){const et=currentFrame[_e];priority=et.priority,et.idle||(willAdvance(et),et.advance($),et.idle||j.push(et))}return priority=0,prevFrame=currentFrame,prevFrame.length=0,currentFrame=j,currentFrame.length>0}function findIndex($,j){const _e=$.findIndex(j);return _e<0?$.length:_e}var clamp$1=($,j,_e)=>Math.min(Math.max(_e,$),j),colors2={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},NUMBER="[-+]?\\d*\\.?\\d+",PERCENTAGE=NUMBER+"%";function call(...$){return"\\(\\s*("+$.join(")\\s*,\\s*(")+")\\s*\\)"}var rgb=new RegExp("rgb"+call(NUMBER,NUMBER,NUMBER)),rgba=new RegExp("rgba"+call(NUMBER,NUMBER,NUMBER,NUMBER)),hsl=new RegExp("hsl"+call(NUMBER,PERCENTAGE,PERCENTAGE)),hsla=new RegExp("hsla"+call(NUMBER,PERCENTAGE,PERCENTAGE,NUMBER)),hex3=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6=/^#([0-9a-fA-F]{6})$/,hex8=/^#([0-9a-fA-F]{8})$/;function normalizeColor($){let j;return typeof $=="number"?$>>>0===$&&$>=0&&$<=4294967295?$:null:(j=hex6.exec($))?parseInt(j[1]+"ff",16)>>>0:colors&&colors[$]!==void 0?colors[$]:(j=rgb.exec($))?(parse255(j[1])<<24|parse255(j[2])<<16|parse255(j[3])<<8|255)>>>0:(j=rgba.exec($))?(parse255(j[1])<<24|parse255(j[2])<<16|parse255(j[3])<<8|parse1(j[4]))>>>0:(j=hex3.exec($))?parseInt(j[1]+j[1]+j[2]+j[2]+j[3]+j[3]+"ff",16)>>>0:(j=hex8.exec($))?parseInt(j[1],16)>>>0:(j=hex4.exec($))?parseInt(j[1]+j[1]+j[2]+j[2]+j[3]+j[3]+j[4]+j[4],16)>>>0:(j=hsl.exec($))?(hslToRgb(parse360(j[1]),parsePercentage(j[2]),parsePercentage(j[3]))|255)>>>0:(j=hsla.exec($))?(hslToRgb(parse360(j[1]),parsePercentage(j[2]),parsePercentage(j[3]))|parse1(j[4]))>>>0:null}function hue2rgb($,j,_e){return _e<0&&(_e+=1),_e>1&&(_e-=1),_e<1/6?$+(j-$)*6*_e:_e<1/2?j:_e<2/3?$+(j-$)*(2/3-_e)*6:$}function hslToRgb($,j,_e){const et=_e<.5?_e*(1+j):_e+j-_e*j,tt=2*_e-et,nt=hue2rgb(tt,et,$+1/3),rt=hue2rgb(tt,et,$),ot=hue2rgb(tt,et,$-1/3);return Math.round(nt*255)<<24|Math.round(rt*255)<<16|Math.round(ot*255)<<8}function parse255($){const j=parseInt($,10);return j<0?0:j>255?255:j}function parse360($){return(parseFloat($)%360+360)%360/360}function parse1($){const j=parseFloat($);return j<0?0:j>1?255:Math.round(j*255)}function parsePercentage($){const j=parseFloat($);return j<0?0:j>100?1:j/100}function colorToRgba($){let j=normalizeColor($);if(j===null)return $;j=j||0;const _e=(j&4278190080)>>>24,et=(j&16711680)>>>16,tt=(j&65280)>>>8,nt=(j&255)/255;return`rgba(${_e}, ${et}, ${tt}, ${nt})`}var createInterpolator=($,j,_e)=>{if(is.fun($))return $;if(is.arr($))return createInterpolator({range:$,output:j,extrapolate:_e});if(is.str($.output[0]))return createStringInterpolator($);const et=$,tt=et.output,nt=et.range||[0,1],rt=et.extrapolateLeft||et.extrapolate||"extend",ot=et.extrapolateRight||et.extrapolate||"extend",it=et.easing||(at=>at);return at=>{const dt=findRange(at,nt);return interpolate(at,nt[dt],nt[dt+1],tt[dt],tt[dt+1],it,rt,ot,et.map)}};function interpolate($,j,_e,et,tt,nt,rt,ot,it){let at=it?it($):$;if(at<j){if(rt==="identity")return at;rt==="clamp"&&(at=j)}if(at>_e){if(ot==="identity")return at;ot==="clamp"&&(at=_e)}return et===tt?et:j===_e?$<=j?et:tt:(j===-1/0?at=-at:_e===1/0?at=at-j:at=(at-j)/(_e-j),at=nt(at),et===-1/0?at=-at:tt===1/0?at=at+et:at=at*(tt-et)+et,at)}function findRange($,j){for(var _e=1;_e<j.length-1&&!(j[_e]>=$);++_e);return _e-1}var steps=($,j="end")=>_e=>{_e=j==="end"?Math.min(_e,.999):Math.max(_e,.001);const et=_e*$,tt=j==="end"?Math.floor(et):Math.ceil(et);return clamp$1(0,1,tt/$)},c1=1.70158,c2=c1*1.525,c3=c1+1,c4=2*Math.PI/3,c5=2*Math.PI/4.5,bounceOut=$=>$<1/2.75?7.5625*$*$:$<2/2.75?7.5625*($-=1.5/2.75)*$+.75:$<2.5/2.75?7.5625*($-=2.25/2.75)*$+.9375:7.5625*($-=2.625/2.75)*$+.984375,easings={linear:$=>$,easeInQuad:$=>$*$,easeOutQuad:$=>1-(1-$)*(1-$),easeInOutQuad:$=>$<.5?2*$*$:1-Math.pow(-2*$+2,2)/2,easeInCubic:$=>$*$*$,easeOutCubic:$=>1-Math.pow(1-$,3),easeInOutCubic:$=>$<.5?4*$*$*$:1-Math.pow(-2*$+2,3)/2,easeInQuart:$=>$*$*$*$,easeOutQuart:$=>1-Math.pow(1-$,4),easeInOutQuart:$=>$<.5?8*$*$*$*$:1-Math.pow(-2*$+2,4)/2,easeInQuint:$=>$*$*$*$*$,easeOutQuint:$=>1-Math.pow(1-$,5),easeInOutQuint:$=>$<.5?16*$*$*$*$*$:1-Math.pow(-2*$+2,5)/2,easeInSine:$=>1-Math.cos($*Math.PI/2),easeOutSine:$=>Math.sin($*Math.PI/2),easeInOutSine:$=>-(Math.cos(Math.PI*$)-1)/2,easeInExpo:$=>$===0?0:Math.pow(2,10*$-10),easeOutExpo:$=>$===1?1:1-Math.pow(2,-10*$),easeInOutExpo:$=>$===0?0:$===1?1:$<.5?Math.pow(2,20*$-10)/2:(2-Math.pow(2,-20*$+10))/2,easeInCirc:$=>1-Math.sqrt(1-Math.pow($,2)),easeOutCirc:$=>Math.sqrt(1-Math.pow($-1,2)),easeInOutCirc:$=>$<.5?(1-Math.sqrt(1-Math.pow(2*$,2)))/2:(Math.sqrt(1-Math.pow(-2*$+2,2))+1)/2,easeInBack:$=>c3*$*$*$-c1*$*$,easeOutBack:$=>1+c3*Math.pow($-1,3)+c1*Math.pow($-1,2),easeInOutBack:$=>$<.5?Math.pow(2*$,2)*((c2+1)*2*$-c2)/2:(Math.pow(2*$-2,2)*((c2+1)*($*2-2)+c2)+2)/2,easeInElastic:$=>$===0?0:$===1?1:-Math.pow(2,10*$-10)*Math.sin(($*10-10.75)*c4),easeOutElastic:$=>$===0?0:$===1?1:Math.pow(2,-10*$)*Math.sin(($*10-.75)*c4)+1,easeInOutElastic:$=>$===0?0:$===1?1:$<.5?-(Math.pow(2,20*$-10)*Math.sin((20*$-11.125)*c5))/2:Math.pow(2,-20*$+10)*Math.sin((20*$-11.125)*c5)/2+1,easeInBounce:$=>1-bounceOut(1-$),easeOutBounce:bounceOut,easeInOutBounce:$=>$<.5?(1-bounceOut(1-2*$))/2:(1+bounceOut(2*$-1))/2,steps},$get=Symbol.for("FluidValue.get"),$observers=Symbol.for("FluidValue.observers"),hasFluidValue=$=>!!($&&$[$get]),getFluidValue=$=>$&&$[$get]?$[$get]():$,getFluidObservers=$=>$[$observers]||null;function callFluidObserver($,j){$.eventObserved?$.eventObserved(j):$(j)}function callFluidObservers($,j){const _e=$[$observers];_e&&_e.forEach(et=>{callFluidObserver(et,j)})}var FluidValue=class{constructor($){if(!$&&!($=this.get))throw Error("Unknown getter");setFluidGetter(this,$)}},setFluidGetter=($,j)=>setHidden($,$get,j);function addFluidObserver($,j){if($[$get]){let _e=$[$observers];_e||setHidden($,$observers,_e=new Set),_e.has(j)||(_e.add(j),$.observerAdded&&$.observerAdded(_e.size,j))}return j}function removeFluidObserver($,j){const _e=$[$observers];if(_e&&_e.has(j)){const et=_e.size-1;et?_e.delete(j):$[$observers]=null,$.observerRemoved&&$.observerRemoved(et,j)}}var setHidden=($,j,_e)=>Object.defineProperty($,j,{value:_e,writable:!0,configurable:!0}),numberRegex=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,colorRegex=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,unitRegex=new RegExp(`(${numberRegex.source})(%|[a-z]+)`,"i"),rgbaRegex=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,cssVariableRegex=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,variableToRgba=$=>{const[j,_e]=parseCSSVariable($);if(!j||isSSR())return $;const et=window.getComputedStyle(document.documentElement).getPropertyValue(j);if(et)return et.trim();if(_e&&_e.startsWith("--")){const tt=window.getComputedStyle(document.documentElement).getPropertyValue(_e);return tt||$}else{if(_e&&cssVariableRegex.test(_e))return variableToRgba(_e);if(_e)return _e}return $},parseCSSVariable=$=>{const j=cssVariableRegex.exec($);if(!j)return[,];const[,_e,et]=j;return[_e,et]},namedColorRegex,rgbaRound=($,j,_e,et,tt)=>`rgba(${Math.round(j)}, ${Math.round(_e)}, ${Math.round(et)}, ${tt})`,createStringInterpolator2=$=>{namedColorRegex||(namedColorRegex=colors?new RegExp(`(${Object.keys(colors).join("|")})(?!\\w)`,"g"):/^\b$/);const j=$.output.map(nt=>getFluidValue(nt).replace(cssVariableRegex,variableToRgba).replace(colorRegex,colorToRgba).replace(namedColorRegex,colorToRgba)),_e=j.map(nt=>nt.match(numberRegex).map(Number)),tt=_e[0].map((nt,rt)=>_e.map(ot=>{if(!(rt in ot))throw Error('The arity of each "output" value must be equal');return ot[rt]})).map(nt=>createInterpolator({...$,output:nt}));return nt=>{var it;const rt=!unitRegex.test(j[0])&&((it=j.find(at=>unitRegex.test(at)))==null?void 0:it.replace(numberRegex,""));let ot=0;return j[0].replace(numberRegex,()=>`${tt[ot++](nt)}${rt||""}`).replace(rgbaRegex,rgbaRound)}},prefix="react-spring: ",once=$=>{const j=$;let _e=!1;if(typeof j!="function")throw new TypeError(`${prefix}once requires a function parameter`);return(...et)=>{_e||(j(...et),_e=!0)}},warnInterpolate=once(console.warn);function deprecateInterpolate(){warnInterpolate(`${prefix}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var warnDirectCall=once(console.warn);function deprecateDirectCall(){warnDirectCall(`${prefix}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function isAnimatedString($){return is.str($)&&($[0]=="#"||/\d/.test($)||!isSSR()&&cssVariableRegex.test($)||$ in(colors||{}))}var useIsomorphicLayoutEffect=isSSR()?reactExports.useEffect:reactExports.useLayoutEffect,useIsMounted=()=>{const $=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>($.current=!0,()=>{$.current=!1}),[]),$};function useForceUpdate(){const $=reactExports.useState()[1],j=useIsMounted();return()=>{j.current&&$(Math.random())}}function useMemoOne($,j){const[_e]=reactExports.useState(()=>({inputs:j,result:$()})),et=reactExports.useRef(),tt=et.current;let nt=tt;return nt?j&&nt.inputs&&areInputsEqual(j,nt.inputs)||(nt={inputs:j,result:$()}):nt=_e,reactExports.useEffect(()=>{et.current=nt,tt==_e&&(_e.inputs=_e.result=void 0)},[nt]),nt.result}function areInputsEqual($,j){if($.length!==j.length)return!1;for(let _e=0;_e<$.length;_e++)if($[_e]!==j[_e])return!1;return!0}var useOnce=$=>reactExports.useEffect($,emptyDeps),emptyDeps=[];function usePrev($){const j=reactExports.useRef();return reactExports.useEffect(()=>{j.current=$}),j.current}var $node=Symbol.for("Animated:node"),isAnimated=$=>!!$&&$[$node]===$,getAnimated=$=>$&&$[$node],setAnimated=($,j)=>defineHidden($,$node,j),getPayload=$=>$&&$[$node]&&$[$node].getPayload(),Animated=class{constructor(){setAnimated(this,this)}getPayload(){return this.payload||[]}},AnimatedValue=class extends Animated{constructor($){super(),this._value=$,this.done=!0,this.durationProgress=0,is.num(this._value)&&(this.lastPosition=this._value)}static create($){return new AnimatedValue($)}getPayload(){return[this]}getValue(){return this._value}setValue($,j){return is.num($)&&(this.lastPosition=$,j&&($=Math.round($/j)*j,this.done&&(this.lastPosition=$))),this._value===$?!1:(this._value=$,!0)}reset(){const{done:$}=this;this.done=!1,is.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,$&&(this.lastVelocity=null),this.v0=null)}},AnimatedString=class extends AnimatedValue{constructor($){super(0),this._string=null,this._toString=createInterpolator({output:[$,$]})}static create($){return new AnimatedString($)}getValue(){const $=this._string;return $??(this._string=this._toString(this._value))}setValue($){if(is.str($)){if($==this._string)return!1;this._string=$,this._value=1}else if(super.setValue($))this._string=null;else return!1;return!0}reset($){$&&(this._toString=createInterpolator({output:[this.getValue(),$]})),this._value=0,super.reset()}},TreeContext={dependencies:null},AnimatedObject=class extends Animated{constructor($){super(),this.source=$,this.setValue($)}getValue($){const j={};return eachProp(this.source,(_e,et)=>{isAnimated(_e)?j[et]=_e.getValue($):hasFluidValue(_e)?j[et]=getFluidValue(_e):$||(j[et]=_e)}),j}setValue($){this.source=$,this.payload=this._makePayload($)}reset(){this.payload&&each(this.payload,$=>$.reset())}_makePayload($){if($){const j=new Set;return eachProp($,this._addToPayload,j),Array.from(j)}}_addToPayload($){TreeContext.dependencies&&hasFluidValue($)&&TreeContext.dependencies.add($);const j=getPayload($);j&&each(j,_e=>this.add(_e))}},AnimatedArray=class extends AnimatedObject{constructor($){super($)}static create($){return new AnimatedArray($)}getValue(){return this.source.map($=>$.getValue())}setValue($){const j=this.getPayload();return $.length==j.length?j.map((_e,et)=>_e.setValue($[et])).some(Boolean):(super.setValue($.map(makeAnimated)),!0)}};function makeAnimated($){return(isAnimatedString($)?AnimatedString:AnimatedValue).create($)}function getAnimatedType($){const j=getAnimated($);return j?j.constructor:is.arr($)?AnimatedArray:isAnimatedString($)?AnimatedString:AnimatedValue}var withAnimated=($,j)=>{const _e=!is.fun($)||$.prototype&&$.prototype.isReactComponent;return reactExports.forwardRef((et,tt)=>{const nt=reactExports.useRef(null),rt=_e&&reactExports.useCallback(pt=>{nt.current=updateRef(tt,pt)},[tt]),[ot,it]=getAnimatedState(et,j),at=useForceUpdate(),dt=()=>{const pt=nt.current;if(_e&&!pt)return;(pt?j.applyAnimatedValues(pt,ot.getValue(!0)):!1)===!1&&at()},st=new PropsObserver(dt,it),ut=reactExports.useRef();useIsomorphicLayoutEffect(()=>(ut.current=st,each(it,pt=>addFluidObserver(pt,st)),()=>{ut.current&&(each(ut.current.deps,pt=>removeFluidObserver(pt,ut.current)),raf.cancel(ut.current.update))})),reactExports.useEffect(dt,[]),useOnce(()=>()=>{const pt=ut.current;each(pt.deps,gt=>removeFluidObserver(gt,pt))});const ft=j.getComponentProps(ot.getValue());return reactExports.createElement($,{...ft,ref:rt})})},PropsObserver=class{constructor($,j){this.update=$,this.deps=j}eventObserved($){$.type=="change"&&raf.write(this.update)}};function getAnimatedState($,j){const _e=new Set;return TreeContext.dependencies=_e,$.style&&($={...$,style:j.createAnimatedStyle($.style)}),$=new AnimatedObject($),TreeContext.dependencies=null,[$,_e]}function updateRef($,j){return $&&(is.fun($)?$(j):$.current=j),j}var cacheKey=Symbol.for("AnimatedComponent"),createHost=($,{applyAnimatedValues:j=()=>!1,createAnimatedStyle:_e=tt=>new AnimatedObject(tt),getComponentProps:et=tt=>tt}={})=>{const tt={applyAnimatedValues:j,createAnimatedStyle:_e,getComponentProps:et},nt=rt=>{const ot=getDisplayName(rt)||"Anonymous";return is.str(rt)?rt=nt[rt]||(nt[rt]=withAnimated(rt,tt)):rt=rt[cacheKey]||(rt[cacheKey]=withAnimated(rt,tt)),rt.displayName=`Animated(${ot})`,rt};return eachProp($,(rt,ot)=>{is.arr($)&&(ot=getDisplayName(rt)),nt[ot]=nt(rt)}),{animated:nt}},getDisplayName=$=>is.str($)?$:$&&is.str($.displayName)?$.displayName:is.fun($)&&$.name||null;function callProp($,...j){return is.fun($)?$(...j):$}var matchProp=($,j)=>$===!0||!!(j&&$&&(is.fun($)?$(j):toArray($).includes(j))),resolveProp=($,j)=>is.obj($)?j&&$[j]:$,getDefaultProp=($,j)=>$.default===!0?$[j]:$.default?$.default[j]:void 0,noopTransform=$=>$,getDefaultProps=($,j=noopTransform)=>{let _e=DEFAULT_PROPS;$.default&&$.default!==!0&&($=$.default,_e=Object.keys($));const et={};for(const tt of _e){const nt=j($[tt],tt);is.und(nt)||(et[tt]=nt)}return et},DEFAULT_PROPS=["config","onProps","onStart","onChange","onPause","onResume","onRest"],RESERVED_PROPS={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function getForwardProps($){const j={};let _e=0;if(eachProp($,(et,tt)=>{RESERVED_PROPS[tt]||(j[tt]=et,_e++)}),_e)return j}function inferTo($){const j=getForwardProps($);if(j){const _e={to:j};return eachProp($,(et,tt)=>tt in j||(_e[tt]=et)),_e}return{...$}}function computeGoal($){return $=getFluidValue($),is.arr($)?$.map(computeGoal):isAnimatedString($)?globals_exports.createStringInterpolator({range:[0,1],output:[$,$]})(1):$}function hasProps($){for(const j in $)return!0;return!1}function isAsyncTo($){return is.fun($)||is.arr($)&&is.obj($[0])}function detachRefs($,j){var _e;(_e=$.ref)==null||_e.delete($),j==null||j.delete($)}function replaceRef($,j){var _e;j&&$.ref!==j&&((_e=$.ref)==null||_e.delete($),j.add($),$.ref=j)}var config={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},defaults={...config.default,mass:1,damping:1,easing:easings.linear,clamp:!1},AnimationConfig=class{constructor(){this.velocity=0,Object.assign(this,defaults)}};function mergeConfig($,j,_e){_e&&(_e={..._e},sanitizeConfig(_e,j),j={..._e,...j}),sanitizeConfig($,j),Object.assign($,j);for(const rt in defaults)$[rt]==null&&($[rt]=defaults[rt]);let{frequency:et,damping:tt}=$;const{mass:nt}=$;return is.und(et)||(et<.01&&(et=.01),tt<0&&(tt=0),$.tension=Math.pow(2*Math.PI/et,2)*nt,$.friction=4*Math.PI*tt*nt/et),$}function sanitizeConfig($,j){if(!is.und(j.decay))$.duration=void 0;else{const _e=!is.und(j.tension)||!is.und(j.friction);(_e||!is.und(j.frequency)||!is.und(j.damping)||!is.und(j.mass))&&($.duration=void 0,$.decay=void 0),_e&&($.frequency=void 0)}}var emptyArray=[],Animation=class{constructor(){this.changed=!1,this.values=emptyArray,this.toValues=null,this.fromValues=emptyArray,this.config=new AnimationConfig,this.immediate=!1}};function scheduleProps($,{key:j,props:_e,defaultProps:et,state:tt,actions:nt}){return new Promise((rt,ot)=>{let it,at,dt=matchProp(_e.cancel??(et==null?void 0:et.cancel),j);if(dt)ft();else{is.und(_e.pause)||(tt.paused=matchProp(_e.pause,j));let pt=et==null?void 0:et.pause;pt!==!0&&(pt=tt.paused||matchProp(pt,j)),it=callProp(_e.delay||0,j),pt?(tt.resumeQueue.add(ut),nt.pause()):(nt.resume(),ut())}function st(){tt.resumeQueue.add(ut),tt.timeouts.delete(at),at.cancel(),it=at.time-raf.now()}function ut(){it>0&&!globals_exports.skipAnimation?(tt.delayed=!0,at=raf.setTimeout(ft,it),tt.pauseQueue.add(st),tt.timeouts.add(at)):ft()}function ft(){tt.delayed&&(tt.delayed=!1),tt.pauseQueue.delete(st),tt.timeouts.delete(at),$<=(tt.cancelId||0)&&(dt=!0);try{nt.start({..._e,callId:$,cancel:dt},rt)}catch(pt){ot(pt)}}})}var getCombinedResult=($,j)=>j.length==1?j[0]:j.some(_e=>_e.cancelled)?getCancelledResult($.get()):j.every(_e=>_e.noop)?getNoopResult($.get()):getFinishedResult($.get(),j.every(_e=>_e.finished)),getNoopResult=$=>({value:$,noop:!0,finished:!0,cancelled:!1}),getFinishedResult=($,j,_e=!1)=>({value:$,finished:j,cancelled:_e}),getCancelledResult=$=>({value:$,cancelled:!0,finished:!1});function runAsync($,j,_e,et){const{callId:tt,parentId:nt,onRest:rt}=j,{asyncTo:ot,promise:it}=_e;return!nt&&$===ot&&!j.reset?it:_e.promise=(async()=>{_e.asyncId=tt,_e.asyncTo=$;const at=getDefaultProps(j,(yt,mt)=>mt==="onRest"?void 0:yt);let dt,st;const ut=new Promise((yt,mt)=>(dt=yt,st=mt)),ft=yt=>{const mt=tt<=(_e.cancelId||0)&&getCancelledResult(et)||tt!==_e.asyncId&&getFinishedResult(et,!1);if(mt)throw yt.result=mt,st(yt),yt},pt=(yt,mt)=>{const vt=new BailSignal,_t=new SkipAnimationSignal;return(async()=>{if(globals_exports.skipAnimation)throw stopAsync(_e),_t.result=getFinishedResult(et,!1),st(_t),_t;ft(vt);const St=is.obj(yt)?{...yt}:{...mt,to:yt};St.parentId=tt,eachProp(at,(kt,bt)=>{is.und(St[bt])&&(St[bt]=kt)});const At=await et.start(St);return ft(vt),_e.paused&&await new Promise(kt=>{_e.resumeQueue.add(kt)}),At})()};let gt;if(globals_exports.skipAnimation)return stopAsync(_e),getFinishedResult(et,!1);try{let yt;is.arr($)?yt=(async mt=>{for(const vt of mt)await pt(vt)})($):yt=Promise.resolve($(pt,et.stop.bind(et))),await Promise.all([yt.then(dt),ut]),gt=getFinishedResult(et.get(),!0,!1)}catch(yt){if(yt instanceof BailSignal)gt=yt.result;else if(yt instanceof SkipAnimationSignal)gt=yt.result;else throw yt}finally{tt==_e.asyncId&&(_e.asyncId=nt,_e.asyncTo=nt?ot:void 0,_e.promise=nt?it:void 0)}return is.fun(rt)&&raf.batchedUpdates(()=>{rt(gt,et,et.item)}),gt})()}function stopAsync($,j){flush($.timeouts,_e=>_e.cancel()),$.pauseQueue.clear(),$.resumeQueue.clear(),$.asyncId=$.asyncTo=$.promise=void 0,j&&($.cancelId=j)}var BailSignal=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},SkipAnimationSignal=class extends Error{constructor(){super("SkipAnimationSignal")}},isFrameValue=$=>$ instanceof FrameValue,nextId=1,FrameValue=class extends FluidValue{constructor(){super(...arguments),this.id=nextId++,this._priority=0}get priority(){return this._priority}set priority($){this._priority!=$&&(this._priority=$,this._onPriorityChange($))}get(){const $=getAnimated(this);return $&&$.getValue()}to(...$){return globals_exports.to(this,$)}interpolate(...$){return deprecateInterpolate(),globals_exports.to(this,$)}toJSON(){return this.get()}observerAdded($){$==1&&this._attach()}observerRemoved($){$==0&&this._detach()}_attach(){}_detach(){}_onChange($,j=!1){callFluidObservers(this,{type:"change",parent:this,value:$,idle:j})}_onPriorityChange($){this.idle||frameLoop.sort(this),callFluidObservers(this,{type:"priority",parent:this,priority:$})}},$P=Symbol.for("SpringPhase"),HAS_ANIMATED=1,IS_ANIMATING=2,IS_PAUSED=4,hasAnimated=$=>($[$P]&HAS_ANIMATED)>0,isAnimating=$=>($[$P]&IS_ANIMATING)>0,isPaused=$=>($[$P]&IS_PAUSED)>0,setActiveBit=($,j)=>j?$[$P]|=IS_ANIMATING|HAS_ANIMATED:$[$P]&=~IS_ANIMATING,setPausedBit=($,j)=>j?$[$P]|=IS_PAUSED:$[$P]&=~IS_PAUSED,SpringValue=class extends FrameValue{constructor($,j){if(super(),this.animation=new Animation,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!is.und($)||!is.und(j)){const _e=is.obj($)?{...$}:{...j,from:$};is.und(_e.default)&&(_e.default=!0),this.start(_e)}}get idle(){return!(isAnimating(this)||this._state.asyncTo)||isPaused(this)}get goal(){return getFluidValue(this.animation.to)}get velocity(){const $=getAnimated(this);return $ instanceof AnimatedValue?$.lastVelocity||0:$.getPayload().map(j=>j.lastVelocity||0)}get hasAnimated(){return hasAnimated(this)}get isAnimating(){return isAnimating(this)}get isPaused(){return isPaused(this)}get isDelayed(){return this._state.delayed}advance($){let j=!0,_e=!1;const et=this.animation;let{toValues:tt}=et;const{config:nt}=et,rt=getPayload(et.to);!rt&&hasFluidValue(et.to)&&(tt=toArray(getFluidValue(et.to))),et.values.forEach((at,dt)=>{if(at.done)return;const st=at.constructor==AnimatedString?1:rt?rt[dt].lastPosition:tt[dt];let ut=et.immediate,ft=st;if(!ut){if(ft=at.lastPosition,nt.tension<=0){at.done=!0;return}let pt=at.elapsedTime+=$;const gt=et.fromValues[dt],yt=at.v0!=null?at.v0:at.v0=is.arr(nt.velocity)?nt.velocity[dt]:nt.velocity;let mt;const vt=nt.precision||(gt==st?.005:Math.min(1,Math.abs(st-gt)*.001));if(is.und(nt.duration))if(nt.decay){const _t=nt.decay===!0?.998:nt.decay,St=Math.exp(-(1-_t)*pt);ft=gt+yt/(1-_t)*(1-St),ut=Math.abs(at.lastPosition-ft)<=vt,mt=yt*St}else{mt=at.lastVelocity==null?yt:at.lastVelocity;const _t=nt.restVelocity||vt/10,St=nt.clamp?0:nt.bounce,At=!is.und(St),kt=gt==st?at.v0>0:gt<st;let bt,Rt=!1;const Ot=1,Ut=Math.ceil($/Ot);for(let Yt=0;Yt<Ut&&(bt=Math.abs(mt)>_t,!(!bt&&(ut=Math.abs(st-ft)<=vt,ut)));++Yt){At&&(Rt=ft==st||ft>st==kt,Rt&&(mt=-mt*St,ft=st));const rn=-nt.tension*1e-6*(ft-st),mn=-nt.friction*.001*mt,qt=(rn+mn)/nt.mass;mt=mt+qt*Ot,ft=ft+mt*Ot}}else{let _t=1;nt.duration>0&&(this._memoizedDuration!==nt.duration&&(this._memoizedDuration=nt.duration,at.durationProgress>0&&(at.elapsedTime=nt.duration*at.durationProgress,pt=at.elapsedTime+=$)),_t=(nt.progress||0)+pt/this._memoizedDuration,_t=_t>1?1:_t<0?0:_t,at.durationProgress=_t),ft=gt+nt.easing(_t)*(st-gt),mt=(ft-at.lastPosition)/$,ut=_t==1}at.lastVelocity=mt,Number.isNaN(ft)&&(console.warn("Got NaN while animating:",this),ut=!0)}rt&&!rt[dt].done&&(ut=!1),ut?at.done=!0:j=!1,at.setValue(ft,nt.round)&&(_e=!0)});const ot=getAnimated(this),it=ot.getValue();if(j){const at=getFluidValue(et.to);(it!==at||_e)&&!nt.decay?(ot.setValue(at),this._onChange(at)):_e&&nt.decay&&this._onChange(it),this._stop()}else _e&&this._onChange(it)}set($){return raf.batchedUpdates(()=>{this._stop(),this._focus($),this._set($)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(isAnimating(this)){const{to:$,config:j}=this.animation;raf.batchedUpdates(()=>{this._onStart(),j.decay||this._set($,!1),this._stop()})}return this}update($){return(this.queue||(this.queue=[])).push($),this}start($,j){let _e;return is.und($)?(_e=this.queue||[],this.queue=[]):_e=[is.obj($)?$:{...j,to:$}],Promise.all(_e.map(et=>this._update(et))).then(et=>getCombinedResult(this,et))}stop($){const{to:j}=this.animation;return this._focus(this.get()),stopAsync(this._state,$&&this._lastCallId),raf.batchedUpdates(()=>this._stop(j,$)),this}reset(){this._update({reset:!0})}eventObserved($){$.type=="change"?this._start():$.type=="priority"&&(this.priority=$.priority+1)}_prepareNode($){const j=this.key||"";let{to:_e,from:et}=$;_e=is.obj(_e)?_e[j]:_e,(_e==null||isAsyncTo(_e))&&(_e=void 0),et=is.obj(et)?et[j]:et,et==null&&(et=void 0);const tt={to:_e,from:et};return hasAnimated(this)||($.reverse&&([_e,et]=[et,_e]),et=getFluidValue(et),is.und(et)?getAnimated(this)||this._set(_e):this._set(et)),tt}_update({...$},j){const{key:_e,defaultProps:et}=this;$.default&&Object.assign(et,getDefaultProps($,(rt,ot)=>/^on/.test(ot)?resolveProp(rt,_e):rt)),mergeActiveFn(this,$,"onProps"),sendEvent(this,"onProps",$,this);const tt=this._prepareNode($);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const nt=this._state;return scheduleProps(++this._lastCallId,{key:_e,props:$,defaultProps:et,state:nt,actions:{pause:()=>{isPaused(this)||(setPausedBit(this,!0),flushCalls(nt.pauseQueue),sendEvent(this,"onPause",getFinishedResult(this,checkFinished(this,this.animation.to)),this))},resume:()=>{isPaused(this)&&(setPausedBit(this,!1),isAnimating(this)&&this._resume(),flushCalls(nt.resumeQueue),sendEvent(this,"onResume",getFinishedResult(this,checkFinished(this,this.animation.to)),this))},start:this._merge.bind(this,tt)}}).then(rt=>{if($.loop&&rt.finished&&!(j&&rt.noop)){const ot=createLoopUpdate($);if(ot)return this._update(ot,!0)}return rt})}_merge($,j,_e){if(j.cancel)return this.stop(!0),_e(getCancelledResult(this));const et=!is.und($.to),tt=!is.und($.from);if(et||tt)if(j.callId>this._lastToId)this._lastToId=j.callId;else return _e(getCancelledResult(this));const{key:nt,defaultProps:rt,animation:ot}=this,{to:it,from:at}=ot;let{to:dt=it,from:st=at}=$;tt&&!et&&(!j.default||is.und(dt))&&(dt=st),j.reverse&&([dt,st]=[st,dt]);const ut=!isEqual(st,at);ut&&(ot.from=st),st=getFluidValue(st);const ft=!isEqual(dt,it);ft&&this._focus(dt);const pt=isAsyncTo(j.to),{config:gt}=ot,{decay:yt,velocity:mt}=gt;(et||tt)&&(gt.velocity=0),j.config&&!pt&&mergeConfig(gt,callProp(j.config,nt),j.config!==rt.config?callProp(rt.config,nt):void 0);let vt=getAnimated(this);if(!vt||is.und(dt))return _e(getFinishedResult(this,!0));const _t=is.und(j.reset)?tt&&!j.default:!is.und(st)&&matchProp(j.reset,nt),St=_t?st:this.get(),At=computeGoal(dt),kt=is.num(At)||is.arr(At)||isAnimatedString(At),bt=!pt&&(!kt||matchProp(rt.immediate||j.immediate,nt));if(ft){const Yt=getAnimatedType(dt);if(Yt!==vt.constructor)if(bt)vt=this._set(At);else throw Error(`Cannot animate between ${vt.constructor.name} and ${Yt.name}, as the "to" prop suggests`)}const Rt=vt.constructor;let Ot=hasFluidValue(dt),Ut=!1;if(!Ot){const Yt=_t||!hasAnimated(this)&&ut;(ft||Yt)&&(Ut=isEqual(computeGoal(St),At),Ot=!Ut),(!isEqual(ot.immediate,bt)&&!bt||!isEqual(gt.decay,yt)||!isEqual(gt.velocity,mt))&&(Ot=!0)}if(Ut&&isAnimating(this)&&(ot.changed&&!_t?Ot=!0:Ot||this._stop(it)),!pt&&((Ot||hasFluidValue(it))&&(ot.values=vt.getPayload(),ot.toValues=hasFluidValue(dt)?null:Rt==AnimatedString?[1]:toArray(At)),ot.immediate!=bt&&(ot.immediate=bt,!bt&&!_t&&this._set(it)),Ot)){const{onRest:Yt}=ot;each(ACTIVE_EVENTS,mn=>mergeActiveFn(this,j,mn));const rn=getFinishedResult(this,checkFinished(this,it));flushCalls(this._pendingCalls,rn),this._pendingCalls.add(_e),ot.changed&&raf.batchedUpdates(()=>{var mn;ot.changed=!_t,Yt==null||Yt(rn,this),_t?callProp(rt.onRest,rn):(mn=ot.onStart)==null||mn.call(ot,rn,this)})}_t&&this._set(St),pt?_e(runAsync(j.to,j,this._state,this)):Ot?this._start():isAnimating(this)&&!ft?this._pendingCalls.add(_e):_e(getNoopResult(St))}_focus($){const j=this.animation;$!==j.to&&(getFluidObservers(this)&&this._detach(),j.to=$,getFluidObservers(this)&&this._attach())}_attach(){let $=0;const{to:j}=this.animation;hasFluidValue(j)&&(addFluidObserver(j,this),isFrameValue(j)&&($=j.priority+1)),this.priority=$}_detach(){const{to:$}=this.animation;hasFluidValue($)&&removeFluidObserver($,this)}_set($,j=!0){const _e=getFluidValue($);if(!is.und(_e)){const et=getAnimated(this);if(!et||!isEqual(_e,et.getValue())){const tt=getAnimatedType(_e);!et||et.constructor!=tt?setAnimated(this,tt.create(_e)):et.setValue(_e),et&&raf.batchedUpdates(()=>{this._onChange(_e,j)})}}return getAnimated(this)}_onStart(){const $=this.animation;$.changed||($.changed=!0,sendEvent(this,"onStart",getFinishedResult(this,checkFinished(this,$.to)),this))}_onChange($,j){j||(this._onStart(),callProp(this.animation.onChange,$,this)),callProp(this.defaultProps.onChange,$,this),super._onChange($,j)}_start(){const $=this.animation;getAnimated(this).reset(getFluidValue($.to)),$.immediate||($.fromValues=$.values.map(j=>j.lastPosition)),isAnimating(this)||(setActiveBit(this,!0),isPaused(this)||this._resume())}_resume(){globals_exports.skipAnimation?this.finish():frameLoop.start(this)}_stop($,j){if(isAnimating(this)){setActiveBit(this,!1);const _e=this.animation;each(_e.values,tt=>{tt.done=!0}),_e.toValues&&(_e.onChange=_e.onPause=_e.onResume=void 0),callFluidObservers(this,{type:"idle",parent:this});const et=j?getCancelledResult(this.get()):getFinishedResult(this.get(),checkFinished(this,$??_e.to));flushCalls(this._pendingCalls,et),_e.changed&&(_e.changed=!1,sendEvent(this,"onRest",et,this))}}};function checkFinished($,j){const _e=computeGoal(j),et=computeGoal($.get());return isEqual(et,_e)}function createLoopUpdate($,j=$.loop,_e=$.to){const et=callProp(j);if(et){const tt=et!==!0&&inferTo(et),nt=(tt||$).reverse,rt=!tt||tt.reset;return createUpdate({...$,loop:j,default:!1,pause:void 0,to:!nt||isAsyncTo(_e)?_e:void 0,from:rt?$.from:void 0,reset:rt,...tt})}}function createUpdate($){const{to:j,from:_e}=$=inferTo($),et=new Set;return is.obj(j)&&findDefined(j,et),is.obj(_e)&&findDefined(_e,et),$.keys=et.size?Array.from(et):null,$}function declareUpdate($){const j=createUpdate($);return is.und(j.default)&&(j.default=getDefaultProps(j)),j}function findDefined($,j){eachProp($,(_e,et)=>_e!=null&&j.add(et))}var ACTIVE_EVENTS=["onStart","onRest","onChange","onPause","onResume"];function mergeActiveFn($,j,_e){$.animation[_e]=j[_e]!==getDefaultProp(j,_e)?resolveProp(j[_e],$.key):void 0}function sendEvent($,j,..._e){var et,tt,nt,rt;(tt=(et=$.animation)[j])==null||tt.call(et,..._e),(rt=(nt=$.defaultProps)[j])==null||rt.call(nt,..._e)}var BATCHED_EVENTS=["onStart","onChange","onRest"],nextId2=1,Controller=class{constructor($,j){this.id=nextId2++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),j&&(this._flush=j),$&&this.start({default:!0,...$})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every($=>$.idle&&!$.isDelayed&&!$.isPaused)}get item(){return this._item}set item($){this._item=$}get(){const $={};return this.each((j,_e)=>$[_e]=j.get()),$}set($){for(const j in $){const _e=$[j];is.und(_e)||this.springs[j].set(_e)}}update($){return $&&this.queue.push(createUpdate($)),this}start($){let{queue:j}=this;return $?j=toArray($).map(createUpdate):this.queue=[],this._flush?this._flush(this,j):(prepareKeys(this,j),flushUpdateQueue(this,j))}stop($,j){if($!==!!$&&(j=$),j){const _e=this.springs;each(toArray(j),et=>_e[et].stop(!!$))}else stopAsync(this._state,this._lastAsyncId),this.each(_e=>_e.stop(!!$));return this}pause($){if(is.und($))this.start({pause:!0});else{const j=this.springs;each(toArray($),_e=>j[_e].pause())}return this}resume($){if(is.und($))this.start({pause:!1});else{const j=this.springs;each(toArray($),_e=>j[_e].resume())}return this}each($){eachProp(this.springs,$)}_onFrame(){const{onStart:$,onChange:j,onRest:_e}=this._events,et=this._active.size>0,tt=this._changed.size>0;(et&&!this._started||tt&&!this._started)&&(this._started=!0,flush($,([ot,it])=>{it.value=this.get(),ot(it,this,this._item)}));const nt=!et&&this._started,rt=tt||nt&&_e.size?this.get():null;tt&&j.size&&flush(j,([ot,it])=>{it.value=rt,ot(it,this,this._item)}),nt&&(this._started=!1,flush(_e,([ot,it])=>{it.value=rt,ot(it,this,this._item)}))}eventObserved($){if($.type=="change")this._changed.add($.parent),$.idle||this._active.add($.parent);else if($.type=="idle")this._active.delete($.parent);else return;raf.onFrame(this._onFrame)}};function flushUpdateQueue($,j){return Promise.all(j.map(_e=>flushUpdate($,_e))).then(_e=>getCombinedResult($,_e))}async function flushUpdate($,j,_e){const{keys:et,to:tt,from:nt,loop:rt,onRest:ot,onResolve:it}=j,at=is.obj(j.default)&&j.default;rt&&(j.loop=!1),tt===!1&&(j.to=null),nt===!1&&(j.from=null);const dt=is.arr(tt)||is.fun(tt)?tt:void 0;dt?(j.to=void 0,j.onRest=void 0,at&&(at.onRest=void 0)):each(BATCHED_EVENTS,gt=>{const yt=j[gt];if(is.fun(yt)){const mt=$._events[gt];j[gt]=({finished:vt,cancelled:_t})=>{const St=mt.get(yt);St?(vt||(St.finished=!1),_t&&(St.cancelled=!0)):mt.set(yt,{value:null,finished:vt||!1,cancelled:_t||!1})},at&&(at[gt]=j[gt])}});const st=$._state;j.pause===!st.paused?(st.paused=j.pause,flushCalls(j.pause?st.pauseQueue:st.resumeQueue)):st.paused&&(j.pause=!0);const ut=(et||Object.keys($.springs)).map(gt=>$.springs[gt].start(j)),ft=j.cancel===!0||getDefaultProp(j,"cancel")===!0;(dt||ft&&st.asyncId)&&ut.push(scheduleProps(++$._lastAsyncId,{props:j,state:st,actions:{pause:noop,resume:noop,start(gt,yt){ft?(stopAsync(st,$._lastAsyncId),yt(getCancelledResult($))):(gt.onRest=ot,yt(runAsync(dt,gt,st,$)))}}})),st.paused&&await new Promise(gt=>{st.resumeQueue.add(gt)});const pt=getCombinedResult($,await Promise.all(ut));if(rt&&pt.finished&&!(_e&&pt.noop)){const gt=createLoopUpdate(j,rt,tt);if(gt)return prepareKeys($,[gt]),flushUpdate($,gt,!0)}return it&&raf.batchedUpdates(()=>it(pt,$,$.item)),pt}function getSprings($,j){const _e={...$.springs};return j&&each(toArray(j),et=>{is.und(et.keys)&&(et=createUpdate(et)),is.obj(et.to)||(et={...et,to:void 0}),prepareSprings(_e,et,tt=>createSpring(tt))}),setSprings($,_e),_e}function setSprings($,j){eachProp(j,(_e,et)=>{$.springs[et]||($.springs[et]=_e,addFluidObserver(_e,$))})}function createSpring($,j){const _e=new SpringValue;return _e.key=$,j&&addFluidObserver(_e,j),_e}function prepareSprings($,j,_e){j.keys&&each(j.keys,et=>{($[et]||($[et]=_e(et)))._prepareNode(j)})}function prepareKeys($,j){each(j,_e=>{prepareSprings($.springs,_e,et=>createSpring(et,$))})}var SpringContext=({children:$,...j})=>{const _e=reactExports.useContext(ctx),et=j.pause||!!_e.pause,tt=j.immediate||!!_e.immediate;j=useMemoOne(()=>({pause:et,immediate:tt}),[et,tt]);const{Provider:nt}=ctx;return reactExports.createElement(nt,{value:j},$)},ctx=makeContext(SpringContext,{});SpringContext.Provider=ctx.Provider;SpringContext.Consumer=ctx.Consumer;function makeContext($,j){return Object.assign($,reactExports.createContext(j)),$.Provider._context=$,$.Consumer._context=$,$}var SpringRef=()=>{const $=[],j=function(et){deprecateDirectCall();const tt=[];return each($,(nt,rt)=>{if(is.und(et))tt.push(nt.start());else{const ot=_e(et,nt,rt);ot&&tt.push(nt.start(ot))}}),tt};j.current=$,j.add=function(et){$.includes(et)||$.push(et)},j.delete=function(et){const tt=$.indexOf(et);~tt&&$.splice(tt,1)},j.pause=function(){return each($,et=>et.pause(...arguments)),this},j.resume=function(){return each($,et=>et.resume(...arguments)),this},j.set=function(et){each($,(tt,nt)=>{const rt=is.fun(et)?et(nt,tt):et;rt&&tt.set(rt)})},j.start=function(et){const tt=[];return each($,(nt,rt)=>{if(is.und(et))tt.push(nt.start());else{const ot=this._getProps(et,nt,rt);ot&&tt.push(nt.start(ot))}}),tt},j.stop=function(){return each($,et=>et.stop(...arguments)),this},j.update=function(et){return each($,(tt,nt)=>tt.update(this._getProps(et,tt,nt))),this};const _e=function(et,tt,nt){return is.fun(et)?et(nt,tt):et};return j._getProps=_e,j};function useSprings($,j,_e){const et=is.fun(j)&&j;et&&!_e&&(_e=[]);const tt=reactExports.useMemo(()=>et||arguments.length==3?SpringRef():void 0,[]),nt=reactExports.useRef(0),rt=useForceUpdate(),ot=reactExports.useMemo(()=>({ctrls:[],queue:[],flush(mt,vt){const _t=getSprings(mt,vt);return nt.current>0&&!ot.queue.length&&!Object.keys(_t).some(At=>!mt.springs[At])?flushUpdateQueue(mt,vt):new Promise(At=>{setSprings(mt,_t),ot.queue.push(()=>{At(flushUpdateQueue(mt,vt))}),rt()})}}),[]),it=reactExports.useRef([...ot.ctrls]),at=[],dt=usePrev($)||0;reactExports.useMemo(()=>{each(it.current.slice($,dt),mt=>{detachRefs(mt,tt),mt.stop(!0)}),it.current.length=$,st(dt,$)},[$]),reactExports.useMemo(()=>{st(0,Math.min(dt,$))},_e);function st(mt,vt){for(let _t=mt;_t<vt;_t++){const St=it.current[_t]||(it.current[_t]=new Controller(null,ot.flush)),At=et?et(_t,St):j[_t];At&&(at[_t]=declareUpdate(At))}}const ut=it.current.map((mt,vt)=>getSprings(mt,at[vt])),ft=reactExports.useContext(SpringContext),pt=usePrev(ft),gt=ft!==pt&&hasProps(ft);useIsomorphicLayoutEffect(()=>{nt.current++,ot.ctrls=it.current;const{queue:mt}=ot;mt.length&&(ot.queue=[],each(mt,vt=>vt())),each(it.current,(vt,_t)=>{tt==null||tt.add(vt),gt&&vt.start({default:ft});const St=at[_t];St&&(replaceRef(vt,St.ref),vt.ref?vt.queue.push(St):vt.start(St))})}),useOnce(()=>()=>{each(ot.ctrls,mt=>mt.stop(!0))});const yt=ut.map(mt=>({...mt}));return tt?[yt,tt]:yt}function useSpring($,j){const _e=is.fun($),[[et],tt]=useSprings(1,_e?$:[$],_e?[]:j);return _e||arguments.length==2?[et,tt]:et}function useTransition($,j,_e){const et=is.fun(j)&&j,{reset:tt,sort:nt,trail:rt=0,expires:ot=!0,exitBeforeEnter:it=!1,onDestroyed:at,ref:dt,config:st}=et?et():j,ut=reactExports.useMemo(()=>et||arguments.length==3?SpringRef():void 0,[]),ft=toArray($),pt=[],gt=reactExports.useRef(null),yt=tt?null:gt.current;useIsomorphicLayoutEffect(()=>{gt.current=pt}),useOnce(()=>(each(pt,qt=>{ut==null||ut.add(qt.ctrl),qt.ctrl.ref=ut}),()=>{each(gt.current,qt=>{qt.expired&&clearTimeout(qt.expirationId),detachRefs(qt.ctrl,ut),qt.ctrl.stop(!0)})}));const mt=getKeys(ft,et?et():j,yt),vt=tt&&gt.current||[];useIsomorphicLayoutEffect(()=>each(vt,({ctrl:qt,item:Zt,key:Jt})=>{detachRefs(qt,ut),callProp(at,Zt,Jt)}));const _t=[];if(yt&&each(yt,(qt,Zt)=>{qt.expired?(clearTimeout(qt.expirationId),vt.push(qt)):(Zt=_t[Zt]=mt.indexOf(qt.key),~Zt&&(pt[Zt]=qt))}),each(ft,(qt,Zt)=>{pt[Zt]||(pt[Zt]={key:mt[Zt],item:qt,phase:"mount",ctrl:new Controller},pt[Zt].ctrl.item=qt)}),_t.length){let qt=-1;const{leave:Zt}=et?et():j;each(_t,(Jt,un)=>{const Wt=yt[un];~Jt?(qt=pt.indexOf(Wt),pt[qt]={...Wt,item:ft[Jt]}):Zt&&pt.splice(++qt,0,Wt)})}is.fun(nt)&&pt.sort((qt,Zt)=>nt(qt.item,Zt.item));let St=-rt;const At=useForceUpdate(),kt=getDefaultProps(j),bt=new Map,Rt=reactExports.useRef(new Map),Ot=reactExports.useRef(!1);each(pt,(qt,Zt)=>{const Jt=qt.key,un=qt.phase,Wt=et?et():j;let Qt,on;const nn=callProp(Wt.delay||0,Jt);if(un=="mount")Qt=Wt.enter,on="enter";else{const En=mt.indexOf(Jt)<0;if(un!="leave")if(En)Qt=Wt.leave,on="leave";else if(Qt=Wt.update)on="update";else return;else if(!En)Qt=Wt.enter,on="enter";else return}if(Qt=callProp(Qt,qt.item,Zt),Qt=is.obj(Qt)?inferTo(Qt):{to:Qt},!Qt.config){const En=st||kt.config;Qt.config=callProp(En,qt.item,Zt,on)}St+=rt;const cn={...kt,delay:nn+St,ref:dt,immediate:Wt.immediate,reset:!1,...Qt};if(on=="enter"&&is.und(cn.from)){const En=et?et():j,Rn=is.und(En.initial)||yt?En.from:En.initial;cn.from=callProp(Rn,qt.item,Zt)}const{onResolve:Sn}=cn;cn.onResolve=En=>{callProp(Sn,En);const Rn=gt.current,tn=Rn.find(Cn=>Cn.key===Jt);if(tn&&!(En.cancelled&&tn.phase!="update")&&tn.ctrl.idle){const Cn=Rn.every(en=>en.ctrl.idle);if(tn.phase=="leave"){const en=callProp(ot,tn.item);if(en!==!1){const An=en===!0?0:en;if(tn.expired=!0,!Cn&&An>0){An<=2147483647&&(tn.expirationId=setTimeout(At,An));return}}}Cn&&Rn.some(en=>en.expired)&&(Rt.current.delete(tn),it&&(Ot.current=!0),At())}};const vn=getSprings(qt.ctrl,cn);on==="leave"&&it?Rt.current.set(qt,{phase:on,springs:vn,payload:cn}):bt.set(qt,{phase:on,springs:vn,payload:cn})});const Ut=reactExports.useContext(SpringContext),Yt=usePrev(Ut),rn=Ut!==Yt&&hasProps(Ut);useIsomorphicLayoutEffect(()=>{rn&&each(pt,qt=>{qt.ctrl.start({default:Ut})})},[Ut]),each(bt,(qt,Zt)=>{if(Rt.current.size){const Jt=pt.findIndex(un=>un.key===Zt.key);pt.splice(Jt,1)}}),useIsomorphicLayoutEffect(()=>{each(Rt.current.size?Rt.current:bt,({phase:qt,payload:Zt},Jt)=>{const{ctrl:un}=Jt;Jt.phase=qt,ut==null||ut.add(un),rn&&qt=="enter"&&un.start({default:Ut}),Zt&&(replaceRef(un,Zt.ref),(un.ref||ut)&&!Ot.current?un.update(Zt):(un.start(Zt),Ot.current&&(Ot.current=!1)))})},tt?void 0:_e);const mn=qt=>reactExports.createElement(reactExports.Fragment,null,pt.map((Zt,Jt)=>{const{springs:un}=bt.get(Zt)||Zt.ctrl,Wt=qt({...un},Zt.item,Zt,Jt);return Wt&&Wt.type?reactExports.createElement(Wt.type,{...Wt.props,key:is.str(Zt.key)||is.num(Zt.key)?Zt.key:Zt.ctrl.id,ref:Wt.ref}):Wt}));return ut?[mn,ut]:mn}var nextKey=1;function getKeys($,{key:j,keys:_e=j},et){if(_e===null){const tt=new Set;return $.map(nt=>{const rt=et&&et.find(ot=>ot.item===nt&&ot.phase!=="leave"&&!tt.has(ot));return rt?(tt.add(rt),rt.key):nextKey++})}return is.und(_e)?$:is.fun(_e)?$.map(_e):toArray(_e)}var Interpolation=class extends FrameValue{constructor($,j){super(),this.source=$,this.idle=!0,this._active=new Set,this.calc=createInterpolator(...j);const _e=this._get(),et=getAnimatedType(_e);setAnimated(this,et.create(_e))}advance($){const j=this._get(),_e=this.get();isEqual(j,_e)||(getAnimated(this).setValue(j),this._onChange(j,this.idle)),!this.idle&&checkIdle(this._active)&&becomeIdle(this)}_get(){const $=is.arr(this.source)?this.source.map(getFluidValue):toArray(getFluidValue(this.source));return this.calc(...$)}_start(){this.idle&&!checkIdle(this._active)&&(this.idle=!1,each(getPayload(this),$=>{$.done=!1}),globals_exports.skipAnimation?(raf.batchedUpdates(()=>this.advance()),becomeIdle(this)):frameLoop.start(this))}_attach(){let $=1;each(toArray(this.source),j=>{hasFluidValue(j)&&addFluidObserver(j,this),isFrameValue(j)&&(j.idle||this._active.add(j),$=Math.max($,j.priority+1))}),this.priority=$,this._start()}_detach(){each(toArray(this.source),$=>{hasFluidValue($)&&removeFluidObserver($,this)}),this._active.clear(),becomeIdle(this)}eventObserved($){$.type=="change"?$.idle?this.advance():(this._active.add($.parent),this._start()):$.type=="idle"?this._active.delete($.parent):$.type=="priority"&&(this.priority=toArray(this.source).reduce((j,_e)=>Math.max(j,(isFrameValue(_e)?_e.priority:0)+1),0))}};function isIdle($){return $.idle!==!1}function checkIdle($){return!$.size||Array.from($).every(isIdle)}function becomeIdle($){$.idle||($.idle=!0,each(getPayload($),j=>{j.done=!0}),callFluidObservers($,{type:"idle",parent:$}))}globals_exports.assign({createStringInterpolator:createStringInterpolator2,to:($,j)=>new Interpolation($,j)});var isCustomPropRE=/^--/;function dangerousStyleValue($,j){return j==null||typeof j=="boolean"||j===""?"":typeof j=="number"&&j!==0&&!isCustomPropRE.test($)&&!(isUnitlessNumber.hasOwnProperty($)&&isUnitlessNumber[$])?j+"px":(""+j).trim()}var attributeCache={};function applyAnimatedValues($,j){if(!$.nodeType||!$.setAttribute)return!1;const _e=$.nodeName==="filter"||$.parentNode&&$.parentNode.nodeName==="filter",{style:et,children:tt,scrollTop:nt,scrollLeft:rt,viewBox:ot,...it}=j,at=Object.values(it),dt=Object.keys(it).map(st=>_e||$.hasAttribute(st)?st:attributeCache[st]||(attributeCache[st]=st.replace(/([A-Z])/g,ut=>"-"+ut.toLowerCase())));tt!==void 0&&($.textContent=tt);for(const st in et)if(et.hasOwnProperty(st)){const ut=dangerousStyleValue(st,et[st]);isCustomPropRE.test(st)?$.style.setProperty(st,ut):$.style[st]=ut}dt.forEach((st,ut)=>{$.setAttribute(st,at[ut])}),nt!==void 0&&($.scrollTop=nt),rt!==void 0&&($.scrollLeft=rt),ot!==void 0&&$.setAttribute("viewBox",ot)}var isUnitlessNumber={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},prefixKey=($,j)=>$+j.charAt(0).toUpperCase()+j.substring(1),prefixes=["Webkit","Ms","Moz","O"];isUnitlessNumber=Object.keys(isUnitlessNumber).reduce(($,j)=>(prefixes.forEach(_e=>$[prefixKey(_e,j)]=$[j]),$),isUnitlessNumber);var domTransforms=/^(matrix|translate|scale|rotate|skew)/,pxTransforms=/^(translate)/,degTransforms=/^(rotate|skew)/,addUnit=($,j)=>is.num($)&&$!==0?$+j:$,isValueIdentity=($,j)=>is.arr($)?$.every(_e=>isValueIdentity(_e,j)):is.num($)?$===j:parseFloat($)===j,AnimatedStyle=class extends AnimatedObject{constructor({x:$,y:j,z:_e,...et}){const tt=[],nt=[];($||j||_e)&&(tt.push([$||0,j||0,_e||0]),nt.push(rt=>[`translate3d(${rt.map(ot=>addUnit(ot,"px")).join(",")})`,isValueIdentity(rt,0)])),eachProp(et,(rt,ot)=>{if(ot==="transform")tt.push([rt||""]),nt.push(it=>[it,it===""]);else if(domTransforms.test(ot)){if(delete et[ot],is.und(rt))return;const it=pxTransforms.test(ot)?"px":degTransforms.test(ot)?"deg":"";tt.push(toArray(rt)),nt.push(ot==="rotate3d"?([at,dt,st,ut])=>[`rotate3d(${at},${dt},${st},${addUnit(ut,it)})`,isValueIdentity(ut,0)]:at=>[`${ot}(${at.map(dt=>addUnit(dt,it)).join(",")})`,isValueIdentity(at,ot.startsWith("scale")?1:0)])}}),tt.length&&(et.transform=new FluidTransform(tt,nt)),super(et)}},FluidTransform=class extends FluidValue{constructor($,j){super(),this.inputs=$,this.transforms=j,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let $="",j=!0;return each(this.inputs,(_e,et)=>{const tt=getFluidValue(_e[0]),[nt,rt]=this.transforms[et](is.arr(tt)?tt:_e.map(getFluidValue));$+=" "+nt,j=j&&rt}),j?"none":$}observerAdded($){$==1&&each(this.inputs,j=>each(j,_e=>hasFluidValue(_e)&&addFluidObserver(_e,this)))}observerRemoved($){$==0&&each(this.inputs,j=>each(j,_e=>hasFluidValue(_e)&&removeFluidObserver(_e,this)))}eventObserved($){$.type=="change"&&(this._value=null),callFluidObservers(this,$)}},primitives=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];globals_exports.assign({batchedUpdates:reactDomExports.unstable_batchedUpdates,createStringInterpolator:createStringInterpolator2,colors:colors2});var host=createHost(primitives,{applyAnimatedValues,createAnimatedStyle:$=>new AnimatedStyle($),getComponentProps:({scrollTop:$,scrollLeft:j,..._e})=>_e}),animated=host.animated;function useFadeTransition($){return useTransition($,{from:{opacity:0,transform:"translate(0, -2%) scale(0.96)"},enter:{opacity:1,transform:"translate(0, 0) scale(1)"},leave:{opacity:0,transform:"translate(0, -2%) scale(0.96)"}})}const QspInput=({attrs:$,children:j})=>{const _e=useAtom_2(input$),[et,tt,nt]=useAttributes($,"qsp-input"),rt=useFadeTransition(_e.isOpen);return jsxRuntimeExports.jsx(buttonContext.Provider,{value:{okAction:ot=>{ot.preventDefault(),input$.actions.finish()},cancelAction:ot=>{ot.preventDefault(),input$.actions.close()}},children:jsxRuntimeExports.jsx(Root$6,{open:_e.isOpen,onOpenChange:()=>input$.actions.close(),children:rt((ot,it)=>it?jsxRuntimeExports.jsxs(Portal$3,{container:document.getElementById("portal-container"),children:[jsxRuntimeExports.jsx(Overlay,{className:"qsp-overlay"}),jsxRuntimeExports.jsx(Content$1,{forceMount:!0,asChild:!0,children:jsxRuntimeExports.jsx(animated.div,{style:ot,className:"qsp-dialog-container",children:jsxRuntimeExports.jsx(et,{style:tt,...nt,children:jsxRuntimeExports.jsx("form",{onSubmit:at=>{at.preventDefault(),input$.actions.finish()},children:j})})})})]}):null)})})},QspInputContent=({attrs:$})=>{const{content:j,key:_e}=useAtom_2(parsedInputContent$),[et,tt,{useFormat:nt,...rt}]=useAttributes($,"qsp-input-content");return jsxRuntimeExports.jsx(Description$1,{asChild:!0,children:jsxRuntimeExports.jsx(QspScrollable,{attrs:{},children:reactExports.createElement(et,{style:tt,...rt,key:_e},jsxRuntimeExports.jsx(Markup,{content:j}))})})},QspInputTag=({attrs:$})=>{const[,j,_e]=useAttributes($,"input","qsp-input-tag"),et=useAtom_2(input$),tt=nt=>{input$.actions.enter(nt.target.value)};return jsxRuntimeExports.jsx("input",{style:j,..._e,type:"text",value:et.entered,onInput:tt,autoFocus:!0})};function createCollection($){const j=$+"CollectionProvider",[_e,et]=createContextScope(j),[tt,nt]=_e(j,{collectionRef:{current:null},itemMap:new Map}),rt=ft=>{const{scope:pt,children:gt}=ft,yt=React$1.useRef(null),mt=React$1.useRef(new Map).current;return jsxRuntimeExports.jsx(tt,{scope:pt,itemMap:mt,collectionRef:yt,children:gt})};rt.displayName=j;const ot=$+"CollectionSlot",it=React$1.forwardRef((ft,pt)=>{const{scope:gt,children:yt}=ft,mt=nt(ot,gt),vt=useComposedRefs(pt,mt.collectionRef);return jsxRuntimeExports.jsx(Slot,{ref:vt,children:yt})});it.displayName=ot;const at=$+"CollectionItemSlot",dt="data-radix-collection-item",st=React$1.forwardRef((ft,pt)=>{const{scope:gt,children:yt,...mt}=ft,vt=React$1.useRef(null),_t=useComposedRefs(pt,vt),St=nt(at,gt);return React$1.useEffect(()=>(St.itemMap.set(vt,{ref:vt,...mt}),()=>void St.itemMap.delete(vt))),jsxRuntimeExports.jsx(Slot,{[dt]:"",ref:_t,children:yt})});st.displayName=at;function ut(ft){const pt=nt($+"CollectionConsumer",ft);return React$1.useCallback(()=>{const yt=pt.collectionRef.current;if(!yt)return[];const mt=Array.from(yt.querySelectorAll(`[${dt}]`));return Array.from(pt.itemMap.values()).sort((St,At)=>mt.indexOf(St.ref.current)-mt.indexOf(At.ref.current))},[pt.collectionRef,pt.itemMap])}return[{Provider:rt,Slot:it,ItemSlot:st},ut,et]}const sides=["top","right","bottom","left"],min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=$=>({x:$,y:$}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp($,j,_e){return max($,min(j,_e))}function evaluate($,j){return typeof $=="function"?$(j):$}function getSide($){return $.split("-")[0]}function getAlignment($){return $.split("-")[1]}function getOppositeAxis($){return $==="x"?"y":"x"}function getAxisLength($){return $==="y"?"height":"width"}function getSideAxis($){return["top","bottom"].includes(getSide($))?"y":"x"}function getAlignmentAxis($){return getOppositeAxis(getSideAxis($))}function getAlignmentSides($,j,_e){_e===void 0&&(_e=!1);const et=getAlignment($),tt=getAlignmentAxis($),nt=getAxisLength(tt);let rt=tt==="x"?et===(_e?"end":"start")?"right":"left":et==="start"?"bottom":"top";return j.reference[nt]>j.floating[nt]&&(rt=getOppositePlacement(rt)),[rt,getOppositePlacement(rt)]}function getExpandedPlacements($){const j=getOppositePlacement($);return[getOppositeAlignmentPlacement($),j,getOppositeAlignmentPlacement(j)]}function getOppositeAlignmentPlacement($){return $.replace(/start|end/g,j=>oppositeAlignmentMap[j])}function getSideList($,j,_e){const et=["left","right"],tt=["right","left"],nt=["top","bottom"],rt=["bottom","top"];switch($){case"top":case"bottom":return _e?j?tt:et:j?et:tt;case"left":case"right":return j?nt:rt;default:return[]}}function getOppositeAxisPlacements($,j,_e,et){const tt=getAlignment($);let nt=getSideList(getSide($),_e==="start",et);return tt&&(nt=nt.map(rt=>rt+"-"+tt),j&&(nt=nt.concat(nt.map(getOppositeAlignmentPlacement)))),nt}function getOppositePlacement($){return $.replace(/left|right|bottom|top/g,j=>oppositeSideMap[j])}function expandPaddingObject($){return{top:0,right:0,bottom:0,left:0,...$}}function getPaddingObject($){return typeof $!="number"?expandPaddingObject($):{top:$,right:$,bottom:$,left:$}}function rectToClientRect($){return{...$,top:$.y,left:$.x,right:$.x+$.width,bottom:$.y+$.height}}function computeCoordsFromPlacement($,j,_e){let{reference:et,floating:tt}=$;const nt=getSideAxis(j),rt=getAlignmentAxis(j),ot=getAxisLength(rt),it=getSide(j),at=nt==="y",dt=et.x+et.width/2-tt.width/2,st=et.y+et.height/2-tt.height/2,ut=et[ot]/2-tt[ot]/2;let ft;switch(it){case"top":ft={x:dt,y:et.y-tt.height};break;case"bottom":ft={x:dt,y:et.y+et.height};break;case"right":ft={x:et.x+et.width,y:st};break;case"left":ft={x:et.x-tt.width,y:st};break;default:ft={x:et.x,y:et.y}}switch(getAlignment(j)){case"start":ft[rt]-=ut*(_e&&at?-1:1);break;case"end":ft[rt]+=ut*(_e&&at?-1:1);break}return ft}const computePosition$1=async($,j,_e)=>{const{placement:et="bottom",strategy:tt="absolute",middleware:nt=[],platform:rt}=_e,ot=nt.filter(Boolean),it=await(rt.isRTL==null?void 0:rt.isRTL(j));let at=await rt.getElementRects({reference:$,floating:j,strategy:tt}),{x:dt,y:st}=computeCoordsFromPlacement(at,et,it),ut=et,ft={},pt=0;for(let gt=0;gt<ot.length;gt++){const{name:yt,fn:mt}=ot[gt],{x:vt,y:_t,data:St,reset:At}=await mt({x:dt,y:st,initialPlacement:et,placement:ut,strategy:tt,middlewareData:ft,rects:at,platform:rt,elements:{reference:$,floating:j}});if(dt=vt??dt,st=_t??st,ft={...ft,[yt]:{...ft[yt],...St}},At&&pt<=50){pt++,typeof At=="object"&&(At.placement&&(ut=At.placement),At.rects&&(at=At.rects===!0?await rt.getElementRects({reference:$,floating:j,strategy:tt}):At.rects),{x:dt,y:st}=computeCoordsFromPlacement(at,ut,it)),gt=-1;continue}}return{x:dt,y:st,placement:ut,strategy:tt,middlewareData:ft}};async function detectOverflow($,j){var _e;j===void 0&&(j={});const{x:et,y:tt,platform:nt,rects:rt,elements:ot,strategy:it}=$,{boundary:at="clippingAncestors",rootBoundary:dt="viewport",elementContext:st="floating",altBoundary:ut=!1,padding:ft=0}=evaluate(j,$),pt=getPaddingObject(ft),yt=ot[ut?st==="floating"?"reference":"floating":st],mt=rectToClientRect(await nt.getClippingRect({element:(_e=await(nt.isElement==null?void 0:nt.isElement(yt)))==null||_e?yt:yt.contextElement||await(nt.getDocumentElement==null?void 0:nt.getDocumentElement(ot.floating)),boundary:at,rootBoundary:dt,strategy:it})),vt=st==="floating"?{...rt.floating,x:et,y:tt}:rt.reference,_t=await(nt.getOffsetParent==null?void 0:nt.getOffsetParent(ot.floating)),St=await(nt.isElement==null?void 0:nt.isElement(_t))?await(nt.getScale==null?void 0:nt.getScale(_t))||{x:1,y:1}:{x:1,y:1},At=rectToClientRect(nt.convertOffsetParentRelativeRectToViewportRelativeRect?await nt.convertOffsetParentRelativeRectToViewportRelativeRect({rect:vt,offsetParent:_t,strategy:it}):vt);return{top:(mt.top-At.top+pt.top)/St.y,bottom:(At.bottom-mt.bottom+pt.bottom)/St.y,left:(mt.left-At.left+pt.left)/St.x,right:(At.right-mt.right+pt.right)/St.x}}const arrow$1=$=>({name:"arrow",options:$,async fn(j){const{x:_e,y:et,placement:tt,rects:nt,platform:rt,elements:ot,middlewareData:it}=j,{element:at,padding:dt=0}=evaluate($,j)||{};if(at==null)return{};const st=getPaddingObject(dt),ut={x:_e,y:et},ft=getAlignmentAxis(tt),pt=getAxisLength(ft),gt=await rt.getDimensions(at),yt=ft==="y",mt=yt?"top":"left",vt=yt?"bottom":"right",_t=yt?"clientHeight":"clientWidth",St=nt.reference[pt]+nt.reference[ft]-ut[ft]-nt.floating[pt],At=ut[ft]-nt.reference[ft],kt=await(rt.getOffsetParent==null?void 0:rt.getOffsetParent(at));let bt=kt?kt[_t]:0;(!bt||!await(rt.isElement==null?void 0:rt.isElement(kt)))&&(bt=ot.floating[_t]||nt.floating[pt]);const Rt=St/2-At/2,Ot=bt/2-gt[pt]/2-1,Ut=min(st[mt],Ot),Yt=min(st[vt],Ot),rn=Ut,mn=bt-gt[pt]-Yt,qt=bt/2-gt[pt]/2+Rt,Zt=clamp(rn,qt,mn),Jt=!it.arrow&&getAlignment(tt)!=null&&qt!=Zt&&nt.reference[pt]/2-(qt<rn?Ut:Yt)-gt[pt]/2<0,un=Jt?qt<rn?qt-rn:qt-mn:0;return{[ft]:ut[ft]+un,data:{[ft]:Zt,centerOffset:qt-Zt-un,...Jt&&{alignmentOffset:un}},reset:Jt}}}),flip=function($){return $===void 0&&($={}),{name:"flip",options:$,async fn(j){var _e,et;const{placement:tt,middlewareData:nt,rects:rt,initialPlacement:ot,platform:it,elements:at}=j,{mainAxis:dt=!0,crossAxis:st=!0,fallbackPlacements:ut,fallbackStrategy:ft="bestFit",fallbackAxisSideDirection:pt="none",flipAlignment:gt=!0,...yt}=evaluate($,j);if((_e=nt.arrow)!=null&&_e.alignmentOffset)return{};const mt=getSide(tt),vt=getSide(ot)===ot,_t=await(it.isRTL==null?void 0:it.isRTL(at.floating)),St=ut||(vt||!gt?[getOppositePlacement(ot)]:getExpandedPlacements(ot));!ut&&pt!=="none"&&St.push(...getOppositeAxisPlacements(ot,gt,pt,_t));const At=[ot,...St],kt=await detectOverflow(j,yt),bt=[];let Rt=((et=nt.flip)==null?void 0:et.overflows)||[];if(dt&&bt.push(kt[mt]),st){const rn=getAlignmentSides(tt,rt,_t);bt.push(kt[rn[0]],kt[rn[1]])}if(Rt=[...Rt,{placement:tt,overflows:bt}],!bt.every(rn=>rn<=0)){var Ot,Ut;const rn=(((Ot=nt.flip)==null?void 0:Ot.index)||0)+1,mn=At[rn];if(mn)return{data:{index:rn,overflows:Rt},reset:{placement:mn}};let qt=(Ut=Rt.filter(Zt=>Zt.overflows[0]<=0).sort((Zt,Jt)=>Zt.overflows[1]-Jt.overflows[1])[0])==null?void 0:Ut.placement;if(!qt)switch(ft){case"bestFit":{var Yt;const Zt=(Yt=Rt.map(Jt=>[Jt.placement,Jt.overflows.filter(un=>un>0).reduce((un,Wt)=>un+Wt,0)]).sort((Jt,un)=>Jt[1]-un[1])[0])==null?void 0:Yt[0];Zt&&(qt=Zt);break}case"initialPlacement":qt=ot;break}if(tt!==qt)return{reset:{placement:qt}}}return{}}}};function getSideOffsets($,j){return{top:$.top-j.height,right:$.right-j.width,bottom:$.bottom-j.height,left:$.left-j.width}}function isAnySideFullyClipped($){return sides.some(j=>$[j]>=0)}const hide=function($){return $===void 0&&($={}),{name:"hide",options:$,async fn(j){const{rects:_e}=j,{strategy:et="referenceHidden",...tt}=evaluate($,j);switch(et){case"referenceHidden":{const nt=await detectOverflow(j,{...tt,elementContext:"reference"}),rt=getSideOffsets(nt,_e.reference);return{data:{referenceHiddenOffsets:rt,referenceHidden:isAnySideFullyClipped(rt)}}}case"escaped":{const nt=await detectOverflow(j,{...tt,altBoundary:!0}),rt=getSideOffsets(nt,_e.floating);return{data:{escapedOffsets:rt,escaped:isAnySideFullyClipped(rt)}}}default:return{}}}}};async function convertValueToCoords($,j){const{placement:_e,platform:et,elements:tt}=$,nt=await(et.isRTL==null?void 0:et.isRTL(tt.floating)),rt=getSide(_e),ot=getAlignment(_e),it=getSideAxis(_e)==="y",at=["left","top"].includes(rt)?-1:1,dt=nt&&it?-1:1,st=evaluate(j,$);let{mainAxis:ut,crossAxis:ft,alignmentAxis:pt}=typeof st=="number"?{mainAxis:st,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...st};return ot&&typeof pt=="number"&&(ft=ot==="end"?pt*-1:pt),it?{x:ft*dt,y:ut*at}:{x:ut*at,y:ft*dt}}const offset=function($){return $===void 0&&($=0),{name:"offset",options:$,async fn(j){var _e,et;const{x:tt,y:nt,placement:rt,middlewareData:ot}=j,it=await convertValueToCoords(j,$);return rt===((_e=ot.offset)==null?void 0:_e.placement)&&(et=ot.arrow)!=null&&et.alignmentOffset?{}:{x:tt+it.x,y:nt+it.y,data:{...it,placement:rt}}}}},shift=function($){return $===void 0&&($={}),{name:"shift",options:$,async fn(j){const{x:_e,y:et,placement:tt}=j,{mainAxis:nt=!0,crossAxis:rt=!1,limiter:ot={fn:yt=>{let{x:mt,y:vt}=yt;return{x:mt,y:vt}}},...it}=evaluate($,j),at={x:_e,y:et},dt=await detectOverflow(j,it),st=getSideAxis(getSide(tt)),ut=getOppositeAxis(st);let ft=at[ut],pt=at[st];if(nt){const yt=ut==="y"?"top":"left",mt=ut==="y"?"bottom":"right",vt=ft+dt[yt],_t=ft-dt[mt];ft=clamp(vt,ft,_t)}if(rt){const yt=st==="y"?"top":"left",mt=st==="y"?"bottom":"right",vt=pt+dt[yt],_t=pt-dt[mt];pt=clamp(vt,pt,_t)}const gt=ot.fn({...j,[ut]:ft,[st]:pt});return{...gt,data:{x:gt.x-_e,y:gt.y-et}}}}},limitShift=function($){return $===void 0&&($={}),{options:$,fn(j){const{x:_e,y:et,placement:tt,rects:nt,middlewareData:rt}=j,{offset:ot=0,mainAxis:it=!0,crossAxis:at=!0}=evaluate($,j),dt={x:_e,y:et},st=getSideAxis(tt),ut=getOppositeAxis(st);let ft=dt[ut],pt=dt[st];const gt=evaluate(ot,j),yt=typeof gt=="number"?{mainAxis:gt,crossAxis:0}:{mainAxis:0,crossAxis:0,...gt};if(it){const _t=ut==="y"?"height":"width",St=nt.reference[ut]-nt.floating[_t]+yt.mainAxis,At=nt.reference[ut]+nt.reference[_t]-yt.mainAxis;ft<St?ft=St:ft>At&&(ft=At)}if(at){var mt,vt;const _t=ut==="y"?"width":"height",St=["top","left"].includes(getSide(tt)),At=nt.reference[st]-nt.floating[_t]+(St&&((mt=rt.offset)==null?void 0:mt[st])||0)+(St?0:yt.crossAxis),kt=nt.reference[st]+nt.reference[_t]+(St?0:((vt=rt.offset)==null?void 0:vt[st])||0)-(St?yt.crossAxis:0);pt<At?pt=At:pt>kt&&(pt=kt)}return{[ut]:ft,[st]:pt}}}},size=function($){return $===void 0&&($={}),{name:"size",options:$,async fn(j){const{placement:_e,rects:et,platform:tt,elements:nt}=j,{apply:rt=()=>{},...ot}=evaluate($,j),it=await detectOverflow(j,ot),at=getSide(_e),dt=getAlignment(_e),st=getSideAxis(_e)==="y",{width:ut,height:ft}=et.floating;let pt,gt;at==="top"||at==="bottom"?(pt=at,gt=dt===(await(tt.isRTL==null?void 0:tt.isRTL(nt.floating))?"start":"end")?"left":"right"):(gt=at,pt=dt==="end"?"top":"bottom");const yt=ft-it[pt],mt=ut-it[gt],vt=!j.middlewareData.shift;let _t=yt,St=mt;if(st){const kt=ut-it.left-it.right;St=dt||vt?min(mt,kt):kt}else{const kt=ft-it.top-it.bottom;_t=dt||vt?min(yt,kt):kt}if(vt&&!dt){const kt=max(it.left,0),bt=max(it.right,0),Rt=max(it.top,0),Ot=max(it.bottom,0);st?St=ut-2*(kt!==0||bt!==0?kt+bt:max(it.left,it.right)):_t=ft-2*(Rt!==0||Ot!==0?Rt+Ot:max(it.top,it.bottom))}await rt({...j,availableWidth:St,availableHeight:_t});const At=await tt.getDimensions(nt.floating);return ut!==At.width||ft!==At.height?{reset:{rects:!0}}:{}}}};function getNodeName($){return isNode($)?($.nodeName||"").toLowerCase():"#document"}function getWindow($){var j;return($==null||(j=$.ownerDocument)==null?void 0:j.defaultView)||window}function getDocumentElement($){var j;return(j=(isNode($)?$.ownerDocument:$.document)||window.document)==null?void 0:j.documentElement}function isNode($){return $ instanceof Node||$ instanceof getWindow($).Node}function isElement($){return $ instanceof Element||$ instanceof getWindow($).Element}function isHTMLElement$1($){return $ instanceof HTMLElement||$ instanceof getWindow($).HTMLElement}function isShadowRoot($){return typeof ShadowRoot>"u"?!1:$ instanceof ShadowRoot||$ instanceof getWindow($).ShadowRoot}function isOverflowElement($){const{overflow:j,overflowX:_e,overflowY:et,display:tt}=getComputedStyle$1($);return/auto|scroll|overlay|hidden|clip/.test(j+et+_e)&&!["inline","contents"].includes(tt)}function isTableElement($){return["table","td","th"].includes(getNodeName($))}function isContainingBlock($){const j=isWebKit(),_e=getComputedStyle$1($);return _e.transform!=="none"||_e.perspective!=="none"||(_e.containerType?_e.containerType!=="normal":!1)||!j&&(_e.backdropFilter?_e.backdropFilter!=="none":!1)||!j&&(_e.filter?_e.filter!=="none":!1)||["transform","perspective","filter"].some(et=>(_e.willChange||"").includes(et))||["paint","layout","strict","content"].some(et=>(_e.contain||"").includes(et))}function getContainingBlock($){let j=getParentNode($);for(;isHTMLElement$1(j)&&!isLastTraversableNode(j);){if(isContainingBlock(j))return j;j=getParentNode(j)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode($){return["html","body","#document"].includes(getNodeName($))}function getComputedStyle$1($){return getWindow($).getComputedStyle($)}function getNodeScroll($){return isElement($)?{scrollLeft:$.scrollLeft,scrollTop:$.scrollTop}:{scrollLeft:$.pageXOffset,scrollTop:$.pageYOffset}}function getParentNode($){if(getNodeName($)==="html")return $;const j=$.assignedSlot||$.parentNode||isShadowRoot($)&&$.host||getDocumentElement($);return isShadowRoot(j)?j.host:j}function getNearestOverflowAncestor($){const j=getParentNode($);return isLastTraversableNode(j)?$.ownerDocument?$.ownerDocument.body:$.body:isHTMLElement$1(j)&&isOverflowElement(j)?j:getNearestOverflowAncestor(j)}function getOverflowAncestors($,j,_e){var et;j===void 0&&(j=[]),_e===void 0&&(_e=!0);const tt=getNearestOverflowAncestor($),nt=tt===((et=$.ownerDocument)==null?void 0:et.body),rt=getWindow(tt);return nt?j.concat(rt,rt.visualViewport||[],isOverflowElement(tt)?tt:[],rt.frameElement&&_e?getOverflowAncestors(rt.frameElement):[]):j.concat(tt,getOverflowAncestors(tt,[],_e))}function getCssDimensions($){const j=getComputedStyle$1($);let _e=parseFloat(j.width)||0,et=parseFloat(j.height)||0;const tt=isHTMLElement$1($),nt=tt?$.offsetWidth:_e,rt=tt?$.offsetHeight:et,ot=round(_e)!==nt||round(et)!==rt;return ot&&(_e=nt,et=rt),{width:_e,height:et,$:ot}}function unwrapElement($){return isElement($)?$:$.contextElement}function getScale($){const j=unwrapElement($);if(!isHTMLElement$1(j))return createCoords(1);const _e=j.getBoundingClientRect(),{width:et,height:tt,$:nt}=getCssDimensions(j);let rt=(nt?round(_e.width):_e.width)/et,ot=(nt?round(_e.height):_e.height)/tt;return(!rt||!Number.isFinite(rt))&&(rt=1),(!ot||!Number.isFinite(ot))&&(ot=1),{x:rt,y:ot}}const noOffsets=createCoords(0);function getVisualOffsets($){const j=getWindow($);return!isWebKit()||!j.visualViewport?noOffsets:{x:j.visualViewport.offsetLeft,y:j.visualViewport.offsetTop}}function shouldAddVisualOffsets($,j,_e){return j===void 0&&(j=!1),!_e||j&&_e!==getWindow($)?!1:j}function getBoundingClientRect($,j,_e,et){j===void 0&&(j=!1),_e===void 0&&(_e=!1);const tt=$.getBoundingClientRect(),nt=unwrapElement($);let rt=createCoords(1);j&&(et?isElement(et)&&(rt=getScale(et)):rt=getScale($));const ot=shouldAddVisualOffsets(nt,_e,et)?getVisualOffsets(nt):createCoords(0);let it=(tt.left+ot.x)/rt.x,at=(tt.top+ot.y)/rt.y,dt=tt.width/rt.x,st=tt.height/rt.y;if(nt){const ut=getWindow(nt),ft=et&&isElement(et)?getWindow(et):et;let pt=ut.frameElement;for(;pt&&et&&ft!==ut;){const gt=getScale(pt),yt=pt.getBoundingClientRect(),mt=getComputedStyle$1(pt),vt=yt.left+(pt.clientLeft+parseFloat(mt.paddingLeft))*gt.x,_t=yt.top+(pt.clientTop+parseFloat(mt.paddingTop))*gt.y;it*=gt.x,at*=gt.y,dt*=gt.x,st*=gt.y,it+=vt,at+=_t,pt=getWindow(pt).frameElement}}return rectToClientRect({width:dt,height:st,x:it,y:at})}function convertOffsetParentRelativeRectToViewportRelativeRect($){let{rect:j,offsetParent:_e,strategy:et}=$;const tt=isHTMLElement$1(_e),nt=getDocumentElement(_e);if(_e===nt)return j;let rt={scrollLeft:0,scrollTop:0},ot=createCoords(1);const it=createCoords(0);if((tt||!tt&&et!=="fixed")&&((getNodeName(_e)!=="body"||isOverflowElement(nt))&&(rt=getNodeScroll(_e)),isHTMLElement$1(_e))){const at=getBoundingClientRect(_e);ot=getScale(_e),it.x=at.x+_e.clientLeft,it.y=at.y+_e.clientTop}return{width:j.width*ot.x,height:j.height*ot.y,x:j.x*ot.x-rt.scrollLeft*ot.x+it.x,y:j.y*ot.y-rt.scrollTop*ot.y+it.y}}function getClientRects($){return Array.from($.getClientRects())}function getWindowScrollBarX($){return getBoundingClientRect(getDocumentElement($)).left+getNodeScroll($).scrollLeft}function getDocumentRect($){const j=getDocumentElement($),_e=getNodeScroll($),et=$.ownerDocument.body,tt=max(j.scrollWidth,j.clientWidth,et.scrollWidth,et.clientWidth),nt=max(j.scrollHeight,j.clientHeight,et.scrollHeight,et.clientHeight);let rt=-_e.scrollLeft+getWindowScrollBarX($);const ot=-_e.scrollTop;return getComputedStyle$1(et).direction==="rtl"&&(rt+=max(j.clientWidth,et.clientWidth)-tt),{width:tt,height:nt,x:rt,y:ot}}function getViewportRect($,j){const _e=getWindow($),et=getDocumentElement($),tt=_e.visualViewport;let nt=et.clientWidth,rt=et.clientHeight,ot=0,it=0;if(tt){nt=tt.width,rt=tt.height;const at=isWebKit();(!at||at&&j==="fixed")&&(ot=tt.offsetLeft,it=tt.offsetTop)}return{width:nt,height:rt,x:ot,y:it}}function getInnerBoundingClientRect($,j){const _e=getBoundingClientRect($,!0,j==="fixed"),et=_e.top+$.clientTop,tt=_e.left+$.clientLeft,nt=isHTMLElement$1($)?getScale($):createCoords(1),rt=$.clientWidth*nt.x,ot=$.clientHeight*nt.y,it=tt*nt.x,at=et*nt.y;return{width:rt,height:ot,x:it,y:at}}function getClientRectFromClippingAncestor($,j,_e){let et;if(j==="viewport")et=getViewportRect($,_e);else if(j==="document")et=getDocumentRect(getDocumentElement($));else if(isElement(j))et=getInnerBoundingClientRect(j,_e);else{const tt=getVisualOffsets($);et={...j,x:j.x-tt.x,y:j.y-tt.y}}return rectToClientRect(et)}function hasFixedPositionAncestor($,j){const _e=getParentNode($);return _e===j||!isElement(_e)||isLastTraversableNode(_e)?!1:getComputedStyle$1(_e).position==="fixed"||hasFixedPositionAncestor(_e,j)}function getClippingElementAncestors($,j){const _e=j.get($);if(_e)return _e;let et=getOverflowAncestors($,[],!1).filter(ot=>isElement(ot)&&getNodeName(ot)!=="body"),tt=null;const nt=getComputedStyle$1($).position==="fixed";let rt=nt?getParentNode($):$;for(;isElement(rt)&&!isLastTraversableNode(rt);){const ot=getComputedStyle$1(rt),it=isContainingBlock(rt);!it&&ot.position==="fixed"&&(tt=null),(nt?!it&&!tt:!it&&ot.position==="static"&&!!tt&&["absolute","fixed"].includes(tt.position)||isOverflowElement(rt)&&!it&&hasFixedPositionAncestor($,rt))?et=et.filter(dt=>dt!==rt):tt=ot,rt=getParentNode(rt)}return j.set($,et),et}function getClippingRect($){let{element:j,boundary:_e,rootBoundary:et,strategy:tt}=$;const rt=[..._e==="clippingAncestors"?getClippingElementAncestors(j,this._c):[].concat(_e),et],ot=rt[0],it=rt.reduce((at,dt)=>{const st=getClientRectFromClippingAncestor(j,dt,tt);return at.top=max(st.top,at.top),at.right=min(st.right,at.right),at.bottom=min(st.bottom,at.bottom),at.left=max(st.left,at.left),at},getClientRectFromClippingAncestor(j,ot,tt));return{width:it.right-it.left,height:it.bottom-it.top,x:it.left,y:it.top}}function getDimensions($){return getCssDimensions($)}function getRectRelativeToOffsetParent($,j,_e){const et=isHTMLElement$1(j),tt=getDocumentElement(j),nt=_e==="fixed",rt=getBoundingClientRect($,!0,nt,j);let ot={scrollLeft:0,scrollTop:0};const it=createCoords(0);if(et||!et&&!nt)if((getNodeName(j)!=="body"||isOverflowElement(tt))&&(ot=getNodeScroll(j)),et){const at=getBoundingClientRect(j,!0,nt,j);it.x=at.x+j.clientLeft,it.y=at.y+j.clientTop}else tt&&(it.x=getWindowScrollBarX(tt));return{x:rt.left+ot.scrollLeft-it.x,y:rt.top+ot.scrollTop-it.y,width:rt.width,height:rt.height}}function getTrueOffsetParent($,j){return!isHTMLElement$1($)||getComputedStyle$1($).position==="fixed"?null:j?j($):$.offsetParent}function getOffsetParent($,j){const _e=getWindow($);if(!isHTMLElement$1($))return _e;let et=getTrueOffsetParent($,j);for(;et&&isTableElement(et)&&getComputedStyle$1(et).position==="static";)et=getTrueOffsetParent(et,j);return et&&(getNodeName(et)==="html"||getNodeName(et)==="body"&&getComputedStyle$1(et).position==="static"&&!isContainingBlock(et))?_e:et||getContainingBlock($)||_e}const getElementRects=async function($){let{reference:j,floating:_e,strategy:et}=$;const tt=this.getOffsetParent||getOffsetParent,nt=this.getDimensions;return{reference:getRectRelativeToOffsetParent(j,await tt(_e),et),floating:{x:0,y:0,...await nt(_e)}}};function isRTL($){return getComputedStyle$1($).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function observeMove($,j){let _e=null,et;const tt=getDocumentElement($);function nt(){clearTimeout(et),_e&&_e.disconnect(),_e=null}function rt(ot,it){ot===void 0&&(ot=!1),it===void 0&&(it=1),nt();const{left:at,top:dt,width:st,height:ut}=$.getBoundingClientRect();if(ot||j(),!st||!ut)return;const ft=floor(dt),pt=floor(tt.clientWidth-(at+st)),gt=floor(tt.clientHeight-(dt+ut)),yt=floor(at),vt={rootMargin:-ft+"px "+-pt+"px "+-gt+"px "+-yt+"px",threshold:max(0,min(1,it))||1};let _t=!0;function St(At){const kt=At[0].intersectionRatio;if(kt!==it){if(!_t)return rt();kt?rt(!1,kt):et=setTimeout(()=>{rt(!1,1e-7)},100)}_t=!1}try{_e=new IntersectionObserver(St,{...vt,root:tt.ownerDocument})}catch{_e=new IntersectionObserver(St,vt)}_e.observe($)}return rt(!0),nt}function autoUpdate($,j,_e,et){et===void 0&&(et={});const{ancestorScroll:tt=!0,ancestorResize:nt=!0,elementResize:rt=typeof ResizeObserver=="function",layoutShift:ot=typeof IntersectionObserver=="function",animationFrame:it=!1}=et,at=unwrapElement($),dt=tt||nt?[...at?getOverflowAncestors(at):[],...getOverflowAncestors(j)]:[];dt.forEach(mt=>{tt&&mt.addEventListener("scroll",_e,{passive:!0}),nt&&mt.addEventListener("resize",_e)});const st=at&&ot?observeMove(at,_e):null;let ut=-1,ft=null;rt&&(ft=new ResizeObserver(mt=>{let[vt]=mt;vt&&vt.target===at&&ft&&(ft.unobserve(j),cancelAnimationFrame(ut),ut=requestAnimationFrame(()=>{ft&&ft.observe(j)})),_e()}),at&&!it&&ft.observe(at),ft.observe(j));let pt,gt=it?getBoundingClientRect($):null;it&&yt();function yt(){const mt=getBoundingClientRect($);gt&&(mt.x!==gt.x||mt.y!==gt.y||mt.width!==gt.width||mt.height!==gt.height)&&_e(),gt=mt,pt=requestAnimationFrame(yt)}return _e(),()=>{dt.forEach(mt=>{tt&&mt.removeEventListener("scroll",_e),nt&&mt.removeEventListener("resize",_e)}),st&&st(),ft&&ft.disconnect(),ft=null,it&&cancelAnimationFrame(pt)}}const computePosition=($,j,_e)=>{const et=new Map,tt={platform,..._e},nt={...tt.platform,_c:et};return computePosition$1($,j,{...tt,platform:nt})},arrow=$=>{function j(_e){return{}.hasOwnProperty.call(_e,"current")}return{name:"arrow",options:$,fn(_e){const{element:et,padding:tt}=typeof $=="function"?$(_e):$;return et&&j(et)?et.current!=null?arrow$1({element:et.current,padding:tt}).fn(_e):{}:et?arrow$1({element:et,padding:tt}).fn(_e):{}}}};var index=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual($,j){if($===j)return!0;if(typeof $!=typeof j)return!1;if(typeof $=="function"&&$.toString()===j.toString())return!0;let _e,et,tt;if($&&j&&typeof $=="object"){if(Array.isArray($)){if(_e=$.length,_e!=j.length)return!1;for(et=_e;et--!==0;)if(!deepEqual($[et],j[et]))return!1;return!0}if(tt=Object.keys($),_e=tt.length,_e!==Object.keys(j).length)return!1;for(et=_e;et--!==0;)if(!{}.hasOwnProperty.call(j,tt[et]))return!1;for(et=_e;et--!==0;){const nt=tt[et];if(!(nt==="_owner"&&$.$$typeof)&&!deepEqual($[nt],j[nt]))return!1}return!0}return $!==$&&j!==j}function getDPR($){return typeof window>"u"?1:($.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR($,j){const _e=getDPR($);return Math.round(j*_e)/_e}function useLatestRef($){const j=reactExports.useRef($);return index(()=>{j.current=$}),j}function useFloating($){$===void 0&&($={});const{placement:j="bottom",strategy:_e="absolute",middleware:et=[],platform:tt,elements:{reference:nt,floating:rt}={},transform:ot=!0,whileElementsMounted:it,open:at}=$,[dt,st]=reactExports.useState({x:0,y:0,strategy:_e,placement:j,middlewareData:{},isPositioned:!1}),[ut,ft]=reactExports.useState(et);deepEqual(ut,et)||ft(et);const[pt,gt]=reactExports.useState(null),[yt,mt]=reactExports.useState(null),vt=reactExports.useCallback(Jt=>{Jt!=kt.current&&(kt.current=Jt,gt(Jt))},[gt]),_t=reactExports.useCallback(Jt=>{Jt!==bt.current&&(bt.current=Jt,mt(Jt))},[mt]),St=nt||pt,At=rt||yt,kt=reactExports.useRef(null),bt=reactExports.useRef(null),Rt=reactExports.useRef(dt),Ot=useLatestRef(it),Ut=useLatestRef(tt),Yt=reactExports.useCallback(()=>{if(!kt.current||!bt.current)return;const Jt={placement:j,strategy:_e,middleware:ut};Ut.current&&(Jt.platform=Ut.current),computePosition(kt.current,bt.current,Jt).then(un=>{const Wt={...un,isPositioned:!0};rn.current&&!deepEqual(Rt.current,Wt)&&(Rt.current=Wt,reactDomExports.flushSync(()=>{st(Wt)}))})},[ut,j,_e,Ut]);index(()=>{at===!1&&Rt.current.isPositioned&&(Rt.current.isPositioned=!1,st(Jt=>({...Jt,isPositioned:!1})))},[at]);const rn=reactExports.useRef(!1);index(()=>(rn.current=!0,()=>{rn.current=!1}),[]),index(()=>{if(St&&(kt.current=St),At&&(bt.current=At),St&&At){if(Ot.current)return Ot.current(St,At,Yt);Yt()}},[St,At,Yt,Ot]);const mn=reactExports.useMemo(()=>({reference:kt,floating:bt,setReference:vt,setFloating:_t}),[vt,_t]),qt=reactExports.useMemo(()=>({reference:St,floating:At}),[St,At]),Zt=reactExports.useMemo(()=>{const Jt={position:_e,left:0,top:0};if(!qt.floating)return Jt;const un=roundByDPR(qt.floating,dt.x),Wt=roundByDPR(qt.floating,dt.y);return ot?{...Jt,transform:"translate("+un+"px, "+Wt+"px)",...getDPR(qt.floating)>=1.5&&{willChange:"transform"}}:{position:_e,left:un,top:Wt}},[_e,ot,qt.floating,dt.x,dt.y]);return reactExports.useMemo(()=>({...dt,update:Yt,refs:mn,elements:qt,floatingStyles:Zt}),[dt,Yt,mn,qt,Zt])}var NAME$1="Arrow",Arrow$1=reactExports.forwardRef(($,j)=>{const{children:_e,width:et=10,height:tt=5,...nt}=$;return jsxRuntimeExports.jsx(Primitive.svg,{...nt,ref:j,width:et,height:tt,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:$.asChild?_e:jsxRuntimeExports.jsx("polygon",{points:"0,0 30,0 15,10"})})});Arrow$1.displayName=NAME$1;var Root$4=Arrow$1;function useSize($){const[j,_e]=reactExports.useState(void 0);return useLayoutEffect2(()=>{if($){_e({width:$.offsetWidth,height:$.offsetHeight});const et=new ResizeObserver(tt=>{if(!Array.isArray(tt)||!tt.length)return;const nt=tt[0];let rt,ot;if("borderBoxSize"in nt){const it=nt.borderBoxSize,at=Array.isArray(it)?it[0]:it;rt=at.inlineSize,ot=at.blockSize}else rt=$.offsetWidth,ot=$.offsetHeight;_e({width:rt,height:ot})});return et.observe($,{box:"border-box"}),()=>et.unobserve($)}else _e(void 0)},[$]),j}var POPPER_NAME="Popper",[createPopperContext,createPopperScope]=createContextScope(POPPER_NAME),[PopperProvider,usePopperContext]=createPopperContext(POPPER_NAME),Popper=$=>{const{__scopePopper:j,children:_e}=$,[et,tt]=reactExports.useState(null);return jsxRuntimeExports.jsx(PopperProvider,{scope:j,anchor:et,onAnchorChange:tt,children:_e})};Popper.displayName=POPPER_NAME;var ANCHOR_NAME$1="PopperAnchor",PopperAnchor=reactExports.forwardRef(($,j)=>{const{__scopePopper:_e,virtualRef:et,...tt}=$,nt=usePopperContext(ANCHOR_NAME$1,_e),rt=reactExports.useRef(null),ot=useComposedRefs(j,rt);return reactExports.useEffect(()=>{nt.onAnchorChange((et==null?void 0:et.current)||rt.current)}),et?null:jsxRuntimeExports.jsx(Primitive.div,{...tt,ref:ot})});PopperAnchor.displayName=ANCHOR_NAME$1;var CONTENT_NAME$5="PopperContent",[PopperContentProvider,useContentContext]=createPopperContext(CONTENT_NAME$5),PopperContent=reactExports.forwardRef(($,j)=>{var tn,Cn,en,An,Nn,xn;const{__scopePopper:_e,side:et="bottom",sideOffset:tt=0,align:nt="center",alignOffset:rt=0,arrowPadding:ot=0,avoidCollisions:it=!0,collisionBoundary:at=[],collisionPadding:dt=0,sticky:st="partial",hideWhenDetached:ut=!1,updatePositionStrategy:ft="optimized",onPlaced:pt,...gt}=$,yt=usePopperContext(CONTENT_NAME$5,_e),[mt,vt]=reactExports.useState(null),_t=useComposedRefs(j,Bn=>vt(Bn)),[St,At]=reactExports.useState(null),kt=useSize(St),bt=(kt==null?void 0:kt.width)??0,Rt=(kt==null?void 0:kt.height)??0,Ot=et+(nt!=="center"?"-"+nt:""),Ut=typeof dt=="number"?dt:{top:0,right:0,bottom:0,left:0,...dt},Yt=Array.isArray(at)?at:[at],rn=Yt.length>0,mn={padding:Ut,boundary:Yt.filter(isNotNull),altBoundary:rn},{refs:qt,floatingStyles:Zt,placement:Jt,isPositioned:un,middlewareData:Wt}=useFloating({strategy:"fixed",placement:Ot,whileElementsMounted:(...Bn)=>autoUpdate(...Bn,{animationFrame:ft==="always"}),elements:{reference:yt.anchor},middleware:[offset({mainAxis:tt+Rt,alignmentAxis:rt}),it&&shift({mainAxis:!0,crossAxis:!1,limiter:st==="partial"?limitShift():void 0,...mn}),it&&flip({...mn}),size({...mn,apply:({elements:Bn,rects:Gn,availableWidth:Qn,availableHeight:sr})=>{const{width:cr,height:qr}=Gn.reference,bn=Bn.floating.style;bn.setProperty("--radix-popper-available-width",`${Qn}px`),bn.setProperty("--radix-popper-available-height",`${sr}px`),bn.setProperty("--radix-popper-anchor-width",`${cr}px`),bn.setProperty("--radix-popper-anchor-height",`${qr}px`)}}),St&&arrow({element:St,padding:ot}),transformOrigin({arrowWidth:bt,arrowHeight:Rt}),ut&&hide({strategy:"referenceHidden",...mn})]}),[Qt,on]=getSideAndAlignFromPlacement(Jt),nn=useCallbackRef$1(pt);useLayoutEffect2(()=>{un&&(nn==null||nn())},[un,nn]);const cn=(tn=Wt.arrow)==null?void 0:tn.x,Sn=(Cn=Wt.arrow)==null?void 0:Cn.y,vn=((en=Wt.arrow)==null?void 0:en.centerOffset)!==0,[En,Rn]=reactExports.useState();return useLayoutEffect2(()=>{mt&&Rn(window.getComputedStyle(mt).zIndex)},[mt]),jsxRuntimeExports.jsx("div",{ref:qt.setFloating,"data-radix-popper-content-wrapper":"",style:{...Zt,transform:un?Zt.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:En,"--radix-popper-transform-origin":[(An=Wt.transformOrigin)==null?void 0:An.x,(Nn=Wt.transformOrigin)==null?void 0:Nn.y].join(" "),...((xn=Wt.hide)==null?void 0:xn.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:$.dir,children:jsxRuntimeExports.jsx(PopperContentProvider,{scope:_e,placedSide:Qt,onArrowChange:At,arrowX:cn,arrowY:Sn,shouldHideArrow:vn,children:jsxRuntimeExports.jsx(Primitive.div,{"data-side":Qt,"data-align":on,...gt,ref:_t,style:{...gt.style,animation:un?void 0:"none"}})})})});PopperContent.displayName=CONTENT_NAME$5;var ARROW_NAME$4="PopperArrow",OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow=reactExports.forwardRef(function $(j,_e){const{__scopePopper:et,...tt}=j,nt=useContentContext(ARROW_NAME$4,et),rt=OPPOSITE_SIDE[nt.placedSide];return jsxRuntimeExports.jsx("span",{ref:nt.onArrowChange,style:{position:"absolute",left:nt.arrowX,top:nt.arrowY,[rt]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[nt.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[nt.placedSide],visibility:nt.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Root$4,{...tt,ref:_e,style:{...tt.style,display:"block"}})})});PopperArrow.displayName=ARROW_NAME$4;function isNotNull($){return $!==null}var transformOrigin=$=>({name:"transformOrigin",options:$,fn(j){var yt,mt,vt;const{placement:_e,rects:et,middlewareData:tt}=j,rt=((yt=tt.arrow)==null?void 0:yt.centerOffset)!==0,ot=rt?0:$.arrowWidth,it=rt?0:$.arrowHeight,[at,dt]=getSideAndAlignFromPlacement(_e),st={start:"0%",center:"50%",end:"100%"}[dt],ut=(((mt=tt.arrow)==null?void 0:mt.x)??0)+ot/2,ft=(((vt=tt.arrow)==null?void 0:vt.y)??0)+it/2;let pt="",gt="";return at==="bottom"?(pt=rt?st:`${ut}px`,gt=`${-it}px`):at==="top"?(pt=rt?st:`${ut}px`,gt=`${et.floating.height+it}px`):at==="right"?(pt=`${-it}px`,gt=rt?st:`${ft}px`):at==="left"&&(pt=`${et.floating.width+it}px`,gt=rt?st:`${ft}px`),{data:{x:pt,y:gt}}}});function getSideAndAlignFromPlacement($){const[j,_e="center"]=$.split("-");return[j,_e]}var Root2$4=Popper,Anchor=PopperAnchor,Content=PopperContent,Arrow=PopperArrow,ENTRY_FOCUS="rovingFocusGroup.onEntryFocus",EVENT_OPTIONS={bubbles:!1,cancelable:!0},GROUP_NAME$3="RovingFocusGroup",[Collection$4,useCollection$4,createCollectionScope$4]=createCollection(GROUP_NAME$3),[createRovingFocusGroupContext,createRovingFocusGroupScope]=createContextScope(GROUP_NAME$3,[createCollectionScope$4]),[RovingFocusProvider,useRovingFocusContext]=createRovingFocusGroupContext(GROUP_NAME$3),RovingFocusGroup=reactExports.forwardRef(($,j)=>jsxRuntimeExports.jsx(Collection$4.Provider,{scope:$.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(Collection$4.Slot,{scope:$.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(RovingFocusGroupImpl,{...$,ref:j})})}));RovingFocusGroup.displayName=GROUP_NAME$3;var RovingFocusGroupImpl=reactExports.forwardRef(($,j)=>{const{__scopeRovingFocusGroup:_e,orientation:et,loop:tt=!1,dir:nt,currentTabStopId:rt,defaultCurrentTabStopId:ot,onCurrentTabStopIdChange:it,onEntryFocus:at,preventScrollOnEntryFocus:dt=!1,...st}=$,ut=reactExports.useRef(null),ft=useComposedRefs(j,ut),pt=useDirection(nt),[gt=null,yt]=useControllableState({prop:rt,defaultProp:ot,onChange:it}),[mt,vt]=reactExports.useState(!1),_t=useCallbackRef$1(at),St=useCollection$4(_e),At=reactExports.useRef(!1),[kt,bt]=reactExports.useState(0);return reactExports.useEffect(()=>{const Rt=ut.current;if(Rt)return Rt.addEventListener(ENTRY_FOCUS,_t),()=>Rt.removeEventListener(ENTRY_FOCUS,_t)},[_t]),jsxRuntimeExports.jsx(RovingFocusProvider,{scope:_e,orientation:et,dir:pt,loop:tt,currentTabStopId:gt,onItemFocus:reactExports.useCallback(Rt=>yt(Rt),[yt]),onItemShiftTab:reactExports.useCallback(()=>vt(!0),[]),onFocusableItemAdd:reactExports.useCallback(()=>bt(Rt=>Rt+1),[]),onFocusableItemRemove:reactExports.useCallback(()=>bt(Rt=>Rt-1),[]),children:jsxRuntimeExports.jsx(Primitive.div,{tabIndex:mt||kt===0?-1:0,"data-orientation":et,...st,ref:ft,style:{outline:"none",...$.style},onMouseDown:composeEventHandlers($.onMouseDown,()=>{At.current=!0}),onFocus:composeEventHandlers($.onFocus,Rt=>{const Ot=!At.current;if(Rt.target===Rt.currentTarget&&Ot&&!mt){const Ut=new CustomEvent(ENTRY_FOCUS,EVENT_OPTIONS);if(Rt.currentTarget.dispatchEvent(Ut),!Ut.defaultPrevented){const Yt=St().filter(Jt=>Jt.focusable),rn=Yt.find(Jt=>Jt.active),mn=Yt.find(Jt=>Jt.id===gt),Zt=[rn,mn,...Yt].filter(Boolean).map(Jt=>Jt.ref.current);focusFirst$2(Zt,dt)}}At.current=!1}),onBlur:composeEventHandlers($.onBlur,()=>vt(!1))})})}),ITEM_NAME$3="RovingFocusGroupItem",RovingFocusGroupItem=reactExports.forwardRef(($,j)=>{const{__scopeRovingFocusGroup:_e,focusable:et=!0,active:tt=!1,tabStopId:nt,...rt}=$,ot=useId(),it=nt||ot,at=useRovingFocusContext(ITEM_NAME$3,_e),dt=at.currentTabStopId===it,st=useCollection$4(_e),{onFocusableItemAdd:ut,onFocusableItemRemove:ft}=at;return reactExports.useEffect(()=>{if(et)return ut(),()=>ft()},[et,ut,ft]),jsxRuntimeExports.jsx(Collection$4.ItemSlot,{scope:_e,id:it,focusable:et,active:tt,children:jsxRuntimeExports.jsx(Primitive.span,{tabIndex:dt?0:-1,"data-orientation":at.orientation,...rt,ref:j,onMouseDown:composeEventHandlers($.onMouseDown,pt=>{et?at.onItemFocus(it):pt.preventDefault()}),onFocus:composeEventHandlers($.onFocus,()=>at.onItemFocus(it)),onKeyDown:composeEventHandlers($.onKeyDown,pt=>{if(pt.key==="Tab"&&pt.shiftKey){at.onItemShiftTab();return}if(pt.target!==pt.currentTarget)return;const gt=getFocusIntent(pt,at.orientation,at.dir);if(gt!==void 0){if(pt.metaKey||pt.ctrlKey||pt.altKey||pt.shiftKey)return;pt.preventDefault();let mt=st().filter(vt=>vt.focusable).map(vt=>vt.ref.current);if(gt==="last")mt.reverse();else if(gt==="prev"||gt==="next"){gt==="prev"&&mt.reverse();const vt=mt.indexOf(pt.currentTarget);mt=at.loop?wrapArray$2(mt,vt+1):mt.slice(vt+1)}setTimeout(()=>focusFirst$2(mt))}})})})});RovingFocusGroupItem.displayName=ITEM_NAME$3;var MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function getDirectionAwareKey($,j){return j!=="rtl"?$:$==="ArrowLeft"?"ArrowRight":$==="ArrowRight"?"ArrowLeft":$}function getFocusIntent($,j,_e){const et=getDirectionAwareKey($.key,_e);if(!(j==="vertical"&&["ArrowLeft","ArrowRight"].includes(et))&&!(j==="horizontal"&&["ArrowUp","ArrowDown"].includes(et)))return MAP_KEY_TO_FOCUS_INTENT[et]}function focusFirst$2($,j=!1){const _e=document.activeElement;for(const et of $)if(et===_e||(et.focus({preventScroll:j}),document.activeElement!==_e))return}function wrapArray$2($,j){return $.map((_e,et)=>$[(j+et)%$.length])}var Root$3=RovingFocusGroup,Item$1=RovingFocusGroupItem,SELECTION_KEYS$1=["Enter"," "],FIRST_KEYS=["ArrowDown","PageUp","Home"],LAST_KEYS=["ArrowUp","PageDown","End"],FIRST_LAST_KEYS=[...FIRST_KEYS,...LAST_KEYS],SUB_OPEN_KEYS={ltr:[...SELECTION_KEYS$1,"ArrowRight"],rtl:[...SELECTION_KEYS$1,"ArrowLeft"]},SUB_CLOSE_KEYS={ltr:["ArrowLeft"],rtl:["ArrowRight"]},MENU_NAME="Menu",[Collection$3,useCollection$3,createCollectionScope$3]=createCollection(MENU_NAME),[createMenuContext,createMenuScope]=createContextScope(MENU_NAME,[createCollectionScope$3,createPopperScope,createRovingFocusGroupScope]),usePopperScope$2=createPopperScope(),useRovingFocusGroupScope=createRovingFocusGroupScope(),[MenuProvider,useMenuContext]=createMenuContext(MENU_NAME),[MenuRootProvider,useMenuRootContext]=createMenuContext(MENU_NAME),Menu=$=>{const{__scopeMenu:j,open:_e=!1,children:et,dir:tt,onOpenChange:nt,modal:rt=!0}=$,ot=usePopperScope$2(j),[it,at]=reactExports.useState(null),dt=reactExports.useRef(!1),st=useCallbackRef$1(nt),ut=useDirection(tt);return reactExports.useEffect(()=>{const ft=()=>{dt.current=!0,document.addEventListener("pointerdown",pt,{capture:!0,once:!0}),document.addEventListener("pointermove",pt,{capture:!0,once:!0})},pt=()=>dt.current=!1;return document.addEventListener("keydown",ft,{capture:!0}),()=>{document.removeEventListener("keydown",ft,{capture:!0}),document.removeEventListener("pointerdown",pt,{capture:!0}),document.removeEventListener("pointermove",pt,{capture:!0})}},[]),jsxRuntimeExports.jsx(Root2$4,{...ot,children:jsxRuntimeExports.jsx(MenuProvider,{scope:j,open:_e,onOpenChange:st,content:it,onContentChange:at,children:jsxRuntimeExports.jsx(MenuRootProvider,{scope:j,onClose:reactExports.useCallback(()=>st(!1),[st]),isUsingKeyboardRef:dt,dir:ut,modal:rt,children:et})})})};Menu.displayName=MENU_NAME;var ANCHOR_NAME="MenuAnchor",MenuAnchor=reactExports.forwardRef(($,j)=>{const{__scopeMenu:_e,...et}=$,tt=usePopperScope$2(_e);return jsxRuntimeExports.jsx(Anchor,{...tt,...et,ref:j})});MenuAnchor.displayName=ANCHOR_NAME;var PORTAL_NAME$4="MenuPortal",[PortalProvider$1,usePortalContext$1]=createMenuContext(PORTAL_NAME$4,{forceMount:void 0}),MenuPortal=$=>{const{__scopeMenu:j,forceMount:_e,children:et,container:tt}=$,nt=useMenuContext(PORTAL_NAME$4,j);return jsxRuntimeExports.jsx(PortalProvider$1,{scope:j,forceMount:_e,children:jsxRuntimeExports.jsx(Presence,{present:_e||nt.open,children:jsxRuntimeExports.jsx(Portal$4,{asChild:!0,container:tt,children:et})})})};MenuPortal.displayName=PORTAL_NAME$4;var CONTENT_NAME$4="MenuContent",[MenuContentProvider,useMenuContentContext]=createMenuContext(CONTENT_NAME$4),MenuContent=reactExports.forwardRef(($,j)=>{const _e=usePortalContext$1(CONTENT_NAME$4,$.__scopeMenu),{forceMount:et=_e.forceMount,...tt}=$,nt=useMenuContext(CONTENT_NAME$4,$.__scopeMenu),rt=useMenuRootContext(CONTENT_NAME$4,$.__scopeMenu);return jsxRuntimeExports.jsx(Collection$3.Provider,{scope:$.__scopeMenu,children:jsxRuntimeExports.jsx(Presence,{present:et||nt.open,children:jsxRuntimeExports.jsx(Collection$3.Slot,{scope:$.__scopeMenu,children:rt.modal?jsxRuntimeExports.jsx(MenuRootContentModal,{...tt,ref:j}):jsxRuntimeExports.jsx(MenuRootContentNonModal,{...tt,ref:j})})})})}),MenuRootContentModal=reactExports.forwardRef(($,j)=>{const _e=useMenuContext(CONTENT_NAME$4,$.__scopeMenu),et=reactExports.useRef(null),tt=useComposedRefs(j,et);return reactExports.useEffect(()=>{const nt=et.current;if(nt)return hideOthers(nt)},[]),jsxRuntimeExports.jsx(MenuContentImpl,{...$,ref:tt,trapFocus:_e.open,disableOutsidePointerEvents:_e.open,disableOutsideScroll:!0,onFocusOutside:composeEventHandlers($.onFocusOutside,nt=>nt.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>_e.onOpenChange(!1)})}),MenuRootContentNonModal=reactExports.forwardRef(($,j)=>{const _e=useMenuContext(CONTENT_NAME$4,$.__scopeMenu);return jsxRuntimeExports.jsx(MenuContentImpl,{...$,ref:j,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>_e.onOpenChange(!1)})}),MenuContentImpl=reactExports.forwardRef(($,j)=>{const{__scopeMenu:_e,loop:et=!1,trapFocus:tt,onOpenAutoFocus:nt,onCloseAutoFocus:rt,disableOutsidePointerEvents:ot,onEntryFocus:it,onEscapeKeyDown:at,onPointerDownOutside:dt,onFocusOutside:st,onInteractOutside:ut,onDismiss:ft,disableOutsideScroll:pt,...gt}=$,yt=useMenuContext(CONTENT_NAME$4,_e),mt=useMenuRootContext(CONTENT_NAME$4,_e),vt=usePopperScope$2(_e),_t=useRovingFocusGroupScope(_e),St=useCollection$3(_e),[At,kt]=reactExports.useState(null),bt=reactExports.useRef(null),Rt=useComposedRefs(j,bt,yt.onContentChange),Ot=reactExports.useRef(0),Ut=reactExports.useRef(""),Yt=reactExports.useRef(0),rn=reactExports.useRef(null),mn=reactExports.useRef("right"),qt=reactExports.useRef(0),Zt=pt?ReactRemoveScroll:reactExports.Fragment,Jt=pt?{as:Slot,allowPinchZoom:!0}:void 0,un=Qt=>{var tn,Cn;const on=Ut.current+Qt,nn=St().filter(en=>!en.disabled),cn=document.activeElement,Sn=(tn=nn.find(en=>en.ref.current===cn))==null?void 0:tn.textValue,vn=nn.map(en=>en.textValue),En=getNextMatch(vn,on,Sn),Rn=(Cn=nn.find(en=>en.textValue===En))==null?void 0:Cn.ref.current;(function en(An){Ut.current=An,window.clearTimeout(Ot.current),An!==""&&(Ot.current=window.setTimeout(()=>en(""),1e3))})(on),Rn&&setTimeout(()=>Rn.focus())};reactExports.useEffect(()=>()=>window.clearTimeout(Ot.current),[]),useFocusGuards();const Wt=reactExports.useCallback(Qt=>{var nn,cn;return mn.current===((nn=rn.current)==null?void 0:nn.side)&&isPointerInGraceArea(Qt,(cn=rn.current)==null?void 0:cn.area)},[]);return jsxRuntimeExports.jsx(MenuContentProvider,{scope:_e,searchRef:Ut,onItemEnter:reactExports.useCallback(Qt=>{Wt(Qt)&&Qt.preventDefault()},[Wt]),onItemLeave:reactExports.useCallback(Qt=>{var on;Wt(Qt)||((on=bt.current)==null||on.focus(),kt(null))},[Wt]),onTriggerLeave:reactExports.useCallback(Qt=>{Wt(Qt)&&Qt.preventDefault()},[Wt]),pointerGraceTimerRef:Yt,onPointerGraceIntentChange:reactExports.useCallback(Qt=>{rn.current=Qt},[]),children:jsxRuntimeExports.jsx(Zt,{...Jt,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:tt,onMountAutoFocus:composeEventHandlers(nt,Qt=>{var on;Qt.preventDefault(),(on=bt.current)==null||on.focus({preventScroll:!0})}),onUnmountAutoFocus:rt,children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:ot,onEscapeKeyDown:at,onPointerDownOutside:dt,onFocusOutside:st,onInteractOutside:ut,onDismiss:ft,children:jsxRuntimeExports.jsx(Root$3,{asChild:!0,..._t,dir:mt.dir,orientation:"vertical",loop:et,currentTabStopId:At,onCurrentTabStopIdChange:kt,onEntryFocus:composeEventHandlers(it,Qt=>{mt.isUsingKeyboardRef.current||Qt.preventDefault()}),preventScrollOnEntryFocus:!0,children:jsxRuntimeExports.jsx(Content,{role:"menu","aria-orientation":"vertical","data-state":getOpenState(yt.open),"data-radix-menu-content":"",dir:mt.dir,...vt,...gt,ref:Rt,style:{outline:"none",...gt.style},onKeyDown:composeEventHandlers(gt.onKeyDown,Qt=>{const nn=Qt.target.closest("[data-radix-menu-content]")===Qt.currentTarget,cn=Qt.ctrlKey||Qt.altKey||Qt.metaKey,Sn=Qt.key.length===1;nn&&(Qt.key==="Tab"&&Qt.preventDefault(),!cn&&Sn&&un(Qt.key));const vn=bt.current;if(Qt.target!==vn||!FIRST_LAST_KEYS.includes(Qt.key))return;Qt.preventDefault();const Rn=St().filter(tn=>!tn.disabled).map(tn=>tn.ref.current);LAST_KEYS.includes(Qt.key)&&Rn.reverse(),focusFirst$1(Rn)}),onBlur:composeEventHandlers($.onBlur,Qt=>{Qt.currentTarget.contains(Qt.target)||(window.clearTimeout(Ot.current),Ut.current="")}),onPointerMove:composeEventHandlers($.onPointerMove,whenMouse(Qt=>{const on=Qt.target,nn=qt.current!==Qt.clientX;if(Qt.currentTarget.contains(on)&&nn){const cn=Qt.clientX>qt.current?"right":"left";mn.current=cn,qt.current=Qt.clientX}}))})})})})})})});MenuContent.displayName=CONTENT_NAME$4;var GROUP_NAME$2="MenuGroup",MenuGroup=reactExports.forwardRef(($,j)=>{const{__scopeMenu:_e,...et}=$;return jsxRuntimeExports.jsx(Primitive.div,{role:"group",...et,ref:j})});MenuGroup.displayName=GROUP_NAME$2;var LABEL_NAME$2="MenuLabel",MenuLabel=reactExports.forwardRef(($,j)=>{const{__scopeMenu:_e,...et}=$;return jsxRuntimeExports.jsx(Primitive.div,{...et,ref:j})});MenuLabel.displayName=LABEL_NAME$2;var ITEM_NAME$2="MenuItem",ITEM_SELECT="menu.itemSelect",MenuItem=reactExports.forwardRef(($,j)=>{const{disabled:_e=!1,onSelect:et,...tt}=$,nt=reactExports.useRef(null),rt=useMenuRootContext(ITEM_NAME$2,$.__scopeMenu),ot=useMenuContentContext(ITEM_NAME$2,$.__scopeMenu),it=useComposedRefs(j,nt),at=reactExports.useRef(!1),dt=()=>{const st=nt.current;if(!_e&&st){const ut=new CustomEvent(ITEM_SELECT,{bubbles:!0,cancelable:!0});st.addEventListener(ITEM_SELECT,ft=>et==null?void 0:et(ft),{once:!0}),dispatchDiscreteCustomEvent(st,ut),ut.defaultPrevented?at.current=!1:rt.onClose()}};return jsxRuntimeExports.jsx(MenuItemImpl,{...tt,ref:it,disabled:_e,onClick:composeEventHandlers($.onClick,dt),onPointerDown:st=>{var ut;(ut=$.onPointerDown)==null||ut.call($,st),at.current=!0},onPointerUp:composeEventHandlers($.onPointerUp,st=>{var ut;at.current||(ut=st.currentTarget)==null||ut.click()}),onKeyDown:composeEventHandlers($.onKeyDown,st=>{const ut=ot.searchRef.current!=="";_e||ut&&st.key===" "||SELECTION_KEYS$1.includes(st.key)&&(st.currentTarget.click(),st.preventDefault())})})});MenuItem.displayName=ITEM_NAME$2;var MenuItemImpl=reactExports.forwardRef(($,j)=>{const{__scopeMenu:_e,disabled:et=!1,textValue:tt,...nt}=$,rt=useMenuContentContext(ITEM_NAME$2,_e),ot=useRovingFocusGroupScope(_e),it=reactExports.useRef(null),at=useComposedRefs(j,it),[dt,st]=reactExports.useState(!1),[ut,ft]=reactExports.useState("");return reactExports.useEffect(()=>{const pt=it.current;pt&&ft((pt.textContent??"").trim())},[nt.children]),jsxRuntimeExports.jsx(Collection$3.ItemSlot,{scope:_e,disabled:et,textValue:tt??ut,children:jsxRuntimeExports.jsx(Item$1,{asChild:!0,...ot,focusable:!et,children:jsxRuntimeExports.jsx(Primitive.div,{role:"menuitem","data-highlighted":dt?"":void 0,"aria-disabled":et||void 0,"data-disabled":et?"":void 0,...nt,ref:at,onPointerMove:composeEventHandlers($.onPointerMove,whenMouse(pt=>{et?rt.onItemLeave(pt):(rt.onItemEnter(pt),pt.defaultPrevented||pt.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:composeEventHandlers($.onPointerLeave,whenMouse(pt=>rt.onItemLeave(pt))),onFocus:composeEventHandlers($.onFocus,()=>st(!0)),onBlur:composeEventHandlers($.onBlur,()=>st(!1))})})})}),CHECKBOX_ITEM_NAME$1="MenuCheckboxItem",MenuCheckboxItem=reactExports.forwardRef(($,j)=>{const{checked:_e=!1,onCheckedChange:et,...tt}=$;return jsxRuntimeExports.jsx(ItemIndicatorProvider,{scope:$.__scopeMenu,checked:_e,children:jsxRuntimeExports.jsx(MenuItem,{role:"menuitemcheckbox","aria-checked":isIndeterminate(_e)?"mixed":_e,...tt,ref:j,"data-state":getCheckedState(_e),onSelect:composeEventHandlers(tt.onSelect,()=>et==null?void 0:et(isIndeterminate(_e)?!0:!_e),{checkForDefaultPrevented:!1})})})});MenuCheckboxItem.displayName=CHECKBOX_ITEM_NAME$1;var RADIO_GROUP_NAME$1="MenuRadioGroup",[RadioGroupProvider,useRadioGroupContext]=createMenuContext(RADIO_GROUP_NAME$1,{value:void 0,onValueChange:()=>{}}),MenuRadioGroup=reactExports.forwardRef(($,j)=>{const{value:_e,onValueChange:et,...tt}=$,nt=useCallbackRef$1(et);return jsxRuntimeExports.jsx(RadioGroupProvider,{scope:$.__scopeMenu,value:_e,onValueChange:nt,children:jsxRuntimeExports.jsx(MenuGroup,{...tt,ref:j})})});MenuRadioGroup.displayName=RADIO_GROUP_NAME$1;var RADIO_ITEM_NAME$1="MenuRadioItem",MenuRadioItem=reactExports.forwardRef(($,j)=>{const{value:_e,...et}=$,tt=useRadioGroupContext(RADIO_ITEM_NAME$1,$.__scopeMenu),nt=_e===tt.value;return jsxRuntimeExports.jsx(ItemIndicatorProvider,{scope:$.__scopeMenu,checked:nt,children:jsxRuntimeExports.jsx(MenuItem,{role:"menuitemradio","aria-checked":nt,...et,ref:j,"data-state":getCheckedState(nt),onSelect:composeEventHandlers(et.onSelect,()=>{var rt;return(rt=tt.onValueChange)==null?void 0:rt.call(tt,_e)},{checkForDefaultPrevented:!1})})})});MenuRadioItem.displayName=RADIO_ITEM_NAME$1;var ITEM_INDICATOR_NAME$1="MenuItemIndicator",[ItemIndicatorProvider,useItemIndicatorContext]=createMenuContext(ITEM_INDICATOR_NAME$1,{checked:!1}),MenuItemIndicator=reactExports.forwardRef(($,j)=>{const{__scopeMenu:_e,forceMount:et,...tt}=$,nt=useItemIndicatorContext(ITEM_INDICATOR_NAME$1,_e);return jsxRuntimeExports.jsx(Presence,{present:et||isIndeterminate(nt.checked)||nt.checked===!0,children:jsxRuntimeExports.jsx(Primitive.span,{...tt,ref:j,"data-state":getCheckedState(nt.checked)})})});MenuItemIndicator.displayName=ITEM_INDICATOR_NAME$1;var SEPARATOR_NAME$2="MenuSeparator",MenuSeparator=reactExports.forwardRef(($,j)=>{const{__scopeMenu:_e,...et}=$;return jsxRuntimeExports.jsx(Primitive.div,{role:"separator","aria-orientation":"horizontal",...et,ref:j})});MenuSeparator.displayName=SEPARATOR_NAME$2;var ARROW_NAME$3="MenuArrow",MenuArrow=reactExports.forwardRef(($,j)=>{const{__scopeMenu:_e,...et}=$,tt=usePopperScope$2(_e);return jsxRuntimeExports.jsx(Arrow,{...tt,...et,ref:j})});MenuArrow.displayName=ARROW_NAME$3;var SUB_NAME="MenuSub",[MenuSubProvider,useMenuSubContext]=createMenuContext(SUB_NAME),SUB_TRIGGER_NAME$1="MenuSubTrigger",MenuSubTrigger=reactExports.forwardRef(($,j)=>{const _e=useMenuContext(SUB_TRIGGER_NAME$1,$.__scopeMenu),et=useMenuRootContext(SUB_TRIGGER_NAME$1,$.__scopeMenu),tt=useMenuSubContext(SUB_TRIGGER_NAME$1,$.__scopeMenu),nt=useMenuContentContext(SUB_TRIGGER_NAME$1,$.__scopeMenu),rt=reactExports.useRef(null),{pointerGraceTimerRef:ot,onPointerGraceIntentChange:it}=nt,at={__scopeMenu:$.__scopeMenu},dt=reactExports.useCallback(()=>{rt.current&&window.clearTimeout(rt.current),rt.current=null},[]);return reactExports.useEffect(()=>dt,[dt]),reactExports.useEffect(()=>{const st=ot.current;return()=>{window.clearTimeout(st),it(null)}},[ot,it]),jsxRuntimeExports.jsx(MenuAnchor,{asChild:!0,...at,children:jsxRuntimeExports.jsx(MenuItemImpl,{id:tt.triggerId,"aria-haspopup":"menu","aria-expanded":_e.open,"aria-controls":tt.contentId,"data-state":getOpenState(_e.open),...$,ref:composeRefs(j,tt.onTriggerChange),onClick:st=>{var ut;(ut=$.onClick)==null||ut.call($,st),!($.disabled||st.defaultPrevented)&&(st.currentTarget.focus(),_e.open||_e.onOpenChange(!0))},onPointerMove:composeEventHandlers($.onPointerMove,whenMouse(st=>{nt.onItemEnter(st),!st.defaultPrevented&&!$.disabled&&!_e.open&&!rt.current&&(nt.onPointerGraceIntentChange(null),rt.current=window.setTimeout(()=>{_e.onOpenChange(!0),dt()},100))})),onPointerLeave:composeEventHandlers($.onPointerLeave,whenMouse(st=>{var ft,pt;dt();const ut=(ft=_e.content)==null?void 0:ft.getBoundingClientRect();if(ut){const gt=(pt=_e.content)==null?void 0:pt.dataset.side,yt=gt==="right",mt=yt?-5:5,vt=ut[yt?"left":"right"],_t=ut[yt?"right":"left"];nt.onPointerGraceIntentChange({area:[{x:st.clientX+mt,y:st.clientY},{x:vt,y:ut.top},{x:_t,y:ut.top},{x:_t,y:ut.bottom},{x:vt,y:ut.bottom}],side:gt}),window.clearTimeout(ot.current),ot.current=window.setTimeout(()=>nt.onPointerGraceIntentChange(null),300)}else{if(nt.onTriggerLeave(st),st.defaultPrevented)return;nt.onPointerGraceIntentChange(null)}})),onKeyDown:composeEventHandlers($.onKeyDown,st=>{var ft;const ut=nt.searchRef.current!=="";$.disabled||ut&&st.key===" "||SUB_OPEN_KEYS[et.dir].includes(st.key)&&(_e.onOpenChange(!0),(ft=_e.content)==null||ft.focus(),st.preventDefault())})})})});MenuSubTrigger.displayName=SUB_TRIGGER_NAME$1;var SUB_CONTENT_NAME$1="MenuSubContent",MenuSubContent=reactExports.forwardRef(($,j)=>{const _e=usePortalContext$1(CONTENT_NAME$4,$.__scopeMenu),{forceMount:et=_e.forceMount,...tt}=$,nt=useMenuContext(CONTENT_NAME$4,$.__scopeMenu),rt=useMenuRootContext(CONTENT_NAME$4,$.__scopeMenu),ot=useMenuSubContext(SUB_CONTENT_NAME$1,$.__scopeMenu),it=reactExports.useRef(null),at=useComposedRefs(j,it);return jsxRuntimeExports.jsx(Collection$3.Provider,{scope:$.__scopeMenu,children:jsxRuntimeExports.jsx(Presence,{present:et||nt.open,children:jsxRuntimeExports.jsx(Collection$3.Slot,{scope:$.__scopeMenu,children:jsxRuntimeExports.jsx(MenuContentImpl,{id:ot.contentId,"aria-labelledby":ot.triggerId,...tt,ref:at,align:"start",side:rt.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:dt=>{var st;rt.isUsingKeyboardRef.current&&((st=it.current)==null||st.focus()),dt.preventDefault()},onCloseAutoFocus:dt=>dt.preventDefault(),onFocusOutside:composeEventHandlers($.onFocusOutside,dt=>{dt.target!==ot.trigger&&nt.onOpenChange(!1)}),onEscapeKeyDown:composeEventHandlers($.onEscapeKeyDown,dt=>{rt.onClose(),dt.preventDefault()}),onKeyDown:composeEventHandlers($.onKeyDown,dt=>{var ft;const st=dt.currentTarget.contains(dt.target),ut=SUB_CLOSE_KEYS[rt.dir].includes(dt.key);st&&ut&&(nt.onOpenChange(!1),(ft=ot.trigger)==null||ft.focus(),dt.preventDefault())})})})})})});MenuSubContent.displayName=SUB_CONTENT_NAME$1;function getOpenState($){return $?"open":"closed"}function isIndeterminate($){return $==="indeterminate"}function getCheckedState($){return isIndeterminate($)?"indeterminate":$?"checked":"unchecked"}function focusFirst$1($){const j=document.activeElement;for(const _e of $)if(_e===j||(_e.focus(),document.activeElement!==j))return}function wrapArray$1($,j){return $.map((_e,et)=>$[(j+et)%$.length])}function getNextMatch($,j,_e){const tt=j.length>1&&Array.from(j).every(at=>at===j[0])?j[0]:j,nt=_e?$.indexOf(_e):-1;let rt=wrapArray$1($,Math.max(nt,0));tt.length===1&&(rt=rt.filter(at=>at!==_e));const it=rt.find(at=>at.toLowerCase().startsWith(tt.toLowerCase()));return it!==_e?it:void 0}function isPointInPolygon$1($,j){const{x:_e,y:et}=$;let tt=!1;for(let nt=0,rt=j.length-1;nt<j.length;rt=nt++){const ot=j[nt].x,it=j[nt].y,at=j[rt].x,dt=j[rt].y;it>et!=dt>et&&_e<(at-ot)*(et-it)/(dt-it)+ot&&(tt=!tt)}return tt}function isPointerInGraceArea($,j){if(!j)return!1;const _e={x:$.clientX,y:$.clientY};return isPointInPolygon$1(_e,j)}function whenMouse($){return j=>j.pointerType==="mouse"?$(j):void 0}var Root3$1=Menu,Anchor2=MenuAnchor,Portal$2=MenuPortal,Content2$4=MenuContent,Group=MenuGroup,Label=MenuLabel,Item2$1=MenuItem,CheckboxItem=MenuCheckboxItem,RadioGroup=MenuRadioGroup,RadioItem=MenuRadioItem,ItemIndicator$1=MenuItemIndicator,Separator=MenuSeparator,Arrow2$1=MenuArrow,SubTrigger=MenuSubTrigger,SubContent=MenuSubContent,DROPDOWN_MENU_NAME="DropdownMenu",[createDropdownMenuContext,createDropdownMenuScope]=createContextScope(DROPDOWN_MENU_NAME,[createMenuScope]),useMenuScope=createMenuScope(),[DropdownMenuProvider,useDropdownMenuContext]=createDropdownMenuContext(DROPDOWN_MENU_NAME),DropdownMenu=$=>{const{__scopeDropdownMenu:j,children:_e,dir:et,open:tt,defaultOpen:nt,onOpenChange:rt,modal:ot=!0}=$,it=useMenuScope(j),at=reactExports.useRef(null),[dt=!1,st]=useControllableState({prop:tt,defaultProp:nt,onChange:rt});return jsxRuntimeExports.jsx(DropdownMenuProvider,{scope:j,triggerId:useId(),triggerRef:at,contentId:useId(),open:dt,onOpenChange:st,onOpenToggle:reactExports.useCallback(()=>st(ut=>!ut),[st]),modal:ot,children:jsxRuntimeExports.jsx(Root3$1,{...it,open:dt,onOpenChange:st,dir:et,modal:ot,children:_e})})};DropdownMenu.displayName=DROPDOWN_MENU_NAME;var TRIGGER_NAME$3="DropdownMenuTrigger",DropdownMenuTrigger=reactExports.forwardRef(($,j)=>{const{__scopeDropdownMenu:_e,disabled:et=!1,...tt}=$,nt=useDropdownMenuContext(TRIGGER_NAME$3,_e),rt=useMenuScope(_e);return jsxRuntimeExports.jsx(Anchor2,{asChild:!0,...rt,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",id:nt.triggerId,"aria-haspopup":"menu","aria-expanded":nt.open,"aria-controls":nt.open?nt.contentId:void 0,"data-state":nt.open?"open":"closed","data-disabled":et?"":void 0,disabled:et,...tt,ref:composeRefs(j,nt.triggerRef),onPointerDown:composeEventHandlers($.onPointerDown,ot=>{!et&&ot.button===0&&ot.ctrlKey===!1&&(nt.onOpenToggle(),nt.open||ot.preventDefault())}),onKeyDown:composeEventHandlers($.onKeyDown,ot=>{et||(["Enter"," "].includes(ot.key)&&nt.onOpenToggle(),ot.key==="ArrowDown"&&nt.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(ot.key)&&ot.preventDefault())})})})});DropdownMenuTrigger.displayName=TRIGGER_NAME$3;var PORTAL_NAME$3="DropdownMenuPortal",DropdownMenuPortal=$=>{const{__scopeDropdownMenu:j,..._e}=$,et=useMenuScope(j);return jsxRuntimeExports.jsx(Portal$2,{...et,..._e})};DropdownMenuPortal.displayName=PORTAL_NAME$3;var CONTENT_NAME$3="DropdownMenuContent",DropdownMenuContent=reactExports.forwardRef(($,j)=>{const{__scopeDropdownMenu:_e,...et}=$,tt=useDropdownMenuContext(CONTENT_NAME$3,_e),nt=useMenuScope(_e),rt=reactExports.useRef(!1);return jsxRuntimeExports.jsx(Content2$4,{id:tt.contentId,"aria-labelledby":tt.triggerId,...nt,...et,ref:j,onCloseAutoFocus:composeEventHandlers($.onCloseAutoFocus,ot=>{var it;rt.current||(it=tt.triggerRef.current)==null||it.focus(),rt.current=!1,ot.preventDefault()}),onInteractOutside:composeEventHandlers($.onInteractOutside,ot=>{const it=ot.detail.originalEvent,at=it.button===0&&it.ctrlKey===!0,dt=it.button===2||at;(!tt.modal||dt)&&(rt.current=!0)}),style:{...$.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DropdownMenuContent.displayName=CONTENT_NAME$3;var GROUP_NAME$1="DropdownMenuGroup",DropdownMenuGroup=reactExports.forwardRef(($,j)=>{const{__scopeDropdownMenu:_e,...et}=$,tt=useMenuScope(_e);return jsxRuntimeExports.jsx(Group,{...tt,...et,ref:j})});DropdownMenuGroup.displayName=GROUP_NAME$1;var LABEL_NAME$1="DropdownMenuLabel",DropdownMenuLabel=reactExports.forwardRef(($,j)=>{const{__scopeDropdownMenu:_e,...et}=$,tt=useMenuScope(_e);return jsxRuntimeExports.jsx(Label,{...tt,...et,ref:j})});DropdownMenuLabel.displayName=LABEL_NAME$1;var ITEM_NAME$1="DropdownMenuItem",DropdownMenuItem=reactExports.forwardRef(($,j)=>{const{__scopeDropdownMenu:_e,...et}=$,tt=useMenuScope(_e);return jsxRuntimeExports.jsx(Item2$1,{...tt,...et,ref:j})});DropdownMenuItem.displayName=ITEM_NAME$1;var CHECKBOX_ITEM_NAME="DropdownMenuCheckboxItem",DropdownMenuCheckboxItem=reactExports.forwardRef(($,j)=>{const{__scopeDropdownMenu:_e,...et}=$,tt=useMenuScope(_e);return jsxRuntimeExports.jsx(CheckboxItem,{...tt,...et,ref:j})});DropdownMenuCheckboxItem.displayName=CHECKBOX_ITEM_NAME;var RADIO_GROUP_NAME="DropdownMenuRadioGroup",DropdownMenuRadioGroup=reactExports.forwardRef(($,j)=>{const{__scopeDropdownMenu:_e,...et}=$,tt=useMenuScope(_e);return jsxRuntimeExports.jsx(RadioGroup,{...tt,...et,ref:j})});DropdownMenuRadioGroup.displayName=RADIO_GROUP_NAME;var RADIO_ITEM_NAME="DropdownMenuRadioItem",DropdownMenuRadioItem=reactExports.forwardRef(($,j)=>{const{__scopeDropdownMenu:_e,...et}=$,tt=useMenuScope(_e);return jsxRuntimeExports.jsx(RadioItem,{...tt,...et,ref:j})});DropdownMenuRadioItem.displayName=RADIO_ITEM_NAME;var INDICATOR_NAME="DropdownMenuItemIndicator",DropdownMenuItemIndicator=reactExports.forwardRef(($,j)=>{const{__scopeDropdownMenu:_e,...et}=$,tt=useMenuScope(_e);return jsxRuntimeExports.jsx(ItemIndicator$1,{...tt,...et,ref:j})});DropdownMenuItemIndicator.displayName=INDICATOR_NAME;var SEPARATOR_NAME$1="DropdownMenuSeparator",DropdownMenuSeparator=reactExports.forwardRef(($,j)=>{const{__scopeDropdownMenu:_e,...et}=$,tt=useMenuScope(_e);return jsxRuntimeExports.jsx(Separator,{...tt,...et,ref:j})});DropdownMenuSeparator.displayName=SEPARATOR_NAME$1;var ARROW_NAME$2="DropdownMenuArrow",DropdownMenuArrow=reactExports.forwardRef(($,j)=>{const{__scopeDropdownMenu:_e,...et}=$,tt=useMenuScope(_e);return jsxRuntimeExports.jsx(Arrow2$1,{...tt,...et,ref:j})});DropdownMenuArrow.displayName=ARROW_NAME$2;var SUB_TRIGGER_NAME="DropdownMenuSubTrigger",DropdownMenuSubTrigger=reactExports.forwardRef(($,j)=>{const{__scopeDropdownMenu:_e,...et}=$,tt=useMenuScope(_e);return jsxRuntimeExports.jsx(SubTrigger,{...tt,...et,ref:j})});DropdownMenuSubTrigger.displayName=SUB_TRIGGER_NAME;var SUB_CONTENT_NAME="DropdownMenuSubContent",DropdownMenuSubContent=reactExports.forwardRef(($,j)=>{const{__scopeDropdownMenu:_e,...et}=$,tt=useMenuScope(_e);return jsxRuntimeExports.jsx(SubContent,{...tt,...et,ref:j,style:{...$.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DropdownMenuSubContent.displayName=SUB_CONTENT_NAME;var Root2$3=DropdownMenu,Trigger$2=DropdownMenuTrigger,Portal2$1=DropdownMenuPortal,Content2$3=DropdownMenuContent,Item2=DropdownMenuItem;function useEventListener($,j,_e=window,et){const tt=reactExports.useRef(),{capture:nt,passive:rt,once:ot}=et||{};reactExports.useEffect(()=>{tt.current=j},[j]),reactExports.useEffect(()=>{if(!(_e&&_e.addEventListener))return;const at=st=>{tt.current&&tt.current(st)},dt={capture:nt,passive:rt,once:ot};return _e.addEventListener($,at,dt),()=>{_e.removeEventListener($,at)}},[$,_e,nt,rt,ot])}function useClickCoordinates(){const[$,j]=reactExports.useState({x:0,y:0}),_e=reactExports.useCallback(({clientX:et,clientY:tt})=>{j({x:et,y:tt})},[j]);return useEventListener("mouseup",_e),useEventListener("touchend",_e),$}const menuContext=reactExports.createContext({item:{name:[],image:""},index:-1,displayIndex:-1}),QspMenu=({attrs:$,showAs:j,showAt:_e,offsetX:et,offsetY:tt,children:nt})=>{const[rt,ot,it]=useAttributes($,"qsp-menu"),at=useAtom_2(menu$),dt=useClickCoordinates(),st={position:"fixed"},ut=useFadeTransition(at.isOpen);let ft="start",pt="bottom";if(j==="fixed"){const[gt,yt]=(_e??"left top").split(" ");switch(gt){case"left":st.left=et;break;case"center":st.left=`calc(50% - ${et}px)`,ft="center";break;case"right":st.right=et,ft="end";break}switch(yt){case"top":st.top=tt;break;case"center":st.top=`calc(50% - ${tt}px)`,pt="left";break;case"bottom":st.bottom=tt,pt="top";break}}else st.left=dt.x??0,st.top=dt.y??0;return jsxRuntimeExports.jsxs(Root2$3,{open:at.isOpen,onOpenChange:()=>menu$.actions.close(),children:[jsxRuntimeExports.jsx(Trigger$2,{asChild:!0,children:jsxRuntimeExports.jsx("div",{style:st})}),ut((gt,yt)=>yt?jsxRuntimeExports.jsx(Portal2$1,{container:document.getElementById("portal-container"),children:jsxRuntimeExports.jsx(Content2$3,{forceMount:!0,asChild:!0,align:ft,side:pt,loop:!0,children:jsxRuntimeExports.jsx(animated.div,{style:gt,children:jsxRuntimeExports.jsx(rt,{style:ot,...it,children:nt})})})}):null)]})},QspMenuList=({attrs:$,children:j})=>{const _e=useAtom_2(menuWithParsedName$),[et,tt,nt]=useAttributes($,"qsp-menu-list");let rt=1;return jsxRuntimeExports.jsx(et,{style:tt,...nt,children:_e.map((ot,it)=>ot.name[0]==="-"?jsxRuntimeExports.jsx("qsp-menu-separator",{},ot.key):jsxRuntimeExports.jsx(menuContext.Provider,{value:{item:ot,index:it,displayIndex:rt++},children:React$1.Children.map(j,at=>React$1.cloneElement(at))},ot.key))})},QspMenuItem=({attrs:$,children:j})=>{const[_e,et]=reactExports.useState(!1),[tt,nt,{useFormat:rt,...ot}]=useAttributes($,"qsp-menu-item"),{item:it,index:at}=reactExports.useContext(menuContext),dt={...nt,"--menu-item-image":it.image?`url("${it.image}")`:""},st=()=>{et(!0)},ut=()=>{et(!1)},ft=pt=>{pt.preventDefault(),menu$.actions.select(at)};return jsxRuntimeExports.jsx(Item2,{asChild:!0,children:jsxRuntimeExports.jsx(tt,{...ot,style:dt,"data-qsp-selected":_e?"":null,onClick:ft,onMouseOver:st,onMouseLeave:ut,children:j})})},QspMenuItemName=({attrs:$})=>{const{item:j}=reactExports.useContext(menuContext),[_e,et,tt]=useAttributes($,"qsp-menu-name");return jsxRuntimeExports.jsx(_e,{style:et,...tt,children:jsxRuntimeExports.jsx(Markup,{content:j.name})})},QspMenuItemImage=({attrs:$})=>{const{item:j}=reactExports.useContext(menuContext),[,_e,et]=useAttributes($,"img","qsp-menu-image");return j.image?jsxRuntimeExports.jsx("img",{alt:"",...et,style:_e,src:j.image}):null},QspMenuItemIndex=({attrs:$})=>{const{displayIndex:j}=reactExports.useContext(menuContext),[_e,et,tt]=useAttributes($,"qsp-menu-index");return jsxRuntimeExports.jsx(_e,{style:et,...tt,children:j})},QspMsg=({attrs:$,children:j})=>{const[_e,et,tt]=useAttributes($,"qsp-msg"),nt=useAtom_2(msg$),rt=useFadeTransition(nt.isOpen);function ot(){msg$.actions.close()}return jsxRuntimeExports.jsx(buttonContext.Provider,{value:{okAction:ot,cancelAction:ot},children:jsxRuntimeExports.jsx(Root$6,{open:nt.isOpen,onOpenChange:ot,children:rt((it,at)=>at?jsxRuntimeExports.jsxs(Portal$3,{container:document.getElementById("portal-container"),children:[jsxRuntimeExports.jsx(Overlay,{className:"qsp-overlay"}),jsxRuntimeExports.jsx(Content$1,{forceMount:!0,asChild:!0,children:jsxRuntimeExports.jsx(animated.div,{style:it,className:"qsp-dialog-container",children:jsxRuntimeExports.jsx(_e,{style:et,...tt,children:j})})})]}):null)})})},QspMsgContent=({attrs:$})=>{const{content:j,key:_e}=useAtom_2(parsedMsgContent$),[et,tt,{useFormat:nt,...rt}]=useAttributes($,"qsp-msg-content");return jsxRuntimeExports.jsx(Description$1,{asChild:!0,children:reactExports.createElement(et,{style:tt,...rt,key:_e},jsxRuntimeExports.jsx(QspScrollable,{attrs:{},children:jsxRuntimeExports.jsx(Markup,{content:j})}))})},objectContext=reactExports.createContext({object:{name:[],image:""},index:-1}),QspObjects=({attrs:$,children:j})=>{const[_e,et,tt]=useAttributes($,"qsp-objects");return useAtom_2(isObjsVisible$)?jsxRuntimeExports.jsx(_e,{style:et,...tt,children:j}):null},QspObjectsList=({attrs:$,children:j})=>{const _e=useAtom_2(objectsWithParsedName$),[et,tt,nt]=useAttributes($,"qsp-objects-list");return jsxRuntimeExports.jsx(et,{style:tt,...nt,children:_e.map((rt,ot)=>jsxRuntimeExports.jsx(objectContext.Provider,{value:{object:rt,index:ot},children:React$1.Children.map(j,it=>React$1.cloneElement(it))},rt.key))})},QspObjectItem=({attrs:$,children:j})=>{const[_e,et]=reactExports.useState(!1),[tt,nt,{useFormat:rt,...ot}]=useAttributes($,"qsp-object"),{object:it,index:at}=reactExports.useContext(objectContext),dt={...nt,"--object-image":it.image?`url("${it.image}")`:""},st=()=>{et(!0)},ut=()=>{et(!1)},ft=()=>{selectObject(at)};return jsxRuntimeExports.jsx(tt,{...ot,style:dt,"data-qsp-selected":_e?"":null,onClick:ft,onMouseOver:st,onMouseLeave:ut,children:j})},QspObjectName=({attrs:$})=>{const[j,_e,et]=useAttributes($,"qsp-object-name"),{object:tt}=reactExports.useContext(objectContext);return jsxRuntimeExports.jsx(j,{...et,style:_e,children:jsxRuntimeExports.jsx(Markup,{content:tt.name})})},QspObjectImage=({attrs:$})=>{const{object:j}=reactExports.useContext(objectContext),[_e,et,tt]=useAttributes($,"img","qsp-object-image");return j.image?jsxRuntimeExports.jsx(_e,{...tt,style:et,src:j.image}):null},QspObjectIndex=({attrs:$})=>{const{index:j}=reactExports.useContext(objectContext),[_e,et,tt]=useAttributes($,"qsp-object-index");return jsxRuntimeExports.jsx(_e,{...tt,style:et,children:j+1})},QspPauseScreen=({attrs:$,children:j})=>{const _e=useAtom_2(isPauseScreenVisible$),et=useAtom_2(currentGameEntry$),[tt,nt,rt]=useAttributes($,"qsp-pause-screen"),ot=useFadeTransition(_e);return jsxRuntimeExports.jsx(Root$6,{modal:!0,open:_e,onOpenChange:it=>it?openPauseScreen():closePauseScreen(),children:ot((it,at)=>at?jsxRuntimeExports.jsxs(Portal$3,{container:document.getElementById("portal-container"),children:[jsxRuntimeExports.jsx(Overlay,{className:"qsp-overlay"}),jsxRuntimeExports.jsx(Content$1,{forceMount:!0,asChild:!0,children:jsxRuntimeExports.jsx(animated.div,{className:"qsp-dialog-container",style:it,children:jsxRuntimeExports.jsxs("div",{className:"qsp-pause-dialog",children:[jsxRuntimeExports.jsx(Title,{children:(et==null?void 0:et.title)||"Pause"}),jsxRuntimeExports.jsx(tt,{style:nt,...rt,children:j})]})})})]}):null)})},QspPauseScreenContent=({attrs:$,children:j})=>{const[_e,et,tt]=useAttributes($,"qsp-pause-screen-content"),nt=useAtom_2(requestedAction$);return jsxRuntimeExports.jsx(_e,{style:et,...tt,"data-requested-save-command":nt,children:j})},slotContentContext=reactExports.createContext({index:-1}),baseSlots$=atom($=>Array.from({length:$(saveSlotsCount$)},(j,_e)=>_e+1)),QspSlotsList=({attrs:$,children:j})=>{const _e=useAtom_2(baseSlots$),et=useAtom_2(saveSlots$),[tt,nt,rt]=useAttributes($,"qsp-slots-list");return jsxRuntimeExports.jsx(tt,{style:nt,...rt,children:_e.map(ot=>{const it=et.find(at=>at.slot===ot);return jsxRuntimeExports.jsx(slotContentContext.Provider,{value:{index:ot,date:it==null?void 0:it.timestamp},children:React$1.Children.map(j,at=>React$1.cloneElement(at))},ot)})})},QspSlot=({attrs:$,children:j})=>{const{index:_e,date:et}=reactExports.useContext(slotContentContext),[tt,nt,rt]=useAttributes($,"qsp-save-slot"),ot={...nt,"--slot-index":`${_e}`};return jsxRuntimeExports.jsx(tt,{...rt,style:ot,"data-qsp-save":!0,"data-qsp-save-index":_e,"data-save-empty":et?null:"",children:j})},QspSlotIndex=({attrs:$})=>{const{index:j}=reactExports.useContext(slotContentContext),[_e,et,tt]=useAttributes($,"qsp-slot-index");return jsxRuntimeExports.jsx(_e,{...tt,style:et,children:j})},QspSlotDate=({children:$,attrs:j})=>{const{date:_e}=reactExports.useContext(slotContentContext),[et,tt,nt]=useAttributes(j,"qsp-slot-date");return _e?jsxRuntimeExports.jsx(et,{...nt,style:tt,children:formatDate(new Date(_e))}):jsxRuntimeExports.jsx(et,{...nt,style:tt,children:$})},QspPauseScreenPanel=({name:$,attrs:j,children:_e})=>{const[et,tt,nt]=useAttributes(j,"qsp-pause-screen-panel");return useAtom_2(pauseScreenCurrentPanel$)===$?jsxRuntimeExports.jsx(et,{style:tt,...nt,children:_e}):null},QspStats=({attrs:$,children:j})=>{const[_e,et,tt]=useAttributes($,"qsp-stats"),nt=useAtom_2(isStatsVisible$),rt=useAtom_2(statsContent$),ot=usePrevious$1(rt),it=useQspVariable("DISABLESCROLL","",0,0);return reactExports.useEffect(()=>{it||(ot&&rt!==ot&&rt.startsWith(ot)?statsScroll$.update(at=>Math.max(at,0)+1):statsScroll$.set(-1))},[ot,rt]),nt?jsxRuntimeExports.jsx(scrollContext.Provider,{value:statsScroll$,children:jsxRuntimeExports.jsx(_e,{style:et,...tt,children:j})}):null},QspStatsContent=({attrs:$})=>{const[j,_e,{useFormat:et,...tt}]=useAttributes($,"qsp-stats-content"),{content:nt,key:rt}=useAtom_2(parsedStatsContent$);return reactExports.createElement(j,{style:_e,...tt,key:rt},jsxRuntimeExports.jsx(Markup,{content:nt}))},QspView=({attrs:$,modal:j,children:_e})=>{const[et,tt,nt]=useAttributes($,"qsp-view"),rt=useAtom_2(view$),ot={...tt,"--view-image":`url("${rt.path}")`};return j?jsxRuntimeExports.jsx(Root$6,{open:rt.isOpen,onOpenChange:()=>view$.actions.close(),children:jsxRuntimeExports.jsxs(Portal$3,{container:document.getElementById("portal-container"),children:[jsxRuntimeExports.jsx(Overlay,{className:"qsp-overlay"}),jsxRuntimeExports.jsx(Content$1,{className:"qsp-dialog-container",children:jsxRuntimeExports.jsx(et,{...nt,style:ot,children:_e})})]})}):jsxRuntimeExports.jsx(et,{...nt,style:ot,children:_e})},QspViewImage=({attrs:$})=>{const[,j,_e]=useAttributes($,"img","qsp-view-image"),et=useAtom_2(view$);return et.path?jsxRuntimeExports.jsx("img",{src:et.path,alt:"",style:j,..._e}):null},Link=({exec:$,act:j,children:_e,attrs:et})=>{const tt=reactExports.useCallback(ot=>{ot.preventDefault(),ot.stopPropagation(),$?execCode($):j&&(selectAction(j-1),execSelectedAction())},[$,j]),[,nt,rt]=useAttributes(et,"a");return jsxRuntimeExports.jsx("a",{...rt,style:nt,href:"#",onClick:tt,children:_e})},HtmlLink=({children:$,attrs:j})=>{const[,_e,{href:et,...tt}]=useAttributes(j,"a"),nt=rt=>{if(tt.onClick)return tt.onClick(rt);et.startsWith("#")&&(rt.preventDefault(),et!=="#"&&(window.location.hash=et))};return jsxRuntimeExports.jsx("a",{target:"_blank",rel:"noreferrer",...tt,style:_e,href:et,onClick:nt,children:$})},voidTags=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],TAGS_MAP={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient",textpath:"textPath"},Element$1=({attrs:$={},children:j=null,tagName:_e})=>{const et=_e in TAGS_MAP?TAGS_MAP[_e]:_e,[tt,nt,rt]=useAttributes($,et);return voidTags.includes(_e)?jsxRuntimeExports.jsx(tt,{style:nt,...rt}):jsxRuntimeExports.jsx(tt,{style:nt,...rt,children:j})},QspT=({children:$})=>{const[j]=useTranslation();return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:j($)})},QspMain=({attrs:$,children:j})=>{const[_e,et,tt]=useAttributes($,"qsp-main"),nt=useAtom_2(mainContent$),rt=useAtom_2(isNewLoc$),ot=useQspVariable("DISABLESCROLL","",0,0);return reactExports.useEffect(()=>{ot||mainScroll$.update(it=>rt?-1:Math.max(it,0)+1)},[rt,nt]),jsxRuntimeExports.jsx(scrollContext.Provider,{value:mainScroll$,children:jsxRuntimeExports.jsx(_e,{style:et,...tt,children:j})})},QspMainContent=({attrs:$})=>{const{key:j,content:_e}=useAtom_2(parsedMainContent$),et=useAtom_2(newLocHash$),[tt,nt,{useFormat:rt,...ot}]=useAttributes($,"qsp-main-content");return reactExports.useEffect(()=>{mainContent$.set(nextMainContent$.value)},[et]),reactExports.createElement(tt,{style:nt,...ot,key:j},jsxRuntimeExports.jsx(Markup,{content:_e}))};function useQspBind($,j,_e){return[useQspVariable($,j,_e,""),nt=>{var st;const ot=nt.target.type==="checkbox"?nt.target.checked?nt.target.value:"":nt.target.value,it=[$];(j||_e)&&(it.push("["),j?it.push(`"${j}"`):it.push(String(_e)),it.push("]"));const at=it.join(""),dt=at.startsWith("$")?`"${ot}"`:ot||0;(st=qspApi$.value)==null||st.execCode(`${at} = ${dt}`)}]}const QspBoundSelect=({attributes:$,style:j,bind:_e,bindKey:et,bindIndex:tt,children:nt})=>{const[rt,ot]=useQspBind(_e,et,tt);return jsxRuntimeExports.jsx("select",{...$,style:j,value:rt,onChange:ot,children:nt})},HtmlSelect=({attrs:$,children:j})=>{const[,_e,{value:et,qspBind:tt,qspBindKey:nt,qspBindIndex:rt,...ot}]=useAttributes($,"select");if(tt){const it=parseInt(rt||"0",10);return jsxRuntimeExports.jsx(QspBoundSelect,{attributes:ot,style:_e,bind:tt,bindKey:nt,bindIndex:it,children:j})}return jsxRuntimeExports.jsx("select",{...ot,style:_e,defaultValue:et,children:j})},QspBoundTextarea=({attributes:$,style:j,bind:_e,bindKey:et,bindIndex:tt})=>{const[nt,rt]=useQspBind(_e,et,tt);return jsxRuntimeExports.jsx("textarea",{...$,style:j,value:nt,onChange:rt})},HtmlTextarea=({attrs:$})=>{const[,j,{value:_e,qspBind:et,qspBindKey:tt,qspBindIndex:nt,...rt}]=useAttributes($,"textarea");if(et){const ot=parseInt(nt||"0",10);return jsxRuntimeExports.jsx(QspBoundTextarea,{attributes:rt,style:j,bind:et,bindKey:tt,bindIndex:ot})}return jsxRuntimeExports.jsx("textarea",{...rt,style:j,defaultValue:_e})},QspBoundInput=({attributes:$,style:j,bind:_e,bindKey:et,bindIndex:tt,value:nt})=>{const[rt,ot]=useQspBind(_e,et,tt),it=$.type||"text";return it==="radio"?jsxRuntimeExports.jsx("input",{...$,style:j,type:"radio",value:nt,checked:rt===nt,onChange:ot}):it==="checkbox"?jsxRuntimeExports.jsx("input",{...$,style:j,type:"checkbox",value:nt,checked:!!rt,onChange:ot}):jsxRuntimeExports.jsx("input",{...$,style:j,value:rt,onChange:ot})},HtmlInput=({attrs:$})=>{const[,j,{value:_e,qspBind:et,qspBindKey:tt,qspBindIndex:nt,...rt}]=useAttributes($,"input");if(et){const ot=parseInt(nt||"0",10);return jsxRuntimeExports.jsx(QspBoundInput,{attributes:rt,style:j,bind:et,bindKey:tt,bindIndex:ot,value:_e})}return jsxRuntimeExports.jsx("input",{...rt,style:j,defaultValue:_e})},HtmlForm=({attrs:$,children:j})=>{const[,_e,et]=useAttributes($,"form"),tt=et["qspOn:submit"];delete et["qspOn:submit"];function nt(rt){var ot;rt.preventDefault(),tt!=null&&tt.toLowerCase().startsWith("exec:")&&((ot=qspApi$.value)==null||ot.execCode(tt.substring(5)))}return jsxRuntimeExports.jsx("form",{...et,style:_e,onSubmit:nt,children:j})},HtmlImg=({attrs:$,src:j})=>{const[,_e,et]=useAttributes($,"img");return jsxRuntimeExports.jsx("img",{src:j.replace("\\","/"),alt:"",style:_e,...et})},QspLayer=$=>{const j=useSetup(rt=>{const ot=atom(it=>it(rt).name);return atom(it=>it(layers$)[it(ot)])},$),_e=useAtom_2(j),[et,tt,nt]=useAttributes($.attrs,"qsp-layer");return reactExports.useEffect(()=>registerLayer($.name),[]),_e?(tt.zIndex=$.index,jsxRuntimeExports.jsx(et,{...nt,style:tt,"data-layer-name":$.name,children:$.children})):null},QspRegion=$=>{const j=useSetup(ot=>{const it=atom(at=>at(ot).name);return atom(at=>templateParser.parse(at(regions$)[at(it)]))},$),_e=useSetup(ot=>{const it=atom(at=>at(ot).name);return atom(at=>at(regionsScroll$)[at(it)]??0)},$),et=useAtom_2(j),[tt,nt,rt]=useAttributes($.attrs,"qsp-region");return $.scrollable?jsxRuntimeExports.jsx(scrollContext.Provider,{value:_e,children:jsxRuntimeExports.jsx(tt,{"data-region-name":$.name,style:nt,...rt,children:jsxRuntimeExports.jsx(QspScrollable,{attrs:{},children:jsxRuntimeExports.jsx(Markup,{content:et})})})}):jsxRuntimeExports.jsx(tt,{"data-region-name":$.name,style:nt,...rt,children:jsxRuntimeExports.jsx(Markup,{content:et})})},QspShow=({variable:$,condition:j,children:_e})=>useQspExpression($,j)?_e:null,QspStyle=({from:$})=>{const j=useQspVariable($,"",0,"");return j?jsxRuntimeExports.jsx("style",{"data-qsp-from":$,children:j}):null},QspVariable=({name:$,vkey:j="",index:_e=0})=>{const et=$.startsWith("$")?"":0,tt=useQspVariable($,j,_e,et);return jsxRuntimeExports.jsx("qsp-variable",{"data-name":$,"data-key":j||_e,children:tt})},namedSlotContentContext=reactExports.createContext({path:""}),QspNamedSlot=$=>{const{attrs:j,children:_e,path:et}=$,[tt,nt,rt]=useAttributes(j,"qsp-save-slot"),ot=useSetup(at=>{const dt=at.focus(st=>st.path);return atom(st=>{const ut=st(dt);return st(namedSlots$).find(pt=>pt.key===ut)})},$),it=useAtom_2(ot);return jsxRuntimeExports.jsx(slotContentContext.Provider,{value:{index:-1,date:it==null?void 0:it.timestamp},children:jsxRuntimeExports.jsx(namedSlotContentContext.Provider,{value:{path:$.path},children:jsxRuntimeExports.jsx(tt,{...rt,style:nt,"data-qsp-save":!0,"data-qsp-save-path":et,"data-save-empty":it?null:"",children:_e})})})};function usePrevious($){const j=reactExports.useRef({value:$,previous:$});return reactExports.useMemo(()=>(j.current.value!==$&&(j.current.previous=j.current.value,j.current.value=$),j.current.previous),[$])}var PAGE_KEYS=["PageUp","PageDown"],ARROW_KEYS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],BACK_KEYS={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},SLIDER_NAME="Slider",[Collection$2,useCollection$2,createCollectionScope$2]=createCollection(SLIDER_NAME),[createSliderContext,createSliderScope]=createContextScope(SLIDER_NAME,[createCollectionScope$2]),[SliderProvider,useSliderContext]=createSliderContext(SLIDER_NAME),Slider=reactExports.forwardRef(($,j)=>{const{name:_e,min:et=0,max:tt=100,step:nt=1,orientation:rt="horizontal",disabled:ot=!1,minStepsBetweenThumbs:it=0,defaultValue:at=[et],value:dt,onValueChange:st=()=>{},onValueCommit:ut=()=>{},inverted:ft=!1,...pt}=$,gt=reactExports.useRef(new Set),yt=reactExports.useRef(0),vt=rt==="horizontal"?SliderHorizontal:SliderVertical,[_t=[],St]=useControllableState({prop:dt,defaultProp:at,onChange:Ut=>{var rn;(rn=[...gt.current][yt.current])==null||rn.focus(),st(Ut)}}),At=reactExports.useRef(_t);function kt(Ut){const Yt=getClosestValueIndex(_t,Ut);Ot(Ut,Yt)}function bt(Ut){Ot(Ut,yt.current)}function Rt(){const Ut=At.current[yt.current];_t[yt.current]!==Ut&&ut(_t)}function Ot(Ut,Yt,{commit:rn}={commit:!1}){const mn=getDecimalCount(nt),qt=roundValue(Math.round((Ut-et)/nt)*nt+et,mn),Zt=clamp$2(qt,[et,tt]);St((Jt=[])=>{const un=getNextSortedValues(Jt,Zt,Yt);if(hasMinStepsBetweenValues(un,it*nt)){yt.current=un.indexOf(Zt);const Wt=String(un)!==String(Jt);return Wt&&rn&&ut(un),Wt?un:Jt}else return Jt})}return jsxRuntimeExports.jsx(SliderProvider,{scope:$.__scopeSlider,name:_e,disabled:ot,min:et,max:tt,valueIndexToChangeRef:yt,thumbs:gt.current,values:_t,orientation:rt,children:jsxRuntimeExports.jsx(Collection$2.Provider,{scope:$.__scopeSlider,children:jsxRuntimeExports.jsx(Collection$2.Slot,{scope:$.__scopeSlider,children:jsxRuntimeExports.jsx(vt,{"aria-disabled":ot,"data-disabled":ot?"":void 0,...pt,ref:j,onPointerDown:composeEventHandlers(pt.onPointerDown,()=>{ot||(At.current=_t)}),min:et,max:tt,inverted:ft,onSlideStart:ot?void 0:kt,onSlideMove:ot?void 0:bt,onSlideEnd:ot?void 0:Rt,onHomeKeyDown:()=>!ot&&Ot(et,0,{commit:!0}),onEndKeyDown:()=>!ot&&Ot(tt,_t.length-1,{commit:!0}),onStepKeyDown:({event:Ut,direction:Yt})=>{if(!ot){const qt=PAGE_KEYS.includes(Ut.key)||Ut.shiftKey&&ARROW_KEYS.includes(Ut.key)?10:1,Zt=yt.current,Jt=_t[Zt],un=nt*qt*Yt;Ot(Jt+un,Zt,{commit:!0})}}})})})})});Slider.displayName=SLIDER_NAME;var[SliderOrientationProvider,useSliderOrientationContext]=createSliderContext(SLIDER_NAME,{startEdge:"left",endEdge:"right",size:"width",direction:1}),SliderHorizontal=reactExports.forwardRef(($,j)=>{const{min:_e,max:et,dir:tt,inverted:nt,onSlideStart:rt,onSlideMove:ot,onSlideEnd:it,onStepKeyDown:at,...dt}=$,[st,ut]=reactExports.useState(null),ft=useComposedRefs(j,_t=>ut(_t)),pt=reactExports.useRef(),gt=useDirection(tt),yt=gt==="ltr",mt=yt&&!nt||!yt&&nt;function vt(_t){const St=pt.current||st.getBoundingClientRect(),At=[0,St.width],bt=linearScale(At,mt?[_e,et]:[et,_e]);return pt.current=St,bt(_t-St.left)}return jsxRuntimeExports.jsx(SliderOrientationProvider,{scope:$.__scopeSlider,startEdge:mt?"left":"right",endEdge:mt?"right":"left",direction:mt?1:-1,size:"width",children:jsxRuntimeExports.jsx(SliderImpl,{dir:gt,"data-orientation":"horizontal",...dt,ref:ft,style:{...dt.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:_t=>{const St=vt(_t.clientX);rt==null||rt(St)},onSlideMove:_t=>{const St=vt(_t.clientX);ot==null||ot(St)},onSlideEnd:()=>{pt.current=void 0,it==null||it()},onStepKeyDown:_t=>{const At=BACK_KEYS[mt?"from-left":"from-right"].includes(_t.key);at==null||at({event:_t,direction:At?-1:1})}})})}),SliderVertical=reactExports.forwardRef(($,j)=>{const{min:_e,max:et,inverted:tt,onSlideStart:nt,onSlideMove:rt,onSlideEnd:ot,onStepKeyDown:it,...at}=$,dt=reactExports.useRef(null),st=useComposedRefs(j,dt),ut=reactExports.useRef(),ft=!tt;function pt(gt){const yt=ut.current||dt.current.getBoundingClientRect(),mt=[0,yt.height],_t=linearScale(mt,ft?[et,_e]:[_e,et]);return ut.current=yt,_t(gt-yt.top)}return jsxRuntimeExports.jsx(SliderOrientationProvider,{scope:$.__scopeSlider,startEdge:ft?"bottom":"top",endEdge:ft?"top":"bottom",size:"height",direction:ft?1:-1,children:jsxRuntimeExports.jsx(SliderImpl,{"data-orientation":"vertical",...at,ref:st,style:{...at.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:gt=>{const yt=pt(gt.clientY);nt==null||nt(yt)},onSlideMove:gt=>{const yt=pt(gt.clientY);rt==null||rt(yt)},onSlideEnd:()=>{ut.current=void 0,ot==null||ot()},onStepKeyDown:gt=>{const mt=BACK_KEYS[ft?"from-bottom":"from-top"].includes(gt.key);it==null||it({event:gt,direction:mt?-1:1})}})})}),SliderImpl=reactExports.forwardRef(($,j)=>{const{__scopeSlider:_e,onSlideStart:et,onSlideMove:tt,onSlideEnd:nt,onHomeKeyDown:rt,onEndKeyDown:ot,onStepKeyDown:it,...at}=$,dt=useSliderContext(SLIDER_NAME,_e);return jsxRuntimeExports.jsx(Primitive.span,{...at,ref:j,onKeyDown:composeEventHandlers($.onKeyDown,st=>{st.key==="Home"?(rt(st),st.preventDefault()):st.key==="End"?(ot(st),st.preventDefault()):PAGE_KEYS.concat(ARROW_KEYS).includes(st.key)&&(it(st),st.preventDefault())}),onPointerDown:composeEventHandlers($.onPointerDown,st=>{const ut=st.target;ut.setPointerCapture(st.pointerId),st.preventDefault(),dt.thumbs.has(ut)?ut.focus():et(st)}),onPointerMove:composeEventHandlers($.onPointerMove,st=>{st.target.hasPointerCapture(st.pointerId)&&tt(st)}),onPointerUp:composeEventHandlers($.onPointerUp,st=>{const ut=st.target;ut.hasPointerCapture(st.pointerId)&&(ut.releasePointerCapture(st.pointerId),nt(st))})})}),TRACK_NAME="SliderTrack",SliderTrack=reactExports.forwardRef(($,j)=>{const{__scopeSlider:_e,...et}=$,tt=useSliderContext(TRACK_NAME,_e);return jsxRuntimeExports.jsx(Primitive.span,{"data-disabled":tt.disabled?"":void 0,"data-orientation":tt.orientation,...et,ref:j})});SliderTrack.displayName=TRACK_NAME;var RANGE_NAME="SliderRange",SliderRange=reactExports.forwardRef(($,j)=>{const{__scopeSlider:_e,...et}=$,tt=useSliderContext(RANGE_NAME,_e),nt=useSliderOrientationContext(RANGE_NAME,_e),rt=reactExports.useRef(null),ot=useComposedRefs(j,rt),it=tt.values.length,at=tt.values.map(ut=>convertValueToPercentage(ut,tt.min,tt.max)),dt=it>1?Math.min(...at):0,st=100-Math.max(...at);return jsxRuntimeExports.jsx(Primitive.span,{"data-orientation":tt.orientation,"data-disabled":tt.disabled?"":void 0,...et,ref:ot,style:{...$.style,[nt.startEdge]:dt+"%",[nt.endEdge]:st+"%"}})});SliderRange.displayName=RANGE_NAME;var THUMB_NAME$1="SliderThumb",SliderThumb=reactExports.forwardRef(($,j)=>{const _e=useCollection$2($.__scopeSlider),[et,tt]=reactExports.useState(null),nt=useComposedRefs(j,ot=>tt(ot)),rt=reactExports.useMemo(()=>et?_e().findIndex(ot=>ot.ref.current===et):-1,[_e,et]);return jsxRuntimeExports.jsx(SliderThumbImpl,{...$,ref:nt,index:rt})}),SliderThumbImpl=reactExports.forwardRef(($,j)=>{const{__scopeSlider:_e,index:et,name:tt,...nt}=$,rt=useSliderContext(THUMB_NAME$1,_e),ot=useSliderOrientationContext(THUMB_NAME$1,_e),[it,at]=reactExports.useState(null),dt=useComposedRefs(j,vt=>at(vt)),st=it?!!it.closest("form"):!0,ut=useSize(it),ft=rt.values[et],pt=ft===void 0?0:convertValueToPercentage(ft,rt.min,rt.max),gt=getLabel(et,rt.values.length),yt=ut==null?void 0:ut[ot.size],mt=yt?getThumbInBoundsOffset(yt,pt,ot.direction):0;return reactExports.useEffect(()=>{if(it)return rt.thumbs.add(it),()=>{rt.thumbs.delete(it)}},[it,rt.thumbs]),jsxRuntimeExports.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[ot.startEdge]:`calc(${pt}% + ${mt}px)`},children:[jsxRuntimeExports.jsx(Collection$2.ItemSlot,{scope:$.__scopeSlider,children:jsxRuntimeExports.jsx(Primitive.span,{role:"slider","aria-label":$["aria-label"]||gt,"aria-valuemin":rt.min,"aria-valuenow":ft,"aria-valuemax":rt.max,"aria-orientation":rt.orientation,"data-orientation":rt.orientation,"data-disabled":rt.disabled?"":void 0,tabIndex:rt.disabled?void 0:0,...nt,ref:dt,style:ft===void 0?{display:"none"}:$.style,onFocus:composeEventHandlers($.onFocus,()=>{rt.valueIndexToChangeRef.current=et})})}),st&&jsxRuntimeExports.jsx(BubbleInput$1,{name:tt??(rt.name?rt.name+(rt.values.length>1?"[]":""):void 0),value:ft},et)]})});SliderThumb.displayName=THUMB_NAME$1;var BubbleInput$1=$=>{const{value:j,..._e}=$,et=reactExports.useRef(null),tt=usePrevious(j);return reactExports.useEffect(()=>{const nt=et.current,rt=window.HTMLInputElement.prototype,it=Object.getOwnPropertyDescriptor(rt,"value").set;if(tt!==j&&it){const at=new Event("input",{bubbles:!0});it.call(nt,j),nt.dispatchEvent(at)}},[tt,j]),jsxRuntimeExports.jsx("input",{style:{display:"none"},..._e,ref:et,defaultValue:j})};function getNextSortedValues($=[],j,_e){const et=[...$];return et[_e]=j,et.sort((tt,nt)=>tt-nt)}function convertValueToPercentage($,j,_e){const nt=100/(_e-j)*($-j);return clamp$2(nt,[0,100])}function getLabel($,j){return j>2?`Value ${$+1} of ${j}`:j===2?["Minimum","Maximum"][$]:void 0}function getClosestValueIndex($,j){if($.length===1)return 0;const _e=$.map(tt=>Math.abs(tt-j)),et=Math.min(..._e);return _e.indexOf(et)}function getThumbInBoundsOffset($,j,_e){const et=$/2,nt=linearScale([0,50],[0,et]);return(et-nt(j)*_e)*_e}function getStepsBetweenValues($){return $.slice(0,-1).map((j,_e)=>$[_e+1]-j)}function hasMinStepsBetweenValues($,j){if(j>0){const _e=getStepsBetweenValues($);return Math.min(..._e)>=j}return!0}function linearScale($,j){return _e=>{if($[0]===$[1]||j[0]===j[1])return j[0];const et=(j[1]-j[0])/($[1]-$[0]);return j[0]+et*(_e-$[0])}}function getDecimalCount($){return(String($).split(".")[1]||"").length}function roundValue($,j){const _e=Math.pow(10,j);return Math.round($*_e)/_e}var Root$2=Slider,Track=SliderTrack,Range=SliderRange,Thumb$1=SliderThumb;const QspVolumeSlider=({attrs:$})=>{const j=useAtom_2(volume$),[_e]=useTranslation(),[,et,tt]=useAttributes($,"span");return jsxRuntimeExports.jsxs(Root$2,{className:"qsp-volume-root",defaultValue:[j],max:100,step:1,style:et,...tt,onValueChange:([nt])=>volume$.set(nt),children:[jsxRuntimeExports.jsx(Track,{className:"qsp-volume-slider-track",children:jsxRuntimeExports.jsx(Range,{className:"qsp-volume-slider-range"})}),jsxRuntimeExports.jsx(Thumb$1,{className:"qsp-volume-slider-thumb","aria-label":_e("Volume")||void 0})]})},QspMuteToggle=({attrs:$})=>{const[j]=useTranslation(),[_e,et,tt]=useAttributes($,"qsp-mute-toggle"),nt=useAtom_2(muted$);return jsxRuntimeExports.jsx(_e,{role:"button",style:et,...tt,onClick:()=>muted$.update(rt=>!rt),children:j(nt?"Unmute":"Mute")})},QspGlobalHotkeys=({attrs:$})=>{const[j,_e,et]=useAttributes($,"qsp-global-hotkeys"),{t:tt}=useTranslation(),nt=useAtom_2(globalHotKeys$);return jsxRuntimeExports.jsx(j,{style:_e,...et,children:nt.map((rt,ot)=>jsxRuntimeExports.jsxs("qsp-hotkey",{children:[jsxRuntimeExports.jsx("qsp-hotkey-description",{children:tt(rt.description)}),jsxRuntimeExports.jsx("qsp-hotkey-keys",{children:prettifyHotkeys(rt.keys).map((it,at)=>it.type==="key"?jsxRuntimeExports.jsx("qsp-hotkey-key",{children:it.symbol},at):it.symbol)})]},ot))})},QspGameHotkeys=({attrs:$})=>{const[j,_e,et]=useAttributes($,"qsp-game-hotkeys"),tt=useAtom_2(currentGame$);if(!tt)return null;const{hotkeys:nt}=tt;return nt?jsxRuntimeExports.jsx(j,{style:_e,...et,children:Object.entries(nt).map(([rt,ot],it)=>jsxRuntimeExports.jsxs("qsp-hotkey",{children:[jsxRuntimeExports.jsx("qsp-hotkey-description",{children:ot}),jsxRuntimeExports.jsx("qsp-hotkey-keys",{children:prettifyHotkeys(rt).map((at,dt)=>at.type==="key"?jsxRuntimeExports.jsx("qsp-hotkey-key",{children:at.symbol},dt):at.symbol)})]},it))}):null},QspLocaleSelect=({attrs:$})=>{const{i18n:j}=useTranslation(),[,_e,et]=useAttributes($,"qsp-locale-select"),tt=nt=>{j.changeLanguage(nt.target.value)};return jsxRuntimeExports.jsx("select",{value:j.language,...et,style:_e,onChange:tt,children:locales$1.map(nt=>jsxRuntimeExports.jsx("option",{value:nt.value,children:nt.label},nt.value))})},QspGameTitle=({attrs:$})=>{const[j]=useTranslation(),[_e,et,tt]=useAttributes($,"qsp-game-title"),nt=useAtom_2(currentGameEntry$);return jsxRuntimeExports.jsx(_e,{...tt,style:et,children:(nt==null?void 0:nt.author)||j("n/a")})},QspGameAuthor=({attrs:$})=>{const[j]=useTranslation(),[_e,et,tt]=useAttributes($,"qsp-game-author"),nt=useAtom_2(currentGameEntry$);return jsxRuntimeExports.jsx(_e,{...tt,style:et,children:(nt==null?void 0:nt.author)||j("n/a")})},QspGameVersion=({attrs:$})=>{const[j]=useTranslation(),[_e,et,tt]=useAttributes($,"qsp-game-version"),nt=useAtom_2(currentGameEntry$);return jsxRuntimeExports.jsx(_e,{...tt,style:et,children:(nt==null?void 0:nt.version)||j("n/a")})},QspGameDescription=({attrs:$})=>{const[j,_e,et]=useAttributes($,"qsp-game-description"),tt=useAtom_2(currentGameDescription$);return jsxRuntimeExports.jsx(j,{...et,style:_e,children:jsxRuntimeExports.jsx(Markup,{content:tt})})},defaultTransform=($,j)=>{const _e=$.tagName.toLowerCase(),et=extractAttributes($);return jsxRuntimeExports.jsx(Element$1,{tagName:_e,attrs:et,children:j})},defaultTransformers={"qsp-scrollable"($,j){const{scroll:_e,...et}=extractAttributes($),tt=isScrollType(_e)?_e:void 0;return jsxRuntimeExports.jsx(QspScrollable,{scroll:tt,attrs:et,children:j})},"qsp-main"($,j){return jsxRuntimeExports.jsx(QspMain,{attrs:extractAttributes($),children:j})},"qsp-main-content"($){return jsxRuntimeExports.jsx(QspMainContent,{attrs:extractAttributes($)})},"qsp-stats"($,j){const _e=extractAttributes($);return jsxRuntimeExports.jsx(QspStats,{attrs:_e,children:j})},"qsp-stats-content"($){return jsxRuntimeExports.jsx(QspStatsContent,{attrs:extractAttributes($)})},"qsp-actions"($,j){const _e=extractAttributes($);return jsxRuntimeExports.jsx(QspActions,{attrs:_e,children:j})},"qsp-actions-list"($,j){return jsxRuntimeExports.jsx(QspActionsList,{attrs:extractAttributes($),children:j})},"qsp-action"($,j){return jsxRuntimeExports.jsx(QspActionItem,{attrs:extractAttributes($),children:j})},"qsp-action-name"($){return jsxRuntimeExports.jsx(QspActionName,{attrs:extractAttributes($)})},"qsp-action-image"($){return jsxRuntimeExports.jsx(QspActionImage,{attrs:extractAttributes($)})},"qsp-action-index"($){return jsxRuntimeExports.jsx(QspActionIndex,{attrs:extractAttributes($)})},"qsp-objects"($,j){const _e=extractAttributes($);return jsxRuntimeExports.jsx(QspObjects,{attrs:_e,children:j})},"qsp-objects-list"($,j){return jsxRuntimeExports.jsx(QspObjectsList,{attrs:extractAttributes($),children:j})},"qsp-object"($,j){return jsxRuntimeExports.jsx(QspObjectItem,{attrs:extractAttributes($),children:j})},"qsp-object-name"($){return jsxRuntimeExports.jsx(QspObjectName,{attrs:extractAttributes($)})},"qsp-object-image"($){return jsxRuntimeExports.jsx(QspObjectImage,{attrs:extractAttributes($)})},"qsp-object-index"($){return jsxRuntimeExports.jsx(QspObjectIndex,{attrs:extractAttributes($)})},"qsp-cmd"($,j){const _e=extractAttributes($);return jsxRuntimeExports.jsx(QspCmd,{attrs:_e,children:j})},"qsp-cmd-input"($){const j=extractAttributes($);return jsxRuntimeExports.jsx(QspCmdInput,{attrs:j})},"qsp-view"($,j){const _e=extractAttributes($),et="modal"in _e;return view$.actions.setIsModal(et),jsxRuntimeExports.jsx(QspView,{attrs:_e,modal:et,children:j})},"qsp-view-image"($){const j=extractAttributes($);return jsxRuntimeExports.jsx(QspViewImage,{attrs:j})},"qsp-menu"($,j){const{"show-as":_e,"show-at":et,"offset-x":tt,"offset-y":nt,...rt}=extractAttributes($);return jsxRuntimeExports.jsx(QspMenu,{showAs:_e,showAt:et,offsetX:tt?parseInt(tt,10):0,offsetY:nt?parseInt(nt,10):0,attrs:rt,children:j})},"qsp-menu-list"($,j){return jsxRuntimeExports.jsx(QspMenuList,{attrs:extractAttributes($),children:j})},"qsp-menu-item"($,j){return jsxRuntimeExports.jsx(QspMenuItem,{attrs:extractAttributes($),children:j})},"qsp-menu-name"($){return jsxRuntimeExports.jsx(QspMenuItemName,{attrs:extractAttributes($)})},"qsp-menu-image"($){return jsxRuntimeExports.jsx(QspMenuItemImage,{attrs:extractAttributes($)})},"qsp-menu-index"($){return jsxRuntimeExports.jsx(QspMenuItemIndex,{attrs:extractAttributes($)})},"qsp-msg"($,j){return jsxRuntimeExports.jsx(QspMsg,{attrs:extractAttributes($),children:j})},"qsp-msg-content"($){return jsxRuntimeExports.jsx(QspMsgContent,{attrs:extractAttributes($)})},"qsp-input"($,j){const _e=extractAttributes($);return jsxRuntimeExports.jsx(QspInput,{attrs:_e,children:j})},"qsp-input-content"($){return jsxRuntimeExports.jsx(QspInputContent,{attrs:extractAttributes($)})},"qsp-input-tag"($){const j=extractAttributes($);return jsxRuntimeExports.jsx(QspInputTag,{attrs:j})},"qsp-close-button"($,j){const _e=extractAttributes($);return jsxRuntimeExports.jsx(QspCloseButton,{attrs:_e,children:j})},"qsp-ok-button"($,j){const _e=extractAttributes($);return jsxRuntimeExports.jsx(QspOkButton,{attrs:_e,children:j})},"qsp-cancel-button"($,j){const _e=extractAttributes($);return jsxRuntimeExports.jsx(QspCancelButton,{attrs:_e,children:j})},"qsp-pause-screen"($,j){const _e=extractAttributes($);return jsxRuntimeExports.jsx(QspPauseScreen,{attrs:_e,children:j})},"qsp-pause-screen-content"($,j){const _e=extractAttributes($);return jsxRuntimeExports.jsx(QspPauseScreenContent,{attrs:_e,children:j})},"qsp-pause-screen-panel"($,j){const{name:_e,...et}=extractAttributes($);return _e?jsxRuntimeExports.jsx(QspPauseScreenPanel,{name:_e,attrs:et,children:j}):null},"qsp-slots-list"($,j){return jsxRuntimeExports.jsx(QspSlotsList,{attrs:extractAttributes($),children:j})},"qsp-save-slot"($,j){return jsxRuntimeExports.jsx(QspSlot,{attrs:extractAttributes($),index:-1,children:j})},"qsp-save-file"($,j){const{path:_e,...et}=extractAttributes($);return jsxRuntimeExports.jsx(QspNamedSlot,{attrs:et,path:_e,children:j})},"qsp-quick-save"($,j){return jsxRuntimeExports.jsx(QspNamedSlot,{attrs:extractAttributes($),path:QUICK_SAVE_KEY,children:j})},"qsp-slot-index"($){return jsxRuntimeExports.jsx(QspSlotIndex,{attrs:extractAttributes($)})},"qsp-slot-date"($,j){return jsxRuntimeExports.jsx(QspSlotDate,{attrs:extractAttributes($),children:j})},"qsp-variable"($){const{name:j,key:_e,index:et}=extractAttributes($);return jsxRuntimeExports.jsx(QspVariable,{name:j,vkey:_e,index:et?parseInt(et,10):void 0})},"qsp-region"($){const{name:j,..._e}=extractAttributes($),et="scrollable"in _e;return jsxRuntimeExports.jsx(QspRegion,{name:j,scrollable:et,attrs:_e})},"qsp-layer"($,j){const{name:_e,index:et,...tt}=extractAttributes($);return jsxRuntimeExports.jsx(QspLayer,{name:_e,index:parseInt(et),attrs:tt,children:j})},"qsp-show"($,j){const _e=$.getAttribute("when")||"";let et=["is-not",_e.startsWith("$")?"":"0"];for(const tt of conditionAttributes)$.hasAttribute(tt)&&(et=[tt,$.getAttribute(tt)||""]);return jsxRuntimeExports.jsx(QspShow,{variable:_e,condition:et,children:j})},"qsp-style"($){const j=$.getAttribute("from")||"";return jsxRuntimeExports.jsx(QspStyle,{from:j})},"qsp-t"($){const j=$.innerText;return jsxRuntimeExports.jsx(QspT,{children:j})},a:($,j)=>{const{href:_e,...et}=extractAttributes($);if(_e){if(_e.toLowerCase().startsWith("exec:"))return jsxRuntimeExports.jsx(Link,{attrs:et,exec:_e.substring(5),children:j});if(parseInt(_e)>0)return jsxRuntimeExports.jsx(Link,{attrs:et,act:parseInt(_e),children:j})}const tt={href:_e,...et};return jsxRuntimeExports.jsx(HtmlLink,{attrs:tt,children:j})},select($,j){return jsxRuntimeExports.jsx(HtmlSelect,{attrs:extractAttributes($),children:j})},textarea($){const j=extractAttributes($);return j.value=$.innerText,jsxRuntimeExports.jsx(HtmlTextarea,{attrs:j})},input($){return jsxRuntimeExports.jsx(HtmlInput,{attrs:extractAttributes($)})},img($){const{src:j,..._e}=extractAttributes($);return jsxRuntimeExports.jsx(HtmlImg,{src:j,attrs:_e})},form($,j){return jsxRuntimeExports.jsx(HtmlForm,{attrs:extractAttributes($),children:j})},"qsp-volume-slider"($){return jsxRuntimeExports.jsx(QspVolumeSlider,{attrs:extractAttributes($)})},"qsp-mute-toggle"($){return jsxRuntimeExports.jsx(QspMuteToggle,{attrs:extractAttributes($)})},"qsp-global-hotkeys"($){return jsxRuntimeExports.jsx(QspGlobalHotkeys,{attrs:extractAttributes($)})},"qsp-game-hotkeys"($){return jsxRuntimeExports.jsx(QspGameHotkeys,{attrs:extractAttributes($)})},"qsp-locale-select"($){return jsxRuntimeExports.jsx(QspLocaleSelect,{attrs:extractAttributes($)})},"qsp-game-title"($){return jsxRuntimeExports.jsx(QspGameTitle,{attrs:extractAttributes($)})},"qsp-game-author"($){return jsxRuntimeExports.jsx(QspGameAuthor,{attrs:extractAttributes($)})},"qsp-game-version"($){return jsxRuntimeExports.jsx(QspGameVersion,{attrs:extractAttributes($)})},"qsp-game-description"($){return jsxRuntimeExports.jsx(QspGameDescription,{attrs:extractAttributes($)})}},Strike=({children:$,attrs:j})=>{const[,_e,et]=useAttributes(j,"span"),tt={..._e,textDecoration:"line-through"};return jsxRuntimeExports.jsx("span",{...et,style:tt,children:$})},Big=({children:$,attrs:j})=>{const[,_e,et]=useAttributes(j,"span"),tt={..._e,fontSize:"larger"};return jsxRuntimeExports.jsx("span",{...et,style:tt,children:$})},Tt=({children:$,attrs:j})=>{const[,_e,et]=useAttributes(j,"span"),tt={..._e,fontFamily:"monospace"};return jsxRuntimeExports.jsx("span",{...et,style:tt,children:$})},Hr=({attrs:$,width:j,size:_e,noshade:et})=>{const[,tt,nt]=useAttributes($,"hr"),rt={...tt,borderWidth:Number(_e)>0?"1px":"1px 0 0 0",borderStyle:et?"solid":"inset",borderColor:"rgb(128, 128, 128)",borderRadius:"1px",height:`${_e||"0"}px`,margin:"0.5em auto",width:j||"100%",backgroundColor:et?"rgb(128, 128, 128)":"transparent"};return jsxRuntimeExports.jsx("div",{...nt,style:rt})},Table=({border:$,cellspacing:j,cellpadding:_e,align:et,valign:tt,attrs:nt,children:rt})=>{const[,ot,{className:it,...at}]=useAttributes(nt,"table"),dt={...ot,textAlign:et??"left",verticalAlign:tt??"top","--table-border-width":`${$||0}px`,"--table-cellspacing":`${j||0}px`,"--table-cellpadding":`${_e||0}px`},st=it?`${it} classic-table`:"classic-table";return jsxRuntimeExports.jsx("table",{...at,style:dt,className:st,children:rt})},Area=({href:$,attrs:j})=>{const _e=reactExports.useCallback(nt=>{nt.preventDefault(),nt.stopPropagation(),onLinkClicked($)},[$]),[,et,tt]=useAttributes(j,"area");return jsxRuntimeExports.jsx("area",{...tt,style:et,href:"#",onClick:_e,alt:""})},Video=({children:$,attrs:j})=>{const[,_e,et]=useAttributes(j,"video");return jsxRuntimeExports.jsx("video",{style:_e,...et,preload:"auto",loop:!0,autoPlay:!0,children:$})},QspCL=({children:$})=>{const j=useAtom_2(qspGuiLayout$);return j?jsxRuntimeExports.jsx("qsp-cl",{children:jsxRuntimeExports.jsx(Markup,{content:j})}):jsxRuntimeExports.jsx("qsp-cl",{children:$})},QspCLLayer=$=>{const j=useSetup(et=>{const tt=et==null?void 0:et.focus(ot=>ot.children),nt=atom(ot=>{const it={};return React$1.Children.forEach(ot(tt),at=>{reactExports.isValidElement(at)&&at.type===QspCLDock&&(it[at.props.place]={visibility:at.props.visibility,size:at.props.size})}),it}),rt=atom(ot=>{var dt;const it=ot(nt),at={};for(const[st,ut]of Object.entries(it))(((dt=ut.visibility)==null?void 0:dt.split("|").some(pt=>{const gt=penelAtoms[pt];return gt?ot(gt):!1}))??!0)&&(at[st]=ut);return at});return atom(ot=>{const it=ot(rt),at=["center"];let dt="1fr",st=1,ut="1fr";return it.left&&(at[0]="left "+at[0],st++,dt=`${it.left.size}px `+dt),it.right&&(at[0]+=" right",st++,dt+=` ${it.right.size}px`),it.top&&(ut=`${it.top.size}px `+ut,at.unshift("top ".repeat(st).trim())),it.bottom&&(ut+=` ${it.bottom.size}px`,at.push("bottom ".repeat(st).trim())),{gridTemplateColumns:dt,gridTemplateRows:ut,gridTemplateAreas:'"'+at.join('" "')+'"'}})},$),_e=useAtom_2(j);return jsxRuntimeExports.jsx("qsp-cl-layer",{style:_e,children:$.children})},penelAtoms={input:isCmdVisible$,imgview:view$.focus($=>$.isOpen),objs:isObjsVisible$,acts:isActsVisible$,vars:isStatsVisible$},QspCLDock=$=>{const j=useSetup(et=>atom(tt=>{const nt=et.focus(ot=>ot.visibility),rt=tt(nt);return rt?rt.split("|").some(ot=>{const it=penelAtoms[ot];return it?tt(it):!1}):!0}),$);return useAtom_2(j)?jsxRuntimeExports.jsx("qsp-cl-dock",{"data-place":$.place,children:$.children}):null},QspCLPane=$=>{const j=useSetup(et=>atom(tt=>{const nt=et.focus(it=>it.visibility),rt=tt(nt);if(!rt)return!0;const ot=penelAtoms[rt];return ot?tt(ot):!1}),$);return useAtom_2(j)?jsxRuntimeExports.jsx("qsp-cl-pane",{style:{flexGrow:$.proportion},children:$.children}):null},QspCLDefaults=()=>{const $=useAtom_2(qspGuiCfg$);if(!$)return null;const j=[];if($.BackColor){const et=convertColor($.BackColor,!1);if(et){const tt=invertColor(et);j.push(`--cl-background-color: ${et}`),j.push(`--cl-background-color-contrast: ${getContrastColor(et)}`),j.push(`--cl-background-color-inverted: ${tt}`),j.push(`--cl-background-color-inverted-contrast: ${getContrastColor(tt)}`)}}if($.FontColor){const et=convertColor($.FontColor,!1);et&&j.push(`--cl-color: ${et}`)}if($.LinkColor){const et=convertColor($.LinkColor,!1);et&&j.push(`--cl-link-color: ${et}`)}$.FontSize&&j.push(`--cl-font-size: ${$.FontSize}pt`),$.FontName&&j.push(`--cl-font-name: ${$.FontName}`);const _e=`qsp-game-root, #portal-container {${j.join(";")}}`;return jsxRuntimeExports.jsx("style",{children:_e})},classicTransformers={font:($,j)=>jsxRuntimeExports.jsx(Font,{size:$.getAttribute("size"),attrs:extractAttributes($),children:j}),big:($,j)=>jsxRuntimeExports.jsx(Big,{attrs:extractAttributes($),children:j}),hr:$=>{const{width:j,size:_e,noshade:et,...tt}=extractAttributes($);return jsxRuntimeExports.jsx(Hr,{attrs:tt,width:j,size:_e,noshade:!!et})},tt:($,j)=>jsxRuntimeExports.jsx(Tt,{attrs:extractAttributes($),children:j}),strike:($,j)=>jsxRuntimeExports.jsx(Strike,{attrs:extractAttributes($),children:j}),tbody:($,j)=>jsxRuntimeExports.jsx("tbody",{children:j.filter(_e=>typeof _e!="string")}),table:($,j)=>{const{border:_e="0",cellspacing:et="0",cellpadding:tt="1",align:nt,valign:rt,...ot}=extractAttributes($);return jsxRuntimeExports.jsx(Table,{align:nt,valign:rt,border:Number(_e),cellspacing:Number(et),cellpadding:Number(tt),attrs:ot,children:j.filter(it=>typeof it!="string")})},area:$=>{const{href:j,..._e}=extractAttributes($);return jsxRuntimeExports.jsx(Area,{href:j||"",attrs:_e})},video:($,j)=>jsxRuntimeExports.jsx(Video,{attrs:extractAttributes($),children:j}),"qsp-cl":($,j)=>jsxRuntimeExports.jsx(QspCL,{children:j}),"qsp-cl-layer":($,j)=>jsxRuntimeExports.jsx(QspCLLayer,{children:j}),"qsp-cl-dock":($,j)=>{const _e=$.getAttribute("place")||"center",et=$.getAttribute("visibility"),tt=$.getAttribute("size")??0;return jsxRuntimeExports.jsx(QspCLDock,{place:_e,visibility:et,size:Number(tt),children:j})},"qsp-cl-pane":($,j)=>{const _e=$.getAttribute("proportion")??1,et=$.getAttribute("visibility");return jsxRuntimeExports.jsx(QspCLPane,{visibility:et,proportion:Number(_e),children:j})},"qsp-cl-defaults"(){return jsxRuntimeExports.jsx(QspCLDefaults,{})}},AERO_EFFECTS={fade:{from:{opacity:0},enter:{opacity:1},leave:{opacity:0}},blur:{from:{opacity:0,filter:"blur(15px)"},enter:{opacity:1,filter:"blur(0px)"},leave:{opacity:0,filter:"blur(15px)"}},l_slide:{from:{transform:"translate3d(-100%, 0, 0)"},enter:{transform:"translate3d(0%, 0, 0)"},leave:{transform:"translate3d(-100%, 0, 0)"}},r_slide:{from:{transform:"translate3d(100%, 0, 0)"},enter:{transform:"translate3d(0%, 0, 0)"},leave:{transform:"translate3d(100%, 0, 0)"}},u_slide:{from:{transform:"translate3d(0, 100%, 0)"},enter:{transform:"translate3d(0, 0%, 0)"},leave:{transform:"translate3d(0, 100%, 0)"}},d_slide:{from:{transform:"translate3d(0, -100%, 0)"},enter:{transform:"translate3d(0, 0%, 0)"},leave:{transform:"translate3d(0, -100%, 0)"}},iris:{from:{clipPath:"circle(0% at center)"},enter:{clipPath:"circle(120% at center)"},leave:{clipPath:"circle(0% at center)"}},photo:{from:{opacity:0,boxShadow:"inset 0 0 0 1000px #fff"},enter:{opacity:1,boxShadow:"inset 0 0 0 0px #fff"},leave:{opacity:0,boxShadow:"inset 0 0 0 1000px #fff"}},rotate:{from:{transform:"rotate3d(0, 0, 1, -90deg)",opacity:0},enter:{transform:"rotate3d(0, 0, 1, 0deg)",opacity:1},leave:{transform:"rotate3d(0, 0, 1, -90deg)",opacity:0}},v_squeeze:{from:{transform:"scale(0, 1.5)",opacity:0,transformOrigin:"center"},enter:{transform:"scale(1, 1)",opacity:1,transformOrigin:"center"},leave:{transform:"scale(0, 1.5)",opacity:0,transformOrigin:"center"}},h_squeeze:{from:{transform:"scale(1.5, 0)",opacity:0,transformOrigin:"center"},enter:{transform:"scale(1, 1)",opacity:1,transformOrigin:"center"},leave:{transform:"scale(1.5, 0)",opacity:0,transformOrigin:"center"}},zoom:{from:{transform:"scale(0, 0)",opacity:0,transformOrigin:"center"},enter:{transform:"scale(1, 1)",opacity:1,transformOrigin:"center"},leave:{transform:"scale(0, 0)",opacity:0,transformOrigin:"center"}},wipe1:{from:{clipPath:"polygon(0 0, 0 0%, 0% 0%, 0% 0)"},enter:{clipPath:"polygon(0 0, 0 100%, 100% 100%, 100% 0)"},leave:{clipPath:"polygon(0 0, 0 0%, 0% 0%, 0% 0)"}},wipe2:{from:{clipPath:"polygon(100% 0, 100% 0%, 100% 0%, 100% 0)"},enter:{clipPath:"polygon(0% 0, 0% 100%, 100% 100%, 100% 0)"},leave:{clipPath:"polygon(100% 0, 100% 0, 100% 0%, 100% 0)"}},wipe3:{from:{clipPath:"polygon(100% 100%, 100% 100%, 100% 100%, 100% 100%)"},enter:{clipPath:"polygon(0% 0%, 0% 100%, 100% 100%, 100% 0%)"},leave:{clipPath:"polygon(100% 100%, 100% 100%, 100% 100%, 100% 100%)"}},wipe4:{from:{clipPath:"polygon(0% 100%, 0% 100%, 0% 100%, 0% 100%)"},enter:{clipPath:"polygon(0% 0%, 0% 100%, 100% 100%, 100% 0%)"},leave:{clipPath:"polygon(0% 100%, 0% 100%, 0% 100%, 0% 100%)"}},quake:{from:{transform:"translate3d(0px, 0px, 0)",opacity:0},enter:[{transform:"translate3d(-2px, 3px, 0)",opacity:.1},{transform:"translate3d(4px, -5px, 0)",opacity:.2},{transform:"translate3d(-8px, 6px, 0)",opacity:.3},{transform:"translate3d(8px, -3px, 0)",opacity:.4},{transform:"translate3d(-8px, 6px, 0)",opacity:.5},{transform:"translate3d(8px, -3px, 0)",opacity:.6},{transform:"translate3d(-8px, 6px, 0)",opacity:.7},{transform:"translate3d(4px, -5px, 0)",opacity:.8},{transform:"translate3d(-2px, 3px, 0)",opacity:.9}],leave:[{transform:"translate3d(-2px, 3px, 0)",opacity:.9},{transform:"translate3d(4px, -5px, 0)",opacity:.8},{transform:"translate3d(-8px, 6px, 0)",opacity:.7},{transform:"translate3d(8px, -3px, 0)",opacity:.6},{transform:"translate3d(-8px, 6px, 0)",opacity:.5},{transform:"translate3d(8px, -3px, 0)",opacity:.4},{transform:"translate3d(-8px, 6px, 0)",opacity:.3},{transform:"translate3d(4px, -5px, 0)",opacity:.2},{transform:"translate3d(-2px, 3px, 0)",opacity:.1}]}};function useAeroEffect($,j,_e){const et=useQspVariable(j,"",0,"");let tt=useQspVariable(_e,"",0,500);const nt=AERO_EFFECTS[et]??{};return nt.enter&&Array.isArray(nt.enter)&&(tt/=nt.enter.length),useTransition($,{...nt,config:{duration:tt}})}const AeroQspMenu=({attrs:$,children:j})=>{const[_e,et,tt]=useAttributes($,"qsp-menu"),nt=useAtom_2(menu$),rt=useClickCoordinates(),ot=useQspVariable("FIXED_SIZE_MENU","",0,0),it=useQspVariable("MENU_X","",0,-1),at=useQspVariable("MENU_Y","",0,-1),dt=useAeroEffect(nt.isOpen,"$MENU_EFFECT","MENU_EFFECT_TIME"),st=it<0||at<0,ut=st?rt.x:it,ft=st?rt.y:at;let pt=tt.className||"";return ot&&(pt+=" aero-fixed-menu"),jsxRuntimeExports.jsxs(Root2$3,{open:nt.isOpen,onOpenChange:()=>menu$.actions.close(),children:[jsxRuntimeExports.jsx(Trigger$2,{asChild:!0,children:jsxRuntimeExports.jsx("div",{style:{position:"fixed",left:ut,top:ft}})}),dt((gt,yt)=>yt?jsxRuntimeExports.jsx(Portal2$1,{forceMount:!0,container:document.getElementById("portal-container"),children:jsxRuntimeExports.jsx(Content2$3,{align:"start",forceMount:!0,asChild:!0,children:jsxRuntimeExports.jsx(animated.div,{style:gt,children:jsxRuntimeExports.jsx(_e,{style:et,...tt,className:pt.trim(),children:j})})})}):null)]})},AeroQspMenuList=({attrs:$,children:j})=>{const _e=useAtom_2(aeroMenuWithParsedName$),[et,tt,nt]=useAttributes($,"qsp-menu-list");let rt=1;return jsxRuntimeExports.jsx(et,{style:tt,...nt,children:_e.map((ot,it)=>ot.name[0]==="-"?jsxRuntimeExports.jsx("qsp-menu-separator",{},ot.key):jsxRuntimeExports.jsx(menuContext.Provider,{value:{item:ot,index:it,displayIndex:rt++},children:React$1.Children.map(j,at=>React$1.cloneElement(at))},ot.key))})},AeroQspMenuItem=({attrs:$})=>{const{item:j,index:_e}=reactExports.useContext(menuContext),[et,tt,{useFormat:nt,useSelectedFormat:rt,...ot}]=useAttributes($,"qsp-menu-item"),it={...tt,"--menu-item-image":j.image?`url("${j.image}")`:""},at=()=>{selectedMenuItem$.set(_e)},dt=()=>{selectedMenuItem$.set(-1)},st=ut=>{ut.preventDefault(),menu$.actions.select(_e)};return jsxRuntimeExports.jsx(Item2,{asChild:!0,children:jsxRuntimeExports.jsx(et,{...ot,style:it,onClick:st,onMouseOver:at,onMouseLeave:dt,children:jsxRuntimeExports.jsx(Markup,{content:j.name})})})},AeroStyles=()=>{const $=useAtom_2(currentAeroWidth$),j=useAtom_2(currentAeroHeight$),_e=`
  qsp-game-root, #portal-container {
    --aero-player-width: ${$}px;
    --aero-player-height: ${j}px;
  }`;return jsxRuntimeExports.jsx("style",{children:_e})},AeroQspView=({attrs:$,children:j})=>{const[_e,et,tt]=useAttributes($,"qsp-view"),nt=useAtom_2(view$),rt=useQspVariable("ALWAYS_SHOW_VIEW","",0,0),ot=useAeroEffect(nt.isOpen,"$VIEW_EFFECT","VIEW_EFFECT_TIME"),it={...et,"--view-image":`url("${nt.path}")`},at=()=>{rt||view$.actions.close()};return ot((dt,st)=>st?jsxRuntimeExports.jsx(animated.div,{style:dt,children:jsxRuntimeExports.jsx(_e,{...tt,style:it,onClick:at,children:j})}):null)},AeroQspActionsList=({attrs:$,children:j})=>{const _e=useAtom_2(aeroActionsWithParsedName$),[et,tt,nt]=useAttributes($,"qsp-actions-list");return jsxRuntimeExports.jsx(et,{style:tt,...nt,children:_e.map((rt,ot)=>jsxRuntimeExports.jsx(actionContext.Provider,{value:{action:rt,index:ot},children:React$1.Children.map(j,it=>React$1.cloneElement(it))},rt.key))})},AeroQspActionItem=({attrs:$})=>{const{action:j,index:_e}=reactExports.useContext(actionContext),[et,tt,{useFormat:nt,useSelectedFormat:rt,...ot}]=useAttributes($,"qsp-action"),it=j.image?j.image:"",at={...tt,"--action-image":j.image?`url("${it}")`:""},dt=()=>{selectAction(_e)},st=()=>{selectAction(-1)},ut=ft=>{ft.preventDefault(),selectedAction$.value<0&&selectAction(_e),execSelectedAction()};return jsxRuntimeExports.jsx(et,{...ot,style:at,onMouseOver:dt,onMouseLeave:st,onClick:ut,children:jsxRuntimeExports.jsx(Markup,{content:j.name})})},AeroQspStatsContent=({attrs:$})=>{const[j,_e,{useFormat:et,...tt}]=useAttributes($,"qsp-stats-content"),{content:nt,key:rt}=useAtom_2(aeroParsedStatsContent$);return reactExports.createElement(j,{style:_e,...tt,key:rt},jsxRuntimeExports.jsx(Markup,{content:nt}))},AeroQspMainContent=({attrs:$})=>{const{content:j,key:_e}=useAtom_2(aeroParsedMainContent$),[et,tt,{useFormat:nt,...rt}]=useAttributes($,"qsp-main-content");return reactExports.createElement(et,{style:tt,...rt,key:_e},jsxRuntimeExports.jsx(Markup,{content:j}))},AeroOverlay=reactExports.forwardRef(()=>{const $=useQspVariable("DISABLESHADE","",0,0),j=useSpring({from:{opacity:0},to:{opacity:.8}});return $?null:jsxRuntimeExports.jsx(Overlay,{forceMount:!0,asChild:!0,children:jsxRuntimeExports.jsx(animated.div,{style:j,className:"qsp-overlay"})})}),AeroQspMsg=({attrs:$,children:j})=>{const[_e,et,tt]=useAttributes($,"qsp-msg"),nt=useAtom_2(msg$),rt=useClickCoordinates(),ot=useQspVariable("MSG_X","",0,200),it=useQspVariable("MSG_Y","",0,165),at=useAeroEffect(nt.isOpen,"$MSG_EFFECT","MSG_EFFECT_TIME"),dt=ot<0||it<0,st={"--aero-msg-x":`${dt?rt.x:ot}px`,"--aero-msg-y":`${dt?rt.y:it}px`},ut=`qsp-dialog-container${dt?" at-mouse":""}`;function ft(){msg$.actions.close()}return jsxRuntimeExports.jsx(buttonContext.Provider,{value:{okAction:ft,cancelAction:ft},children:jsxRuntimeExports.jsx(Root$6,{open:nt.isOpen,onOpenChange:ft,children:at((pt,gt)=>gt?jsxRuntimeExports.jsxs(Portal$3,{forceMount:!0,container:document.getElementById("portal-container"),children:[jsxRuntimeExports.jsx(AeroOverlay,{}),jsxRuntimeExports.jsx(Content$1,{forceMount:!0,asChild:!0,style:st,children:jsxRuntimeExports.jsx(animated.div,{style:pt,className:ut,children:jsxRuntimeExports.jsx(_e,{style:et,...tt,children:j})})})]}):null)})})},AeroQspMsgContent=({attrs:$})=>{const{content:j,key:_e}=useAtom_2(aeroParsedMsgContent$),[et,tt,{useFormat:nt,...rt}]=useAttributes($,"qsp-msg-content");return reactExports.createElement(et,{style:tt,...rt,key:_e},jsxRuntimeExports.jsx(QspScrollable,{attrs:{},children:jsxRuntimeExports.jsx(Markup,{content:j})}))},AeroQspInput=({attrs:$,children:j})=>{const _e=useAtom_2(input$),[et,tt,nt]=useAttributes($,"qsp-input"),rt=useClickCoordinates(),ot=useQspVariable("INPUT_X","",0,200),it=useQspVariable("INPUT_Y","",0,165),at=useAeroEffect(_e.isOpen,"$INPUT_EFFECT","INPUT_EFFECT_TIME"),dt=ot<0||it<0,st={"--aero-input-x":`${dt?rt.x:ot}px`,"--aero-input-y":`${dt?rt.y:it}px`},ut=`qsp-dialog-container${dt?" at-mouse":""}`;return jsxRuntimeExports.jsx(buttonContext.Provider,{value:{okAction:ft=>{ft.preventDefault(),input$.actions.finish()},cancelAction:ft=>{ft.preventDefault(),input$.actions.close()}},children:jsxRuntimeExports.jsx(Root$6,{open:_e.isOpen,onOpenChange:()=>input$.actions.close(),children:at((ft,pt)=>pt?jsxRuntimeExports.jsxs(Portal$3,{forceMount:!0,container:document.getElementById("portal-container"),children:[jsxRuntimeExports.jsx(AeroOverlay,{}),jsxRuntimeExports.jsx(Content$1,{forceMount:!0,asChild:!0,style:st,children:jsxRuntimeExports.jsx(animated.div,{style:ft,className:ut,children:jsxRuntimeExports.jsx("form",{onSubmit:gt=>{gt.preventDefault(),input$.actions.finish()},children:jsxRuntimeExports.jsx(et,{style:tt,...nt,children:j})})})})]}):null)})})},AeroQspInputContent=({attrs:$})=>{const{content:j,key:_e}=useAtom_2(aeroParsedInputContent$),[et,tt,{useFormat:nt,...rt}]=useAttributes($,"qsp-input-content");return jsxRuntimeExports.jsx(Description$1,{asChild:!0,children:reactExports.createElement(et,{style:tt,...rt,key:_e},jsxRuntimeExports.jsx(QspScrollable,{attrs:{},children:jsxRuntimeExports.jsx(Markup,{content:j})}))})},AeroQspObjectsList=({attrs:$,children:j})=>{const _e=useAtom_2(aeroObjectsWithParsedName$),[et,tt,nt]=useAttributes($,"qsp-objects-list");return jsxRuntimeExports.jsx(et,{style:tt,...nt,children:_e.map((rt,ot)=>jsxRuntimeExports.jsx(objectContext.Provider,{value:{object:rt,index:ot},children:React$1.Children.map(j,it=>React$1.cloneElement(it))},rt.key))})},AeroQspObjectItem=({attrs:$})=>{const[j,_e,{useFormat:et,useSelectedFormat:tt,...nt}]=useAttributes($,"qsp-object"),{object:rt,index:ot}=reactExports.useContext(objectContext),it={..._e,"--object-image":rt.image?`url("${rt.image}")`:""},at=()=>{selectedObject$.set(ot)},dt=()=>{selectedObject$.set(-1)},st=()=>{selectObject(ot)};return jsxRuntimeExports.jsx(j,{...nt,style:it,onClick:st,onMouseOver:at,onMouseLeave:dt,children:jsxRuntimeExports.jsx(Markup,{content:rt.name})})},AeroNewlocEffect=({children:$})=>{const j=useQspVariable("$NEWLOC_EFFECT","",0,"");let _e=useQspVariable("NEWLOC_EFFECT_TIME","",0,500);const et=!!useQspVariable("NEWLOC_EFFECT_SEQ","",0,0),tt=AERO_EFFECTS[j]??{};tt.enter&&Array.isArray(tt.enter)&&(_e/=tt.enter.length);const nt=useAtom_2(newLocHash$),rt=useTransition(nt,{...tt,key:nt,exitBeforeEnter:et,...et?{}:{leave:{...tt.leave,config:{duration:0}}},config:{duration:_e},onRest(){mainContent$.set(nextMainContent$.value)}});return reactExports.useEffect(()=>{(!j||!et)&&mainContent$.set(nextMainContent$.value)},[j,nt]),j?rt((ot,it)=>jsxRuntimeExports.jsx(animated.div,{style:ot,children:$},it)):$},aeroTransformers={"aero-newloc-effect"($,j){return jsxRuntimeExports.jsx(AeroNewlocEffect,{children:j})},"aero-styles"(){return jsxRuntimeExports.jsx(AeroStyles,{})},"qsp-main-content"($){return jsxRuntimeExports.jsx(AeroQspMainContent,{attrs:extractAttributes($)})},"qsp-stats-content"($){return jsxRuntimeExports.jsx(AeroQspStatsContent,{attrs:extractAttributes($)})},"qsp-actions-list"($,j){return jsxRuntimeExports.jsx(AeroQspActionsList,{attrs:extractAttributes($),children:j})},"qsp-action"($){return jsxRuntimeExports.jsx(AeroQspActionItem,{attrs:extractAttributes($)})},"qsp-objects-list"($,j){return jsxRuntimeExports.jsx(AeroQspObjectsList,{attrs:extractAttributes($),children:j})},"qsp-object"($,j){return jsxRuntimeExports.jsx(AeroQspObjectItem,{attrs:extractAttributes($),children:j})},"qsp-menu"($,j){const _e=extractAttributes($);return jsxRuntimeExports.jsx(AeroQspMenu,{attrs:_e,children:j})},"qsp-menu-list"($,j){return jsxRuntimeExports.jsx(AeroQspMenuList,{attrs:extractAttributes($),children:j})},"qsp-menu-item"($,j){const _e=extractAttributes($);return jsxRuntimeExports.jsx(AeroQspMenuItem,{attrs:_e,children:j})},"qsp-msg"($,j){return jsxRuntimeExports.jsx(AeroQspMsg,{attrs:extractAttributes($),children:j})},"qsp-msg-content"($){return jsxRuntimeExports.jsx(AeroQspMsgContent,{attrs:extractAttributes($)})},"qsp-input"($,j){const _e=extractAttributes($);return jsxRuntimeExports.jsx(AeroQspInput,{attrs:_e,children:j})},"qsp-input-content"($){return jsxRuntimeExports.jsx(AeroQspInputContent,{attrs:extractAttributes($)})},"qsp-view"($,j){const _e=extractAttributes($);return jsxRuntimeExports.jsx(AeroQspView,{attrs:_e,modal:"modal"in _e,children:j})}},currentTransformers$=atom($=>{switch($(currentGameMode$)){case"classic":return{...defaultTransformers,...classicTransformers};case"aero":return{...defaultTransformers,...classicTransformers,...aeroTransformers};case"qspider":default:return defaultTransformers}}),transform=($,j,_e)=>{const et=currentTransformers$.value[$.tagName.toLowerCase()];return et?et($,j,_e):defaultTransform($,j)},templateParser=new HtmlParser({transform}),currentGameDescription$=atom($=>{const j=$(currentGameEntry$);return j!=null&&j.description?templateParser.parse(j.description):[]}),playerTemplate$=atom($=>{const _e=$(currentThemeData$).qsp_player??{template:"",attrs:{}},{attrs:et,template:tt}=_e;return{attrs:et,template:templateParser.parse(tt,!1)}}),qspGuiLayout$=atom($=>{var nt;const j=$(qspGuiCfg$);if(!j)return null;const _e=((nt=$(defaultClassicTheme$).qsp_player)==null?void 0:nt.template)??"",et=buildLayoutTree(j.Panels);let tt="";et.layer&&(tt+=convertLayer(et.layer,j.Docks,_e));for(const rt of et.floating)tt+=convertPane(rt,_e,!0);return templateParser.parse(tt,!1)});let mainContentKey=0;const parsedMainContent$=atom($=>{const j=$(mainContent$);return $(hasBrowserTranslation$)||(mainContentKey=0),{content:templateParser.parse(j),key:mainContentKey++}});let statsContentKey=0;const parsedStatsContent$=atom($=>{const j=$(statsContent$);return $(hasBrowserTranslation$)||(statsContentKey=0),{content:templateParser.parse(j),key:statsContentKey++}});let msgKey=0;const parsedMsgContent$=atom($=>{const j=$(msg$);return $(hasBrowserTranslation$)||(msgKey=0),{content:templateParser.parse(j.content),key:msgKey++}});let inputKey=0;const parsedInputContent$=atom($=>{const j=$(input$);return $(hasBrowserTranslation$)||(inputKey=0),{content:templateParser.parse(j.content),key:inputKey++}});let actionsKey=0;const actionsWithParsedName$=atom($=>{const j=$(actions$);return $(hasBrowserTranslation$)||(actionsKey=0),j.map(_e=>({..._e,name:templateParser.parse(_e.name),key:actionsKey++}))});let objectsKey=0;const objectsWithParsedName$=atom($=>{const j=$(objects$);return $(hasBrowserTranslation$)||(objectsKey=0),j.map(_e=>({..._e,name:templateParser.parse(_e.name),key:objectsKey++}))});let menuKey=0;const menuWithParsedName$=atom($=>{const j=$(menu$);return $(hasBrowserTranslation$)||(menuKey=0),j.items.map(_e=>({..._e,name:templateParser.parse(_e.name),key:menuKey++}))});function createVariableAtom($,j){const _e=atom(j??"");return qspApi$.watch(et=>{et==null||et.watchVariable($,tt=>{_e.set(tt||j||"")})}),_e}const mainFormat$=createVariableAtom("$MAIN_FORMAT"),aeroParsedMainContent$=atom($=>{let j=$(mainContent$);const _e=$(mainFormat$);return _e&&(j=_e.replace(TEXT_PLACEHOLDER,j)),$(hasBrowserTranslation$)||(mainContentKey=0),{content:templateParser.parse(j),key:mainContentKey++}}),statsFormat$=createVariableAtom("$STATS_FORMAT"),aeroParsedStatsContent$=atom($=>{let j=$(statsContent$);const _e=$(statsFormat$);return _e&&(j=_e.replace(TEXT_PLACEHOLDER,j)),$(hasBrowserTranslation$)||(statsContentKey=0),{content:templateParser.parse(j),key:statsContentKey++}}),inputFormat$=createVariableAtom("$INPUT_FORMAT"),aeroParsedInputContent$=atom($=>{let j=$(input$).content;const _e=$(inputFormat$);return _e&&(j=_e.replace(TEXT_PLACEHOLDER,j)),$(hasBrowserTranslation$)||(inputKey=0),{content:templateParser.parse(j),key:inputKey++}}),msgFormat$=createVariableAtom("$MSG_FORMAT"),aeroParsedMsgContent$=atom($=>{let j=$(msg$).content;const _e=$(msgFormat$);return _e&&(j=_e.replace(TEXT_PLACEHOLDER,j)),$(hasBrowserTranslation$)||(msgKey=0),{content:templateParser.parse(j),key:msgKey++}}),actionFormat$=createVariableAtom("$ACTION_FORMAT",DEFAULT_LIST_FORMAT),selectedActionFormat$=createVariableAtom("$SEL_ACTION_FORMAT",DEFAULT_SELECTED_LIST_FORMAT),aeroActionsWithParsedName$=atom($=>{const j=$(actions$),_e=$(actionFormat$),et=$(selectedActionFormat$),tt=$(selectedAction$);return $(hasBrowserTranslation$)||(actionsKey=0),j.map((nt,rt)=>{const ot=rt===tt?et:_e;return{...nt,name:templateParser.parse(ot.replace(TEXT_PLACEHOLDER,nt.name).replace(IMAGE_PLACEHOLDER,nt.image||"")),key:actionsKey++}})}),objectsFormat$=createVariableAtom("$OBJECT_FORMAT",DEFAULT_LIST_FORMAT),selectedObjectFormat$=createVariableAtom("$SEL_OBJECT_FORMAT",DEFAULT_SELECTED_LIST_FORMAT),aeroObjectsWithParsedName$=atom($=>{const j=$(objects$),_e=$(objectsFormat$),et=$(selectedObjectFormat$),tt=$(selectedObject$);return $(hasBrowserTranslation$)||(objectsKey=0),j.map((nt,rt)=>{const ot=rt===tt?et:_e;return{...nt,name:templateParser.parse(ot.replace(TEXT_PLACEHOLDER,nt.name).replace(IMAGE_PLACEHOLDER,nt.image||"")),key:objectsKey++}})}),menuFormat$=createVariableAtom("$MENU_FORMAT",DEFAULT_LIST_FORMAT),selectedMenuFormat$=createVariableAtom("$SEL_MENU_FORMAT",DEFAULT_SELECTED_LIST_FORMAT),aeroMenuWithParsedName$=atom($=>{const j=$(menu$),_e=$(menuFormat$),et=$(selectedMenuFormat$),tt=$(selectedMenuItem$);return $(hasBrowserTranslation$)||(menuKey=0),j.items.map((nt,rt)=>{const ot=rt===tt?et:_e;return{...nt,name:templateParser.parse(ot.replace(TEXT_PLACEHOLDER,nt.name).replace(IMAGE_PLACEHOLDER,nt.image||"")),key:menuKey++}})}),QspPlayer=()=>{const{attrs:$,template:j}=useAtom_2(playerTemplate$),[_e,et,tt]=useAttributes($,"qsp-player");return jsxRuntimeExports.jsx(_e,{style:et,...tt,children:jsxRuntimeExports.jsx(Markup,{content:j})})},loadingMessage$=atom(""),QspiderLoader=()=>{const $=useAtom_2(loadingMessage$);return jsxRuntimeExports.jsxs("div",{className:"q-loader",children:[jsxRuntimeExports.jsxs("div",{className:"q-book",children:[jsxRuntimeExports.jsxs("div",{className:"q-inner",children:[jsxRuntimeExports.jsx("div",{className:"q-left"})," ",jsxRuntimeExports.jsx("div",{className:"q-middle"})," ",jsxRuntimeExports.jsx("div",{className:"q-right"})]}),jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{}),jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})]})]}),$&&jsxRuntimeExports.jsx("div",{className:"q-loader__message",children:$})]})},ClickCoordinates=()=>{const{x:$,y:j}=useClickCoordinates(),_e=`qsp-game-root {--mouse-x: ${$}px;--mouse-y:${j}px;}`;return jsxRuntimeExports.jsx("style",{children:_e})};var ROOT_NAME="AlertDialog",[createAlertDialogContext,createAlertDialogScope]=createContextScope(ROOT_NAME,[createDialogScope]),useDialogScope=createDialogScope(),AlertDialog=$=>{const{__scopeAlertDialog:j,..._e}=$,et=useDialogScope(j);return jsxRuntimeExports.jsx(Root$6,{...et,..._e,modal:!0})};AlertDialog.displayName=ROOT_NAME;var TRIGGER_NAME$2="AlertDialogTrigger",AlertDialogTrigger=reactExports.forwardRef(($,j)=>{const{__scopeAlertDialog:_e,...et}=$,tt=useDialogScope(_e);return jsxRuntimeExports.jsx(Trigger$3,{...tt,...et,ref:j})});AlertDialogTrigger.displayName=TRIGGER_NAME$2;var PORTAL_NAME$2="AlertDialogPortal",AlertDialogPortal=$=>{const{__scopeAlertDialog:j,..._e}=$,et=useDialogScope(j);return jsxRuntimeExports.jsx(Portal$3,{...et,..._e})};AlertDialogPortal.displayName=PORTAL_NAME$2;var OVERLAY_NAME="AlertDialogOverlay",AlertDialogOverlay=reactExports.forwardRef(($,j)=>{const{__scopeAlertDialog:_e,...et}=$,tt=useDialogScope(_e);return jsxRuntimeExports.jsx(Overlay,{...tt,...et,ref:j})});AlertDialogOverlay.displayName=OVERLAY_NAME;var CONTENT_NAME$2="AlertDialogContent",[AlertDialogContentProvider,useAlertDialogContentContext]=createAlertDialogContext(CONTENT_NAME$2),AlertDialogContent=reactExports.forwardRef(($,j)=>{const{__scopeAlertDialog:_e,children:et,...tt}=$,nt=useDialogScope(_e),rt=reactExports.useRef(null),ot=useComposedRefs(j,rt),it=reactExports.useRef(null);return jsxRuntimeExports.jsx(WarningProvider,{contentName:CONTENT_NAME$2,titleName:TITLE_NAME$1,docsSlug:"alert-dialog",children:jsxRuntimeExports.jsx(AlertDialogContentProvider,{scope:_e,cancelRef:it,children:jsxRuntimeExports.jsxs(Content$1,{role:"alertdialog",...nt,...tt,ref:ot,onOpenAutoFocus:composeEventHandlers(tt.onOpenAutoFocus,at=>{var dt;at.preventDefault(),(dt=it.current)==null||dt.focus({preventScroll:!0})}),onPointerDownOutside:at=>at.preventDefault(),onInteractOutside:at=>at.preventDefault(),children:[jsxRuntimeExports.jsx(Slottable,{children:et}),jsxRuntimeExports.jsx(DescriptionWarning,{contentRef:rt})]})})})});AlertDialogContent.displayName=CONTENT_NAME$2;var TITLE_NAME$1="AlertDialogTitle",AlertDialogTitle=reactExports.forwardRef(($,j)=>{const{__scopeAlertDialog:_e,...et}=$,tt=useDialogScope(_e);return jsxRuntimeExports.jsx(Title,{...tt,...et,ref:j})});AlertDialogTitle.displayName=TITLE_NAME$1;var DESCRIPTION_NAME$1="AlertDialogDescription",AlertDialogDescription=reactExports.forwardRef(($,j)=>{const{__scopeAlertDialog:_e,...et}=$,tt=useDialogScope(_e);return jsxRuntimeExports.jsx(Description$1,{...tt,...et,ref:j})});AlertDialogDescription.displayName=DESCRIPTION_NAME$1;var ACTION_NAME$1="AlertDialogAction",AlertDialogAction=reactExports.forwardRef(($,j)=>{const{__scopeAlertDialog:_e,...et}=$,tt=useDialogScope(_e);return jsxRuntimeExports.jsx(Close$1,{...tt,...et,ref:j})});AlertDialogAction.displayName=ACTION_NAME$1;var CANCEL_NAME="AlertDialogCancel",AlertDialogCancel=reactExports.forwardRef(($,j)=>{const{__scopeAlertDialog:_e,...et}=$,{cancelRef:tt}=useAlertDialogContentContext(CANCEL_NAME,_e),nt=useDialogScope(_e),rt=useComposedRefs(j,tt);return jsxRuntimeExports.jsx(Close$1,{...nt,...et,ref:rt})});AlertDialogCancel.displayName=CANCEL_NAME;var DescriptionWarning=({contentRef:$})=>{const j=`\`${CONTENT_NAME$2}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${CONTENT_NAME$2}\` by passing a \`${DESCRIPTION_NAME$1}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${CONTENT_NAME$2}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return reactExports.useEffect(()=>{var et;document.getElementById((et=$.current)==null?void 0:et.getAttribute("aria-describedby"))||console.warn(j)},[j,$]),null},Root2$2=AlertDialog,Portal2=AlertDialogPortal,Overlay2=AlertDialogOverlay,Content2$2=AlertDialogContent,Cancel=AlertDialogCancel,Title2=AlertDialogTitle,Description2=AlertDialogDescription;const QspErrorAlert=()=>{const $=useAtom_2(qspError$),{t:j}=useTranslation();return $?jsxRuntimeExports.jsx(Root2$2,{open:!0,onOpenChange:()=>qspError$.set(null),children:jsxRuntimeExports.jsxs(Portal2,{container:document.getElementById("portal-container"),children:[jsxRuntimeExports.jsx(Overlay2,{className:"qsp-overlay"}),jsxRuntimeExports.jsx(Content2$2,{className:"qsp-dialog-container qsp-error-container",children:jsxRuntimeExports.jsxs("div",{className:"qsp-error",children:[jsxRuntimeExports.jsx(Title2,{children:j("Error")}),jsxRuntimeExports.jsxs(Description2,{children:[j("Error"),": ",j($.description),jsxRuntimeExports.jsx("br",{}),$.errorCode>=0?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[j("Error code"),": ",$.errorCode,jsxRuntimeExports.jsx("br",{})]}):"",$.location&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[j("Location"),": ",$.location,jsxRuntimeExports.jsx("br",{})]}),$.actionIndex>=0?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[j("Action index"),": ",$.actionIndex," ",jsxRuntimeExports.jsx("br",{})]}):"",$.line>=0?j("Line")+": "+$.line:"",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("code",{children:$.lineSrc})]}),jsxRuntimeExports.jsx("div",{className:"qsp-dialog-buttons",children:jsxRuntimeExports.jsx(Cancel,{className:"qsp-button",children:j("Close")})})]})})]})}):null},QspCSSVariables=()=>{const $=useAtom_2(currentCssVariables$);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:$.map(j=>jsxRuntimeExports.jsx(QspCssVariable,{definition:j},j.name))})},imageSizes$=atom({}),QspCssVariableResource=$=>{const j=useSetup(ot=>{const it=ot.focus(at=>at.url);return it.watch(at=>{if(at=prepareUrl(at),!!at&&!imageSizes$.value[at]){const dt=document.createElement("img");dt.onload=()=>{const st={width:dt.naturalWidth,height:dt.naturalHeight};imageSizes$.update(ut=>({...ut,[at]:st}))},dt.src=at}}),atom(at=>{const dt=prepareUrl(at(it));return at(imageSizes$)[dt]??{width:0,height:0}})},$),_e=useAtom_2(j);let{url:et}=$;et=prepareUrl(et);const{name:tt}=$,nt=$.withSize?`${tt}-w: ${_e.width}px; ${tt}-h: ${_e.height}px`:"",rt=`qsp-game-root, #portal-container {${tt}: ${et?`url("${et}")`:"none"};${nt}}`;return jsxRuntimeExports.jsx("style",{children:rt})};function prepareUrl($){return $.startsWith("qspider:")?$=$.replace("qspider:",initialBaseUrl$.value):$=baseUrl$.value+$,$.replace("\\","/")}const QspCssVariable=({definition:$})=>{const j=useQspVariable($.from,"",0,""),_e=[];if($.type==="color"){const tt=j?convertColor(Number(j)):$.defaultValue;if(tt&&(_e.push(`${$.name}: ${tt}`),$.withContrast&&_e.push(`${$.name}-contrast: ${getContrastColor(tt)}`),$.withInverted)){const nt=invertColor(tt);_e.push(`${$.name}-inverted: ${nt}`),$.withContrast&&_e.push(`${$.name}-inverted-contrast: ${getContrastColor(nt)}`)}}else if($.type==="unit"){const tt=`${j||$.defaultValue}${$.unit||""}`;_e.push(`${$.name}: ${tt}`)}else{if($.type==="resource")return!j&&!$.defaultValue?null:jsxRuntimeExports.jsx(QspCssVariableResource,{name:$.name,url:j||$.defaultValue,withSize:$.withSize});j&&_e.push(`${$.name}: ${j}`)}if(!_e.length)return null;const et=`qsp-game-root, #portal-container {${_e.join("; ")}}`;return jsxRuntimeExports.jsx("style",{children:et})},WaitLock=()=>{const $=useAtom_2(wait$);return useEventListener("keypress",j=>{wait$.value&&(j.preventDefault(),j.stopPropagation(),finishWait())},document),$?jsxRuntimeExports.jsx("div",{className:"wait-lock",onClick:finishWait}):null},QspCSSLinks=()=>{const $=useAtom_2(currentCssLinks$),j=useAtom_2(initialBaseUrl$);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:$.map(_e=>jsxRuntimeExports.jsx("link",{rel:"stylesheet",href:_e.startsWith("qspider:")?_e.replace("qspider:",j):_e},_e))})},QspScriptLinks=()=>{const $=useAtom_2(currentScriptLinks$),j=useAtom_2(initialBaseUrl$);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:$.map(_e=>jsxRuntimeExports.jsx("script",{src:_e.startsWith("qspider:")?_e.replace("qspider:",j):_e},_e))})},handler=throttle($=>{var j;if($.key==="Escape"){if(!currentGameEntry$.value||wait$.value||msg$.value.isOpen||input$.value.isOpen||menu$.value.isOpen||isPauseScreenVisible$.value||view$.value.isOpen&&view$.value.isModal)return;$.preventDefault(),$.stopPropagation(),((j=qspApi$.value)==null?void 0:j.readVariable("NOSAVE"))&&requestedAction$.set("load"),openPauseScreen()}},10),GameRunner=()=>{const $=useAtom_2(currentGameEntry$);return useEventListener("keydown",handler,document,{capture:!0}),$?jsxRuntimeExports.jsxs("qsp-game-root",{children:[jsxRuntimeExports.jsx(ClickCoordinates,{}),jsxRuntimeExports.jsx(QspCSSVariables,{}),jsxRuntimeExports.jsx(QspCSSLinks,{}),jsxRuntimeExports.jsx(QspPlayer,{}),jsxRuntimeExports.jsx(WaitLock,{}),jsxRuntimeExports.jsx(QspErrorAlert,{}),jsxRuntimeExports.jsx(QspScriptLinks,{})]}):jsxRuntimeExports.jsx(QspiderLoader,{})};function _extends(){return _extends=Object.assign||function($){for(var j=1;j<arguments.length;j++){var _e=arguments[j];for(var et in _e)Object.prototype.hasOwnProperty.call(_e,et)&&($[et]=_e[et])}return $},_extends.apply(this,arguments)}var Action;(function($){$.Pop="POP",$.Push="PUSH",$.Replace="REPLACE"})(Action||(Action={}));var readOnly=function($){return $},BeforeUnloadEventType="beforeunload",PopStateEventType="popstate";function createBrowserHistory($){$===void 0&&($={});var j=$,_e=j.window,et=_e===void 0?document.defaultView:_e,tt=et.history;function nt(){var bt=et.location,Rt=bt.pathname,Ot=bt.search,Ut=bt.hash,Yt=tt.state||{};return[Yt.idx,readOnly({pathname:Rt,search:Ot,hash:Ut,state:Yt.usr||null,key:Yt.key||"default"})]}var rt=null;function ot(){if(rt)ft.call(rt),rt=null;else{var bt=Action.Pop,Rt=nt(),Ot=Rt[0],Ut=Rt[1];if(ft.length){if(Ot!=null){var Yt=dt-Ot;Yt&&(rt={action:bt,location:Ut,retry:function(){At(Yt*-1)}},At(Yt))}}else vt(bt)}}et.addEventListener(PopStateEventType,ot);var it=Action.Pop,at=nt(),dt=at[0],st=at[1],ut=createEvents(),ft=createEvents();dt==null&&(dt=0,tt.replaceState(_extends({},tt.state,{idx:dt}),""));function pt(bt){return typeof bt=="string"?bt:createPath(bt)}function gt(bt,Rt){return Rt===void 0&&(Rt=null),readOnly(_extends({pathname:st.pathname,hash:"",search:""},typeof bt=="string"?parsePath(bt):bt,{state:Rt,key:createKey()}))}function yt(bt,Rt){return[{usr:bt.state,key:bt.key,idx:Rt},pt(bt)]}function mt(bt,Rt,Ot){return!ft.length||(ft.call({action:bt,location:Rt,retry:Ot}),!1)}function vt(bt){it=bt;var Rt=nt();dt=Rt[0],st=Rt[1],ut.call({action:it,location:st})}function _t(bt,Rt){var Ot=Action.Push,Ut=gt(bt,Rt);function Yt(){_t(bt,Rt)}if(mt(Ot,Ut,Yt)){var rn=yt(Ut,dt+1),mn=rn[0],qt=rn[1];try{tt.pushState(mn,"",qt)}catch{et.location.assign(qt)}vt(Ot)}}function St(bt,Rt){var Ot=Action.Replace,Ut=gt(bt,Rt);function Yt(){St(bt,Rt)}if(mt(Ot,Ut,Yt)){var rn=yt(Ut,dt),mn=rn[0],qt=rn[1];tt.replaceState(mn,"",qt),vt(Ot)}}function At(bt){tt.go(bt)}var kt={get action(){return it},get location(){return st},createHref:pt,push:_t,replace:St,go:At,back:function(){At(-1)},forward:function(){At(1)},listen:function(Rt){return ut.push(Rt)},block:function(Rt){var Ot=ft.push(Rt);return ft.length===1&&et.addEventListener(BeforeUnloadEventType,promptBeforeUnload),function(){Ot(),ft.length||et.removeEventListener(BeforeUnloadEventType,promptBeforeUnload)}}};return kt}function promptBeforeUnload($){$.preventDefault(),$.returnValue=""}function createEvents(){var $=[];return{get length(){return $.length},push:function(_e){return $.push(_e),function(){$=$.filter(function(et){return et!==_e})}},call:function(_e){$.forEach(function(et){return et&&et(_e)})}}}function createKey(){return Math.random().toString(36).substr(2,8)}function createPath($){var j=$.pathname,_e=j===void 0?"/":j,et=$.search,tt=et===void 0?"":et,nt=$.hash,rt=nt===void 0?"":nt;return tt&&tt!=="?"&&(_e+=tt.charAt(0)==="?"?tt:"?"+tt),rt&&rt!=="#"&&(_e+=rt.charAt(0)==="#"?rt:"#"+rt),_e}function parsePath($){var j={};if($){var _e=$.indexOf("#");_e>=0&&(j.hash=$.substr(_e),$=$.substr(0,_e));var et=$.indexOf("?");et>=0&&(j.search=$.substr(et),$=$.substr(0,et)),$&&(j.pathname=$)}return j}var browser=createBrowserHistory();function navigateTo($){browser.push(`?${$}`)}function goToGame($){browser.push(`${initialBaseUrl$.value}?run=${$}`)}const currentMode$=atom("shelf"),games$=atom({},$=>({add(j,_e){getStorage().addGame(j,_e).catch(console.error),$.update(et=>({...et,[j]:_e}))},update(j,_e){getStorage().updateGame(j,_e).catch(console.error),$.update(et=>({...et,[j]:{...et[j]||{},..._e}}))},remove(j){getStorage().removeGame(j).catch(console.error),$.update(_e=>{const{[j]:et,...tt}=_e;return tt})}})),gamesList$=atom($=>Object.values($(games$)).sort((j,_e)=>j.title.localeCompare(_e.title))),gameSourceMap$=atom($=>{var _e;const j=new Map;for(const et of Object.values($(games$)))if((_e=et.meta)!=null&&_e.source){const tt=j.get(et.meta.source)??new Set;tt.add(et.meta.source_id),j.set(et.meta.source,tt)}return j});browser.listen(({location:$})=>{processLocationChange($.search)});async function processLocationChange($){const j=new URLSearchParams($),_e=j.get("run");if(_e){await initDeferred$.value.promise;const et=games$.value[_e];await runGame(et),currentMode$.set("game")}else j.has("catalog")?(currentGameEntry$.value&&stopCurrentGame(),currentMode$.set("catalog")):(currentGameEntry$.value&&stopCurrentGame(),currentMode$.set("shelf"))}async function loadGamesFromStorage(){const $=await getStorage().getGames();$&&games$.set($)}function _objectWithoutPropertiesLoose($,j){if($==null)return{};var _e={},et=Object.keys($),tt,nt;for(nt=0;nt<et.length;nt++)tt=et[nt],!(j.indexOf(tt)>=0)&&(_e[tt]=$[tt]);return _e}var _excluded$T=["color"],CheckIcon=reactExports.forwardRef(function($,j){var _e=$.color,et=_e===void 0?"currentColor":_e,tt=_objectWithoutPropertiesLoose($,_excluded$T);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},tt,{ref:j}),reactExports.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:et,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$W=["color"],ChevronDownIcon=reactExports.forwardRef(function($,j){var _e=$.color,et=_e===void 0?"currentColor":_e,tt=_objectWithoutPropertiesLoose($,_excluded$W);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},tt,{ref:j}),reactExports.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:et,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$Z=["color"],ChevronUpIcon=reactExports.forwardRef(function($,j){var _e=$.color,et=_e===void 0?"currentColor":_e,tt=_objectWithoutPropertiesLoose($,_excluded$Z);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},tt,{ref:j}),reactExports.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:et,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$1q=["color"],Cross1Icon=reactExports.forwardRef(function($,j){var _e=$.color,et=_e===void 0?"currentColor":_e,tt=_objectWithoutPropertiesLoose($,_excluded$1q);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},tt,{ref:j}),reactExports.createElement("path",{d:"M12.8536 2.85355C13.0488 2.65829 13.0488 2.34171 12.8536 2.14645C12.6583 1.95118 12.3417 1.95118 12.1464 2.14645L7.5 6.79289L2.85355 2.14645C2.65829 1.95118 2.34171 1.95118 2.14645 2.14645C1.95118 2.34171 1.95118 2.65829 2.14645 2.85355L6.79289 7.5L2.14645 12.1464C1.95118 12.3417 1.95118 12.6583 2.14645 12.8536C2.34171 13.0488 2.65829 13.0488 2.85355 12.8536L7.5 8.20711L12.1464 12.8536C12.3417 13.0488 12.6583 13.0488 12.8536 12.8536C13.0488 12.6583 13.0488 12.3417 12.8536 12.1464L8.20711 7.5L12.8536 2.85355Z",fill:et,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$1L=["color"],DoubleArrowDownIcon=reactExports.forwardRef(function($,j){var _e=$.color,et=_e===void 0?"currentColor":_e,tt=_objectWithoutPropertiesLoose($,_excluded$1L);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},tt,{ref:j}),reactExports.createElement("path",{d:"M3.85355 2.14645C3.65829 1.95118 3.34171 1.95118 3.14645 2.14645C2.95118 2.34171 2.95118 2.65829 3.14645 2.85355L7.14645 6.85355C7.34171 7.04882 7.65829 7.04882 7.85355 6.85355L11.8536 2.85355C12.0488 2.65829 12.0488 2.34171 11.8536 2.14645C11.6583 1.95118 11.3417 1.95118 11.1464 2.14645L7.5 5.79289L3.85355 2.14645ZM3.85355 8.14645C3.65829 7.95118 3.34171 7.95118 3.14645 8.14645C2.95118 8.34171 2.95118 8.65829 3.14645 8.85355L7.14645 12.8536C7.34171 13.0488 7.65829 13.0488 7.85355 12.8536L11.8536 8.85355C12.0488 8.65829 12.0488 8.34171 11.8536 8.14645C11.6583 7.95118 11.3417 7.95118 11.1464 8.14645L7.5 11.7929L3.85355 8.14645Z",fill:et,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$1O=["color"],DoubleArrowUpIcon=reactExports.forwardRef(function($,j){var _e=$.color,et=_e===void 0?"currentColor":_e,tt=_objectWithoutPropertiesLoose($,_excluded$1O);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},tt,{ref:j}),reactExports.createElement("path",{d:"M11.1464 6.85355C11.3417 7.04882 11.6583 7.04882 11.8536 6.85355C12.0488 6.65829 12.0488 6.34171 11.8536 6.14645L7.85355 2.14645C7.65829 1.95118 7.34171 1.95118 7.14645 2.14645L3.14645 6.14645C2.95118 6.34171 2.95118 6.65829 3.14645 6.85355C3.34171 7.04882 3.65829 7.04882 3.85355 6.85355L7.5 3.20711L11.1464 6.85355ZM11.1464 12.8536C11.3417 13.0488 11.6583 13.0488 11.8536 12.8536C12.0488 12.6583 12.0488 12.3417 11.8536 12.1464L7.85355 8.14645C7.65829 7.95118 7.34171 7.95118 7.14645 8.14645L3.14645 12.1464C2.95118 12.3417 2.95118 12.6583 3.14645 12.8536C3.34171 13.0488 3.65829 13.0488 3.85355 12.8536L7.5 9.20711L11.1464 12.8536Z",fill:et,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$4i=["color"],SunIcon=reactExports.forwardRef(function($,j){var _e=$.color,et=_e===void 0?"currentColor":_e,tt=_objectWithoutPropertiesLoose($,_excluded$4i);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},tt,{ref:j}),reactExports.createElement("path",{d:"M7.5 0C7.77614 0 8 0.223858 8 0.5V2.5C8 2.77614 7.77614 3 7.5 3C7.22386 3 7 2.77614 7 2.5V0.5C7 0.223858 7.22386 0 7.5 0ZM2.1967 2.1967C2.39196 2.00144 2.70854 2.00144 2.90381 2.1967L4.31802 3.61091C4.51328 3.80617 4.51328 4.12276 4.31802 4.31802C4.12276 4.51328 3.80617 4.51328 3.61091 4.31802L2.1967 2.90381C2.00144 2.70854 2.00144 2.39196 2.1967 2.1967ZM0.5 7C0.223858 7 0 7.22386 0 7.5C0 7.77614 0.223858 8 0.5 8H2.5C2.77614 8 3 7.77614 3 7.5C3 7.22386 2.77614 7 2.5 7H0.5ZM2.1967 12.8033C2.00144 12.608 2.00144 12.2915 2.1967 12.0962L3.61091 10.682C3.80617 10.4867 4.12276 10.4867 4.31802 10.682C4.51328 10.8772 4.51328 11.1938 4.31802 11.3891L2.90381 12.8033C2.70854 12.9986 2.39196 12.9986 2.1967 12.8033ZM12.5 7C12.2239 7 12 7.22386 12 7.5C12 7.77614 12.2239 8 12.5 8H14.5C14.7761 8 15 7.77614 15 7.5C15 7.22386 14.7761 7 14.5 7H12.5ZM10.682 4.31802C10.4867 4.12276 10.4867 3.80617 10.682 3.61091L12.0962 2.1967C12.2915 2.00144 12.608 2.00144 12.8033 2.1967C12.9986 2.39196 12.9986 2.70854 12.8033 2.90381L11.3891 4.31802C11.1938 4.51328 10.8772 4.51328 10.682 4.31802ZM8 12.5C8 12.2239 7.77614 12 7.5 12C7.22386 12 7 12.2239 7 12.5V14.5C7 14.7761 7.22386 15 7.5 15C7.77614 15 8 14.7761 8 14.5V12.5ZM10.682 10.682C10.8772 10.4867 11.1938 10.4867 11.3891 10.682L12.8033 12.0962C12.9986 12.2915 12.9986 12.608 12.8033 12.8033C12.608 12.9986 12.2915 12.9986 12.0962 12.8033L10.682 11.3891C10.4867 11.1938 10.4867 10.8772 10.682 10.682ZM5.5 7.5C5.5 6.39543 6.39543 5.5 7.5 5.5C8.60457 5.5 9.5 6.39543 9.5 7.5C9.5 8.60457 8.60457 9.5 7.5 9.5C6.39543 9.5 5.5 8.60457 5.5 7.5ZM7.5 4.5C5.84315 4.5 4.5 5.84315 4.5 7.5C4.5 9.15685 5.84315 10.5 7.5 10.5C9.15685 10.5 10.5 9.15685 10.5 7.5C10.5 5.84315 9.15685 4.5 7.5 4.5Z",fill:et,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$4N=["color"],UpdateIcon=reactExports.forwardRef(function($,j){var _e=$.color,et=_e===void 0?"currentColor":_e,tt=_objectWithoutPropertiesLoose($,_excluded$4N);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},tt,{ref:j}),reactExports.createElement("path",{d:"M1.90321 7.29677C1.90321 10.341 4.11041 12.4147 6.58893 12.8439C6.87255 12.893 7.06266 13.1627 7.01355 13.4464C6.96444 13.73 6.69471 13.9201 6.41109 13.871C3.49942 13.3668 0.86084 10.9127 0.86084 7.29677C0.860839 5.76009 1.55996 4.55245 2.37639 3.63377C2.96124 2.97568 3.63034 2.44135 4.16846 2.03202L2.53205 2.03202C2.25591 2.03202 2.03205 1.80816 2.03205 1.53202C2.03205 1.25588 2.25591 1.03202 2.53205 1.03202L5.53205 1.03202C5.80819 1.03202 6.03205 1.25588 6.03205 1.53202L6.03205 4.53202C6.03205 4.80816 5.80819 5.03202 5.53205 5.03202C5.25591 5.03202 5.03205 4.80816 5.03205 4.53202L5.03205 2.68645L5.03054 2.68759L5.03045 2.68766L5.03044 2.68767L5.03043 2.68767C4.45896 3.11868 3.76059 3.64538 3.15554 4.3262C2.44102 5.13021 1.90321 6.10154 1.90321 7.29677ZM13.0109 7.70321C13.0109 4.69115 10.8505 2.6296 8.40384 2.17029C8.12093 2.11718 7.93465 1.84479 7.98776 1.56188C8.04087 1.27898 8.31326 1.0927 8.59616 1.14581C11.4704 1.68541 14.0532 4.12605 14.0532 7.70321C14.0532 9.23988 13.3541 10.4475 12.5377 11.3662C11.9528 12.0243 11.2837 12.5586 10.7456 12.968L12.3821 12.968C12.6582 12.968 12.8821 13.1918 12.8821 13.468C12.8821 13.7441 12.6582 13.968 12.3821 13.968L9.38205 13.968C9.10591 13.968 8.88205 13.7441 8.88205 13.468L8.88205 10.468C8.88205 10.1918 9.10591 9.96796 9.38205 9.96796C9.65819 9.96796 9.88205 10.1918 9.88205 10.468L9.88205 12.3135L9.88362 12.3123C10.4551 11.8813 11.1535 11.3546 11.7585 10.6738C12.4731 9.86976 13.0109 8.89844 13.0109 7.70321Z",fill:et,fillRule:"evenodd",clipRule:"evenodd"}))});const SevenZipWasmUrl=""+new URL("7zz-VeZPb8VL.wasm",import.meta.url).href,isSupportedArchive=$=>{const j=new Uint8Array($);return isZip(j)||isRar(j)||is7zip(j)},isZip=$=>$[0]===80&&$[1]===75&&($[2]===3||$[2]===5||$[2]===7)&&($[3]===4||$[3]===6||$[3]===8),isRar=$=>$[0]===82&&$[1]===97&&$[2]===114&&$[3]===33,is7zip=$=>$[0]===55&&$[1]===122&&$[2]===188&&$[3]===175&&$[4]===39&&$[5]===28;let sevenZip=null;async function initSevenZip(){if(sevenZip)return sevenZip;const $=(await __vitePreload(async()=>{const{default:_e}=await import("./7zz.es6-qIaVK2va.js");return{default:_e}},__vite__mapDeps([0,1]),import.meta.url)).default;sevenZip=await $({wasmBinary:await fetch(SevenZipWasmUrl).then(_e=>_e.arrayBuffer())});const j=sevenZip.FS.chmod;return sevenZip.FS.chmod=function(_e,et,tt){et&&j(_e,et,tt)},sevenZip}const read7zip=async $=>{const j=await initSevenZip(),_e="archive.tmp",et=new Uint8Array($),tt=j.FS.open(_e,"w+");j.FS.write(tt,et,0,et.length),j.FS.close(tt),j.FS.mkdir("game"),j.callMain(["x",_e,"-ogame","-y","-r"]),j.FS.chdir("game");const nt=readExtractedDirectory(j.FS,".");return removeDirRecursive(j.FS,"game"),j.FS.rmdir("game"),j.FS.unlink(_e),nt},readSupportedArchive=$=>read7zip($),folderToSkip=new Set([".","..","__MACOSX"]),filesToSkip=new Set([".DS_Store"]);function readExtractedDirectory($,j){const _e={type:"dir",name:j,content:[]};$.chdir(j);for(const et of $.readdir(".")){if(folderToSkip.has(et)||filesToSkip.has(et))continue;const{mode:tt}=$.lookupPath(et).node;$.isFile(tt)?_e.content.push({type:"file",name:et,data:$.readFile(et)}):$.isDir(tt)&&_e.content.push(readExtractedDirectory($,et))}return $.chdir(".."),_e}function removeDirRecursive($,j){$.chdir(j);for(const _e of $.readdir(".")){if(_e==="."||_e==="..")continue;const{mode:et}=$.lookupPath(_e).node;$.isFile(et)?$.unlink(_e):$.isDir(et)&&(removeDirRecursive($,_e),$.rmdir(_e))}$.chdir("..")}async function importArchive($,j,_e){var ot;const et=getStorage();if(!et)throw new Error("missing storage");if(!isSupportedArchive(j))throw new Error("unsupporter archive format");const tt=await readSupportedArchive(j),nt=findRootDescriptorFolder(tt);if(nt){const[it,at]=nt,dt=await readGameDescriptor(at);for(const st of dt)try{const ut=getGameFolder(it,st.file);await storeFolderContent(st.id,ut);const ft=ut.content.find(pt=>pt.type==="file"&&pt.name===GAME_DESCRIPTOR_NAME);if(ft){const[pt]=await readGameDescriptor(ft.data);Object.assign(st,pt)}else{const pt=stringify({game:[st]});await et.addGameResource(st.id,GAME_DESCRIPTOR_NAME,new TextEncoder().encode(pt))}}catch(ut){console.error(ut)}return Promise.all(dt.map(async st=>{var gt;const ut=st.file.slice(st.file.lastIndexOf("/")+1),ft=await et.prepareLoadConfig(st.id,ut);let pt=(gt=st.resources)==null?void 0:gt.icon;return pt&&(pt=`${ft.url}${pt}`),{id:st.id,mode:st.mode,title:st.title,author:st.author,ported_by:st.ported_by,version:st.version,description:st.description,icon:pt,loadConfig:{...ft,descriptor:st}}}))}const rt=findRootGameFileFolder(tt);if(rt){const[it,at]=rt,dt=(_e==null?void 0:_e.id)||cyrb53($);if(await storeFolderContent(dt,it),_e){const ft=stringify({game:[_e]});await et.addGameResource(dt,GAME_DESCRIPTOR_NAME,new TextEncoder().encode(ft))}const st=await et.prepareLoadConfig(dt,at);let ut=(ot=_e==null?void 0:_e.resources)==null?void 0:ot.icon;return ut&&(ut=`${st.url}${ut}`),[{id:dt,title:(_e==null?void 0:_e.title)||$.slice($.lastIndexOf("/")+1),mode:(_e==null?void 0:_e.mode)||($.endsWith("aqsp")?"aero":"classic"),author:_e==null?void 0:_e.author,ported_by:_e==null?void 0:_e.ported_by,version:_e==null?void 0:_e.version,description:_e==null?void 0:_e.description,icon:ut,loadConfig:st}]}throw new Error("Game files not found inside archive")}function findRootDescriptorFolder($){for(const j of $.content)if(j.type==="file"&&j.name===GAME_DESCRIPTOR_NAME)return[$,j.data];for(const j of $.content)if(j.type==="dir"){const _e=findRootDescriptorFolder(j);if(_e)return _e}return null}function findRootGameFileFolder($){let j=null,_e=null;for(const et of $.content)et.type==="file"&&((et.name.endsWith(".qsp")||et.name.endsWith(".gam"))&&(j=et.name),et.name.endsWith(".qsps")&&(_e=et.name));if(j)return[$,j];if(_e)return[$,_e];for(const et of $.content)if(et.type==="dir"){const tt=findRootGameFileFolder(et);if(tt)return tt}return null}function getGameFolder($,j){const _e=j.split("/");_e.pop();let et=$;for(const tt of _e){const nt=et.content.find(rt=>rt.type==="dir"&&rt.name===tt);if(!nt)throw new Error(`Failed to find game file ${j} in archvive`);et=nt}return et}async function readGameDescriptor($){const _e=await new Blob([$]).text();return parseToml(_e).game}async function storeFolderContent($,j,_e=""){const et=getStorage();for(const tt of j.content)if(tt.type==="dir")await storeFolderContent($,tt,`${_e}${tt.name}/`);else{if(tt.name===".DS_Store")continue;await et.addGameResource($,`${_e}${tt.name}`,tt.data)}}async function importUrl($,j,_e){const et=new URL($);et.hash="",et.search="";const tt=et.toString(),nt=await fetchProxyFallback($).then(it=>{if(!it.ok)throw new Error(`Failed to load url ${$}`);return it.arrayBuffer()});if(isSupportedArchive(nt))return importArchive(j||tt,nt,_e);const rt=tt.slice(0,tt.lastIndexOf("/")+1),ot=tt.replace(rt,"");if(ot.endsWith(".cfg")){const it=new TextDecoder().decode(nt),at=parseToml(it),dt=[];for(const st of at.game){const ut=`${rt}${st.file}`;dt.push(...await importUrl(ut,st.file,st))}return dt}else{const it=`${rt}game.cfg`;try{const at=await fetchProxyFallback(it).then(ut=>ut.text()),st=parseToml(at).game.find(ut=>ut.file===ot);if(!st)throw new Error("Config not found");return[{id:st.id,mode:st.mode,title:st.title,author:st.author,ported_by:st.ported_by,version:st.version,description:st.description,loadConfig:{url:rt,entrypoint:st.file}}]}catch{return[{id:(_e==null?void 0:_e.id)||cyrb53(tt),title:(_e==null?void 0:_e.title)||ot,mode:(_e==null?void 0:_e.mode)||"classic",author:_e==null?void 0:_e.author,ported_by:_e==null?void 0:_e.ported_by,version:_e==null?void 0:_e.version,description:_e==null?void 0:_e.description,loadConfig:{url:rt,entrypoint:ot,descriptor:_e}}]}}}async function importFile($,j){const _e=getStorage();if(!_e)throw new Error("missing storage");if(isSupportedArchive(j))return importArchive($,j);const et=cyrb53($);return await _e.addGameResource(et,$,j),[{id:cyrb53($),title:$,mode:"classic",loadConfig:await _e.prepareLoadConfig(et,$)}]}const qspCatalogList$=atom([]),qspAuthorFilter$=atom(""),qspSortByField$=atom("title"),qspSortDirection$=atom("asc"),qspTitleSearch$=atom(""),onlyAero$=atom(!1),qspCatalogPreparedList$=atom($=>{const j=$(qspCatalogList$),_e=$(qspAuthorFilter$),et=$(qspSortByField$),tt=$(qspSortDirection$),nt=$(qspTitleSearch$).toLocaleLowerCase(),rt=$(onlyAero$);let ot=_e?j.filter(it=>it.author.includes(_e)):j.slice();return rt&&(ot=ot.filter(it=>it.file_ext==="aqsp")),nt&&(ot=ot.filter(it=>it.title.toLocaleLowerCase().includes(nt))),ot.sort(sortByField(et)),tt==="desc"&&ot.reverse(),ot}),qspAuthors$=atom($=>{const j=$(qspCatalogList$),_e=new Set;for(const et of j){const tt=et.author.split(",");for(const nt of tt)nt.trim()&&_e.add(nt.trim())}return[..._e].sort((et,tt)=>et.localeCompare(tt))}),catalogLoading$=atom("pending"),sourceName="org.qsp.games",CATALOG_URL="https://catalog.qspider.xyz/",catalogLoadingDeferred=defer$1();async function loadQspCatalog(){if(catalogLoading$.value==="loading")return catalogLoadingDeferred.promise;catalogLoading$.value="loading";try{const $=await fetch(CATALOG_URL);if(!$.ok)throw new Error("Failed to load catalog");const j=await $.json();qspCatalogList$.value=j,catalogLoading$.value="loaded"}catch{catalogLoading$.value="failed"}return catalogLoadingDeferred.resolve(),catalogLoadingDeferred.promise}async function moveToShelf($){try{const j=await importUrl(`${CATALOG_URL}game-source?id=${$.id}`,`qsp-game-${$.id}.${$.file_ext}`);for(const _e of j)_e.title=$.title,_e.description=$.description,_e.icon=`https://qsp.su/gamestock/image.php?name=${$.icon}`,_e.author=$.author,_e.ported_by=$.ported_by,_e.version=$.version,_e.meta={source:"org.qsp.games",source_id:String($.id),source_date:$.mod_date},games$.actions.add(_e.id,_e),showNotice(instance.t("{{ name }} added to shelf",{name:$.title}));return j}catch(j){console.error(j),showError(`Failed to load source for game ${$.title}`)}return[]}function toggleSortDirection(){qspSortDirection$.update($=>$==="asc"?"desc":"asc")}function sortByField($){return(j,_e)=>{const et=j[$],tt=_e[$];return typeof et=="number"&&typeof tt=="number"?et-tt:typeof et=="string"&&typeof tt=="string"?et.localeCompare(tt):et===tt?0:et<tt?1:-1}}const GameCard=$=>{const{game:j}=$,_e=useSetup(dt=>{const st=dt.focus(ut=>ut.game.description);return atom(ut=>templateParser.parse(ut(st)??""))},$),{t:et}=useTranslation(),tt=reactExports.useCallback(()=>{games$.actions.remove(j.id)},[j.id]),nt=useSetup(dt=>{const st=dt.focus(ut=>ut.game);return atom(ut=>{var gt;const ft=(gt=ut(st).meta)==null?void 0:gt.source_id;if(!ft)return null;const pt=parseInt(ft);return ut(qspCatalogList$).find(yt=>yt.id===pt)})},$),rt=useAtom_2(nt),ot=useAtom_2(_e),it=j.meta&&rt?j.meta.source_date<rt.mod_date:!1,at=()=>{!it||!rt||moveToShelf(rt)};return jsxRuntimeExports.jsx(Root$6,{children:jsxRuntimeExports.jsxs("div",{className:"game-shelf__card","data-qa":`game-${j.id}`,children:[jsxRuntimeExports.jsxs("div",{className:"game-shelf__card-content",children:[jsxRuntimeExports.jsx("button",{type:"button",className:"q-ghost-button q-remove-game-button",title:"Remove from Game Shelf",onClick:tt,children:jsxRuntimeExports.jsx(Cross1Icon,{})}),jsxRuntimeExports.jsxs("h3",{className:"game-shelf__card-title",children:[j.icon&&jsxRuntimeExports.jsx("img",{alt:"",src:j.icon,loading:"lazy"}),j.title]})]}),jsxRuntimeExports.jsxs("div",{className:"game-shelf__card-details",children:[j.author&&jsxRuntimeExports.jsxs("div",{className:"game-shelf__card-details-row",children:[et("Author"),": ",j.author]}),j.ported_by&&jsxRuntimeExports.jsxs("div",{className:"game-shelf__card-details-row",children:[et("Ported by"),": ",j.ported_by]}),j.version&&jsxRuntimeExports.jsxs("div",{className:"game-shelf__card-details-row",children:[et("Version"),": ",j.version]})]}),it&&jsxRuntimeExports.jsxs("div",{className:"game-shelf__card-actions",children:[et("Game has been updated in catalog"),jsxRuntimeExports.jsx("button",{className:"q-button",onClick:at,children:et("Update on shelf")})]}),jsxRuntimeExports.jsxs("div",{className:"game-shelf__card-actions",children:[j.description?jsxRuntimeExports.jsx(Trigger$3,{asChild:!0,children:jsxRuntimeExports.jsx("button",{className:"q-ghost-button",children:et("Read Description")})}):jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("a",{href:"#",onClick:dt=>{dt.preventDefault(),goToGame(j.id)},children:et("Run")})]}),j.description&&jsxRuntimeExports.jsxs(Portal$3,{children:[jsxRuntimeExports.jsx(Overlay,{className:"qspider-dialog-overlay"}),jsxRuntimeExports.jsxs(Content$1,{className:"qspider-dialog-content",children:[jsxRuntimeExports.jsxs(Root$5,{className:"qspider-scroll-root",children:[jsxRuntimeExports.jsx(Viewport$2,{className:"qspider-scroll-area",children:jsxRuntimeExports.jsx(Markup,{content:ot})}),jsxRuntimeExports.jsx(Scrollbar,{className:"qspider-scroll-bar",orientation:"vertical",children:jsxRuntimeExports.jsx(Thumb$2,{className:"qspider-scroll-thumb"})})]}),jsxRuntimeExports.jsx(Close$1,{className:"q-ghost-button q-dialog-close","aria-label":"Close",children:jsxRuntimeExports.jsx(Cross1Icon,{})})]})]})]})})},GameShelf=()=>{const $=useAtom_2(gamesList$),{t:j}=useTranslation();return jsxRuntimeExports.jsx("div",{className:"game-shelf",children:$.length>0?jsxRuntimeExports.jsx("div",{className:"game-shelf__list",children:$.map(_e=>jsxRuntimeExports.jsx(GameCard,{game:_e},_e.id))}):jsxRuntimeExports.jsx("div",{className:"game-shelf__empty",children:j("Game shelf is empty")})})},sizes=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],byteSize=1024;function formatBytes($,j=2){if($===0)return"0 Bytes";const _e=Math.floor(Math.log($)/Math.log(byteSize));return parseFloat(($/Math.pow(byteSize,_e)).toFixed(j))+" "+sizes[_e]}const CatalogGameCard=$=>{const{t:j}=useTranslation(),_e=useSetup(st=>{const ut=st.focus(ft=>ft.game.id);return atom(ft=>{const pt=ft(gameSourceMap$).get(sourceName),gt=String(ft(ut));return pt==null?void 0:pt.has(gt)})},$),et=useSetup(st=>{const ut=st.focus(ft=>ft.game.description);return atom(ft=>templateParser.parse(ft(ut)))},$),tt=useAtom_2(_e),nt=useAtom_2(et),{game:rt}=$,ot=rt.icon?rt.icon.substring(rt.icon.lastIndexOf("com_sobi2")):null,[it,at]=reactExports.useState(!1),dt=reactExports.useCallback(async()=>{at(!0),await moveToShelf(rt),at(!1)},[rt]);return jsxRuntimeExports.jsx(Root$6,{children:jsxRuntimeExports.jsxs("div",{className:"q-catalog__card","data-id":rt.id,children:[jsxRuntimeExports.jsxs("h5",{className:"q-title",children:[rt.icon&&jsxRuntimeExports.jsx("img",{alt:"",src:"https://qsp.su/gamestock/image.php?name="+ot,loading:"lazy"}),rt.title]}),jsxRuntimeExports.jsxs("div",{className:"q-catalog__card-details",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"q-catalog__card-details-row",children:[j("Author"),": ",rt.author]}),rt.ported_by&&jsxRuntimeExports.jsxs("div",{className:"q-catalog__card-details-row",children:[j("Ported by"),": ",rt.ported_by]}),jsxRuntimeExports.jsxs("div",{className:"q-catalog__card-details-row",children:[j("Version"),": ",rt.version]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"q-catalog__card-details-row",children:[j("Size"),": ",formatBytes(rt.file_size)]}),jsxRuntimeExports.jsxs("div",{className:"q-catalog__card-details-row",children:[j("Type"),": ",rt.file_ext]}),jsxRuntimeExports.jsxs("div",{className:"q-catalog__card-details-row",children:[j("Last update"),": ",formatDate(new Date(rt.mod_date))]})]})]}),jsxRuntimeExports.jsxs("div",{className:"q-catalog__card-buttons",children:[rt.description?jsxRuntimeExports.jsx(Trigger$3,{asChild:!0,children:jsxRuntimeExports.jsx("button",{className:"q-ghost-button",children:j("Read Description")})}):jsxRuntimeExports.jsx("div",{}),tt?jsxRuntimeExports.jsx("span",{children:j("On Shelf")}):jsxRuntimeExports.jsx("button",{className:"q-button",disabled:it,onClick:dt,children:it?jsxRuntimeExports.jsx("span",{className:"q-spin",children:jsxRuntimeExports.jsx(UpdateIcon,{})}):j("Add to shelf")})]}),rt.description?jsxRuntimeExports.jsxs(Portal$3,{children:[jsxRuntimeExports.jsx(Overlay,{className:"qspider-dialog-overlay"}),jsxRuntimeExports.jsxs(Content$1,{className:"qspider-dialog-content",children:[jsxRuntimeExports.jsxs(Root$5,{className:"qspider-scroll-root",children:[jsxRuntimeExports.jsx(Viewport$2,{className:"qspider-scroll-area",children:jsxRuntimeExports.jsx(Markup,{content:nt})}),jsxRuntimeExports.jsx(Scrollbar,{className:"qspider-scroll-bar",orientation:"vertical",children:jsxRuntimeExports.jsx(Thumb$2,{className:"qspider-scroll-thumb"})})]}),jsxRuntimeExports.jsx(Close$1,{className:"q-ghost-button q-dialog-close","aria-label":"Close",children:jsxRuntimeExports.jsx(Cross1Icon,{})})]})]}):null]})})};var NAME="VisuallyHidden",VisuallyHidden=reactExports.forwardRef(($,j)=>jsxRuntimeExports.jsx(Primitive.span,{...$,ref:j,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...$.style}}));VisuallyHidden.displayName=NAME;var Root$1=VisuallyHidden,OPEN_KEYS=[" ","Enter","ArrowUp","ArrowDown"],SELECTION_KEYS=[" ","Enter"],SELECT_NAME="Select",[Collection$1,useCollection$1,createCollectionScope$1]=createCollection(SELECT_NAME),[createSelectContext,createSelectScope]=createContextScope(SELECT_NAME,[createCollectionScope$1,createPopperScope]),usePopperScope$1=createPopperScope(),[SelectProvider,useSelectContext]=createSelectContext(SELECT_NAME),[SelectNativeOptionsProvider,useSelectNativeOptionsContext]=createSelectContext(SELECT_NAME),Select$1=$=>{const{__scopeSelect:j,children:_e,open:et,defaultOpen:tt,onOpenChange:nt,value:rt,defaultValue:ot,onValueChange:it,dir:at,name:dt,autoComplete:st,disabled:ut,required:ft}=$,pt=usePopperScope$1(j),[gt,yt]=reactExports.useState(null),[mt,vt]=reactExports.useState(null),[_t,St]=reactExports.useState(!1),At=useDirection(at),[kt=!1,bt]=useControllableState({prop:et,defaultProp:tt,onChange:nt}),[Rt,Ot]=useControllableState({prop:rt,defaultProp:ot,onChange:it}),Ut=reactExports.useRef(null),Yt=gt?!!gt.closest("form"):!0,[rn,mn]=reactExports.useState(new Set),qt=Array.from(rn).map(Zt=>Zt.props.value).join(";");return jsxRuntimeExports.jsx(Root2$4,{...pt,children:jsxRuntimeExports.jsxs(SelectProvider,{required:ft,scope:j,trigger:gt,onTriggerChange:yt,valueNode:mt,onValueNodeChange:vt,valueNodeHasChildren:_t,onValueNodeHasChildrenChange:St,contentId:useId(),value:Rt,onValueChange:Ot,open:kt,onOpenChange:bt,dir:At,triggerPointerDownPosRef:Ut,disabled:ut,children:[jsxRuntimeExports.jsx(Collection$1.Provider,{scope:j,children:jsxRuntimeExports.jsx(SelectNativeOptionsProvider,{scope:$.__scopeSelect,onNativeOptionAdd:reactExports.useCallback(Zt=>{mn(Jt=>new Set(Jt).add(Zt))},[]),onNativeOptionRemove:reactExports.useCallback(Zt=>{mn(Jt=>{const un=new Set(Jt);return un.delete(Zt),un})},[]),children:_e})}),Yt?jsxRuntimeExports.jsxs(BubbleSelect,{"aria-hidden":!0,required:ft,tabIndex:-1,name:dt,autoComplete:st,value:Rt,onChange:Zt=>Ot(Zt.target.value),disabled:ut,children:[Rt===void 0?jsxRuntimeExports.jsx("option",{value:""}):null,Array.from(rn)]},qt):null]})})};Select$1.displayName=SELECT_NAME;var TRIGGER_NAME$1="SelectTrigger",SelectTrigger=reactExports.forwardRef(($,j)=>{const{__scopeSelect:_e,disabled:et=!1,...tt}=$,nt=usePopperScope$1(_e),rt=useSelectContext(TRIGGER_NAME$1,_e),ot=rt.disabled||et,it=useComposedRefs(j,rt.onTriggerChange),at=useCollection$1(_e),[dt,st,ut]=useTypeaheadSearch(pt=>{const gt=at().filter(vt=>!vt.disabled),yt=gt.find(vt=>vt.value===rt.value),mt=findNextItem(gt,pt,yt);mt!==void 0&&rt.onValueChange(mt.value)}),ft=()=>{ot||(rt.onOpenChange(!0),ut())};return jsxRuntimeExports.jsx(Anchor,{asChild:!0,...nt,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"combobox","aria-controls":rt.contentId,"aria-expanded":rt.open,"aria-required":rt.required,"aria-autocomplete":"none",dir:rt.dir,"data-state":rt.open?"open":"closed",disabled:ot,"data-disabled":ot?"":void 0,"data-placeholder":shouldShowPlaceholder(rt.value)?"":void 0,...tt,ref:it,onClick:composeEventHandlers(tt.onClick,pt=>{pt.currentTarget.focus()}),onPointerDown:composeEventHandlers(tt.onPointerDown,pt=>{const gt=pt.target;gt.hasPointerCapture(pt.pointerId)&&gt.releasePointerCapture(pt.pointerId),pt.button===0&&pt.ctrlKey===!1&&(ft(),rt.triggerPointerDownPosRef.current={x:Math.round(pt.pageX),y:Math.round(pt.pageY)},pt.preventDefault())}),onKeyDown:composeEventHandlers(tt.onKeyDown,pt=>{const gt=dt.current!=="";!(pt.ctrlKey||pt.altKey||pt.metaKey)&&pt.key.length===1&&st(pt.key),!(gt&&pt.key===" ")&&OPEN_KEYS.includes(pt.key)&&(ft(),pt.preventDefault())})})})});SelectTrigger.displayName=TRIGGER_NAME$1;var VALUE_NAME="SelectValue",SelectValue=reactExports.forwardRef(($,j)=>{const{__scopeSelect:_e,className:et,style:tt,children:nt,placeholder:rt="",...ot}=$,it=useSelectContext(VALUE_NAME,_e),{onValueNodeHasChildrenChange:at}=it,dt=nt!==void 0,st=useComposedRefs(j,it.onValueNodeChange);return useLayoutEffect2(()=>{at(dt)},[at,dt]),jsxRuntimeExports.jsx(Primitive.span,{...ot,ref:st,style:{pointerEvents:"none"},children:shouldShowPlaceholder(it.value)?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:rt}):nt})});SelectValue.displayName=VALUE_NAME;var ICON_NAME="SelectIcon",SelectIcon=reactExports.forwardRef(($,j)=>{const{__scopeSelect:_e,children:et,...tt}=$;return jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...tt,ref:j,children:et||"▼"})});SelectIcon.displayName=ICON_NAME;var PORTAL_NAME$1="SelectPortal",SelectPortal=$=>jsxRuntimeExports.jsx(Portal$4,{asChild:!0,...$});SelectPortal.displayName=PORTAL_NAME$1;var CONTENT_NAME$1="SelectContent",SelectContent=reactExports.forwardRef(($,j)=>{const _e=useSelectContext(CONTENT_NAME$1,$.__scopeSelect),[et,tt]=reactExports.useState();if(useLayoutEffect2(()=>{tt(new DocumentFragment)},[]),!_e.open){const nt=et;return nt?reactDomExports.createPortal(jsxRuntimeExports.jsx(SelectContentProvider,{scope:$.__scopeSelect,children:jsxRuntimeExports.jsx(Collection$1.Slot,{scope:$.__scopeSelect,children:jsxRuntimeExports.jsx("div",{children:$.children})})}),nt):null}return jsxRuntimeExports.jsx(SelectContentImpl,{...$,ref:j})});SelectContent.displayName=CONTENT_NAME$1;var CONTENT_MARGIN=10,[SelectContentProvider,useSelectContentContext]=createSelectContext(CONTENT_NAME$1),CONTENT_IMPL_NAME="SelectContentImpl",SelectContentImpl=reactExports.forwardRef(($,j)=>{const{__scopeSelect:_e,position:et="item-aligned",onCloseAutoFocus:tt,onEscapeKeyDown:nt,onPointerDownOutside:rt,side:ot,sideOffset:it,align:at,alignOffset:dt,arrowPadding:st,collisionBoundary:ut,collisionPadding:ft,sticky:pt,hideWhenDetached:gt,avoidCollisions:yt,...mt}=$,vt=useSelectContext(CONTENT_NAME$1,_e),[_t,St]=reactExports.useState(null),[At,kt]=reactExports.useState(null),bt=useComposedRefs(j,tn=>St(tn)),[Rt,Ot]=reactExports.useState(null),[Ut,Yt]=reactExports.useState(null),rn=useCollection$1(_e),[mn,qt]=reactExports.useState(!1),Zt=reactExports.useRef(!1);reactExports.useEffect(()=>{if(_t)return hideOthers(_t)},[_t]),useFocusGuards();const Jt=reactExports.useCallback(tn=>{const[Cn,...en]=rn().map(xn=>xn.ref.current),[An]=en.slice(-1),Nn=document.activeElement;for(const xn of tn)if(xn===Nn||(xn==null||xn.scrollIntoView({block:"nearest"}),xn===Cn&&At&&(At.scrollTop=0),xn===An&&At&&(At.scrollTop=At.scrollHeight),xn==null||xn.focus(),document.activeElement!==Nn))return},[rn,At]),un=reactExports.useCallback(()=>Jt([Rt,_t]),[Jt,Rt,_t]);reactExports.useEffect(()=>{mn&&un()},[mn,un]);const{onOpenChange:Wt,triggerPointerDownPosRef:Qt}=vt;reactExports.useEffect(()=>{if(_t){let tn={x:0,y:0};const Cn=An=>{var Nn,xn;tn={x:Math.abs(Math.round(An.pageX)-(((Nn=Qt.current)==null?void 0:Nn.x)??0)),y:Math.abs(Math.round(An.pageY)-(((xn=Qt.current)==null?void 0:xn.y)??0))}},en=An=>{tn.x<=10&&tn.y<=10?An.preventDefault():_t.contains(An.target)||Wt(!1),document.removeEventListener("pointermove",Cn),Qt.current=null};return Qt.current!==null&&(document.addEventListener("pointermove",Cn),document.addEventListener("pointerup",en,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Cn),document.removeEventListener("pointerup",en,{capture:!0})}}},[_t,Wt,Qt]),reactExports.useEffect(()=>{const tn=()=>Wt(!1);return window.addEventListener("blur",tn),window.addEventListener("resize",tn),()=>{window.removeEventListener("blur",tn),window.removeEventListener("resize",tn)}},[Wt]);const[on,nn]=useTypeaheadSearch(tn=>{const Cn=rn().filter(Nn=>!Nn.disabled),en=Cn.find(Nn=>Nn.ref.current===document.activeElement),An=findNextItem(Cn,tn,en);An&&setTimeout(()=>An.ref.current.focus())}),cn=reactExports.useCallback((tn,Cn,en)=>{const An=!Zt.current&&!en;(vt.value!==void 0&&vt.value===Cn||An)&&(Ot(tn),An&&(Zt.current=!0))},[vt.value]),Sn=reactExports.useCallback(()=>_t==null?void 0:_t.focus(),[_t]),vn=reactExports.useCallback((tn,Cn,en)=>{const An=!Zt.current&&!en;(vt.value!==void 0&&vt.value===Cn||An)&&Yt(tn)},[vt.value]),En=et==="popper"?SelectPopperPosition:SelectItemAlignedPosition,Rn=En===SelectPopperPosition?{side:ot,sideOffset:it,align:at,alignOffset:dt,arrowPadding:st,collisionBoundary:ut,collisionPadding:ft,sticky:pt,hideWhenDetached:gt,avoidCollisions:yt}:{};return jsxRuntimeExports.jsx(SelectContentProvider,{scope:_e,content:_t,viewport:At,onViewportChange:kt,itemRefCallback:cn,selectedItem:Rt,onItemLeave:Sn,itemTextRefCallback:vn,focusSelectedItem:un,selectedItemText:Ut,position:et,isPositioned:mn,searchRef:on,children:jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot,allowPinchZoom:!0,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:vt.open,onMountAutoFocus:tn=>{tn.preventDefault()},onUnmountAutoFocus:composeEventHandlers(tt,tn=>{var Cn;(Cn=vt.trigger)==null||Cn.focus({preventScroll:!0}),tn.preventDefault()}),children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:nt,onPointerDownOutside:rt,onFocusOutside:tn=>tn.preventDefault(),onDismiss:()=>vt.onOpenChange(!1),children:jsxRuntimeExports.jsx(En,{role:"listbox",id:vt.contentId,"data-state":vt.open?"open":"closed",dir:vt.dir,onContextMenu:tn=>tn.preventDefault(),...mt,...Rn,onPlaced:()=>qt(!0),ref:bt,style:{display:"flex",flexDirection:"column",outline:"none",...mt.style},onKeyDown:composeEventHandlers(mt.onKeyDown,tn=>{const Cn=tn.ctrlKey||tn.altKey||tn.metaKey;if(tn.key==="Tab"&&tn.preventDefault(),!Cn&&tn.key.length===1&&nn(tn.key),["ArrowUp","ArrowDown","Home","End"].includes(tn.key)){let An=rn().filter(Nn=>!Nn.disabled).map(Nn=>Nn.ref.current);if(["ArrowUp","End"].includes(tn.key)&&(An=An.slice().reverse()),["ArrowUp","ArrowDown"].includes(tn.key)){const Nn=tn.target,xn=An.indexOf(Nn);An=An.slice(xn+1)}setTimeout(()=>Jt(An)),tn.preventDefault()}})})})})})})});SelectContentImpl.displayName=CONTENT_IMPL_NAME;var ITEM_ALIGNED_POSITION_NAME="SelectItemAlignedPosition",SelectItemAlignedPosition=reactExports.forwardRef(($,j)=>{const{__scopeSelect:_e,onPlaced:et,...tt}=$,nt=useSelectContext(CONTENT_NAME$1,_e),rt=useSelectContentContext(CONTENT_NAME$1,_e),[ot,it]=reactExports.useState(null),[at,dt]=reactExports.useState(null),st=useComposedRefs(j,bt=>dt(bt)),ut=useCollection$1(_e),ft=reactExports.useRef(!1),pt=reactExports.useRef(!0),{viewport:gt,selectedItem:yt,selectedItemText:mt,focusSelectedItem:vt}=rt,_t=reactExports.useCallback(()=>{if(nt.trigger&&nt.valueNode&&ot&&at&&gt&&yt&&mt){const bt=nt.trigger.getBoundingClientRect(),Rt=at.getBoundingClientRect(),Ot=nt.valueNode.getBoundingClientRect(),Ut=mt.getBoundingClientRect();if(nt.dir!=="rtl"){const Nn=Ut.left-Rt.left,xn=Ot.left-Nn,Bn=bt.left-xn,Gn=bt.width+Bn,Qn=Math.max(Gn,Rt.width),sr=window.innerWidth-CONTENT_MARGIN,cr=clamp$2(xn,[CONTENT_MARGIN,sr-Qn]);ot.style.minWidth=Gn+"px",ot.style.left=cr+"px"}else{const Nn=Rt.right-Ut.right,xn=window.innerWidth-Ot.right-Nn,Bn=window.innerWidth-bt.right-xn,Gn=bt.width+Bn,Qn=Math.max(Gn,Rt.width),sr=window.innerWidth-CONTENT_MARGIN,cr=clamp$2(xn,[CONTENT_MARGIN,sr-Qn]);ot.style.minWidth=Gn+"px",ot.style.right=cr+"px"}const Yt=ut(),rn=window.innerHeight-CONTENT_MARGIN*2,mn=gt.scrollHeight,qt=window.getComputedStyle(at),Zt=parseInt(qt.borderTopWidth,10),Jt=parseInt(qt.paddingTop,10),un=parseInt(qt.borderBottomWidth,10),Wt=parseInt(qt.paddingBottom,10),Qt=Zt+Jt+mn+Wt+un,on=Math.min(yt.offsetHeight*5,Qt),nn=window.getComputedStyle(gt),cn=parseInt(nn.paddingTop,10),Sn=parseInt(nn.paddingBottom,10),vn=bt.top+bt.height/2-CONTENT_MARGIN,En=rn-vn,Rn=yt.offsetHeight/2,tn=yt.offsetTop+Rn,Cn=Zt+Jt+tn,en=Qt-Cn;if(Cn<=vn){const Nn=yt===Yt[Yt.length-1].ref.current;ot.style.bottom="0px";const xn=at.clientHeight-gt.offsetTop-gt.offsetHeight,Bn=Math.max(En,Rn+(Nn?Sn:0)+xn+un),Gn=Cn+Bn;ot.style.height=Gn+"px"}else{const Nn=yt===Yt[0].ref.current;ot.style.top="0px";const Bn=Math.max(vn,Zt+gt.offsetTop+(Nn?cn:0)+Rn)+en;ot.style.height=Bn+"px",gt.scrollTop=Cn-vn+gt.offsetTop}ot.style.margin=`${CONTENT_MARGIN}px 0`,ot.style.minHeight=on+"px",ot.style.maxHeight=rn+"px",et==null||et(),requestAnimationFrame(()=>ft.current=!0)}},[ut,nt.trigger,nt.valueNode,ot,at,gt,yt,mt,nt.dir,et]);useLayoutEffect2(()=>_t(),[_t]);const[St,At]=reactExports.useState();useLayoutEffect2(()=>{at&&At(window.getComputedStyle(at).zIndex)},[at]);const kt=reactExports.useCallback(bt=>{bt&&pt.current===!0&&(_t(),vt==null||vt(),pt.current=!1)},[_t,vt]);return jsxRuntimeExports.jsx(SelectViewportProvider,{scope:_e,contentWrapper:ot,shouldExpandOnScrollRef:ft,onScrollButtonChange:kt,children:jsxRuntimeExports.jsx("div",{ref:it,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:St},children:jsxRuntimeExports.jsx(Primitive.div,{...tt,ref:st,style:{boxSizing:"border-box",maxHeight:"100%",...tt.style}})})})});SelectItemAlignedPosition.displayName=ITEM_ALIGNED_POSITION_NAME;var POPPER_POSITION_NAME="SelectPopperPosition",SelectPopperPosition=reactExports.forwardRef(($,j)=>{const{__scopeSelect:_e,align:et="start",collisionPadding:tt=CONTENT_MARGIN,...nt}=$,rt=usePopperScope$1(_e);return jsxRuntimeExports.jsx(Content,{...rt,...nt,ref:j,align:et,collisionPadding:tt,style:{boxSizing:"border-box",...nt.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});SelectPopperPosition.displayName=POPPER_POSITION_NAME;var[SelectViewportProvider,useSelectViewportContext]=createSelectContext(CONTENT_NAME$1,{}),VIEWPORT_NAME$1="SelectViewport",SelectViewport=reactExports.forwardRef(($,j)=>{const{__scopeSelect:_e,nonce:et,...tt}=$,nt=useSelectContentContext(VIEWPORT_NAME$1,_e),rt=useSelectViewportContext(VIEWPORT_NAME$1,_e),ot=useComposedRefs(j,nt.onViewportChange),it=reactExports.useRef(0);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:et}),jsxRuntimeExports.jsx(Collection$1.Slot,{scope:_e,children:jsxRuntimeExports.jsx(Primitive.div,{"data-radix-select-viewport":"",role:"presentation",...tt,ref:ot,style:{position:"relative",flex:1,overflow:"auto",...tt.style},onScroll:composeEventHandlers(tt.onScroll,at=>{const dt=at.currentTarget,{contentWrapper:st,shouldExpandOnScrollRef:ut}=rt;if(ut!=null&&ut.current&&st){const ft=Math.abs(it.current-dt.scrollTop);if(ft>0){const pt=window.innerHeight-CONTENT_MARGIN*2,gt=parseFloat(st.style.minHeight),yt=parseFloat(st.style.height),mt=Math.max(gt,yt);if(mt<pt){const vt=mt+ft,_t=Math.min(pt,vt),St=vt-_t;st.style.height=_t+"px",st.style.bottom==="0px"&&(dt.scrollTop=St>0?St:0,st.style.justifyContent="flex-end")}}}it.current=dt.scrollTop})})})]})});SelectViewport.displayName=VIEWPORT_NAME$1;var GROUP_NAME="SelectGroup",[SelectGroupContextProvider,useSelectGroupContext]=createSelectContext(GROUP_NAME),SelectGroup=reactExports.forwardRef(($,j)=>{const{__scopeSelect:_e,...et}=$,tt=useId();return jsxRuntimeExports.jsx(SelectGroupContextProvider,{scope:_e,id:tt,children:jsxRuntimeExports.jsx(Primitive.div,{role:"group","aria-labelledby":tt,...et,ref:j})})});SelectGroup.displayName=GROUP_NAME;var LABEL_NAME="SelectLabel",SelectLabel=reactExports.forwardRef(($,j)=>{const{__scopeSelect:_e,...et}=$,tt=useSelectGroupContext(LABEL_NAME,_e);return jsxRuntimeExports.jsx(Primitive.div,{id:tt.id,...et,ref:j})});SelectLabel.displayName=LABEL_NAME;var ITEM_NAME="SelectItem",[SelectItemContextProvider,useSelectItemContext]=createSelectContext(ITEM_NAME),SelectItem$1=reactExports.forwardRef(($,j)=>{const{__scopeSelect:_e,value:et,disabled:tt=!1,textValue:nt,...rt}=$,ot=useSelectContext(ITEM_NAME,_e),it=useSelectContentContext(ITEM_NAME,_e),at=ot.value===et,[dt,st]=reactExports.useState(nt??""),[ut,ft]=reactExports.useState(!1),pt=useComposedRefs(j,mt=>{var vt;return(vt=it.itemRefCallback)==null?void 0:vt.call(it,mt,et,tt)}),gt=useId(),yt=()=>{tt||(ot.onValueChange(et),ot.onOpenChange(!1))};if(et==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return jsxRuntimeExports.jsx(SelectItemContextProvider,{scope:_e,value:et,disabled:tt,textId:gt,isSelected:at,onItemTextChange:reactExports.useCallback(mt=>{st(vt=>vt||((mt==null?void 0:mt.textContent)??"").trim())},[]),children:jsxRuntimeExports.jsx(Collection$1.ItemSlot,{scope:_e,value:et,disabled:tt,textValue:dt,children:jsxRuntimeExports.jsx(Primitive.div,{role:"option","aria-labelledby":gt,"data-highlighted":ut?"":void 0,"aria-selected":at&&ut,"data-state":at?"checked":"unchecked","aria-disabled":tt||void 0,"data-disabled":tt?"":void 0,tabIndex:tt?void 0:-1,...rt,ref:pt,onFocus:composeEventHandlers(rt.onFocus,()=>ft(!0)),onBlur:composeEventHandlers(rt.onBlur,()=>ft(!1)),onPointerUp:composeEventHandlers(rt.onPointerUp,yt),onPointerMove:composeEventHandlers(rt.onPointerMove,mt=>{var vt;tt?(vt=it.onItemLeave)==null||vt.call(it):mt.currentTarget.focus({preventScroll:!0})}),onPointerLeave:composeEventHandlers(rt.onPointerLeave,mt=>{var vt;mt.currentTarget===document.activeElement&&((vt=it.onItemLeave)==null||vt.call(it))}),onKeyDown:composeEventHandlers(rt.onKeyDown,mt=>{var _t;((_t=it.searchRef)==null?void 0:_t.current)!==""&&mt.key===" "||(SELECTION_KEYS.includes(mt.key)&&yt(),mt.key===" "&&mt.preventDefault())})})})})});SelectItem$1.displayName=ITEM_NAME;var ITEM_TEXT_NAME="SelectItemText",SelectItemText=reactExports.forwardRef(($,j)=>{const{__scopeSelect:_e,className:et,style:tt,...nt}=$,rt=useSelectContext(ITEM_TEXT_NAME,_e),ot=useSelectContentContext(ITEM_TEXT_NAME,_e),it=useSelectItemContext(ITEM_TEXT_NAME,_e),at=useSelectNativeOptionsContext(ITEM_TEXT_NAME,_e),[dt,st]=reactExports.useState(null),ut=useComposedRefs(j,mt=>st(mt),it.onItemTextChange,mt=>{var vt;return(vt=ot.itemTextRefCallback)==null?void 0:vt.call(ot,mt,it.value,it.disabled)}),ft=dt==null?void 0:dt.textContent,pt=reactExports.useMemo(()=>jsxRuntimeExports.jsx("option",{value:it.value,disabled:it.disabled,children:ft},it.value),[it.disabled,it.value,ft]),{onNativeOptionAdd:gt,onNativeOptionRemove:yt}=at;return useLayoutEffect2(()=>(gt(pt),()=>yt(pt)),[gt,yt,pt]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Primitive.span,{id:it.textId,...nt,ref:ut}),it.isSelected&&rt.valueNode&&!rt.valueNodeHasChildren?reactDomExports.createPortal(nt.children,rt.valueNode):null]})});SelectItemText.displayName=ITEM_TEXT_NAME;var ITEM_INDICATOR_NAME="SelectItemIndicator",SelectItemIndicator=reactExports.forwardRef(($,j)=>{const{__scopeSelect:_e,...et}=$;return useSelectItemContext(ITEM_INDICATOR_NAME,_e).isSelected?jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...et,ref:j}):null});SelectItemIndicator.displayName=ITEM_INDICATOR_NAME;var SCROLL_UP_BUTTON_NAME="SelectScrollUpButton",SelectScrollUpButton=reactExports.forwardRef(($,j)=>{const _e=useSelectContentContext(SCROLL_UP_BUTTON_NAME,$.__scopeSelect),et=useSelectViewportContext(SCROLL_UP_BUTTON_NAME,$.__scopeSelect),[tt,nt]=reactExports.useState(!1),rt=useComposedRefs(j,et.onScrollButtonChange);return useLayoutEffect2(()=>{if(_e.viewport&&_e.isPositioned){let ot=function(){const at=it.scrollTop>0;nt(at)};const it=_e.viewport;return ot(),it.addEventListener("scroll",ot),()=>it.removeEventListener("scroll",ot)}},[_e.viewport,_e.isPositioned]),tt?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{...$,ref:rt,onAutoScroll:()=>{const{viewport:ot,selectedItem:it}=_e;ot&&it&&(ot.scrollTop=ot.scrollTop-it.offsetHeight)}}):null});SelectScrollUpButton.displayName=SCROLL_UP_BUTTON_NAME;var SCROLL_DOWN_BUTTON_NAME="SelectScrollDownButton",SelectScrollDownButton=reactExports.forwardRef(($,j)=>{const _e=useSelectContentContext(SCROLL_DOWN_BUTTON_NAME,$.__scopeSelect),et=useSelectViewportContext(SCROLL_DOWN_BUTTON_NAME,$.__scopeSelect),[tt,nt]=reactExports.useState(!1),rt=useComposedRefs(j,et.onScrollButtonChange);return useLayoutEffect2(()=>{if(_e.viewport&&_e.isPositioned){let ot=function(){const at=it.scrollHeight-it.clientHeight,dt=Math.ceil(it.scrollTop)<at;nt(dt)};const it=_e.viewport;return ot(),it.addEventListener("scroll",ot),()=>it.removeEventListener("scroll",ot)}},[_e.viewport,_e.isPositioned]),tt?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{...$,ref:rt,onAutoScroll:()=>{const{viewport:ot,selectedItem:it}=_e;ot&&it&&(ot.scrollTop=ot.scrollTop+it.offsetHeight)}}):null});SelectScrollDownButton.displayName=SCROLL_DOWN_BUTTON_NAME;var SelectScrollButtonImpl=reactExports.forwardRef(($,j)=>{const{__scopeSelect:_e,onAutoScroll:et,...tt}=$,nt=useSelectContentContext("SelectScrollButton",_e),rt=reactExports.useRef(null),ot=useCollection$1(_e),it=reactExports.useCallback(()=>{rt.current!==null&&(window.clearInterval(rt.current),rt.current=null)},[]);return reactExports.useEffect(()=>()=>it(),[it]),useLayoutEffect2(()=>{var dt;const at=ot().find(st=>st.ref.current===document.activeElement);(dt=at==null?void 0:at.ref.current)==null||dt.scrollIntoView({block:"nearest"})},[ot]),jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...tt,ref:j,style:{flexShrink:0,...tt.style},onPointerDown:composeEventHandlers(tt.onPointerDown,()=>{rt.current===null&&(rt.current=window.setInterval(et,50))}),onPointerMove:composeEventHandlers(tt.onPointerMove,()=>{var at;(at=nt.onItemLeave)==null||at.call(nt),rt.current===null&&(rt.current=window.setInterval(et,50))}),onPointerLeave:composeEventHandlers(tt.onPointerLeave,()=>{it()})})}),SEPARATOR_NAME="SelectSeparator",SelectSeparator=reactExports.forwardRef(($,j)=>{const{__scopeSelect:_e,...et}=$;return jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...et,ref:j})});SelectSeparator.displayName=SEPARATOR_NAME;var ARROW_NAME$1="SelectArrow",SelectArrow=reactExports.forwardRef(($,j)=>{const{__scopeSelect:_e,...et}=$,tt=usePopperScope$1(_e),nt=useSelectContext(ARROW_NAME$1,_e),rt=useSelectContentContext(ARROW_NAME$1,_e);return nt.open&&rt.position==="popper"?jsxRuntimeExports.jsx(Arrow,{...tt,...et,ref:j}):null});SelectArrow.displayName=ARROW_NAME$1;function shouldShowPlaceholder($){return $===""||$===void 0}var BubbleSelect=reactExports.forwardRef(($,j)=>{const{value:_e,...et}=$,tt=reactExports.useRef(null),nt=useComposedRefs(j,tt),rt=usePrevious(_e);return reactExports.useEffect(()=>{const ot=tt.current,it=window.HTMLSelectElement.prototype,dt=Object.getOwnPropertyDescriptor(it,"value").set;if(rt!==_e&&dt){const st=new Event("change",{bubbles:!0});dt.call(ot,_e),ot.dispatchEvent(st)}},[rt,_e]),jsxRuntimeExports.jsx(VisuallyHidden,{asChild:!0,children:jsxRuntimeExports.jsx("select",{...et,ref:nt,defaultValue:_e})})});BubbleSelect.displayName="BubbleSelect";function useTypeaheadSearch($){const j=useCallbackRef$1($),_e=reactExports.useRef(""),et=reactExports.useRef(0),tt=reactExports.useCallback(rt=>{const ot=_e.current+rt;j(ot),function it(at){_e.current=at,window.clearTimeout(et.current),at!==""&&(et.current=window.setTimeout(()=>it(""),1e3))}(ot)},[j]),nt=reactExports.useCallback(()=>{_e.current="",window.clearTimeout(et.current)},[]);return reactExports.useEffect(()=>()=>window.clearTimeout(et.current),[]),[_e,tt,nt]}function findNextItem($,j,_e){const tt=j.length>1&&Array.from(j).every(at=>at===j[0])?j[0]:j,nt=_e?$.indexOf(_e):-1;let rt=wrapArray($,Math.max(nt,0));tt.length===1&&(rt=rt.filter(at=>at!==_e));const it=rt.find(at=>at.textValue.toLowerCase().startsWith(tt.toLowerCase()));return it!==_e?it:void 0}function wrapArray($,j){return $.map((_e,et)=>$[(j+et)%$.length])}var Root2$1=Select$1,Trigger$1=SelectTrigger,Value=SelectValue,Icon=SelectIcon,Portal$1=SelectPortal,Content2$1=SelectContent,Viewport$1=SelectViewport,Item=SelectItem$1,ItemText=SelectItemText,ItemIndicator=SelectItemIndicator,ScrollUpButton=SelectScrollUpButton,ScrollDownButton=SelectScrollDownButton;const SelectItem=({children:$,...j})=>jsxRuntimeExports.jsxs(Item,{className:"q-select-item",...j,children:[jsxRuntimeExports.jsx(ItemText,{children:$}),jsxRuntimeExports.jsx(ItemIndicator,{className:"q-select-item-indicator",children:jsxRuntimeExports.jsx(CheckIcon,{})})]}),Select=({options:$,placeholder:j,label:_e,value:et,name:tt,onValueChange:nt})=>jsxRuntimeExports.jsxs(Root2$1,{value:et,onValueChange:nt,name:tt,children:[jsxRuntimeExports.jsxs(Trigger$1,{className:"q-select","aria-label":_e,children:[jsxRuntimeExports.jsx(Value,{placeholder:j}),jsxRuntimeExports.jsx(Icon,{className:"q-select-icon",children:jsxRuntimeExports.jsx(ChevronDownIcon,{})})]}),jsxRuntimeExports.jsx(Portal$1,{children:jsxRuntimeExports.jsxs(Content2$1,{className:"q-select-content",children:[jsxRuntimeExports.jsx(ScrollUpButton,{className:"q-select-scroll-button",children:jsxRuntimeExports.jsx(ChevronUpIcon,{})}),jsxRuntimeExports.jsx(Viewport$1,{className:"SelectViewport",children:$.map(rt=>jsxRuntimeExports.jsx(SelectItem,{value:rt.value,children:rt.label},rt.value))}),jsxRuntimeExports.jsx(ScrollDownButton,{className:"q-select-scroll-button",children:jsxRuntimeExports.jsx(ChevronDownIcon,{})})]})})]});var[createTooltipContext,createTooltipScope]=createContextScope("Tooltip",[createPopperScope]),usePopperScope=createPopperScope(),PROVIDER_NAME$1="TooltipProvider",DEFAULT_DELAY_DURATION=700,TOOLTIP_OPEN="tooltip.open",[TooltipProviderContextProvider,useTooltipProviderContext]=createTooltipContext(PROVIDER_NAME$1),TooltipProvider=$=>{const{__scopeTooltip:j,delayDuration:_e=DEFAULT_DELAY_DURATION,skipDelayDuration:et=300,disableHoverableContent:tt=!1,children:nt}=$,[rt,ot]=reactExports.useState(!0),it=reactExports.useRef(!1),at=reactExports.useRef(0);return reactExports.useEffect(()=>{const dt=at.current;return()=>window.clearTimeout(dt)},[]),jsxRuntimeExports.jsx(TooltipProviderContextProvider,{scope:j,isOpenDelayed:rt,delayDuration:_e,onOpen:reactExports.useCallback(()=>{window.clearTimeout(at.current),ot(!1)},[]),onClose:reactExports.useCallback(()=>{window.clearTimeout(at.current),at.current=window.setTimeout(()=>ot(!0),et)},[et]),isPointerInTransitRef:it,onPointerInTransitChange:reactExports.useCallback(dt=>{it.current=dt},[]),disableHoverableContent:tt,children:nt})};TooltipProvider.displayName=PROVIDER_NAME$1;var TOOLTIP_NAME="Tooltip",[TooltipContextProvider,useTooltipContext]=createTooltipContext(TOOLTIP_NAME),Tooltip$1=$=>{const{__scopeTooltip:j,children:_e,open:et,defaultOpen:tt=!1,onOpenChange:nt,disableHoverableContent:rt,delayDuration:ot}=$,it=useTooltipProviderContext(TOOLTIP_NAME,$.__scopeTooltip),at=usePopperScope(j),[dt,st]=reactExports.useState(null),ut=useId(),ft=reactExports.useRef(0),pt=rt??it.disableHoverableContent,gt=ot??it.delayDuration,yt=reactExports.useRef(!1),[mt=!1,vt]=useControllableState({prop:et,defaultProp:tt,onChange:bt=>{bt?(it.onOpen(),document.dispatchEvent(new CustomEvent(TOOLTIP_OPEN))):it.onClose(),nt==null||nt(bt)}}),_t=reactExports.useMemo(()=>mt?yt.current?"delayed-open":"instant-open":"closed",[mt]),St=reactExports.useCallback(()=>{window.clearTimeout(ft.current),yt.current=!1,vt(!0)},[vt]),At=reactExports.useCallback(()=>{window.clearTimeout(ft.current),vt(!1)},[vt]),kt=reactExports.useCallback(()=>{window.clearTimeout(ft.current),ft.current=window.setTimeout(()=>{yt.current=!0,vt(!0)},gt)},[gt,vt]);return reactExports.useEffect(()=>()=>window.clearTimeout(ft.current),[]),jsxRuntimeExports.jsx(Root2$4,{...at,children:jsxRuntimeExports.jsx(TooltipContextProvider,{scope:j,contentId:ut,open:mt,stateAttribute:_t,trigger:dt,onTriggerChange:st,onTriggerEnter:reactExports.useCallback(()=>{it.isOpenDelayed?kt():St()},[it.isOpenDelayed,kt,St]),onTriggerLeave:reactExports.useCallback(()=>{pt?At():window.clearTimeout(ft.current)},[At,pt]),onOpen:St,onClose:At,disableHoverableContent:pt,children:_e})})};Tooltip$1.displayName=TOOLTIP_NAME;var TRIGGER_NAME="TooltipTrigger",TooltipTrigger=reactExports.forwardRef(($,j)=>{const{__scopeTooltip:_e,...et}=$,tt=useTooltipContext(TRIGGER_NAME,_e),nt=useTooltipProviderContext(TRIGGER_NAME,_e),rt=usePopperScope(_e),ot=reactExports.useRef(null),it=useComposedRefs(j,ot,tt.onTriggerChange),at=reactExports.useRef(!1),dt=reactExports.useRef(!1),st=reactExports.useCallback(()=>at.current=!1,[]);return reactExports.useEffect(()=>()=>document.removeEventListener("pointerup",st),[st]),jsxRuntimeExports.jsx(Anchor,{asChild:!0,...rt,children:jsxRuntimeExports.jsx(Primitive.button,{"aria-describedby":tt.open?tt.contentId:void 0,"data-state":tt.stateAttribute,...et,ref:it,onPointerMove:composeEventHandlers($.onPointerMove,ut=>{ut.pointerType!=="touch"&&!dt.current&&!nt.isPointerInTransitRef.current&&(tt.onTriggerEnter(),dt.current=!0)}),onPointerLeave:composeEventHandlers($.onPointerLeave,()=>{tt.onTriggerLeave(),dt.current=!1}),onPointerDown:composeEventHandlers($.onPointerDown,()=>{at.current=!0,document.addEventListener("pointerup",st,{once:!0})}),onFocus:composeEventHandlers($.onFocus,()=>{at.current||tt.onOpen()}),onBlur:composeEventHandlers($.onBlur,tt.onClose),onClick:composeEventHandlers($.onClick,tt.onClose)})})});TooltipTrigger.displayName=TRIGGER_NAME;var PORTAL_NAME="TooltipPortal",[PortalProvider,usePortalContext]=createTooltipContext(PORTAL_NAME,{forceMount:void 0}),TooltipPortal=$=>{const{__scopeTooltip:j,forceMount:_e,children:et,container:tt}=$,nt=useTooltipContext(PORTAL_NAME,j);return jsxRuntimeExports.jsx(PortalProvider,{scope:j,forceMount:_e,children:jsxRuntimeExports.jsx(Presence,{present:_e||nt.open,children:jsxRuntimeExports.jsx(Portal$4,{asChild:!0,container:tt,children:et})})})};TooltipPortal.displayName=PORTAL_NAME;var CONTENT_NAME="TooltipContent",TooltipContent=reactExports.forwardRef(($,j)=>{const _e=usePortalContext(CONTENT_NAME,$.__scopeTooltip),{forceMount:et=_e.forceMount,side:tt="top",...nt}=$,rt=useTooltipContext(CONTENT_NAME,$.__scopeTooltip);return jsxRuntimeExports.jsx(Presence,{present:et||rt.open,children:rt.disableHoverableContent?jsxRuntimeExports.jsx(TooltipContentImpl,{side:tt,...nt,ref:j}):jsxRuntimeExports.jsx(TooltipContentHoverable,{side:tt,...nt,ref:j})})}),TooltipContentHoverable=reactExports.forwardRef(($,j)=>{const _e=useTooltipContext(CONTENT_NAME,$.__scopeTooltip),et=useTooltipProviderContext(CONTENT_NAME,$.__scopeTooltip),tt=reactExports.useRef(null),nt=useComposedRefs(j,tt),[rt,ot]=reactExports.useState(null),{trigger:it,onClose:at}=_e,dt=tt.current,{onPointerInTransitChange:st}=et,ut=reactExports.useCallback(()=>{ot(null),st(!1)},[st]),ft=reactExports.useCallback((pt,gt)=>{const yt=pt.currentTarget,mt={x:pt.clientX,y:pt.clientY},vt=getExitSideFromRect(mt,yt.getBoundingClientRect()),_t=getPaddedExitPoints(mt,vt),St=getPointsFromRect(gt.getBoundingClientRect()),At=getHull([..._t,...St]);ot(At),st(!0)},[st]);return reactExports.useEffect(()=>()=>ut(),[ut]),reactExports.useEffect(()=>{if(it&&dt){const pt=yt=>ft(yt,dt),gt=yt=>ft(yt,it);return it.addEventListener("pointerleave",pt),dt.addEventListener("pointerleave",gt),()=>{it.removeEventListener("pointerleave",pt),dt.removeEventListener("pointerleave",gt)}}},[it,dt,ft,ut]),reactExports.useEffect(()=>{if(rt){const pt=gt=>{const yt=gt.target,mt={x:gt.clientX,y:gt.clientY},vt=(it==null?void 0:it.contains(yt))||(dt==null?void 0:dt.contains(yt)),_t=!isPointInPolygon(mt,rt);vt?ut():_t&&(ut(),at())};return document.addEventListener("pointermove",pt),()=>document.removeEventListener("pointermove",pt)}},[it,dt,rt,at,ut]),jsxRuntimeExports.jsx(TooltipContentImpl,{...$,ref:nt})}),[VisuallyHiddenContentContextProvider,useVisuallyHiddenContentContext]=createTooltipContext(TOOLTIP_NAME,{isInside:!1}),TooltipContentImpl=reactExports.forwardRef(($,j)=>{const{__scopeTooltip:_e,children:et,"aria-label":tt,onEscapeKeyDown:nt,onPointerDownOutside:rt,...ot}=$,it=useTooltipContext(CONTENT_NAME,_e),at=usePopperScope(_e),{onClose:dt}=it;return reactExports.useEffect(()=>(document.addEventListener(TOOLTIP_OPEN,dt),()=>document.removeEventListener(TOOLTIP_OPEN,dt)),[dt]),reactExports.useEffect(()=>{if(it.trigger){const st=ut=>{const ft=ut.target;ft!=null&&ft.contains(it.trigger)&&dt()};return window.addEventListener("scroll",st,{capture:!0}),()=>window.removeEventListener("scroll",st,{capture:!0})}},[it.trigger,dt]),jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:nt,onPointerDownOutside:rt,onFocusOutside:st=>st.preventDefault(),onDismiss:dt,children:jsxRuntimeExports.jsxs(Content,{"data-state":it.stateAttribute,...at,...ot,ref:j,style:{...ot.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[jsxRuntimeExports.jsx(Slottable,{children:et}),jsxRuntimeExports.jsx(VisuallyHiddenContentContextProvider,{scope:_e,isInside:!0,children:jsxRuntimeExports.jsx(Root$1,{id:it.contentId,role:"tooltip",children:tt||et})})]})})});TooltipContent.displayName=CONTENT_NAME;var ARROW_NAME="TooltipArrow",TooltipArrow=reactExports.forwardRef(($,j)=>{const{__scopeTooltip:_e,...et}=$,tt=usePopperScope(_e);return useVisuallyHiddenContentContext(ARROW_NAME,_e).isInside?null:jsxRuntimeExports.jsx(Arrow,{...tt,...et,ref:j})});TooltipArrow.displayName=ARROW_NAME;function getExitSideFromRect($,j){const _e=Math.abs(j.top-$.y),et=Math.abs(j.bottom-$.y),tt=Math.abs(j.right-$.x),nt=Math.abs(j.left-$.x);switch(Math.min(_e,et,tt,nt)){case nt:return"left";case tt:return"right";case _e:return"top";case et:return"bottom";default:throw new Error("unreachable")}}function getPaddedExitPoints($,j,_e=5){const et=[];switch(j){case"top":et.push({x:$.x-_e,y:$.y+_e},{x:$.x+_e,y:$.y+_e});break;case"bottom":et.push({x:$.x-_e,y:$.y-_e},{x:$.x+_e,y:$.y-_e});break;case"left":et.push({x:$.x+_e,y:$.y-_e},{x:$.x+_e,y:$.y+_e});break;case"right":et.push({x:$.x-_e,y:$.y-_e},{x:$.x-_e,y:$.y+_e});break}return et}function getPointsFromRect($){const{top:j,right:_e,bottom:et,left:tt}=$;return[{x:tt,y:j},{x:_e,y:j},{x:_e,y:et},{x:tt,y:et}]}function isPointInPolygon($,j){const{x:_e,y:et}=$;let tt=!1;for(let nt=0,rt=j.length-1;nt<j.length;rt=nt++){const ot=j[nt].x,it=j[nt].y,at=j[rt].x,dt=j[rt].y;it>et!=dt>et&&_e<(at-ot)*(et-it)/(dt-it)+ot&&(tt=!tt)}return tt}function getHull($){const j=$.slice();return j.sort((_e,et)=>_e.x<et.x?-1:_e.x>et.x?1:_e.y<et.y?-1:_e.y>et.y?1:0),getHullPresorted(j)}function getHullPresorted($){if($.length<=1)return $.slice();const j=[];for(let et=0;et<$.length;et++){const tt=$[et];for(;j.length>=2;){const nt=j[j.length-1],rt=j[j.length-2];if((nt.x-rt.x)*(tt.y-rt.y)>=(nt.y-rt.y)*(tt.x-rt.x))j.pop();else break}j.push(tt)}j.pop();const _e=[];for(let et=$.length-1;et>=0;et--){const tt=$[et];for(;_e.length>=2;){const nt=_e[_e.length-1],rt=_e[_e.length-2];if((nt.x-rt.x)*(tt.y-rt.y)>=(nt.y-rt.y)*(tt.x-rt.x))_e.pop();else break}_e.push(tt)}return _e.pop(),j.length===1&&_e.length===1&&j[0].x===_e[0].x&&j[0].y===_e[0].y?j:j.concat(_e)}var Provider$1=TooltipProvider,Root3=Tooltip$1,Trigger=TooltipTrigger,Portal=TooltipPortal,Content2=TooltipContent,Arrow2=TooltipArrow;const Tooltip=({children:$,content:j})=>jsxRuntimeExports.jsx(Provider$1,{children:jsxRuntimeExports.jsxs(Root3,{children:[jsxRuntimeExports.jsx(Trigger,{asChild:!0,children:$}),jsxRuntimeExports.jsx(Portal,{container:document.getElementById("portal-container"),children:jsxRuntimeExports.jsxs(Content2,{className:"q-tooltip",sideOffset:5,children:[j,jsxRuntimeExports.jsx(Arrow2,{className:"q-tooltip-arrow"})]})})]})});var SWITCH_NAME="Switch",[createSwitchContext,createSwitchScope]=createContextScope(SWITCH_NAME),[SwitchProvider,useSwitchContext]=createSwitchContext(SWITCH_NAME),Switch$1=reactExports.forwardRef(($,j)=>{const{__scopeSwitch:_e,name:et,checked:tt,defaultChecked:nt,required:rt,disabled:ot,value:it="on",onCheckedChange:at,...dt}=$,[st,ut]=reactExports.useState(null),ft=useComposedRefs(j,vt=>ut(vt)),pt=reactExports.useRef(!1),gt=st?!!st.closest("form"):!0,[yt=!1,mt]=useControllableState({prop:tt,defaultProp:nt,onChange:at});return jsxRuntimeExports.jsxs(SwitchProvider,{scope:_e,checked:yt,disabled:ot,children:[jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"switch","aria-checked":yt,"aria-required":rt,"data-state":getState(yt),"data-disabled":ot?"":void 0,disabled:ot,value:it,...dt,ref:ft,onClick:composeEventHandlers($.onClick,vt=>{mt(_t=>!_t),gt&&(pt.current=vt.isPropagationStopped(),pt.current||vt.stopPropagation())})}),gt&&jsxRuntimeExports.jsx(BubbleInput,{control:st,bubbles:!pt.current,name:et,value:it,checked:yt,required:rt,disabled:ot,style:{transform:"translateX(-100%)"}})]})});Switch$1.displayName=SWITCH_NAME;var THUMB_NAME="SwitchThumb",SwitchThumb=reactExports.forwardRef(($,j)=>{const{__scopeSwitch:_e,...et}=$,tt=useSwitchContext(THUMB_NAME,_e);return jsxRuntimeExports.jsx(Primitive.span,{"data-state":getState(tt.checked),"data-disabled":tt.disabled?"":void 0,...et,ref:j})});SwitchThumb.displayName=THUMB_NAME;var BubbleInput=$=>{const{control:j,checked:_e,bubbles:et=!0,...tt}=$,nt=reactExports.useRef(null),rt=usePrevious(_e),ot=useSize(j);return reactExports.useEffect(()=>{const it=nt.current,at=window.HTMLInputElement.prototype,st=Object.getOwnPropertyDescriptor(at,"checked").set;if(rt!==_e&&st){const ut=new Event("click",{bubbles:et});st.call(it,_e),it.dispatchEvent(ut)}},[rt,_e,et]),jsxRuntimeExports.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:_e,...tt,tabIndex:-1,ref:nt,style:{...$.style,...ot,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function getState($){return $?"checked":"unchecked"}var Root=Switch$1,Thumb=SwitchThumb;const Switch=({checked:$,disabled:j,onChange:_e})=>jsxRuntimeExports.jsx(Root,{className:"q-switch",checked:$,disabled:j,onCheckedChange:_e,children:jsxRuntimeExports.jsx(Thumb,{className:"q-switch-thumb"})}),sortOptions=[{label:"Title",value:"title"},{label:"Size",value:"file_size"},{label:"Last Updated",value:"mod_date"}];loadQspCatalog();const QspCatalog=()=>{const{t:$}=useTranslation(),j=useAtom_2(catalogLoading$),_e=useAtom_2(qspCatalogPreparedList$),et=useAtom_2(qspAuthors$),tt=useAtom_2(qspAuthorFilter$),nt=useAtom_2(qspSortByField$),rt=useAtom_2(qspSortDirection$),ot=useAtom_2(qspTitleSearch$),it=useAtom_2(onlyAero$);return(j==="pending"||j==="loading")&&!_e.length?jsxRuntimeExports.jsx(QspiderLoader,{}):j==="failed"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[$("Loading failed"),jsxRuntimeExports.jsx("button",{onClick:()=>{loadQspCatalog()},children:$("Retry")})]}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"q-catalog__filterbar",children:[jsxRuntimeExports.jsxs("div",{className:"q-catalog__filterbar-block",children:[jsxRuntimeExports.jsxs("label",{children:[$("Filter by Author"),":"]}),jsxRuntimeExports.jsxs("div",{className:"q-catalog__filterbar-group",children:[jsxRuntimeExports.jsx(Select,{name:"author-filter",options:et.map(at=>({label:at,value:at})),placeholder:"",label:"Author",value:tt,onValueChange:at=>qspAuthorFilter$.set(at)}),tt?jsxRuntimeExports.jsx(Tooltip,{content:$("Clear Author filter"),children:jsxRuntimeExports.jsx("button",{className:"q-ghost-button","aria-label":$("Clear Author filter")??"",onClick:()=>qspAuthorFilter$.set(""),children:jsxRuntimeExports.jsx(Cross1Icon,{})})}):null]})]}),jsxRuntimeExports.jsxs("div",{className:"q-catalog__filterbar-block",children:[jsxRuntimeExports.jsxs("label",{children:[$("Sort by"),":"]}),jsxRuntimeExports.jsxs("div",{className:"q-catalog__filterbar-group",children:[jsxRuntimeExports.jsx(Select,{options:sortOptions.map(at=>({...at,label:$(at.label)})),placeholder:$("Sort by"),label:$("Sort field"),value:nt,onValueChange:at=>qspSortByField$.set(at)}),jsxRuntimeExports.jsx(Tooltip,{content:rt==="asc"?$("Sort Ascending")||"":$("Sort Descending")||"",children:jsxRuntimeExports.jsx("button",{className:"q-ghost-button",onClick:toggleSortDirection,"aria-label":rt==="asc"?$("Sort Ascending")||"":$("Sort Descending")||"",children:rt==="asc"?jsxRuntimeExports.jsx(DoubleArrowDownIcon,{}):jsxRuntimeExports.jsx(DoubleArrowUpIcon,{})})})]})]}),jsxRuntimeExports.jsxs("div",{className:"q-catalog__filterbar-block",children:[jsxRuntimeExports.jsx("label",{htmlFor:"only-aero",children:$("Aero games")}),jsxRuntimeExports.jsx(Switch,{checked:it,onChange:at=>onlyAero$.set(at)})]}),jsxRuntimeExports.jsxs("div",{className:"q-catalog__filterbar-block",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"search-input",children:[$("Search"),":"]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("input",{name:"search-input",type:"text",className:"q-input",value:ot,onInput:at=>qspTitleSearch$.set(at.target.value)})})]})]}),jsxRuntimeExports.jsx("div",{className:"q-catalog__list",children:_e.map(at=>jsxRuntimeExports.jsx(CatalogGameCard,{game:at},at.id))})]})},QspiderThemeSwitch=()=>{const{t:$}=useTranslation();return jsxRuntimeExports.jsx(Tooltip,{content:$("Toggle theme")??"",children:jsxRuntimeExports.jsx("button",{className:"q-ghost-button","aria-label":$("toggle a light and dark color scheme")??"",onClick:toggleTheme,children:jsxRuntimeExports.jsx(SunIcon,{})})})},LocaleSelector=()=>{const{i18n:$}=useTranslation();return jsxRuntimeExports.jsx(Select,{options:locales$1,placeholder:"",label:"",value:$.language,onValueChange:j=>{$.changeLanguage(j)}})},QspiderPlayer=()=>{const{t:$}=useTranslation(),j=useComponent(ProvidedComponents.OpenGameButton),_e=useAtom_2(currentMode$);return jsxRuntimeExports.jsxs("div",{className:"qspider-player",children:[jsxRuntimeExports.jsxs("nav",{className:"qspider-navbar",children:[jsxRuntimeExports.jsx("div",{className:"qspider-logo",children:"spider"}),jsxRuntimeExports.jsxs("div",{className:"qspider-nav",children:[jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:"#",onClick:et=>{et.preventDefault(),navigateTo("")},className:_e==="shelf"?"qspider-active":"",children:$("Game Shelf")})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:"#",onClick:et=>{et.preventDefault(),navigateTo("catalog")},className:_e==="catalog"?"qspider-active":"",children:$("Qsp Game Catalog")})})]}),jsxRuntimeExports.jsxs("div",{className:"qspider-block",children:[jsxRuntimeExports.jsx(j,{}),jsxRuntimeExports.jsx(LocaleSelector,{}),jsxRuntimeExports.jsx(QspiderThemeSwitch,{})]})]})]}),jsxRuntimeExports.jsxs("main",{className:"qspider-player-main",children:[_e==="shelf"&&jsxRuntimeExports.jsx(GameShelf,{}),_e==="catalog"&&jsxRuntimeExports.jsx(QspCatalog,{})]})]})},PlayerWithShelf=()=>useAtom_2(currentMode$)==="game"?jsxRuntimeExports.jsx(GameRunner,{}):jsxRuntimeExports.jsx(QspiderPlayer,{});var PROVIDER_NAME="ToastProvider",[Collection,useCollection,createCollectionScope]=createCollection("Toast"),[createToastContext,createToastScope]=createContextScope("Toast",[createCollectionScope]),[ToastProviderProvider,useToastProviderContext]=createToastContext(PROVIDER_NAME),ToastProvider=$=>{const{__scopeToast:j,label:_e="Notification",duration:et=5e3,swipeDirection:tt="right",swipeThreshold:nt=50,children:rt}=$,[ot,it]=reactExports.useState(null),[at,dt]=reactExports.useState(0),st=reactExports.useRef(!1),ut=reactExports.useRef(!1);return _e.trim()||console.error(`Invalid prop \`label\` supplied to \`${PROVIDER_NAME}\`. Expected non-empty \`string\`.`),jsxRuntimeExports.jsx(Collection.Provider,{scope:j,children:jsxRuntimeExports.jsx(ToastProviderProvider,{scope:j,label:_e,duration:et,swipeDirection:tt,swipeThreshold:nt,toastCount:at,viewport:ot,onViewportChange:it,onToastAdd:reactExports.useCallback(()=>dt(ft=>ft+1),[]),onToastRemove:reactExports.useCallback(()=>dt(ft=>ft-1),[]),isFocusedToastEscapeKeyDownRef:st,isClosePausedRef:ut,children:rt})})};ToastProvider.displayName=PROVIDER_NAME;var VIEWPORT_NAME="ToastViewport",VIEWPORT_DEFAULT_HOTKEY=["F8"],VIEWPORT_PAUSE="toast.viewportPause",VIEWPORT_RESUME="toast.viewportResume",ToastViewport=reactExports.forwardRef(($,j)=>{const{__scopeToast:_e,hotkey:et=VIEWPORT_DEFAULT_HOTKEY,label:tt="Notifications ({hotkey})",...nt}=$,rt=useToastProviderContext(VIEWPORT_NAME,_e),ot=useCollection(_e),it=reactExports.useRef(null),at=reactExports.useRef(null),dt=reactExports.useRef(null),st=reactExports.useRef(null),ut=useComposedRefs(j,st,rt.onViewportChange),ft=et.join("+").replace(/Key/g,"").replace(/Digit/g,""),pt=rt.toastCount>0;reactExports.useEffect(()=>{const yt=mt=>{var _t;et.every(St=>mt[St]||mt.code===St)&&((_t=st.current)==null||_t.focus())};return document.addEventListener("keydown",yt),()=>document.removeEventListener("keydown",yt)},[et]),reactExports.useEffect(()=>{const yt=it.current,mt=st.current;if(pt&&yt&&mt){const vt=()=>{if(!rt.isClosePausedRef.current){const kt=new CustomEvent(VIEWPORT_PAUSE);mt.dispatchEvent(kt),rt.isClosePausedRef.current=!0}},_t=()=>{if(rt.isClosePausedRef.current){const kt=new CustomEvent(VIEWPORT_RESUME);mt.dispatchEvent(kt),rt.isClosePausedRef.current=!1}},St=kt=>{!yt.contains(kt.relatedTarget)&&_t()},At=()=>{yt.contains(document.activeElement)||_t()};return yt.addEventListener("focusin",vt),yt.addEventListener("focusout",St),yt.addEventListener("pointermove",vt),yt.addEventListener("pointerleave",At),window.addEventListener("blur",vt),window.addEventListener("focus",_t),()=>{yt.removeEventListener("focusin",vt),yt.removeEventListener("focusout",St),yt.removeEventListener("pointermove",vt),yt.removeEventListener("pointerleave",At),window.removeEventListener("blur",vt),window.removeEventListener("focus",_t)}}},[pt,rt.isClosePausedRef]);const gt=reactExports.useCallback(({tabbingDirection:yt})=>{const vt=ot().map(_t=>{const St=_t.ref.current,At=[St,...getTabbableCandidates(St)];return yt==="forwards"?At:At.reverse()});return(yt==="forwards"?vt.reverse():vt).flat()},[ot]);return reactExports.useEffect(()=>{const yt=st.current;if(yt){const mt=vt=>{var At,kt,bt;const _t=vt.altKey||vt.ctrlKey||vt.metaKey;if(vt.key==="Tab"&&!_t){const Rt=document.activeElement,Ot=vt.shiftKey;if(vt.target===yt&&Ot){(At=at.current)==null||At.focus();return}const rn=gt({tabbingDirection:Ot?"backwards":"forwards"}),mn=rn.findIndex(qt=>qt===Rt);focusFirst(rn.slice(mn+1))?vt.preventDefault():Ot?(kt=at.current)==null||kt.focus():(bt=dt.current)==null||bt.focus()}};return yt.addEventListener("keydown",mt),()=>yt.removeEventListener("keydown",mt)}},[ot,gt]),jsxRuntimeExports.jsxs(Branch,{ref:it,role:"region","aria-label":tt.replace("{hotkey}",ft),tabIndex:-1,style:{pointerEvents:pt?void 0:"none"},children:[pt&&jsxRuntimeExports.jsx(FocusProxy,{ref:at,onFocusFromOutsideViewport:()=>{const yt=gt({tabbingDirection:"forwards"});focusFirst(yt)}}),jsxRuntimeExports.jsx(Collection.Slot,{scope:_e,children:jsxRuntimeExports.jsx(Primitive.ol,{tabIndex:-1,...nt,ref:ut})}),pt&&jsxRuntimeExports.jsx(FocusProxy,{ref:dt,onFocusFromOutsideViewport:()=>{const yt=gt({tabbingDirection:"backwards"});focusFirst(yt)}})]})});ToastViewport.displayName=VIEWPORT_NAME;var FOCUS_PROXY_NAME="ToastFocusProxy",FocusProxy=reactExports.forwardRef(($,j)=>{const{__scopeToast:_e,onFocusFromOutsideViewport:et,...tt}=$,nt=useToastProviderContext(FOCUS_PROXY_NAME,_e);return jsxRuntimeExports.jsx(VisuallyHidden,{"aria-hidden":!0,tabIndex:0,...tt,ref:j,style:{position:"fixed"},onFocus:rt=>{var at;const ot=rt.relatedTarget;!((at=nt.viewport)!=null&&at.contains(ot))&&et()}})});FocusProxy.displayName=FOCUS_PROXY_NAME;var TOAST_NAME="Toast",TOAST_SWIPE_START="toast.swipeStart",TOAST_SWIPE_MOVE="toast.swipeMove",TOAST_SWIPE_CANCEL="toast.swipeCancel",TOAST_SWIPE_END="toast.swipeEnd",Toast=reactExports.forwardRef(($,j)=>{const{forceMount:_e,open:et,defaultOpen:tt,onOpenChange:nt,...rt}=$,[ot=!0,it]=useControllableState({prop:et,defaultProp:tt,onChange:nt});return jsxRuntimeExports.jsx(Presence,{present:_e||ot,children:jsxRuntimeExports.jsx(ToastImpl,{open:ot,...rt,ref:j,onClose:()=>it(!1),onPause:useCallbackRef$1($.onPause),onResume:useCallbackRef$1($.onResume),onSwipeStart:composeEventHandlers($.onSwipeStart,at=>{at.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:composeEventHandlers($.onSwipeMove,at=>{const{x:dt,y:st}=at.detail.delta;at.currentTarget.setAttribute("data-swipe","move"),at.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${dt}px`),at.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${st}px`)}),onSwipeCancel:composeEventHandlers($.onSwipeCancel,at=>{at.currentTarget.setAttribute("data-swipe","cancel"),at.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),at.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),at.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),at.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:composeEventHandlers($.onSwipeEnd,at=>{const{x:dt,y:st}=at.detail.delta;at.currentTarget.setAttribute("data-swipe","end"),at.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),at.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),at.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${dt}px`),at.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${st}px`),it(!1)})})})});Toast.displayName=TOAST_NAME;var[ToastInteractiveProvider,useToastInteractiveContext]=createToastContext(TOAST_NAME,{onClose(){}}),ToastImpl=reactExports.forwardRef(($,j)=>{const{__scopeToast:_e,type:et="foreground",duration:tt,open:nt,onClose:rt,onEscapeKeyDown:ot,onPause:it,onResume:at,onSwipeStart:dt,onSwipeMove:st,onSwipeCancel:ut,onSwipeEnd:ft,...pt}=$,gt=useToastProviderContext(TOAST_NAME,_e),[yt,mt]=reactExports.useState(null),vt=useComposedRefs(j,qt=>mt(qt)),_t=reactExports.useRef(null),St=reactExports.useRef(null),At=tt||gt.duration,kt=reactExports.useRef(0),bt=reactExports.useRef(At),Rt=reactExports.useRef(0),{onToastAdd:Ot,onToastRemove:Ut}=gt,Yt=useCallbackRef$1(()=>{var Zt;(yt==null?void 0:yt.contains(document.activeElement))&&((Zt=gt.viewport)==null||Zt.focus()),rt()}),rn=reactExports.useCallback(qt=>{!qt||qt===1/0||(window.clearTimeout(Rt.current),kt.current=new Date().getTime(),Rt.current=window.setTimeout(Yt,qt))},[Yt]);reactExports.useEffect(()=>{const qt=gt.viewport;if(qt){const Zt=()=>{rn(bt.current),at==null||at()},Jt=()=>{const un=new Date().getTime()-kt.current;bt.current=bt.current-un,window.clearTimeout(Rt.current),it==null||it()};return qt.addEventListener(VIEWPORT_PAUSE,Jt),qt.addEventListener(VIEWPORT_RESUME,Zt),()=>{qt.removeEventListener(VIEWPORT_PAUSE,Jt),qt.removeEventListener(VIEWPORT_RESUME,Zt)}}},[gt.viewport,At,it,at,rn]),reactExports.useEffect(()=>{nt&&!gt.isClosePausedRef.current&&rn(At)},[nt,At,gt.isClosePausedRef,rn]),reactExports.useEffect(()=>(Ot(),()=>Ut()),[Ot,Ut]);const mn=reactExports.useMemo(()=>yt?getAnnounceTextContent(yt):null,[yt]);return gt.viewport?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[mn&&jsxRuntimeExports.jsx(ToastAnnounce,{__scopeToast:_e,role:"status","aria-live":et==="foreground"?"assertive":"polite","aria-atomic":!0,children:mn}),jsxRuntimeExports.jsx(ToastInteractiveProvider,{scope:_e,onClose:Yt,children:reactDomExports.createPortal(jsxRuntimeExports.jsx(Collection.ItemSlot,{scope:_e,children:jsxRuntimeExports.jsx(Root$7,{asChild:!0,onEscapeKeyDown:composeEventHandlers(ot,()=>{gt.isFocusedToastEscapeKeyDownRef.current||Yt(),gt.isFocusedToastEscapeKeyDownRef.current=!1}),children:jsxRuntimeExports.jsx(Primitive.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":nt?"open":"closed","data-swipe-direction":gt.swipeDirection,...pt,ref:vt,style:{userSelect:"none",touchAction:"none",...$.style},onKeyDown:composeEventHandlers($.onKeyDown,qt=>{qt.key==="Escape"&&(ot==null||ot(qt.nativeEvent),qt.nativeEvent.defaultPrevented||(gt.isFocusedToastEscapeKeyDownRef.current=!0,Yt()))}),onPointerDown:composeEventHandlers($.onPointerDown,qt=>{qt.button===0&&(_t.current={x:qt.clientX,y:qt.clientY})}),onPointerMove:composeEventHandlers($.onPointerMove,qt=>{if(!_t.current)return;const Zt=qt.clientX-_t.current.x,Jt=qt.clientY-_t.current.y,un=!!St.current,Wt=["left","right"].includes(gt.swipeDirection),Qt=["left","up"].includes(gt.swipeDirection)?Math.min:Math.max,on=Wt?Qt(0,Zt):0,nn=Wt?0:Qt(0,Jt),cn=qt.pointerType==="touch"?10:2,Sn={x:on,y:nn},vn={originalEvent:qt,delta:Sn};un?(St.current=Sn,handleAndDispatchCustomEvent(TOAST_SWIPE_MOVE,st,vn,{discrete:!1})):isDeltaInDirection(Sn,gt.swipeDirection,cn)?(St.current=Sn,handleAndDispatchCustomEvent(TOAST_SWIPE_START,dt,vn,{discrete:!1}),qt.target.setPointerCapture(qt.pointerId)):(Math.abs(Zt)>cn||Math.abs(Jt)>cn)&&(_t.current=null)}),onPointerUp:composeEventHandlers($.onPointerUp,qt=>{const Zt=St.current,Jt=qt.target;if(Jt.hasPointerCapture(qt.pointerId)&&Jt.releasePointerCapture(qt.pointerId),St.current=null,_t.current=null,Zt){const un=qt.currentTarget,Wt={originalEvent:qt,delta:Zt};isDeltaInDirection(Zt,gt.swipeDirection,gt.swipeThreshold)?handleAndDispatchCustomEvent(TOAST_SWIPE_END,ft,Wt,{discrete:!0}):handleAndDispatchCustomEvent(TOAST_SWIPE_CANCEL,ut,Wt,{discrete:!0}),un.addEventListener("click",Qt=>Qt.preventDefault(),{once:!0})}})})})}),gt.viewport)})]}):null}),ToastAnnounce=$=>{const{__scopeToast:j,children:_e,...et}=$,tt=useToastProviderContext(TOAST_NAME,j),[nt,rt]=reactExports.useState(!1),[ot,it]=reactExports.useState(!1);return useNextFrame(()=>rt(!0)),reactExports.useEffect(()=>{const at=window.setTimeout(()=>it(!0),1e3);return()=>window.clearTimeout(at)},[]),ot?null:jsxRuntimeExports.jsx(Portal$4,{asChild:!0,children:jsxRuntimeExports.jsx(VisuallyHidden,{...et,children:nt&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[tt.label," ",_e]})})})},TITLE_NAME="ToastTitle",ToastTitle=reactExports.forwardRef(($,j)=>{const{__scopeToast:_e,...et}=$;return jsxRuntimeExports.jsx(Primitive.div,{...et,ref:j})});ToastTitle.displayName=TITLE_NAME;var DESCRIPTION_NAME="ToastDescription",ToastDescription=reactExports.forwardRef(($,j)=>{const{__scopeToast:_e,...et}=$;return jsxRuntimeExports.jsx(Primitive.div,{...et,ref:j})});ToastDescription.displayName=DESCRIPTION_NAME;var ACTION_NAME="ToastAction",ToastAction=reactExports.forwardRef(($,j)=>{const{altText:_e,...et}=$;return _e.trim()?jsxRuntimeExports.jsx(ToastAnnounceExclude,{altText:_e,asChild:!0,children:jsxRuntimeExports.jsx(ToastClose,{...et,ref:j})}):(console.error(`Invalid prop \`altText\` supplied to \`${ACTION_NAME}\`. Expected non-empty \`string\`.`),null)});ToastAction.displayName=ACTION_NAME;var CLOSE_NAME="ToastClose",ToastClose=reactExports.forwardRef(($,j)=>{const{__scopeToast:_e,...et}=$,tt=useToastInteractiveContext(CLOSE_NAME,_e);return jsxRuntimeExports.jsx(ToastAnnounceExclude,{asChild:!0,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",...et,ref:j,onClick:composeEventHandlers($.onClick,tt.onClose)})})});ToastClose.displayName=CLOSE_NAME;var ToastAnnounceExclude=reactExports.forwardRef(($,j)=>{const{__scopeToast:_e,altText:et,...tt}=$;return jsxRuntimeExports.jsx(Primitive.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":et||void 0,...tt,ref:j})});function getAnnounceTextContent($){const j=[];return Array.from($.childNodes).forEach(et=>{if(et.nodeType===et.TEXT_NODE&&et.textContent&&j.push(et.textContent),isHTMLElement(et)){const tt=et.ariaHidden||et.hidden||et.style.display==="none",nt=et.dataset.radixToastAnnounceExclude==="";if(!tt)if(nt){const rt=et.dataset.radixToastAnnounceAlt;rt&&j.push(rt)}else j.push(...getAnnounceTextContent(et))}}),j}function handleAndDispatchCustomEvent($,j,_e,{discrete:et}){const tt=_e.originalEvent.currentTarget,nt=new CustomEvent($,{bubbles:!0,cancelable:!0,detail:_e});j&&tt.addEventListener($,j,{once:!0}),et?dispatchDiscreteCustomEvent(tt,nt):tt.dispatchEvent(nt)}var isDeltaInDirection=($,j,_e=0)=>{const et=Math.abs($.x),tt=Math.abs($.y),nt=et>tt;return j==="left"||j==="right"?nt&&et>_e:!nt&&tt>_e};function useNextFrame($=()=>{}){const j=useCallbackRef$1($);useLayoutEffect2(()=>{let _e=0,et=0;return _e=window.requestAnimationFrame(()=>et=window.requestAnimationFrame(j)),()=>{window.cancelAnimationFrame(_e),window.cancelAnimationFrame(et)}},[j])}function isHTMLElement($){return $.nodeType===$.ELEMENT_NODE}function getTabbableCandidates($){const j=[],_e=document.createTreeWalker($,NodeFilter.SHOW_ELEMENT,{acceptNode:et=>{const tt=et.tagName==="INPUT"&&et.type==="hidden";return et.disabled||et.hidden||tt?NodeFilter.FILTER_SKIP:et.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;_e.nextNode();)j.push(_e.currentNode);return j}function focusFirst($){const j=document.activeElement;return $.some(_e=>_e===j?!0:(_e.focus(),document.activeElement!==j))}var Provider=ToastProvider,Viewport=ToastViewport,Root2=Toast,Description=ToastDescription,Close=ToastClose;const ErrorAlert=()=>{const{t:$}=useTranslation(),j=useAtom_2(isErrorShown$),_e=useAtom_2(errorMessage$);return j?jsxRuntimeExports.jsxs(Provider,{children:[jsxRuntimeExports.jsxs(Root2,{className:"qsp-toast-root error",open:j,onOpenChange:()=>isErrorShown$.set(!1),children:[jsxRuntimeExports.jsx(Description,{className:"qsp-toast-description",children:$(_e)}),jsxRuntimeExports.jsx(Close,{className:"q-ghost-button",children:jsxRuntimeExports.jsx(Cross1Icon,{})})]}),jsxRuntimeExports.jsx(Viewport,{className:"qsp-toast-viewport"})]}):null},NoticeToast=()=>{const $=useAtom_2(isNoticeShown$),j=useAtom_2(noticeMessage$),{t:_e}=useTranslation();return $?jsxRuntimeExports.jsxs(Provider,{children:[jsxRuntimeExports.jsx(Root2,{className:"qsp-toast-root",open:$,children:jsxRuntimeExports.jsx(Description,{className:"qsp-toast-description",children:_e(j)})}),jsxRuntimeExports.jsx(Viewport,{className:"qsp-toast-viewport"})]}):null};async function init(){var ot;initialBaseUrl$.set(prepareBaseUrl(window.location.href)),onGameEnd$.set(()=>navigateTo("")),initTheme(),await loadGamesFromStorage();const $=window.location.search,j=new URLSearchParams($),_e=j.get("config"),tt=j.get("game")||_e;let nt=null;if(tt){const it=await importUrl(tt);for(const at of it)games$.value[at.id]||games$.actions.add(at.id,at);nt=it[0].id}const rt=j.get("catalogId");if(rt){let it;for(const[at,dt]of Object.entries(games$.value))if(((ot=dt.meta)==null?void 0:ot.source_id)===rt){it=at;break}if(it)nt=it;else{await loadQspCatalog();const at=qspCatalogList$.value.find(dt=>dt.id===Number(rt));if(at){loadingMessage$.set(instance.t("Loading game from catalog..."));const[dt]=await moveToShelf(at);dt&&(nt=dt.id),loadingMessage$.set("")}else showError(instance.t("Game with id {{catalogId}} not found in catalog",{catalogId:rt}))}}initDeferred$.value.resolve(),await initQspApi(),await registerDefaultThemes(initialBaseUrl$.value),nt?goToGame(nt):await processLocationChange(window.location.search),baseInit$.set(!0)}const OpenGameButton=()=>{const{t:$}=useTranslation(),j=reactExports.useCallback(_e=>{var nt;const et=(nt=_e.target.files)==null?void 0:nt[0];if(!et)return;const tt=new FileReader;tt.onload=async function(rt){var it;const ot=(it=rt.target)==null?void 0:it.result;try{const at=await importFile(et.name,ot);for(const st of at)games$.actions.add(st.id,st);const dt=at[0].id;dt&&goToGame(dt)}catch(at){showError(at instanceof Error?at.message:String(at))}},tt.readAsArrayBuffer(et)},[]);return jsxRuntimeExports.jsxs("label",{className:"q-button q-open-game-button",htmlFor:"openGame",children:[$("Open game"),jsxRuntimeExports.jsx("input",{type:"file",id:"openGame",accept:".zip, .aqsp, .qsp, .qsps, .gam, .rar, .7z",onChange:j})]})};componentsRegistry$.actions.register(ProvidedComponents.OpenGameButton,OpenGameButton);init();const App=()=>useAtom_2(baseInit$)?jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(QspiderLoader,{}),children:jsxRuntimeExports.jsxs(QspiderRoot,{children:[jsxRuntimeExports.jsx(PlayerWithShelf,{}),jsxRuntimeExports.jsx(ErrorAlert,{}),jsxRuntimeExports.jsx(NoticeToast,{})]})}):jsxRuntimeExports.jsx(QspiderLoader,{}),root=client.createRoot(document.getElementById("root"));root.render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));"serviceWorker"in navigator&&new l$2(new URL("./service-worker.js",window.location.href).toString(),{type:"classic"}).register();export{getAugmentedNamespace as g};
