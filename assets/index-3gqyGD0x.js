function _mergeNamespaces(x,y){for(var w=0;w<y.length;w++){const C=y[w];if(typeof C!="string"&&!Array.isArray(C)){for(const P in C)if(P!=="default"&&!(P in x)){const O=Object.getOwnPropertyDescriptor(C,P);O&&Object.defineProperty(x,P,O.get?O:{enumerable:!0,get:()=>C[P]})}}}return Object.freeze(Object.defineProperty(x,Symbol.toStringTag,{value:"Module"}))}(function(){const y=document.createElement("link").relList;if(y&&y.supports&&y.supports("modulepreload"))return;for(const P of document.querySelectorAll('link[rel="modulepreload"]'))C(P);new MutationObserver(P=>{for(const O of P)if(O.type==="childList")for(const $ of O.addedNodes)$.tagName==="LINK"&&$.rel==="modulepreload"&&C($)}).observe(document,{childList:!0,subtree:!0});function w(P){const O={};return P.integrity&&(O.integrity=P.integrity),P.referrerPolicy&&(O.referrerPolicy=P.referrerPolicy),P.crossOrigin==="use-credentials"?O.credentials="include":P.crossOrigin==="anonymous"?O.credentials="omit":O.credentials="same-origin",O}function C(P){if(P.ep)return;P.ep=!0;const O=w(P);fetch(P.href,O)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x}function getAugmentedNamespace(x){if(Object.prototype.hasOwnProperty.call(x,"__esModule"))return x;var y=x.default;if(typeof y=="function"){var w=function C(){var P=!1;try{P=this instanceof C}catch{}return P?Reflect.construct(y,arguments,this.constructor):y.apply(this,arguments)};w.prototype=y.prototype}else w={};return Object.defineProperty(w,"__esModule",{value:!0}),Object.keys(x).forEach(function(C){var P=Object.getOwnPropertyDescriptor(x,C);Object.defineProperty(w,C,P.get?P:{enumerable:!0,get:function(){return x[C]}})}),w}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var x=Symbol.for("react.element"),y=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),$=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),B=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),k=Symbol.iterator;function H(ie){return ie===null||typeof ie!="object"?null:(ie=k&&ie[k]||ie["@@iterator"],typeof ie=="function"?ie:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,Q={};function Z(ie,Re,Xe){this.props=ie,this.context=Re,this.refs=Q,this.updater=Xe||W}Z.prototype.isReactComponent={},Z.prototype.setState=function(ie,Re){if(typeof ie!="object"&&typeof ie!="function"&&ie!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ie,Re,"setState")},Z.prototype.forceUpdate=function(ie){this.updater.enqueueForceUpdate(this,ie,"forceUpdate")};function J(){}J.prototype=Z.prototype;function ne(ie,Re,Xe){this.props=ie,this.context=Re,this.refs=Q,this.updater=Xe||W}var oe=ne.prototype=new J;oe.constructor=ne,G(oe,Z.prototype),oe.isPureReactComponent=!0;var ae=Array.isArray,ve=Object.prototype.hasOwnProperty,Te={current:null},re={key:!0,ref:!0,__self:!0,__source:!0};function he(ie,Re,Xe){var Ze,st={},dt=null,De=null;if(Re!=null)for(Ze in Re.ref!==void 0&&(De=Re.ref),Re.key!==void 0&&(dt=""+Re.key),Re)ve.call(Re,Ze)&&!re.hasOwnProperty(Ze)&&(st[Ze]=Re[Ze]);var it=arguments.length-2;if(it===1)st.children=Xe;else if(1<it){for(var Ue=Array(it),Et=0;Et<it;Et++)Ue[Et]=arguments[Et+2];st.children=Ue}if(ie&&ie.defaultProps)for(Ze in it=ie.defaultProps,it)st[Ze]===void 0&&(st[Ze]=it[Ze]);return{$$typeof:x,type:ie,key:dt,ref:De,props:st,_owner:Te.current}}function be(ie,Re){return{$$typeof:x,type:ie.type,key:Re,ref:ie.ref,props:ie.props,_owner:ie._owner}}function Le(ie){return typeof ie=="object"&&ie!==null&&ie.$$typeof===x}function qe(ie){var Re={"=":"=0",":":"=2"};return"$"+ie.replace(/[=:]/g,function(Xe){return Re[Xe]})}var Ye=/\/+/g;function et(ie,Re){return typeof ie=="object"&&ie!==null&&ie.key!=null?qe(""+ie.key):Re.toString(36)}function je(ie,Re,Xe,Ze,st){var dt=typeof ie;(dt==="undefined"||dt==="boolean")&&(ie=null);var De=!1;if(ie===null)De=!0;else switch(dt){case"string":case"number":De=!0;break;case"object":switch(ie.$$typeof){case x:case y:De=!0}}if(De)return De=ie,st=st(De),ie=Ze===""?"."+et(De,0):Ze,ae(st)?(Xe="",ie!=null&&(Xe=ie.replace(Ye,"$&/")+"/"),je(st,Re,Xe,"",function(Et){return Et})):st!=null&&(Le(st)&&(st=be(st,Xe+(!st.key||De&&De.key===st.key?"":(""+st.key).replace(Ye,"$&/")+"/")+ie)),Re.push(st)),1;if(De=0,Ze=Ze===""?".":Ze+":",ae(ie))for(var it=0;it<ie.length;it++){dt=ie[it];var Ue=Ze+et(dt,it);De+=je(dt,Re,Xe,Ue,st)}else if(Ue=H(ie),typeof Ue=="function")for(ie=Ue.call(ie),it=0;!(dt=ie.next()).done;)dt=dt.value,Ue=Ze+et(dt,it++),De+=je(dt,Re,Xe,Ue,st);else if(dt==="object")throw Re=String(ie),Error("Objects are not valid as a React child (found: "+(Re==="[object Object]"?"object with keys {"+Object.keys(ie).join(", ")+"}":Re)+"). If you meant to render a collection of children, use an array instead.");return De}function Ke(ie,Re,Xe){if(ie==null)return ie;var Ze=[],st=0;return je(ie,Ze,"","",function(dt){return Re.call(Xe,dt,st++)}),Ze}function Ve(ie){if(ie._status===-1){var Re=ie._result;Re=Re(),Re.then(function(Xe){(ie._status===0||ie._status===-1)&&(ie._status=1,ie._result=Xe)},function(Xe){(ie._status===0||ie._status===-1)&&(ie._status=2,ie._result=Xe)}),ie._status===-1&&(ie._status=0,ie._result=Re)}if(ie._status===1)return ie._result.default;throw ie._result}var We={current:null},we={transition:null},Oe={ReactCurrentDispatcher:We,ReactCurrentBatchConfig:we,ReactCurrentOwner:Te};function He(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:Ke,forEach:function(ie,Re,Xe){Ke(ie,function(){Re.apply(this,arguments)},Xe)},count:function(ie){var Re=0;return Ke(ie,function(){Re++}),Re},toArray:function(ie){return Ke(ie,function(Re){return Re})||[]},only:function(ie){if(!Le(ie))throw Error("React.Children.only expected to receive a single React element child.");return ie}},react_production_min.Component=Z,react_production_min.Fragment=w,react_production_min.Profiler=P,react_production_min.PureComponent=ne,react_production_min.StrictMode=C,react_production_min.Suspense=D,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Oe,react_production_min.act=He,react_production_min.cloneElement=function(ie,Re,Xe){if(ie==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ie+".");var Ze=G({},ie.props),st=ie.key,dt=ie.ref,De=ie._owner;if(Re!=null){if(Re.ref!==void 0&&(dt=Re.ref,De=Te.current),Re.key!==void 0&&(st=""+Re.key),ie.type&&ie.type.defaultProps)var it=ie.type.defaultProps;for(Ue in Re)ve.call(Re,Ue)&&!re.hasOwnProperty(Ue)&&(Ze[Ue]=Re[Ue]===void 0&&it!==void 0?it[Ue]:Re[Ue])}var Ue=arguments.length-2;if(Ue===1)Ze.children=Xe;else if(1<Ue){it=Array(Ue);for(var Et=0;Et<Ue;Et++)it[Et]=arguments[Et+2];Ze.children=it}return{$$typeof:x,type:ie.type,key:st,ref:dt,props:Ze,_owner:De}},react_production_min.createContext=function(ie){return ie={$$typeof:$,_currentValue:ie,_currentValue2:ie,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ie.Provider={$$typeof:O,_context:ie},ie.Consumer=ie},react_production_min.createElement=he,react_production_min.createFactory=function(ie){var Re=he.bind(null,ie);return Re.type=ie,Re},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(ie){return{$$typeof:L,render:ie}},react_production_min.isValidElement=Le,react_production_min.lazy=function(ie){return{$$typeof:U,_payload:{_status:-1,_result:ie},_init:Ve}},react_production_min.memo=function(ie,Re){return{$$typeof:B,type:ie,compare:Re===void 0?null:Re}},react_production_min.startTransition=function(ie){var Re=we.transition;we.transition={};try{ie()}finally{we.transition=Re}},react_production_min.unstable_act=He,react_production_min.useCallback=function(ie,Re){return We.current.useCallback(ie,Re)},react_production_min.useContext=function(ie){return We.current.useContext(ie)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(ie){return We.current.useDeferredValue(ie)},react_production_min.useEffect=function(ie,Re){return We.current.useEffect(ie,Re)},react_production_min.useId=function(){return We.current.useId()},react_production_min.useImperativeHandle=function(ie,Re,Xe){return We.current.useImperativeHandle(ie,Re,Xe)},react_production_min.useInsertionEffect=function(ie,Re){return We.current.useInsertionEffect(ie,Re)},react_production_min.useLayoutEffect=function(ie,Re){return We.current.useLayoutEffect(ie,Re)},react_production_min.useMemo=function(ie,Re){return We.current.useMemo(ie,Re)},react_production_min.useReducer=function(ie,Re,Xe){return We.current.useReducer(ie,Re,Xe)},react_production_min.useRef=function(ie){return We.current.useRef(ie)},react_production_min.useState=function(ie){return We.current.useState(ie)},react_production_min.useSyncExternalStore=function(ie,Re,Xe){return We.current.useSyncExternalStore(ie,Re,Xe)},react_production_min.useTransition=function(){return We.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var x=requireReact(),y=Symbol.for("react.element"),w=Symbol.for("react.fragment"),C=Object.prototype.hasOwnProperty,P=x.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,O={key:!0,ref:!0,__self:!0,__source:!0};function $(L,D,B){var U,k={},H=null,W=null;B!==void 0&&(H=""+B),D.key!==void 0&&(H=""+D.key),D.ref!==void 0&&(W=D.ref);for(U in D)C.call(D,U)&&!O.hasOwnProperty(U)&&(k[U]=D[U]);if(L&&L.defaultProps)for(U in D=L.defaultProps,D)k[U]===void 0&&(k[U]=D[U]);return{$$typeof:y,type:L,key:H,ref:W,props:k,_owner:P.current}}return reactJsxRuntime_production_min.Fragment=w,reactJsxRuntime_production_min.jsx=$,reactJsxRuntime_production_min.jsxs=$,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,(function(x){function y(we,Oe){var He=we.length;we.push(Oe);e:for(;0<He;){var ie=He-1>>>1,Re=we[ie];if(0<P(Re,Oe))we[ie]=Oe,we[He]=Re,He=ie;else break e}}function w(we){return we.length===0?null:we[0]}function C(we){if(we.length===0)return null;var Oe=we[0],He=we.pop();if(He!==Oe){we[0]=He;e:for(var ie=0,Re=we.length,Xe=Re>>>1;ie<Xe;){var Ze=2*(ie+1)-1,st=we[Ze],dt=Ze+1,De=we[dt];if(0>P(st,He))dt<Re&&0>P(De,st)?(we[ie]=De,we[dt]=He,ie=dt):(we[ie]=st,we[Ze]=He,ie=Ze);else if(dt<Re&&0>P(De,He))we[ie]=De,we[dt]=He,ie=dt;else break e}}return Oe}function P(we,Oe){var He=we.sortIndex-Oe.sortIndex;return He!==0?He:we.id-Oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var O=performance;x.unstable_now=function(){return O.now()}}else{var $=Date,L=$.now();x.unstable_now=function(){return $.now()-L}}var D=[],B=[],U=1,k=null,H=3,W=!1,G=!1,Q=!1,Z=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function oe(we){for(var Oe=w(B);Oe!==null;){if(Oe.callback===null)C(B);else if(Oe.startTime<=we)C(B),Oe.sortIndex=Oe.expirationTime,y(D,Oe);else break;Oe=w(B)}}function ae(we){if(Q=!1,oe(we),!G)if(w(D)!==null)G=!0,Ve(ve);else{var Oe=w(B);Oe!==null&&We(ae,Oe.startTime-we)}}function ve(we,Oe){G=!1,Q&&(Q=!1,J(he),he=-1),W=!0;var He=H;try{for(oe(Oe),k=w(D);k!==null&&(!(k.expirationTime>Oe)||we&&!qe());){var ie=k.callback;if(typeof ie=="function"){k.callback=null,H=k.priorityLevel;var Re=ie(k.expirationTime<=Oe);Oe=x.unstable_now(),typeof Re=="function"?k.callback=Re:k===w(D)&&C(D),oe(Oe)}else C(D);k=w(D)}if(k!==null)var Xe=!0;else{var Ze=w(B);Ze!==null&&We(ae,Ze.startTime-Oe),Xe=!1}return Xe}finally{k=null,H=He,W=!1}}var Te=!1,re=null,he=-1,be=5,Le=-1;function qe(){return!(x.unstable_now()-Le<be)}function Ye(){if(re!==null){var we=x.unstable_now();Le=we;var Oe=!0;try{Oe=re(!0,we)}finally{Oe?et():(Te=!1,re=null)}}else Te=!1}var et;if(typeof ne=="function")et=function(){ne(Ye)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,Ke=je.port2;je.port1.onmessage=Ye,et=function(){Ke.postMessage(null)}}else et=function(){Z(Ye,0)};function Ve(we){re=we,Te||(Te=!0,et())}function We(we,Oe){he=Z(function(){we(x.unstable_now())},Oe)}x.unstable_IdlePriority=5,x.unstable_ImmediatePriority=1,x.unstable_LowPriority=4,x.unstable_NormalPriority=3,x.unstable_Profiling=null,x.unstable_UserBlockingPriority=2,x.unstable_cancelCallback=function(we){we.callback=null},x.unstable_continueExecution=function(){G||W||(G=!0,Ve(ve))},x.unstable_forceFrameRate=function(we){0>we||125<we?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):be=0<we?Math.floor(1e3/we):5},x.unstable_getCurrentPriorityLevel=function(){return H},x.unstable_getFirstCallbackNode=function(){return w(D)},x.unstable_next=function(we){switch(H){case 1:case 2:case 3:var Oe=3;break;default:Oe=H}var He=H;H=Oe;try{return we()}finally{H=He}},x.unstable_pauseExecution=function(){},x.unstable_requestPaint=function(){},x.unstable_runWithPriority=function(we,Oe){switch(we){case 1:case 2:case 3:case 4:case 5:break;default:we=3}var He=H;H=we;try{return Oe()}finally{H=He}},x.unstable_scheduleCallback=function(we,Oe,He){var ie=x.unstable_now();switch(typeof He=="object"&&He!==null?(He=He.delay,He=typeof He=="number"&&0<He?ie+He:ie):He=ie,we){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=He+Re,we={id:U++,callback:Oe,priorityLevel:we,startTime:He,expirationTime:Re,sortIndex:-1},He>ie?(we.sortIndex=He,y(B,we),w(D)===null&&we===w(B)&&(Q?(J(he),he=-1):Q=!0,We(ae,He-ie))):(we.sortIndex=Re,y(D,we),G||W||(G=!0,Ve(ve))),we},x.unstable_shouldYield=qe,x.unstable_wrapCallback=function(we){var Oe=H;return function(){var He=H;H=Oe;try{return we.apply(this,arguments)}finally{H=He}}}})(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var x=requireReact(),y=requireScheduler();function w(R){for(var j="https://reactjs.org/docs/error-decoder.html?invariant="+R,N=1;N<arguments.length;N++)j+="&args[]="+encodeURIComponent(arguments[N]);return"Minified React error #"+R+"; visit "+j+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var C=new Set,P={};function O(R,j){$(R,j),$(R+"Capture",j)}function $(R,j){for(P[R]=j,R=0;R<j.length;R++)C.add(j[R])}var L=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),D=Object.prototype.hasOwnProperty,B=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,U={},k={};function H(R){return D.call(k,R)?!0:D.call(U,R)?!1:B.test(R)?k[R]=!0:(U[R]=!0,!1)}function W(R,j,N,F){if(N!==null&&N.type===0)return!1;switch(typeof j){case"function":case"symbol":return!0;case"boolean":return F?!1:N!==null?!N.acceptsBooleans:(R=R.toLowerCase().slice(0,5),R!=="data-"&&R!=="aria-");default:return!1}}function G(R,j,N,F){if(j===null||typeof j>"u"||W(R,j,N,F))return!0;if(F)return!1;if(N!==null)switch(N.type){case 3:return!j;case 4:return j===!1;case 5:return isNaN(j);case 6:return isNaN(j)||1>j}return!1}function Q(R,j,N,F,V,z,ee){this.acceptsBooleans=j===2||j===3||j===4,this.attributeName=F,this.attributeNamespace=V,this.mustUseProperty=N,this.propertyName=R,this.type=j,this.sanitizeURL=z,this.removeEmptyString=ee}var Z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(R){Z[R]=new Q(R,0,!1,R,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(R){var j=R[0];Z[j]=new Q(j,1,!1,R[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(R){Z[R]=new Q(R,2,!1,R.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(R){Z[R]=new Q(R,2,!1,R,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(R){Z[R]=new Q(R,3,!1,R.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(R){Z[R]=new Q(R,3,!0,R,null,!1,!1)}),["capture","download"].forEach(function(R){Z[R]=new Q(R,4,!1,R,null,!1,!1)}),["cols","rows","size","span"].forEach(function(R){Z[R]=new Q(R,6,!1,R,null,!1,!1)}),["rowSpan","start"].forEach(function(R){Z[R]=new Q(R,5,!1,R.toLowerCase(),null,!1,!1)});var J=/[\-:]([a-z])/g;function ne(R){return R[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(R){var j=R.replace(J,ne);Z[j]=new Q(j,1,!1,R,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(R){var j=R.replace(J,ne);Z[j]=new Q(j,1,!1,R,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(R){var j=R.replace(J,ne);Z[j]=new Q(j,1,!1,R,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(R){Z[R]=new Q(R,1,!1,R.toLowerCase(),null,!1,!1)}),Z.xlinkHref=new Q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(R){Z[R]=new Q(R,1,!1,R.toLowerCase(),null,!0,!0)});function oe(R,j,N,F){var V=Z.hasOwnProperty(j)?Z[j]:null;(V!==null?V.type!==0:F||!(2<j.length)||j[0]!=="o"&&j[0]!=="O"||j[1]!=="n"&&j[1]!=="N")&&(G(j,N,V,F)&&(N=null),F||V===null?H(j)&&(N===null?R.removeAttribute(j):R.setAttribute(j,""+N)):V.mustUseProperty?R[V.propertyName]=N===null?V.type===3?!1:"":N:(j=V.attributeName,F=V.attributeNamespace,N===null?R.removeAttribute(j):(V=V.type,N=V===3||V===4&&N===!0?"":""+N,F?R.setAttributeNS(F,j,N):R.setAttribute(j,N))))}var ae=x.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ve=Symbol.for("react.element"),Te=Symbol.for("react.portal"),re=Symbol.for("react.fragment"),he=Symbol.for("react.strict_mode"),be=Symbol.for("react.profiler"),Le=Symbol.for("react.provider"),qe=Symbol.for("react.context"),Ye=Symbol.for("react.forward_ref"),et=Symbol.for("react.suspense"),je=Symbol.for("react.suspense_list"),Ke=Symbol.for("react.memo"),Ve=Symbol.for("react.lazy"),We=Symbol.for("react.offscreen"),we=Symbol.iterator;function Oe(R){return R===null||typeof R!="object"?null:(R=we&&R[we]||R["@@iterator"],typeof R=="function"?R:null)}var He=Object.assign,ie;function Re(R){if(ie===void 0)try{throw Error()}catch(N){var j=N.stack.trim().match(/\n( *(at )?)/);ie=j&&j[1]||""}return`
`+ie+R}var Xe=!1;function Ze(R,j){if(!R||Xe)return"";Xe=!0;var N=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(j)if(j=function(){throw Error()},Object.defineProperty(j.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(j,[])}catch(Ne){var F=Ne}Reflect.construct(R,[],j)}else{try{j.call()}catch(Ne){F=Ne}R.call(j.prototype)}else{try{throw Error()}catch(Ne){F=Ne}R()}}catch(Ne){if(Ne&&F&&typeof Ne.stack=="string"){for(var V=Ne.stack.split(`
`),z=F.stack.split(`
`),ee=V.length-1,le=z.length-1;1<=ee&&0<=le&&V[ee]!==z[le];)le--;for(;1<=ee&&0<=le;ee--,le--)if(V[ee]!==z[le]){if(ee!==1||le!==1)do if(ee--,le--,0>le||V[ee]!==z[le]){var de=`
`+V[ee].replace(" at new "," at ");return R.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",R.displayName)),de}while(1<=ee&&0<=le);break}}}finally{Xe=!1,Error.prepareStackTrace=N}return(R=R?R.displayName||R.name:"")?Re(R):""}function st(R){switch(R.tag){case 5:return Re(R.type);case 16:return Re("Lazy");case 13:return Re("Suspense");case 19:return Re("SuspenseList");case 0:case 2:case 15:return R=Ze(R.type,!1),R;case 11:return R=Ze(R.type.render,!1),R;case 1:return R=Ze(R.type,!0),R;default:return""}}function dt(R){if(R==null)return null;if(typeof R=="function")return R.displayName||R.name||null;if(typeof R=="string")return R;switch(R){case re:return"Fragment";case Te:return"Portal";case be:return"Profiler";case he:return"StrictMode";case et:return"Suspense";case je:return"SuspenseList"}if(typeof R=="object")switch(R.$$typeof){case qe:return(R.displayName||"Context")+".Consumer";case Le:return(R._context.displayName||"Context")+".Provider";case Ye:var j=R.render;return R=R.displayName,R||(R=j.displayName||j.name||"",R=R!==""?"ForwardRef("+R+")":"ForwardRef"),R;case Ke:return j=R.displayName||null,j!==null?j:dt(R.type)||"Memo";case Ve:j=R._payload,R=R._init;try{return dt(R(j))}catch{}}return null}function De(R){var j=R.type;switch(R.tag){case 24:return"Cache";case 9:return(j.displayName||"Context")+".Consumer";case 10:return(j._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return R=j.render,R=R.displayName||R.name||"",j.displayName||(R!==""?"ForwardRef("+R+")":"ForwardRef");case 7:return"Fragment";case 5:return j;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dt(j);case 8:return j===he?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof j=="function")return j.displayName||j.name||null;if(typeof j=="string")return j}return null}function it(R){switch(typeof R){case"boolean":case"number":case"string":case"undefined":return R;case"object":return R;default:return""}}function Ue(R){var j=R.type;return(R=R.nodeName)&&R.toLowerCase()==="input"&&(j==="checkbox"||j==="radio")}function Et(R){var j=Ue(R)?"checked":"value",N=Object.getOwnPropertyDescriptor(R.constructor.prototype,j),F=""+R[j];if(!R.hasOwnProperty(j)&&typeof N<"u"&&typeof N.get=="function"&&typeof N.set=="function"){var V=N.get,z=N.set;return Object.defineProperty(R,j,{configurable:!0,get:function(){return V.call(this)},set:function(ee){F=""+ee,z.call(this,ee)}}),Object.defineProperty(R,j,{enumerable:N.enumerable}),{getValue:function(){return F},setValue:function(ee){F=""+ee},stopTracking:function(){R._valueTracker=null,delete R[j]}}}}function Ot(R){R._valueTracker||(R._valueTracker=Et(R))}function _t(R){if(!R)return!1;var j=R._valueTracker;if(!j)return!0;var N=j.getValue(),F="";return R&&(F=Ue(R)?R.checked?"true":"false":R.value),R=F,R!==N?(j.setValue(R),!0):!1}function Ht(R){if(R=R||(typeof document<"u"?document:void 0),typeof R>"u")return null;try{return R.activeElement||R.body}catch{return R.body}}function $n(R,j){var N=j.checked;return He({},j,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:N??R._wrapperState.initialChecked})}function yn(R,j){var N=j.defaultValue==null?"":j.defaultValue,F=j.checked!=null?j.checked:j.defaultChecked;N=it(j.value!=null?j.value:N),R._wrapperState={initialChecked:F,initialValue:N,controlled:j.type==="checkbox"||j.type==="radio"?j.checked!=null:j.value!=null}}function Nn(R,j){j=j.checked,j!=null&&oe(R,"checked",j,!1)}function fr(R,j){Nn(R,j);var N=it(j.value),F=j.type;if(N!=null)F==="number"?(N===0&&R.value===""||R.value!=N)&&(R.value=""+N):R.value!==""+N&&(R.value=""+N);else if(F==="submit"||F==="reset"){R.removeAttribute("value");return}j.hasOwnProperty("value")?Fo(R,j.type,N):j.hasOwnProperty("defaultValue")&&Fo(R,j.type,it(j.defaultValue)),j.checked==null&&j.defaultChecked!=null&&(R.defaultChecked=!!j.defaultChecked)}function vs(R,j,N){if(j.hasOwnProperty("value")||j.hasOwnProperty("defaultValue")){var F=j.type;if(!(F!=="submit"&&F!=="reset"||j.value!==void 0&&j.value!==null))return;j=""+R._wrapperState.initialValue,N||j===R.value||(R.value=j),R.defaultValue=j}N=R.name,N!==""&&(R.name=""),R.defaultChecked=!!R._wrapperState.initialChecked,N!==""&&(R.name=N)}function Fo(R,j,N){(j!=="number"||Ht(R.ownerDocument)!==R)&&(N==null?R.defaultValue=""+R._wrapperState.initialValue:R.defaultValue!==""+N&&(R.defaultValue=""+N))}var Wn=Array.isArray;function Gt(R,j,N,F){if(R=R.options,j){j={};for(var V=0;V<N.length;V++)j["$"+N[V]]=!0;for(N=0;N<R.length;N++)V=j.hasOwnProperty("$"+R[N].value),R[N].selected!==V&&(R[N].selected=V),V&&F&&(R[N].defaultSelected=!0)}else{for(N=""+it(N),j=null,V=0;V<R.length;V++){if(R[V].value===N){R[V].selected=!0,F&&(R[V].defaultSelected=!0);return}j!==null||R[V].disabled||(j=R[V])}j!==null&&(j.selected=!0)}}function po(R,j){if(j.dangerouslySetInnerHTML!=null)throw Error(w(91));return He({},j,{value:void 0,defaultValue:void 0,children:""+R._wrapperState.initialValue})}function Ar(R,j){var N=j.value;if(N==null){if(N=j.children,j=j.defaultValue,N!=null){if(j!=null)throw Error(w(92));if(Wn(N)){if(1<N.length)throw Error(w(93));N=N[0]}j=N}j==null&&(j=""),N=j}R._wrapperState={initialValue:it(N)}}function Tr(R,j){var N=it(j.value),F=it(j.defaultValue);N!=null&&(N=""+N,N!==R.value&&(R.value=N),j.defaultValue==null&&R.defaultValue!==N&&(R.defaultValue=N)),F!=null&&(R.defaultValue=""+F)}function pr(R){var j=R.textContent;j===R._wrapperState.initialValue&&j!==""&&j!==null&&(R.value=j)}function Kn(R){switch(R){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zn(R,j){return R==null||R==="http://www.w3.org/1999/xhtml"?Kn(j):R==="http://www.w3.org/2000/svg"&&j==="foreignObject"?"http://www.w3.org/1999/xhtml":R}var Pr,xt=(function(R){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(j,N,F,V){MSApp.execUnsafeLocalFunction(function(){return R(j,N,F,V)})}:R})(function(R,j){if(R.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in R)R.innerHTML=j;else{for(Pr=Pr||document.createElement("div"),Pr.innerHTML="<svg>"+j.valueOf().toString()+"</svg>",j=Pr.firstChild;R.firstChild;)R.removeChild(R.firstChild);for(;j.firstChild;)R.appendChild(j.firstChild)}});function tr(R,j){if(j){var N=R.firstChild;if(N&&N===R.lastChild&&N.nodeType===3){N.nodeValue=j;return}}R.textContent=j}var nr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rr=["Webkit","ms","Moz","O"];Object.keys(nr).forEach(function(R){rr.forEach(function(j){j=j+R.charAt(0).toUpperCase()+R.substring(1),nr[j]=nr[R]})});function hr(R,j,N){return j==null||typeof j=="boolean"||j===""?"":N||typeof j!="number"||j===0||nr.hasOwnProperty(R)&&nr[R]?(""+j).trim():j+"px"}function ho(R,j){R=R.style;for(var N in j)if(j.hasOwnProperty(N)){var F=N.indexOf("--")===0,V=hr(N,j[N],F);N==="float"&&(N="cssFloat"),F?R.setProperty(N,V):R[N]=V}}var or=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mt(R,j){if(j){if(or[R]&&(j.children!=null||j.dangerouslySetInnerHTML!=null))throw Error(w(137,R));if(j.dangerouslySetInnerHTML!=null){if(j.children!=null)throw Error(w(60));if(typeof j.dangerouslySetInnerHTML!="object"||!("__html"in j.dangerouslySetInnerHTML))throw Error(w(61))}if(j.style!=null&&typeof j.style!="object")throw Error(w(62))}}function sr(R,j){if(R.indexOf("-")===-1)return typeof j.is=="string";switch(R){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nn=null;function jr(R){return R=R.target||R.srcElement||window,R.correspondingUseElement&&(R=R.correspondingUseElement),R.nodeType===3?R.parentNode:R}var ut=null,_e=null,Fe=null;function pt(R){if(R=wi(R)){if(typeof ut!="function")throw Error(w(280));var j=R.stateNode;j&&(j=la(j),ut(R.stateNode,R.type,j))}}function bt(R){_e?Fe?Fe.push(R):Fe=[R]:_e=R}function Be(){if(_e){var R=_e,j=Fe;if(Fe=_e=null,pt(R),j)for(R=0;R<j.length;R++)pt(j[R])}}function $t(R,j){return R(j)}function Gn(){}var Qt=!1;function hn(R,j,N){if(Qt)return R(j,N);Qt=!0;try{return $t(R,j,N)}finally{Qt=!1,(_e!==null||Fe!==null)&&(Gn(),Be())}}function Sn(R,j){var N=R.stateNode;if(N===null)return null;var F=la(N);if(F===null)return null;N=F[j];e:switch(j){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(F=!F.disabled)||(R=R.type,F=!(R==="button"||R==="input"||R==="select"||R==="textarea")),R=!F;break e;default:R=!1}if(R)return null;if(N&&typeof N!="function")throw Error(w(231,j,typeof N));return N}var en=!1;if(L)try{var Ft={};Object.defineProperty(Ft,"passive",{get:function(){en=!0}}),window.addEventListener("test",Ft,Ft),window.removeEventListener("test",Ft,Ft)}catch{en=!1}function sn(R,j,N,F,V,z,ee,le,de){var Ne=Array.prototype.slice.call(arguments,3);try{j.apply(N,Ne)}catch(Qe){this.onError(Qe)}}var Bo=!1,Kr=null,zr=!1,mo=null,za={onError:function(R){Bo=!0,Kr=R}};function Or(R,j,N,F,V,z,ee,le,de){Bo=!1,Kr=null,sn.apply(za,arguments)}function go(R,j,N,F,V,z,ee,le,de){if(Or.apply(this,arguments),Bo){if(Bo){var Ne=Kr;Bo=!1,Kr=null}else throw Error(w(198));zr||(zr=!0,mo=Ne)}}function bn(R){var j=R,N=R;if(R.alternate)for(;j.return;)j=j.return;else{R=j;do j=R,(j.flags&4098)!==0&&(N=j.return),R=j.return;while(R)}return j.tag===3?N:null}function Ho(R){if(R.tag===13){var j=R.memoizedState;if(j===null&&(R=R.alternate,R!==null&&(j=R.memoizedState)),j!==null)return j.dehydrated}return null}function Mi(R){if(bn(R)!==R)throw Error(w(188))}function $r(R){var j=R.alternate;if(!j){if(j=bn(R),j===null)throw Error(w(188));return j!==R?null:R}for(var N=R,F=j;;){var V=N.return;if(V===null)break;var z=V.alternate;if(z===null){if(F=V.return,F!==null){N=F;continue}break}if(V.child===z.child){for(z=V.child;z;){if(z===N)return Mi(V),R;if(z===F)return Mi(V),j;z=z.sibling}throw Error(w(188))}if(N.return!==F.return)N=V,F=z;else{for(var ee=!1,le=V.child;le;){if(le===N){ee=!0,N=V,F=z;break}if(le===F){ee=!0,F=V,N=z;break}le=le.sibling}if(!ee){for(le=z.child;le;){if(le===N){ee=!0,N=z,F=V;break}if(le===F){ee=!0,F=z,N=V;break}le=le.sibling}if(!ee)throw Error(w(189))}}if(N.alternate!==F)throw Error(w(190))}if(N.tag!==3)throw Error(w(188));return N.stateNode.current===N?R:j}function ei(R){return R=$r(R),R!==null?Nr(R):null}function Nr(R){if(R.tag===5||R.tag===6)return R;for(R=R.child;R!==null;){var j=Nr(R);if(j!==null)return j;R=R.sibling}return null}var ti=y.unstable_scheduleCallback,ys=y.unstable_cancelCallback,Yt=y.unstable_shouldYield,Gr=y.unstable_requestPaint,Dt=y.unstable_now,Di=y.unstable_getCurrentPriorityLevel,Ir=y.unstable_ImmediatePriority,qo=y.unstable_UserBlockingPriority,xo=y.unstable_NormalPriority,ni=y.unstable_LowPriority,kr=y.unstable_IdlePriority,Uo=null,In=null;function Fi(R){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(Uo,R,void 0,(R.current.flags&128)===128)}catch{}}var Rt=Math.clz32?Math.clz32:Es,Bi=Math.log,Hi=Math.LN2;function Es(R){return R>>>=0,R===0?32:31-(Bi(R)/Hi|0)|0}var Vo=64,Bt=4194304;function mr(R){switch(R&-R){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return R&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return R&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return R}}function Lr(R,j){var N=R.pendingLanes;if(N===0)return 0;var F=0,V=R.suspendedLanes,z=R.pingedLanes,ee=N&268435455;if(ee!==0){var le=ee&~V;le!==0?F=mr(le):(z&=ee,z!==0&&(F=mr(z)))}else ee=N&~V,ee!==0?F=mr(ee):z!==0&&(F=mr(z));if(F===0)return 0;if(j!==0&&j!==F&&(j&V)===0&&(V=F&-F,z=j&-j,V>=z||V===16&&(z&4194240)!==0))return j;if((F&4)!==0&&(F|=N&16),j=R.entangledLanes,j!==0)for(R=R.entanglements,j&=F;0<j;)N=31-Rt(j),V=1<<N,F|=R[N],j&=~V;return F}function vo(R,j){switch(R){case 1:case 2:case 4:return j+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return j+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ri(R,j){for(var N=R.suspendedLanes,F=R.pingedLanes,V=R.expirationTimes,z=R.pendingLanes;0<z;){var ee=31-Rt(z),le=1<<ee,de=V[ee];de===-1?((le&N)===0||(le&F)!==0)&&(V[ee]=vo(le,j)):de<=j&&(R.expiredLanes|=le),z&=~le}}function Wo(R){return R=R.pendingLanes&-1073741825,R!==0?R:R&1073741824?1073741824:0}function Ko(){var R=Vo;return Vo<<=1,(Vo&4194240)===0&&(Vo=64),R}function _s(R){for(var j=[],N=0;31>N;N++)j.push(R);return j}function Mr(R,j,N){R.pendingLanes|=j,j!==536870912&&(R.suspendedLanes=0,R.pingedLanes=0),R=R.eventTimes,j=31-Rt(j),R[j]=N}function qi(R,j){var N=R.pendingLanes&~j;R.pendingLanes=j,R.suspendedLanes=0,R.pingedLanes=0,R.expiredLanes&=j,R.mutableReadLanes&=j,R.entangledLanes&=j,j=R.entanglements;var F=R.eventTimes;for(R=R.expirationTimes;0<N;){var V=31-Rt(N),z=1<<V;j[V]=0,F[V]=-1,R[V]=-1,N&=~z}}function Qr(R,j){var N=R.entangledLanes|=j;for(R=R.entanglements;N;){var F=31-Rt(N),V=1<<F;V&j|R[F]&j&&(R[F]|=j),N&=~V}}var Lt=0;function Ui(R){return R&=-R,1<R?4<R?(R&268435455)!==0?16:536870912:4:1}var It,ws,Vi,Wi,Cn,Dr=!1,Yr=[],En=null,gr=null,xr=null,Kt=new Map,Rn=new Map,Mn=[],zo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ss(R,j){switch(R){case"focusin":case"focusout":En=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":Kt.delete(j.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rn.delete(j.pointerId)}}function Dn(R,j,N,F,V,z){return R===null||R.nativeEvent!==z?(R={blockedOn:j,domEventName:N,eventSystemFlags:F,nativeEvent:z,targetContainers:[V]},j!==null&&(j=wi(j),j!==null&&ws(j)),R):(R.eventSystemFlags|=F,j=R.targetContainers,V!==null&&j.indexOf(V)===-1&&j.push(V),R)}function Ga(R,j,N,F,V){switch(j){case"focusin":return En=Dn(En,R,j,N,F,V),!0;case"dragenter":return gr=Dn(gr,R,j,N,F,V),!0;case"mouseover":return xr=Dn(xr,R,j,N,F,V),!0;case"pointerover":var z=V.pointerId;return Kt.set(z,Dn(Kt.get(z)||null,R,j,N,F,V)),!0;case"gotpointercapture":return z=V.pointerId,Rn.set(z,Dn(Rn.get(z)||null,R,j,N,F,V)),!0}return!1}function Qn(R){var j=os(R.target);if(j!==null){var N=bn(j);if(N!==null){if(j=N.tag,j===13){if(j=Ho(N),j!==null){R.blockedOn=j,Cn(R.priority,function(){Vi(N)});return}}else if(j===3&&N.stateNode.current.memoizedState.isDehydrated){R.blockedOn=N.tag===3?N.stateNode.containerInfo:null;return}}}R.blockedOn=null}function yo(R){if(R.blockedOn!==null)return!1;for(var j=R.targetContainers;0<j.length;){var N=Eo(R.domEventName,R.eventSystemFlags,j[0],R.nativeEvent);if(N===null){N=R.nativeEvent;var F=new N.constructor(N.type,N);nn=F,N.target.dispatchEvent(F),nn=null}else return j=wi(N),j!==null&&ws(j),R.blockedOn=N,!1;j.shift()}return!0}function oi(R,j,N){yo(R)&&N.delete(j)}function si(){Dr=!1,En!==null&&yo(En)&&(En=null),gr!==null&&yo(gr)&&(gr=null),xr!==null&&yo(xr)&&(xr=null),Kt.forEach(oi),Rn.forEach(oi)}function vr(R,j){R.blockedOn===j&&(R.blockedOn=null,Dr||(Dr=!0,y.unstable_scheduleCallback(y.unstable_NormalPriority,si)))}function Xr(R){function j(V){return vr(V,R)}if(0<Yr.length){vr(Yr[0],R);for(var N=1;N<Yr.length;N++){var F=Yr[N];F.blockedOn===R&&(F.blockedOn=null)}}for(En!==null&&vr(En,R),gr!==null&&vr(gr,R),xr!==null&&vr(xr,R),Kt.forEach(j),Rn.forEach(j),N=0;N<Mn.length;N++)F=Mn[N],F.blockedOn===R&&(F.blockedOn=null);for(;0<Mn.length&&(N=Mn[0],N.blockedOn===null);)Qn(N),N.blockedOn===null&&Mn.shift()}var Zr=ae.ReactCurrentBatchConfig,bs=!0;function Go(R,j,N,F){var V=Lt,z=Zr.transition;Zr.transition=null;try{Lt=1,ii(R,j,N,F)}finally{Lt=V,Zr.transition=z}}function Qa(R,j,N,F){var V=Lt,z=Zr.transition;Zr.transition=null;try{Lt=4,ii(R,j,N,F)}finally{Lt=V,Zr.transition=z}}function ii(R,j,N,F){if(bs){var V=Eo(R,j,N,F);if(V===null)tl(R,j,F,Jr,N),Ss(R,F);else if(Ga(V,R,j,N,F))F.stopPropagation();else if(Ss(R,F),j&4&&-1<zo.indexOf(R)){for(;V!==null;){var z=wi(V);if(z!==null&&It(z),z=Eo(R,j,N,F),z===null&&tl(R,j,F,Jr,N),z===V)break;V=z}V!==null&&F.stopPropagation()}else tl(R,j,F,null,N)}}var Jr=null;function Eo(R,j,N,F){if(Jr=null,R=jr(F),R=os(R),R!==null)if(j=bn(R),j===null)R=null;else if(N=j.tag,N===13){if(R=Ho(j),R!==null)return R;R=null}else if(N===3){if(j.stateNode.current.memoizedState.isDehydrated)return j.tag===3?j.stateNode.containerInfo:null;R=null}else j!==R&&(R=null);return Jr=R,null}function Cs(R){switch(R){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Di()){case Ir:return 1;case qo:return 4;case xo:case ni:return 16;case kr:return 536870912;default:return 16}default:return 16}}var Fr=null,ai=null,Rs=null;function As(){if(Rs)return Rs;var R,j=ai,N=j.length,F,V="value"in Fr?Fr.value:Fr.textContent,z=V.length;for(R=0;R<N&&j[R]===V[R];R++);var ee=N-R;for(F=1;F<=ee&&j[N-F]===V[z-F];F++);return Rs=V.slice(R,1<F?1-F:void 0)}function _o(R){var j=R.keyCode;return"charCode"in R?(R=R.charCode,R===0&&j===13&&(R=13)):R=j,R===10&&(R=13),32<=R||R===13?R:0}function Qo(){return!0}function Yo(){return!1}function mn(R){function j(N,F,V,z,ee){this._reactName=N,this._targetInst=V,this.type=F,this.nativeEvent=z,this.target=ee,this.currentTarget=null;for(var le in R)R.hasOwnProperty(le)&&(N=R[le],this[le]=N?N(z):z[le]);return this.isDefaultPrevented=(z.defaultPrevented!=null?z.defaultPrevented:z.returnValue===!1)?Qo:Yo,this.isPropagationStopped=Yo,this}return He(j.prototype,{preventDefault:function(){this.defaultPrevented=!0;var N=this.nativeEvent;N&&(N.preventDefault?N.preventDefault():typeof N.returnValue!="unknown"&&(N.returnValue=!1),this.isDefaultPrevented=Qo)},stopPropagation:function(){var N=this.nativeEvent;N&&(N.stopPropagation?N.stopPropagation():typeof N.cancelBubble!="unknown"&&(N.cancelBubble=!0),this.isPropagationStopped=Qo)},persist:function(){},isPersistent:Qo}),j}var yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(R){return R.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ts=mn(yr),Xo=He({},yr,{view:0,detail:0}),wo=mn(Xo),Zo,Jo,eo,So=He({},Xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:di,button:0,buttons:0,relatedTarget:function(R){return R.relatedTarget===void 0?R.fromElement===R.srcElement?R.toElement:R.fromElement:R.relatedTarget},movementX:function(R){return"movementX"in R?R.movementX:(R!==eo&&(eo&&R.type==="mousemove"?(Zo=R.screenX-eo.screenX,Jo=R.screenY-eo.screenY):Jo=Zo=0,eo=R),Zo)},movementY:function(R){return"movementY"in R?R.movementY:Jo}}),ln=mn(So),es=He({},So,{dataTransfer:0}),ns=mn(es),Ki=He({},Xo,{relatedTarget:0}),bo=mn(Ki),zi=He({},yr,{animationName:0,elapsedTime:0,pseudoElement:0}),Gi=mn(zi),Ps=He({},yr,{clipboardData:function(R){return"clipboardData"in R?R.clipboardData:window.clipboardData}}),li=mn(Ps),no=He({},yr,{data:0}),js=mn(no),ui={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Os={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ci={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qi(R){var j=this.nativeEvent;return j.getModifierState?j.getModifierState(R):(R=ci[R])?!!j[R]:!1}function di(){return Qi}var fi=He({},Xo,{key:function(R){if(R.key){var j=ui[R.key]||R.key;if(j!=="Unidentified")return j}return R.type==="keypress"?(R=_o(R),R===13?"Enter":String.fromCharCode(R)):R.type==="keydown"||R.type==="keyup"?Os[R.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:di,charCode:function(R){return R.type==="keypress"?_o(R):0},keyCode:function(R){return R.type==="keydown"||R.type==="keyup"?R.keyCode:0},which:function(R){return R.type==="keypress"?_o(R):R.type==="keydown"||R.type==="keyup"?R.keyCode:0}}),$s=mn(fi),Ya=He({},So,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ns=mn(Ya),pi=He({},Xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:di}),Xa=mn(pi),Yi=He({},yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Za=mn(Yi),Xi=He({},So,{deltaX:function(R){return"deltaX"in R?R.deltaX:"wheelDeltaX"in R?-R.wheelDeltaX:0},deltaY:function(R){return"deltaY"in R?R.deltaY:"wheelDeltaY"in R?-R.wheelDeltaY:"wheelDelta"in R?-R.wheelDelta:0},deltaZ:0,deltaMode:0}),Zi=mn(Xi),Ja=[9,13,27,32],Is=L&&"CompositionEvent"in window,ro=null;L&&"documentMode"in document&&(ro=document.documentMode);var Ji=L&&"TextEvent"in window&&!ro,hi=L&&(!Is||ro&&8<ro&&11>=ro),ea=" ",ta=!1;function na(R,j){switch(R){case"keyup":return Ja.indexOf(j.keyCode)!==-1;case"keydown":return j.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rs(R){return R=R.detail,typeof R=="object"&&"data"in R?R.data:null}var An=!1;function Xt(R,j){switch(R){case"compositionend":return rs(j);case"keypress":return j.which!==32?null:(ta=!0,ea);case"textInput":return R=j.data,R===ea&&ta?null:R;default:return null}}function ks(R,j){if(An)return R==="compositionend"||!Is&&na(R,j)?(R=As(),Rs=ai=Fr=null,An=!1,R):null;switch(R){case"paste":return null;case"keypress":if(!(j.ctrlKey||j.altKey||j.metaKey)||j.ctrlKey&&j.altKey){if(j.char&&1<j.char.length)return j.char;if(j.which)return String.fromCharCode(j.which)}return null;case"compositionend":return hi&&j.locale!=="ko"?null:j.data;default:return null}}var Fn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ra(R){var j=R&&R.nodeName&&R.nodeName.toLowerCase();return j==="input"?!!Fn[R.type]:j==="textarea"}function Ls(R,j,N,F){bt(F),j=sa(j,"onChange"),0<j.length&&(N=new Ts("onChange","change",null,N,F),R.push({event:N,listeners:j}))}var Co=null,Yn=null;function mi(R){fu(R,0)}function Er(R){var j=Fs(R);if(_t(j))return R}function Br(R,j){if(R==="change")return j}var gi=!1;if(L){var M;if(L){var q="oninput"in document;if(!q){var K=document.createElement("div");K.setAttribute("oninput","return;"),q=typeof K.oninput=="function"}M=q}else M=!1;gi=M&&(!document.documentMode||9<document.documentMode)}function Y(){Co&&(Co.detachEvent("onpropertychange",X),Yn=Co=null)}function X(R){if(R.propertyName==="value"&&Er(Yn)){var j=[];Ls(j,Yn,R,jr(R)),hn(mi,j)}}function te(R,j,N){R==="focusin"?(Y(),Co=j,Yn=N,Co.attachEvent("onpropertychange",X)):R==="focusout"&&Y()}function se(R){if(R==="selectionchange"||R==="keyup"||R==="keydown")return Er(Yn)}function ue(R,j){if(R==="click")return Er(j)}function fe(R,j){if(R==="input"||R==="change")return Er(j)}function me(R,j){return R===j&&(R!==0||1/R===1/j)||R!==R&&j!==j}var xe=typeof Object.is=="function"?Object.is:me;function ce(R,j){if(xe(R,j))return!0;if(typeof R!="object"||R===null||typeof j!="object"||j===null)return!1;var N=Object.keys(R),F=Object.keys(j);if(N.length!==F.length)return!1;for(F=0;F<N.length;F++){var V=N[F];if(!D.call(j,V)||!xe(R[V],j[V]))return!1}return!0}function Ce(R){for(;R&&R.firstChild;)R=R.firstChild;return R}function pe(R,j){var N=Ce(R);R=0;for(var F;N;){if(N.nodeType===3){if(F=R+N.textContent.length,R<=j&&F>=j)return{node:N,offset:j-R};R=F}e:{for(;N;){if(N.nextSibling){N=N.nextSibling;break e}N=N.parentNode}N=void 0}N=Ce(N)}}function ye(R,j){return R&&j?R===j?!0:R&&R.nodeType===3?!1:j&&j.nodeType===3?ye(R,j.parentNode):"contains"in R?R.contains(j):R.compareDocumentPosition?!!(R.compareDocumentPosition(j)&16):!1:!1}function Se(){for(var R=window,j=Ht();j instanceof R.HTMLIFrameElement;){try{var N=typeof j.contentWindow.location.href=="string"}catch{N=!1}if(N)R=j.contentWindow;else break;j=Ht(R.document)}return j}function Ee(R){var j=R&&R.nodeName&&R.nodeName.toLowerCase();return j&&(j==="input"&&(R.type==="text"||R.type==="search"||R.type==="tel"||R.type==="url"||R.type==="password")||j==="textarea"||R.contentEditable==="true")}function Ae(R){var j=Se(),N=R.focusedElem,F=R.selectionRange;if(j!==N&&N&&N.ownerDocument&&ye(N.ownerDocument.documentElement,N)){if(F!==null&&Ee(N)){if(j=F.start,R=F.end,R===void 0&&(R=j),"selectionStart"in N)N.selectionStart=j,N.selectionEnd=Math.min(R,N.value.length);else if(R=(j=N.ownerDocument||document)&&j.defaultView||window,R.getSelection){R=R.getSelection();var V=N.textContent.length,z=Math.min(F.start,V);F=F.end===void 0?z:Math.min(F.end,V),!R.extend&&z>F&&(V=F,F=z,z=V),V=pe(N,z);var ee=pe(N,F);V&&ee&&(R.rangeCount!==1||R.anchorNode!==V.node||R.anchorOffset!==V.offset||R.focusNode!==ee.node||R.focusOffset!==ee.offset)&&(j=j.createRange(),j.setStart(V.node,V.offset),R.removeAllRanges(),z>F?(R.addRange(j),R.extend(ee.node,ee.offset)):(j.setEnd(ee.node,ee.offset),R.addRange(j)))}}for(j=[],R=N;R=R.parentNode;)R.nodeType===1&&j.push({element:R,left:R.scrollLeft,top:R.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<j.length;N++)R=j[N],R.element.scrollLeft=R.left,R.element.scrollTop=R.top}}var Ie=L&&"documentMode"in document&&11>=document.documentMode,ke=null,Me=null,Ge=null,ot=!1;function tt(R,j,N){var F=N.window===N?N.document:N.nodeType===9?N:N.ownerDocument;ot||ke==null||ke!==Ht(F)||(F=ke,"selectionStart"in F&&Ee(F)?F={start:F.selectionStart,end:F.selectionEnd}:(F=(F.ownerDocument&&F.ownerDocument.defaultView||window).getSelection(),F={anchorNode:F.anchorNode,anchorOffset:F.anchorOffset,focusNode:F.focusNode,focusOffset:F.focusOffset}),Ge&&ce(Ge,F)||(Ge=F,F=sa(Me,"onSelect"),0<F.length&&(j=new Ts("onSelect","select",null,j,N),R.push({event:j,listeners:F}),j.target=ke)))}function nt(R,j){var N={};return N[R.toLowerCase()]=j.toLowerCase(),N["Webkit"+R]="webkit"+j,N["Moz"+R]="moz"+j,N}var at={animationend:nt("Animation","AnimationEnd"),animationiteration:nt("Animation","AnimationIteration"),animationstart:nt("Animation","AnimationStart"),transitionend:nt("Transition","TransitionEnd")},lt={},ct={};L&&(ct=document.createElement("div").style,"AnimationEvent"in window||(delete at.animationend.animation,delete at.animationiteration.animation,delete at.animationstart.animation),"TransitionEvent"in window||delete at.transitionend.transition);function At(R){if(lt[R])return lt[R];if(!at[R])return R;var j=at[R],N;for(N in j)if(j.hasOwnProperty(N)&&N in ct)return lt[R]=j[N];return R}var Nt=At("animationend"),Pt=At("animationiteration"),Ut=At("animationstart"),Ct=At("transitionend"),un=new Map,cn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xn(R,j){un.set(R,j),O(j,[R])}for(var dn=0;dn<cn.length;dn++){var _r=cn[dn],xi=_r.toLowerCase(),ed=_r[0].toUpperCase()+_r.slice(1);Xn(xi,"on"+ed)}Xn(Nt,"onAnimationEnd"),Xn(Pt,"onAnimationIteration"),Xn(Ut,"onAnimationStart"),Xn("dblclick","onDoubleClick"),Xn("focusin","onFocus"),Xn("focusout","onBlur"),Xn(Ct,"onTransitionEnd"),$("onMouseEnter",["mouseout","mouseover"]),$("onMouseLeave",["mouseout","mouseover"]),$("onPointerEnter",["pointerout","pointerover"]),$("onPointerLeave",["pointerout","pointerover"]),O("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),O("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),O("onBeforeInput",["compositionend","keypress","textInput","paste"]),O("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),O("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),O("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),td=new Set("cancel close invalid load scroll toggle".split(" ").concat(vi));function du(R,j,N){var F=R.type||"unknown-event";R.currentTarget=N,go(F,j,void 0,R),R.currentTarget=null}function fu(R,j){j=(j&4)!==0;for(var N=0;N<R.length;N++){var F=R[N],V=F.event;F=F.listeners;e:{var z=void 0;if(j)for(var ee=F.length-1;0<=ee;ee--){var le=F[ee],de=le.instance,Ne=le.currentTarget;if(le=le.listener,de!==z&&V.isPropagationStopped())break e;du(V,le,Ne),z=de}else for(ee=0;ee<F.length;ee++){if(le=F[ee],de=le.instance,Ne=le.currentTarget,le=le.listener,de!==z&&V.isPropagationStopped())break e;du(V,le,Ne),z=de}}}if(zr)throw R=mo,zr=!1,mo=null,R}function Vt(R,j){var N=j[al];N===void 0&&(N=j[al]=new Set);var F=R+"__bubble";N.has(F)||(pu(j,R,2,!1),N.add(F))}function el(R,j,N){var F=0;j&&(F|=4),pu(N,R,F,j)}var oa="_reactListening"+Math.random().toString(36).slice(2);function yi(R){if(!R[oa]){R[oa]=!0,C.forEach(function(N){N!=="selectionchange"&&(td.has(N)||el(N,!1,R),el(N,!0,R))});var j=R.nodeType===9?R:R.ownerDocument;j===null||j[oa]||(j[oa]=!0,el("selectionchange",!1,j))}}function pu(R,j,N,F){switch(Cs(j)){case 1:var V=Go;break;case 4:V=Qa;break;default:V=ii}N=V.bind(null,j,N,R),V=void 0,!en||j!=="touchstart"&&j!=="touchmove"&&j!=="wheel"||(V=!0),F?V!==void 0?R.addEventListener(j,N,{capture:!0,passive:V}):R.addEventListener(j,N,!0):V!==void 0?R.addEventListener(j,N,{passive:V}):R.addEventListener(j,N,!1)}function tl(R,j,N,F,V){var z=F;if((j&1)===0&&(j&2)===0&&F!==null)e:for(;;){if(F===null)return;var ee=F.tag;if(ee===3||ee===4){var le=F.stateNode.containerInfo;if(le===V||le.nodeType===8&&le.parentNode===V)break;if(ee===4)for(ee=F.return;ee!==null;){var de=ee.tag;if((de===3||de===4)&&(de=ee.stateNode.containerInfo,de===V||de.nodeType===8&&de.parentNode===V))return;ee=ee.return}for(;le!==null;){if(ee=os(le),ee===null)return;if(de=ee.tag,de===5||de===6){F=z=ee;continue e}le=le.parentNode}}F=F.return}hn(function(){var Ne=z,Qe=jr(N),Je=[];e:{var ze=un.get(R);if(ze!==void 0){var ft=Ts,gt=R;switch(R){case"keypress":if(_o(N)===0)break e;case"keydown":case"keyup":ft=$s;break;case"focusin":gt="focus",ft=bo;break;case"focusout":gt="blur",ft=bo;break;case"beforeblur":case"afterblur":ft=bo;break;case"click":if(N.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ft=ln;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ft=ns;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ft=Xa;break;case Nt:case Pt:case Ut:ft=Gi;break;case Ct:ft=Za;break;case"scroll":ft=wo;break;case"wheel":ft=Zi;break;case"copy":case"cut":case"paste":ft=li;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ft=Ns}var vt=(j&4)!==0,rn=!vt&&R==="scroll",Pe=vt?ze!==null?ze+"Capture":null:ze;vt=[];for(var ge=Ne,$e;ge!==null;){$e=ge;var rt=$e.stateNode;if($e.tag===5&&rt!==null&&($e=rt,Pe!==null&&(rt=Sn(ge,Pe),rt!=null&&vt.push(Ei(ge,rt,$e)))),rn)break;ge=ge.return}0<vt.length&&(ze=new ft(ze,gt,null,N,Qe),Je.push({event:ze,listeners:vt}))}}if((j&7)===0){e:{if(ze=R==="mouseover"||R==="pointerover",ft=R==="mouseout"||R==="pointerout",ze&&N!==nn&&(gt=N.relatedTarget||N.fromElement)&&(os(gt)||gt[oo]))break e;if((ft||ze)&&(ze=Qe.window===Qe?Qe:(ze=Qe.ownerDocument)?ze.defaultView||ze.parentWindow:window,ft?(gt=N.relatedTarget||N.toElement,ft=Ne,gt=gt?os(gt):null,gt!==null&&(rn=bn(gt),gt!==rn||gt.tag!==5&&gt.tag!==6)&&(gt=null)):(ft=null,gt=Ne),ft!==gt)){if(vt=ln,rt="onMouseLeave",Pe="onMouseEnter",ge="mouse",(R==="pointerout"||R==="pointerover")&&(vt=Ns,rt="onPointerLeave",Pe="onPointerEnter",ge="pointer"),rn=ft==null?ze:Fs(ft),$e=gt==null?ze:Fs(gt),ze=new vt(rt,ge+"leave",ft,N,Qe),ze.target=rn,ze.relatedTarget=$e,rt=null,os(Qe)===Ne&&(vt=new vt(Pe,ge+"enter",gt,N,Qe),vt.target=$e,vt.relatedTarget=rn,rt=vt),rn=rt,ft&&gt)t:{for(vt=ft,Pe=gt,ge=0,$e=vt;$e;$e=Ms($e))ge++;for($e=0,rt=Pe;rt;rt=Ms(rt))$e++;for(;0<ge-$e;)vt=Ms(vt),ge--;for(;0<$e-ge;)Pe=Ms(Pe),$e--;for(;ge--;){if(vt===Pe||Pe!==null&&vt===Pe.alternate)break t;vt=Ms(vt),Pe=Ms(Pe)}vt=null}else vt=null;ft!==null&&hu(Je,ze,ft,vt,!1),gt!==null&&rn!==null&&hu(Je,rn,gt,vt,!0)}}e:{if(ze=Ne?Fs(Ne):window,ft=ze.nodeName&&ze.nodeName.toLowerCase(),ft==="select"||ft==="input"&&ze.type==="file")var yt=Br;else if(ra(ze))if(gi)yt=fe;else{yt=se;var wt=te}else(ft=ze.nodeName)&&ft.toLowerCase()==="input"&&(ze.type==="checkbox"||ze.type==="radio")&&(yt=ue);if(yt&&(yt=yt(R,Ne))){Ls(Je,yt,N,Qe);break e}wt&&wt(R,ze,Ne),R==="focusout"&&(wt=ze._wrapperState)&&wt.controlled&&ze.type==="number"&&Fo(ze,"number",ze.value)}switch(wt=Ne?Fs(Ne):window,R){case"focusin":(ra(wt)||wt.contentEditable==="true")&&(ke=wt,Me=Ne,Ge=null);break;case"focusout":Ge=Me=ke=null;break;case"mousedown":ot=!0;break;case"contextmenu":case"mouseup":case"dragend":ot=!1,tt(Je,N,Qe);break;case"selectionchange":if(Ie)break;case"keydown":case"keyup":tt(Je,N,Qe)}var St;if(Is)e:{switch(R){case"compositionstart":var jt="onCompositionStart";break e;case"compositionend":jt="onCompositionEnd";break e;case"compositionupdate":jt="onCompositionUpdate";break e}jt=void 0}else An?na(R,N)&&(jt="onCompositionEnd"):R==="keydown"&&N.keyCode===229&&(jt="onCompositionStart");jt&&(hi&&N.locale!=="ko"&&(An||jt!=="onCompositionStart"?jt==="onCompositionEnd"&&An&&(St=As()):(Fr=Qe,ai="value"in Fr?Fr.value:Fr.textContent,An=!0)),wt=sa(Ne,jt),0<wt.length&&(jt=new js(jt,R,null,N,Qe),Je.push({event:jt,listeners:wt}),St?jt.data=St:(St=rs(N),St!==null&&(jt.data=St)))),(St=Ji?Xt(R,N):ks(R,N))&&(Ne=sa(Ne,"onBeforeInput"),0<Ne.length&&(Qe=new js("onBeforeInput","beforeinput",null,N,Qe),Je.push({event:Qe,listeners:Ne}),Qe.data=St))}fu(Je,j)})}function Ei(R,j,N){return{instance:R,listener:j,currentTarget:N}}function sa(R,j){for(var N=j+"Capture",F=[];R!==null;){var V=R,z=V.stateNode;V.tag===5&&z!==null&&(V=z,z=Sn(R,N),z!=null&&F.unshift(Ei(R,z,V)),z=Sn(R,j),z!=null&&F.push(Ei(R,z,V))),R=R.return}return F}function Ms(R){if(R===null)return null;do R=R.return;while(R&&R.tag!==5);return R||null}function hu(R,j,N,F,V){for(var z=j._reactName,ee=[];N!==null&&N!==F;){var le=N,de=le.alternate,Ne=le.stateNode;if(de!==null&&de===F)break;le.tag===5&&Ne!==null&&(le=Ne,V?(de=Sn(N,z),de!=null&&ee.unshift(Ei(N,de,le))):V||(de=Sn(N,z),de!=null&&ee.push(Ei(N,de,le)))),N=N.return}ee.length!==0&&R.push({event:j,listeners:ee})}var nd=/\r\n?/g,rd=/\u0000|\uFFFD/g;function mu(R){return(typeof R=="string"?R:""+R).replace(nd,`
`).replace(rd,"")}function ia(R,j,N){if(j=mu(j),mu(R)!==j&&N)throw Error(w(425))}function aa(){}var nl=null,rl=null;function ol(R,j){return R==="textarea"||R==="noscript"||typeof j.children=="string"||typeof j.children=="number"||typeof j.dangerouslySetInnerHTML=="object"&&j.dangerouslySetInnerHTML!==null&&j.dangerouslySetInnerHTML.__html!=null}var sl=typeof setTimeout=="function"?setTimeout:void 0,od=typeof clearTimeout=="function"?clearTimeout:void 0,gu=typeof Promise=="function"?Promise:void 0,sd=typeof queueMicrotask=="function"?queueMicrotask:typeof gu<"u"?function(R){return gu.resolve(null).then(R).catch(id)}:sl;function id(R){setTimeout(function(){throw R})}function il(R,j){var N=j,F=0;do{var V=N.nextSibling;if(R.removeChild(N),V&&V.nodeType===8)if(N=V.data,N==="/$"){if(F===0){R.removeChild(V),Xr(j);return}F--}else N!=="$"&&N!=="$?"&&N!=="$!"||F++;N=V}while(N);Xr(j)}function Ro(R){for(;R!=null;R=R.nextSibling){var j=R.nodeType;if(j===1||j===3)break;if(j===8){if(j=R.data,j==="$"||j==="$!"||j==="$?")break;if(j==="/$")return null}}return R}function xu(R){R=R.previousSibling;for(var j=0;R;){if(R.nodeType===8){var N=R.data;if(N==="$"||N==="$!"||N==="$?"){if(j===0)return R;j--}else N==="/$"&&j++}R=R.previousSibling}return null}var Ds=Math.random().toString(36).slice(2),qr="__reactFiber$"+Ds,_i="__reactProps$"+Ds,oo="__reactContainer$"+Ds,al="__reactEvents$"+Ds,ad="__reactListeners$"+Ds,ld="__reactHandles$"+Ds;function os(R){var j=R[qr];if(j)return j;for(var N=R.parentNode;N;){if(j=N[oo]||N[qr]){if(N=j.alternate,j.child!==null||N!==null&&N.child!==null)for(R=xu(R);R!==null;){if(N=R[qr])return N;R=xu(R)}return j}R=N,N=R.parentNode}return null}function wi(R){return R=R[qr]||R[oo],!R||R.tag!==5&&R.tag!==6&&R.tag!==13&&R.tag!==3?null:R}function Fs(R){if(R.tag===5||R.tag===6)return R.stateNode;throw Error(w(33))}function la(R){return R[_i]||null}var ll=[],Bs=-1;function Ao(R){return{current:R}}function Wt(R){0>Bs||(R.current=ll[Bs],ll[Bs]=null,Bs--)}function qt(R,j){Bs++,ll[Bs]=R.current,R.current=j}var To={},Tn=Ao(To),Bn=Ao(!1),ss=To;function Hs(R,j){var N=R.type.contextTypes;if(!N)return To;var F=R.stateNode;if(F&&F.__reactInternalMemoizedUnmaskedChildContext===j)return F.__reactInternalMemoizedMaskedChildContext;var V={},z;for(z in N)V[z]=j[z];return F&&(R=R.stateNode,R.__reactInternalMemoizedUnmaskedChildContext=j,R.__reactInternalMemoizedMaskedChildContext=V),V}function Hn(R){return R=R.childContextTypes,R!=null}function ua(){Wt(Bn),Wt(Tn)}function vu(R,j,N){if(Tn.current!==To)throw Error(w(168));qt(Tn,j),qt(Bn,N)}function yu(R,j,N){var F=R.stateNode;if(j=j.childContextTypes,typeof F.getChildContext!="function")return N;F=F.getChildContext();for(var V in F)if(!(V in j))throw Error(w(108,De(R)||"Unknown",V));return He({},N,F)}function ca(R){return R=(R=R.stateNode)&&R.__reactInternalMemoizedMergedChildContext||To,ss=Tn.current,qt(Tn,R),qt(Bn,Bn.current),!0}function Eu(R,j,N){var F=R.stateNode;if(!F)throw Error(w(169));N?(R=yu(R,j,ss),F.__reactInternalMemoizedMergedChildContext=R,Wt(Bn),Wt(Tn),qt(Tn,R)):Wt(Bn),qt(Bn,N)}var so=null,da=!1,ul=!1;function _u(R){so===null?so=[R]:so.push(R)}function ud(R){da=!0,_u(R)}function Po(){if(!ul&&so!==null){ul=!0;var R=0,j=Lt;try{var N=so;for(Lt=1;R<N.length;R++){var F=N[R];do F=F(!0);while(F!==null)}so=null,da=!1}catch(V){throw so!==null&&(so=so.slice(R+1)),ti(Ir,Po),V}finally{Lt=j,ul=!1}}return null}var qs=[],Us=0,fa=null,pa=0,ir=[],ar=0,as=null,io=1,ao="";function ls(R,j){qs[Us++]=pa,qs[Us++]=fa,fa=R,pa=j}function wu(R,j,N){ir[ar++]=io,ir[ar++]=ao,ir[ar++]=as,as=R;var F=io;R=ao;var V=32-Rt(F)-1;F&=~(1<<V),N+=1;var z=32-Rt(j)+V;if(30<z){var ee=V-V%5;z=(F&(1<<ee)-1).toString(32),F>>=ee,V-=ee,io=1<<32-Rt(j)+V|N<<V|F,ao=z+R}else io=1<<z|N<<V|F,ao=R}function cl(R){R.return!==null&&(ls(R,1),wu(R,1,0))}function dl(R){for(;R===fa;)fa=qs[--Us],qs[Us]=null,pa=qs[--Us],qs[Us]=null;for(;R===as;)as=ir[--ar],ir[ar]=null,ao=ir[--ar],ir[ar]=null,io=ir[--ar],ir[ar]=null}var Zn=null,Jn=null,zt=!1,wr=null;function Su(R,j){var N=dr(5,null,null,0);N.elementType="DELETED",N.stateNode=j,N.return=R,j=R.deletions,j===null?(R.deletions=[N],R.flags|=16):j.push(N)}function bu(R,j){switch(R.tag){case 5:var N=R.type;return j=j.nodeType!==1||N.toLowerCase()!==j.nodeName.toLowerCase()?null:j,j!==null?(R.stateNode=j,Zn=R,Jn=Ro(j.firstChild),!0):!1;case 6:return j=R.pendingProps===""||j.nodeType!==3?null:j,j!==null?(R.stateNode=j,Zn=R,Jn=null,!0):!1;case 13:return j=j.nodeType!==8?null:j,j!==null?(N=as!==null?{id:io,overflow:ao}:null,R.memoizedState={dehydrated:j,treeContext:N,retryLane:1073741824},N=dr(18,null,null,0),N.stateNode=j,N.return=R,R.child=N,Zn=R,Jn=null,!0):!1;default:return!1}}function fl(R){return(R.mode&1)!==0&&(R.flags&128)===0}function pl(R){if(zt){var j=Jn;if(j){var N=j;if(!bu(R,j)){if(fl(R))throw Error(w(418));j=Ro(N.nextSibling);var F=Zn;j&&bu(R,j)?Su(F,N):(R.flags=R.flags&-4097|2,zt=!1,Zn=R)}}else{if(fl(R))throw Error(w(418));R.flags=R.flags&-4097|2,zt=!1,Zn=R}}}function Cu(R){for(R=R.return;R!==null&&R.tag!==5&&R.tag!==3&&R.tag!==13;)R=R.return;Zn=R}function ha(R){if(R!==Zn)return!1;if(!zt)return Cu(R),zt=!0,!1;var j;if((j=R.tag!==3)&&!(j=R.tag!==5)&&(j=R.type,j=j!=="head"&&j!=="body"&&!ol(R.type,R.memoizedProps)),j&&(j=Jn)){if(fl(R))throw Ru(),Error(w(418));for(;j;)Su(R,j),j=Ro(j.nextSibling)}if(Cu(R),R.tag===13){if(R=R.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(w(317));e:{for(R=R.nextSibling,j=0;R;){if(R.nodeType===8){var N=R.data;if(N==="/$"){if(j===0){Jn=Ro(R.nextSibling);break e}j--}else N!=="$"&&N!=="$!"&&N!=="$?"||j++}R=R.nextSibling}Jn=null}}else Jn=Zn?Ro(R.stateNode.nextSibling):null;return!0}function Ru(){for(var R=Jn;R;)R=Ro(R.nextSibling)}function Vs(){Jn=Zn=null,zt=!1}function hl(R){wr===null?wr=[R]:wr.push(R)}var cd=ae.ReactCurrentBatchConfig;function Si(R,j,N){if(R=N.ref,R!==null&&typeof R!="function"&&typeof R!="object"){if(N._owner){if(N=N._owner,N){if(N.tag!==1)throw Error(w(309));var F=N.stateNode}if(!F)throw Error(w(147,R));var V=F,z=""+R;return j!==null&&j.ref!==null&&typeof j.ref=="function"&&j.ref._stringRef===z?j.ref:(j=function(ee){var le=V.refs;ee===null?delete le[z]:le[z]=ee},j._stringRef=z,j)}if(typeof R!="string")throw Error(w(284));if(!N._owner)throw Error(w(290,R))}return R}function ma(R,j){throw R=Object.prototype.toString.call(j),Error(w(31,R==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":R))}function Au(R){var j=R._init;return j(R._payload)}function Tu(R){function j(Pe,ge){if(R){var $e=Pe.deletions;$e===null?(Pe.deletions=[ge],Pe.flags|=16):$e.push(ge)}}function N(Pe,ge){if(!R)return null;for(;ge!==null;)j(Pe,ge),ge=ge.sibling;return null}function F(Pe,ge){for(Pe=new Map;ge!==null;)ge.key!==null?Pe.set(ge.key,ge):Pe.set(ge.index,ge),ge=ge.sibling;return Pe}function V(Pe,ge){return Pe=Mo(Pe,ge),Pe.index=0,Pe.sibling=null,Pe}function z(Pe,ge,$e){return Pe.index=$e,R?($e=Pe.alternate,$e!==null?($e=$e.index,$e<ge?(Pe.flags|=2,ge):$e):(Pe.flags|=2,ge)):(Pe.flags|=1048576,ge)}function ee(Pe){return R&&Pe.alternate===null&&(Pe.flags|=2),Pe}function le(Pe,ge,$e,rt){return ge===null||ge.tag!==6?(ge=su($e,Pe.mode,rt),ge.return=Pe,ge):(ge=V(ge,$e),ge.return=Pe,ge)}function de(Pe,ge,$e,rt){var yt=$e.type;return yt===re?Qe(Pe,ge,$e.props.children,rt,$e.key):ge!==null&&(ge.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===Ve&&Au(yt)===ge.type)?(rt=V(ge,$e.props),rt.ref=Si(Pe,ge,$e),rt.return=Pe,rt):(rt=Fa($e.type,$e.key,$e.props,null,Pe.mode,rt),rt.ref=Si(Pe,ge,$e),rt.return=Pe,rt)}function Ne(Pe,ge,$e,rt){return ge===null||ge.tag!==4||ge.stateNode.containerInfo!==$e.containerInfo||ge.stateNode.implementation!==$e.implementation?(ge=iu($e,Pe.mode,rt),ge.return=Pe,ge):(ge=V(ge,$e.children||[]),ge.return=Pe,ge)}function Qe(Pe,ge,$e,rt,yt){return ge===null||ge.tag!==7?(ge=xs($e,Pe.mode,rt,yt),ge.return=Pe,ge):(ge=V(ge,$e),ge.return=Pe,ge)}function Je(Pe,ge,$e){if(typeof ge=="string"&&ge!==""||typeof ge=="number")return ge=su(""+ge,Pe.mode,$e),ge.return=Pe,ge;if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case ve:return $e=Fa(ge.type,ge.key,ge.props,null,Pe.mode,$e),$e.ref=Si(Pe,null,ge),$e.return=Pe,$e;case Te:return ge=iu(ge,Pe.mode,$e),ge.return=Pe,ge;case Ve:var rt=ge._init;return Je(Pe,rt(ge._payload),$e)}if(Wn(ge)||Oe(ge))return ge=xs(ge,Pe.mode,$e,null),ge.return=Pe,ge;ma(Pe,ge)}return null}function ze(Pe,ge,$e,rt){var yt=ge!==null?ge.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number")return yt!==null?null:le(Pe,ge,""+$e,rt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case ve:return $e.key===yt?de(Pe,ge,$e,rt):null;case Te:return $e.key===yt?Ne(Pe,ge,$e,rt):null;case Ve:return yt=$e._init,ze(Pe,ge,yt($e._payload),rt)}if(Wn($e)||Oe($e))return yt!==null?null:Qe(Pe,ge,$e,rt,null);ma(Pe,$e)}return null}function ft(Pe,ge,$e,rt,yt){if(typeof rt=="string"&&rt!==""||typeof rt=="number")return Pe=Pe.get($e)||null,le(ge,Pe,""+rt,yt);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case ve:return Pe=Pe.get(rt.key===null?$e:rt.key)||null,de(ge,Pe,rt,yt);case Te:return Pe=Pe.get(rt.key===null?$e:rt.key)||null,Ne(ge,Pe,rt,yt);case Ve:var wt=rt._init;return ft(Pe,ge,$e,wt(rt._payload),yt)}if(Wn(rt)||Oe(rt))return Pe=Pe.get($e)||null,Qe(ge,Pe,rt,yt,null);ma(ge,rt)}return null}function gt(Pe,ge,$e,rt){for(var yt=null,wt=null,St=ge,jt=ge=0,vn=null;St!==null&&jt<$e.length;jt++){St.index>jt?(vn=St,St=null):vn=St.sibling;var Mt=ze(Pe,St,$e[jt],rt);if(Mt===null){St===null&&(St=vn);break}R&&St&&Mt.alternate===null&&j(Pe,St),ge=z(Mt,ge,jt),wt===null?yt=Mt:wt.sibling=Mt,wt=Mt,St=vn}if(jt===$e.length)return N(Pe,St),zt&&ls(Pe,jt),yt;if(St===null){for(;jt<$e.length;jt++)St=Je(Pe,$e[jt],rt),St!==null&&(ge=z(St,ge,jt),wt===null?yt=St:wt.sibling=St,wt=St);return zt&&ls(Pe,jt),yt}for(St=F(Pe,St);jt<$e.length;jt++)vn=ft(St,Pe,jt,$e[jt],rt),vn!==null&&(R&&vn.alternate!==null&&St.delete(vn.key===null?jt:vn.key),ge=z(vn,ge,jt),wt===null?yt=vn:wt.sibling=vn,wt=vn);return R&&St.forEach(function(Do){return j(Pe,Do)}),zt&&ls(Pe,jt),yt}function vt(Pe,ge,$e,rt){var yt=Oe($e);if(typeof yt!="function")throw Error(w(150));if($e=yt.call($e),$e==null)throw Error(w(151));for(var wt=yt=null,St=ge,jt=ge=0,vn=null,Mt=$e.next();St!==null&&!Mt.done;jt++,Mt=$e.next()){St.index>jt?(vn=St,St=null):vn=St.sibling;var Do=ze(Pe,St,Mt.value,rt);if(Do===null){St===null&&(St=vn);break}R&&St&&Do.alternate===null&&j(Pe,St),ge=z(Do,ge,jt),wt===null?yt=Do:wt.sibling=Do,wt=Do,St=vn}if(Mt.done)return N(Pe,St),zt&&ls(Pe,jt),yt;if(St===null){for(;!Mt.done;jt++,Mt=$e.next())Mt=Je(Pe,Mt.value,rt),Mt!==null&&(ge=z(Mt,ge,jt),wt===null?yt=Mt:wt.sibling=Mt,wt=Mt);return zt&&ls(Pe,jt),yt}for(St=F(Pe,St);!Mt.done;jt++,Mt=$e.next())Mt=ft(St,Pe,jt,Mt.value,rt),Mt!==null&&(R&&Mt.alternate!==null&&St.delete(Mt.key===null?jt:Mt.key),ge=z(Mt,ge,jt),wt===null?yt=Mt:wt.sibling=Mt,wt=Mt);return R&&St.forEach(function(Ud){return j(Pe,Ud)}),zt&&ls(Pe,jt),yt}function rn(Pe,ge,$e,rt){if(typeof $e=="object"&&$e!==null&&$e.type===re&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case ve:e:{for(var yt=$e.key,wt=ge;wt!==null;){if(wt.key===yt){if(yt=$e.type,yt===re){if(wt.tag===7){N(Pe,wt.sibling),ge=V(wt,$e.props.children),ge.return=Pe,Pe=ge;break e}}else if(wt.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===Ve&&Au(yt)===wt.type){N(Pe,wt.sibling),ge=V(wt,$e.props),ge.ref=Si(Pe,wt,$e),ge.return=Pe,Pe=ge;break e}N(Pe,wt);break}else j(Pe,wt);wt=wt.sibling}$e.type===re?(ge=xs($e.props.children,Pe.mode,rt,$e.key),ge.return=Pe,Pe=ge):(rt=Fa($e.type,$e.key,$e.props,null,Pe.mode,rt),rt.ref=Si(Pe,ge,$e),rt.return=Pe,Pe=rt)}return ee(Pe);case Te:e:{for(wt=$e.key;ge!==null;){if(ge.key===wt)if(ge.tag===4&&ge.stateNode.containerInfo===$e.containerInfo&&ge.stateNode.implementation===$e.implementation){N(Pe,ge.sibling),ge=V(ge,$e.children||[]),ge.return=Pe,Pe=ge;break e}else{N(Pe,ge);break}else j(Pe,ge);ge=ge.sibling}ge=iu($e,Pe.mode,rt),ge.return=Pe,Pe=ge}return ee(Pe);case Ve:return wt=$e._init,rn(Pe,ge,wt($e._payload),rt)}if(Wn($e))return gt(Pe,ge,$e,rt);if(Oe($e))return vt(Pe,ge,$e,rt);ma(Pe,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"?($e=""+$e,ge!==null&&ge.tag===6?(N(Pe,ge.sibling),ge=V(ge,$e),ge.return=Pe,Pe=ge):(N(Pe,ge),ge=su($e,Pe.mode,rt),ge.return=Pe,Pe=ge),ee(Pe)):N(Pe,ge)}return rn}var Ws=Tu(!0),Pu=Tu(!1),ga=Ao(null),xa=null,Ks=null,ml=null;function gl(){ml=Ks=xa=null}function xl(R){var j=ga.current;Wt(ga),R._currentValue=j}function vl(R,j,N){for(;R!==null;){var F=R.alternate;if((R.childLanes&j)!==j?(R.childLanes|=j,F!==null&&(F.childLanes|=j)):F!==null&&(F.childLanes&j)!==j&&(F.childLanes|=j),R===N)break;R=R.return}}function zs(R,j){xa=R,ml=Ks=null,R=R.dependencies,R!==null&&R.firstContext!==null&&((R.lanes&j)!==0&&(qn=!0),R.firstContext=null)}function lr(R){var j=R._currentValue;if(ml!==R)if(R={context:R,memoizedValue:j,next:null},Ks===null){if(xa===null)throw Error(w(308));Ks=R,xa.dependencies={lanes:0,firstContext:R}}else Ks=Ks.next=R;return j}var us=null;function yl(R){us===null?us=[R]:us.push(R)}function ju(R,j,N,F){var V=j.interleaved;return V===null?(N.next=N,yl(j)):(N.next=V.next,V.next=N),j.interleaved=N,lo(R,F)}function lo(R,j){R.lanes|=j;var N=R.alternate;for(N!==null&&(N.lanes|=j),N=R,R=R.return;R!==null;)R.childLanes|=j,N=R.alternate,N!==null&&(N.childLanes|=j),N=R,R=R.return;return N.tag===3?N.stateNode:null}var jo=!1;function El(R){R.updateQueue={baseState:R.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ou(R,j){R=R.updateQueue,j.updateQueue===R&&(j.updateQueue={baseState:R.baseState,firstBaseUpdate:R.firstBaseUpdate,lastBaseUpdate:R.lastBaseUpdate,shared:R.shared,effects:R.effects})}function uo(R,j){return{eventTime:R,lane:j,tag:0,payload:null,callback:null,next:null}}function Oo(R,j,N){var F=R.updateQueue;if(F===null)return null;if(F=F.shared,(kt&2)!==0){var V=F.pending;return V===null?j.next=j:(j.next=V.next,V.next=j),F.pending=j,lo(R,N)}return V=F.interleaved,V===null?(j.next=j,yl(F)):(j.next=V.next,V.next=j),F.interleaved=j,lo(R,N)}function va(R,j,N){if(j=j.updateQueue,j!==null&&(j=j.shared,(N&4194240)!==0)){var F=j.lanes;F&=R.pendingLanes,N|=F,j.lanes=N,Qr(R,N)}}function $u(R,j){var N=R.updateQueue,F=R.alternate;if(F!==null&&(F=F.updateQueue,N===F)){var V=null,z=null;if(N=N.firstBaseUpdate,N!==null){do{var ee={eventTime:N.eventTime,lane:N.lane,tag:N.tag,payload:N.payload,callback:N.callback,next:null};z===null?V=z=ee:z=z.next=ee,N=N.next}while(N!==null);z===null?V=z=j:z=z.next=j}else V=z=j;N={baseState:F.baseState,firstBaseUpdate:V,lastBaseUpdate:z,shared:F.shared,effects:F.effects},R.updateQueue=N;return}R=N.lastBaseUpdate,R===null?N.firstBaseUpdate=j:R.next=j,N.lastBaseUpdate=j}function ya(R,j,N,F){var V=R.updateQueue;jo=!1;var z=V.firstBaseUpdate,ee=V.lastBaseUpdate,le=V.shared.pending;if(le!==null){V.shared.pending=null;var de=le,Ne=de.next;de.next=null,ee===null?z=Ne:ee.next=Ne,ee=de;var Qe=R.alternate;Qe!==null&&(Qe=Qe.updateQueue,le=Qe.lastBaseUpdate,le!==ee&&(le===null?Qe.firstBaseUpdate=Ne:le.next=Ne,Qe.lastBaseUpdate=de))}if(z!==null){var Je=V.baseState;ee=0,Qe=Ne=de=null,le=z;do{var ze=le.lane,ft=le.eventTime;if((F&ze)===ze){Qe!==null&&(Qe=Qe.next={eventTime:ft,lane:0,tag:le.tag,payload:le.payload,callback:le.callback,next:null});e:{var gt=R,vt=le;switch(ze=j,ft=N,vt.tag){case 1:if(gt=vt.payload,typeof gt=="function"){Je=gt.call(ft,Je,ze);break e}Je=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=vt.payload,ze=typeof gt=="function"?gt.call(ft,Je,ze):gt,ze==null)break e;Je=He({},Je,ze);break e;case 2:jo=!0}}le.callback!==null&&le.lane!==0&&(R.flags|=64,ze=V.effects,ze===null?V.effects=[le]:ze.push(le))}else ft={eventTime:ft,lane:ze,tag:le.tag,payload:le.payload,callback:le.callback,next:null},Qe===null?(Ne=Qe=ft,de=Je):Qe=Qe.next=ft,ee|=ze;if(le=le.next,le===null){if(le=V.shared.pending,le===null)break;ze=le,le=ze.next,ze.next=null,V.lastBaseUpdate=ze,V.shared.pending=null}}while(!0);if(Qe===null&&(de=Je),V.baseState=de,V.firstBaseUpdate=Ne,V.lastBaseUpdate=Qe,j=V.shared.interleaved,j!==null){V=j;do ee|=V.lane,V=V.next;while(V!==j)}else z===null&&(V.shared.lanes=0);ps|=ee,R.lanes=ee,R.memoizedState=Je}}function Nu(R,j,N){if(R=j.effects,j.effects=null,R!==null)for(j=0;j<R.length;j++){var F=R[j],V=F.callback;if(V!==null){if(F.callback=null,F=N,typeof V!="function")throw Error(w(191,V));V.call(F)}}}var bi={},Ur=Ao(bi),Ci=Ao(bi),Ri=Ao(bi);function ds(R){if(R===bi)throw Error(w(174));return R}function _l(R,j){switch(qt(Ri,j),qt(Ci,R),qt(Ur,bi),R=j.nodeType,R){case 9:case 11:j=(j=j.documentElement)?j.namespaceURI:zn(null,"");break;default:R=R===8?j.parentNode:j,j=R.namespaceURI||null,R=R.tagName,j=zn(j,R)}Wt(Ur),qt(Ur,j)}function Gs(){Wt(Ur),Wt(Ci),Wt(Ri)}function Iu(R){ds(Ri.current);var j=ds(Ur.current),N=zn(j,R.type);j!==N&&(qt(Ci,R),qt(Ur,N))}function wl(R){Ci.current===R&&(Wt(Ur),Wt(Ci))}var Zt=Ao(0);function Ea(R){for(var j=R;j!==null;){if(j.tag===13){var N=j.memoizedState;if(N!==null&&(N=N.dehydrated,N===null||N.data==="$?"||N.data==="$!"))return j}else if(j.tag===19&&j.memoizedProps.revealOrder!==void 0){if((j.flags&128)!==0)return j}else if(j.child!==null){j.child.return=j,j=j.child;continue}if(j===R)break;for(;j.sibling===null;){if(j.return===null||j.return===R)return null;j=j.return}j.sibling.return=j.return,j=j.sibling}return null}var Sl=[];function bl(){for(var R=0;R<Sl.length;R++)Sl[R]._workInProgressVersionPrimary=null;Sl.length=0}var _a=ae.ReactCurrentDispatcher,Cl=ae.ReactCurrentBatchConfig,fs=0,Jt=null,fn=null,gn=null,wa=!1,Ai=!1,Ti=0,dd=0;function Pn(){throw Error(w(321))}function Rl(R,j){if(j===null)return!1;for(var N=0;N<j.length&&N<R.length;N++)if(!xe(R[N],j[N]))return!1;return!0}function Al(R,j,N,F,V,z){if(fs=z,Jt=j,j.memoizedState=null,j.updateQueue=null,j.lanes=0,_a.current=R===null||R.memoizedState===null?md:gd,R=N(F,V),Ai){z=0;do{if(Ai=!1,Ti=0,25<=z)throw Error(w(301));z+=1,gn=fn=null,j.updateQueue=null,_a.current=xd,R=N(F,V)}while(Ai)}if(_a.current=Ca,j=fn!==null&&fn.next!==null,fs=0,gn=fn=Jt=null,wa=!1,j)throw Error(w(300));return R}function Tl(){var R=Ti!==0;return Ti=0,R}function Vr(){var R={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?Jt.memoizedState=gn=R:gn=gn.next=R,gn}function ur(){if(fn===null){var R=Jt.alternate;R=R!==null?R.memoizedState:null}else R=fn.next;var j=gn===null?Jt.memoizedState:gn.next;if(j!==null)gn=j,fn=R;else{if(R===null)throw Error(w(310));fn=R,R={memoizedState:fn.memoizedState,baseState:fn.baseState,baseQueue:fn.baseQueue,queue:fn.queue,next:null},gn===null?Jt.memoizedState=gn=R:gn=gn.next=R}return gn}function Pi(R,j){return typeof j=="function"?j(R):j}function Pl(R){var j=ur(),N=j.queue;if(N===null)throw Error(w(311));N.lastRenderedReducer=R;var F=fn,V=F.baseQueue,z=N.pending;if(z!==null){if(V!==null){var ee=V.next;V.next=z.next,z.next=ee}F.baseQueue=V=z,N.pending=null}if(V!==null){z=V.next,F=F.baseState;var le=ee=null,de=null,Ne=z;do{var Qe=Ne.lane;if((fs&Qe)===Qe)de!==null&&(de=de.next={lane:0,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null}),F=Ne.hasEagerState?Ne.eagerState:R(F,Ne.action);else{var Je={lane:Qe,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null};de===null?(le=de=Je,ee=F):de=de.next=Je,Jt.lanes|=Qe,ps|=Qe}Ne=Ne.next}while(Ne!==null&&Ne!==z);de===null?ee=F:de.next=le,xe(F,j.memoizedState)||(qn=!0),j.memoizedState=F,j.baseState=ee,j.baseQueue=de,N.lastRenderedState=F}if(R=N.interleaved,R!==null){V=R;do z=V.lane,Jt.lanes|=z,ps|=z,V=V.next;while(V!==R)}else V===null&&(N.lanes=0);return[j.memoizedState,N.dispatch]}function jl(R){var j=ur(),N=j.queue;if(N===null)throw Error(w(311));N.lastRenderedReducer=R;var F=N.dispatch,V=N.pending,z=j.memoizedState;if(V!==null){N.pending=null;var ee=V=V.next;do z=R(z,ee.action),ee=ee.next;while(ee!==V);xe(z,j.memoizedState)||(qn=!0),j.memoizedState=z,j.baseQueue===null&&(j.baseState=z),N.lastRenderedState=z}return[z,F]}function ku(){}function Lu(R,j){var N=Jt,F=ur(),V=j(),z=!xe(F.memoizedState,V);if(z&&(F.memoizedState=V,qn=!0),F=F.queue,Ol(Fu.bind(null,N,F,R),[R]),F.getSnapshot!==j||z||gn!==null&&gn.memoizedState.tag&1){if(N.flags|=2048,ji(9,Du.bind(null,N,F,V,j),void 0,null),xn===null)throw Error(w(349));(fs&30)!==0||Mu(N,j,V)}return V}function Mu(R,j,N){R.flags|=16384,R={getSnapshot:j,value:N},j=Jt.updateQueue,j===null?(j={lastEffect:null,stores:null},Jt.updateQueue=j,j.stores=[R]):(N=j.stores,N===null?j.stores=[R]:N.push(R))}function Du(R,j,N,F){j.value=N,j.getSnapshot=F,Bu(j)&&Hu(R)}function Fu(R,j,N){return N(function(){Bu(j)&&Hu(R)})}function Bu(R){var j=R.getSnapshot;R=R.value;try{var N=j();return!xe(R,N)}catch{return!0}}function Hu(R){var j=lo(R,1);j!==null&&Rr(j,R,1,-1)}function qu(R){var j=Vr();return typeof R=="function"&&(R=R()),j.memoizedState=j.baseState=R,R={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:R},j.queue=R,R=R.dispatch=hd.bind(null,Jt,R),[j.memoizedState,R]}function ji(R,j,N,F){return R={tag:R,create:j,destroy:N,deps:F,next:null},j=Jt.updateQueue,j===null?(j={lastEffect:null,stores:null},Jt.updateQueue=j,j.lastEffect=R.next=R):(N=j.lastEffect,N===null?j.lastEffect=R.next=R:(F=N.next,N.next=R,R.next=F,j.lastEffect=R)),R}function Uu(){return ur().memoizedState}function Sa(R,j,N,F){var V=Vr();Jt.flags|=R,V.memoizedState=ji(1|j,N,void 0,F===void 0?null:F)}function ba(R,j,N,F){var V=ur();F=F===void 0?null:F;var z=void 0;if(fn!==null){var ee=fn.memoizedState;if(z=ee.destroy,F!==null&&Rl(F,ee.deps)){V.memoizedState=ji(j,N,z,F);return}}Jt.flags|=R,V.memoizedState=ji(1|j,N,z,F)}function Vu(R,j){return Sa(8390656,8,R,j)}function Ol(R,j){return ba(2048,8,R,j)}function Wu(R,j){return ba(4,2,R,j)}function Ku(R,j){return ba(4,4,R,j)}function zu(R,j){if(typeof j=="function")return R=R(),j(R),function(){j(null)};if(j!=null)return R=R(),j.current=R,function(){j.current=null}}function Gu(R,j,N){return N=N!=null?N.concat([R]):null,ba(4,4,zu.bind(null,j,R),N)}function $l(){}function Qu(R,j){var N=ur();j=j===void 0?null:j;var F=N.memoizedState;return F!==null&&j!==null&&Rl(j,F[1])?F[0]:(N.memoizedState=[R,j],R)}function Yu(R,j){var N=ur();j=j===void 0?null:j;var F=N.memoizedState;return F!==null&&j!==null&&Rl(j,F[1])?F[0]:(R=R(),N.memoizedState=[R,j],R)}function Xu(R,j,N){return(fs&21)===0?(R.baseState&&(R.baseState=!1,qn=!0),R.memoizedState=N):(xe(N,j)||(N=Ko(),Jt.lanes|=N,ps|=N,R.baseState=!0),j)}function fd(R,j){var N=Lt;Lt=N!==0&&4>N?N:4,R(!0);var F=Cl.transition;Cl.transition={};try{R(!1),j()}finally{Lt=N,Cl.transition=F}}function Zu(){return ur().memoizedState}function pd(R,j,N){var F=ko(R);if(N={lane:F,action:N,hasEagerState:!1,eagerState:null,next:null},Ju(R))ec(j,N);else if(N=ju(R,j,N,F),N!==null){var V=Ln();Rr(N,R,F,V),tc(N,j,F)}}function hd(R,j,N){var F=ko(R),V={lane:F,action:N,hasEagerState:!1,eagerState:null,next:null};if(Ju(R))ec(j,V);else{var z=R.alternate;if(R.lanes===0&&(z===null||z.lanes===0)&&(z=j.lastRenderedReducer,z!==null))try{var ee=j.lastRenderedState,le=z(ee,N);if(V.hasEagerState=!0,V.eagerState=le,xe(le,ee)){var de=j.interleaved;de===null?(V.next=V,yl(j)):(V.next=de.next,de.next=V),j.interleaved=V;return}}catch{}finally{}N=ju(R,j,V,F),N!==null&&(V=Ln(),Rr(N,R,F,V),tc(N,j,F))}}function Ju(R){var j=R.alternate;return R===Jt||j!==null&&j===Jt}function ec(R,j){Ai=wa=!0;var N=R.pending;N===null?j.next=j:(j.next=N.next,N.next=j),R.pending=j}function tc(R,j,N){if((N&4194240)!==0){var F=j.lanes;F&=R.pendingLanes,N|=F,j.lanes=N,Qr(R,N)}}var Ca={readContext:lr,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useInsertionEffect:Pn,useLayoutEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useMutableSource:Pn,useSyncExternalStore:Pn,useId:Pn,unstable_isNewReconciler:!1},md={readContext:lr,useCallback:function(R,j){return Vr().memoizedState=[R,j===void 0?null:j],R},useContext:lr,useEffect:Vu,useImperativeHandle:function(R,j,N){return N=N!=null?N.concat([R]):null,Sa(4194308,4,zu.bind(null,j,R),N)},useLayoutEffect:function(R,j){return Sa(4194308,4,R,j)},useInsertionEffect:function(R,j){return Sa(4,2,R,j)},useMemo:function(R,j){var N=Vr();return j=j===void 0?null:j,R=R(),N.memoizedState=[R,j],R},useReducer:function(R,j,N){var F=Vr();return j=N!==void 0?N(j):j,F.memoizedState=F.baseState=j,R={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:R,lastRenderedState:j},F.queue=R,R=R.dispatch=pd.bind(null,Jt,R),[F.memoizedState,R]},useRef:function(R){var j=Vr();return R={current:R},j.memoizedState=R},useState:qu,useDebugValue:$l,useDeferredValue:function(R){return Vr().memoizedState=R},useTransition:function(){var R=qu(!1),j=R[0];return R=fd.bind(null,R[1]),Vr().memoizedState=R,[j,R]},useMutableSource:function(){},useSyncExternalStore:function(R,j,N){var F=Jt,V=Vr();if(zt){if(N===void 0)throw Error(w(407));N=N()}else{if(N=j(),xn===null)throw Error(w(349));(fs&30)!==0||Mu(F,j,N)}V.memoizedState=N;var z={value:N,getSnapshot:j};return V.queue=z,Vu(Fu.bind(null,F,z,R),[R]),F.flags|=2048,ji(9,Du.bind(null,F,z,N,j),void 0,null),N},useId:function(){var R=Vr(),j=xn.identifierPrefix;if(zt){var N=ao,F=io;N=(F&~(1<<32-Rt(F)-1)).toString(32)+N,j=":"+j+"R"+N,N=Ti++,0<N&&(j+="H"+N.toString(32)),j+=":"}else N=dd++,j=":"+j+"r"+N.toString(32)+":";return R.memoizedState=j},unstable_isNewReconciler:!1},gd={readContext:lr,useCallback:Qu,useContext:lr,useEffect:Ol,useImperativeHandle:Gu,useInsertionEffect:Wu,useLayoutEffect:Ku,useMemo:Yu,useReducer:Pl,useRef:Uu,useState:function(){return Pl(Pi)},useDebugValue:$l,useDeferredValue:function(R){var j=ur();return Xu(j,fn.memoizedState,R)},useTransition:function(){var R=Pl(Pi)[0],j=ur().memoizedState;return[R,j]},useMutableSource:ku,useSyncExternalStore:Lu,useId:Zu,unstable_isNewReconciler:!1},xd={readContext:lr,useCallback:Qu,useContext:lr,useEffect:Ol,useImperativeHandle:Gu,useInsertionEffect:Wu,useLayoutEffect:Ku,useMemo:Yu,useReducer:jl,useRef:Uu,useState:function(){return jl(Pi)},useDebugValue:$l,useDeferredValue:function(R){var j=ur();return fn===null?j.memoizedState=R:Xu(j,fn.memoizedState,R)},useTransition:function(){var R=jl(Pi)[0],j=ur().memoizedState;return[R,j]},useMutableSource:ku,useSyncExternalStore:Lu,useId:Zu,unstable_isNewReconciler:!1};function Sr(R,j){if(R&&R.defaultProps){j=He({},j),R=R.defaultProps;for(var N in R)j[N]===void 0&&(j[N]=R[N]);return j}return j}function Nl(R,j,N,F){j=R.memoizedState,N=N(F,j),N=N==null?j:He({},j,N),R.memoizedState=N,R.lanes===0&&(R.updateQueue.baseState=N)}var Ra={isMounted:function(R){return(R=R._reactInternals)?bn(R)===R:!1},enqueueSetState:function(R,j,N){R=R._reactInternals;var F=Ln(),V=ko(R),z=uo(F,V);z.payload=j,N!=null&&(z.callback=N),j=Oo(R,z,V),j!==null&&(Rr(j,R,V,F),va(j,R,V))},enqueueReplaceState:function(R,j,N){R=R._reactInternals;var F=Ln(),V=ko(R),z=uo(F,V);z.tag=1,z.payload=j,N!=null&&(z.callback=N),j=Oo(R,z,V),j!==null&&(Rr(j,R,V,F),va(j,R,V))},enqueueForceUpdate:function(R,j){R=R._reactInternals;var N=Ln(),F=ko(R),V=uo(N,F);V.tag=2,j!=null&&(V.callback=j),j=Oo(R,V,F),j!==null&&(Rr(j,R,F,N),va(j,R,F))}};function nc(R,j,N,F,V,z,ee){return R=R.stateNode,typeof R.shouldComponentUpdate=="function"?R.shouldComponentUpdate(F,z,ee):j.prototype&&j.prototype.isPureReactComponent?!ce(N,F)||!ce(V,z):!0}function rc(R,j,N){var F=!1,V=To,z=j.contextType;return typeof z=="object"&&z!==null?z=lr(z):(V=Hn(j)?ss:Tn.current,F=j.contextTypes,z=(F=F!=null)?Hs(R,V):To),j=new j(N,z),R.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,j.updater=Ra,R.stateNode=j,j._reactInternals=R,F&&(R=R.stateNode,R.__reactInternalMemoizedUnmaskedChildContext=V,R.__reactInternalMemoizedMaskedChildContext=z),j}function oc(R,j,N,F){R=j.state,typeof j.componentWillReceiveProps=="function"&&j.componentWillReceiveProps(N,F),typeof j.UNSAFE_componentWillReceiveProps=="function"&&j.UNSAFE_componentWillReceiveProps(N,F),j.state!==R&&Ra.enqueueReplaceState(j,j.state,null)}function Il(R,j,N,F){var V=R.stateNode;V.props=N,V.state=R.memoizedState,V.refs={},El(R);var z=j.contextType;typeof z=="object"&&z!==null?V.context=lr(z):(z=Hn(j)?ss:Tn.current,V.context=Hs(R,z)),V.state=R.memoizedState,z=j.getDerivedStateFromProps,typeof z=="function"&&(Nl(R,j,z,N),V.state=R.memoizedState),typeof j.getDerivedStateFromProps=="function"||typeof V.getSnapshotBeforeUpdate=="function"||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(j=V.state,typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount(),j!==V.state&&Ra.enqueueReplaceState(V,V.state,null),ya(R,N,V,F),V.state=R.memoizedState),typeof V.componentDidMount=="function"&&(R.flags|=4194308)}function Qs(R,j){try{var N="",F=j;do N+=st(F),F=F.return;while(F);var V=N}catch(z){V=`
Error generating stack: `+z.message+`
`+z.stack}return{value:R,source:j,stack:V,digest:null}}function kl(R,j,N){return{value:R,source:null,stack:N??null,digest:j??null}}function Ll(R,j){try{console.error(j.value)}catch(N){setTimeout(function(){throw N})}}var vd=typeof WeakMap=="function"?WeakMap:Map;function sc(R,j,N){N=uo(-1,N),N.tag=3,N.payload={element:null};var F=j.value;return N.callback=function(){Na||(Na=!0,Xl=F),Ll(R,j)},N}function ic(R,j,N){N=uo(-1,N),N.tag=3;var F=R.type.getDerivedStateFromError;if(typeof F=="function"){var V=j.value;N.payload=function(){return F(V)},N.callback=function(){Ll(R,j)}}var z=R.stateNode;return z!==null&&typeof z.componentDidCatch=="function"&&(N.callback=function(){Ll(R,j),typeof F!="function"&&(No===null?No=new Set([this]):No.add(this));var ee=j.stack;this.componentDidCatch(j.value,{componentStack:ee!==null?ee:""})}),N}function ac(R,j,N){var F=R.pingCache;if(F===null){F=R.pingCache=new vd;var V=new Set;F.set(j,V)}else V=F.get(j),V===void 0&&(V=new Set,F.set(j,V));V.has(N)||(V.add(N),R=$d.bind(null,R,j,N),j.then(R,R))}function lc(R){do{var j;if((j=R.tag===13)&&(j=R.memoizedState,j=j!==null?j.dehydrated!==null:!0),j)return R;R=R.return}while(R!==null);return null}function uc(R,j,N,F,V){return(R.mode&1)===0?(R===j?R.flags|=65536:(R.flags|=128,N.flags|=131072,N.flags&=-52805,N.tag===1&&(N.alternate===null?N.tag=17:(j=uo(-1,1),j.tag=2,Oo(N,j,1))),N.lanes|=1),R):(R.flags|=65536,R.lanes=V,R)}var yd=ae.ReactCurrentOwner,qn=!1;function kn(R,j,N,F){j.child=R===null?Pu(j,null,N,F):Ws(j,R.child,N,F)}function cc(R,j,N,F,V){N=N.render;var z=j.ref;return zs(j,V),F=Al(R,j,N,F,z,V),N=Tl(),R!==null&&!qn?(j.updateQueue=R.updateQueue,j.flags&=-2053,R.lanes&=~V,co(R,j,V)):(zt&&N&&cl(j),j.flags|=1,kn(R,j,F,V),j.child)}function dc(R,j,N,F,V){if(R===null){var z=N.type;return typeof z=="function"&&!ou(z)&&z.defaultProps===void 0&&N.compare===null&&N.defaultProps===void 0?(j.tag=15,j.type=z,fc(R,j,z,F,V)):(R=Fa(N.type,null,F,j,j.mode,V),R.ref=j.ref,R.return=j,j.child=R)}if(z=R.child,(R.lanes&V)===0){var ee=z.memoizedProps;if(N=N.compare,N=N!==null?N:ce,N(ee,F)&&R.ref===j.ref)return co(R,j,V)}return j.flags|=1,R=Mo(z,F),R.ref=j.ref,R.return=j,j.child=R}function fc(R,j,N,F,V){if(R!==null){var z=R.memoizedProps;if(ce(z,F)&&R.ref===j.ref)if(qn=!1,j.pendingProps=F=z,(R.lanes&V)!==0)(R.flags&131072)!==0&&(qn=!0);else return j.lanes=R.lanes,co(R,j,V)}return Ml(R,j,N,F,V)}function pc(R,j,N){var F=j.pendingProps,V=F.children,z=R!==null?R.memoizedState:null;if(F.mode==="hidden")if((j.mode&1)===0)j.memoizedState={baseLanes:0,cachePool:null,transitions:null},qt(Xs,er),er|=N;else{if((N&1073741824)===0)return R=z!==null?z.baseLanes|N:N,j.lanes=j.childLanes=1073741824,j.memoizedState={baseLanes:R,cachePool:null,transitions:null},j.updateQueue=null,qt(Xs,er),er|=R,null;j.memoizedState={baseLanes:0,cachePool:null,transitions:null},F=z!==null?z.baseLanes:N,qt(Xs,er),er|=F}else z!==null?(F=z.baseLanes|N,j.memoizedState=null):F=N,qt(Xs,er),er|=F;return kn(R,j,V,N),j.child}function hc(R,j){var N=j.ref;(R===null&&N!==null||R!==null&&R.ref!==N)&&(j.flags|=512,j.flags|=2097152)}function Ml(R,j,N,F,V){var z=Hn(N)?ss:Tn.current;return z=Hs(j,z),zs(j,V),N=Al(R,j,N,F,z,V),F=Tl(),R!==null&&!qn?(j.updateQueue=R.updateQueue,j.flags&=-2053,R.lanes&=~V,co(R,j,V)):(zt&&F&&cl(j),j.flags|=1,kn(R,j,N,V),j.child)}function mc(R,j,N,F,V){if(Hn(N)){var z=!0;ca(j)}else z=!1;if(zs(j,V),j.stateNode===null)Ta(R,j),rc(j,N,F),Il(j,N,F,V),F=!0;else if(R===null){var ee=j.stateNode,le=j.memoizedProps;ee.props=le;var de=ee.context,Ne=N.contextType;typeof Ne=="object"&&Ne!==null?Ne=lr(Ne):(Ne=Hn(N)?ss:Tn.current,Ne=Hs(j,Ne));var Qe=N.getDerivedStateFromProps,Je=typeof Qe=="function"||typeof ee.getSnapshotBeforeUpdate=="function";Je||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(le!==F||de!==Ne)&&oc(j,ee,F,Ne),jo=!1;var ze=j.memoizedState;ee.state=ze,ya(j,F,ee,V),de=j.memoizedState,le!==F||ze!==de||Bn.current||jo?(typeof Qe=="function"&&(Nl(j,N,Qe,F),de=j.memoizedState),(le=jo||nc(j,N,le,F,ze,de,Ne))?(Je||typeof ee.UNSAFE_componentWillMount!="function"&&typeof ee.componentWillMount!="function"||(typeof ee.componentWillMount=="function"&&ee.componentWillMount(),typeof ee.UNSAFE_componentWillMount=="function"&&ee.UNSAFE_componentWillMount()),typeof ee.componentDidMount=="function"&&(j.flags|=4194308)):(typeof ee.componentDidMount=="function"&&(j.flags|=4194308),j.memoizedProps=F,j.memoizedState=de),ee.props=F,ee.state=de,ee.context=Ne,F=le):(typeof ee.componentDidMount=="function"&&(j.flags|=4194308),F=!1)}else{ee=j.stateNode,Ou(R,j),le=j.memoizedProps,Ne=j.type===j.elementType?le:Sr(j.type,le),ee.props=Ne,Je=j.pendingProps,ze=ee.context,de=N.contextType,typeof de=="object"&&de!==null?de=lr(de):(de=Hn(N)?ss:Tn.current,de=Hs(j,de));var ft=N.getDerivedStateFromProps;(Qe=typeof ft=="function"||typeof ee.getSnapshotBeforeUpdate=="function")||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(le!==Je||ze!==de)&&oc(j,ee,F,de),jo=!1,ze=j.memoizedState,ee.state=ze,ya(j,F,ee,V);var gt=j.memoizedState;le!==Je||ze!==gt||Bn.current||jo?(typeof ft=="function"&&(Nl(j,N,ft,F),gt=j.memoizedState),(Ne=jo||nc(j,N,Ne,F,ze,gt,de)||!1)?(Qe||typeof ee.UNSAFE_componentWillUpdate!="function"&&typeof ee.componentWillUpdate!="function"||(typeof ee.componentWillUpdate=="function"&&ee.componentWillUpdate(F,gt,de),typeof ee.UNSAFE_componentWillUpdate=="function"&&ee.UNSAFE_componentWillUpdate(F,gt,de)),typeof ee.componentDidUpdate=="function"&&(j.flags|=4),typeof ee.getSnapshotBeforeUpdate=="function"&&(j.flags|=1024)):(typeof ee.componentDidUpdate!="function"||le===R.memoizedProps&&ze===R.memoizedState||(j.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||le===R.memoizedProps&&ze===R.memoizedState||(j.flags|=1024),j.memoizedProps=F,j.memoizedState=gt),ee.props=F,ee.state=gt,ee.context=de,F=Ne):(typeof ee.componentDidUpdate!="function"||le===R.memoizedProps&&ze===R.memoizedState||(j.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||le===R.memoizedProps&&ze===R.memoizedState||(j.flags|=1024),F=!1)}return Dl(R,j,N,F,z,V)}function Dl(R,j,N,F,V,z){hc(R,j);var ee=(j.flags&128)!==0;if(!F&&!ee)return V&&Eu(j,N,!1),co(R,j,z);F=j.stateNode,yd.current=j;var le=ee&&typeof N.getDerivedStateFromError!="function"?null:F.render();return j.flags|=1,R!==null&&ee?(j.child=Ws(j,R.child,null,z),j.child=Ws(j,null,le,z)):kn(R,j,le,z),j.memoizedState=F.state,V&&Eu(j,N,!0),j.child}function gc(R){var j=R.stateNode;j.pendingContext?vu(R,j.pendingContext,j.pendingContext!==j.context):j.context&&vu(R,j.context,!1),_l(R,j.containerInfo)}function xc(R,j,N,F,V){return Vs(),hl(V),j.flags|=256,kn(R,j,N,F),j.child}var Fl={dehydrated:null,treeContext:null,retryLane:0};function Bl(R){return{baseLanes:R,cachePool:null,transitions:null}}function vc(R,j,N){var F=j.pendingProps,V=Zt.current,z=!1,ee=(j.flags&128)!==0,le;if((le=ee)||(le=R!==null&&R.memoizedState===null?!1:(V&2)!==0),le?(z=!0,j.flags&=-129):(R===null||R.memoizedState!==null)&&(V|=1),qt(Zt,V&1),R===null)return pl(j),R=j.memoizedState,R!==null&&(R=R.dehydrated,R!==null)?((j.mode&1)===0?j.lanes=1:R.data==="$!"?j.lanes=8:j.lanes=1073741824,null):(ee=F.children,R=F.fallback,z?(F=j.mode,z=j.child,ee={mode:"hidden",children:ee},(F&1)===0&&z!==null?(z.childLanes=0,z.pendingProps=ee):z=Ba(ee,F,0,null),R=xs(R,F,N,null),z.return=j,R.return=j,z.sibling=R,j.child=z,j.child.memoizedState=Bl(N),j.memoizedState=Fl,R):Hl(j,ee));if(V=R.memoizedState,V!==null&&(le=V.dehydrated,le!==null))return Ed(R,j,ee,F,le,V,N);if(z){z=F.fallback,ee=j.mode,V=R.child,le=V.sibling;var de={mode:"hidden",children:F.children};return(ee&1)===0&&j.child!==V?(F=j.child,F.childLanes=0,F.pendingProps=de,j.deletions=null):(F=Mo(V,de),F.subtreeFlags=V.subtreeFlags&14680064),le!==null?z=Mo(le,z):(z=xs(z,ee,N,null),z.flags|=2),z.return=j,F.return=j,F.sibling=z,j.child=F,F=z,z=j.child,ee=R.child.memoizedState,ee=ee===null?Bl(N):{baseLanes:ee.baseLanes|N,cachePool:null,transitions:ee.transitions},z.memoizedState=ee,z.childLanes=R.childLanes&~N,j.memoizedState=Fl,F}return z=R.child,R=z.sibling,F=Mo(z,{mode:"visible",children:F.children}),(j.mode&1)===0&&(F.lanes=N),F.return=j,F.sibling=null,R!==null&&(N=j.deletions,N===null?(j.deletions=[R],j.flags|=16):N.push(R)),j.child=F,j.memoizedState=null,F}function Hl(R,j){return j=Ba({mode:"visible",children:j},R.mode,0,null),j.return=R,R.child=j}function Aa(R,j,N,F){return F!==null&&hl(F),Ws(j,R.child,null,N),R=Hl(j,j.pendingProps.children),R.flags|=2,j.memoizedState=null,R}function Ed(R,j,N,F,V,z,ee){if(N)return j.flags&256?(j.flags&=-257,F=kl(Error(w(422))),Aa(R,j,ee,F)):j.memoizedState!==null?(j.child=R.child,j.flags|=128,null):(z=F.fallback,V=j.mode,F=Ba({mode:"visible",children:F.children},V,0,null),z=xs(z,V,ee,null),z.flags|=2,F.return=j,z.return=j,F.sibling=z,j.child=F,(j.mode&1)!==0&&Ws(j,R.child,null,ee),j.child.memoizedState=Bl(ee),j.memoizedState=Fl,z);if((j.mode&1)===0)return Aa(R,j,ee,null);if(V.data==="$!"){if(F=V.nextSibling&&V.nextSibling.dataset,F)var le=F.dgst;return F=le,z=Error(w(419)),F=kl(z,F,void 0),Aa(R,j,ee,F)}if(le=(ee&R.childLanes)!==0,qn||le){if(F=xn,F!==null){switch(ee&-ee){case 4:V=2;break;case 16:V=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:V=32;break;case 536870912:V=268435456;break;default:V=0}V=(V&(F.suspendedLanes|ee))!==0?0:V,V!==0&&V!==z.retryLane&&(z.retryLane=V,lo(R,V),Rr(F,R,V,-1))}return ru(),F=kl(Error(w(421))),Aa(R,j,ee,F)}return V.data==="$?"?(j.flags|=128,j.child=R.child,j=Nd.bind(null,R),V._reactRetry=j,null):(R=z.treeContext,Jn=Ro(V.nextSibling),Zn=j,zt=!0,wr=null,R!==null&&(ir[ar++]=io,ir[ar++]=ao,ir[ar++]=as,io=R.id,ao=R.overflow,as=j),j=Hl(j,F.children),j.flags|=4096,j)}function yc(R,j,N){R.lanes|=j;var F=R.alternate;F!==null&&(F.lanes|=j),vl(R.return,j,N)}function ql(R,j,N,F,V){var z=R.memoizedState;z===null?R.memoizedState={isBackwards:j,rendering:null,renderingStartTime:0,last:F,tail:N,tailMode:V}:(z.isBackwards=j,z.rendering=null,z.renderingStartTime=0,z.last=F,z.tail=N,z.tailMode=V)}function Ec(R,j,N){var F=j.pendingProps,V=F.revealOrder,z=F.tail;if(kn(R,j,F.children,N),F=Zt.current,(F&2)!==0)F=F&1|2,j.flags|=128;else{if(R!==null&&(R.flags&128)!==0)e:for(R=j.child;R!==null;){if(R.tag===13)R.memoizedState!==null&&yc(R,N,j);else if(R.tag===19)yc(R,N,j);else if(R.child!==null){R.child.return=R,R=R.child;continue}if(R===j)break e;for(;R.sibling===null;){if(R.return===null||R.return===j)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}F&=1}if(qt(Zt,F),(j.mode&1)===0)j.memoizedState=null;else switch(V){case"forwards":for(N=j.child,V=null;N!==null;)R=N.alternate,R!==null&&Ea(R)===null&&(V=N),N=N.sibling;N=V,N===null?(V=j.child,j.child=null):(V=N.sibling,N.sibling=null),ql(j,!1,V,N,z);break;case"backwards":for(N=null,V=j.child,j.child=null;V!==null;){if(R=V.alternate,R!==null&&Ea(R)===null){j.child=V;break}R=V.sibling,V.sibling=N,N=V,V=R}ql(j,!0,N,null,z);break;case"together":ql(j,!1,null,null,void 0);break;default:j.memoizedState=null}return j.child}function Ta(R,j){(j.mode&1)===0&&R!==null&&(R.alternate=null,j.alternate=null,j.flags|=2)}function co(R,j,N){if(R!==null&&(j.dependencies=R.dependencies),ps|=j.lanes,(N&j.childLanes)===0)return null;if(R!==null&&j.child!==R.child)throw Error(w(153));if(j.child!==null){for(R=j.child,N=Mo(R,R.pendingProps),j.child=N,N.return=j;R.sibling!==null;)R=R.sibling,N=N.sibling=Mo(R,R.pendingProps),N.return=j;N.sibling=null}return j.child}function _d(R,j,N){switch(j.tag){case 3:gc(j),Vs();break;case 5:Iu(j);break;case 1:Hn(j.type)&&ca(j);break;case 4:_l(j,j.stateNode.containerInfo);break;case 10:var F=j.type._context,V=j.memoizedProps.value;qt(ga,F._currentValue),F._currentValue=V;break;case 13:if(F=j.memoizedState,F!==null)return F.dehydrated!==null?(qt(Zt,Zt.current&1),j.flags|=128,null):(N&j.child.childLanes)!==0?vc(R,j,N):(qt(Zt,Zt.current&1),R=co(R,j,N),R!==null?R.sibling:null);qt(Zt,Zt.current&1);break;case 19:if(F=(N&j.childLanes)!==0,(R.flags&128)!==0){if(F)return Ec(R,j,N);j.flags|=128}if(V=j.memoizedState,V!==null&&(V.rendering=null,V.tail=null,V.lastEffect=null),qt(Zt,Zt.current),F)break;return null;case 22:case 23:return j.lanes=0,pc(R,j,N)}return co(R,j,N)}var _c,Ul,wc,Sc;_c=function(R,j){for(var N=j.child;N!==null;){if(N.tag===5||N.tag===6)R.appendChild(N.stateNode);else if(N.tag!==4&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===j)break;for(;N.sibling===null;){if(N.return===null||N.return===j)return;N=N.return}N.sibling.return=N.return,N=N.sibling}},Ul=function(){},wc=function(R,j,N,F){var V=R.memoizedProps;if(V!==F){R=j.stateNode,ds(Ur.current);var z=null;switch(N){case"input":V=$n(R,V),F=$n(R,F),z=[];break;case"select":V=He({},V,{value:void 0}),F=He({},F,{value:void 0}),z=[];break;case"textarea":V=po(R,V),F=po(R,F),z=[];break;default:typeof V.onClick!="function"&&typeof F.onClick=="function"&&(R.onclick=aa)}mt(N,F);var ee;N=null;for(Ne in V)if(!F.hasOwnProperty(Ne)&&V.hasOwnProperty(Ne)&&V[Ne]!=null)if(Ne==="style"){var le=V[Ne];for(ee in le)le.hasOwnProperty(ee)&&(N||(N={}),N[ee]="")}else Ne!=="dangerouslySetInnerHTML"&&Ne!=="children"&&Ne!=="suppressContentEditableWarning"&&Ne!=="suppressHydrationWarning"&&Ne!=="autoFocus"&&(P.hasOwnProperty(Ne)?z||(z=[]):(z=z||[]).push(Ne,null));for(Ne in F){var de=F[Ne];if(le=V?.[Ne],F.hasOwnProperty(Ne)&&de!==le&&(de!=null||le!=null))if(Ne==="style")if(le){for(ee in le)!le.hasOwnProperty(ee)||de&&de.hasOwnProperty(ee)||(N||(N={}),N[ee]="");for(ee in de)de.hasOwnProperty(ee)&&le[ee]!==de[ee]&&(N||(N={}),N[ee]=de[ee])}else N||(z||(z=[]),z.push(Ne,N)),N=de;else Ne==="dangerouslySetInnerHTML"?(de=de?de.__html:void 0,le=le?le.__html:void 0,de!=null&&le!==de&&(z=z||[]).push(Ne,de)):Ne==="children"?typeof de!="string"&&typeof de!="number"||(z=z||[]).push(Ne,""+de):Ne!=="suppressContentEditableWarning"&&Ne!=="suppressHydrationWarning"&&(P.hasOwnProperty(Ne)?(de!=null&&Ne==="onScroll"&&Vt("scroll",R),z||le===de||(z=[])):(z=z||[]).push(Ne,de))}N&&(z=z||[]).push("style",N);var Ne=z;(j.updateQueue=Ne)&&(j.flags|=4)}},Sc=function(R,j,N,F){N!==F&&(j.flags|=4)};function Oi(R,j){if(!zt)switch(R.tailMode){case"hidden":j=R.tail;for(var N=null;j!==null;)j.alternate!==null&&(N=j),j=j.sibling;N===null?R.tail=null:N.sibling=null;break;case"collapsed":N=R.tail;for(var F=null;N!==null;)N.alternate!==null&&(F=N),N=N.sibling;F===null?j||R.tail===null?R.tail=null:R.tail.sibling=null:F.sibling=null}}function jn(R){var j=R.alternate!==null&&R.alternate.child===R.child,N=0,F=0;if(j)for(var V=R.child;V!==null;)N|=V.lanes|V.childLanes,F|=V.subtreeFlags&14680064,F|=V.flags&14680064,V.return=R,V=V.sibling;else for(V=R.child;V!==null;)N|=V.lanes|V.childLanes,F|=V.subtreeFlags,F|=V.flags,V.return=R,V=V.sibling;return R.subtreeFlags|=F,R.childLanes=N,j}function wd(R,j,N){var F=j.pendingProps;switch(dl(j),j.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jn(j),null;case 1:return Hn(j.type)&&ua(),jn(j),null;case 3:return F=j.stateNode,Gs(),Wt(Bn),Wt(Tn),bl(),F.pendingContext&&(F.context=F.pendingContext,F.pendingContext=null),(R===null||R.child===null)&&(ha(j)?j.flags|=4:R===null||R.memoizedState.isDehydrated&&(j.flags&256)===0||(j.flags|=1024,wr!==null&&(eu(wr),wr=null))),Ul(R,j),jn(j),null;case 5:wl(j);var V=ds(Ri.current);if(N=j.type,R!==null&&j.stateNode!=null)wc(R,j,N,F,V),R.ref!==j.ref&&(j.flags|=512,j.flags|=2097152);else{if(!F){if(j.stateNode===null)throw Error(w(166));return jn(j),null}if(R=ds(Ur.current),ha(j)){F=j.stateNode,N=j.type;var z=j.memoizedProps;switch(F[qr]=j,F[_i]=z,R=(j.mode&1)!==0,N){case"dialog":Vt("cancel",F),Vt("close",F);break;case"iframe":case"object":case"embed":Vt("load",F);break;case"video":case"audio":for(V=0;V<vi.length;V++)Vt(vi[V],F);break;case"source":Vt("error",F);break;case"img":case"image":case"link":Vt("error",F),Vt("load",F);break;case"details":Vt("toggle",F);break;case"input":yn(F,z),Vt("invalid",F);break;case"select":F._wrapperState={wasMultiple:!!z.multiple},Vt("invalid",F);break;case"textarea":Ar(F,z),Vt("invalid",F)}mt(N,z),V=null;for(var ee in z)if(z.hasOwnProperty(ee)){var le=z[ee];ee==="children"?typeof le=="string"?F.textContent!==le&&(z.suppressHydrationWarning!==!0&&ia(F.textContent,le,R),V=["children",le]):typeof le=="number"&&F.textContent!==""+le&&(z.suppressHydrationWarning!==!0&&ia(F.textContent,le,R),V=["children",""+le]):P.hasOwnProperty(ee)&&le!=null&&ee==="onScroll"&&Vt("scroll",F)}switch(N){case"input":Ot(F),vs(F,z,!0);break;case"textarea":Ot(F),pr(F);break;case"select":case"option":break;default:typeof z.onClick=="function"&&(F.onclick=aa)}F=V,j.updateQueue=F,F!==null&&(j.flags|=4)}else{ee=V.nodeType===9?V:V.ownerDocument,R==="http://www.w3.org/1999/xhtml"&&(R=Kn(N)),R==="http://www.w3.org/1999/xhtml"?N==="script"?(R=ee.createElement("div"),R.innerHTML="<script><\/script>",R=R.removeChild(R.firstChild)):typeof F.is=="string"?R=ee.createElement(N,{is:F.is}):(R=ee.createElement(N),N==="select"&&(ee=R,F.multiple?ee.multiple=!0:F.size&&(ee.size=F.size))):R=ee.createElementNS(R,N),R[qr]=j,R[_i]=F,_c(R,j,!1,!1),j.stateNode=R;e:{switch(ee=sr(N,F),N){case"dialog":Vt("cancel",R),Vt("close",R),V=F;break;case"iframe":case"object":case"embed":Vt("load",R),V=F;break;case"video":case"audio":for(V=0;V<vi.length;V++)Vt(vi[V],R);V=F;break;case"source":Vt("error",R),V=F;break;case"img":case"image":case"link":Vt("error",R),Vt("load",R),V=F;break;case"details":Vt("toggle",R),V=F;break;case"input":yn(R,F),V=$n(R,F),Vt("invalid",R);break;case"option":V=F;break;case"select":R._wrapperState={wasMultiple:!!F.multiple},V=He({},F,{value:void 0}),Vt("invalid",R);break;case"textarea":Ar(R,F),V=po(R,F),Vt("invalid",R);break;default:V=F}mt(N,V),le=V;for(z in le)if(le.hasOwnProperty(z)){var de=le[z];z==="style"?ho(R,de):z==="dangerouslySetInnerHTML"?(de=de?de.__html:void 0,de!=null&&xt(R,de)):z==="children"?typeof de=="string"?(N!=="textarea"||de!=="")&&tr(R,de):typeof de=="number"&&tr(R,""+de):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(P.hasOwnProperty(z)?de!=null&&z==="onScroll"&&Vt("scroll",R):de!=null&&oe(R,z,de,ee))}switch(N){case"input":Ot(R),vs(R,F,!1);break;case"textarea":Ot(R),pr(R);break;case"option":F.value!=null&&R.setAttribute("value",""+it(F.value));break;case"select":R.multiple=!!F.multiple,z=F.value,z!=null?Gt(R,!!F.multiple,z,!1):F.defaultValue!=null&&Gt(R,!!F.multiple,F.defaultValue,!0);break;default:typeof V.onClick=="function"&&(R.onclick=aa)}switch(N){case"button":case"input":case"select":case"textarea":F=!!F.autoFocus;break e;case"img":F=!0;break e;default:F=!1}}F&&(j.flags|=4)}j.ref!==null&&(j.flags|=512,j.flags|=2097152)}return jn(j),null;case 6:if(R&&j.stateNode!=null)Sc(R,j,R.memoizedProps,F);else{if(typeof F!="string"&&j.stateNode===null)throw Error(w(166));if(N=ds(Ri.current),ds(Ur.current),ha(j)){if(F=j.stateNode,N=j.memoizedProps,F[qr]=j,(z=F.nodeValue!==N)&&(R=Zn,R!==null))switch(R.tag){case 3:ia(F.nodeValue,N,(R.mode&1)!==0);break;case 5:R.memoizedProps.suppressHydrationWarning!==!0&&ia(F.nodeValue,N,(R.mode&1)!==0)}z&&(j.flags|=4)}else F=(N.nodeType===9?N:N.ownerDocument).createTextNode(F),F[qr]=j,j.stateNode=F}return jn(j),null;case 13:if(Wt(Zt),F=j.memoizedState,R===null||R.memoizedState!==null&&R.memoizedState.dehydrated!==null){if(zt&&Jn!==null&&(j.mode&1)!==0&&(j.flags&128)===0)Ru(),Vs(),j.flags|=98560,z=!1;else if(z=ha(j),F!==null&&F.dehydrated!==null){if(R===null){if(!z)throw Error(w(318));if(z=j.memoizedState,z=z!==null?z.dehydrated:null,!z)throw Error(w(317));z[qr]=j}else Vs(),(j.flags&128)===0&&(j.memoizedState=null),j.flags|=4;jn(j),z=!1}else wr!==null&&(eu(wr),wr=null),z=!0;if(!z)return j.flags&65536?j:null}return(j.flags&128)!==0?(j.lanes=N,j):(F=F!==null,F!==(R!==null&&R.memoizedState!==null)&&F&&(j.child.flags|=8192,(j.mode&1)!==0&&(R===null||(Zt.current&1)!==0?pn===0&&(pn=3):ru())),j.updateQueue!==null&&(j.flags|=4),jn(j),null);case 4:return Gs(),Ul(R,j),R===null&&yi(j.stateNode.containerInfo),jn(j),null;case 10:return xl(j.type._context),jn(j),null;case 17:return Hn(j.type)&&ua(),jn(j),null;case 19:if(Wt(Zt),z=j.memoizedState,z===null)return jn(j),null;if(F=(j.flags&128)!==0,ee=z.rendering,ee===null)if(F)Oi(z,!1);else{if(pn!==0||R!==null&&(R.flags&128)!==0)for(R=j.child;R!==null;){if(ee=Ea(R),ee!==null){for(j.flags|=128,Oi(z,!1),F=ee.updateQueue,F!==null&&(j.updateQueue=F,j.flags|=4),j.subtreeFlags=0,F=N,N=j.child;N!==null;)z=N,R=F,z.flags&=14680066,ee=z.alternate,ee===null?(z.childLanes=0,z.lanes=R,z.child=null,z.subtreeFlags=0,z.memoizedProps=null,z.memoizedState=null,z.updateQueue=null,z.dependencies=null,z.stateNode=null):(z.childLanes=ee.childLanes,z.lanes=ee.lanes,z.child=ee.child,z.subtreeFlags=0,z.deletions=null,z.memoizedProps=ee.memoizedProps,z.memoizedState=ee.memoizedState,z.updateQueue=ee.updateQueue,z.type=ee.type,R=ee.dependencies,z.dependencies=R===null?null:{lanes:R.lanes,firstContext:R.firstContext}),N=N.sibling;return qt(Zt,Zt.current&1|2),j.child}R=R.sibling}z.tail!==null&&Dt()>Zs&&(j.flags|=128,F=!0,Oi(z,!1),j.lanes=4194304)}else{if(!F)if(R=Ea(ee),R!==null){if(j.flags|=128,F=!0,N=R.updateQueue,N!==null&&(j.updateQueue=N,j.flags|=4),Oi(z,!0),z.tail===null&&z.tailMode==="hidden"&&!ee.alternate&&!zt)return jn(j),null}else 2*Dt()-z.renderingStartTime>Zs&&N!==1073741824&&(j.flags|=128,F=!0,Oi(z,!1),j.lanes=4194304);z.isBackwards?(ee.sibling=j.child,j.child=ee):(N=z.last,N!==null?N.sibling=ee:j.child=ee,z.last=ee)}return z.tail!==null?(j=z.tail,z.rendering=j,z.tail=j.sibling,z.renderingStartTime=Dt(),j.sibling=null,N=Zt.current,qt(Zt,F?N&1|2:N&1),j):(jn(j),null);case 22:case 23:return nu(),F=j.memoizedState!==null,R!==null&&R.memoizedState!==null!==F&&(j.flags|=8192),F&&(j.mode&1)!==0?(er&1073741824)!==0&&(jn(j),j.subtreeFlags&6&&(j.flags|=8192)):jn(j),null;case 24:return null;case 25:return null}throw Error(w(156,j.tag))}function Sd(R,j){switch(dl(j),j.tag){case 1:return Hn(j.type)&&ua(),R=j.flags,R&65536?(j.flags=R&-65537|128,j):null;case 3:return Gs(),Wt(Bn),Wt(Tn),bl(),R=j.flags,(R&65536)!==0&&(R&128)===0?(j.flags=R&-65537|128,j):null;case 5:return wl(j),null;case 13:if(Wt(Zt),R=j.memoizedState,R!==null&&R.dehydrated!==null){if(j.alternate===null)throw Error(w(340));Vs()}return R=j.flags,R&65536?(j.flags=R&-65537|128,j):null;case 19:return Wt(Zt),null;case 4:return Gs(),null;case 10:return xl(j.type._context),null;case 22:case 23:return nu(),null;case 24:return null;default:return null}}var Pa=!1,On=!1,bd=typeof WeakSet=="function"?WeakSet:Set,ht=null;function Ys(R,j){var N=R.ref;if(N!==null)if(typeof N=="function")try{N(null)}catch(F){tn(R,j,F)}else N.current=null}function Vl(R,j,N){try{N()}catch(F){tn(R,j,F)}}var bc=!1;function Cd(R,j){if(nl=bs,R=Se(),Ee(R)){if("selectionStart"in R)var N={start:R.selectionStart,end:R.selectionEnd};else e:{N=(N=R.ownerDocument)&&N.defaultView||window;var F=N.getSelection&&N.getSelection();if(F&&F.rangeCount!==0){N=F.anchorNode;var V=F.anchorOffset,z=F.focusNode;F=F.focusOffset;try{N.nodeType,z.nodeType}catch{N=null;break e}var ee=0,le=-1,de=-1,Ne=0,Qe=0,Je=R,ze=null;t:for(;;){for(var ft;Je!==N||V!==0&&Je.nodeType!==3||(le=ee+V),Je!==z||F!==0&&Je.nodeType!==3||(de=ee+F),Je.nodeType===3&&(ee+=Je.nodeValue.length),(ft=Je.firstChild)!==null;)ze=Je,Je=ft;for(;;){if(Je===R)break t;if(ze===N&&++Ne===V&&(le=ee),ze===z&&++Qe===F&&(de=ee),(ft=Je.nextSibling)!==null)break;Je=ze,ze=Je.parentNode}Je=ft}N=le===-1||de===-1?null:{start:le,end:de}}else N=null}N=N||{start:0,end:0}}else N=null;for(rl={focusedElem:R,selectionRange:N},bs=!1,ht=j;ht!==null;)if(j=ht,R=j.child,(j.subtreeFlags&1028)!==0&&R!==null)R.return=j,ht=R;else for(;ht!==null;){j=ht;try{var gt=j.alternate;if((j.flags&1024)!==0)switch(j.tag){case 0:case 11:case 15:break;case 1:if(gt!==null){var vt=gt.memoizedProps,rn=gt.memoizedState,Pe=j.stateNode,ge=Pe.getSnapshotBeforeUpdate(j.elementType===j.type?vt:Sr(j.type,vt),rn);Pe.__reactInternalSnapshotBeforeUpdate=ge}break;case 3:var $e=j.stateNode.containerInfo;$e.nodeType===1?$e.textContent="":$e.nodeType===9&&$e.documentElement&&$e.removeChild($e.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(w(163))}}catch(rt){tn(j,j.return,rt)}if(R=j.sibling,R!==null){R.return=j.return,ht=R;break}ht=j.return}return gt=bc,bc=!1,gt}function $i(R,j,N){var F=j.updateQueue;if(F=F!==null?F.lastEffect:null,F!==null){var V=F=F.next;do{if((V.tag&R)===R){var z=V.destroy;V.destroy=void 0,z!==void 0&&Vl(j,N,z)}V=V.next}while(V!==F)}}function ja(R,j){if(j=j.updateQueue,j=j!==null?j.lastEffect:null,j!==null){var N=j=j.next;do{if((N.tag&R)===R){var F=N.create;N.destroy=F()}N=N.next}while(N!==j)}}function Wl(R){var j=R.ref;if(j!==null){var N=R.stateNode;switch(R.tag){case 5:R=N;break;default:R=N}typeof j=="function"?j(R):j.current=R}}function Cc(R){var j=R.alternate;j!==null&&(R.alternate=null,Cc(j)),R.child=null,R.deletions=null,R.sibling=null,R.tag===5&&(j=R.stateNode,j!==null&&(delete j[qr],delete j[_i],delete j[al],delete j[ad],delete j[ld])),R.stateNode=null,R.return=null,R.dependencies=null,R.memoizedProps=null,R.memoizedState=null,R.pendingProps=null,R.stateNode=null,R.updateQueue=null}function Rc(R){return R.tag===5||R.tag===3||R.tag===4}function Ac(R){e:for(;;){for(;R.sibling===null;){if(R.return===null||Rc(R.return))return null;R=R.return}for(R.sibling.return=R.return,R=R.sibling;R.tag!==5&&R.tag!==6&&R.tag!==18;){if(R.flags&2||R.child===null||R.tag===4)continue e;R.child.return=R,R=R.child}if(!(R.flags&2))return R.stateNode}}function Kl(R,j,N){var F=R.tag;if(F===5||F===6)R=R.stateNode,j?N.nodeType===8?N.parentNode.insertBefore(R,j):N.insertBefore(R,j):(N.nodeType===8?(j=N.parentNode,j.insertBefore(R,N)):(j=N,j.appendChild(R)),N=N._reactRootContainer,N!=null||j.onclick!==null||(j.onclick=aa));else if(F!==4&&(R=R.child,R!==null))for(Kl(R,j,N),R=R.sibling;R!==null;)Kl(R,j,N),R=R.sibling}function zl(R,j,N){var F=R.tag;if(F===5||F===6)R=R.stateNode,j?N.insertBefore(R,j):N.appendChild(R);else if(F!==4&&(R=R.child,R!==null))for(zl(R,j,N),R=R.sibling;R!==null;)zl(R,j,N),R=R.sibling}var _n=null,br=!1;function $o(R,j,N){for(N=N.child;N!==null;)Tc(R,j,N),N=N.sibling}function Tc(R,j,N){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(Uo,N)}catch{}switch(N.tag){case 5:On||Ys(N,j);case 6:var F=_n,V=br;_n=null,$o(R,j,N),_n=F,br=V,_n!==null&&(br?(R=_n,N=N.stateNode,R.nodeType===8?R.parentNode.removeChild(N):R.removeChild(N)):_n.removeChild(N.stateNode));break;case 18:_n!==null&&(br?(R=_n,N=N.stateNode,R.nodeType===8?il(R.parentNode,N):R.nodeType===1&&il(R,N),Xr(R)):il(_n,N.stateNode));break;case 4:F=_n,V=br,_n=N.stateNode.containerInfo,br=!0,$o(R,j,N),_n=F,br=V;break;case 0:case 11:case 14:case 15:if(!On&&(F=N.updateQueue,F!==null&&(F=F.lastEffect,F!==null))){V=F=F.next;do{var z=V,ee=z.destroy;z=z.tag,ee!==void 0&&((z&2)!==0||(z&4)!==0)&&Vl(N,j,ee),V=V.next}while(V!==F)}$o(R,j,N);break;case 1:if(!On&&(Ys(N,j),F=N.stateNode,typeof F.componentWillUnmount=="function"))try{F.props=N.memoizedProps,F.state=N.memoizedState,F.componentWillUnmount()}catch(le){tn(N,j,le)}$o(R,j,N);break;case 21:$o(R,j,N);break;case 22:N.mode&1?(On=(F=On)||N.memoizedState!==null,$o(R,j,N),On=F):$o(R,j,N);break;default:$o(R,j,N)}}function Pc(R){var j=R.updateQueue;if(j!==null){R.updateQueue=null;var N=R.stateNode;N===null&&(N=R.stateNode=new bd),j.forEach(function(F){var V=Id.bind(null,R,F);N.has(F)||(N.add(F),F.then(V,V))})}}function Cr(R,j){var N=j.deletions;if(N!==null)for(var F=0;F<N.length;F++){var V=N[F];try{var z=R,ee=j,le=ee;e:for(;le!==null;){switch(le.tag){case 5:_n=le.stateNode,br=!1;break e;case 3:_n=le.stateNode.containerInfo,br=!0;break e;case 4:_n=le.stateNode.containerInfo,br=!0;break e}le=le.return}if(_n===null)throw Error(w(160));Tc(z,ee,V),_n=null,br=!1;var de=V.alternate;de!==null&&(de.return=null),V.return=null}catch(Ne){tn(V,j,Ne)}}if(j.subtreeFlags&12854)for(j=j.child;j!==null;)jc(j,R),j=j.sibling}function jc(R,j){var N=R.alternate,F=R.flags;switch(R.tag){case 0:case 11:case 14:case 15:if(Cr(j,R),Wr(R),F&4){try{$i(3,R,R.return),ja(3,R)}catch(vt){tn(R,R.return,vt)}try{$i(5,R,R.return)}catch(vt){tn(R,R.return,vt)}}break;case 1:Cr(j,R),Wr(R),F&512&&N!==null&&Ys(N,N.return);break;case 5:if(Cr(j,R),Wr(R),F&512&&N!==null&&Ys(N,N.return),R.flags&32){var V=R.stateNode;try{tr(V,"")}catch(vt){tn(R,R.return,vt)}}if(F&4&&(V=R.stateNode,V!=null)){var z=R.memoizedProps,ee=N!==null?N.memoizedProps:z,le=R.type,de=R.updateQueue;if(R.updateQueue=null,de!==null)try{le==="input"&&z.type==="radio"&&z.name!=null&&Nn(V,z),sr(le,ee);var Ne=sr(le,z);for(ee=0;ee<de.length;ee+=2){var Qe=de[ee],Je=de[ee+1];Qe==="style"?ho(V,Je):Qe==="dangerouslySetInnerHTML"?xt(V,Je):Qe==="children"?tr(V,Je):oe(V,Qe,Je,Ne)}switch(le){case"input":fr(V,z);break;case"textarea":Tr(V,z);break;case"select":var ze=V._wrapperState.wasMultiple;V._wrapperState.wasMultiple=!!z.multiple;var ft=z.value;ft!=null?Gt(V,!!z.multiple,ft,!1):ze!==!!z.multiple&&(z.defaultValue!=null?Gt(V,!!z.multiple,z.defaultValue,!0):Gt(V,!!z.multiple,z.multiple?[]:"",!1))}V[_i]=z}catch(vt){tn(R,R.return,vt)}}break;case 6:if(Cr(j,R),Wr(R),F&4){if(R.stateNode===null)throw Error(w(162));V=R.stateNode,z=R.memoizedProps;try{V.nodeValue=z}catch(vt){tn(R,R.return,vt)}}break;case 3:if(Cr(j,R),Wr(R),F&4&&N!==null&&N.memoizedState.isDehydrated)try{Xr(j.containerInfo)}catch(vt){tn(R,R.return,vt)}break;case 4:Cr(j,R),Wr(R);break;case 13:Cr(j,R),Wr(R),V=R.child,V.flags&8192&&(z=V.memoizedState!==null,V.stateNode.isHidden=z,!z||V.alternate!==null&&V.alternate.memoizedState!==null||(Yl=Dt())),F&4&&Pc(R);break;case 22:if(Qe=N!==null&&N.memoizedState!==null,R.mode&1?(On=(Ne=On)||Qe,Cr(j,R),On=Ne):Cr(j,R),Wr(R),F&8192){if(Ne=R.memoizedState!==null,(R.stateNode.isHidden=Ne)&&!Qe&&(R.mode&1)!==0)for(ht=R,Qe=R.child;Qe!==null;){for(Je=ht=Qe;ht!==null;){switch(ze=ht,ft=ze.child,ze.tag){case 0:case 11:case 14:case 15:$i(4,ze,ze.return);break;case 1:Ys(ze,ze.return);var gt=ze.stateNode;if(typeof gt.componentWillUnmount=="function"){F=ze,N=ze.return;try{j=F,gt.props=j.memoizedProps,gt.state=j.memoizedState,gt.componentWillUnmount()}catch(vt){tn(F,N,vt)}}break;case 5:Ys(ze,ze.return);break;case 22:if(ze.memoizedState!==null){Nc(Je);continue}}ft!==null?(ft.return=ze,ht=ft):Nc(Je)}Qe=Qe.sibling}e:for(Qe=null,Je=R;;){if(Je.tag===5){if(Qe===null){Qe=Je;try{V=Je.stateNode,Ne?(z=V.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none"):(le=Je.stateNode,de=Je.memoizedProps.style,ee=de!=null&&de.hasOwnProperty("display")?de.display:null,le.style.display=hr("display",ee))}catch(vt){tn(R,R.return,vt)}}}else if(Je.tag===6){if(Qe===null)try{Je.stateNode.nodeValue=Ne?"":Je.memoizedProps}catch(vt){tn(R,R.return,vt)}}else if((Je.tag!==22&&Je.tag!==23||Je.memoizedState===null||Je===R)&&Je.child!==null){Je.child.return=Je,Je=Je.child;continue}if(Je===R)break e;for(;Je.sibling===null;){if(Je.return===null||Je.return===R)break e;Qe===Je&&(Qe=null),Je=Je.return}Qe===Je&&(Qe=null),Je.sibling.return=Je.return,Je=Je.sibling}}break;case 19:Cr(j,R),Wr(R),F&4&&Pc(R);break;case 21:break;default:Cr(j,R),Wr(R)}}function Wr(R){var j=R.flags;if(j&2){try{e:{for(var N=R.return;N!==null;){if(Rc(N)){var F=N;break e}N=N.return}throw Error(w(160))}switch(F.tag){case 5:var V=F.stateNode;F.flags&32&&(tr(V,""),F.flags&=-33);var z=Ac(R);zl(R,z,V);break;case 3:case 4:var ee=F.stateNode.containerInfo,le=Ac(R);Kl(R,le,ee);break;default:throw Error(w(161))}}catch(de){tn(R,R.return,de)}R.flags&=-3}j&4096&&(R.flags&=-4097)}function Rd(R,j,N){ht=R,Oc(R)}function Oc(R,j,N){for(var F=(R.mode&1)!==0;ht!==null;){var V=ht,z=V.child;if(V.tag===22&&F){var ee=V.memoizedState!==null||Pa;if(!ee){var le=V.alternate,de=le!==null&&le.memoizedState!==null||On;le=Pa;var Ne=On;if(Pa=ee,(On=de)&&!Ne)for(ht=V;ht!==null;)ee=ht,de=ee.child,ee.tag===22&&ee.memoizedState!==null?Ic(V):de!==null?(de.return=ee,ht=de):Ic(V);for(;z!==null;)ht=z,Oc(z),z=z.sibling;ht=V,Pa=le,On=Ne}$c(R)}else(V.subtreeFlags&8772)!==0&&z!==null?(z.return=V,ht=z):$c(R)}}function $c(R){for(;ht!==null;){var j=ht;if((j.flags&8772)!==0){var N=j.alternate;try{if((j.flags&8772)!==0)switch(j.tag){case 0:case 11:case 15:On||ja(5,j);break;case 1:var F=j.stateNode;if(j.flags&4&&!On)if(N===null)F.componentDidMount();else{var V=j.elementType===j.type?N.memoizedProps:Sr(j.type,N.memoizedProps);F.componentDidUpdate(V,N.memoizedState,F.__reactInternalSnapshotBeforeUpdate)}var z=j.updateQueue;z!==null&&Nu(j,z,F);break;case 3:var ee=j.updateQueue;if(ee!==null){if(N=null,j.child!==null)switch(j.child.tag){case 5:N=j.child.stateNode;break;case 1:N=j.child.stateNode}Nu(j,ee,N)}break;case 5:var le=j.stateNode;if(N===null&&j.flags&4){N=le;var de=j.memoizedProps;switch(j.type){case"button":case"input":case"select":case"textarea":de.autoFocus&&N.focus();break;case"img":de.src&&(N.src=de.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(j.memoizedState===null){var Ne=j.alternate;if(Ne!==null){var Qe=Ne.memoizedState;if(Qe!==null){var Je=Qe.dehydrated;Je!==null&&Xr(Je)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(w(163))}On||j.flags&512&&Wl(j)}catch(ze){tn(j,j.return,ze)}}if(j===R){ht=null;break}if(N=j.sibling,N!==null){N.return=j.return,ht=N;break}ht=j.return}}function Nc(R){for(;ht!==null;){var j=ht;if(j===R){ht=null;break}var N=j.sibling;if(N!==null){N.return=j.return,ht=N;break}ht=j.return}}function Ic(R){for(;ht!==null;){var j=ht;try{switch(j.tag){case 0:case 11:case 15:var N=j.return;try{ja(4,j)}catch(de){tn(j,N,de)}break;case 1:var F=j.stateNode;if(typeof F.componentDidMount=="function"){var V=j.return;try{F.componentDidMount()}catch(de){tn(j,V,de)}}var z=j.return;try{Wl(j)}catch(de){tn(j,z,de)}break;case 5:var ee=j.return;try{Wl(j)}catch(de){tn(j,ee,de)}}}catch(de){tn(j,j.return,de)}if(j===R){ht=null;break}var le=j.sibling;if(le!==null){le.return=j.return,ht=le;break}ht=j.return}}var Ad=Math.ceil,Oa=ae.ReactCurrentDispatcher,Gl=ae.ReactCurrentOwner,cr=ae.ReactCurrentBatchConfig,kt=0,xn=null,an=null,wn=0,er=0,Xs=Ao(0),pn=0,Ni=null,ps=0,$a=0,Ql=0,Ii=null,Un=null,Yl=0,Zs=1/0,fo=null,Na=!1,Xl=null,No=null,Ia=!1,Io=null,ka=0,ki=0,Zl=null,La=-1,Ma=0;function Ln(){return(kt&6)!==0?Dt():La!==-1?La:La=Dt()}function ko(R){return(R.mode&1)===0?1:(kt&2)!==0&&wn!==0?wn&-wn:cd.transition!==null?(Ma===0&&(Ma=Ko()),Ma):(R=Lt,R!==0||(R=window.event,R=R===void 0?16:Cs(R.type)),R)}function Rr(R,j,N,F){if(50<ki)throw ki=0,Zl=null,Error(w(185));Mr(R,N,F),((kt&2)===0||R!==xn)&&(R===xn&&((kt&2)===0&&($a|=N),pn===4&&Lo(R,wn)),Vn(R,F),N===1&&kt===0&&(j.mode&1)===0&&(Zs=Dt()+500,da&&Po()))}function Vn(R,j){var N=R.callbackNode;ri(R,j);var F=Lr(R,R===xn?wn:0);if(F===0)N!==null&&ys(N),R.callbackNode=null,R.callbackPriority=0;else if(j=F&-F,R.callbackPriority!==j){if(N!=null&&ys(N),j===1)R.tag===0?ud(Lc.bind(null,R)):_u(Lc.bind(null,R)),sd(function(){(kt&6)===0&&Po()}),N=null;else{switch(Ui(F)){case 1:N=Ir;break;case 4:N=qo;break;case 16:N=xo;break;case 536870912:N=kr;break;default:N=xo}N=Vc(N,kc.bind(null,R))}R.callbackPriority=j,R.callbackNode=N}}function kc(R,j){if(La=-1,Ma=0,(kt&6)!==0)throw Error(w(327));var N=R.callbackNode;if(Js()&&R.callbackNode!==N)return null;var F=Lr(R,R===xn?wn:0);if(F===0)return null;if((F&30)!==0||(F&R.expiredLanes)!==0||j)j=Da(R,F);else{j=F;var V=kt;kt|=2;var z=Dc();(xn!==R||wn!==j)&&(fo=null,Zs=Dt()+500,ms(R,j));do try{jd();break}catch(le){Mc(R,le)}while(!0);gl(),Oa.current=z,kt=V,an!==null?j=0:(xn=null,wn=0,j=pn)}if(j!==0){if(j===2&&(V=Wo(R),V!==0&&(F=V,j=Jl(R,V))),j===1)throw N=Ni,ms(R,0),Lo(R,F),Vn(R,Dt()),N;if(j===6)Lo(R,F);else{if(V=R.current.alternate,(F&30)===0&&!Td(V)&&(j=Da(R,F),j===2&&(z=Wo(R),z!==0&&(F=z,j=Jl(R,z))),j===1))throw N=Ni,ms(R,0),Lo(R,F),Vn(R,Dt()),N;switch(R.finishedWork=V,R.finishedLanes=F,j){case 0:case 1:throw Error(w(345));case 2:gs(R,Un,fo);break;case 3:if(Lo(R,F),(F&130023424)===F&&(j=Yl+500-Dt(),10<j)){if(Lr(R,0)!==0)break;if(V=R.suspendedLanes,(V&F)!==F){Ln(),R.pingedLanes|=R.suspendedLanes&V;break}R.timeoutHandle=sl(gs.bind(null,R,Un,fo),j);break}gs(R,Un,fo);break;case 4:if(Lo(R,F),(F&4194240)===F)break;for(j=R.eventTimes,V=-1;0<F;){var ee=31-Rt(F);z=1<<ee,ee=j[ee],ee>V&&(V=ee),F&=~z}if(F=V,F=Dt()-F,F=(120>F?120:480>F?480:1080>F?1080:1920>F?1920:3e3>F?3e3:4320>F?4320:1960*Ad(F/1960))-F,10<F){R.timeoutHandle=sl(gs.bind(null,R,Un,fo),F);break}gs(R,Un,fo);break;case 5:gs(R,Un,fo);break;default:throw Error(w(329))}}}return Vn(R,Dt()),R.callbackNode===N?kc.bind(null,R):null}function Jl(R,j){var N=Ii;return R.current.memoizedState.isDehydrated&&(ms(R,j).flags|=256),R=Da(R,j),R!==2&&(j=Un,Un=N,j!==null&&eu(j)),R}function eu(R){Un===null?Un=R:Un.push.apply(Un,R)}function Td(R){for(var j=R;;){if(j.flags&16384){var N=j.updateQueue;if(N!==null&&(N=N.stores,N!==null))for(var F=0;F<N.length;F++){var V=N[F],z=V.getSnapshot;V=V.value;try{if(!xe(z(),V))return!1}catch{return!1}}}if(N=j.child,j.subtreeFlags&16384&&N!==null)N.return=j,j=N;else{if(j===R)break;for(;j.sibling===null;){if(j.return===null||j.return===R)return!0;j=j.return}j.sibling.return=j.return,j=j.sibling}}return!0}function Lo(R,j){for(j&=~Ql,j&=~$a,R.suspendedLanes|=j,R.pingedLanes&=~j,R=R.expirationTimes;0<j;){var N=31-Rt(j),F=1<<N;R[N]=-1,j&=~F}}function Lc(R){if((kt&6)!==0)throw Error(w(327));Js();var j=Lr(R,0);if((j&1)===0)return Vn(R,Dt()),null;var N=Da(R,j);if(R.tag!==0&&N===2){var F=Wo(R);F!==0&&(j=F,N=Jl(R,F))}if(N===1)throw N=Ni,ms(R,0),Lo(R,j),Vn(R,Dt()),N;if(N===6)throw Error(w(345));return R.finishedWork=R.current.alternate,R.finishedLanes=j,gs(R,Un,fo),Vn(R,Dt()),null}function tu(R,j){var N=kt;kt|=1;try{return R(j)}finally{kt=N,kt===0&&(Zs=Dt()+500,da&&Po())}}function hs(R){Io!==null&&Io.tag===0&&(kt&6)===0&&Js();var j=kt;kt|=1;var N=cr.transition,F=Lt;try{if(cr.transition=null,Lt=1,R)return R()}finally{Lt=F,cr.transition=N,kt=j,(kt&6)===0&&Po()}}function nu(){er=Xs.current,Wt(Xs)}function ms(R,j){R.finishedWork=null,R.finishedLanes=0;var N=R.timeoutHandle;if(N!==-1&&(R.timeoutHandle=-1,od(N)),an!==null)for(N=an.return;N!==null;){var F=N;switch(dl(F),F.tag){case 1:F=F.type.childContextTypes,F!=null&&ua();break;case 3:Gs(),Wt(Bn),Wt(Tn),bl();break;case 5:wl(F);break;case 4:Gs();break;case 13:Wt(Zt);break;case 19:Wt(Zt);break;case 10:xl(F.type._context);break;case 22:case 23:nu()}N=N.return}if(xn=R,an=R=Mo(R.current,null),wn=er=j,pn=0,Ni=null,Ql=$a=ps=0,Un=Ii=null,us!==null){for(j=0;j<us.length;j++)if(N=us[j],F=N.interleaved,F!==null){N.interleaved=null;var V=F.next,z=N.pending;if(z!==null){var ee=z.next;z.next=V,F.next=ee}N.pending=F}us=null}return R}function Mc(R,j){do{var N=an;try{if(gl(),_a.current=Ca,wa){for(var F=Jt.memoizedState;F!==null;){var V=F.queue;V!==null&&(V.pending=null),F=F.next}wa=!1}if(fs=0,gn=fn=Jt=null,Ai=!1,Ti=0,Gl.current=null,N===null||N.return===null){pn=1,Ni=j,an=null;break}e:{var z=R,ee=N.return,le=N,de=j;if(j=wn,le.flags|=32768,de!==null&&typeof de=="object"&&typeof de.then=="function"){var Ne=de,Qe=le,Je=Qe.tag;if((Qe.mode&1)===0&&(Je===0||Je===11||Je===15)){var ze=Qe.alternate;ze?(Qe.updateQueue=ze.updateQueue,Qe.memoizedState=ze.memoizedState,Qe.lanes=ze.lanes):(Qe.updateQueue=null,Qe.memoizedState=null)}var ft=lc(ee);if(ft!==null){ft.flags&=-257,uc(ft,ee,le,z,j),ft.mode&1&&ac(z,Ne,j),j=ft,de=Ne;var gt=j.updateQueue;if(gt===null){var vt=new Set;vt.add(de),j.updateQueue=vt}else gt.add(de);break e}else{if((j&1)===0){ac(z,Ne,j),ru();break e}de=Error(w(426))}}else if(zt&&le.mode&1){var rn=lc(ee);if(rn!==null){(rn.flags&65536)===0&&(rn.flags|=256),uc(rn,ee,le,z,j),hl(Qs(de,le));break e}}z=de=Qs(de,le),pn!==4&&(pn=2),Ii===null?Ii=[z]:Ii.push(z),z=ee;do{switch(z.tag){case 3:z.flags|=65536,j&=-j,z.lanes|=j;var Pe=sc(z,de,j);$u(z,Pe);break e;case 1:le=de;var ge=z.type,$e=z.stateNode;if((z.flags&128)===0&&(typeof ge.getDerivedStateFromError=="function"||$e!==null&&typeof $e.componentDidCatch=="function"&&(No===null||!No.has($e)))){z.flags|=65536,j&=-j,z.lanes|=j;var rt=ic(z,le,j);$u(z,rt);break e}}z=z.return}while(z!==null)}Bc(N)}catch(yt){j=yt,an===N&&N!==null&&(an=N=N.return);continue}break}while(!0)}function Dc(){var R=Oa.current;return Oa.current=Ca,R===null?Ca:R}function ru(){(pn===0||pn===3||pn===2)&&(pn=4),xn===null||(ps&268435455)===0&&($a&268435455)===0||Lo(xn,wn)}function Da(R,j){var N=kt;kt|=2;var F=Dc();(xn!==R||wn!==j)&&(fo=null,ms(R,j));do try{Pd();break}catch(V){Mc(R,V)}while(!0);if(gl(),kt=N,Oa.current=F,an!==null)throw Error(w(261));return xn=null,wn=0,pn}function Pd(){for(;an!==null;)Fc(an)}function jd(){for(;an!==null&&!Yt();)Fc(an)}function Fc(R){var j=Uc(R.alternate,R,er);R.memoizedProps=R.pendingProps,j===null?Bc(R):an=j,Gl.current=null}function Bc(R){var j=R;do{var N=j.alternate;if(R=j.return,(j.flags&32768)===0){if(N=wd(N,j,er),N!==null){an=N;return}}else{if(N=Sd(N,j),N!==null){N.flags&=32767,an=N;return}if(R!==null)R.flags|=32768,R.subtreeFlags=0,R.deletions=null;else{pn=6,an=null;return}}if(j=j.sibling,j!==null){an=j;return}an=j=R}while(j!==null);pn===0&&(pn=5)}function gs(R,j,N){var F=Lt,V=cr.transition;try{cr.transition=null,Lt=1,Od(R,j,N,F)}finally{cr.transition=V,Lt=F}return null}function Od(R,j,N,F){do Js();while(Io!==null);if((kt&6)!==0)throw Error(w(327));N=R.finishedWork;var V=R.finishedLanes;if(N===null)return null;if(R.finishedWork=null,R.finishedLanes=0,N===R.current)throw Error(w(177));R.callbackNode=null,R.callbackPriority=0;var z=N.lanes|N.childLanes;if(qi(R,z),R===xn&&(an=xn=null,wn=0),(N.subtreeFlags&2064)===0&&(N.flags&2064)===0||Ia||(Ia=!0,Vc(xo,function(){return Js(),null})),z=(N.flags&15990)!==0,(N.subtreeFlags&15990)!==0||z){z=cr.transition,cr.transition=null;var ee=Lt;Lt=1;var le=kt;kt|=4,Gl.current=null,Cd(R,N),jc(N,R),Ae(rl),bs=!!nl,rl=nl=null,R.current=N,Rd(N),Gr(),kt=le,Lt=ee,cr.transition=z}else R.current=N;if(Ia&&(Ia=!1,Io=R,ka=V),z=R.pendingLanes,z===0&&(No=null),Fi(N.stateNode),Vn(R,Dt()),j!==null)for(F=R.onRecoverableError,N=0;N<j.length;N++)V=j[N],F(V.value,{componentStack:V.stack,digest:V.digest});if(Na)throw Na=!1,R=Xl,Xl=null,R;return(ka&1)!==0&&R.tag!==0&&Js(),z=R.pendingLanes,(z&1)!==0?R===Zl?ki++:(ki=0,Zl=R):ki=0,Po(),null}function Js(){if(Io!==null){var R=Ui(ka),j=cr.transition,N=Lt;try{if(cr.transition=null,Lt=16>R?16:R,Io===null)var F=!1;else{if(R=Io,Io=null,ka=0,(kt&6)!==0)throw Error(w(331));var V=kt;for(kt|=4,ht=R.current;ht!==null;){var z=ht,ee=z.child;if((ht.flags&16)!==0){var le=z.deletions;if(le!==null){for(var de=0;de<le.length;de++){var Ne=le[de];for(ht=Ne;ht!==null;){var Qe=ht;switch(Qe.tag){case 0:case 11:case 15:$i(8,Qe,z)}var Je=Qe.child;if(Je!==null)Je.return=Qe,ht=Je;else for(;ht!==null;){Qe=ht;var ze=Qe.sibling,ft=Qe.return;if(Cc(Qe),Qe===Ne){ht=null;break}if(ze!==null){ze.return=ft,ht=ze;break}ht=ft}}}var gt=z.alternate;if(gt!==null){var vt=gt.child;if(vt!==null){gt.child=null;do{var rn=vt.sibling;vt.sibling=null,vt=rn}while(vt!==null)}}ht=z}}if((z.subtreeFlags&2064)!==0&&ee!==null)ee.return=z,ht=ee;else e:for(;ht!==null;){if(z=ht,(z.flags&2048)!==0)switch(z.tag){case 0:case 11:case 15:$i(9,z,z.return)}var Pe=z.sibling;if(Pe!==null){Pe.return=z.return,ht=Pe;break e}ht=z.return}}var ge=R.current;for(ht=ge;ht!==null;){ee=ht;var $e=ee.child;if((ee.subtreeFlags&2064)!==0&&$e!==null)$e.return=ee,ht=$e;else e:for(ee=ge;ht!==null;){if(le=ht,(le.flags&2048)!==0)try{switch(le.tag){case 0:case 11:case 15:ja(9,le)}}catch(yt){tn(le,le.return,yt)}if(le===ee){ht=null;break e}var rt=le.sibling;if(rt!==null){rt.return=le.return,ht=rt;break e}ht=le.return}}if(kt=V,Po(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(Uo,R)}catch{}F=!0}return F}finally{Lt=N,cr.transition=j}}return!1}function Hc(R,j,N){j=Qs(N,j),j=sc(R,j,1),R=Oo(R,j,1),j=Ln(),R!==null&&(Mr(R,1,j),Vn(R,j))}function tn(R,j,N){if(R.tag===3)Hc(R,R,N);else for(;j!==null;){if(j.tag===3){Hc(j,R,N);break}else if(j.tag===1){var F=j.stateNode;if(typeof j.type.getDerivedStateFromError=="function"||typeof F.componentDidCatch=="function"&&(No===null||!No.has(F))){R=Qs(N,R),R=ic(j,R,1),j=Oo(j,R,1),R=Ln(),j!==null&&(Mr(j,1,R),Vn(j,R));break}}j=j.return}}function $d(R,j,N){var F=R.pingCache;F!==null&&F.delete(j),j=Ln(),R.pingedLanes|=R.suspendedLanes&N,xn===R&&(wn&N)===N&&(pn===4||pn===3&&(wn&130023424)===wn&&500>Dt()-Yl?ms(R,0):Ql|=N),Vn(R,j)}function qc(R,j){j===0&&((R.mode&1)===0?j=1:(j=Bt,Bt<<=1,(Bt&130023424)===0&&(Bt=4194304)));var N=Ln();R=lo(R,j),R!==null&&(Mr(R,j,N),Vn(R,N))}function Nd(R){var j=R.memoizedState,N=0;j!==null&&(N=j.retryLane),qc(R,N)}function Id(R,j){var N=0;switch(R.tag){case 13:var F=R.stateNode,V=R.memoizedState;V!==null&&(N=V.retryLane);break;case 19:F=R.stateNode;break;default:throw Error(w(314))}F!==null&&F.delete(j),qc(R,N)}var Uc;Uc=function(R,j,N){if(R!==null)if(R.memoizedProps!==j.pendingProps||Bn.current)qn=!0;else{if((R.lanes&N)===0&&(j.flags&128)===0)return qn=!1,_d(R,j,N);qn=(R.flags&131072)!==0}else qn=!1,zt&&(j.flags&1048576)!==0&&wu(j,pa,j.index);switch(j.lanes=0,j.tag){case 2:var F=j.type;Ta(R,j),R=j.pendingProps;var V=Hs(j,Tn.current);zs(j,N),V=Al(null,j,F,R,V,N);var z=Tl();return j.flags|=1,typeof V=="object"&&V!==null&&typeof V.render=="function"&&V.$$typeof===void 0?(j.tag=1,j.memoizedState=null,j.updateQueue=null,Hn(F)?(z=!0,ca(j)):z=!1,j.memoizedState=V.state!==null&&V.state!==void 0?V.state:null,El(j),V.updater=Ra,j.stateNode=V,V._reactInternals=j,Il(j,F,R,N),j=Dl(null,j,F,!0,z,N)):(j.tag=0,zt&&z&&cl(j),kn(null,j,V,N),j=j.child),j;case 16:F=j.elementType;e:{switch(Ta(R,j),R=j.pendingProps,V=F._init,F=V(F._payload),j.type=F,V=j.tag=Ld(F),R=Sr(F,R),V){case 0:j=Ml(null,j,F,R,N);break e;case 1:j=mc(null,j,F,R,N);break e;case 11:j=cc(null,j,F,R,N);break e;case 14:j=dc(null,j,F,Sr(F.type,R),N);break e}throw Error(w(306,F,""))}return j;case 0:return F=j.type,V=j.pendingProps,V=j.elementType===F?V:Sr(F,V),Ml(R,j,F,V,N);case 1:return F=j.type,V=j.pendingProps,V=j.elementType===F?V:Sr(F,V),mc(R,j,F,V,N);case 3:e:{if(gc(j),R===null)throw Error(w(387));F=j.pendingProps,z=j.memoizedState,V=z.element,Ou(R,j),ya(j,F,null,N);var ee=j.memoizedState;if(F=ee.element,z.isDehydrated)if(z={element:F,isDehydrated:!1,cache:ee.cache,pendingSuspenseBoundaries:ee.pendingSuspenseBoundaries,transitions:ee.transitions},j.updateQueue.baseState=z,j.memoizedState=z,j.flags&256){V=Qs(Error(w(423)),j),j=xc(R,j,F,N,V);break e}else if(F!==V){V=Qs(Error(w(424)),j),j=xc(R,j,F,N,V);break e}else for(Jn=Ro(j.stateNode.containerInfo.firstChild),Zn=j,zt=!0,wr=null,N=Pu(j,null,F,N),j.child=N;N;)N.flags=N.flags&-3|4096,N=N.sibling;else{if(Vs(),F===V){j=co(R,j,N);break e}kn(R,j,F,N)}j=j.child}return j;case 5:return Iu(j),R===null&&pl(j),F=j.type,V=j.pendingProps,z=R!==null?R.memoizedProps:null,ee=V.children,ol(F,V)?ee=null:z!==null&&ol(F,z)&&(j.flags|=32),hc(R,j),kn(R,j,ee,N),j.child;case 6:return R===null&&pl(j),null;case 13:return vc(R,j,N);case 4:return _l(j,j.stateNode.containerInfo),F=j.pendingProps,R===null?j.child=Ws(j,null,F,N):kn(R,j,F,N),j.child;case 11:return F=j.type,V=j.pendingProps,V=j.elementType===F?V:Sr(F,V),cc(R,j,F,V,N);case 7:return kn(R,j,j.pendingProps,N),j.child;case 8:return kn(R,j,j.pendingProps.children,N),j.child;case 12:return kn(R,j,j.pendingProps.children,N),j.child;case 10:e:{if(F=j.type._context,V=j.pendingProps,z=j.memoizedProps,ee=V.value,qt(ga,F._currentValue),F._currentValue=ee,z!==null)if(xe(z.value,ee)){if(z.children===V.children&&!Bn.current){j=co(R,j,N);break e}}else for(z=j.child,z!==null&&(z.return=j);z!==null;){var le=z.dependencies;if(le!==null){ee=z.child;for(var de=le.firstContext;de!==null;){if(de.context===F){if(z.tag===1){de=uo(-1,N&-N),de.tag=2;var Ne=z.updateQueue;if(Ne!==null){Ne=Ne.shared;var Qe=Ne.pending;Qe===null?de.next=de:(de.next=Qe.next,Qe.next=de),Ne.pending=de}}z.lanes|=N,de=z.alternate,de!==null&&(de.lanes|=N),vl(z.return,N,j),le.lanes|=N;break}de=de.next}}else if(z.tag===10)ee=z.type===j.type?null:z.child;else if(z.tag===18){if(ee=z.return,ee===null)throw Error(w(341));ee.lanes|=N,le=ee.alternate,le!==null&&(le.lanes|=N),vl(ee,N,j),ee=z.sibling}else ee=z.child;if(ee!==null)ee.return=z;else for(ee=z;ee!==null;){if(ee===j){ee=null;break}if(z=ee.sibling,z!==null){z.return=ee.return,ee=z;break}ee=ee.return}z=ee}kn(R,j,V.children,N),j=j.child}return j;case 9:return V=j.type,F=j.pendingProps.children,zs(j,N),V=lr(V),F=F(V),j.flags|=1,kn(R,j,F,N),j.child;case 14:return F=j.type,V=Sr(F,j.pendingProps),V=Sr(F.type,V),dc(R,j,F,V,N);case 15:return fc(R,j,j.type,j.pendingProps,N);case 17:return F=j.type,V=j.pendingProps,V=j.elementType===F?V:Sr(F,V),Ta(R,j),j.tag=1,Hn(F)?(R=!0,ca(j)):R=!1,zs(j,N),rc(j,F,V),Il(j,F,V,N),Dl(null,j,F,!0,R,N);case 19:return Ec(R,j,N);case 22:return pc(R,j,N)}throw Error(w(156,j.tag))};function Vc(R,j){return ti(R,j)}function kd(R,j,N,F){this.tag=R,this.key=N,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=j,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=F,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(R,j,N,F){return new kd(R,j,N,F)}function ou(R){return R=R.prototype,!(!R||!R.isReactComponent)}function Ld(R){if(typeof R=="function")return ou(R)?1:0;if(R!=null){if(R=R.$$typeof,R===Ye)return 11;if(R===Ke)return 14}return 2}function Mo(R,j){var N=R.alternate;return N===null?(N=dr(R.tag,j,R.key,R.mode),N.elementType=R.elementType,N.type=R.type,N.stateNode=R.stateNode,N.alternate=R,R.alternate=N):(N.pendingProps=j,N.type=R.type,N.flags=0,N.subtreeFlags=0,N.deletions=null),N.flags=R.flags&14680064,N.childLanes=R.childLanes,N.lanes=R.lanes,N.child=R.child,N.memoizedProps=R.memoizedProps,N.memoizedState=R.memoizedState,N.updateQueue=R.updateQueue,j=R.dependencies,N.dependencies=j===null?null:{lanes:j.lanes,firstContext:j.firstContext},N.sibling=R.sibling,N.index=R.index,N.ref=R.ref,N}function Fa(R,j,N,F,V,z){var ee=2;if(F=R,typeof R=="function")ou(R)&&(ee=1);else if(typeof R=="string")ee=5;else e:switch(R){case re:return xs(N.children,V,z,j);case he:ee=8,V|=8;break;case be:return R=dr(12,N,j,V|2),R.elementType=be,R.lanes=z,R;case et:return R=dr(13,N,j,V),R.elementType=et,R.lanes=z,R;case je:return R=dr(19,N,j,V),R.elementType=je,R.lanes=z,R;case We:return Ba(N,V,z,j);default:if(typeof R=="object"&&R!==null)switch(R.$$typeof){case Le:ee=10;break e;case qe:ee=9;break e;case Ye:ee=11;break e;case Ke:ee=14;break e;case Ve:ee=16,F=null;break e}throw Error(w(130,R==null?R:typeof R,""))}return j=dr(ee,N,j,V),j.elementType=R,j.type=F,j.lanes=z,j}function xs(R,j,N,F){return R=dr(7,R,F,j),R.lanes=N,R}function Ba(R,j,N,F){return R=dr(22,R,F,j),R.elementType=We,R.lanes=N,R.stateNode={isHidden:!1},R}function su(R,j,N){return R=dr(6,R,null,j),R.lanes=N,R}function iu(R,j,N){return j=dr(4,R.children!==null?R.children:[],R.key,j),j.lanes=N,j.stateNode={containerInfo:R.containerInfo,pendingChildren:null,implementation:R.implementation},j}function Md(R,j,N,F,V){this.tag=j,this.containerInfo=R,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_s(0),this.expirationTimes=_s(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_s(0),this.identifierPrefix=F,this.onRecoverableError=V,this.mutableSourceEagerHydrationData=null}function au(R,j,N,F,V,z,ee,le,de){return R=new Md(R,j,N,le,de),j===1?(j=1,z===!0&&(j|=8)):j=0,z=dr(3,null,null,j),R.current=z,z.stateNode=R,z.memoizedState={element:F,isDehydrated:N,cache:null,transitions:null,pendingSuspenseBoundaries:null},El(z),R}function Dd(R,j,N){var F=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Te,key:F==null?null:""+F,children:R,containerInfo:j,implementation:N}}function Wc(R){if(!R)return To;R=R._reactInternals;e:{if(bn(R)!==R||R.tag!==1)throw Error(w(170));var j=R;do{switch(j.tag){case 3:j=j.stateNode.context;break e;case 1:if(Hn(j.type)){j=j.stateNode.__reactInternalMemoizedMergedChildContext;break e}}j=j.return}while(j!==null);throw Error(w(171))}if(R.tag===1){var N=R.type;if(Hn(N))return yu(R,N,j)}return j}function Kc(R,j,N,F,V,z,ee,le,de){return R=au(N,F,!0,R,V,z,ee,le,de),R.context=Wc(null),N=R.current,F=Ln(),V=ko(N),z=uo(F,V),z.callback=j??null,Oo(N,z,V),R.current.lanes=V,Mr(R,V,F),Vn(R,F),R}function Ha(R,j,N,F){var V=j.current,z=Ln(),ee=ko(V);return N=Wc(N),j.context===null?j.context=N:j.pendingContext=N,j=uo(z,ee),j.payload={element:R},F=F===void 0?null:F,F!==null&&(j.callback=F),R=Oo(V,j,ee),R!==null&&(Rr(R,V,ee,z),va(R,V,ee)),ee}function qa(R){if(R=R.current,!R.child)return null;switch(R.child.tag){case 5:return R.child.stateNode;default:return R.child.stateNode}}function zc(R,j){if(R=R.memoizedState,R!==null&&R.dehydrated!==null){var N=R.retryLane;R.retryLane=N!==0&&N<j?N:j}}function lu(R,j){zc(R,j),(R=R.alternate)&&zc(R,j)}function Fd(){return null}var Gc=typeof reportError=="function"?reportError:function(R){console.error(R)};function uu(R){this._internalRoot=R}Ua.prototype.render=uu.prototype.render=function(R){var j=this._internalRoot;if(j===null)throw Error(w(409));Ha(R,j,null,null)},Ua.prototype.unmount=uu.prototype.unmount=function(){var R=this._internalRoot;if(R!==null){this._internalRoot=null;var j=R.containerInfo;hs(function(){Ha(null,R,null,null)}),j[oo]=null}};function Ua(R){this._internalRoot=R}Ua.prototype.unstable_scheduleHydration=function(R){if(R){var j=Wi();R={blockedOn:null,target:R,priority:j};for(var N=0;N<Mn.length&&j!==0&&j<Mn[N].priority;N++);Mn.splice(N,0,R),N===0&&Qn(R)}};function cu(R){return!(!R||R.nodeType!==1&&R.nodeType!==9&&R.nodeType!==11)}function Va(R){return!(!R||R.nodeType!==1&&R.nodeType!==9&&R.nodeType!==11&&(R.nodeType!==8||R.nodeValue!==" react-mount-point-unstable "))}function Qc(){}function Bd(R,j,N,F,V){if(V){if(typeof F=="function"){var z=F;F=function(){var Ne=qa(ee);z.call(Ne)}}var ee=Kc(j,F,R,0,null,!1,!1,"",Qc);return R._reactRootContainer=ee,R[oo]=ee.current,yi(R.nodeType===8?R.parentNode:R),hs(),ee}for(;V=R.lastChild;)R.removeChild(V);if(typeof F=="function"){var le=F;F=function(){var Ne=qa(de);le.call(Ne)}}var de=au(R,0,!1,null,null,!1,!1,"",Qc);return R._reactRootContainer=de,R[oo]=de.current,yi(R.nodeType===8?R.parentNode:R),hs(function(){Ha(j,de,N,F)}),de}function Wa(R,j,N,F,V){var z=N._reactRootContainer;if(z){var ee=z;if(typeof V=="function"){var le=V;V=function(){var de=qa(ee);le.call(de)}}Ha(j,ee,R,V)}else ee=Bd(N,j,R,V,F);return qa(ee)}It=function(R){switch(R.tag){case 3:var j=R.stateNode;if(j.current.memoizedState.isDehydrated){var N=mr(j.pendingLanes);N!==0&&(Qr(j,N|1),Vn(j,Dt()),(kt&6)===0&&(Zs=Dt()+500,Po()))}break;case 13:hs(function(){var F=lo(R,1);if(F!==null){var V=Ln();Rr(F,R,1,V)}}),lu(R,1)}},ws=function(R){if(R.tag===13){var j=lo(R,134217728);if(j!==null){var N=Ln();Rr(j,R,134217728,N)}lu(R,134217728)}},Vi=function(R){if(R.tag===13){var j=ko(R),N=lo(R,j);if(N!==null){var F=Ln();Rr(N,R,j,F)}lu(R,j)}},Wi=function(){return Lt},Cn=function(R,j){var N=Lt;try{return Lt=R,j()}finally{Lt=N}},ut=function(R,j,N){switch(j){case"input":if(fr(R,N),j=N.name,N.type==="radio"&&j!=null){for(N=R;N.parentNode;)N=N.parentNode;for(N=N.querySelectorAll("input[name="+JSON.stringify(""+j)+'][type="radio"]'),j=0;j<N.length;j++){var F=N[j];if(F!==R&&F.form===R.form){var V=la(F);if(!V)throw Error(w(90));_t(F),fr(F,V)}}}break;case"textarea":Tr(R,N);break;case"select":j=N.value,j!=null&&Gt(R,!!N.multiple,j,!1)}},$t=tu,Gn=hs;var Hd={usingClientEntryPoint:!1,Events:[wi,Fs,la,bt,Be,tu]},Li={findFiberByHostInstance:os,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qd={bundleType:Li.bundleType,version:Li.version,rendererPackageName:Li.rendererPackageName,rendererConfig:Li.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ae.ReactCurrentDispatcher,findHostInstanceByFiber:function(R){return R=ei(R),R===null?null:R.stateNode},findFiberByHostInstance:Li.findFiberByHostInstance||Fd,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ka=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ka.isDisabled&&Ka.supportsFiber)try{Uo=Ka.inject(qd),In=Ka}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hd,reactDom_production_min.createPortal=function(R,j){var N=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cu(j))throw Error(w(200));return Dd(R,j,null,N)},reactDom_production_min.createRoot=function(R,j){if(!cu(R))throw Error(w(299));var N=!1,F="",V=Gc;return j!=null&&(j.unstable_strictMode===!0&&(N=!0),j.identifierPrefix!==void 0&&(F=j.identifierPrefix),j.onRecoverableError!==void 0&&(V=j.onRecoverableError)),j=au(R,1,!1,null,null,N,!1,F,V),R[oo]=j.current,yi(R.nodeType===8?R.parentNode:R),new uu(j)},reactDom_production_min.findDOMNode=function(R){if(R==null)return null;if(R.nodeType===1)return R;var j=R._reactInternals;if(j===void 0)throw typeof R.render=="function"?Error(w(188)):(R=Object.keys(R).join(","),Error(w(268,R)));return R=ei(j),R=R===null?null:R.stateNode,R},reactDom_production_min.flushSync=function(R){return hs(R)},reactDom_production_min.hydrate=function(R,j,N){if(!Va(j))throw Error(w(200));return Wa(null,R,j,!0,N)},reactDom_production_min.hydrateRoot=function(R,j,N){if(!cu(R))throw Error(w(405));var F=N!=null&&N.hydratedSources||null,V=!1,z="",ee=Gc;if(N!=null&&(N.unstable_strictMode===!0&&(V=!0),N.identifierPrefix!==void 0&&(z=N.identifierPrefix),N.onRecoverableError!==void 0&&(ee=N.onRecoverableError)),j=Kc(j,null,R,1,N??null,V,!1,z,ee),R[oo]=j.current,yi(R),F)for(R=0;R<F.length;R++)N=F[R],V=N._getVersion,V=V(N._source),j.mutableSourceEagerHydrationData==null?j.mutableSourceEagerHydrationData=[N,V]:j.mutableSourceEagerHydrationData.push(N,V);return new Ua(j)},reactDom_production_min.render=function(R,j,N){if(!Va(j))throw Error(w(200));return Wa(null,R,j,!1,N)},reactDom_production_min.unmountComponentAtNode=function(R){if(!Va(R))throw Error(w(40));return R._reactRootContainer?(hs(function(){Wa(null,null,R,!1,function(){R._reactRootContainer=null,R[oo]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=tu,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(R,j,N,F){if(!Va(N))throw Error(w(200));if(R==null||R._reactInternals===void 0)throw Error(w(38));return Wa(R,j,N,!1,F)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function x(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(x)}catch(y){console.error(y)}}return x(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var x=requireReactDom();return client.createRoot=x.createRoot,client.hydrateRoot=x.hydrateRoot,client}var clientExports=requireClient();const ReactDOM$1=getDefaultExportFromCjs(clientExports);try{self["workbox:window:7.2.0"]&&_()}catch{}function n$2(x,y){return new Promise((function(w){var C=new MessageChannel;C.port1.onmessage=function(P){w(P.data)},x.postMessage(y,[C.port2])}))}function t$3(x){var y=(function(w,C){if(typeof w!="object"||!w)return w;var P=w[Symbol.toPrimitive];if(P!==void 0){var O=P.call(w,C);if(typeof O!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(w)})(x,"string");return typeof y=="symbol"?y:y+""}function r$3(x,y){for(var w=0;w<y.length;w++){var C=y[w];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(x,t$3(C.key),C)}}function e$2(x,y){return e$2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(w,C){return w.__proto__=C,w},e$2(x,y)}function i$1(x,y){(y==null||y>x.length)&&(y=x.length);for(var w=0,C=new Array(y);w<y;w++)C[w]=x[w];return C}function o$2(x,y){var w=typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(w)return(w=w.call(x)).next.bind(w);if(Array.isArray(x)||(w=(function(P,O){if(P){if(typeof P=="string")return i$1(P,O);var $=Object.prototype.toString.call(P).slice(8,-1);return $==="Object"&&P.constructor&&($=P.constructor.name),$==="Map"||$==="Set"?Array.from(P):$==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($)?i$1(P,O):void 0}})(x))||y){w&&(x=w);var C=0;return function(){return C>=x.length?{done:!0}:{done:!1,value:x[C++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}try{self["workbox:core:7.2.0"]&&_()}catch{}var u$1=function(){var x=this;this.promise=new Promise((function(y,w){x.resolve=y,x.reject=w}))};function a$1(x,y){var w=location.href;return new URL(x,w).href===new URL(y,w).href}var c$1=function(x,y){this.type=x,Object.assign(this,y)};function f$2(x,y,w){return w?y?y(x):x:(x&&x.then||(x=Promise.resolve(x)),y?x.then(y):x)}function s$2(){}var v={type:"SKIP_WAITING"};function h$1(x,y){return x&&x.then?x.then(s$2):Promise.resolve()}var l$1=(function(x){function y(L,D){var B,U;return D===void 0&&(D={}),(B=x.call(this)||this).nn={},B.tn=0,B.rn=new u$1,B.en=new u$1,B.on=new u$1,B.un=0,B.an=new Set,B.cn=function(){var k=B.fn,H=k.installing;B.tn>0||!a$1(H.scriptURL,B.sn.toString())||performance.now()>B.un+6e4?(B.vn=H,k.removeEventListener("updatefound",B.cn)):(B.hn=H,B.an.add(H),B.rn.resolve(H)),++B.tn,H.addEventListener("statechange",B.ln)},B.ln=function(k){var H=B.fn,W=k.target,G=W.state,Q=W===B.vn,Z={sw:W,isExternal:Q,originalEvent:k};!Q&&B.mn&&(Z.isUpdate=!0),B.dispatchEvent(new c$1(G,Z)),G==="installed"?B.wn=self.setTimeout((function(){G==="installed"&&H.waiting===W&&B.dispatchEvent(new c$1("waiting",Z))}),200):G==="activating"&&(clearTimeout(B.wn),Q||B.en.resolve(W))},B.yn=function(k){var H=B.hn,W=H!==navigator.serviceWorker.controller;B.dispatchEvent(new c$1("controlling",{isExternal:W,originalEvent:k,sw:H,isUpdate:B.mn})),W||B.on.resolve(H)},B.gn=(U=function(k){var H=k.data,W=k.ports,G=k.source;return f$2(B.getSW(),(function(){B.an.has(G)&&B.dispatchEvent(new c$1("message",{data:H,originalEvent:k,ports:W,sw:G}))}))},function(){for(var k=[],H=0;H<arguments.length;H++)k[H]=arguments[H];try{return Promise.resolve(U.apply(this,k))}catch(W){return Promise.reject(W)}}),B.sn=L,B.nn=D,navigator.serviceWorker.addEventListener("message",B.gn),B}var w,C;C=x,(w=y).prototype=Object.create(C.prototype),w.prototype.constructor=w,e$2(w,C);var P,O,$=y.prototype;return $.register=function(L){var D=(L===void 0?{}:L).immediate,B=D!==void 0&&D;try{var U=this;return f$2((function(k,H){var W=k();return W&&W.then?W.then(H):H(W)})((function(){if(!B&&document.readyState!=="complete")return h$1(new Promise((function(k){return window.addEventListener("load",k)})))}),(function(){return U.mn=!!navigator.serviceWorker.controller,U.dn=U.pn(),f$2(U.bn(),(function(k){U.fn=k,U.dn&&(U.hn=U.dn,U.en.resolve(U.dn),U.on.resolve(U.dn),U.dn.addEventListener("statechange",U.ln,{once:!0}));var H=U.fn.waiting;return H&&a$1(H.scriptURL,U.sn.toString())&&(U.hn=H,Promise.resolve().then((function(){U.dispatchEvent(new c$1("waiting",{sw:H,wasWaitingBeforeRegister:!0}))})).then((function(){}))),U.hn&&(U.rn.resolve(U.hn),U.an.add(U.hn)),U.fn.addEventListener("updatefound",U.cn),navigator.serviceWorker.addEventListener("controllerchange",U.yn),U.fn}))})))}catch(k){return Promise.reject(k)}},$.update=function(){try{return this.fn?f$2(h$1(this.fn.update())):f$2()}catch(L){return Promise.reject(L)}},$.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},$.messageSW=function(L){try{return f$2(this.getSW(),(function(D){return n$2(D,L)}))}catch(D){return Promise.reject(D)}},$.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&n$2(this.fn.waiting,v)},$.pn=function(){var L=navigator.serviceWorker.controller;return L&&a$1(L.scriptURL,this.sn.toString())?L:void 0},$.bn=function(){try{var L=this;return f$2((function(D,B){try{var U=D()}catch(k){return B(k)}return U&&U.then?U.then(void 0,B):U})((function(){return f$2(navigator.serviceWorker.register(L.sn,L.nn),(function(D){return L.un=performance.now(),D}))}),(function(D){throw D})))}catch(D){return Promise.reject(D)}},P=y,(O=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&r$3(P.prototype,O),Object.defineProperty(P,"prototype",{writable:!1}),P})((function(){function x(){this.Pn=new Map}var y=x.prototype;return y.addEventListener=function(w,C){this.jn(w).add(C)},y.removeEventListener=function(w,C){this.jn(w).delete(C)},y.dispatchEvent=function(w){w.target=this;for(var C,P=o$2(this.jn(w.type));!(C=P()).done;)(0,C.value)(w)},y.jn=function(w){return this.Pn.has(w)||this.Pn.set(w,new Set),this.Pn.get(w)},x})()),ProvidedComponents=(x=>(x.OpenGameButton="OpenGameButton",x))(ProvidedComponents||{});const GAME_DESCRIPTOR_NAME="game.cfg",locales$1=[{label:"English",value:"en-US"},{label:"",value:"ru-RU"},{label:"",value:"uk-UA"},{label:"",value:"zh"}],createEvent$1=()=>{const x=new Set;return{add:C=>{x.add(C)},fire:()=>{x.forEach(C=>C()),x.clear()}}},INTERNAL=Symbol(),shallowCopy=x=>Array.isArray(x)?x.slice():Object.create(Object.getPrototypeOf(x),Object.getOwnPropertyDescriptors(x));function getIn(x,y,w=!1,C=0){if(C===y.length)return x;const P=y[C];return w&&!x[P]&&(x[P]={}),getIn(x[P],y,w,C+1)}function setIn(x,y,w,C=0){if(C===y.length)return w;const P=y[C],O=x[P],$=setIn(O,y,w,C+1);if($===O)return x;const L=shallowCopy(x);return L[P]=$,L}const handler$1={get:(x,y)=>y===INTERNAL?x:new Proxy([...x,y],handler$1)},pathProxy=new Proxy([],handler$1),createFocus=(x,y)=>w=>{const C=typeof w=="function"?w(pathProxy)[INTERNAL]:[w];x.cache||(x.cache={});const P=y.concat(C),{get:O}=x,$=getIn(x.cache,P,!0);return $[INTERNAL]||($[INTERNAL]=createAtom(Object.assign(Object.assign({},x),{path:P,get:()=>{const L=O();return L?getIn(L,P):void 0},set:L=>x.atom.set(setIn(O(),P,L))})))},createStream=x=>(y,w)=>{let C;const P=createInternal();let O=!0;const $=()=>{P.listeners.size?L():O=!0},L=()=>{const D=x.get(),B=y(D,C);O=!1,w&&!B||(P.set(B),C=B)};return createAtom(Object.assign(Object.assign({},P),{get:()=>(!x.isStream&&O&&L(),P.get()),isStream:w||x.isStream,subscribe:D=>{const B=x.subscribe($),U=P.subscribe(D);return()=>{U(),P.listeners.size||B()}}}))},tools={symbol:INTERNAL,send:()=>{},wrap:x=>x},subscribeInternal=(x,y,w)=>C=>{const P=createEvent$1();let O=y();const $=D=>{const B=C(D,O);typeof B=="function"&&P.add(B)};w&&$(O);const L=x(()=>{const D=y();D!==O&&(P.fire(),$(D),O=D)});return()=>{P.fire(),L()}},createInternal=x=>{const y=new Set,w={listeners:y,get:()=>x,set:C=>{x!==C&&(x=C,tools.send(w),y.forEach(P=>P()))},subscribe:C=>(y.add(C),()=>void y.delete(C))};return w};function createAtom(x,y){const{get:w,subscribe:C,atom:P}=x,O={get value(){return tools.get&&tools.get(O),w()},set value(L){O.set(L)},get actions(){return tools.wrap($,O)},set:L=>x.set(L),update:L=>O.set(L(w())),subscribe:subscribeInternal(C,w),watch:subscribeInternal(C,w,!0),focus:createFocus(P?P[INTERNAL]:x,x.path||[]),map:createStream(x),[INTERNAL]:x};x.atom=O,create.plugins.forEach(L=>L(O));const $=y&&y(O);return O}const createGetState=(x,y)=>(w,C)=>C?(y(C(x)),w()):(y(w.subscribe(x)),w[INTERNAL].get()),createSelector=x=>{const y=createInternal(),{get:w,set:C,listeners:P}=y,O=createEvent$1();let $=!0;const L=createGetState(()=>{P.size?D():$=!0},O.add),D=()=>{O.fire(),$=!1;const B=tools.get;tools.get=y.track?L:null,C(x(L)),tools.get=B};return y.get=()=>($&&D(),w()),y};function atom(x,y){const w=(typeof x=="function"?createSelector:createInternal)(x);return w.isStream=!arguments.length,createAtom(w,y)}atom.plugins=[];atom.internal=tools;const create=atom;var useConstant={},hasRequiredUseConstant;function requireUseConstant(){if(hasRequiredUseConstant)return useConstant;hasRequiredUseConstant=1,Object.defineProperty(useConstant,"__esModule",{value:!0});var x=requireReact();const y=w=>{const C=x.useRef();return C.current||(C.current={c:w()}),C.current.c};return useConstant.useConstant=y,useConstant}var useConstantExports=requireUseConstant(),useAdapter={};const createEvent=()=>{const x=new Set;return{add:C=>{x.add(C)},fire:()=>{x.forEach(C=>C()),x.clear()}}},error=x=>{throw new Error(`[xoid] \`${x}\` cannot be used outside the setup context. To create a setup context, use the \`useSetup\` hook from a framework integration package.`)};let adapter={effect:()=>error("effect"),inject:()=>error("inject")};const inject=x=>adapter.inject(x),effect=x=>adapter.effect(x);function setup(x){const y=adapter;adapter=this;const w=x();return adapter=y,w}const createAdapter=x=>{const y=createEvent(),w=createEvent();return{inject:x.inject,mount:y.fire,unmount:w.fire,effect:C=>y.add(()=>{const P=C();typeof P=="function"&&w.add(P)})}},setup_esm=Object.freeze(Object.defineProperty({__proto__:null,createAdapter,effect,inject,setup},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(setup_esm);var hasRequiredUseAdapter;function requireUseAdapter(){if(hasRequiredUseAdapter)return useAdapter;hasRequiredUseAdapter=1,Object.defineProperty(useAdapter,"__esModule",{value:!0});var x=requireReact(),y=require$$1,w=requireUseConstant();function C(U){return U&&typeof U=="object"&&"default"in U?U:{default:U}}var P=C(x);const O=new Map,$=(U,k)=>{const H=x.createContext(k);return O.set(U,H),H.Provider},L=P.default.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=U=>{if(typeof U!="symbol")throw new TypeError("An injection key should be a symbol.");return L.ReactCurrentDispatcher.current.readContext(O.get(U))},B=U=>{const k=w.useConstant(()=>y.createAdapter({inject:D}));return x.useEffect(()=>(k.mount(),()=>k.unmount()),[]),w.useConstant(()=>y.setup.call(k,U))};return useAdapter.createProvider=$,useAdapter.useAdapter=B,useAdapter}var useAdapterExports=requireUseAdapter(),useAtom={},shim={exports:{}},useSyncExternalStoreShim_production={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredUseSyncExternalStoreShim_production;function requireUseSyncExternalStoreShim_production(){if(hasRequiredUseSyncExternalStoreShim_production)return useSyncExternalStoreShim_production;hasRequiredUseSyncExternalStoreShim_production=1;var x=requireReact();function y(k,H){return k===H&&(k!==0||1/k===1/H)||k!==k&&H!==H}var w=typeof Object.is=="function"?Object.is:y,C=x.useState,P=x.useEffect,O=x.useLayoutEffect,$=x.useDebugValue;function L(k,H){var W=H(),G=C({inst:{value:W,getSnapshot:H}}),Q=G[0].inst,Z=G[1];return O(function(){Q.value=W,Q.getSnapshot=H,D(Q)&&Z({inst:Q})},[k,W,H]),P(function(){return D(Q)&&Z({inst:Q}),k(function(){D(Q)&&Z({inst:Q})})},[k]),$(W),W}function D(k){var H=k.getSnapshot;k=k.value;try{var W=H();return!w(k,W)}catch{return!0}}function B(k,H){return H()}var U=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?B:L;return useSyncExternalStoreShim_production.useSyncExternalStore=x.useSyncExternalStore!==void 0?x.useSyncExternalStore:U,useSyncExternalStoreShim_production}var hasRequiredShim;function requireShim(){return hasRequiredShim||(hasRequiredShim=1,shim.exports=requireUseSyncExternalStoreShim_production()),shim.exports}var hasRequiredUseAtom;function requireUseAtom(){if(hasRequiredUseAtom)return useAtom;hasRequiredUseAtom=1,Object.defineProperty(useAtom,"__esModule",{value:!0});var x=requireShim(),y=requireReact(),w=requireUseConstant();function C(P,O){const $=w.useConstant(()=>typeof P=="function"&&P())||P,L=x.useSyncExternalStore($.subscribe,()=>$.value,()=>$.value);return y.useDebugValue(L),O?[L,$.actions]:L}return useAtom.useAtom=C,useAtom}var useAtomExports=requireUseAtom();const useIsoLayoutEffect=typeof window>"u"?reactExports.useEffect:reactExports.useLayoutEffect;function useSetup(x,y){let w;if(arguments.length>1){const C=useConstantExports.useConstant(()=>atom(()=>y));useIsoLayoutEffect(()=>C.set(y),[y]),w=useAdapterExports.useAdapter(()=>x(C))}else w=useAdapterExports.useAdapter(x);return reactExports.useDebugValue(w),w}const QspiderRoot=({children:x})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:x}),cssKeywords={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},reverseNames=Object.create(null);for(const x in cssKeywords)Object.hasOwn(cssKeywords,x)&&(reverseNames[cssKeywords[x]]=x);const cs={to:{},get:{}};cs.get=function(x){const y=x.slice(0,3).toLowerCase();let w,C;switch(y){case"hsl":{w=cs.get.hsl(x),C="hsl";break}case"hwb":{w=cs.get.hwb(x),C="hwb";break}default:{w=cs.get.rgb(x),C="rgb";break}}return w?{model:C,value:w}:null};cs.get.rgb=function(x){if(!x)return null;const y=/^#([a-f\d]{3,4})$/i,w=/^#([a-f\d]{6})([a-f\d]{2})?$/i,C=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,P=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[\s,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,O=/^(\w+)$/;let $=[0,0,0,1],L,D,B;if(L=x.match(w)){for(B=L[2],L=L[1],D=0;D<3;D++){const U=D*2;$[D]=Number.parseInt(L.slice(U,U+2),16)}B&&($[3]=Number.parseInt(B,16)/255)}else if(L=x.match(y)){for(L=L[1],B=L[3],D=0;D<3;D++)$[D]=Number.parseInt(L[D]+L[D],16);B&&($[3]=Number.parseInt(B+B,16)/255)}else if(L=x.match(C)){for(D=0;D<3;D++)$[D]=Number.parseInt(L[D+1],10);L[4]&&($[3]=L[5]?Number.parseFloat(L[4])*.01:Number.parseFloat(L[4]))}else if(L=x.match(P)){for(D=0;D<3;D++)$[D]=Math.round(Number.parseFloat(L[D+1])*2.55);L[4]&&($[3]=L[5]?Number.parseFloat(L[4])*.01:Number.parseFloat(L[4]))}else return(L=x.match(O))?L[1]==="transparent"?[0,0,0,0]:Object.hasOwn(cssKeywords,L[1])?($=cssKeywords[L[1]],$[3]=1,$):null:null;for(D=0;D<3;D++)$[D]=clamp$3($[D],0,255);return $[3]=clamp$3($[3],0,1),$};cs.get.hsl=function(x){if(!x)return null;const y=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,w=x.match(y);if(w){const C=Number.parseFloat(w[4]),P=(Number.parseFloat(w[1])%360+360)%360,O=clamp$3(Number.parseFloat(w[2]),0,100),$=clamp$3(Number.parseFloat(w[3]),0,100),L=clamp$3(Number.isNaN(C)?1:C,0,1);return[P,O,$,L]}return null};cs.get.hwb=function(x){if(!x)return null;const y=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*[\s,]\s*([+-]?[\d.]+)%\s*[\s,]\s*([+-]?[\d.]+)%\s*(?:[\s,]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,w=x.match(y);if(w){const C=Number.parseFloat(w[4]),P=(Number.parseFloat(w[1])%360+360)%360,O=clamp$3(Number.parseFloat(w[2]),0,100),$=clamp$3(Number.parseFloat(w[3]),0,100),L=clamp$3(Number.isNaN(C)?1:C,0,1);return[P,O,$,L]}return null};cs.to.hex=function(...x){return"#"+hexDouble(x[0])+hexDouble(x[1])+hexDouble(x[2])+(x[3]<1?hexDouble(Math.round(x[3]*255)):"")};cs.to.rgb=function(...x){return x.length<4||x[3]===1?"rgb("+Math.round(x[0])+", "+Math.round(x[1])+", "+Math.round(x[2])+")":"rgba("+Math.round(x[0])+", "+Math.round(x[1])+", "+Math.round(x[2])+", "+x[3]+")"};cs.to.rgb.percent=function(...x){const y=Math.round(x[0]/255*100),w=Math.round(x[1]/255*100),C=Math.round(x[2]/255*100);return x.length<4||x[3]===1?"rgb("+y+"%, "+w+"%, "+C+"%)":"rgba("+y+"%, "+w+"%, "+C+"%, "+x[3]+")"};cs.to.hsl=function(...x){return x.length<4||x[3]===1?"hsl("+x[0]+", "+x[1]+"%, "+x[2]+"%)":"hsla("+x[0]+", "+x[1]+"%, "+x[2]+"%, "+x[3]+")"};cs.to.hwb=function(...x){let y="";return x.length>=4&&x[3]!==1&&(y=", "+x[3]),"hwb("+x[0]+", "+x[1]+"%, "+x[2]+"%"+y+")"};cs.to.keyword=function(...x){return reverseNames[x.slice(0,3)]};function clamp$3(x,y,w){return Math.min(Math.max(y,x),w)}function hexDouble(x){const y=Math.round(x).toString(16).toUpperCase();return y.length<2?"0"+y:y}const reverseKeywords={};for(const x of Object.keys(cssKeywords))reverseKeywords[cssKeywords[x]]=x;const convert$1={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},LAB_FT=(6/29)**3;function srgbNonlinearTransform(x){const y=x>.0031308?1.055*x**.4166666666666667-.055:x*12.92;return Math.min(Math.max(0,y),1)}function srgbNonlinearTransformInv(x){return x>.04045?((x+.055)/1.055)**2.4:x/12.92}for(const x of Object.keys(convert$1)){if(!("channels"in convert$1[x]))throw new Error("missing channels property: "+x);if(!("labels"in convert$1[x]))throw new Error("missing channel labels property: "+x);if(convert$1[x].labels.length!==convert$1[x].channels)throw new Error("channel and label counts mismatch: "+x);const{channels:y,labels:w}=convert$1[x];delete convert$1[x].channels,delete convert$1[x].labels,Object.defineProperty(convert$1[x],"channels",{value:y}),Object.defineProperty(convert$1[x],"labels",{value:w})}convert$1.rgb.hsl=function(x){const y=x[0]/255,w=x[1]/255,C=x[2]/255,P=Math.min(y,w,C),O=Math.max(y,w,C),$=O-P;let L,D;switch(O){case P:{L=0;break}case y:{L=(w-C)/$;break}case w:{L=2+(C-y)/$;break}case C:{L=4+(y-w)/$;break}}L=Math.min(L*60,360),L<0&&(L+=360);const B=(P+O)/2;return O===P?D=0:B<=.5?D=$/(O+P):D=$/(2-O-P),[L,D*100,B*100]};convert$1.rgb.hsv=function(x){let y,w,C,P,O;const $=x[0]/255,L=x[1]/255,D=x[2]/255,B=Math.max($,L,D),U=B-Math.min($,L,D),k=function(H){return(B-H)/6/U+1/2};if(U===0)P=0,O=0;else{switch(O=U/B,y=k($),w=k(L),C=k(D),B){case $:{P=C-w;break}case L:{P=1/3+y-C;break}case D:{P=2/3+w-y;break}}P<0?P+=1:P>1&&(P-=1)}return[P*360,O*100,B*100]};convert$1.rgb.hwb=function(x){const y=x[0],w=x[1];let C=x[2];const P=convert$1.rgb.hsl(x)[0],O=1/255*Math.min(y,Math.min(w,C));return C=1-1/255*Math.max(y,Math.max(w,C)),[P,O*100,C*100]};convert$1.rgb.oklab=function(x){const y=srgbNonlinearTransformInv(x[0]/255),w=srgbNonlinearTransformInv(x[1]/255),C=srgbNonlinearTransformInv(x[2]/255),P=Math.cbrt(.4122214708*y+.5363325363*w+.0514459929*C),O=Math.cbrt(.2119034982*y+.6806995451*w+.1073969566*C),$=Math.cbrt(.0883024619*y+.2817188376*w+.6299787005*C),L=.2104542553*P+.793617785*O-.0040720468*$,D=1.9779984951*P-2.428592205*O+.4505937099*$,B=.0259040371*P+.7827717662*O-.808675766*$;return[L*100,D*100,B*100]};convert$1.rgb.cmyk=function(x){const y=x[0]/255,w=x[1]/255,C=x[2]/255,P=Math.min(1-y,1-w,1-C),O=(1-y-P)/(1-P)||0,$=(1-w-P)/(1-P)||0,L=(1-C-P)/(1-P)||0;return[O*100,$*100,L*100,P*100]};function comparativeDistance(x,y){return(x[0]-y[0])**2+(x[1]-y[1])**2+(x[2]-y[2])**2}convert$1.rgb.keyword=function(x){const y=reverseKeywords[x];if(y)return y;let w=Number.POSITIVE_INFINITY,C;for(const P of Object.keys(cssKeywords)){const O=cssKeywords[P],$=comparativeDistance(x,O);$<w&&(w=$,C=P)}return C};convert$1.keyword.rgb=function(x){return cssKeywords[x]};convert$1.rgb.xyz=function(x){const y=srgbNonlinearTransformInv(x[0]/255),w=srgbNonlinearTransformInv(x[1]/255),C=srgbNonlinearTransformInv(x[2]/255),P=y*.4124564+w*.3575761+C*.1804375,O=y*.2126729+w*.7151522+C*.072175,$=y*.0193339+w*.119192+C*.9503041;return[P*100,O*100,$*100]};convert$1.rgb.lab=function(x){const y=convert$1.rgb.xyz(x);let w=y[0],C=y[1],P=y[2];w/=95.047,C/=100,P/=108.883,w=w>LAB_FT?w**(1/3):7.787*w+16/116,C=C>LAB_FT?C**(1/3):7.787*C+16/116,P=P>LAB_FT?P**(1/3):7.787*P+16/116;const O=116*C-16,$=500*(w-C),L=200*(C-P);return[O,$,L]};convert$1.hsl.rgb=function(x){const y=x[0]/360,w=x[1]/100,C=x[2]/100;let P,O;if(w===0)return O=C*255,[O,O,O];const $=C<.5?C*(1+w):C+w-C*w,L=2*C-$,D=[0,0,0];for(let B=0;B<3;B++)P=y+1/3*-(B-1),P<0&&P++,P>1&&P--,6*P<1?O=L+($-L)*6*P:2*P<1?O=$:3*P<2?O=L+($-L)*(2/3-P)*6:O=L,D[B]=O*255;return D};convert$1.hsl.hsv=function(x){const y=x[0];let w=x[1]/100,C=x[2]/100,P=w;const O=Math.max(C,.01);C*=2,w*=C<=1?C:2-C,P*=O<=1?O:2-O;const $=(C+w)/2,L=C===0?2*P/(O+P):2*w/(C+w);return[y,L*100,$*100]};convert$1.hsv.rgb=function(x){const y=x[0]/60,w=x[1]/100;let C=x[2]/100;const P=Math.floor(y)%6,O=y-Math.floor(y),$=255*C*(1-w),L=255*C*(1-w*O),D=255*C*(1-w*(1-O));switch(C*=255,P){case 0:return[C,D,$];case 1:return[L,C,$];case 2:return[$,C,D];case 3:return[$,L,C];case 4:return[D,$,C];case 5:return[C,$,L]}};convert$1.hsv.hsl=function(x){const y=x[0],w=x[1]/100,C=x[2]/100,P=Math.max(C,.01);let O,$;$=(2-w)*C;const L=(2-w)*P;return O=w*P,O/=L<=1?L:2-L,O=O||0,$/=2,[y,O*100,$*100]};convert$1.hwb.rgb=function(x){const y=x[0]/360;let w=x[1]/100,C=x[2]/100;const P=w+C;let O;P>1&&(w/=P,C/=P);const $=Math.floor(6*y),L=1-C;O=6*y-$,($&1)!==0&&(O=1-O);const D=w+O*(L-w);let B,U,k;switch($){default:case 6:case 0:{B=L,U=D,k=w;break}case 1:{B=D,U=L,k=w;break}case 2:{B=w,U=L,k=D;break}case 3:{B=w,U=D,k=L;break}case 4:{B=D,U=w,k=L;break}case 5:{B=L,U=w,k=D;break}}return[B*255,U*255,k*255]};convert$1.cmyk.rgb=function(x){const y=x[0]/100,w=x[1]/100,C=x[2]/100,P=x[3]/100,O=1-Math.min(1,y*(1-P)+P),$=1-Math.min(1,w*(1-P)+P),L=1-Math.min(1,C*(1-P)+P);return[O*255,$*255,L*255]};convert$1.xyz.rgb=function(x){const y=x[0]/100,w=x[1]/100,C=x[2]/100;let P,O,$;return P=y*3.2404542+w*-1.5371385+C*-.4985314,O=y*-.969266+w*1.8760108+C*.041556,$=y*.0556434+w*-.2040259+C*1.0572252,P=srgbNonlinearTransform(P),O=srgbNonlinearTransform(O),$=srgbNonlinearTransform($),[P*255,O*255,$*255]};convert$1.xyz.lab=function(x){let y=x[0],w=x[1],C=x[2];y/=95.047,w/=100,C/=108.883,y=y>LAB_FT?y**(1/3):7.787*y+16/116,w=w>LAB_FT?w**(1/3):7.787*w+16/116,C=C>LAB_FT?C**(1/3):7.787*C+16/116;const P=116*w-16,O=500*(y-w),$=200*(w-C);return[P,O,$]};convert$1.xyz.oklab=function(x){const y=x[0]/100,w=x[1]/100,C=x[2]/100,P=Math.cbrt(.8189330101*y+.3618667424*w-.1288597137*C),O=Math.cbrt(.0329845436*y+.9293118715*w+.0361456387*C),$=Math.cbrt(.0482003018*y+.2643662691*w+.633851707*C),L=.2104542553*P+.793617785*O-.0040720468*$,D=1.9779984951*P-2.428592205*O+.4505937099*$,B=.0259040371*P+.7827717662*O-.808675766*$;return[L*100,D*100,B*100]};convert$1.oklab.oklch=function(x){return convert$1.lab.lch(x)};convert$1.oklab.xyz=function(x){const y=x[0]/100,w=x[1]/100,C=x[2]/100,P=(.999999998*y+.396337792*w+.215803758*C)**3,O=(1.000000008*y-.105561342*w-.063854175*C)**3,$=(1.000000055*y-.089484182*w-1.291485538*C)**3,L=1.227013851*P-.55779998*O+.281256149*$,D=-.040580178*P+1.11225687*O-.071676679*$,B=-.076381285*P-.421481978*O+1.58616322*$;return[L*100,D*100,B*100]};convert$1.oklab.rgb=function(x){const y=x[0]/100,w=x[1]/100,C=x[2]/100,P=(y+.3963377774*w+.2158037573*C)**3,O=(y-.1055613458*w-.0638541728*C)**3,$=(y-.0894841775*w-1.291485548*C)**3,L=srgbNonlinearTransform(4.0767416621*P-3.3077115913*O+.2309699292*$),D=srgbNonlinearTransform(-1.2684380046*P+2.6097574011*O-.3413193965*$),B=srgbNonlinearTransform(-.0041960863*P-.7034186147*O+1.707614701*$);return[L*255,D*255,B*255]};convert$1.oklch.oklab=function(x){return convert$1.lch.lab(x)};convert$1.lab.xyz=function(x){const y=x[0],w=x[1],C=x[2];let P,O,$;O=(y+16)/116,P=w/500+O,$=O-C/200;const L=O**3,D=P**3,B=$**3;return O=L>LAB_FT?L:(O-16/116)/7.787,P=D>LAB_FT?D:(P-16/116)/7.787,$=B>LAB_FT?B:($-16/116)/7.787,P*=95.047,O*=100,$*=108.883,[P,O,$]};convert$1.lab.lch=function(x){const y=x[0],w=x[1],C=x[2];let P;P=Math.atan2(C,w)*360/2/Math.PI,P<0&&(P+=360);const $=Math.sqrt(w*w+C*C);return[y,$,P]};convert$1.lch.lab=function(x){const y=x[0],w=x[1],P=x[2]/360*2*Math.PI,O=w*Math.cos(P),$=w*Math.sin(P);return[y,O,$]};convert$1.rgb.ansi16=function(x,y=null){const[w,C,P]=x;let O=y===null?convert$1.rgb.hsv(x)[2]:y;if(O=Math.round(O/50),O===0)return 30;let $=30+(Math.round(P/255)<<2|Math.round(C/255)<<1|Math.round(w/255));return O===2&&($+=60),$};convert$1.hsv.ansi16=function(x){return convert$1.rgb.ansi16(convert$1.hsv.rgb(x),x[2])};convert$1.rgb.ansi256=function(x){const y=x[0],w=x[1],C=x[2];return y>>4===w>>4&&w>>4===C>>4?y<8?16:y>248?231:Math.round((y-8)/247*24)+232:16+36*Math.round(y/255*5)+6*Math.round(w/255*5)+Math.round(C/255*5)};convert$1.ansi16.rgb=function(x){x=x[0];let y=x%10;if(y===0||y===7)return x>50&&(y+=3.5),y=y/10.5*255,[y,y,y];const w=(Math.trunc(x>50)+1)*.5,C=(y&1)*w*255,P=(y>>1&1)*w*255,O=(y>>2&1)*w*255;return[C,P,O]};convert$1.ansi256.rgb=function(x){if(x=x[0],x>=232){const O=(x-232)*10+8;return[O,O,O]}x-=16;let y;const w=Math.floor(x/36)/5*255,C=Math.floor((y=x%36)/6)/5*255,P=y%6/5*255;return[w,C,P]};convert$1.rgb.hex=function(x){const w=(((Math.round(x[0])&255)<<16)+((Math.round(x[1])&255)<<8)+(Math.round(x[2])&255)).toString(16).toUpperCase();return"000000".slice(w.length)+w};convert$1.hex.rgb=function(x){const y=x.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!y)return[0,0,0];let w=y[0];y[0].length===3&&(w=[...w].map(L=>L+L).join(""));const C=Number.parseInt(w,16),P=C>>16&255,O=C>>8&255,$=C&255;return[P,O,$]};convert$1.rgb.hcg=function(x){const y=x[0]/255,w=x[1]/255,C=x[2]/255,P=Math.max(Math.max(y,w),C),O=Math.min(Math.min(y,w),C),$=P-O;let L;const D=$<1?O/(1-$):0;return $<=0?L=0:P===y?L=(w-C)/$%6:P===w?L=2+(C-y)/$:L=4+(y-w)/$,L/=6,L%=1,[L*360,$*100,D*100]};convert$1.hsl.hcg=function(x){const y=x[1]/100,w=x[2]/100,C=w<.5?2*y*w:2*y*(1-w);let P=0;return C<1&&(P=(w-.5*C)/(1-C)),[x[0],C*100,P*100]};convert$1.hsv.hcg=function(x){const y=x[1]/100,w=x[2]/100,C=y*w;let P=0;return C<1&&(P=(w-C)/(1-C)),[x[0],C*100,P*100]};convert$1.hcg.rgb=function(x){const y=x[0]/360,w=x[1]/100,C=x[2]/100;if(w===0)return[C*255,C*255,C*255];const P=[0,0,0],O=y%1*6,$=O%1,L=1-$;let D=0;switch(Math.floor(O)){case 0:{P[0]=1,P[1]=$,P[2]=0;break}case 1:{P[0]=L,P[1]=1,P[2]=0;break}case 2:{P[0]=0,P[1]=1,P[2]=$;break}case 3:{P[0]=0,P[1]=L,P[2]=1;break}case 4:{P[0]=$,P[1]=0,P[2]=1;break}default:P[0]=1,P[1]=0,P[2]=L}return D=(1-w)*C,[(w*P[0]+D)*255,(w*P[1]+D)*255,(w*P[2]+D)*255]};convert$1.hcg.hsv=function(x){const y=x[1]/100,w=x[2]/100,C=y+w*(1-y);let P=0;return C>0&&(P=y/C),[x[0],P*100,C*100]};convert$1.hcg.hsl=function(x){const y=x[1]/100,C=x[2]/100*(1-y)+.5*y;let P=0;return C>0&&C<.5?P=y/(2*C):C>=.5&&C<1&&(P=y/(2*(1-C))),[x[0],P*100,C*100]};convert$1.hcg.hwb=function(x){const y=x[1]/100,w=x[2]/100,C=y+w*(1-y);return[x[0],(C-y)*100,(1-C)*100]};convert$1.hwb.hcg=function(x){const y=x[1]/100,C=1-x[2]/100,P=C-y;let O=0;return P<1&&(O=(C-P)/(1-P)),[x[0],P*100,O*100]};convert$1.apple.rgb=function(x){return[x[0]/65535*255,x[1]/65535*255,x[2]/65535*255]};convert$1.rgb.apple=function(x){return[x[0]/255*65535,x[1]/255*65535,x[2]/255*65535]};convert$1.gray.rgb=function(x){return[x[0]/100*255,x[0]/100*255,x[0]/100*255]};convert$1.gray.hsl=function(x){return[0,0,x[0]]};convert$1.gray.hsv=convert$1.gray.hsl;convert$1.gray.hwb=function(x){return[0,100,x[0]]};convert$1.gray.cmyk=function(x){return[0,0,0,x[0]]};convert$1.gray.lab=function(x){return[x[0],0,0]};convert$1.gray.hex=function(x){const y=Math.round(x[0]/100*255)&255,C=((y<<16)+(y<<8)+y).toString(16).toUpperCase();return"000000".slice(C.length)+C};convert$1.rgb.gray=function(x){return[(x[0]+x[1]+x[2])/3/255*100]};function buildGraph(){const x={},y=Object.keys(convert$1);for(let{length:w}=y,C=0;C<w;C++)x[y[C]]={distance:-1,parent:null};return x}function deriveBFS(x){const y=buildGraph(),w=[x];for(y[x].distance=0;w.length>0;){const C=w.pop(),P=Object.keys(convert$1[C]);for(let{length:O}=P,$=0;$<O;$++){const L=P[$],D=y[L];D.distance===-1&&(D.distance=y[C].distance+1,D.parent=C,w.unshift(L))}}return y}function link(x,y){return function(w){return y(x(w))}}function wrapConversion(x,y){const w=[y[x].parent,x];let C=convert$1[y[x].parent][x],P=y[x].parent;for(;y[P].parent;)w.unshift(y[P].parent),C=link(convert$1[y[P].parent][P],C),P=y[P].parent;return C.conversion=w,C}function route(x){const y=deriveBFS(x),w={},C=Object.keys(y);for(let{length:P}=C,O=0;O<P;O++){const $=C[O];y[$].parent!==null&&(w[$]=wrapConversion($,y))}return w}const convert={},models=Object.keys(convert$1);function wrapRaw(x){const y=function(...w){const C=w[0];return C==null?C:(C.length>1&&(w=C),x(w))};return"conversion"in x&&(y.conversion=x.conversion),y}function wrapRounded(x){const y=function(...w){const C=w[0];if(C==null)return C;C.length>1&&(w=C);const P=x(w);if(typeof P=="object")for(let{length:O}=P,$=0;$<O;$++)P[$]=Math.round(P[$]);return P};return"conversion"in x&&(y.conversion=x.conversion),y}for(const x of models){convert[x]={},Object.defineProperty(convert[x],"channels",{value:convert$1[x].channels}),Object.defineProperty(convert[x],"labels",{value:convert$1[x].labels});const y=route(x),w=Object.keys(y);for(const C of w){const P=y[C];convert[x][C]=wrapRounded(P),convert[x][C].raw=wrapRaw(P)}}const skippedModels=["keyword","gray","hex"],hashedModelKeys={};for(const x of Object.keys(convert))hashedModelKeys[[...convert[x].labels].sort().join("")]=x;const limiters={};function Color(x,y){if(!(this instanceof Color))return new Color(x,y);if(y&&y in skippedModels&&(y=null),y&&!(y in convert))throw new Error("Unknown model: "+y);let w,C;if(x==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(x instanceof Color)this.model=x.model,this.color=[...x.color],this.valpha=x.valpha;else if(typeof x=="string"){const P=cs.get(x);if(P===null)throw new Error("Unable to parse color from string: "+x);this.model=P.model,C=convert[this.model].channels,this.color=P.value.slice(0,C),this.valpha=typeof P.value[C]=="number"?P.value[C]:1}else if(x.length>0){this.model=y||"rgb",C=convert[this.model].channels;const P=Array.prototype.slice.call(x,0,C);this.color=zeroArray(P,C),this.valpha=typeof x[C]=="number"?x[C]:1}else if(typeof x=="number")this.model="rgb",this.color=[x>>16&255,x>>8&255,x&255],this.valpha=1;else{this.valpha=1;const P=Object.keys(x);"alpha"in x&&(P.splice(P.indexOf("alpha"),1),this.valpha=typeof x.alpha=="number"?x.alpha:0);const O=P.sort().join("");if(!(O in hashedModelKeys))throw new Error("Unable to parse color from object: "+JSON.stringify(x));this.model=hashedModelKeys[O];const{labels:$}=convert[this.model],L=[];for(w=0;w<$.length;w++)L.push(x[$[w]]);this.color=zeroArray(L)}if(limiters[this.model])for(C=convert[this.model].channels,w=0;w<C;w++){const P=limiters[this.model][w];P&&(this.color[w]=P(this.color[w]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Color.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(x){let y=this.model in cs.to?this:this.rgb();y=y.round(typeof x=="number"?x:1);const w=y.valpha===1?y.color:[...y.color,this.valpha];return cs.to[y.model](...w)},percentString(x){const y=this.rgb().round(typeof x=="number"?x:1),w=y.valpha===1?y.color:[...y.color,this.valpha];return cs.to.rgb.percent(...w)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const x={},{channels:y}=convert[this.model],{labels:w}=convert[this.model];for(let C=0;C<y;C++)x[w[C]]=this.color[C];return this.valpha!==1&&(x.alpha=this.valpha),x},unitArray(){const x=this.rgb().color;return x[0]/=255,x[1]/=255,x[2]/=255,this.valpha!==1&&x.push(this.valpha),x},unitObject(){const x=this.rgb().object();return x.r/=255,x.g/=255,x.b/=255,this.valpha!==1&&(x.alpha=this.valpha),x},round(x){return x=Math.max(x||0,0),new Color([...this.color.map(roundToPlace(x)),this.valpha],this.model)},alpha(x){return x!==void 0?new Color([...this.color,Math.max(0,Math.min(1,x))],this.model):this.valpha},red:getset("rgb",0,maxfn(255)),green:getset("rgb",1,maxfn(255)),blue:getset("rgb",2,maxfn(255)),hue:getset(["hsl","hsv","hsl","hwb","hcg"],0,x=>(x%360+360)%360),saturationl:getset("hsl",1,maxfn(100)),lightness:getset("hsl",2,maxfn(100)),saturationv:getset("hsv",1,maxfn(100)),value:getset("hsv",2,maxfn(100)),chroma:getset("hcg",1,maxfn(100)),gray:getset("hcg",2,maxfn(100)),white:getset("hwb",1,maxfn(100)),wblack:getset("hwb",2,maxfn(100)),cyan:getset("cmyk",0,maxfn(100)),magenta:getset("cmyk",1,maxfn(100)),yellow:getset("cmyk",2,maxfn(100)),black:getset("cmyk",3,maxfn(100)),x:getset("xyz",0,maxfn(95.047)),y:getset("xyz",1,maxfn(100)),z:getset("xyz",2,maxfn(108.833)),l:getset("lab",0,maxfn(100)),a:getset("lab",1),b:getset("lab",2),keyword(x){return x!==void 0?new Color(x):convert[this.model].keyword(this.color)},hex(x){return x!==void 0?new Color(x):cs.to.hex(...this.rgb().round().color)},hexa(x){if(x!==void 0)return new Color(x);const y=this.rgb().round().color;let w=Math.round(this.valpha*255).toString(16).toUpperCase();return w.length===1&&(w="0"+w),cs.to.hex(...y)+w},rgbNumber(){const x=this.rgb().color;return(x[0]&255)<<16|(x[1]&255)<<8|x[2]&255},luminosity(){const x=this.rgb().color,y=[];for(const[w,C]of x.entries()){const P=C/255;y[w]=P<=.04045?P/12.92:((P+.055)/1.055)**2.4}return .2126*y[0]+.7152*y[1]+.0722*y[2]},contrast(x){const y=this.luminosity(),w=x.luminosity();return y>w?(y+.05)/(w+.05):(w+.05)/(y+.05)},level(x){const y=this.contrast(x);return y>=7?"AAA":y>=4.5?"AA":""},isDark(){const x=this.rgb().color;return(x[0]*2126+x[1]*7152+x[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const x=this.rgb();for(let y=0;y<3;y++)x.color[y]=255-x.color[y];return x},lighten(x){const y=this.hsl();return y.color[2]+=y.color[2]*x,y},darken(x){const y=this.hsl();return y.color[2]-=y.color[2]*x,y},saturate(x){const y=this.hsl();return y.color[1]+=y.color[1]*x,y},desaturate(x){const y=this.hsl();return y.color[1]-=y.color[1]*x,y},whiten(x){const y=this.hwb();return y.color[1]+=y.color[1]*x,y},blacken(x){const y=this.hwb();return y.color[2]+=y.color[2]*x,y},grayscale(){const x=this.rgb().color,y=x[0]*.3+x[1]*.59+x[2]*.11;return Color.rgb(y,y,y)},fade(x){return this.alpha(this.valpha-this.valpha*x)},opaquer(x){return this.alpha(this.valpha+this.valpha*x)},rotate(x){const y=this.hsl();let w=y.color[0];return w=(w+x)%360,w=w<0?360+w:w,y.color[0]=w,y},mix(x,y){if(!x||!x.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof x);const w=x.rgb(),C=this.rgb(),P=y===void 0?.5:y,O=2*P-1,$=w.alpha()-C.alpha(),L=((O*$===-1?O:(O+$)/(1+O*$))+1)/2,D=1-L;return Color.rgb(L*w.red()+D*C.red(),L*w.green()+D*C.green(),L*w.blue()+D*C.blue(),w.alpha()*P+C.alpha()*(1-P))}};for(const x of Object.keys(convert)){if(skippedModels.includes(x))continue;const{channels:y}=convert[x];Color.prototype[x]=function(...w){return this.model===x?new Color(this):w.length>0?new Color(w,x):new Color([...assertArray(convert[this.model][x].raw(this.color)),this.valpha],x)},Color[x]=function(...w){let C=w[0];return typeof C=="number"&&(C=zeroArray(w,y)),new Color(C,x)}}function roundTo(x,y){return Number(x.toFixed(y))}function roundToPlace(x){return function(y){return roundTo(y,x)}}function getset(x,y,w){x=Array.isArray(x)?x:[x];for(const C of x)(limiters[C]||=[])[y]=w;return x=x[0],function(C){let P;return C!==void 0?(w&&(C=w(C)),P=this[x](),P.color[y]=C,P):(P=this[x]().color[y],w&&(P=w(P)),P)}}function maxfn(x){return function(y){return Math.max(0,Math.min(x,y))}}function assertArray(x){return Array.isArray(x)?x:[x]}function zeroArray(x,y){for(let w=0;w<y;w++)typeof x[w]!="number"&&(x[w]=0);return x}function convertColor(x,y=!0){if(!x)return null;const w=new Uint8Array(4);if(new DataView(w.buffer).setInt32(0,x),y){const[L,D,B,U]=w;return`rgba(${U},${B},${D},${L===1?1:L/255})`}const[,P,O,$]=w;return`rgb(${$},${O},${P})`}function invertColor(x){return Color(x).negate().hex()}function getContrastColor(x){const y=Color(x),w=y.red(),C=y.green(),P=y.blue();return(w*299+C*587+P*114)/1e3>=128?"black":"white"}function defer$1(){let x,y;const w=new Promise((C,P)=>{x=C,y=P});return{resolve:x,reject:y,promise:w}}const hashString=x=>x.split("").reduce((y,w)=>(y=(y<<5)-y+w.charCodeAt(0),y&y),0);function prepareBaseUrl(x){const y=new URL(x);y.search="",y.hash="";const w=y.toString();return w.endsWith(y.hostname)?w+"/":w.slice(0,w.lastIndexOf("/")+1)}function cyrb53(x,y=0){let w=3735928559^y,C=1103547991^y;for(let P=0,O;P<x.length;P++)O=x.charCodeAt(P),w=Math.imul(w^O,2654435761),C=Math.imul(C^O,1597334677);return w=Math.imul(w^w>>>16,2246822507)^Math.imul(C^C>>>13,3266489909),C=Math.imul(C^C>>>16,2246822507)^Math.imul(w^w>>>13,3266489909),(4294967296*(2097151&C)+(w>>>0)).toString(16)}const PROXY_URL="https://proxy.qspider.xyz/";function fetchProxyFallback(x){return fetch(x).catch(()=>fetch(PROXY_URL+window.btoa(encodeURI(x))))}function throttle(x,y){let w,C;return function(...P){return w||(w=!0,setTimeout(()=>w=!1,y),C=x.apply(this,P)),C}}function cleanPath(x){return x.replace(/\\/g,"/")}var polyfills_x={},hasRequiredPolyfills_x;function requirePolyfills_x(){return hasRequiredPolyfills_x||(hasRequiredPolyfills_x=1,typeof window<"u"&&typeof window.global>"u"&&(window.global=window)),polyfills_x}requirePolyfills_x();const ParserEND=1114112;class ParserError extends Error{constructor(y,w,C){super("[ParserError] "+y,w,C),this.name="ParserError",this.code="ParserError",Error.captureStackTrace&&Error.captureStackTrace(this,ParserError)}}class State{constructor(y){this.parser=y,this.buf="",this.returned=null,this.result=null,this.resultTable=null,this.resultArr=null}}class Parser{constructor(){this.pos=0,this.col=0,this.line=0,this.obj={},this.ctx=this.obj,this.stack=[],this._buf="",this.char=null,this.ii=0,this.state=new State(this.parseStart)}parse(y){if(y.length===0||y.length==null)return;this._buf=String(y),this.ii=-1,this.char=-1;let w;for(;w===!1||this.nextChar();)w=this.runOne();this._buf=null}nextChar(){return this.char===10&&(++this.line,this.col=-1),++this.ii,this.char=this._buf.codePointAt(this.ii),++this.pos,++this.col,this.haveBuffer()}haveBuffer(){return this.ii<this._buf.length}runOne(){return this.state.parser.call(this,this.state.returned)}finish(){this.char=ParserEND;let y;do y=this.state.parser,this.runOne();while(this.state.parser!==y);return this.ctx=null,this.state=null,this._buf=null,this.obj}next(y){if(typeof y!="function")throw new ParserError("Tried to set state to non-existent state: "+JSON.stringify(y));this.state.parser=y}goto(y){return this.next(y),this.runOne()}call(y,w){w&&this.next(w),this.stack.push(this.state),this.state=new State(y)}callNow(y,w){return this.call(y,w),this.runOne()}return(y){if(this.stack.length===0)throw this.error(new ParserError("Stack underflow"));y===void 0&&(y=this.state.buf),this.state=this.stack.pop(),this.state.returned=y}returnNow(y){return this.return(y),this.runOne()}consume(){if(this.char===ParserEND)throw this.error(new ParserError("Unexpected end-of-buffer"));this.state.buf+=this._buf[this.ii]}error(y){return y.line=this.line,y.col=this.col,y.pos=this.pos,y}parseStart(){throw new ParserError("Must declare a parseStart method")}}Parser.END=ParserEND;Parser.Error=ParserError;const createDateTime=x=>{const y=new Date(x);if(isNaN(y))throw new TypeError("Invalid Datetime");return y},f$1=(x,y)=>{for(y=String(y);y.length<x;)y="0"+y;return y};class FloatingDateTime extends Date{constructor(y){super(y+"Z"),this.isFloating=!0}toISOString(){const y=`${this.getUTCFullYear()}-${f$1(2,this.getUTCMonth()+1)}-${f$1(2,this.getUTCDate())}`,w=`${f$1(2,this.getUTCHours())}:${f$1(2,this.getUTCMinutes())}:${f$1(2,this.getUTCSeconds())}.${f$1(3,this.getUTCMilliseconds())}`;return`${y}T${w}`}}const createDateTimeFloat=x=>{const y=new FloatingDateTime(x);if(isNaN(y))throw new TypeError("Invalid Datetime");return y};class Date_ extends Date{constructor(y){super(y),this.isDate=!0}toISOString(){return`${this.getUTCFullYear()}-${f$1(2,this.getUTCMonth()+1)}-${f$1(2,this.getUTCDate())}`}}const createDate=x=>{const y=new Date_(x);if(isNaN(y))throw new TypeError("Invalid Datetime");return y};class Time extends Date{constructor(y){super(`0000-01-01T${y}Z`),this.isTime=!0}toISOString(){return`${f$1(2,this.getUTCHours())}:${f$1(2,this.getUTCMinutes())}:${f$1(2,this.getUTCSeconds())}.${f$1(3,this.getUTCMilliseconds())}`}}const createTime=x=>{const y=new Time(x);if(isNaN(y))throw new TypeError("Invalid Datetime");return y},TOMLParser=makeParserClass(Parser);class TomlError extends Error{constructor(y){super(y),this.name="TomlError",Error.captureStackTrace&&Error.captureStackTrace(this,TomlError),this.fromTOML=!0,this.wrapped=null}}TomlError.wrap=x=>{const y=new TomlError(x.message);return y.code=x.code,y.wrapped=x,y};const CTRL_I=9,CTRL_J=10,CTRL_M=13,CTRL_CHAR_BOUNDARY=31,CHAR_SP=32,CHAR_QUOT=34,CHAR_NUM=35,CHAR_APOS=39,CHAR_PLUS=43,CHAR_COMMA=44,CHAR_HYPHEN=45,CHAR_PERIOD=46,CHAR_0=48,CHAR_1=49,CHAR_7=55,CHAR_9=57,CHAR_COLON=58,CHAR_EQUALS=61,CHAR_A=65,CHAR_E=69,CHAR_F=70,CHAR_T=84,CHAR_U=85,CHAR_Z=90,CHAR_LOWBAR=95,CHAR_a=97,CHAR_b=98,CHAR_e=101,CHAR_f=102,CHAR_i=105,CHAR_l=108,CHAR_n=110,CHAR_o=111,CHAR_r=114,CHAR_s=115,CHAR_t=116,CHAR_u=117,CHAR_x=120,CHAR_z=122,CHAR_LCUB=123,CHAR_RCUB=125,CHAR_LSQB=91,CHAR_BSOL=92,CHAR_RSQB=93,CHAR_DEL=127,SURROGATE_FIRST=55296,SURROGATE_LAST=57343,escapes={[CHAR_b]:"\b",[CHAR_t]:"	",[CHAR_n]:`
`,[CHAR_f]:"\f",[CHAR_r]:"\r",[CHAR_QUOT]:'"',[CHAR_BSOL]:"\\"};function isDigit(x){return x>=CHAR_0&&x<=CHAR_9}function isHexit(x){return x>=CHAR_A&&x<=CHAR_F||x>=CHAR_a&&x<=CHAR_f||x>=CHAR_0&&x<=CHAR_9}function isBit(x){return x===CHAR_1||x===CHAR_0}function isOctit(x){return x>=CHAR_0&&x<=CHAR_7}function isAlphaNumQuoteHyphen(x){return x>=CHAR_A&&x<=CHAR_Z||x>=CHAR_a&&x<=CHAR_z||x>=CHAR_0&&x<=CHAR_9||x===CHAR_APOS||x===CHAR_QUOT||x===CHAR_LOWBAR||x===CHAR_HYPHEN}function isAlphaNumHyphen(x){return x>=CHAR_A&&x<=CHAR_Z||x>=CHAR_a&&x<=CHAR_z||x>=CHAR_0&&x<=CHAR_9||x===CHAR_LOWBAR||x===CHAR_HYPHEN}const _type=Symbol("type"),_declared=Symbol("declared"),hasOwnProperty=Object.prototype.hasOwnProperty,defineProperty=Object.defineProperty,descriptor={configurable:!0,enumerable:!0,writable:!0,value:void 0};function hasKey(x,y){return hasOwnProperty.call(x,y)?!0:(y==="__proto__"&&defineProperty(x,"__proto__",descriptor),!1)}const INLINE_TABLE=Symbol("inline-table");function InlineTable(){return Object.defineProperties({},{[_type]:{value:INLINE_TABLE}})}function isInlineTable(x){return x===null||typeof x!="object"?!1:x[_type]===INLINE_TABLE}const TABLE=Symbol("table");function Table$1(){return Object.defineProperties({},{[_type]:{value:TABLE},[_declared]:{value:!1,writable:!0}})}function isTable(x){return x===null||typeof x!="object"?!1:x[_type]===TABLE}const _contentType=Symbol("content-type"),INLINE_LIST=Symbol("inline-list");function InlineList(x){return Object.defineProperties([],{[_type]:{value:INLINE_LIST},[_contentType]:{value:x}})}function isInlineList(x){return x===null||typeof x!="object"?!1:x[_type]===INLINE_LIST}const LIST=Symbol("list");function List(){return Object.defineProperties([],{[_type]:{value:LIST}})}function isList(x){return x===null||typeof x!="object"?!1:x[_type]===LIST}let _custom;try{const utilInspect=eval("require('util').inspect");_custom=utilInspect.custom}catch(x){}const _inspect=_custom||"inspect";class BoxedBigInt{constructor(y){try{this.value=global.BigInt.asIntN(64,y)}catch{this.value=null}Object.defineProperty(this,_type,{value:INTEGER})}isNaN(){return this.value===null}toString(){return String(this.value)}[_inspect](){return`[BigInt: ${this.toString()}]}`}valueOf(){return this.value}}const INTEGER=Symbol("integer");function Integer(x){let y=Number(x);return Object.is(y,-0)&&(y=0),global.BigInt&&!Number.isSafeInteger(y)?new BoxedBigInt(x):Object.defineProperties(new Number(y),{isNaN:{value:function(){return isNaN(this)}},[_type]:{value:INTEGER},[_inspect]:{value:()=>`[Integer: ${x}]`}})}function isInteger(x){return x===null||typeof x!="object"?!1:x[_type]===INTEGER}const FLOAT=Symbol("float");function Float(x){return Object.defineProperties(new Number(x),{[_type]:{value:FLOAT},[_inspect]:{value:()=>`[Float: ${x}]`}})}function isFloat(x){return x===null||typeof x!="object"?!1:x[_type]===FLOAT}function tomlType$1(x){const y=typeof x;if(y==="object"){if(x===null)return"null";if(x instanceof Date)return"datetime";if(_type in x)switch(x[_type]){case INLINE_TABLE:return"inline-table";case INLINE_LIST:return"inline-list";case TABLE:return"table";case LIST:return"list";case FLOAT:return"float";case INTEGER:return"integer"}}return y}function makeParserClass(x){class y extends x{constructor(){super(),this.ctx=this.obj=Table$1()}atEndOfWord(){return this.char===CHAR_NUM||this.char===CTRL_I||this.char===CHAR_SP||this.atEndOfLine()}atEndOfLine(){return this.char===x.END||this.char===CTRL_J||this.char===CTRL_M}parseStart(){if(this.char===x.END)return null;if(this.char===CHAR_LSQB)return this.call(this.parseTableOrList);if(this.char===CHAR_NUM)return this.call(this.parseComment);if(this.char===CTRL_J||this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M)return null;if(isAlphaNumQuoteHyphen(this.char))return this.callNow(this.parseAssignStatement);throw this.error(new TomlError(`Unknown character "${this.char}"`))}parseWhitespaceToEOL(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M)return null;if(this.char===CHAR_NUM)return this.goto(this.parseComment);if(this.char===x.END||this.char===CTRL_J)return this.return();throw this.error(new TomlError("Unexpected character, expected only whitespace or comments till end of line"))}parseAssignStatement(){return this.callNow(this.parseAssign,this.recordAssignStatement)}recordAssignStatement(C){let P=this.ctx,O=C.key.pop();for(let $ of C.key){if(hasKey(P,$)&&!isTable(P[$]))throw this.error(new TomlError("Can't redefine existing key"));P=P[$]=P[$]||Table$1()}if(hasKey(P,O))throw this.error(new TomlError("Can't redefine existing key"));return P[_declared]=!0,isInteger(C.value)||isFloat(C.value)?P[O]=C.value.valueOf():P[O]=C.value,this.goto(this.parseWhitespaceToEOL)}parseAssign(){return this.callNow(this.parseKeyword,this.recordAssignKeyword)}recordAssignKeyword(C){return this.state.resultTable?this.state.resultTable.push(C):this.state.resultTable=[C],this.goto(this.parseAssignKeywordPreDot)}parseAssignKeywordPreDot(){if(this.char===CHAR_PERIOD)return this.next(this.parseAssignKeywordPostDot);if(this.char!==CHAR_SP&&this.char!==CTRL_I)return this.goto(this.parseAssignEqual)}parseAssignKeywordPostDot(){if(this.char!==CHAR_SP&&this.char!==CTRL_I)return this.callNow(this.parseKeyword,this.recordAssignKeyword)}parseAssignEqual(){if(this.char===CHAR_EQUALS)return this.next(this.parseAssignPreValue);throw this.error(new TomlError('Invalid character, expected "="'))}parseAssignPreValue(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseValue,this.recordAssignValue)}recordAssignValue(C){return this.returnNow({key:this.state.resultTable,value:C})}parseComment(){do{if(this.char===x.END||this.char===CTRL_J)return this.return();if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I)throw this.errorControlCharIn("comments")}while(this.nextChar())}parseTableOrList(){if(this.char===CHAR_LSQB)this.next(this.parseList);else return this.goto(this.parseTable)}parseTable(){return this.ctx=this.obj,this.goto(this.parseTableNext)}parseTableNext(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseKeyword,this.parseTableMore)}parseTableMore(C){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CHAR_RSQB){if(hasKey(this.ctx,C)&&(!isTable(this.ctx[C])||this.ctx[C][_declared]))throw this.error(new TomlError("Can't redefine existing key"));return this.ctx=this.ctx[C]=this.ctx[C]||Table$1(),this.ctx[_declared]=!0,this.next(this.parseWhitespaceToEOL)}else if(this.char===CHAR_PERIOD){if(!hasKey(this.ctx,C))this.ctx=this.ctx[C]=Table$1();else if(isTable(this.ctx[C]))this.ctx=this.ctx[C];else if(isList(this.ctx[C]))this.ctx=this.ctx[C][this.ctx[C].length-1];else throw this.error(new TomlError("Can't redefine existing key"));return this.next(this.parseTableNext)}else throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseList(){return this.ctx=this.obj,this.goto(this.parseListNext)}parseListNext(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseKeyword,this.parseListMore)}parseListMore(C){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CHAR_RSQB){if(hasKey(this.ctx,C)||(this.ctx[C]=List()),isInlineList(this.ctx[C]))throw this.error(new TomlError("Can't extend an inline array"));if(isList(this.ctx[C])){const P=Table$1();this.ctx[C].push(P),this.ctx=P}else throw this.error(new TomlError("Can't redefine an existing key"));return this.next(this.parseListEnd)}else if(this.char===CHAR_PERIOD){if(!hasKey(this.ctx,C))this.ctx=this.ctx[C]=Table$1();else{if(isInlineList(this.ctx[C]))throw this.error(new TomlError("Can't extend an inline array"));if(isInlineTable(this.ctx[C]))throw this.error(new TomlError("Can't extend an inline table"));if(isList(this.ctx[C]))this.ctx=this.ctx[C][this.ctx[C].length-1];else if(isTable(this.ctx[C]))this.ctx=this.ctx[C];else throw this.error(new TomlError("Can't redefine an existing key"))}return this.next(this.parseListNext)}else throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseListEnd(C){if(this.char===CHAR_RSQB)return this.next(this.parseWhitespaceToEOL);throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseValue(){if(this.char===x.END)throw this.error(new TomlError("Key without value"));if(this.char===CHAR_QUOT)return this.next(this.parseDoubleString);if(this.char===CHAR_APOS)return this.next(this.parseSingleString);if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)return this.goto(this.parseNumberSign);if(this.char===CHAR_i)return this.next(this.parseInf);if(this.char===CHAR_n)return this.next(this.parseNan);if(isDigit(this.char))return this.goto(this.parseNumberOrDateTime);if(this.char===CHAR_t||this.char===CHAR_f)return this.goto(this.parseBoolean);if(this.char===CHAR_LSQB)return this.call(this.parseInlineList,this.recordValue);if(this.char===CHAR_LCUB)return this.call(this.parseInlineTable,this.recordValue);throw this.error(new TomlError("Unexpected character, expecting string, number, datetime, boolean, inline array or inline table"))}recordValue(C){return this.returnNow(C)}parseInf(){if(this.char===CHAR_n)return this.next(this.parseInf2);throw this.error(new TomlError('Unexpected character, expected "inf", "+inf" or "-inf"'))}parseInf2(){if(this.char===CHAR_f)return this.state.buf==="-"?this.return(-1/0):this.return(1/0);throw this.error(new TomlError('Unexpected character, expected "inf", "+inf" or "-inf"'))}parseNan(){if(this.char===CHAR_a)return this.next(this.parseNan2);throw this.error(new TomlError('Unexpected character, expected "nan"'))}parseNan2(){if(this.char===CHAR_n)return this.return(NaN);throw this.error(new TomlError('Unexpected character, expected "nan"'))}parseKeyword(){return this.char===CHAR_QUOT?this.next(this.parseBasicString):this.char===CHAR_APOS?this.next(this.parseLiteralString):this.goto(this.parseBareKey)}parseBareKey(){do{if(this.char===x.END)throw this.error(new TomlError("Key ended without value"));if(isAlphaNumHyphen(this.char))this.consume();else{if(this.state.buf.length===0)throw this.error(new TomlError("Empty bare keys are not allowed"));return this.returnNow()}}while(this.nextChar())}parseSingleString(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiStringMaybe):this.goto(this.parseLiteralString)}parseLiteralString(){do{if(this.char===CHAR_APOS)return this.return();if(this.atEndOfLine())throw this.error(new TomlError("Unterminated string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I)throw this.errorControlCharIn("strings");this.consume()}while(this.nextChar())}parseLiteralMultiStringMaybe(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiString):this.returnNow()}parseLiteralMultiString(){return this.char===CTRL_M?null:this.char===CTRL_J?this.next(this.parseLiteralMultiStringContent):this.goto(this.parseLiteralMultiStringContent)}parseLiteralMultiStringContent(){do{if(this.char===CHAR_APOS)return this.next(this.parseLiteralMultiEnd);if(this.char===x.END)throw this.error(new TomlError("Unterminated multi-line string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I&&this.char!==CTRL_J&&this.char!==CTRL_M)throw this.errorControlCharIn("strings");this.consume()}while(this.nextChar())}parseLiteralMultiEnd(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiEnd2):(this.state.buf+="'",this.goto(this.parseLiteralMultiStringContent))}parseLiteralMultiEnd2(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiEnd3):(this.state.buf+="''",this.goto(this.parseLiteralMultiStringContent))}parseLiteralMultiEnd3(){return this.char===CHAR_APOS?(this.state.buf+="'",this.next(this.parseLiteralMultiEnd4)):this.returnNow()}parseLiteralMultiEnd4(){return this.char===CHAR_APOS?(this.state.buf+="'",this.return()):this.returnNow()}parseDoubleString(){return this.char===CHAR_QUOT?this.next(this.parseMultiStringMaybe):this.goto(this.parseBasicString)}parseBasicString(){do{if(this.char===CHAR_BSOL)return this.call(this.parseEscape,this.recordEscapeReplacement);if(this.char===CHAR_QUOT)return this.return();if(this.atEndOfLine())throw this.error(new TomlError("Unterminated string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I)throw this.errorControlCharIn("strings");this.consume()}while(this.nextChar())}recordEscapeReplacement(C){return this.state.buf+=C,this.goto(this.parseBasicString)}parseMultiStringMaybe(){return this.char===CHAR_QUOT?this.next(this.parseMultiString):this.returnNow()}parseMultiString(){return this.char===CTRL_M?null:this.char===CTRL_J?this.next(this.parseMultiStringContent):this.goto(this.parseMultiStringContent)}parseMultiStringContent(){do{if(this.char===CHAR_BSOL)return this.call(this.parseMultiEscape,this.recordMultiEscapeReplacement);if(this.char===CHAR_QUOT)return this.next(this.parseMultiEnd);if(this.char===x.END)throw this.error(new TomlError("Unterminated multi-line string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I&&this.char!==CTRL_J&&this.char!==CTRL_M)throw this.errorControlCharIn("strings");this.consume()}while(this.nextChar())}errorControlCharIn(C){let P="\\u00";return this.char<16&&(P+="0"),P+=this.char.toString(16),this.error(new TomlError(`Control characters (codes < 0x1f and 0x7f) are not allowed in ${C}, use ${P} instead`))}recordMultiEscapeReplacement(C){return this.state.buf+=C,this.goto(this.parseMultiStringContent)}parseMultiEnd(){return this.char===CHAR_QUOT?this.next(this.parseMultiEnd2):(this.state.buf+='"',this.goto(this.parseMultiStringContent))}parseMultiEnd2(){return this.char===CHAR_QUOT?this.next(this.parseMultiEnd3):(this.state.buf+='""',this.goto(this.parseMultiStringContent))}parseMultiEnd3(){return this.char===CHAR_QUOT?(this.state.buf+='"',this.next(this.parseMultiEnd4)):this.returnNow()}parseMultiEnd4(){return this.char===CHAR_QUOT?(this.state.buf+='"',this.return()):this.returnNow()}parseMultiEscape(){return this.char===CTRL_M||this.char===CTRL_J?this.next(this.parseMultiTrim):this.char===CHAR_SP||this.char===CTRL_I?this.next(this.parsePreMultiTrim):this.goto(this.parseEscape)}parsePreMultiTrim(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CTRL_M||this.char===CTRL_J)return this.next(this.parseMultiTrim);throw this.error(new TomlError("Can't escape whitespace"))}parseMultiTrim(){return this.char===CTRL_J||this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M?null:this.returnNow()}parseEscape(){if(this.char in escapes)return this.return(escapes[this.char]);if(this.char===CHAR_u)return this.call(this.parseSmallUnicode,this.parseUnicodeReturn);if(this.char===CHAR_U)return this.call(this.parseLargeUnicode,this.parseUnicodeReturn);throw this.error(new TomlError("Unknown escape character: "+this.char))}parseUnicodeReturn(C){try{const P=parseInt(C,16);if(P>=SURROGATE_FIRST&&P<=SURROGATE_LAST)throw this.error(new TomlError("Invalid unicode, character in range 0xD800 - 0xDFFF is reserved"));return this.returnNow(String.fromCodePoint(P))}catch(P){throw this.error(TomlError.wrap(P))}}parseSmallUnicode(){if(isHexit(this.char)){if(this.consume(),this.state.buf.length>=4)return this.return()}else throw this.error(new TomlError("Invalid character in unicode sequence, expected hex"))}parseLargeUnicode(){if(isHexit(this.char)){if(this.consume(),this.state.buf.length>=8)return this.return()}else throw this.error(new TomlError("Invalid character in unicode sequence, expected hex"))}parseNumberSign(){return this.consume(),this.next(this.parseMaybeSignedInfOrNan)}parseMaybeSignedInfOrNan(){return this.char===CHAR_i?this.next(this.parseInf):this.char===CHAR_n?this.next(this.parseNan):this.callNow(this.parseNoUnder,this.parseNumberIntegerStart)}parseNumberIntegerStart(){return this.char===CHAR_0?(this.consume(),this.next(this.parseNumberIntegerExponentOrDecimal)):this.goto(this.parseNumberInteger)}parseNumberIntegerExponentOrDecimal(){return this.char===CHAR_PERIOD?(this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat)):this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.returnNow(Integer(this.state.buf))}parseNumberInteger(){if(isDigit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnder);if(this.char===CHAR_E||this.char===CHAR_e)return this.consume(),this.next(this.parseNumberExponentSign);if(this.char===CHAR_PERIOD)return this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat);{const C=Integer(this.state.buf);if(C.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(C)}}}parseNoUnder(){if(this.char===CHAR_LOWBAR||this.char===CHAR_PERIOD||this.char===CHAR_E||this.char===CHAR_e)throw this.error(new TomlError("Unexpected character, expected digit"));if(this.atEndOfWord())throw this.error(new TomlError("Incomplete number"));return this.returnNow()}parseNoUnderHexOctBinLiteral(){if(this.char===CHAR_LOWBAR||this.char===CHAR_PERIOD)throw this.error(new TomlError("Unexpected character, expected digit"));if(this.atEndOfWord())throw this.error(new TomlError("Incomplete number"));return this.returnNow()}parseNumberFloat(){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnder,this.parseNumberFloat);if(isDigit(this.char))this.consume();else return this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.returnNow(Float(this.state.buf))}parseNumberExponentSign(){if(isDigit(this.char))return this.goto(this.parseNumberExponent);if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)this.consume(),this.call(this.parseNoUnder,this.parseNumberExponent);else throw this.error(new TomlError("Unexpected character, expected -, + or digit"))}parseNumberExponent(){if(isDigit(this.char))this.consume();else return this.char===CHAR_LOWBAR?this.call(this.parseNoUnder):this.returnNow(Float(this.state.buf))}parseNumberOrDateTime(){return this.char===CHAR_0?(this.consume(),this.next(this.parseNumberBaseOrDateTime)):this.goto(this.parseNumberOrDateTimeOnly)}parseNumberOrDateTimeOnly(){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnder,this.parseNumberInteger);if(isDigit(this.char))this.consume(),this.state.buf.length>4&&this.next(this.parseNumberInteger);else return this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.char===CHAR_PERIOD?(this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat)):this.char===CHAR_HYPHEN?this.goto(this.parseDateTime):this.char===CHAR_COLON?this.goto(this.parseOnlyTimeHour):this.returnNow(Integer(this.state.buf))}parseDateTimeOnly(){if(this.state.buf.length<4){if(isDigit(this.char))return this.consume();if(this.char===CHAR_COLON)return this.goto(this.parseOnlyTimeHour);throw this.error(new TomlError("Expected digit while parsing year part of a date"))}else{if(this.char===CHAR_HYPHEN)return this.goto(this.parseDateTime);throw this.error(new TomlError("Expected hyphen (-) while parsing year part of date"))}}parseNumberBaseOrDateTime(){return this.char===CHAR_b?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerBin)):this.char===CHAR_o?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerOct)):this.char===CHAR_x?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerHex)):this.char===CHAR_PERIOD?this.goto(this.parseNumberInteger):isDigit(this.char)?this.goto(this.parseDateTimeOnly):this.returnNow(Integer(this.state.buf))}parseIntegerHex(){if(isHexit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{const C=Integer(this.state.buf);if(C.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(C)}}}parseIntegerOct(){if(isOctit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{const C=Integer(this.state.buf);if(C.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(C)}}}parseIntegerBin(){if(isBit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{const C=Integer(this.state.buf);if(C.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(C)}}}parseDateTime(){if(this.state.buf.length<4)throw this.error(new TomlError("Years less than 1000 must be zero padded to four characters"));return this.state.result=this.state.buf,this.state.buf="",this.next(this.parseDateMonth)}parseDateMonth(){if(this.char===CHAR_HYPHEN){if(this.state.buf.length<2)throw this.error(new TomlError("Months less than 10 must be zero padded to two characters"));return this.state.result+="-"+this.state.buf,this.state.buf="",this.next(this.parseDateDay)}else if(isDigit(this.char))this.consume();else throw this.error(new TomlError("Incomplete datetime"))}parseDateDay(){if(this.char===CHAR_T||this.char===CHAR_SP){if(this.state.buf.length<2)throw this.error(new TomlError("Days less than 10 must be zero padded to two characters"));return this.state.result+="-"+this.state.buf,this.state.buf="",this.next(this.parseStartTimeHour)}else{if(this.atEndOfWord())return this.returnNow(createDate(this.state.result+"-"+this.state.buf));if(isDigit(this.char))this.consume();else throw this.error(new TomlError("Incomplete datetime"))}}parseStartTimeHour(){return this.atEndOfWord()?this.returnNow(createDate(this.state.result)):this.goto(this.parseTimeHour)}parseTimeHour(){if(this.char===CHAR_COLON){if(this.state.buf.length<2)throw this.error(new TomlError("Hours less than 10 must be zero padded to two characters"));return this.state.result+="T"+this.state.buf,this.state.buf="",this.next(this.parseTimeMin)}else if(isDigit(this.char))this.consume();else throw this.error(new TomlError("Incomplete datetime"))}parseTimeMin(){if(this.state.buf.length<2&&isDigit(this.char))this.consume();else{if(this.state.buf.length===2&&this.char===CHAR_COLON)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseTimeSec);throw this.error(new TomlError("Incomplete datetime"))}}parseTimeSec(){if(isDigit(this.char)){if(this.consume(),this.state.buf.length===2)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseTimeZoneOrFraction)}else throw this.error(new TomlError("Incomplete datetime"))}parseOnlyTimeHour(){if(this.char===CHAR_COLON){if(this.state.buf.length<2)throw this.error(new TomlError("Hours less than 10 must be zero padded to two characters"));return this.state.result=this.state.buf,this.state.buf="",this.next(this.parseOnlyTimeMin)}else throw this.error(new TomlError("Incomplete time"))}parseOnlyTimeMin(){if(this.state.buf.length<2&&isDigit(this.char))this.consume();else{if(this.state.buf.length===2&&this.char===CHAR_COLON)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseOnlyTimeSec);throw this.error(new TomlError("Incomplete time"))}}parseOnlyTimeSec(){if(isDigit(this.char)){if(this.consume(),this.state.buf.length===2)return this.next(this.parseOnlyTimeFractionMaybe)}else throw this.error(new TomlError("Incomplete time"))}parseOnlyTimeFractionMaybe(){if(this.state.result+=":"+this.state.buf,this.char===CHAR_PERIOD)this.state.buf="",this.next(this.parseOnlyTimeFraction);else return this.return(createTime(this.state.result))}parseOnlyTimeFraction(){if(isDigit(this.char))this.consume();else if(this.atEndOfWord()){if(this.state.buf.length===0)throw this.error(new TomlError("Expected digit in milliseconds"));return this.returnNow(createTime(this.state.result+"."+this.state.buf))}else throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}parseTimeZoneOrFraction(){if(this.char===CHAR_PERIOD)this.consume(),this.next(this.parseDateTimeFraction);else if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)this.consume(),this.next(this.parseTimeZoneHour);else{if(this.char===CHAR_Z)return this.consume(),this.return(createDateTime(this.state.result+this.state.buf));if(this.atEndOfWord())return this.returnNow(createDateTimeFloat(this.state.result+this.state.buf));throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}}parseDateTimeFraction(){if(isDigit(this.char))this.consume();else{if(this.state.buf.length===1)throw this.error(new TomlError("Expected digit in milliseconds"));if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)this.consume(),this.next(this.parseTimeZoneHour);else{if(this.char===CHAR_Z)return this.consume(),this.return(createDateTime(this.state.result+this.state.buf));if(this.atEndOfWord())return this.returnNow(createDateTimeFloat(this.state.result+this.state.buf));throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}}}parseTimeZoneHour(){if(isDigit(this.char)){if(this.consume(),/\d\d$/.test(this.state.buf))return this.next(this.parseTimeZoneSep)}else throw this.error(new TomlError("Unexpected character in datetime, expected digit"))}parseTimeZoneSep(){if(this.char===CHAR_COLON)this.consume(),this.next(this.parseTimeZoneMin);else throw this.error(new TomlError("Unexpected character in datetime, expected colon"))}parseTimeZoneMin(){if(isDigit(this.char)){if(this.consume(),/\d\d$/.test(this.state.buf))return this.return(createDateTime(this.state.result+this.state.buf))}else throw this.error(new TomlError("Unexpected character in datetime, expected digit"))}parseBoolean(){if(this.char===CHAR_t)return this.consume(),this.next(this.parseTrue_r);if(this.char===CHAR_f)return this.consume(),this.next(this.parseFalse_a)}parseTrue_r(){if(this.char===CHAR_r)return this.consume(),this.next(this.parseTrue_u);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseTrue_u(){if(this.char===CHAR_u)return this.consume(),this.next(this.parseTrue_e);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseTrue_e(){if(this.char===CHAR_e)return this.return(!0);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_a(){if(this.char===CHAR_a)return this.consume(),this.next(this.parseFalse_l);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_l(){if(this.char===CHAR_l)return this.consume(),this.next(this.parseFalse_s);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_s(){if(this.char===CHAR_s)return this.consume(),this.next(this.parseFalse_e);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_e(){if(this.char===CHAR_e)return this.return(!1);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseInlineList(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M||this.char===CTRL_J)return null;if(this.char===x.END)throw this.error(new TomlError("Unterminated inline array"));return this.char===CHAR_NUM?this.call(this.parseComment):this.char===CHAR_RSQB?this.return(this.state.resultArr||InlineList()):this.callNow(this.parseValue,this.recordInlineListValue)}recordInlineListValue(C){return this.state.resultArr||(this.state.resultArr=InlineList(tomlType$1(C))),isFloat(C)||isInteger(C)?this.state.resultArr.push(C.valueOf()):this.state.resultArr.push(C),this.goto(this.parseInlineListNext)}parseInlineListNext(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M||this.char===CTRL_J)return null;if(this.char===CHAR_NUM)return this.call(this.parseComment);if(this.char===CHAR_COMMA)return this.next(this.parseInlineList);if(this.char===CHAR_RSQB)return this.goto(this.parseInlineList);throw this.error(new TomlError("Invalid character, expected whitespace, comma (,) or close bracket (])"))}parseInlineTable(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===x.END||this.char===CHAR_NUM||this.char===CTRL_J||this.char===CTRL_M)throw this.error(new TomlError("Unterminated inline array"));return this.char===CHAR_RCUB?this.return(this.state.resultTable||InlineTable()):(this.state.resultTable||(this.state.resultTable=InlineTable()),this.callNow(this.parseAssign,this.recordInlineTableValue))}recordInlineTableValue(C){let P=this.state.resultTable,O=C.key.pop();for(let $ of C.key){if(hasKey(P,$)&&(!isTable(P[$])||P[$][_declared]))throw this.error(new TomlError("Can't redefine existing key"));P=P[$]=P[$]||Table$1()}if(hasKey(P,O))throw this.error(new TomlError("Can't redefine existing key"));return isInteger(C.value)||isFloat(C.value)?P[O]=C.value.valueOf():P[O]=C.value,this.goto(this.parseInlineTableNext)}parseInlineTableNext(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===x.END||this.char===CHAR_NUM||this.char===CTRL_J||this.char===CTRL_M)throw this.error(new TomlError("Unterminated inline array"));if(this.char===CHAR_COMMA)return this.next(this.parseInlineTablePostComma);if(this.char===CHAR_RCUB)return this.goto(this.parseInlineTable);throw this.error(new TomlError("Invalid character, expected whitespace, comma (,) or close bracket (])"))}parseInlineTablePostComma(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===x.END||this.char===CHAR_NUM||this.char===CTRL_J||this.char===CTRL_M)throw this.error(new TomlError("Unterminated inline array"));if(this.char===CHAR_COMMA)throw this.error(new TomlError("Empty elements in inline tables are not permitted"));if(this.char===CHAR_RCUB)throw this.error(new TomlError("Trailing commas in inline tables are not permitted"));return this.goto(this.parseInlineTable)}}return y}function prettyError(x,y){if(x.pos==null||x.line==null)return x;let w=x.message;if(w+=` at row ${x.line+1}, col ${x.col+1}, pos ${x.pos}:
`,y&&y.split){const C=y.split(/\n/),P=String(Math.min(C.length,x.line+3)).length;let O=" ";for(;O.length<P;)O+=" ";for(let $=Math.max(0,x.line-1);$<Math.min(C.length,x.line+2);++$){let L=String($+1);if(L.length<P&&(L=" "+L),x.line===$){w+=L+"> "+C[$]+`
`,w+=O+"  ";for(let D=0;D<x.col;++D)w+=" ";w+=`^
`}else w+=L+": "+C[$]+`
`}}return x.message=w+`
`,x}function parseString(x){global.Buffer&&global.Buffer.isBuffer(x)&&(x=x.toString("utf8"));const y=new TOMLParser;try{return y.parse(x),y.finish()}catch(w){throw prettyError(w,x)}}function stringify$1(x){if(x===null)throw typeError("null");if(x===void 0)throw typeError("undefined");if(typeof x!="object")throw typeError(typeof x);if(typeof x.toJSON=="function"&&(x=x.toJSON()),x==null)return null;const y=tomlType(x);if(y!=="table")throw typeError(y);return stringifyObject("","",x)}function typeError(x){return new Error("Can only stringify objects, not "+x)}function getInlineKeys(x){return Object.keys(x).filter(y=>isInline(x[y]))}function getComplexKeys(x){return Object.keys(x).filter(y=>!isInline(x[y]))}function toJSON(x){let y=Array.isArray(x)?[]:Object.prototype.hasOwnProperty.call(x,"__proto__")?{["__proto__"]:void 0}:{};for(let w of Object.keys(x))x[w]&&typeof x[w].toJSON=="function"&&!("toISOString"in x[w])?y[w]=x[w].toJSON():y[w]=x[w];return y}function stringifyObject(x,y,w){w=toJSON(w);let C,P;C=getInlineKeys(w),P=getComplexKeys(w);const O=[],$=y||"";C.forEach(D=>{var B=tomlType(w[D]);B!=="undefined"&&B!=="null"&&O.push($+stringifyKey(D)+" = "+stringifyAnyInline(w[D],!0))}),O.length>0&&O.push("");const L=x&&C.length>0?y+"  ":"";return P.forEach(D=>{O.push(stringifyComplex(x,L,D,w[D]))}),O.join(`
`)}function isInline(x){switch(tomlType(x)){case"undefined":case"null":case"integer":case"nan":case"float":case"boolean":case"string":case"datetime":return!0;case"array":return x.length===0||tomlType(x[0])!=="table";case"table":return Object.keys(x).length===0;default:return!1}}function tomlType(x){return x===void 0?"undefined":x===null?"null":typeof x=="bigint"||Number.isInteger(x)&&!Object.is(x,-0)?"integer":typeof x=="number"?"float":typeof x=="boolean"?"boolean":typeof x=="string"?"string":"toISOString"in x?isNaN(x)?"undefined":"datetime":Array.isArray(x)?"array":"table"}function stringifyKey(x){const y=String(x);return/^[-A-Za-z0-9_]+$/.test(y)?y:stringifyBasicString(y)}function stringifyBasicString(x){return'"'+escapeString(x).replace(/"/g,'\\"')+'"'}function stringifyLiteralString(x){return"'"+x+"'"}function numpad(x,y){for(;y.length<x;)y="0"+y;return y}function escapeString(x){return x.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/([\u0000-\u001f\u007f])/,y=>"\\u"+numpad(4,y.codePointAt(0).toString(16)))}function stringifyMultilineString(x){let y=x.split(/\n/).map(w=>escapeString(w).replace(/"(?="")/g,'\\"')).join(`
`);return y.slice(-1)==='"'&&(y+=`\\
`),`"""
`+y+'"""'}function stringifyAnyInline(x,y){let w=tomlType(x);return w==="string"&&(y&&/\n/.test(x)?w="string-multiline":!/[\b\t\n\f\r']/.test(x)&&/"/.test(x)&&(w="string-literal")),stringifyInline(x,w)}function stringifyInline(x,y){switch(y||(y=tomlType(x)),y){case"string-multiline":return stringifyMultilineString(x);case"string":return stringifyBasicString(x);case"string-literal":return stringifyLiteralString(x);case"integer":return stringifyInteger(x);case"float":return stringifyFloat(x);case"boolean":return stringifyBoolean(x);case"datetime":return stringifyDatetime(x);case"array":return stringifyInlineArray(x.filter(w=>tomlType(w)!=="null"&&tomlType(w)!=="undefined"&&tomlType(w)!=="nan"));case"table":return stringifyInlineTable(x);default:throw typeError(y)}}function stringifyInteger(x){return String(x).replace(/\B(?=(\d{3})+(?!\d))/g,"_")}function stringifyFloat(x){if(x===1/0)return"inf";if(x===-1/0)return"-inf";if(Object.is(x,NaN))return"nan";if(Object.is(x,-0))return"-0.0";const[y,w]=String(x).split(".");return stringifyInteger(y)+"."+w}function stringifyBoolean(x){return String(x)}function stringifyDatetime(x){return x.toISOString()}function stringifyInlineArray(x){x=toJSON(x);let y="[";const w=x.map(C=>stringifyInline(C));return w.join(", ").length>60||/\n/.test(w)?y+=`
  `+w.join(`,
  `)+`
`:y+=" "+w.join(", ")+(w.length>0?" ":""),y+"]"}function stringifyInlineTable(x){x=toJSON(x);const y=[];return Object.keys(x).forEach(w=>{y.push(stringifyKey(w)+" = "+stringifyAnyInline(x[w],!1))}),"{ "+y.join(", ")+(y.length>0?" ":"")+"}"}function stringifyComplex(x,y,w,C){const P=tomlType(C);if(P==="array")return stringifyArrayOfTables(x,y,w,C);if(P==="table")return stringifyComplexTable(x,y,w,C);throw typeError(P)}function stringifyArrayOfTables(x,y,w,C){C=toJSON(C);const P=tomlType(C[0]);if(P!=="table")throw typeError(P);const O=x+stringifyKey(w);let $="";return C.forEach(L=>{$.length>0&&($+=`
`),$+=y+"[["+O+`]]
`,$+=stringifyObject(O+".",y,L)}),$}function stringifyComplexTable(x,y,w,C){const P=x+stringifyKey(w);let O="";return getInlineKeys(C).length>0&&(O+=y+"["+P+`]
`),O+stringifyObject(P+".",y,C)}const parse$1=parseString,stringify=stringify$1;function parseToml(x){return x=x.replaceAll(/\r/gi,`
`),parse$1(x)}function isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0||"msMaxTouchPoints"in navigator&&navigator.msMaxTouchPoints>0}const scriptRel="modulepreload",assetsURL=function(x,y){return new URL(x,y).href},seen={},__vitePreload=function x(y,w,C){let P=Promise.resolve();if(w&&w.length>0){let B=function(U){return Promise.all(U.map(k=>Promise.resolve(k).then(H=>({status:"fulfilled",value:H}),H=>({status:"rejected",reason:H}))))};const $=document.getElementsByTagName("link"),L=document.querySelector("meta[property=csp-nonce]"),D=L?.nonce||L?.getAttribute("nonce");P=B(w.map(U=>{if(U=assetsURL(U,C),U in seen)return;seen[U]=!0;const k=U.endsWith(".css"),H=k?'[rel="stylesheet"]':"";if(C)for(let G=$.length-1;G>=0;G--){const Q=$[G];if(Q.href===U&&(!k||Q.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${U}"]${H}`))return;const W=document.createElement("link");if(W.rel=k?"stylesheet":scriptRel,k||(W.as="script"),W.crossOrigin="",W.href=U,D&&W.setAttribute("nonce",D),document.head.appendChild(W),k)return new Promise((G,Q)=>{W.addEventListener("load",G),W.addEventListener("error",()=>Q(new Error(`Unable to preload CSS for ${U}`)))})}))}function O($){const L=new Event("vite:preloadError",{cancelable:!0});if(L.payload=$,window.dispatchEvent(L),!L.defaultPrevented)throw $}return P.then($=>{for(const L of $||[])L.status==="rejected"&&O(L.reason);return y().catch(O)})};var t$2,e$1,i;(function(x){x[x.MAIN=1]="MAIN",x[x.VARS=2]="VARS",x[x.ACTS=4]="ACTS",x[x.OBJS=8]="OBJS",x[x.INPUT=16]="INPUT",x[x.VIEW=32]="VIEW"})(t$2||(t$2={})),(function(x){x[x.DEBUG=0]="DEBUG",x[x.ISPLAYINGFILE=1]="ISPLAYINGFILE",x[x.PLAYFILE=2]="PLAYFILE",x[x.CLOSEFILE=3]="CLOSEFILE",x[x.SHOWIMAGE=4]="SHOWIMAGE",x[x.SHOWWINDOW=5]="SHOWWINDOW",x[x.SHOWMENU=6]="SHOWMENU",x[x.SHOWMSGSTR=7]="SHOWMSGSTR",x[x.REFRESHINT=8]="REFRESHINT",x[x.SETTIMER=9]="SETTIMER",x[x.SETINPUTSTRTEXT=10]="SETINPUTSTRTEXT",x[x.SYSTEM=11]="SYSTEM",x[x.OPENGAME=12]="OPENGAME",x[x.INITGAMESTATUS=13]="INITGAMESTATUS",x[x.OPENGAMESTATUS=14]="OPENGAMESTATUS",x[x.SAVEGAMESTATUS=15]="SAVEGAMESTATUS",x[x.SLEEP=16]="SLEEP",x[x.GETMSCOUNT=17]="GETMSCOUNT",x[x.INPUTBOX=18]="INPUTBOX",x[x.VERSION=19]="VERSION",x[x.DUMMY=20]="DUMMY"})(e$1||(e$1={})),(function(x){x[x.MAIN=1]="MAIN",x[x.VARS=2]="VARS",x[x.ACTS=4]="ACTS",x[x.OBJS=8]="OBJS",x[x.INPUT=16]="INPUT",x[x.VIEW=32]="VIEW",x[x.ALL=63]="ALL"})(i||(i={}));function s$1(x){return x._malloc(4)}function o$1(x,y){return _$1(x,y)}function n$1(x,y=1){return x+4*y}function r$2(x,y){x._free(y)}function a(x,y){return _$1(x,y)}function l(x,y){const w=o$1(x,y);return w?(function(C,P,O){let $=0;const L=[];for(;!($>=O/4);){const D=C.HEAP32[P+4*$>>2];if(D==0)break;if(++$,D>=65536){const B=D-65536;L.push(String.fromCharCode(55296|B>>10,56320|1023&B))}else L.push(String.fromCharCode(D))}return L.join("")})(x,w,o$1(x,n$1(y))-w):""}function h(x,y){const w=(function(P){let O=0;for(let $=0;$<P.length;++$){const L=P.charCodeAt($);L>=55296&&L<=57343&&++$,O+=4}return O})(y),C=x._malloc(w+4);return I(x,y,C,w+4),C}function u(x,y){const w=(function(P){return P._malloc(8)})(x);y(w);const C=l(x,w);return r$2(x,w),C}function c(x,y,w){const C=h(x,y);w(C),x._free(C)}function d(x,y){const w=s$1(x),C=y(w),P=E(x,C,a(x,w));return x._freeItemsList(C),r$2(x,w),P}function m(x,y){const w=s$1(x),C=y(w),P=(function(O,$,L){const D=[];let B=$;for(let U=0;U<L;U++){const k=l(O,B);B=n$1(B,2);const H=l(O,B);B=n$1(B,2);const W=l(O,B);B=n$1(B,2),D.push({name:k,title:H,image:W})}return D})(x,C,a(x,w));return x._freeObjectsList(C),r$2(x,w),P}function S(x,y){const w=s$1(x),C=y(w),P=(function(O,$,L){const D=[];let B=$;for(let U=0;U<L;++U){const k=l(O,B);B=n$1(B,2),D.push(k)}return D})(x,C,a(x,w));return x._freeStringsBuffer(C),r$2(x,w),P}function g(x,y,w){const C=new Uint8Array(y),P=x._malloc(C.length);x.HEAPU8.set(C,P),w(P,C.length),x._free(P)}function E(x,y,w){const C=[];let P=y;for(let O=0;O<w;O++){const $=l(x,P);P=n$1(P,2);const L=l(x,P);P=n$1(P,2),C.push({name:$,image:L})}return C}function f(x,y){return x.Asyncify.handleSleep(w=>{y(C=>w(C||0))})}function _$1(x,y){return x.HEAP32[y>>2]}function I(x,y,w,C=2147483647){if(C<4)return 0;const P=w,O=P+C-4;for(let $=0;$<y.length;++$){let L=y.charCodeAt($);if(L>=55296&&L<=57343&&(L=65536+((1023&L)<<10)|1023&y.charCodeAt(++$)),x.HEAP32[w>>2]=L,(w+=4)+4>O)break}return x.HEAP32[w>>2]=0,w-P}function A(x,y,w){const C=(function(O){return O._malloc(12)})(x);w(C);const P=T(x,C,y);return r$2(x,C),P}function T(x,y,w){switch((function(P,O){return P.HEAP8[O]})(x,n$1(y,2))){case 0:return w?w.startsWith("%")?b(x,y):w.startsWith("$")?"":0:b(x,y);case 1:case 2:return w?w.startsWith("%")?[]:w.startsWith("$")?"":_$1(x,y):_$1(x,y);case 3:case 4:case 5:return w?w.startsWith("%")?[]:w.startsWith("$")?l(x,y):0:l(x,y);case 6:if(w)return w.startsWith("%")?[]:w.startsWith("$")?"":0}return""}function b(x,y){const w=[],C=o$1(x,y),P=_$1(x,n$1(y));for(let O=0;O<P;++O)w.push(T(x,n$1(C,3*O)));return w}class p{constructor(y){this.module=y,this.listeners=new Map,this.variableWatchers=new Set,this.variableValues=new Map,this.eventLogger=null,this.time=Date.now(),this.staticStrings=new Map,this.onError=()=>{const w=(function(P){return P._malloc(40)})(this.module);this.module._getLastError(w);const C=(function(P,O){return{errorCode:_$1(P,O),description:l(P,n$1(O)),location:l(P,n$1(O,3)),actionIndex:_$1(P,n$1(O,5)),line:_$1(P,n$1(O,6)),localLine:_$1(P,n$1(O,7)),lineSrc:l(P,n$1(O,8))}})(this.module,w);C.errorCode>0&&this.emit("error",C),this.module._free(w)},this.onRefresh=(w,C)=>{const P=this.module._getWindowsChangedState();if(w||(P&i.MAIN)!==0){const O=u(this.module,$=>this.module._getMainDesc($));this.emit("main_changed",O,!!C)}if(w||(P&i.VARS)!==0){const O=u(this.module,$=>this.module._getVarsDesc($));this.emit("stats_changed",O)}if(w||(P&i.ACTS)!==0){const O=d(this.module,$=>this.module._getActions($));this.emit("actions_changed",O)}if(w||(P&i.OBJS)!==0){const O=m(this.module,$=>this.module._getObjects($));this.emit("objects_changed",O)}setTimeout(()=>this.reportWatched(),0)},this.onShowWindow=(w,C)=>{this.emit("panel_visibility",w,C)},this.onMenu=(w,C)=>{const P=E(this.module,w,C);return f(this.module,O=>{this.emit("menu",P,$=>{O($)})})},this.onMsg=w=>{const C=l(this.module,w);return f(this.module,P=>{this.emit("msg",C,()=>{P()})})},this.onInput=(w,C,P)=>{const O=l(this.module,w);return f(this.module,$=>{this.emit("input",O,L=>{I(this.module,L,C,P),$()})})},this.onVersion=(w,C,P)=>{const O=l(this.module,w);return f(this.module,$=>{this.emit("version",O,L=>{I(this.module,L,C,P),$()})})},this.onWait=w=>f(this.module,C=>{this.emit("wait",w,()=>{C()})}),this.onSetTimer=w=>{this.emit("timer",w)},this.onSetUserInput=w=>{const C=l(this.module,w);this.emit("user_input",C)},this.onView=w=>{const C=l(this.module,w);this.emit("view",C)},this.onDebug=w=>{const C=l(this.module,w),P=s$1(this.module),O=s$1(this.module),$=u(this.module,B=>this.module._getCurStateData(B,P,O)),L=o$1(this.module,O);this.module._free(O);const D=o$1(this.module,P);return this.module._free(P),f(this.module,B=>{this.emit("debug",{code:C,loc:$,line:L,actIndex:D},B)})},this.onSystemCmd=w=>{this.onRefresh(!1,!1);const C=l(this.module,w);this.emit("system_cmd",C)},this.onGetMS=()=>{const w=Date.now()-this.time;return this.time=Date.now(),w},this.onOpenGame=(w,C)=>{const P=l(this.module,w);return f(this.module,O=>{this.emit("open_game",P,C,()=>{O()})})},this.onOpenGameStatus=w=>{const C=l(this.module,w);return f(this.module,P=>{this.emit("load_save",C,()=>{P()})})},this.onSaveGameStatus=w=>{const C=l(this.module,w);return f(this.module,P=>{this.emit("save_game",C,()=>{P()})})},this.onIsPlay=w=>{const C=l(this.module,w);return f(this.module,P=>{this.emit("is_play",C,O=>{P(O?1:0)})})},this.onPlayFile=(w,C)=>{const P=l(this.module,w);return f(this.module,O=>{this.emit("play_file",P,C,()=>{O()})})},this.onCloseFile=w=>{const C=l(this.module,w);return f(this.module,P=>{this.emit("close_file",C,()=>{P()})})},this.init()}on(y,w){var C;const P=(C=this.listeners.get(y))!==null&&C!==void 0?C:[];P.push(w),this.listeners.set(y,P)}off(y,w){var C;let P=(C=this.listeners.get(y))!==null&&C!==void 0?C:[];P=P.filter(O=>O!==w),P.length?this.listeners.set(y,P):this.listeners.delete(y)}registerEventLogger(y){this.eventLogger=y}watchVariable(y,w){let C=this.readVariable(y);w(C);const P=()=>{const O=this.readVariable(y);C!==O&&(C=O,w(C))};return this.variableWatchers.add(P),()=>{this.variableWatchers.delete(P)}}watchVariableByIndex(y,w,C){let P=this.readVariableByIndex(y,w);C(P);const O=()=>{const $=this.readVariableByIndex(y,w);P!==$&&(P=$,C(P))};return this.variableWatchers.add(O),()=>{this.variableWatchers.delete(O)}}watchVariableByKey(y,w,C){let P=this.readVariableByKey(y,w);C(P);const O=()=>{const $=this.readVariableByKey(y,w);P!==$&&(P=$,C(P))};return this.variableWatchers.add(O),()=>{this.variableWatchers.delete(O)}}emit(y,...w){var C;this.eventLogger&&this.eventLogger.log(y,...w);const P=(C=this.listeners.get(y))!==null&&C!==void 0?C:[];for(const O of P)O(...w)}openGame(y,w){w&&this._cleanup(),g(this.module,y,(C,P)=>this.module._loadGameData(C,P,w?1:0))}saveGame(){return(function(w,C){const P=s$1(w),O=C(P),$=_$1(w,P);if(!$)return r$2(w,P),null;const L=w.HEAPU8.slice(O,O+$);return w._freeSaveBuffer(O),r$2(w,P),L.buffer})(this.module,w=>this.module._saveGameData(w))||(this.onError(),null)}loadSave(y){g(this.module,y,(w,C)=>this.module._loadSavedGameData(w,C))}restartGame(){this.time=Date.now(),this.module._restartGame()}selectAction(y){this.module._selectAction(y)}execSelectedAction(){this.module._executeSelAction()}selectObject(y){this.module._selectObject(y)}version(){return u(this.module,y=>this.module._getVersion(y))}getStaticStringPointer(y){const w=y.toLocaleUpperCase(),C=this.staticStrings.get(w);if(C)return C;const P=h(this.module,y);return this.staticStrings.set(w,P),P}readVariable(y,w=!1){const C=y.toUpperCase(),P=`${C}[0]`;if(w&&this.variableValues.has(P))return this.variableValues.get(P);const O=this.getStaticStringPointer(C),$=A(this.module,y,L=>this.module._getVarValue(O,L));return this.variableValues.set(P,$),$}readVariableByIndex(y,w,C=!1){const P=y.toUpperCase(),O=`${P}[${w}]`;if(C&&this.variableValues.has(O))return this.variableValues.get(O);const $=this.getStaticStringPointer(P),L=A(this.module,y,D=>this.module._getVarValueByIndex($,w,D));return this.variableValues.set(O,L),L}readVariableByKey(y,w,C=!1){const P=y.toUpperCase(),O=`${P}["${w}"]`;if(C&&this.variableValues.has(O))return this.variableValues.get(O);const $=this.getStaticStringPointer(P),L=this.getStaticStringPointer(w),D=A(this.module,y,B=>this.module._getVarValueByKey($,L,B));return this.variableValues.set(O,D),D}readVariableSize(y){const w=this.getStaticStringPointer(y.toLocaleUpperCase());return this.module._getVarSize(w)}execCode(y,w=!0){c(this.module,y,C=>this.module._execString(C,w?1:0))}execCounter(){this.module._execCounter()}execLoc(y){c(this.module,y,w=>this.module._execLoc(w))}updateUserInput(y){c(this.module,y,w=>this.module._execUserInput(w))}enableDebugMode(){this.module._enableDebugMode()}disableDebugMode(){this.module._disableDebugMode()}getLocationsList(){return S(this.module,y=>this.module._getLocationsList(y))}getLocationActions(y){const w=this.getStaticStringPointer(y);return d(this.module,C=>this.module._getLocationActions(w,C))}getLocationCode(y){const w=this.getStaticStringPointer(y);return S(this.module,C=>this.module._getLocationCode(w,C))}getActionCode(y,w){const C=this.getStaticStringPointer(y);return S(this.module,P=>this.module._getActionCode(C,w,P))}calculateStringExpression(y){const w=h(this.module,y);try{return u(this.module,C=>{this.module._calculateStrExpression(w,C)===0&&this.onError()})}finally{this.module._free(w)}}calculateNumericExpression(y){const w=s$1(this.module),C=h(this.module,y);try{return this.module._calculateNumExpression(C,w)===0?(this.onError(),null):o$1(this.module,w)}finally{this.module._free(w),this.module._free(C)}}showWindow(y,w){this.module._showWindow(y,w?1:0)}getSelectedActionIndex(){return this.module._getSelActionIndex()}getSelectedObjectIndex(){return this.module._getSelObjectIndex()}getCompiledDateTime(){return u(this.module,y=>this.module._getCompiledDateTime(y))}getErrorDescription(y){return u(this.module,w=>this.module._getErrorDesc(y,w))}getLocationDescription(y){const w=this.getStaticStringPointer(y);return u(this.module,C=>this.module._getLocationDesc(w,C))}init(){this.module._init(),this.registerCallbacks()}registerCallbacks(){this.module._setErrorCallback(this.module.addFunction(this.onError,"i"));const y=[[e$1.REFRESHINT,this.onRefresh,"iii"],[e$1.SHOWWINDOW,this.onShowWindow,"iii"],[e$1.SHOWMENU,this.onMenu,"iii"],[e$1.SHOWMSGSTR,this.onMsg,"ii"],[e$1.INPUTBOX,this.onInput,"iiii"],[e$1.SLEEP,this.onWait,"ii"],[e$1.SETTIMER,this.onSetTimer,"ii"],[e$1.SETINPUTSTRTEXT,this.onSetUserInput,"ii"],[e$1.SHOWIMAGE,this.onView,"ii"],[e$1.DEBUG,this.onDebug,"ii"],[e$1.GETMSCOUNT,this.onGetMS,"i"],[e$1.OPENGAME,this.onOpenGame,"iii"],[e$1.OPENGAMESTATUS,this.onOpenGameStatus,"ii"],[e$1.SAVEGAMESTATUS,this.onSaveGameStatus,"ii"],[e$1.ISPLAYINGFILE,this.onIsPlay,"ii"],[e$1.PLAYFILE,this.onPlayFile,"iii"],[e$1.CLOSEFILE,this.onCloseFile,"ii"],[e$1.SYSTEM,this.onSystemCmd,"ii"],[e$1.VERSION,this.onVersion,"iiii"]];for(const[w,C,P]of y)this.registerCallback(w,C,P)}registerCallback(y,w,C){this.module._setCallback(y,this.module.addFunction(w,C))}clearCache(){this.variableValues.clear()}_run_checks(){this.module.__run_checks()}_cleanup(){this.clearCache(),this.variableWatchers.clear();for(const y of this.staticStrings.values())this.module._free(y);this.staticStrings.clear()}reportWatched(){this.clearCache();for(const y of this.variableWatchers.values())y()}toJSON(){return"[QSP API]"}}async function t$1(x={}){var y=x,w=typeof window=="object",C=typeof WorkerGlobalScope<"u",P=typeof process=="object"&&process.versions?.node&&process.type!="renderer";if(P){const{createRequire:_e}=await __vitePreload(()=>import("./__vite-browser-external-BIHI7g3E.js"),[],import.meta.url);var O=_e(import.meta.url)}var $,L,D="./this.program",B=(_e,Fe)=>{throw Fe},U=import.meta.url,k="";if(P){var H=O("fs");U.startsWith("file:")&&(k=O("path").dirname(O("url").fileURLToPath(U))+"/"),L=_e=>(_e=re(_e)?new URL(_e):_e,H.readFileSync(_e)),$=async(_e,Fe=!0)=>(_e=re(_e)?new URL(_e):_e,H.readFileSync(_e,Fe?void 0:"utf8")),process.argv.length>1&&(D=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),B=(_e,Fe)=>{throw process.exitCode=_e,Fe}}else if(w||C){try{k=new URL(".",U).href}catch{}C&&(L=_e=>{var Fe=new XMLHttpRequest;return Fe.open("GET",_e,!1),Fe.responseType="arraybuffer",Fe.send(null),new Uint8Array(Fe.response)}),$=async _e=>{if(re(_e))return new Promise((pt,bt)=>{var Be=new XMLHttpRequest;Be.open("GET",_e,!0),Be.responseType="arraybuffer",Be.onload=()=>{Be.status==200||Be.status==0&&Be.response?pt(Be.response):bt(Be.status)},Be.onerror=bt,Be.send(null)});var Fe=await fetch(_e,{credentials:"same-origin"});if(Fe.ok)return Fe.arrayBuffer();throw new Error(Fe.status+" : "+Fe.url)}}console.log.bind(console);var W,G,Q,Z,J,ne,oe,ae,ve=console.error.bind(console),Te=!1,re=_e=>_e.startsWith("file://");function he(){if(!Te){var _e=ie();_e==0&&(_e+=4);var Fe=ae[_e>>2],pt=ae[_e+4>>2];Fe==34821223&&pt==2310721022||Ye(`Stack overflow! Stack cookie has been overwritten at ${Nn(_e)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${Nn(pt)} ${Nn(Fe)}`),ae[0]!=1668509029&&Ye("Runtime error: The application has corrupted its heap memory area (address zero)!")}}var be,Le=!1;function qe(){var _e=J.buffer;y.HEAP8=new Int8Array(_e),y.HEAP16=new Int16Array(_e),y.HEAPU8=ne=new Uint8Array(_e),y.HEAPU16=new Uint16Array(_e),y.HEAP32=oe=new Int32Array(_e),y.HEAPU32=ae=new Uint32Array(_e),y.HEAPF32=new Float32Array(_e),y.HEAPF64=new Float64Array(_e),new BigInt64Array(_e),new BigUint64Array(_e)}function Ye(_e){y.onAbort?.(_e),ve(_e="Aborted("+_e+")"),Te=!0,_e+=". Build with -sASSERTIONS for more info.";var Fe=new WebAssembly.RuntimeError(_e);throw Z?.(Fe),Fe}function et(){return y.locateFile?(_e="qsp-engine.wasm",y.locateFile?y.locateFile(_e,k):k+_e):new URL(""+new URL("qsp-engine-DxU_aFt3.wasm",import.meta.url).href,import.meta.url).href;var _e}async function je(_e){if(!W)try{var Fe=await $(_e);return new Uint8Array(Fe)}catch{}return(function(pt){if(pt==be&&W)return new Uint8Array(W);if(L)return L(pt);throw"both async and sync fetching of the wasm failed"})(_e)}async function Ke(_e,Fe,pt){if(!_e&&!re(Fe)&&!P)try{var bt=fetch(Fe,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(bt,pt)}catch(Be){ve(`wasm streaming compile failed: ${Be}`),ve("falling back to ArrayBuffer instantiation")}return(async function(Be,$t){try{var Gn=await je(Be);return await WebAssembly.instantiate(Gn,$t)}catch(Qt){ve(`failed to asynchronously prepare wasm: ${Qt}`),Ye(Qt)}})(Fe,pt)}class Ve{name="ExitStatus";constructor(Fe){this.message=`Program terminated with exit(${Fe})`,this.status=Fe}}var We,we,Oe,He,ie,Re,Xe,Ze,st,dt,De,it,Ue,Et=_e=>{for(;_e.length>0;)_e.shift()(y)},Ot=[],_t=_e=>Ot.push(_e),Ht=[],$n=_e=>Ht.push(_e),yn=!0,Nn=_e=>"0x"+(_e>>>=0).toString(16).padStart(8,"0"),fr=()=>{var _e=Re(),Fe=ie();st(_e,Fe)},vs=(_e,Fe)=>Math.ceil(_e/Fe)*Fe,Fo=_e=>{var Fe=(_e-J.buffer.byteLength+65535)/65536|0;try{return J.grow(Fe),qe(),1}catch{}},Wn={},Gt=()=>{if(!Gt.strings){var _e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.language||"C").replace("-","_")+".UTF-8",_:D||"./this.program"};for(var Fe in Wn)Wn[Fe]===void 0?delete _e[Fe]:_e[Fe]=Wn[Fe];var pt=[];for(var Fe in _e)pt.push(`${Fe}=${_e[Fe]}`);Gt.strings=pt}return Gt.strings},po=(_e,Fe,pt)=>((bt,Be,$t,Gn)=>{for(var Qt=$t,hn=$t+Gn-1,Sn=0;Sn<bt.length;++Sn){var en=bt.codePointAt(Sn);if(en<=127){if($t>=hn)break;Be[$t++]=en}else if(en<=2047){if($t+1>=hn)break;Be[$t++]=192|en>>6,Be[$t++]=128|63&en}else if(en<=65535){if($t+2>=hn)break;Be[$t++]=224|en>>12,Be[$t++]=128|en>>6&63,Be[$t++]=128|63&en}else{if($t+3>=hn)break;Be[$t++]=240|en>>18,Be[$t++]=128|en>>12&63,Be[$t++]=128|en>>6&63,Be[$t++]=128|63&en,Sn++}}return Be[$t]=0,$t-Qt})(_e,ne,Fe,pt),Ar=_e=>{for(var Fe=0,pt=0;pt<_e.length;++pt){var bt=_e.charCodeAt(pt);bt<=127?Fe++:bt<=2047?Fe+=2:bt>=55296&&bt<=57343?(Fe+=4,++pt):Fe+=3}return Fe},Tr=_e=>{try{return _e()}catch(Fe){Ye(Fe)}},pr=_e=>{if(_e instanceof Ve||_e=="unwind")return G;he(),_e instanceof WebAssembly.RuntimeError&&Ze()<=0&&ve("Stack overflow detected.  You can try increasing -sSTACK_SIZE (currently set to 5242880)"),B(1,_e)},Kn=()=>yn||!1,zn=(_e,Fe)=>{var pt;G=_e,G=pt=_e,Kn()||(y.onExit?.(pt),Te=!0),B(pt,new Ve(pt))},Pr=_e=>{if(!Te)try{_e(),(()=>{if(!Kn())try{zn(G)}catch(Fe){pr(Fe)}})()}catch(Fe){pr(Fe)}},xt={instrumentWasmImports(_e){var Fe=/^(invoke_.*|__asyncjs__.*)$/;for(let[pt,bt]of Object.entries(_e))typeof bt=="function"&&(bt.isAsync||Fe.test(pt))},instrumentFunction(_e){var Fe=(...pt)=>{xt.exportCallStack.push(_e);try{return _e(...pt)}finally{Te||(xt.exportCallStack.pop(),xt.maybeStopUnwind())}};return xt.funcWrappers.set(_e,Fe),Fe},instrumentWasmExports(_e){var Fe={};for(let[bt,Be]of Object.entries(_e))if(typeof Be=="function"){var pt=xt.instrumentFunction(Be);Fe[bt]=pt}else Fe[bt]=Be;return Fe},State:{Normal:0,Unwinding:1,Rewinding:2,Disabled:3},state:0,StackSize:16384,currData:null,handleSleepReturnValue:0,exportCallStack:[],callstackFuncToId:new Map,callStackIdToFunc:new Map,funcWrappers:new Map,callStackId:0,asyncPromiseHandlers:null,sleepCallbacks:[],getCallStackId(_e){if(!xt.callstackFuncToId.has(_e)){var Fe=xt.callStackId++;xt.callstackFuncToId.set(_e,Fe),xt.callStackIdToFunc.set(Fe,_e)}return xt.callstackFuncToId.get(_e)},maybeStopUnwind(){xt.currData&&xt.state===xt.State.Unwinding&&xt.exportCallStack.length===0&&(xt.state=xt.State.Normal,Tr(De),typeof Fibers<"u"&&Fibers.trampoline())},whenDone:()=>new Promise((_e,Fe)=>{xt.asyncPromiseHandlers={resolve:_e,reject:Fe}}),allocateData(){var _e=Oe(12+xt.StackSize);return xt.setDataHeader(_e,_e+12,xt.StackSize),xt.setDataRewindFunc(_e),_e},setDataHeader(_e,Fe,pt){ae[_e>>2]=Fe,ae[_e+4>>2]=Fe+pt},setDataRewindFunc(_e){var Fe=xt.exportCallStack[0],pt=xt.getCallStackId(Fe);oe[_e+8>>2]=pt},getDataRewindFunc(_e){var Fe=oe[_e+8>>2];return xt.callStackIdToFunc.get(Fe)},doRewind(_e){var Fe=xt.getDataRewindFunc(_e);return xt.funcWrappers.get(Fe)()},handleSleep(_e){if(!Te){if(xt.state===xt.State.Normal){var Fe=!1,pt=!1;_e((bt=0)=>{if(!Te&&(xt.handleSleepReturnValue=bt,Fe=!0,pt)){xt.state=xt.State.Rewinding,Tr(()=>it(xt.currData)),typeof MainLoop<"u"&&MainLoop.func&&MainLoop.resume();var Be,$t=!1;try{Be=xt.doRewind(xt.currData)}catch(hn){Be=hn,$t=!0}var Gn=!1;if(!xt.currData){var Qt=xt.asyncPromiseHandlers;Qt&&(xt.asyncPromiseHandlers=null,($t?Qt.reject:Qt.resolve)(Be),Gn=!0)}if($t&&!Gn)throw Be}}),pt=!0,Fe||(xt.state=xt.State.Unwinding,xt.currData=xt.allocateData(),typeof MainLoop<"u"&&MainLoop.func&&MainLoop.pause(),Tr(()=>dt(xt.currData)))}else xt.state===xt.State.Rewinding?(xt.state=xt.State.Normal,Tr(Ue),He(xt.currData),xt.currData=null,xt.sleepCallbacks.forEach(Pr)):Ye(`invalid state: ${xt.state}`);return xt.handleSleepReturnValue}},handleAsync:_e=>xt.handleSleep(Fe=>{_e().then(Fe)})},tr=_e=>{const Fe=_e.length;return[Fe%128|128,Fe>>7,..._e]},nr={i:127,p:127,j:126,f:125,d:124,e:111},rr=_e=>tr(Array.from(_e,Fe=>nr[Fe])),hr=[],ho=_e=>{var Fe=hr[_e];return Fe||(hr[_e]=Fe=We.get(_e)),Fe},or=_e=>(we||(we=new WeakMap,((Fe,pt)=>{if(we)for(var bt=Fe;bt<Fe+pt;bt++){var Be=ho(bt);Be&&we.set(Be,bt)}})(0,We.length)),we.get(_e)||0),mt=[],sr=(_e,Fe)=>{We.set(_e,Fe),hr[_e]=We.get(_e)};if(y.noExitRuntime&&(yn=y.noExitRuntime),y.print&&y.print,y.printErr&&(ve=y.printErr),y.wasmBinary&&(W=y.wasmBinary),y.arguments&&y.arguments,y.thisProgram&&(D=y.thisProgram),y.preInit)for(typeof y.preInit=="function"&&(y.preInit=[y.preInit]);y.preInit.length>0;)y.preInit.shift()();y.addFunction=(_e,Fe)=>{var pt=or(_e);if(pt)return pt;var bt=mt.length?mt.pop():We.grow(1);try{sr(bt,_e)}catch($t){if(!($t instanceof TypeError))throw $t;var Be=((Gn,Qt)=>{var hn=Uint8Array.of(0,97,115,109,1,0,0,0,1,...tr([1,96,...rr(Qt.slice(1)),...rr(Qt[0]==="v"?"":Qt[0])]),2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),Sn=new WebAssembly.Module(hn);return new WebAssembly.Instance(Sn,{e:{f:Gn}}).exports.f})(_e,Fe);sr(bt,Be)}return we.set(_e,bt),bt},y.Asyncify=xt;var nn,jr={a:_e=>{var Fe=Re(),pt=ie();Ye(`stack overflow (Attempt to set SP to ${Nn(_e)}, with stack limits [${Nn(pt)} - ${Nn(Fe)}]). If you require more stack space build with -sSTACK_SIZE=<bytes>`)},e:()=>Date.now(),b:_e=>{var Fe=ne.length,pt=2147483648;if((_e>>>=0)>pt)return!1;for(var bt=1;bt<=4;bt*=2){var Be=Fe*(1+.2/bt);Be=Math.min(Be,_e+100663296);var $t=Math.min(pt,vs(Math.max(_e,Be),65536));if(Fo($t))return!0}return!1},c:(_e,Fe)=>{var pt=0,bt=0;for(var Be of Gt()){var $t=Fe+pt;ae[_e+bt>>2]=$t,pt+=po(Be,$t,1/0)+1,bt+=4}return 0},d:(_e,Fe)=>{var pt=Gt();ae[_e>>2]=pt.length;var bt=0;for(var Be of pt)bt+=Ar(Be)+1;return ae[Fe>>2]=bt,0}};function ut(){var _e;Xe(),(_e=ie())==0&&(_e+=4),ae[_e>>2]=34821223,ae[_e+4>>2]=2310721022,ae[0]=1668509029}return nn=await(async function(){function _e(pt,bt){return nn=pt.exports,nn=xt.instrumentWasmExports(nn),J=nn.f,qe(),We=nn.m,(function(Be){y.___asan_default_options=Be.h,y._init=Be.i,y._dispose=Be.j,y._getVersion=Be.k,y._setErrorCallback=Be.l,y._getMainDesc=Be.n,y._getWindowsChangedState=Be.o,y._getVarsDesc=Be.p,y._getActions=Be.q,y._malloc=Oe=Be.r,y._selectAction=Be.s,y._executeSelAction=Be.t,y._getObjects=Be.u,y._selectObject=Be.v,y._loadGameData=Be.w,y._restartGame=Be.x,y._saveGameData=Be.y,y._free=He=Be.z,y._loadSavedGameData=Be.A,y._execString=Be.B,y._execCounter=Be.C,y._execLoc=Be.D,y._execUserInput=Be.E,y._getLastError=Be.F,y._getVarValue=Be.G,y._getVarValueByIndex=Be.H,y._getVarValueByKey=Be.I,y._getVarSize=Be.J,y._setCallback=Be.K,y._freeItemsList=Be.L,y._freeObjectsList=Be.M,y._freeSaveBuffer=Be.N,y._freeStringsBuffer=Be.O,y._enableDebugMode=Be.P,y._disableDebugMode=Be.Q,y._getCurStateData=Be.R,y._getLocationsList=Be.S,y._getLocationActions=Be.T,y._getLocationCode=Be.U,y._getActionCode=Be.V,y._calculateStrExpression=Be.W,y._calculateNumExpression=Be.X,y._showWindow=Be.Y,y._getSelActionIndex=Be.Z,y._getSelObjectIndex=Be._,y._getCompiledDateTime=Be.$,y._getErrorDesc=Be.aa,y._getLocationDesc=Be.ba,y.__run_checks=Be.ca,ie=Be.da,Re=Be.ea,Xe=Be.fa,Ze=Be.ga,y.___set_stack_limits=st=Be.ha,Be.ia,Be.ja,Be.ka,Be.la,Be.ma,Be.na,Be.oa,Be.pa,Be.qa,dt=Be.ra,De=Be.sa,it=Be.ta,Ue=Be.ua})(nn),nn}var Fe={a:jr};return y.instantiateWasm?new Promise((pt,bt)=>{y.instantiateWasm(Fe,(Be,$t)=>{pt(_e(Be))})}):(be??=et(),(function(pt){return _e(pt.instance)})(await Ke(W,be,Fe)))})(),(function(){function _e(){y.calledRun=!0,Te||(Le=!0,fr(),he(),nn.g(),Q?.(y),y.onRuntimeInitialized?.(),(function(){if(he(),y.postRun)for(typeof y.postRun=="function"&&(y.postRun=[y.postRun]);y.postRun.length;)_t(y.postRun.shift());Et(Ot)})())}ut(),(function(){if(y.preRun)for(typeof y.preRun=="function"&&(y.preRun=[y.preRun]);y.preRun.length;)$n(y.preRun.shift());Et(Ht)})(),y.setStatus?(y.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>y.setStatus(""),1),_e()},1)):_e(),he()})(),Le?y:new Promise((_e,Fe)=>{Q=_e,Z=Fe})}function r$1(x){return new Promise(y=>{t$1({wasmBinary:x}).then(w=>{y(new p(w))})})}const wasmUrl=""+new URL("qsp-engine-DxU_aFt3.wasm",import.meta.url).href,mainContent$=atom(""),nextMainContent$=atom(""),isNewLoc$=atom(!1),newLocHash$=atom(""),mainScroll$=atom(0),isStatsVisible$=atom(!1),statsContent$=atom(""),statsScroll$=atom(0),isActsVisible$=atom(!1),actions$=atom([]),selectedAction$=atom(-1);function canSelectAction(x){return x>=0&&x<actions$.value.length}function selectAction(x){selectedAction$.set(x),qspApi$.value?.selectAction(x)}function execSelectedAction(){selectedAction$.set(-1),qspApi$.value?.execSelectedAction()}const isObjsVisible$=atom(!1),selectedObject$=atom(-1),objects$=atom([]);function selectObject(x){qspApi$.value?.selectObject(x)}const isCmdVisible$=atom(!1),cmdText$=atom("");function submitUserInput(){qspApi$.value?.updateUserInput(cmdText$.value)}const view$=atom({isOpen:!1,path:"",isModal:!1},x=>{const y=x.focus(C=>C.isOpen),w=x.focus(C=>C.isModal);return{open(C){x.set({isOpen:!0,path:C,isModal:w.value})},setIsModal(C){w.set(C)},close(){y.set(!1)},clear(){x.set({isOpen:!1,path:"",isModal:!1})}}}),regions$=atom({}),regionsScroll$=atom({});function reloadRegions(){const x={};for(const y of Object.keys(regions$.value))x[y]=qspApi$.value?.readVariableByKey("$qspider_region",y)??"";regions$.set(x)}const layers$=atom({});function readLayerState(x){return!!(qspApi$.value?.readVariableByKey("qspider_layers",x)??0)}function registerLayer(x){layers$.update(y=>({...y,[x]:readLayerState(x)}))}function reloadLayers(){const x={};for(const y of Object.keys(layers$.value))x[y]=readLayerState(y);layers$.set(x)}async function loadAdditionalResources(x){if(!x)return;const{styles:y,scripts:w,fonts:C}=x,P=[];y&&P.push(loadAdditionalStyles(y)),w&&P.push(loadAdditionalScripts(w)),C&&loadAdditionalFonts(C),await Promise.allSettled([...P,document.fonts.ready])}async function loadAdditionalStyles(x){const y=[];for(const w of x){const C=document.createElement("link");C.href=w,C.rel="stylesheet",C.dataset.qspiderResource="style",document.head.appendChild(C)}await Promise.allSettled(y)}async function loadAdditionalScripts(x){const y=[];for(const w of x){const C=document.createElement("script");C.type="text/javascript",C.src=w,C.dataset.qspiderResource="script";const P=defer$1();C.onload=()=>P.resolve(),C.onerror=()=>P.reject(new Error(`File not found: ${w}`)),y.push(P.promise),document.head.appendChild(C)}await Promise.allSettled(y)}function loadAdditionalFonts(x){const y=[];for(const[C,P,O,$]of x)y.push(`
    @font-face {
      font-family: "${C}";
      src: url("${P}");
      font-display: block;
      font-style: ${$||"normal"};
      font-weight: ${O||"normal"};
    }
  `);const w=document.createElement("style");w.innerText=y.join(`
`),w.dataset.qspiderResource="style",document.head.appendChild(w)}function clearAdditionalResources(){document.querySelectorAll("[data-qspider-resource]").forEach(x=>x.remove())}const BOOLEAN_ATTRIBUTES=new Set(["autofocus","autoplay","checked","controls","default","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","novalidate","open","readonly","required","reversed","selected"]),valueProcessors={href(x){return x.startsWith("javascript:")?"#":x}};function extractAttributes(x){const y={};return Array.from(x.attributes).forEach(w=>{const{name:C,value:P}=w;C!=="is"&&(C==="style"?y.style=processStyles(P):BOOLEAN_ATTRIBUTES.has(C)?y[C]=!0:y[C]=C in valueProcessors?valueProcessors[C](P):P)}),y}function processStyles(x){const y=x.split(";"),w={};for(const C of y){const[P,O]=C.trim().split(":"),$=P.replace(/^-ms-/,"ms-").replace(/-./g,D=>D.substring(1).toUpperCase());let L=O;$==="backgroundImage"&&!O.includes("url(")?L=`url("${O}")`:/^[+-]?\d+(\.\d+)?$/.test(O)&&(L=parseFloat(O)),w[$]=L}return w}const MIN_SIZE_ID="min-size-style",MAX_SIZE_ID="max-size-style",windowManager={isBrowser:!0,platform:detectPlatform(),setTitle(x){document.title=x},setIcon(x,y){document.getElementById("favicon").href=y},goFullscreen(){document.fullscreenEnabled&&document.querySelector("qsp-game-root")?.requestFullscreen().catch(()=>{function x(){document.querySelector("qsp-game-root")?.requestFullscreen(),document.removeEventListener("click",x)}document.addEventListener("click",x)})},goWindowed(){document.fullscreenEnabled&&document.exitFullscreen()},async setMinSize(x,y){const w=document.createElement("style");w.innerText=`qsp-game-root {min-width: ${x}px;min-height:${y}px;}`,w.id=MIN_SIZE_ID,document.body.appendChild(w)},unsetMinSize(){document.getElementById(MIN_SIZE_ID)?.remove()},async setMaxSize(x,y){const w=document.createElement("style");w.innerText=`qsp-game-root {max-width: ${x}px;max-height:${y}px;}`,w.id=MAX_SIZE_ID,document.body.appendChild(w)},unsetMaxSize(){document.getElementById(MAX_SIZE_ID)?.remove()},setResizable(x){},async resize(x,y){},closeWindow(){window.close()}};function detectPlatform(){const x=navigator.userAgent;return x.includes("Windows")?"Windows":x.includes("Macintosh")?"Macintosh":x.includes("Linux")?"Linux":"Unknown"}var dexie_min$1={exports:{}},dexie_min=dexie_min$1.exports,hasRequiredDexie_min;function requireDexie_min(){return hasRequiredDexie_min||(hasRequiredDexie_min=1,(function(x,y){(function(w,C){x.exports=C()})(dexie_min,function(){var w=function(M,q){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,Y){K.__proto__=Y}||function(K,Y){for(var X in Y)Object.prototype.hasOwnProperty.call(Y,X)&&(K[X]=Y[X])})(M,q)},C=function(){return(C=Object.assign||function(M){for(var q,K=1,Y=arguments.length;K<Y;K++)for(var X in q=arguments[K])Object.prototype.hasOwnProperty.call(q,X)&&(M[X]=q[X]);return M}).apply(this,arguments)};function P(M,q,K){for(var Y,X=0,te=q.length;X<te;X++)!Y&&X in q||((Y=Y||Array.prototype.slice.call(q,0,X))[X]=q[X]);return M.concat(Y||Array.prototype.slice.call(q))}var O=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:commonjsGlobal,$=Object.keys,L=Array.isArray;function D(M,q){return typeof q!="object"||$(q).forEach(function(K){M[K]=q[K]}),M}typeof Promise>"u"||O.Promise||(O.Promise=Promise);var B=Object.getPrototypeOf,U={}.hasOwnProperty;function k(M,q){return U.call(M,q)}function H(M,q){typeof q=="function"&&(q=q(B(M))),(typeof Reflect>"u"?$:Reflect.ownKeys)(q).forEach(function(K){G(M,K,q[K])})}var W=Object.defineProperty;function G(M,q,K,Y){W(M,q,D(K&&k(K,"get")&&typeof K.get=="function"?{get:K.get,set:K.set,configurable:!0}:{value:K,configurable:!0,writable:!0},Y))}function Q(M){return{from:function(q){return M.prototype=Object.create(q.prototype),G(M.prototype,"constructor",M),{extend:H.bind(null,M.prototype)}}}}var Z=Object.getOwnPropertyDescriptor,J=[].slice;function ne(M,q,K){return J.call(M,q,K)}function oe(M,q){return q(M)}function ae(M){if(!M)throw new Error("Assertion Failed")}function ve(M){O.setImmediate?setImmediate(M):setTimeout(M,0)}function Te(M,q){if(typeof q=="string"&&k(M,q))return M[q];if(!q)return M;if(typeof q!="string"){for(var K=[],Y=0,X=q.length;Y<X;++Y){var te=Te(M,q[Y]);K.push(te)}return K}var se=q.indexOf(".");if(se!==-1){var ue=M[q.substr(0,se)];return ue==null?void 0:Te(ue,q.substr(se+1))}}function re(M,q,K){if(M&&q!==void 0&&!("isFrozen"in Object&&Object.isFrozen(M)))if(typeof q!="string"&&"length"in q){ae(typeof K!="string"&&"length"in K);for(var Y=0,X=q.length;Y<X;++Y)re(M,q[Y],K[Y])}else{var te,se,ue=q.indexOf(".");ue!==-1?(te=q.substr(0,ue),(se=q.substr(ue+1))===""?K===void 0?L(M)&&!isNaN(parseInt(te))?M.splice(te,1):delete M[te]:M[te]=K:re(ue=!(ue=M[te])||!k(M,te)?M[te]={}:ue,se,K)):K===void 0?L(M)&&!isNaN(parseInt(q))?M.splice(q,1):delete M[q]:M[q]=K}}function he(M){var q,K={};for(q in M)k(M,q)&&(K[q]=M[q]);return K}var be=[].concat;function Le(M){return be.apply([],M)}var Kn="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Le([8,16,32,64].map(function(M){return["Int","Uint","Float"].map(function(q){return q+M+"Array"})}))).filter(function(M){return O[M]}),qe=new Set(Kn.map(function(M){return O[M]})),Ye=null;function et(M){return Ye=new WeakMap,M=(function q(K){if(!K||typeof K!="object")return K;var Y=Ye.get(K);if(Y)return Y;if(L(K)){Y=[],Ye.set(K,Y);for(var X=0,te=K.length;X<te;++X)Y.push(q(K[X]))}else if(qe.has(K.constructor))Y=K;else{var se,ue=B(K);for(se in Y=ue===Object.prototype?{}:Object.create(ue),Ye.set(K,Y),K)k(K,se)&&(Y[se]=q(K[se]))}return Y})(M),Ye=null,M}var je={}.toString;function Ke(M){return je.call(M).slice(8,-1)}var Ve=typeof Symbol<"u"?Symbol.iterator:"@@iterator",We=typeof Ve=="symbol"?function(M){var q;return M!=null&&(q=M[Ve])&&q.apply(M)}:function(){return null};function we(M,q){return q=M.indexOf(q),0<=q&&M.splice(q,1),0<=q}var Oe={};function He(M){var q,K,Y,X;if(arguments.length===1){if(L(M))return M.slice();if(this===Oe&&typeof M=="string")return[M];if(X=We(M)){for(K=[];!(Y=X.next()).done;)K.push(Y.value);return K}if(M==null)return[M];if(typeof(q=M.length)!="number")return[M];for(K=new Array(q);q--;)K[q]=M[q];return K}for(q=arguments.length,K=new Array(q);q--;)K[q]=arguments[q];return K}var ie=typeof Symbol<"u"?function(M){return M[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},pr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Fn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(pr),Re={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Xe(M,q){this.name=M,this.message=q}function Ze(M,q){return M+". Errors: "+Object.keys(q).map(function(K){return q[K].toString()}).filter(function(K,Y,X){return X.indexOf(K)===Y}).join(`
`)}function st(M,q,K,Y){this.failures=q,this.failedKeys=Y,this.successCount=K,this.message=Ze(M,q)}function dt(M,q){this.name="BulkError",this.failures=Object.keys(q).map(function(K){return q[K]}),this.failuresByPos=q,this.message=Ze(M,this.failures)}Q(Xe).from(Error).extend({toString:function(){return this.name+": "+this.message}}),Q(st).from(Xe),Q(dt).from(Xe);var De=Fn.reduce(function(M,q){return M[q]=q+"Error",M},{}),it=Xe,Ue=Fn.reduce(function(M,q){var K=q+"Error";function Y(X,te){this.name=K,X?typeof X=="string"?(this.message="".concat(X).concat(te?`
 `+te:""),this.inner=te||null):typeof X=="object"&&(this.message="".concat(X.name," ").concat(X.message),this.inner=X):(this.message=Re[q]||K,this.inner=null)}return Q(Y).from(it),M[q]=Y,M},{});Ue.Syntax=SyntaxError,Ue.Type=TypeError,Ue.Range=RangeError;var Et=pr.reduce(function(M,q){return M[q+"Error"]=Ue[q],M},{}),Ot=Fn.reduce(function(M,q){return["Syntax","Type","Range"].indexOf(q)===-1&&(M[q+"Error"]=Ue[q]),M},{});function _t(){}function Ht(M){return M}function $n(M,q){return M==null||M===Ht?q:function(K){return q(M(K))}}function yn(M,q){return function(){M.apply(this,arguments),q.apply(this,arguments)}}function Nn(M,q){return M===_t?q:function(){var K=M.apply(this,arguments);K!==void 0&&(arguments[0]=K);var Y=this.onsuccess,X=this.onerror;this.onsuccess=null,this.onerror=null;var te=q.apply(this,arguments);return Y&&(this.onsuccess=this.onsuccess?yn(Y,this.onsuccess):Y),X&&(this.onerror=this.onerror?yn(X,this.onerror):X),te!==void 0?te:K}}function fr(M,q){return M===_t?q:function(){M.apply(this,arguments);var K=this.onsuccess,Y=this.onerror;this.onsuccess=this.onerror=null,q.apply(this,arguments),K&&(this.onsuccess=this.onsuccess?yn(K,this.onsuccess):K),Y&&(this.onerror=this.onerror?yn(Y,this.onerror):Y)}}function vs(M,q){return M===_t?q:function(K){var Y=M.apply(this,arguments);D(K,Y);var X=this.onsuccess,te=this.onerror;return this.onsuccess=null,this.onerror=null,K=q.apply(this,arguments),X&&(this.onsuccess=this.onsuccess?yn(X,this.onsuccess):X),te&&(this.onerror=this.onerror?yn(te,this.onerror):te),Y===void 0?K===void 0?void 0:K:D(Y,K)}}function Fo(M,q){return M===_t?q:function(){return q.apply(this,arguments)!==!1&&M.apply(this,arguments)}}function Wn(M,q){return M===_t?q:function(){var K=M.apply(this,arguments);if(K&&typeof K.then=="function"){for(var Y=this,X=arguments.length,te=new Array(X);X--;)te[X]=arguments[X];return K.then(function(){return q.apply(Y,te)})}return q.apply(this,arguments)}}Ot.ModifyError=st,Ot.DexieError=Xe,Ot.BulkError=dt;var Gt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function po(M){Gt=M}var Ar={},Tr=100,Kn=typeof Promise>"u"?[]:(function(){var M=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[M,B(M),M];var q=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[q,B(q),M]})(),pr=Kn[0],Fn=Kn[1],Kn=Kn[2],Fn=Fn&&Fn.then,zn=pr&&pr.constructor,Pr=!!Kn,xt=function(M,q){sr.push([M,q]),nr&&(queueMicrotask(Gn),nr=!1)},tr=!0,nr=!0,rr=[],hr=[],ho=Ht,or={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:_t,pgp:!1,env:{},finalize:_t},mt=or,sr=[],nn=0,jr=[];function ut(M){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var q=this._PSD=mt;if(typeof M!="function"){if(M!==Ar)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&pt(this,this._value))}this._state=null,this._value=null,++q.ref,(function K(Y,X){try{X(function(te){if(Y._state===null){if(te===Y)throw new TypeError("A promise cannot be resolved with itself.");var se=Y._lib&&Qt();te&&typeof te.then=="function"?K(Y,function(ue,fe){te instanceof ut?te._then(ue,fe):te.then(ue,fe)}):(Y._state=!0,Y._value=te,bt(Y)),se&&hn()}},pt.bind(null,Y))}catch(te){pt(Y,te)}})(this,M)}var _e={get:function(){var M=mt,q=mo;function K(Y,X){var te=this,se=!M.global&&(M!==mt||q!==mo),ue=se&&!bn(),fe=new ut(function(me,xe){Be(te,new Fe(ti(Y,M,se,ue),ti(X,M,se,ue),me,xe,M))});return this._consoleTask&&(fe._consoleTask=this._consoleTask),fe}return K.prototype=Ar,K},set:function(M){G(this,"then",M&&M.prototype===Ar?_e:{get:function(){return M},set:_e.set})}};function Fe(M,q,K,Y,X){this.onFulfilled=typeof M=="function"?M:null,this.onRejected=typeof q=="function"?q:null,this.resolve=K,this.reject=Y,this.psd=X}function pt(M,q){var K,Y;hr.push(q),M._state===null&&(K=M._lib&&Qt(),q=ho(q),M._state=!1,M._value=q,Y=M,rr.some(function(X){return X._value===Y._value})||rr.push(Y),bt(M),K&&hn())}function bt(M){var q=M._listeners;M._listeners=[];for(var K=0,Y=q.length;K<Y;++K)Be(M,q[K]);var X=M._PSD;--X.ref||X.finalize(),nn===0&&(++nn,xt(function(){--nn==0&&Sn()},[]))}function Be(M,q){if(M._state!==null){var K=M._state?q.onFulfilled:q.onRejected;if(K===null)return(M._state?q.resolve:q.reject)(M._value);++q.psd.ref,++nn,xt($t,[K,M,q])}else M._listeners.push(q)}function $t(M,q,K){try{var Y,X=q._value;!q._state&&hr.length&&(hr=[]),Y=Gt&&q._consoleTask?q._consoleTask.run(function(){return M(X)}):M(X),q._state||hr.indexOf(X)!==-1||(function(te){for(var se=rr.length;se;)if(rr[--se]._value===te._value)return rr.splice(se,1)})(q),K.resolve(Y)}catch(te){K.reject(te)}finally{--nn==0&&Sn(),--K.psd.ref||K.psd.finalize()}}function Gn(){Nr(or,function(){Qt()&&hn()})}function Qt(){var M=tr;return nr=tr=!1,M}function hn(){var M,q,K;do for(;0<sr.length;)for(M=sr,sr=[],K=M.length,q=0;q<K;++q){var Y=M[q];Y[0].apply(null,Y[1])}while(0<sr.length);nr=tr=!0}function Sn(){var M=rr;rr=[],M.forEach(function(Y){Y._PSD.onunhandled.call(null,Y._value,Y)});for(var q=jr.slice(0),K=q.length;K;)q[--K]()}function en(M){return new ut(Ar,!1,M)}function Ft(M,q){var K=mt;return function(){var Y=Qt(),X=mt;try{return $r(K,!0),M.apply(this,arguments)}catch(te){q&&q(te)}finally{$r(X,!1),Y&&hn()}}}H(ut.prototype,{then:_e,_then:function(M,q){Be(this,new Fe(null,null,M,q,mt))},catch:function(M){if(arguments.length===1)return this.then(null,M);var q=M,K=arguments[1];return typeof q=="function"?this.then(null,function(Y){return(Y instanceof q?K:en)(Y)}):this.then(null,function(Y){return(Y&&Y.name===q?K:en)(Y)})},finally:function(M){return this.then(function(q){return ut.resolve(M()).then(function(){return q})},function(q){return ut.resolve(M()).then(function(){return en(q)})})},timeout:function(M,q){var K=this;return M<1/0?new ut(function(Y,X){var te=setTimeout(function(){return X(new Ue.Timeout(q))},M);K.then(Y,X).finally(clearTimeout.bind(null,te))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&G(ut.prototype,Symbol.toStringTag,"Dexie.Promise"),or.env=ei(),H(ut,{all:function(){var M=He.apply(null,arguments).map(Ho);return new ut(function(q,K){M.length===0&&q([]);var Y=M.length;M.forEach(function(X,te){return ut.resolve(X).then(function(se){M[te]=se,--Y||q(M)},K)})})},resolve:function(M){return M instanceof ut?M:M&&typeof M.then=="function"?new ut(function(q,K){M.then(q,K)}):new ut(Ar,!0,M)},reject:en,race:function(){var M=He.apply(null,arguments).map(Ho);return new ut(function(q,K){M.map(function(Y){return ut.resolve(Y).then(q,K)})})},PSD:{get:function(){return mt},set:function(M){return mt=M}},totalEchoes:{get:function(){return mo}},newPSD:Or,usePSD:Nr,scheduler:{get:function(){return xt},set:function(M){xt=M}},rejectionMapper:{get:function(){return ho},set:function(M){ho=M}},follow:function(M,q){return new ut(function(K,Y){return Or(function(X,te){var se=mt;se.unhandleds=[],se.onunhandled=te,se.finalize=yn(function(){var ue,fe=this;ue=function(){fe.unhandleds.length===0?X():te(fe.unhandleds[0])},jr.push(function me(){ue(),jr.splice(jr.indexOf(me),1)}),++nn,xt(function(){--nn==0&&Sn()},[])},se.finalize),M()},q,K,Y)})}}),zn&&(zn.allSettled&&G(ut,"allSettled",function(){var M=He.apply(null,arguments).map(Ho);return new ut(function(q){M.length===0&&q([]);var K=M.length,Y=new Array(K);M.forEach(function(X,te){return ut.resolve(X).then(function(se){return Y[te]={status:"fulfilled",value:se}},function(se){return Y[te]={status:"rejected",reason:se}}).then(function(){return--K||q(Y)})})})}),zn.any&&typeof AggregateError<"u"&&G(ut,"any",function(){var M=He.apply(null,arguments).map(Ho);return new ut(function(q,K){M.length===0&&K(new AggregateError([]));var Y=M.length,X=new Array(Y);M.forEach(function(te,se){return ut.resolve(te).then(function(ue){return q(ue)},function(ue){X[se]=ue,--Y||K(new AggregateError(X))})})})}),zn.withResolvers&&(ut.withResolvers=zn.withResolvers));var sn={awaits:0,echoes:0,id:0},Bo=0,Kr=[],zr=0,mo=0,za=0;function Or(M,q,K,Y){var X=mt,te=Object.create(X);return te.parent=X,te.ref=0,te.global=!1,te.id=++za,or.env,te.env=Pr?{Promise:ut,PromiseProp:{value:ut,configurable:!0,writable:!0},all:ut.all,race:ut.race,allSettled:ut.allSettled,any:ut.any,resolve:ut.resolve,reject:ut.reject}:{},q&&D(te,q),++X.ref,te.finalize=function(){--this.parent.ref||this.parent.finalize()},Y=Nr(te,M,K,Y),te.ref===0&&te.finalize(),Y}function go(){return sn.id||(sn.id=++Bo),++sn.awaits,sn.echoes+=Tr,sn.id}function bn(){return!!sn.awaits&&(--sn.awaits==0&&(sn.id=0),sn.echoes=sn.awaits*Tr,!0)}function Ho(M){return sn.echoes&&M&&M.constructor===zn?(go(),M.then(function(q){return bn(),q},function(q){return bn(),Yt(q)})):M}function Mi(){var M=Kr[Kr.length-1];Kr.pop(),$r(M,!1)}function $r(M,q){var K,Y=mt;(q?!sn.echoes||zr++&&M===mt:!zr||--zr&&M===mt)||queueMicrotask(q?(function(X){++mo,sn.echoes&&--sn.echoes!=0||(sn.echoes=sn.awaits=sn.id=0),Kr.push(mt),$r(X,!0)}).bind(null,M):Mi),M!==mt&&(mt=M,Y===or&&(or.env=ei()),Pr&&(K=or.env.Promise,q=M.env,(Y.global||M.global)&&(Object.defineProperty(O,"Promise",q.PromiseProp),K.all=q.all,K.race=q.race,K.resolve=q.resolve,K.reject=q.reject,q.allSettled&&(K.allSettled=q.allSettled),q.any&&(K.any=q.any))))}function ei(){var M=O.Promise;return Pr?{Promise:M,PromiseProp:Object.getOwnPropertyDescriptor(O,"Promise"),all:M.all,race:M.race,allSettled:M.allSettled,any:M.any,resolve:M.resolve,reject:M.reject}:{}}function Nr(M,q,K,Y,X){var te=mt;try{return $r(M,!0),q(K,Y,X)}finally{$r(te,!1)}}function ti(M,q,K,Y){return typeof M!="function"?M:function(){var X=mt;K&&go(),$r(q,!0);try{return M.apply(this,arguments)}finally{$r(X,!1),Y&&queueMicrotask(bn)}}}function ys(M){Promise===zn&&sn.echoes===0?zr===0?M():enqueueNativeMicroTask(M):setTimeout(M,0)}(""+Fn).indexOf("[native code]")===-1&&(go=bn=_t);var Yt=ut.reject,Gr="",Dt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Di="String expected.",Ir=[],qo="__dbnames",xo="readonly",ni="readwrite";function kr(M,q){return M?q?function(){return M.apply(this,arguments)&&q.apply(this,arguments)}:M:q}var Uo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function In(M){return typeof M!="string"||/\./.test(M)?function(q){return q}:function(q){return q[M]===void 0&&M in q&&delete(q=et(q))[M],q}}function Fi(){throw Ue.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Rt(M,q){try{var K=Bi(M),Y=Bi(q);if(K!==Y)return K==="Array"?1:Y==="Array"?-1:K==="binary"?1:Y==="binary"?-1:K==="string"?1:Y==="string"?-1:K==="Date"?1:Y!=="Date"?NaN:-1;switch(K){case"number":case"Date":case"string":return q<M?1:M<q?-1:0;case"binary":return(function(X,te){for(var se=X.length,ue=te.length,fe=se<ue?se:ue,me=0;me<fe;++me)if(X[me]!==te[me])return X[me]<te[me]?-1:1;return se===ue?0:se<ue?-1:1})(Hi(M),Hi(q));case"Array":return(function(X,te){for(var se=X.length,ue=te.length,fe=se<ue?se:ue,me=0;me<fe;++me){var xe=Rt(X[me],te[me]);if(xe!==0)return xe}return se===ue?0:se<ue?-1:1})(M,q)}}catch{}return NaN}function Bi(M){var q=typeof M;return q!="object"?q:ArrayBuffer.isView(M)?"binary":(M=Ke(M),M==="ArrayBuffer"?"binary":M)}function Hi(M){return M instanceof Uint8Array?M:ArrayBuffer.isView(M)?new Uint8Array(M.buffer,M.byteOffset,M.byteLength):new Uint8Array(M)}function Es(M,q,K){var Y=M.schema.yProps;return Y?(q&&0<K.numFailures&&(q=q.filter(function(X,te){return!K.failures[te]})),Promise.all(Y.map(function(X){return X=X.updatesTable,q?M.db.table(X).where("k").anyOf(q).delete():M.db.table(X).clear()})).then(function(){return K})):K}var Vo=(Bt.prototype._trans=function(M,q,K){var Y=this._tx||mt.trans,X=this.name,te=Gt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(M==="readonly"?"read":"write"," ").concat(this.name));function se(me,xe,ce){if(!ce.schema[X])throw new Ue.NotFound("Table "+X+" not part of transaction");return q(ce.idbtrans,ce)}var ue=Qt();try{var fe=Y&&Y.db._novip===this.db._novip?Y===mt.trans?Y._promise(M,se,K):Or(function(){return Y._promise(M,se,K)},{trans:Y,transless:mt.transless||mt}):(function me(xe,ce,Ce,pe){if(xe.idbdb&&(xe._state.openComplete||mt.letThrough||xe._vip)){var ye=xe._createTransaction(ce,Ce,xe._dbSchema);try{ye.create(),xe._state.PR1398_maxLoop=3}catch(Se){return Se.name===De.InvalidState&&xe.isOpen()&&0<--xe._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),xe.close({disableAutoOpen:!1}),xe.open().then(function(){return me(xe,ce,Ce,pe)})):Yt(Se)}return ye._promise(ce,function(Se,Ee){return Or(function(){return mt.trans=ye,pe(Se,Ee,ye)})}).then(function(Se){if(ce==="readwrite")try{ye.idbtrans.commit()}catch{}return ce==="readonly"?Se:ye._completion.then(function(){return Se})})}if(xe._state.openComplete)return Yt(new Ue.DatabaseClosed(xe._state.dbOpenError));if(!xe._state.isBeingOpened){if(!xe._state.autoOpen)return Yt(new Ue.DatabaseClosed);xe.open().catch(_t)}return xe._state.dbReadyPromise.then(function(){return me(xe,ce,Ce,pe)})})(this.db,M,[this.name],se);return te&&(fe._consoleTask=te,fe=fe.catch(function(me){return console.trace(me),Yt(me)})),fe}finally{ue&&hn()}},Bt.prototype.get=function(M,q){var K=this;return M&&M.constructor===Object?this.where(M).first(q):M==null?Yt(new Ue.Type("Invalid argument to Table.get()")):this._trans("readonly",function(Y){return K.core.get({trans:Y,key:M}).then(function(X){return K.hook.reading.fire(X)})}).then(q)},Bt.prototype.where=function(M){if(typeof M=="string")return new this.db.WhereClause(this,M);if(L(M))return new this.db.WhereClause(this,"[".concat(M.join("+"),"]"));var q=$(M);if(q.length===1)return this.where(q[0]).equals(M[q[0]]);var K=this.schema.indexes.concat(this.schema.primKey).filter(function(ue){if(ue.compound&&q.every(function(me){return 0<=ue.keyPath.indexOf(me)})){for(var fe=0;fe<q.length;++fe)if(q.indexOf(ue.keyPath[fe])===-1)return!1;return!0}return!1}).sort(function(ue,fe){return ue.keyPath.length-fe.keyPath.length})[0];if(K&&this.db._maxKey!==Gr){var te=K.keyPath.slice(0,q.length);return this.where(te).equals(te.map(function(fe){return M[fe]}))}!K&&Gt&&console.warn("The query ".concat(JSON.stringify(M)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(q.join("+"),"]"));var Y=this.schema.idxByName;function X(ue,fe){return Rt(ue,fe)===0}var se=q.reduce(function(ce,fe){var me=ce[0],xe=ce[1],ce=Y[fe],Ce=M[fe];return[me||ce,me||!ce?kr(xe,ce&&ce.multi?function(pe){return pe=Te(pe,fe),L(pe)&&pe.some(function(ye){return X(Ce,ye)})}:function(pe){return X(Ce,Te(pe,fe))}):xe]},[null,null]),te=se[0],se=se[1];return te?this.where(te.name).equals(M[te.keyPath]).filter(se):K?this.filter(se):this.where(q).equals("")},Bt.prototype.filter=function(M){return this.toCollection().and(M)},Bt.prototype.count=function(M){return this.toCollection().count(M)},Bt.prototype.offset=function(M){return this.toCollection().offset(M)},Bt.prototype.limit=function(M){return this.toCollection().limit(M)},Bt.prototype.each=function(M){return this.toCollection().each(M)},Bt.prototype.toArray=function(M){return this.toCollection().toArray(M)},Bt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Bt.prototype.orderBy=function(M){return new this.db.Collection(new this.db.WhereClause(this,L(M)?"[".concat(M.join("+"),"]"):M))},Bt.prototype.reverse=function(){return this.toCollection().reverse()},Bt.prototype.mapToClass=function(M){var q,K=this.db,Y=this.name;function X(){return q!==null&&q.apply(this,arguments)||this}(this.schema.mappedClass=M).prototype instanceof Fi&&((function(fe,me){if(typeof me!="function"&&me!==null)throw new TypeError("Class extends value "+String(me)+" is not a constructor or null");function xe(){this.constructor=fe}w(fe,me),fe.prototype=me===null?Object.create(me):(xe.prototype=me.prototype,new xe)})(X,q=M),Object.defineProperty(X.prototype,"db",{get:function(){return K},enumerable:!1,configurable:!0}),X.prototype.table=function(){return Y},M=X);for(var te=new Set,se=M.prototype;se;se=B(se))Object.getOwnPropertyNames(se).forEach(function(fe){return te.add(fe)});function ue(fe){if(!fe)return fe;var me,xe=Object.create(M.prototype);for(me in fe)if(!te.has(me))try{xe[me]=fe[me]}catch{}return xe}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=ue,this.hook("reading",ue),M},Bt.prototype.defineClass=function(){return this.mapToClass(function(M){D(this,M)})},Bt.prototype.add=function(M,q){var K=this,Y=this.schema.primKey,X=Y.auto,te=Y.keyPath,se=M;return te&&X&&(se=In(te)(M)),this._trans("readwrite",function(ue){return K.core.mutate({trans:ue,type:"add",keys:q!=null?[q]:null,values:[se]})}).then(function(ue){return ue.numFailures?ut.reject(ue.failures[0]):ue.lastResult}).then(function(ue){if(te)try{re(M,te,ue)}catch{}return ue})},Bt.prototype.update=function(M,q){return typeof M!="object"||L(M)?this.where(":id").equals(M).modify(q):(M=Te(M,this.schema.primKey.keyPath),M===void 0?Yt(new Ue.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(M).modify(q))},Bt.prototype.put=function(M,q){var K=this,Y=this.schema.primKey,X=Y.auto,te=Y.keyPath,se=M;return te&&X&&(se=In(te)(M)),this._trans("readwrite",function(ue){return K.core.mutate({trans:ue,type:"put",values:[se],keys:q!=null?[q]:null})}).then(function(ue){return ue.numFailures?ut.reject(ue.failures[0]):ue.lastResult}).then(function(ue){if(te)try{re(M,te,ue)}catch{}return ue})},Bt.prototype.delete=function(M){var q=this;return this._trans("readwrite",function(K){return q.core.mutate({trans:K,type:"delete",keys:[M]}).then(function(Y){return Es(q,[M],Y)}).then(function(Y){return Y.numFailures?ut.reject(Y.failures[0]):void 0})})},Bt.prototype.clear=function(){var M=this;return this._trans("readwrite",function(q){return M.core.mutate({trans:q,type:"deleteRange",range:Uo}).then(function(K){return Es(M,null,K)})}).then(function(q){return q.numFailures?ut.reject(q.failures[0]):void 0})},Bt.prototype.bulkGet=function(M){var q=this;return this._trans("readonly",function(K){return q.core.getMany({keys:M,trans:K}).then(function(Y){return Y.map(function(X){return q.hook.reading.fire(X)})})})},Bt.prototype.bulkAdd=function(M,q,K){var Y=this,X=Array.isArray(q)?q:void 0,te=(K=K||(X?void 0:q))?K.allKeys:void 0;return this._trans("readwrite",function(se){var me=Y.schema.primKey,ue=me.auto,me=me.keyPath;if(me&&X)throw new Ue.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(X&&X.length!==M.length)throw new Ue.InvalidArgument("Arguments objects and keys must have the same length");var fe=M.length,me=me&&ue?M.map(In(me)):M;return Y.core.mutate({trans:se,type:"add",keys:X,values:me,wantResults:te}).then(function(ye){var ce=ye.numFailures,Ce=ye.results,pe=ye.lastResult,ye=ye.failures;if(ce===0)return te?Ce:pe;throw new dt("".concat(Y.name,".bulkAdd(): ").concat(ce," of ").concat(fe," operations failed"),ye)})})},Bt.prototype.bulkPut=function(M,q,K){var Y=this,X=Array.isArray(q)?q:void 0,te=(K=K||(X?void 0:q))?K.allKeys:void 0;return this._trans("readwrite",function(se){var me=Y.schema.primKey,ue=me.auto,me=me.keyPath;if(me&&X)throw new Ue.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(X&&X.length!==M.length)throw new Ue.InvalidArgument("Arguments objects and keys must have the same length");var fe=M.length,me=me&&ue?M.map(In(me)):M;return Y.core.mutate({trans:se,type:"put",keys:X,values:me,wantResults:te}).then(function(ye){var ce=ye.numFailures,Ce=ye.results,pe=ye.lastResult,ye=ye.failures;if(ce===0)return te?Ce:pe;throw new dt("".concat(Y.name,".bulkPut(): ").concat(ce," of ").concat(fe," operations failed"),ye)})})},Bt.prototype.bulkUpdate=function(M){var q=this,K=this.core,Y=M.map(function(se){return se.key}),X=M.map(function(se){return se.changes}),te=[];return this._trans("readwrite",function(se){return K.getMany({trans:se,keys:Y,cache:"clone"}).then(function(ue){var fe=[],me=[];M.forEach(function(ce,Ce){var pe=ce.key,ye=ce.changes,Se=ue[Ce];if(Se){for(var Ee=0,Ae=Object.keys(ye);Ee<Ae.length;Ee++){var Ie=Ae[Ee],ke=ye[Ie];if(Ie===q.schema.primKey.keyPath){if(Rt(ke,pe)!==0)throw new Ue.Constraint("Cannot update primary key in bulkUpdate()")}else re(Se,Ie,ke)}te.push(Ce),fe.push(pe),me.push(Se)}});var xe=fe.length;return K.mutate({trans:se,type:"put",keys:fe,values:me,updates:{keys:Y,changeSpecs:X}}).then(function(ce){var Ce=ce.numFailures,pe=ce.failures;if(Ce===0)return xe;for(var ye=0,Se=Object.keys(pe);ye<Se.length;ye++){var Ee,Ae=Se[ye],Ie=te[Number(Ae)];Ie!=null&&(Ee=pe[Ae],delete pe[Ae],pe[Ie]=Ee)}throw new dt("".concat(q.name,".bulkUpdate(): ").concat(Ce," of ").concat(xe," operations failed"),pe)})})})},Bt.prototype.bulkDelete=function(M){var q=this,K=M.length;return this._trans("readwrite",function(Y){return q.core.mutate({trans:Y,type:"delete",keys:M}).then(function(X){return Es(q,M,X)})}).then(function(se){var X=se.numFailures,te=se.lastResult,se=se.failures;if(X===0)return te;throw new dt("".concat(q.name,".bulkDelete(): ").concat(X," of ").concat(K," operations failed"),se)})},Bt);function Bt(){}function mr(M){function q(se,ue){if(ue){for(var fe=arguments.length,me=new Array(fe-1);--fe;)me[fe-1]=arguments[fe];return K[se].subscribe.apply(null,me),M}if(typeof se=="string")return K[se]}var K={};q.addEventType=te;for(var Y=1,X=arguments.length;Y<X;++Y)te(arguments[Y]);return q;function te(se,ue,fe){if(typeof se!="object"){var me;ue=ue||Fo;var xe={subscribers:[],fire:fe=fe||_t,subscribe:function(ce){xe.subscribers.indexOf(ce)===-1&&(xe.subscribers.push(ce),xe.fire=ue(xe.fire,ce))},unsubscribe:function(ce){xe.subscribers=xe.subscribers.filter(function(Ce){return Ce!==ce}),xe.fire=xe.subscribers.reduce(ue,fe)}};return K[se]=q[se]=xe}$(me=se).forEach(function(ce){var Ce=me[ce];if(L(Ce))te(ce,me[ce][0],me[ce][1]);else{if(Ce!=="asap")throw new Ue.InvalidArgument("Invalid event config");var pe=te(ce,Ht,function(){for(var ye=arguments.length,Se=new Array(ye);ye--;)Se[ye]=arguments[ye];pe.subscribers.forEach(function(Ee){ve(function(){Ee.apply(null,Se)})})})}})}}function Lr(M,q){return Q(q).from({prototype:M}),q}function vo(M,q){return!(M.filter||M.algorithm||M.or)&&(q?M.justLimit:!M.replayFilter)}function ri(M,q){M.filter=kr(M.filter,q)}function Wo(M,q,K){var Y=M.replayFilter;M.replayFilter=Y?function(){return kr(Y(),q())}:q,M.justLimit=K&&!Y}function Ko(M,q){if(M.isPrimKey)return q.primaryKey;var K=q.getIndexByKeyPath(M.index);if(!K)throw new Ue.Schema("KeyPath "+M.index+" on object store "+q.name+" is not indexed");return K}function _s(M,q,K){var Y=Ko(M,q.schema);return q.openCursor({trans:K,values:!M.keysOnly,reverse:M.dir==="prev",unique:!!M.unique,query:{index:Y,range:M.range}})}function Mr(M,q,K,Y){var X=M.replayFilter?kr(M.filter,M.replayFilter()):M.filter;if(M.or){var te={},se=function(ue,fe,me){var xe,ce;X&&!X(fe,me,function(Ce){return fe.stop(Ce)},function(Ce){return fe.fail(Ce)})||((ce=""+(xe=fe.primaryKey))=="[object ArrayBuffer]"&&(ce=""+new Uint8Array(xe)),k(te,ce)||(te[ce]=!0,q(ue,fe,me)))};return Promise.all([M.or._iterate(se,K),qi(_s(M,Y,K),M.algorithm,se,!M.keysOnly&&M.valueMapper)])}return qi(_s(M,Y,K),kr(M.algorithm,X),q,!M.keysOnly&&M.valueMapper)}function qi(M,q,K,Y){var X=Ft(Y?function(te,se,ue){return K(Y(te),se,ue)}:K);return M.then(function(te){if(te)return te.start(function(){var se=function(){return te.continue()};q&&!q(te,function(ue){return se=ue},function(ue){te.stop(ue),se=_t},function(ue){te.fail(ue),se=_t})||X(te.value,te,function(ue){return se=ue}),se()})})}var Qr=(Lt.prototype.execute=function(M){var q=this["@@propmod"];if(q.add!==void 0){var K=q.add;if(L(K))return P(P([],L(M)?M:[],!0),K).sort();if(typeof K=="number")return(Number(M)||0)+K;if(typeof K=="bigint")try{return BigInt(M)+K}catch{return BigInt(0)+K}throw new TypeError("Invalid term ".concat(K))}if(q.remove!==void 0){var Y=q.remove;if(L(Y))return L(M)?M.filter(function(X){return!Y.includes(X)}).sort():[];if(typeof Y=="number")return Number(M)-Y;if(typeof Y=="bigint")try{return BigInt(M)-Y}catch{return BigInt(0)-Y}throw new TypeError("Invalid subtrahend ".concat(Y))}return K=(K=q.replacePrefix)===null||K===void 0?void 0:K[0],K&&typeof M=="string"&&M.startsWith(K)?q.replacePrefix[1]+M.substring(K.length):M},Lt);function Lt(M){this["@@propmod"]=M}var Ui=(It.prototype._read=function(M,q){var K=this._ctx;return K.error?K.table._trans(null,Yt.bind(null,K.error)):K.table._trans("readonly",M).then(q)},It.prototype._write=function(M){var q=this._ctx;return q.error?q.table._trans(null,Yt.bind(null,q.error)):q.table._trans("readwrite",M,"locked")},It.prototype._addAlgorithm=function(M){var q=this._ctx;q.algorithm=kr(q.algorithm,M)},It.prototype._iterate=function(M,q){return Mr(this._ctx,M,q,this._ctx.table.core)},It.prototype.clone=function(M){var q=Object.create(this.constructor.prototype),K=Object.create(this._ctx);return M&&D(K,M),q._ctx=K,q},It.prototype.raw=function(){return this._ctx.valueMapper=null,this},It.prototype.each=function(M){var q=this._ctx;return this._read(function(K){return Mr(q,M,K,q.table.core)})},It.prototype.count=function(M){var q=this;return this._read(function(K){var Y=q._ctx,X=Y.table.core;if(vo(Y,!0))return X.count({trans:K,query:{index:Ko(Y,X.schema),range:Y.range}}).then(function(se){return Math.min(se,Y.limit)});var te=0;return Mr(Y,function(){return++te,!1},K,X).then(function(){return te})}).then(M)},It.prototype.sortBy=function(M,q){var K=M.split(".").reverse(),Y=K[0],X=K.length-1;function te(fe,me){return me?te(fe[K[me]],me-1):fe[Y]}var se=this._ctx.dir==="next"?1:-1;function ue(fe,me){return Rt(te(fe,X),te(me,X))*se}return this.toArray(function(fe){return fe.sort(ue)}).then(q)},It.prototype.toArray=function(M){var q=this;return this._read(function(K){var Y=q._ctx;if(Y.dir==="next"&&vo(Y,!0)&&0<Y.limit){var X=Y.valueMapper,te=Ko(Y,Y.table.core.schema);return Y.table.core.query({trans:K,limit:Y.limit,values:!0,query:{index:te,range:Y.range}}).then(function(ue){return ue=ue.result,X?ue.map(X):ue})}var se=[];return Mr(Y,function(ue){return se.push(ue)},K,Y.table.core).then(function(){return se})},M)},It.prototype.offset=function(M){var q=this._ctx;return M<=0||(q.offset+=M,vo(q)?Wo(q,function(){var K=M;return function(Y,X){return K===0||(K===1?--K:X(function(){Y.advance(K),K=0}),!1)}}):Wo(q,function(){var K=M;return function(){return--K<0}})),this},It.prototype.limit=function(M){return this._ctx.limit=Math.min(this._ctx.limit,M),Wo(this._ctx,function(){var q=M;return function(K,Y,X){return--q<=0&&Y(X),0<=q}},!0),this},It.prototype.until=function(M,q){return ri(this._ctx,function(K,Y,X){return!M(K.value)||(Y(X),q)}),this},It.prototype.first=function(M){return this.limit(1).toArray(function(q){return q[0]}).then(M)},It.prototype.last=function(M){return this.reverse().first(M)},It.prototype.filter=function(M){var q;return ri(this._ctx,function(K){return M(K.value)}),(q=this._ctx).isMatch=kr(q.isMatch,M),this},It.prototype.and=function(M){return this.filter(M)},It.prototype.or=function(M){return new this.db.WhereClause(this._ctx.table,M,this)},It.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},It.prototype.desc=function(){return this.reverse()},It.prototype.eachKey=function(M){var q=this._ctx;return q.keysOnly=!q.isMatch,this.each(function(K,Y){M(Y.key,Y)})},It.prototype.eachUniqueKey=function(M){return this._ctx.unique="unique",this.eachKey(M)},It.prototype.eachPrimaryKey=function(M){var q=this._ctx;return q.keysOnly=!q.isMatch,this.each(function(K,Y){M(Y.primaryKey,Y)})},It.prototype.keys=function(M){var q=this._ctx;q.keysOnly=!q.isMatch;var K=[];return this.each(function(Y,X){K.push(X.key)}).then(function(){return K}).then(M)},It.prototype.primaryKeys=function(M){var q=this._ctx;if(q.dir==="next"&&vo(q,!0)&&0<q.limit)return this._read(function(Y){var X=Ko(q,q.table.core.schema);return q.table.core.query({trans:Y,values:!1,limit:q.limit,query:{index:X,range:q.range}})}).then(function(Y){return Y.result}).then(M);q.keysOnly=!q.isMatch;var K=[];return this.each(function(Y,X){K.push(X.primaryKey)}).then(function(){return K}).then(M)},It.prototype.uniqueKeys=function(M){return this._ctx.unique="unique",this.keys(M)},It.prototype.firstKey=function(M){return this.limit(1).keys(function(q){return q[0]}).then(M)},It.prototype.lastKey=function(M){return this.reverse().firstKey(M)},It.prototype.distinct=function(){var M=this._ctx,M=M.index&&M.table.schema.idxByName[M.index];if(!M||!M.multi)return this;var q={};return ri(this._ctx,function(X){var Y=X.primaryKey.toString(),X=k(q,Y);return q[Y]=!0,!X}),this},It.prototype.modify=function(M){var q=this,K=this._ctx;return this._write(function(Y){var X,te,se;se=typeof M=="function"?M:(X=$(M),te=X.length,function(Ae){for(var Ie=!1,ke=0;ke<te;++ke){var Me=X[ke],Ge=M[Me],ot=Te(Ae,Me);Ge instanceof Qr?(re(Ae,Me,Ge.execute(ot)),Ie=!0):ot!==Ge&&(re(Ae,Me,Ge),Ie=!0)}return Ie});var ue=K.table.core,ce=ue.schema.primaryKey,fe=ce.outbound,me=ce.extractKey,xe=200,ce=q.db._options.modifyChunkSize;ce&&(xe=typeof ce=="object"?ce[ue.name]||ce["*"]||200:ce);function Ce(Ae,Me){var ke=Me.failures,Me=Me.numFailures;ye+=Ae-Me;for(var Ge=0,ot=$(ke);Ge<ot.length;Ge++){var tt=ot[Ge];pe.push(ke[tt])}}var pe=[],ye=0,Se=[],Ee=M===ws;return q.clone().primaryKeys().then(function(Ae){function Ie(Me){var Ge=Math.min(xe,Ae.length-Me),ot=Ae.slice(Me,Me+Ge);return(Ee?Promise.resolve([]):ue.getMany({trans:Y,keys:ot,cache:"immutable"})).then(function(tt){var nt=[],at=[],lt=fe?[]:null,ct=Ee?ot:[];if(!Ee)for(var At=0;At<Ge;++At){var Nt=tt[At],Pt={value:et(Nt),primKey:Ae[Me+At]};se.call(Pt,Pt.value,Pt)!==!1&&(Pt.value==null?ct.push(Ae[Me+At]):fe||Rt(me(Nt),me(Pt.value))===0?(at.push(Pt.value),fe&&lt.push(Ae[Me+At])):(ct.push(Ae[Me+At]),nt.push(Pt.value)))}return Promise.resolve(0<nt.length&&ue.mutate({trans:Y,type:"add",values:nt}).then(function(Ut){for(var Ct in Ut.failures)ct.splice(parseInt(Ct),1);Ce(nt.length,Ut)})).then(function(){return(0<at.length||ke&&typeof M=="object")&&ue.mutate({trans:Y,type:"put",keys:lt,values:at,criteria:ke,changeSpec:typeof M!="function"&&M,isAdditionalChunk:0<Me}).then(function(Ut){return Ce(at.length,Ut)})}).then(function(){return(0<ct.length||ke&&Ee)&&ue.mutate({trans:Y,type:"delete",keys:ct,criteria:ke,isAdditionalChunk:0<Me}).then(function(Ut){return Es(K.table,ct,Ut)}).then(function(Ut){return Ce(ct.length,Ut)})}).then(function(){return Ae.length>Me+Ge&&Ie(Me+xe)})})}var ke=vo(K)&&K.limit===1/0&&(typeof M!="function"||Ee)&&{index:K.index,range:K.range};return Ie(0).then(function(){if(0<pe.length)throw new st("Error modifying one or more objects",pe,ye,Se);return Ae.length})})})},It.prototype.delete=function(){var M=this._ctx,q=M.range;return!vo(M)||M.table.schema.yProps||!M.isPrimKey&&q.type!==3?this.modify(ws):this._write(function(K){var Y=M.table.core.schema.primaryKey,X=q;return M.table.core.count({trans:K,query:{index:Y,range:X}}).then(function(te){return M.table.core.mutate({trans:K,type:"deleteRange",range:X}).then(function(fe){var ue=fe.failures,fe=fe.numFailures;if(fe)throw new st("Could not delete some values",Object.keys(ue).map(function(me){return ue[me]}),te-fe);return te-fe})})})},It);function It(){}var ws=function(M,q){return q.value=null};function Vi(M,q){return M<q?-1:M===q?0:1}function Wi(M,q){return q<M?-1:M===q?0:1}function Cn(M,q,K){return M=M instanceof xr?new M.Collection(M):M,M._ctx.error=new(K||TypeError)(q),M}function Dr(M){return new M.Collection(M,function(){return gr("")}).limit(0)}function Yr(M,q,K,Y){var X,te,se,ue,fe,me,xe,ce=K.length;if(!K.every(function(ye){return typeof ye=="string"}))return Cn(M,Di);function Ce(ye){X=ye==="next"?function(Ee){return Ee.toUpperCase()}:function(Ee){return Ee.toLowerCase()},te=ye==="next"?function(Ee){return Ee.toLowerCase()}:function(Ee){return Ee.toUpperCase()},se=ye==="next"?Vi:Wi;var Se=K.map(function(Ee){return{lower:te(Ee),upper:X(Ee)}}).sort(function(Ee,Ae){return se(Ee.lower,Ae.lower)});ue=Se.map(function(Ee){return Ee.upper}),fe=Se.map(function(Ee){return Ee.lower}),xe=(me=ye)==="next"?"":Y}Ce("next"),M=new M.Collection(M,function(){return En(ue[0],fe[ce-1]+Y)}),M._ondirectionchange=function(ye){Ce(ye)};var pe=0;return M._addAlgorithm(function(ye,Se,Ee){var Ae=ye.key;if(typeof Ae!="string")return!1;var Ie=te(Ae);if(q(Ie,fe,pe))return!0;for(var ke=null,Me=pe;Me<ce;++Me){var Ge=(function(ot,tt,nt,at,lt,ct){for(var At=Math.min(ot.length,at.length),Nt=-1,Pt=0;Pt<At;++Pt){var Ut=tt[Pt];if(Ut!==at[Pt])return lt(ot[Pt],nt[Pt])<0?ot.substr(0,Pt)+nt[Pt]+nt.substr(Pt+1):lt(ot[Pt],at[Pt])<0?ot.substr(0,Pt)+at[Pt]+nt.substr(Pt+1):0<=Nt?ot.substr(0,Nt)+tt[Nt]+nt.substr(Nt+1):null;lt(ot[Pt],Ut)<0&&(Nt=Pt)}return At<at.length&&ct==="next"?ot+nt.substr(ot.length):At<ot.length&&ct==="prev"?ot.substr(0,nt.length):Nt<0?null:ot.substr(0,Nt)+at[Nt]+nt.substr(Nt+1)})(Ae,Ie,ue[Me],fe[Me],se,me);Ge===null&&ke===null?pe=Me+1:(ke===null||0<se(ke,Ge))&&(ke=Ge)}return Se(ke!==null?function(){ye.continue(ke+xe)}:Ee),!1}),M}function En(M,q,K,Y){return{type:2,lower:M,upper:q,lowerOpen:K,upperOpen:Y}}function gr(M){return{type:1,lower:M,upper:M}}var xr=(Object.defineProperty(Kt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Kt.prototype.between=function(M,q,K,Y){K=K!==!1,Y=Y===!0;try{return 0<this._cmp(M,q)||this._cmp(M,q)===0&&(K||Y)&&(!K||!Y)?Dr(this):new this.Collection(this,function(){return En(M,q,!K,!Y)})}catch{return Cn(this,Dt)}},Kt.prototype.equals=function(M){return M==null?Cn(this,Dt):new this.Collection(this,function(){return gr(M)})},Kt.prototype.above=function(M){return M==null?Cn(this,Dt):new this.Collection(this,function(){return En(M,void 0,!0)})},Kt.prototype.aboveOrEqual=function(M){return M==null?Cn(this,Dt):new this.Collection(this,function(){return En(M,void 0,!1)})},Kt.prototype.below=function(M){return M==null?Cn(this,Dt):new this.Collection(this,function(){return En(void 0,M,!1,!0)})},Kt.prototype.belowOrEqual=function(M){return M==null?Cn(this,Dt):new this.Collection(this,function(){return En(void 0,M)})},Kt.prototype.startsWith=function(M){return typeof M!="string"?Cn(this,Di):this.between(M,M+Gr,!0,!0)},Kt.prototype.startsWithIgnoreCase=function(M){return M===""?this.startsWith(M):Yr(this,function(q,K){return q.indexOf(K[0])===0},[M],Gr)},Kt.prototype.equalsIgnoreCase=function(M){return Yr(this,function(q,K){return q===K[0]},[M],"")},Kt.prototype.anyOfIgnoreCase=function(){var M=He.apply(Oe,arguments);return M.length===0?Dr(this):Yr(this,function(q,K){return K.indexOf(q)!==-1},M,"")},Kt.prototype.startsWithAnyOfIgnoreCase=function(){var M=He.apply(Oe,arguments);return M.length===0?Dr(this):Yr(this,function(q,K){return K.some(function(Y){return q.indexOf(Y)===0})},M,Gr)},Kt.prototype.anyOf=function(){var M=this,q=He.apply(Oe,arguments),K=this._cmp;try{q.sort(K)}catch{return Cn(this,Dt)}if(q.length===0)return Dr(this);var Y=new this.Collection(this,function(){return En(q[0],q[q.length-1])});Y._ondirectionchange=function(te){K=te==="next"?M._ascending:M._descending,q.sort(K)};var X=0;return Y._addAlgorithm(function(te,se,ue){for(var fe=te.key;0<K(fe,q[X]);)if(++X===q.length)return se(ue),!1;return K(fe,q[X])===0||(se(function(){te.continue(q[X])}),!1)}),Y},Kt.prototype.notEqual=function(M){return this.inAnyRange([[-1/0,M],[M,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Kt.prototype.noneOf=function(){var M=He.apply(Oe,arguments);if(M.length===0)return new this.Collection(this);try{M.sort(this._ascending)}catch{return Cn(this,Dt)}var q=M.reduce(function(K,Y){return K?K.concat([[K[K.length-1][1],Y]]):[[-1/0,Y]]},null);return q.push([M[M.length-1],this.db._maxKey]),this.inAnyRange(q,{includeLowers:!1,includeUppers:!1})},Kt.prototype.inAnyRange=function(Ae,q){var K=this,Y=this._cmp,X=this._ascending,te=this._descending,se=this._min,ue=this._max;if(Ae.length===0)return Dr(this);if(!Ae.every(function(Ie){return Ie[0]!==void 0&&Ie[1]!==void 0&&X(Ie[0],Ie[1])<=0}))return Cn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ue.InvalidArgument);var fe=!q||q.includeLowers!==!1,me=q&&q.includeUppers===!0,xe,ce=X;function Ce(Ie,ke){return ce(Ie[0],ke[0])}try{(xe=Ae.reduce(function(Ie,ke){for(var Me=0,Ge=Ie.length;Me<Ge;++Me){var ot=Ie[Me];if(Y(ke[0],ot[1])<0&&0<Y(ke[1],ot[0])){ot[0]=se(ot[0],ke[0]),ot[1]=ue(ot[1],ke[1]);break}}return Me===Ge&&Ie.push(ke),Ie},[])).sort(Ce)}catch{return Cn(this,Dt)}var pe=0,ye=me?function(Ie){return 0<X(Ie,xe[pe][1])}:function(Ie){return 0<=X(Ie,xe[pe][1])},Se=fe?function(Ie){return 0<te(Ie,xe[pe][0])}:function(Ie){return 0<=te(Ie,xe[pe][0])},Ee=ye,Ae=new this.Collection(this,function(){return En(xe[0][0],xe[xe.length-1][1],!fe,!me)});return Ae._ondirectionchange=function(Ie){ce=Ie==="next"?(Ee=ye,X):(Ee=Se,te),xe.sort(Ce)},Ae._addAlgorithm(function(Ie,ke,Me){for(var Ge,ot=Ie.key;Ee(ot);)if(++pe===xe.length)return ke(Me),!1;return!ye(Ge=ot)&&!Se(Ge)||(K._cmp(ot,xe[pe][1])===0||K._cmp(ot,xe[pe][0])===0||ke(function(){ce===X?Ie.continue(xe[pe][0]):Ie.continue(xe[pe][1])}),!1)}),Ae},Kt.prototype.startsWithAnyOf=function(){var M=He.apply(Oe,arguments);return M.every(function(q){return typeof q=="string"})?M.length===0?Dr(this):this.inAnyRange(M.map(function(q){return[q,q+Gr]})):Cn(this,"startsWithAnyOf() only works with strings")},Kt);function Kt(){}function Rn(M){return Ft(function(q){return Mn(q),M(q.target.error),!1})}function Mn(M){M.stopPropagation&&M.stopPropagation(),M.preventDefault&&M.preventDefault()}var zo="storagemutated",Ss="x-storagemutated-1",Dn=mr(null,zo),Ga=(Qn.prototype._lock=function(){return ae(!mt.global),++this._reculock,this._reculock!==1||mt.global||(mt.lockOwnerFor=this),this},Qn.prototype._unlock=function(){if(ae(!mt.global),--this._reculock==0)for(mt.global||(mt.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var M=this._blockedFuncs.shift();try{Nr(M[1],M[0])}catch{}}return this},Qn.prototype._locked=function(){return this._reculock&&mt.lockOwnerFor!==this},Qn.prototype.create=function(M){var q=this;if(!this.mode)return this;var K=this.db.idbdb,Y=this.db._state.dbOpenError;if(ae(!this.idbtrans),!M&&!K)switch(Y&&Y.name){case"DatabaseClosedError":throw new Ue.DatabaseClosed(Y);case"MissingAPIError":throw new Ue.MissingAPI(Y.message,Y);default:throw new Ue.OpenFailed(Y)}if(!this.active)throw new Ue.TransactionInactive;return ae(this._completion._state===null),(M=this.idbtrans=M||(this.db.core||K).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ft(function(X){Mn(X),q._reject(M.error)}),M.onabort=Ft(function(X){Mn(X),q.active&&q._reject(new Ue.Abort(M.error)),q.active=!1,q.on("abort").fire(X)}),M.oncomplete=Ft(function(){q.active=!1,q._resolve(),"mutatedParts"in M&&Dn.storagemutated.fire(M.mutatedParts)}),this},Qn.prototype._promise=function(M,q,K){var Y=this;if(M==="readwrite"&&this.mode!=="readwrite")return Yt(new Ue.ReadOnly("Transaction is readonly"));if(!this.active)return Yt(new Ue.TransactionInactive);if(this._locked())return new ut(function(te,se){Y._blockedFuncs.push([function(){Y._promise(M,q,K).then(te,se)},mt])});if(K)return Or(function(){var te=new ut(function(se,ue){Y._lock();var fe=q(se,ue,Y);fe&&fe.then&&fe.then(se,ue)});return te.finally(function(){return Y._unlock()}),te._lib=!0,te});var X=new ut(function(te,se){var ue=q(te,se,Y);ue&&ue.then&&ue.then(te,se)});return X._lib=!0,X},Qn.prototype._root=function(){return this.parent?this.parent._root():this},Qn.prototype.waitFor=function(M){var q,K=this._root(),Y=ut.resolve(M);K._waitingFor?K._waitingFor=K._waitingFor.then(function(){return Y}):(K._waitingFor=Y,K._waitingQueue=[],q=K.idbtrans.objectStore(K.storeNames[0]),(function te(){for(++K._spinCount;K._waitingQueue.length;)K._waitingQueue.shift()();K._waitingFor&&(q.get(-1/0).onsuccess=te)})());var X=K._waitingFor;return new ut(function(te,se){Y.then(function(ue){return K._waitingQueue.push(Ft(te.bind(null,ue)))},function(ue){return K._waitingQueue.push(Ft(se.bind(null,ue)))}).finally(function(){K._waitingFor===X&&(K._waitingFor=null)})})},Qn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ue.Abort))},Qn.prototype.table=function(M){var q=this._memoizedTables||(this._memoizedTables={});if(k(q,M))return q[M];var K=this.schema[M];if(!K)throw new Ue.NotFound("Table "+M+" not part of transaction");return K=new this.db.Table(M,K,this),K.core=this.db.core.table(M),q[M]=K},Qn);function Qn(){}function yo(M,q,K,Y,X,te,se,ue){return{name:M,keyPath:q,unique:K,multi:Y,auto:X,compound:te,src:(K&&!se?"&":"")+(Y?"*":"")+(X?"++":"")+oi(q),type:ue}}function oi(M){return typeof M=="string"?M:M?"["+[].join.call(M,"+")+"]":""}function si(M,q,K){return{name:M,primKey:q,indexes:K,mappedClass:null,idxByName:(Y=function(X){return[X.name,X]},K.reduce(function(X,te,se){return se=Y(te,se),se&&(X[se[0]]=se[1]),X},{}))};var Y}var vr=function(M){try{return M.only([[]]),vr=function(){return[[]]},[[]]}catch{return vr=function(){return Gr},Gr}};function Xr(M){return M==null?function(){}:typeof M=="string"?(q=M).split(".").length===1?function(K){return K[q]}:function(K){return Te(K,q)}:function(K){return Te(K,M)};var q}function Zr(M){return[].slice.call(M)}var bs=0;function Go(M){return M==null?":id":typeof M=="string"?M:"[".concat(M.join("+"),"]")}function Qa(M,q,fe){function Y(Ee){if(Ee.type===3)return null;if(Ee.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var pe=Ee.lower,ye=Ee.upper,Se=Ee.lowerOpen,Ee=Ee.upperOpen;return pe===void 0?ye===void 0?null:q.upperBound(ye,!!Ee):ye===void 0?q.lowerBound(pe,!!Se):q.bound(pe,ye,!!Se,!!Ee)}function X(Ce){var pe,ye=Ce.name;return{name:ye,schema:Ce,mutate:function(Se){var Ee=Se.trans,Ae=Se.type,Ie=Se.keys,ke=Se.values,Me=Se.range;return new Promise(function(Ge,ot){Ge=Ft(Ge);var tt=Ee.objectStore(ye),nt=tt.keyPath==null,at=Ae==="put"||Ae==="add";if(!at&&Ae!=="delete"&&Ae!=="deleteRange")throw new Error("Invalid operation type: "+Ae);var lt,ct=(Ie||ke||{length:1}).length;if(Ie&&ke&&Ie.length!==ke.length)throw new Error("Given keys array must have same length as given values array.");if(ct===0)return Ge({numFailures:0,failures:{},results:[],lastResult:void 0});function At(dn){++Ut,Mn(dn)}var Nt=[],Pt=[],Ut=0;if(Ae==="deleteRange"){if(Me.type===4)return Ge({numFailures:Ut,failures:Pt,results:[],lastResult:void 0});Me.type===3?Nt.push(lt=tt.clear()):Nt.push(lt=tt.delete(Y(Me)))}else{var nt=at?nt?[ke,Ie]:[ke,null]:[Ie,null],Ct=nt[0],un=nt[1];if(at)for(var cn=0;cn<ct;++cn)Nt.push(lt=un&&un[cn]!==void 0?tt[Ae](Ct[cn],un[cn]):tt[Ae](Ct[cn])),lt.onerror=At;else for(cn=0;cn<ct;++cn)Nt.push(lt=tt[Ae](Ct[cn])),lt.onerror=At}function Xn(dn){dn=dn.target.result,Nt.forEach(function(_r,xi){return _r.error!=null&&(Pt[xi]=_r.error)}),Ge({numFailures:Ut,failures:Pt,results:Ae==="delete"?Ie:Nt.map(function(_r){return _r.result}),lastResult:dn})}lt.onerror=function(dn){At(dn),Xn(dn)},lt.onsuccess=Xn})},getMany:function(Se){var Ee=Se.trans,Ae=Se.keys;return new Promise(function(Ie,ke){Ie=Ft(Ie);for(var Me,Ge=Ee.objectStore(ye),ot=Ae.length,tt=new Array(ot),nt=0,at=0,lt=function(Nt){Nt=Nt.target,tt[Nt._pos]=Nt.result,++at===nt&&Ie(tt)},ct=Rn(ke),At=0;At<ot;++At)Ae[At]!=null&&((Me=Ge.get(Ae[At]))._pos=At,Me.onsuccess=lt,Me.onerror=ct,++nt);nt===0&&Ie(tt)})},get:function(Se){var Ee=Se.trans,Ae=Se.key;return new Promise(function(Ie,ke){Ie=Ft(Ie);var Me=Ee.objectStore(ye).get(Ae);Me.onsuccess=function(Ge){return Ie(Ge.target.result)},Me.onerror=Rn(ke)})},query:(pe=me,function(Se){return new Promise(function(Ee,Ae){Ee=Ft(Ee);var Ie,ke,Me,nt=Se.trans,Ge=Se.values,ot=Se.limit,lt=Se.query,tt=ot===1/0?void 0:ot,at=lt.index,lt=lt.range,nt=nt.objectStore(ye),at=at.isPrimaryKey?nt:nt.index(at.name),lt=Y(lt);if(ot===0)return Ee({result:[]});pe?((tt=Ge?at.getAll(lt,tt):at.getAllKeys(lt,tt)).onsuccess=function(ct){return Ee({result:ct.target.result})},tt.onerror=Rn(Ae)):(Ie=0,ke=!Ge&&"openKeyCursor"in at?at.openKeyCursor(lt):at.openCursor(lt),Me=[],ke.onsuccess=function(ct){var At=ke.result;return At?(Me.push(Ge?At.value:At.primaryKey),++Ie===ot?Ee({result:Me}):void At.continue()):Ee({result:Me})},ke.onerror=Rn(Ae))})}),openCursor:function(Se){var Ee=Se.trans,Ae=Se.values,Ie=Se.query,ke=Se.reverse,Me=Se.unique;return new Promise(function(Ge,ot){Ge=Ft(Ge);var at=Ie.index,tt=Ie.range,nt=Ee.objectStore(ye),nt=at.isPrimaryKey?nt:nt.index(at.name),at=ke?Me?"prevunique":"prev":Me?"nextunique":"next",lt=!Ae&&"openKeyCursor"in nt?nt.openKeyCursor(Y(tt),at):nt.openCursor(Y(tt),at);lt.onerror=Rn(ot),lt.onsuccess=Ft(function(ct){var At,Nt,Pt,Ut,Ct=lt.result;Ct?(Ct.___id=++bs,Ct.done=!1,At=Ct.continue.bind(Ct),Nt=(Nt=Ct.continuePrimaryKey)&&Nt.bind(Ct),Pt=Ct.advance.bind(Ct),Ut=function(){throw new Error("Cursor not stopped")},Ct.trans=Ee,Ct.stop=Ct.continue=Ct.continuePrimaryKey=Ct.advance=function(){throw new Error("Cursor not started")},Ct.fail=Ft(ot),Ct.next=function(){var un=this,cn=1;return this.start(function(){return cn--?un.continue():un.stop()}).then(function(){return un})},Ct.start=function(un){function cn(){if(lt.result)try{un()}catch(dn){Ct.fail(dn)}else Ct.done=!0,Ct.start=function(){throw new Error("Cursor behind last entry")},Ct.stop()}var Xn=new Promise(function(dn,_r){dn=Ft(dn),lt.onerror=Rn(_r),Ct.fail=_r,Ct.stop=function(xi){Ct.stop=Ct.continue=Ct.continuePrimaryKey=Ct.advance=Ut,dn(xi)}});return lt.onsuccess=Ft(function(dn){lt.onsuccess=cn,cn()}),Ct.continue=At,Ct.continuePrimaryKey=Nt,Ct.advance=Pt,cn(),Xn},Ge(Ct)):Ge(null)},ot)})},count:function(Se){var Ee=Se.query,Ae=Se.trans,Ie=Ee.index,ke=Ee.range;return new Promise(function(Me,Ge){var ot=Ae.objectStore(ye),tt=Ie.isPrimaryKey?ot:ot.index(Ie.name),ot=Y(ke),tt=ot?tt.count(ot):tt.count();tt.onsuccess=Ft(function(nt){return Me(nt.target.result)}),tt.onerror=Rn(Ge)})}}}var te,se,ue,xe=(se=fe,ue=Zr((te=M).objectStoreNames),{schema:{name:te.name,tables:ue.map(function(Ce){return se.objectStore(Ce)}).map(function(Ce){var pe=Ce.keyPath,Ee=Ce.autoIncrement,ye=L(pe),Se={},Ee={name:Ce.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:pe==null,compound:ye,keyPath:pe,autoIncrement:Ee,unique:!0,extractKey:Xr(pe)},indexes:Zr(Ce.indexNames).map(function(Ae){return Ce.index(Ae)}).map(function(Me){var Ie=Me.name,ke=Me.unique,Ge=Me.multiEntry,Me=Me.keyPath,Ge={name:Ie,compound:L(Me),keyPath:Me,unique:ke,multiEntry:Ge,extractKey:Xr(Me)};return Se[Go(Me)]=Ge}),getIndexByKeyPath:function(Ae){return Se[Go(Ae)]}};return Se[":id"]=Ee.primaryKey,pe!=null&&(Se[Go(pe)]=Ee.primaryKey),Ee})},hasGetAll:0<ue.length&&"getAll"in se.objectStore(ue[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),fe=xe.schema,me=xe.hasGetAll,xe=fe.tables.map(X),ce={};return xe.forEach(function(Ce){return ce[Ce.name]=Ce}),{stack:"dbcore",transaction:M.transaction.bind(M),table:function(Ce){if(!ce[Ce])throw new Error("Table '".concat(Ce,"' not found"));return ce[Ce]},MIN_KEY:-1/0,MAX_KEY:vr(q),schema:fe}}function ii(M,q,K,Y){var X=K.IDBKeyRange;return K.indexedDB,{dbcore:(Y=Qa(q,X,Y),M.dbcore.reduce(function(te,se){return se=se.create,C(C({},te),se(te))},Y))}}function Jr(M,Y){var K=Y.db,Y=ii(M._middlewares,K,M._deps,Y);M.core=Y.dbcore,M.tables.forEach(function(X){var te=X.name;M.core.schema.tables.some(function(se){return se.name===te})&&(X.core=M.core.table(te),M[te]instanceof M.Table&&(M[te].core=X.core))})}function Eo(M,q,K,Y){K.forEach(function(X){var te=Y[X];q.forEach(function(se){var ue=(function fe(me,xe){return Z(me,xe)||(me=B(me))&&fe(me,xe)})(se,X);(!ue||"value"in ue&&ue.value===void 0)&&(se===M.Transaction.prototype||se instanceof M.Transaction?G(se,X,{get:function(){return this.table(X)},set:function(fe){W(this,X,{value:fe,writable:!0,configurable:!0,enumerable:!0})}}):se[X]=new M.Table(X,te))})})}function Cs(M,q){q.forEach(function(K){for(var Y in K)K[Y]instanceof M.Table&&delete K[Y]})}function Fr(M,q){return M._cfg.version-q._cfg.version}function ai(M,q,K,Y){var X=M._dbSchema;K.objectStoreNames.contains("$meta")&&!X.$meta&&(X.$meta=si("$meta",Ts("")[0],[]),M._storeNames.push("$meta"));var te=M._createTransaction("readwrite",M._storeNames,X);te.create(K),te._completion.catch(Y);var se=te._reject.bind(te),ue=mt.transless||mt;Or(function(){return mt.trans=te,mt.transless=ue,q!==0?(Jr(M,K),me=q,((fe=te).storeNames.includes("$meta")?fe.table("$meta").get("version").then(function(xe){return xe??me}):ut.resolve(me)).then(function(xe){return Ce=xe,pe=te,ye=K,Se=[],xe=(ce=M)._versions,Ee=ce._dbSchema=mn(0,ce.idbdb,ye),(xe=xe.filter(function(Ae){return Ae._cfg.version>=Ce})).length!==0?(xe.forEach(function(Ae){Se.push(function(){var Ie=Ee,ke=Ae._cfg.dbschema;yr(ce,Ie,ye),yr(ce,ke,ye),Ee=ce._dbSchema=ke;var Me=As(Ie,ke);Me.add.forEach(function(at){_o(ye,at[0],at[1].primKey,at[1].indexes)}),Me.change.forEach(function(at){if(at.recreate)throw new Ue.Upgrade("Not yet support for changing primary key");var lt=ye.objectStore(at.name);at.add.forEach(function(ct){return Yo(lt,ct)}),at.change.forEach(function(ct){lt.deleteIndex(ct.name),Yo(lt,ct)}),at.del.forEach(function(ct){return lt.deleteIndex(ct)})});var Ge=Ae._cfg.contentUpgrade;if(Ge&&Ae._cfg.version>Ce){Jr(ce,ye),pe._memoizedTables={};var ot=he(ke);Me.del.forEach(function(at){ot[at]=Ie[at]}),Cs(ce,[ce.Transaction.prototype]),Eo(ce,[ce.Transaction.prototype],$(ot),ot),pe.schema=ot;var tt,nt=ie(Ge);return nt&&go(),Me=ut.follow(function(){var at;(tt=Ge(pe))&&nt&&(at=bn.bind(null,null),tt.then(at,at))}),tt&&typeof tt.then=="function"?ut.resolve(tt):Me.then(function(){return tt})}}),Se.push(function(Ie){var ke,Me,Ge=Ae._cfg.dbschema;ke=Ge,Me=Ie,[].slice.call(Me.db.objectStoreNames).forEach(function(ot){return ke[ot]==null&&Me.db.deleteObjectStore(ot)}),Cs(ce,[ce.Transaction.prototype]),Eo(ce,[ce.Transaction.prototype],ce._storeNames,ce._dbSchema),pe.schema=ce._dbSchema}),Se.push(function(Ie){ce.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(ce.idbdb.version/10)===Ae._cfg.version?(ce.idbdb.deleteObjectStore("$meta"),delete ce._dbSchema.$meta,ce._storeNames=ce._storeNames.filter(function(ke){return ke!=="$meta"})):Ie.objectStore("$meta").put(Ae._cfg.version,"version"))})}),(function Ae(){return Se.length?ut.resolve(Se.shift()(pe.idbtrans)).then(Ae):ut.resolve()})().then(function(){Qo(Ee,ye)})):ut.resolve();var ce,Ce,pe,ye,Se,Ee}).catch(se)):($(X).forEach(function(xe){_o(K,xe,X[xe].primKey,X[xe].indexes)}),Jr(M,K),void ut.follow(function(){return M.on.populate.fire(te)}).catch(se));var fe,me})}function Rs(M,q){Qo(M._dbSchema,q),q.db.version%10!=0||q.objectStoreNames.contains("$meta")||q.db.createObjectStore("$meta").add(Math.ceil(q.db.version/10-1),"version");var K=mn(0,M.idbdb,q);yr(M,M._dbSchema,q);for(var Y=0,X=As(K,M._dbSchema).change;Y<X.length;Y++){var te=(function(se){if(se.change.length||se.recreate)return console.warn("Unable to patch indexes of table ".concat(se.name," because it has changes on the type of index or primary key.")),{value:void 0};var ue=q.objectStore(se.name);se.add.forEach(function(fe){Gt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(se.name,".").concat(fe.src)),Yo(ue,fe)})})(X[Y]);if(typeof te=="object")return te.value}}function As(M,q){var K,Y={del:[],add:[],change:[]};for(K in M)q[K]||Y.del.push(K);for(K in q){var X=M[K],te=q[K];if(X){var se={name:K,def:te,recreate:!1,del:[],add:[],change:[]};if(""+(X.primKey.keyPath||"")!=""+(te.primKey.keyPath||"")||X.primKey.auto!==te.primKey.auto)se.recreate=!0,Y.change.push(se);else{var ue=X.idxByName,fe=te.idxByName,me=void 0;for(me in ue)fe[me]||se.del.push(me);for(me in fe){var xe=ue[me],ce=fe[me];xe?xe.src!==ce.src&&se.change.push(ce):se.add.push(ce)}(0<se.del.length||0<se.add.length||0<se.change.length)&&Y.change.push(se)}}else Y.add.push([K,te])}return Y}function _o(M,q,K,Y){var X=M.db.createObjectStore(q,K.keyPath?{keyPath:K.keyPath,autoIncrement:K.auto}:{autoIncrement:K.auto});return Y.forEach(function(te){return Yo(X,te)}),X}function Qo(M,q){$(M).forEach(function(K){q.db.objectStoreNames.contains(K)||(Gt&&console.debug("Dexie: Creating missing table",K),_o(q,K,M[K].primKey,M[K].indexes))})}function Yo(M,q){M.createIndex(q.name,q.keyPath,{unique:q.unique,multiEntry:q.multi})}function mn(M,q,K){var Y={};return ne(q.objectStoreNames,0).forEach(function(X){for(var te=K.objectStore(X),se=yo(oi(me=te.keyPath),me||"",!0,!1,!!te.autoIncrement,me&&typeof me!="string",!0),ue=[],fe=0;fe<te.indexNames.length;++fe){var xe=te.index(te.indexNames[fe]),me=xe.keyPath,xe=yo(xe.name,me,!!xe.unique,!!xe.multiEntry,!1,me&&typeof me!="string",!1);ue.push(xe)}Y[X]=si(X,se,ue)}),Y}function yr(M,q,K){for(var Y=K.db.objectStoreNames,X=0;X<Y.length;++X){var te=Y[X],se=K.objectStore(te);M._hasGetAll="getAll"in se;for(var ue=0;ue<se.indexNames.length;++ue){var fe=se.indexNames[ue],me=se.index(fe).keyPath,xe=typeof me=="string"?me:"["+ne(me).join("+")+"]";!q[te]||(me=q[te].idxByName[xe])&&(me.name=fe,delete q[te].idxByName[xe],q[te].idxByName[fe]=me)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&O.WorkerGlobalScope&&O instanceof O.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(M._hasGetAll=!1)}function Ts(M){return M.split(",").map(function(q,K){var te=q.split(":"),Y=(X=te[1])===null||X===void 0?void 0:X.trim(),X=(q=te[0].trim()).replace(/([&*]|\+\+)/g,""),te=/^\[/.test(X)?X.match(/^\[(.*)\]$/)[1].split("+"):X;return yo(X,te||null,/\&/.test(q),/\*/.test(q),/\+\+/.test(q),L(te),K===0,Y)})}var Xo=(wo.prototype._createTableSchema=si,wo.prototype._parseIndexSyntax=Ts,wo.prototype._parseStoresSpec=function(M,q){var K=this;$(M).forEach(function(Y){if(M[Y]!==null){var X=K._parseIndexSyntax(M[Y]),te=X.shift();if(!te)throw new Ue.Schema("Invalid schema for table "+Y+": "+M[Y]);if(te.unique=!0,te.multi)throw new Ue.Schema("Primary key cannot be multiEntry*");X.forEach(function(se){if(se.auto)throw new Ue.Schema("Only primary key can be marked as autoIncrement (++)");if(!se.keyPath)throw new Ue.Schema("Index must have a name and cannot be an empty string")}),X=K._createTableSchema(Y,te,X),q[Y]=X}})},wo.prototype.stores=function(K){var q=this.db;this._cfg.storesSource=this._cfg.storesSource?D(this._cfg.storesSource,K):K;var K=q._versions,Y={},X={};return K.forEach(function(te){D(Y,te._cfg.storesSource),X=te._cfg.dbschema={},te._parseStoresSpec(Y,X)}),q._dbSchema=X,Cs(q,[q._allTables,q,q.Transaction.prototype]),Eo(q,[q._allTables,q,q.Transaction.prototype,this._cfg.tables],$(X),X),q._storeNames=$(X),this},wo.prototype.upgrade=function(M){return this._cfg.contentUpgrade=Wn(this._cfg.contentUpgrade||_t,M),this},wo);function wo(){}function Zo(M,q){var K=M._dbNamesDB;return K||(K=M._dbNamesDB=new An(qo,{addons:[],indexedDB:M,IDBKeyRange:q})).version(1).stores({dbnames:"name"}),K.table("dbnames")}function Jo(M){return M&&typeof M.databases=="function"}function eo(M){return Or(function(){return mt.letThrough=!0,M()})}function So(M){return!("from"in M)}var ln=function(M,q){if(!this){var K=new ln;return M&&"d"in M&&D(K,M),K}D(this,arguments.length?{d:1,from:M,to:1<arguments.length?q:M}:{d:0})};function es(M,q,K){var Y=Rt(q,K);if(!isNaN(Y)){if(0<Y)throw RangeError();if(So(M))return D(M,{from:q,to:K,d:1});var X=M.l,Y=M.r;if(Rt(K,M.from)<0)return X?es(X,q,K):M.l={from:q,to:K,d:1,l:null,r:null},zi(M);if(0<Rt(q,M.to))return Y?es(Y,q,K):M.r={from:q,to:K,d:1,l:null,r:null},zi(M);Rt(q,M.from)<0&&(M.from=q,M.l=null,M.d=Y?Y.d+1:1),0<Rt(K,M.to)&&(M.to=K,M.r=null,M.d=M.l?M.l.d+1:1),K=!M.r,X&&!M.l&&ns(M,X),Y&&K&&ns(M,Y)}}function ns(M,q){So(q)||(function K(Y,fe){var te=fe.from,se=fe.to,ue=fe.l,fe=fe.r;es(Y,te,se),ue&&K(Y,ue),fe&&K(Y,fe)})(M,q)}function Ki(M,q){var K=bo(q),Y=K.next();if(Y.done)return!1;for(var X=Y.value,te=bo(M),se=te.next(X.from),ue=se.value;!Y.done&&!se.done;){if(Rt(ue.from,X.to)<=0&&0<=Rt(ue.to,X.from))return!0;Rt(X.from,ue.from)<0?X=(Y=K.next(ue.from)).value:ue=(se=te.next(X.from)).value}return!1}function bo(M){var q=So(M)?null:{s:0,n:M};return{next:function(K){for(var Y=0<arguments.length;q;)switch(q.s){case 0:if(q.s=1,Y)for(;q.n.l&&Rt(K,q.n.from)<0;)q={up:q,n:q.n.l,s:1};else for(;q.n.l;)q={up:q,n:q.n.l,s:1};case 1:if(q.s=2,!Y||Rt(K,q.n.to)<=0)return{value:q.n,done:!1};case 2:if(q.n.r){q.s=3,q={up:q,n:q.n.r,s:0};continue}case 3:q=q.up}return{done:!0}}}}function zi(M){var q,K,Y=(((q=M.r)===null||q===void 0?void 0:q.d)||0)-(((K=M.l)===null||K===void 0?void 0:K.d)||0),X=1<Y?"r":Y<-1?"l":"";X&&(q=X=="r"?"l":"r",K=C({},M),Y=M[X],M.from=Y.from,M.to=Y.to,M[X]=Y[X],K[X]=Y[q],(M[q]=K).d=Gi(K)),M.d=Gi(M)}function Gi(K){var q=K.r,K=K.l;return(q?K?Math.max(q.d,K.d):q.d:K?K.d:0)+1}function Ps(M,q){return $(q).forEach(function(K){M[K]?ns(M[K],q[K]):M[K]=(function Y(X){var te,se,ue={};for(te in X)k(X,te)&&(se=X[te],ue[te]=!se||typeof se!="object"||qe.has(se.constructor)?se:Y(se));return ue})(q[K])}),M}function li(M,q){return M.all||q.all||Object.keys(M).some(function(K){return q[K]&&Ki(q[K],M[K])})}H(ln.prototype,((Fn={add:function(M){return ns(this,M),this},addKey:function(M){return es(this,M,M),this},addKeys:function(M){var q=this;return M.forEach(function(K){return es(q,K,K)}),this},hasKey:function(M){var q=bo(this).next(M).value;return q&&Rt(q.from,M)<=0&&0<=Rt(q.to,M)}})[Ve]=function(){return bo(this)},Fn));var no={},js={},ui=!1;function Os(M){Ps(js,M),ui||(ui=!0,setTimeout(function(){ui=!1,ci(js,!(js={}))},0))}function ci(M,q){q===void 0&&(q=!1);var K=new Set;if(M.all)for(var Y=0,X=Object.values(no);Y<X.length;Y++)Qi(se=X[Y],M,K,q);else for(var te in M){var se,ue=/^idb\:\/\/(.*)\/(.*)\//.exec(te);ue&&(te=ue[1],ue=ue[2],(se=no["idb://".concat(te,"/").concat(ue)])&&Qi(se,M,K,q))}K.forEach(function(fe){return fe()})}function Qi(M,q,K,Y){for(var X=[],te=0,se=Object.entries(M.queries.query);te<se.length;te++){for(var ue=se[te],fe=ue[0],me=[],xe=0,ce=ue[1];xe<ce.length;xe++){var Ce=ce[xe];li(q,Ce.obsSet)?Ce.subscribers.forEach(function(Ee){return K.add(Ee)}):Y&&me.push(Ce)}Y&&X.push([fe,me])}if(Y)for(var pe=0,ye=X;pe<ye.length;pe++){var Se=ye[pe],fe=Se[0],me=Se[1];M.queries.query[fe]=me}}function di(M){var q=M._state,K=M._deps.indexedDB;if(q.isBeingOpened||M.idbdb)return q.dbReadyPromise.then(function(){return q.dbOpenError?Yt(q.dbOpenError):M});q.isBeingOpened=!0,q.dbOpenError=null,q.openComplete=!1;var Y=q.openCanceller,X=Math.round(10*M.verno),te=!1;function se(){if(q.openCanceller!==Y)throw new Ue.DatabaseClosed("db.open() was cancelled")}function ue(){return new ut(function(Ce,pe){if(se(),!K)throw new Ue.MissingAPI;var ye=M.name,Se=q.autoSchema||!X?K.open(ye):K.open(ye,X);if(!Se)throw new Ue.MissingAPI;Se.onerror=Rn(pe),Se.onblocked=Ft(M._fireOnBlocked),Se.onupgradeneeded=Ft(function(Ee){var Ae;xe=Se.transaction,q.autoSchema&&!M._options.allowEmptyDB?(Se.onerror=Mn,xe.abort(),Se.result.close(),(Ae=K.deleteDatabase(ye)).onsuccess=Ae.onerror=Ft(function(){pe(new Ue.NoSuchDatabase("Database ".concat(ye," doesnt exist")))})):(xe.onerror=Rn(pe),Ee=Ee.oldVersion>Math.pow(2,62)?0:Ee.oldVersion,ce=Ee<1,M.idbdb=Se.result,te&&Rs(M,xe),ai(M,Ee/10,xe,pe))},pe),Se.onsuccess=Ft(function(){xe=null;var Ee,Ae,Ie,ke,Me,Ge=M.idbdb=Se.result,ot=ne(Ge.objectStoreNames);if(0<ot.length)try{var tt=Ge.transaction((ke=ot).length===1?ke[0]:ke,"readonly");if(q.autoSchema)Ae=Ge,Ie=tt,(Ee=M).verno=Ae.version/10,Ie=Ee._dbSchema=mn(0,Ae,Ie),Ee._storeNames=ne(Ae.objectStoreNames,0),Eo(Ee,[Ee._allTables],$(Ie),Ie);else if(yr(M,M._dbSchema,tt),((Me=As(mn(0,(Me=M).idbdb,tt),Me._dbSchema)).add.length||Me.change.some(function(nt){return nt.add.length||nt.change.length}))&&!te)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ge.close(),X=Ge.version+1,te=!0,Ce(ue());Jr(M,tt)}catch{}Ir.push(M),Ge.onversionchange=Ft(function(nt){q.vcFired=!0,M.on("versionchange").fire(nt)}),Ge.onclose=Ft(function(nt){M.on("close").fire(nt)}),ce&&(Me=M._deps,tt=ye,Ge=Me.indexedDB,Me=Me.IDBKeyRange,Jo(Ge)||tt===qo||Zo(Ge,Me).put({name:tt}).catch(_t)),Ce()},pe)}).catch(function(Ce){switch(Ce?.name){case"UnknownError":if(0<q.PR1398_maxLoop)return q.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),ue();break;case"VersionError":if(0<X)return X=0,ue()}return ut.reject(Ce)})}var fe,me=q.dbReadyResolve,xe=null,ce=!1;return ut.race([Y,(typeof navigator>"u"?ut.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Ce){function pe(){return indexedDB.databases().finally(Ce)}fe=setInterval(pe,100),pe()}).finally(function(){return clearInterval(fe)}):Promise.resolve()).then(ue)]).then(function(){return se(),q.onReadyBeingFired=[],ut.resolve(eo(function(){return M.on.ready.fire(M.vip)})).then(function Ce(){if(0<q.onReadyBeingFired.length){var pe=q.onReadyBeingFired.reduce(Wn,_t);return q.onReadyBeingFired=[],ut.resolve(eo(function(){return pe(M.vip)})).then(Ce)}})}).finally(function(){q.openCanceller===Y&&(q.onReadyBeingFired=null,q.isBeingOpened=!1)}).catch(function(Ce){q.dbOpenError=Ce;try{xe&&xe.abort()}catch{}return Y===q.openCanceller&&M._close(),Yt(Ce)}).finally(function(){q.openComplete=!0,me()}).then(function(){var Ce;return ce&&(Ce={},M.tables.forEach(function(pe){pe.schema.indexes.forEach(function(ye){ye.name&&(Ce["idb://".concat(M.name,"/").concat(pe.name,"/").concat(ye.name)]=new ln(-1/0,[[[]]]))}),Ce["idb://".concat(M.name,"/").concat(pe.name,"/")]=Ce["idb://".concat(M.name,"/").concat(pe.name,"/:dels")]=new ln(-1/0,[[[]]])}),Dn(zo).fire(Ce),ci(Ce,!0)),M})}function fi(M){function q(te){return M.next(te)}var K=X(q),Y=X(function(te){return M.throw(te)});function X(te){return function(fe){var ue=te(fe),fe=ue.value;return ue.done?fe:fe&&typeof fe.then=="function"?fe.then(K,Y):L(fe)?Promise.all(fe).then(K,Y):K(fe)}}return X(q)()}function $s(M,q,K){for(var Y=L(M)?M.slice():[M],X=0;X<K;++X)Y.push(q);return Y}var Ya={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(M){return C(C({},M),{table:function(q){var K=M.table(q),Y=K.schema,X={},te=[];function se(ce,Ce,pe){var ye=Go(ce),Se=X[ye]=X[ye]||[],Ee=ce==null?0:typeof ce=="string"?1:ce.length,Ae=0<Ce,Ae=C(C({},pe),{name:Ae?"".concat(ye,"(virtual-from:").concat(pe.name,")"):pe.name,lowLevelIndex:pe,isVirtual:Ae,keyTail:Ce,keyLength:Ee,extractKey:Xr(ce),unique:!Ae&&pe.unique});return Se.push(Ae),Ae.isPrimaryKey||te.push(Ae),1<Ee&&se(Ee===2?ce[0]:ce.slice(0,Ee-1),Ce+1,pe),Se.sort(function(Ie,ke){return Ie.keyTail-ke.keyTail}),Ae}q=se(Y.primaryKey.keyPath,0,Y.primaryKey),X[":id"]=[q];for(var ue=0,fe=Y.indexes;ue<fe.length;ue++){var me=fe[ue];se(me.keyPath,0,me)}function xe(ce){var Ce,pe=ce.query.index;return pe.isVirtual?C(C({},ce),{query:{index:pe.lowLevelIndex,range:(Ce=ce.query.range,pe=pe.keyTail,{type:Ce.type===1?2:Ce.type,lower:$s(Ce.lower,Ce.lowerOpen?M.MAX_KEY:M.MIN_KEY,pe),lowerOpen:!0,upper:$s(Ce.upper,Ce.upperOpen?M.MIN_KEY:M.MAX_KEY,pe),upperOpen:!0})}}):ce}return C(C({},K),{schema:C(C({},Y),{primaryKey:q,indexes:te,getIndexByKeyPath:function(ce){return(ce=X[Go(ce)])&&ce[0]}}),count:function(ce){return K.count(xe(ce))},query:function(ce){return K.query(xe(ce))},openCursor:function(ce){var Ce=ce.query.index,pe=Ce.keyTail,ye=Ce.isVirtual,Se=Ce.keyLength;return ye?K.openCursor(xe(ce)).then(function(Ae){return Ae&&Ee(Ae)}):K.openCursor(ce);function Ee(Ae){return Object.create(Ae,{continue:{value:function(Ie){Ie!=null?Ae.continue($s(Ie,ce.reverse?M.MAX_KEY:M.MIN_KEY,pe)):ce.unique?Ae.continue(Ae.key.slice(0,Se).concat(ce.reverse?M.MIN_KEY:M.MAX_KEY,pe)):Ae.continue()}},continuePrimaryKey:{value:function(Ie,ke){Ae.continuePrimaryKey($s(Ie,M.MAX_KEY,pe),ke)}},primaryKey:{get:function(){return Ae.primaryKey}},key:{get:function(){var Ie=Ae.key;return Se===1?Ie[0]:Ie.slice(0,Se)}},value:{get:function(){return Ae.value}}})}}})}})}};function Ns(M,q,K,Y){return K=K||{},Y=Y||"",$(M).forEach(function(X){var te,se,ue;k(q,X)?(te=M[X],se=q[X],typeof te=="object"&&typeof se=="object"&&te&&se?(ue=Ke(te))!==Ke(se)?K[Y+X]=q[X]:ue==="Object"?Ns(te,se,K,Y+X+"."):te!==se&&(K[Y+X]=q[X]):te!==se&&(K[Y+X]=q[X])):K[Y+X]=void 0}),$(q).forEach(function(X){k(M,X)||(K[Y+X]=q[X])}),K}function pi(M,q){return q.type==="delete"?q.keys:q.keys||q.values.map(M.extractKey)}var Xa={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(M){return C(C({},M),{table:function(q){var K=M.table(q),Y=K.schema.primaryKey;return C(C({},K),{mutate:function(X){var te=mt.trans,se=te.table(q).hook,ue=se.deleting,fe=se.creating,me=se.updating;switch(X.type){case"add":if(fe.fire===_t)break;return te._promise("readwrite",function(){return xe(X)},!0);case"put":if(fe.fire===_t&&me.fire===_t)break;return te._promise("readwrite",function(){return xe(X)},!0);case"delete":if(ue.fire===_t)break;return te._promise("readwrite",function(){return xe(X)},!0);case"deleteRange":if(ue.fire===_t)break;return te._promise("readwrite",function(){return(function ce(Ce,pe,ye){return K.query({trans:Ce,values:!1,query:{index:Y,range:pe},limit:ye}).then(function(Se){var Ee=Se.result;return xe({type:"delete",keys:Ee,trans:Ce}).then(function(Ae){return 0<Ae.numFailures?Promise.reject(Ae.failures[0]):Ee.length<ye?{failures:[],numFailures:0,lastResult:void 0}:ce(Ce,C(C({},pe),{lower:Ee[Ee.length-1],lowerOpen:!0}),ye)})})})(X.trans,X.range,1e4)},!0)}return K.mutate(X);function xe(ce){var Ce,pe,ye,Se=mt.trans,Ee=ce.keys||pi(Y,ce);if(!Ee)throw new Error("Keys missing");return(ce=ce.type==="add"||ce.type==="put"?C(C({},ce),{keys:Ee}):C({},ce)).type!=="delete"&&(ce.values=P([],ce.values)),ce.keys&&(ce.keys=P([],ce.keys)),Ce=K,ye=Ee,((pe=ce).type==="add"?Promise.resolve([]):Ce.getMany({trans:pe.trans,keys:ye,cache:"immutable"})).then(function(Ae){var Ie=Ee.map(function(ke,Me){var Ge,ot,tt,nt=Ae[Me],at={onerror:null,onsuccess:null};return ce.type==="delete"?ue.fire.call(at,ke,nt,Se):ce.type==="add"||nt===void 0?(Ge=fe.fire.call(at,ke,ce.values[Me],Se),ke==null&&Ge!=null&&(ce.keys[Me]=ke=Ge,Y.outbound||re(ce.values[Me],Y.keyPath,ke))):(Ge=Ns(nt,ce.values[Me]),(ot=me.fire.call(at,Ge,ke,nt,Se))&&(tt=ce.values[Me],Object.keys(ot).forEach(function(lt){k(tt,lt)?tt[lt]=ot[lt]:re(tt,lt,ot[lt])}))),at});return K.mutate(ce).then(function(ke){for(var Me=ke.failures,Ge=ke.results,ot=ke.numFailures,ke=ke.lastResult,tt=0;tt<Ee.length;++tt){var nt=(Ge||Ee)[tt],at=Ie[tt];nt==null?at.onerror&&at.onerror(Me[tt]):at.onsuccess&&at.onsuccess(ce.type==="put"&&Ae[tt]?ce.values[tt]:nt)}return{failures:Me,results:Ge,numFailures:ot,lastResult:ke}}).catch(function(ke){return Ie.forEach(function(Me){return Me.onerror&&Me.onerror(ke)}),Promise.reject(ke)})})}}})}})}};function Yi(M,q,K){try{if(!q||q.keys.length<M.length)return null;for(var Y=[],X=0,te=0;X<q.keys.length&&te<M.length;++X)Rt(q.keys[X],M[te])===0&&(Y.push(K?et(q.values[X]):q.values[X]),++te);return Y.length===M.length?Y:null}catch{return null}}var Za={stack:"dbcore",level:-1,create:function(M){return{table:function(q){var K=M.table(q);return C(C({},K),{getMany:function(Y){if(!Y.cache)return K.getMany(Y);var X=Yi(Y.keys,Y.trans._cache,Y.cache==="clone");return X?ut.resolve(X):K.getMany(Y).then(function(te){return Y.trans._cache={keys:Y.keys,values:Y.cache==="clone"?et(te):te},te})},mutate:function(Y){return Y.type!=="add"&&(Y.trans._cache=null),K.mutate(Y)}})}}}};function Xi(M,q){return M.trans.mode==="readonly"&&!!M.subscr&&!M.trans.explicit&&M.trans.db._options.cache!=="disabled"&&!q.schema.primaryKey.outbound}function Zi(M,q){switch(M){case"query":return q.values&&!q.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Ja={stack:"dbcore",level:0,name:"Observability",create:function(M){var q=M.schema.name,K=new ln(M.MIN_KEY,M.MAX_KEY);return C(C({},M),{transaction:function(Y,X,te){if(mt.subscr&&X!=="readonly")throw new Ue.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(mt.querier));return M.transaction(Y,X,te)},table:function(Y){var X=M.table(Y),te=X.schema,se=te.primaryKey,ce=te.indexes,ue=se.extractKey,fe=se.outbound,me=se.autoIncrement&&ce.filter(function(pe){return pe.compound&&pe.keyPath.includes(se.keyPath)}),xe=C(C({},X),{mutate:function(pe){function ye(lt){return lt="idb://".concat(q,"/").concat(Y,"/").concat(lt),ke[lt]||(ke[lt]=new ln)}var Se,Ee,Ae,Ie=pe.trans,ke=pe.mutatedParts||(pe.mutatedParts={}),Me=ye(""),Ge=ye(":dels"),ot=pe.type,at=pe.type==="deleteRange"?[pe.range]:pe.type==="delete"?[pe.keys]:pe.values.length<50?[pi(se,pe).filter(function(lt){return lt}),pe.values]:[],tt=at[0],nt=at[1],at=pe.trans._cache;return L(tt)?(Me.addKeys(tt),(at=ot==="delete"||tt.length===nt.length?Yi(tt,at):null)||Ge.addKeys(tt),(at||nt)&&(Se=ye,Ee=at,Ae=nt,te.indexes.forEach(function(lt){var ct=Se(lt.name||"");function At(Pt){return Pt!=null?lt.extractKey(Pt):null}function Nt(Pt){return lt.multiEntry&&L(Pt)?Pt.forEach(function(Ut){return ct.addKey(Ut)}):ct.addKey(Pt)}(Ee||Ae).forEach(function(Pt,un){var Ct=Ee&&At(Ee[un]),un=Ae&&At(Ae[un]);Rt(Ct,un)!==0&&(Ct!=null&&Nt(Ct),un!=null&&Nt(un))})}))):tt?(nt={from:(nt=tt.lower)!==null&&nt!==void 0?nt:M.MIN_KEY,to:(nt=tt.upper)!==null&&nt!==void 0?nt:M.MAX_KEY},Ge.add(nt),Me.add(nt)):(Me.add(K),Ge.add(K),te.indexes.forEach(function(lt){return ye(lt.name).add(K)})),X.mutate(pe).then(function(lt){return!tt||pe.type!=="add"&&pe.type!=="put"||(Me.addKeys(lt.results),me&&me.forEach(function(ct){for(var At=pe.values.map(function(Ct){return ct.extractKey(Ct)}),Nt=ct.keyPath.findIndex(function(Ct){return Ct===se.keyPath}),Pt=0,Ut=lt.results.length;Pt<Ut;++Pt)At[Pt][Nt]=lt.results[Pt];ye(ct.name).addKeys(At)})),Ie.mutatedParts=Ps(Ie.mutatedParts||{},ke),lt})}}),ce=function(ye){var Se=ye.query,ye=Se.index,Se=Se.range;return[ye,new ln((ye=Se.lower)!==null&&ye!==void 0?ye:M.MIN_KEY,(Se=Se.upper)!==null&&Se!==void 0?Se:M.MAX_KEY)]},Ce={get:function(pe){return[se,new ln(pe.key)]},getMany:function(pe){return[se,new ln().addKeys(pe.keys)]},count:ce,query:ce,openCursor:ce};return $(Ce).forEach(function(pe){xe[pe]=function(ye){var Se=mt.subscr,Ee=!!Se,Ae=Xi(mt,X)&&Zi(pe,ye)?ye.obsSet={}:Se;if(Ee){var Ie=function(nt){return nt="idb://".concat(q,"/").concat(Y,"/").concat(nt),Ae[nt]||(Ae[nt]=new ln)},ke=Ie(""),Me=Ie(":dels"),Se=Ce[pe](ye),Ee=Se[0],Se=Se[1];if((pe==="query"&&Ee.isPrimaryKey&&!ye.values?Me:Ie(Ee.name||"")).add(Se),!Ee.isPrimaryKey){if(pe!=="count"){var Ge=pe==="query"&&fe&&ye.values&&X.query(C(C({},ye),{values:!1}));return X[pe].apply(this,arguments).then(function(nt){if(pe==="query"){if(fe&&ye.values)return Ge.then(function(At){return At=At.result,ke.addKeys(At),nt});var at=ye.values?nt.result.map(ue):nt.result;(ye.values?ke:Me).addKeys(at)}else if(pe==="openCursor"){var lt=nt,ct=ye.values;return lt&&Object.create(lt,{key:{get:function(){return Me.addKey(lt.primaryKey),lt.key}},primaryKey:{get:function(){var At=lt.primaryKey;return Me.addKey(At),At}},value:{get:function(){return ct&&ke.addKey(lt.primaryKey),lt.value}}})}return nt})}Me.add(K)}}return X[pe].apply(this,arguments)}}),xe}})}};function Is(M,q,K){if(K.numFailures===0)return q;if(q.type==="deleteRange")return null;var Y=q.keys?q.keys.length:"values"in q&&q.values?q.values.length:1;return K.numFailures===Y?null:(q=C({},q),L(q.keys)&&(q.keys=q.keys.filter(function(X,te){return!(te in K.failures)})),"values"in q&&L(q.values)&&(q.values=q.values.filter(function(X,te){return!(te in K.failures)})),q)}function ro(M,q){return K=M,((Y=q).lower===void 0||(Y.lowerOpen?0<Rt(K,Y.lower):0<=Rt(K,Y.lower)))&&(M=M,(q=q).upper===void 0||(q.upperOpen?Rt(M,q.upper)<0:Rt(M,q.upper)<=0));var K,Y}function Ji(M,q,Ce,Y,X,te){if(!Ce||Ce.length===0)return M;var se=q.query.index,ue=se.multiEntry,fe=q.query.range,me=Y.schema.primaryKey.extractKey,xe=se.extractKey,ce=(se.lowLevelIndex||se).extractKey,Ce=Ce.reduce(function(pe,ye){var Se=pe,Ee=[];if(ye.type==="add"||ye.type==="put")for(var Ae=new ln,Ie=ye.values.length-1;0<=Ie;--Ie){var ke,Me=ye.values[Ie],Ge=me(Me);Ae.hasKey(Ge)||(ke=xe(Me),(ue&&L(ke)?ke.some(function(lt){return ro(lt,fe)}):ro(ke,fe))&&(Ae.addKey(Ge),Ee.push(Me)))}switch(ye.type){case"add":var ot=new ln().addKeys(q.values?pe.map(function(ct){return me(ct)}):pe),Se=pe.concat(q.values?Ee.filter(function(ct){return ct=me(ct),!ot.hasKey(ct)&&(ot.addKey(ct),!0)}):Ee.map(function(ct){return me(ct)}).filter(function(ct){return!ot.hasKey(ct)&&(ot.addKey(ct),!0)}));break;case"put":var tt=new ln().addKeys(ye.values.map(function(ct){return me(ct)}));Se=pe.filter(function(ct){return!tt.hasKey(q.values?me(ct):ct)}).concat(q.values?Ee:Ee.map(function(ct){return me(ct)}));break;case"delete":var nt=new ln().addKeys(ye.keys);Se=pe.filter(function(ct){return!nt.hasKey(q.values?me(ct):ct)});break;case"deleteRange":var at=ye.range;Se=pe.filter(function(ct){return!ro(me(ct),at)})}return Se},M);return Ce===M?M:(Ce.sort(function(pe,ye){return Rt(ce(pe),ce(ye))||Rt(me(pe),me(ye))}),q.limit&&q.limit<1/0&&(Ce.length>q.limit?Ce.length=q.limit:M.length===q.limit&&Ce.length<q.limit&&(X.dirty=!0)),te?Object.freeze(Ce):Ce)}function hi(M,q){return Rt(M.lower,q.lower)===0&&Rt(M.upper,q.upper)===0&&!!M.lowerOpen==!!q.lowerOpen&&!!M.upperOpen==!!q.upperOpen}function ea(M,q){return(function(K,Y,X,te){if(K===void 0)return Y!==void 0?-1:0;if(Y===void 0)return 1;if((Y=Rt(K,Y))===0){if(X&&te)return 0;if(X)return 1;if(te)return-1}return Y})(M.lower,q.lower,M.lowerOpen,q.lowerOpen)<=0&&0<=(function(K,Y,X,te){if(K===void 0)return Y!==void 0?1:0;if(Y===void 0)return-1;if((Y=Rt(K,Y))===0){if(X&&te)return 0;if(X)return-1;if(te)return 1}return Y})(M.upper,q.upper,M.upperOpen,q.upperOpen)}function ta(M,q,K,Y){M.subscribers.add(K),Y.addEventListener("abort",function(){var X,te;M.subscribers.delete(K),M.subscribers.size===0&&(X=M,te=q,setTimeout(function(){X.subscribers.size===0&&we(te,X)},3e3))})}var na={stack:"dbcore",level:0,name:"Cache",create:function(M){var q=M.schema.name;return C(C({},M),{transaction:function(K,Y,X){var te,se,ue=M.transaction(K,Y,X);return Y==="readwrite"&&(se=(te=new AbortController).signal,X=function(fe){return function(){if(te.abort(),Y==="readwrite"){for(var me=new Set,xe=0,ce=K;xe<ce.length;xe++){var Ce=ce[xe],pe=no["idb://".concat(q,"/").concat(Ce)];if(pe){var ye=M.table(Ce),Se=pe.optimisticOps.filter(function(ct){return ct.trans===ue});if(ue._explicit&&fe&&ue.mutatedParts)for(var Ee=0,Ae=Object.values(pe.queries.query);Ee<Ae.length;Ee++)for(var Ie=0,ke=(ot=Ae[Ee]).slice();Ie<ke.length;Ie++)li((tt=ke[Ie]).obsSet,ue.mutatedParts)&&(we(ot,tt),tt.subscribers.forEach(function(ct){return me.add(ct)}));else if(0<Se.length){pe.optimisticOps=pe.optimisticOps.filter(function(ct){return ct.trans!==ue});for(var Me=0,Ge=Object.values(pe.queries.query);Me<Ge.length;Me++)for(var ot,tt,nt,at=0,lt=(ot=Ge[Me]).slice();at<lt.length;at++)(tt=lt[at]).res!=null&&ue.mutatedParts&&(fe&&!tt.dirty?(nt=Object.isFrozen(tt.res),nt=Ji(tt.res,tt.req,Se,ye,tt,nt),tt.dirty?(we(ot,tt),tt.subscribers.forEach(function(ct){return me.add(ct)})):nt!==tt.res&&(tt.res=nt,tt.promise=ut.resolve({result:nt}))):(tt.dirty&&we(ot,tt),tt.subscribers.forEach(function(ct){return me.add(ct)})))}}}me.forEach(function(ct){return ct()})}}},ue.addEventListener("abort",X(!1),{signal:se}),ue.addEventListener("error",X(!1),{signal:se}),ue.addEventListener("complete",X(!0),{signal:se})),ue},table:function(K){var Y=M.table(K),X=Y.schema.primaryKey;return C(C({},Y),{mutate:function(te){var se=mt.trans;if(X.outbound||se.db._options.cache==="disabled"||se.explicit||se.idbtrans.mode!=="readwrite")return Y.mutate(te);var ue=no["idb://".concat(q,"/").concat(K)];return ue?(se=Y.mutate(te),te.type!=="add"&&te.type!=="put"||!(50<=te.values.length||pi(X,te).some(function(fe){return fe==null}))?(ue.optimisticOps.push(te),te.mutatedParts&&Os(te.mutatedParts),se.then(function(fe){0<fe.numFailures&&(we(ue.optimisticOps,te),(fe=Is(0,te,fe))&&ue.optimisticOps.push(fe),te.mutatedParts&&Os(te.mutatedParts))}),se.catch(function(){we(ue.optimisticOps,te),te.mutatedParts&&Os(te.mutatedParts)})):se.then(function(fe){var me=Is(0,C(C({},te),{values:te.values.map(function(xe,ce){var Ce;return fe.failures[ce]?xe:(xe=(Ce=X.keyPath)!==null&&Ce!==void 0&&Ce.includes(".")?et(xe):C({},xe),re(xe,X.keyPath,fe.results[ce]),xe)})}),fe);ue.optimisticOps.push(me),queueMicrotask(function(){return te.mutatedParts&&Os(te.mutatedParts)})}),se):Y.mutate(te)},query:function(te){if(!Xi(mt,Y)||!Zi("query",te))return Y.query(te);var se=((me=mt.trans)===null||me===void 0?void 0:me.db._options.cache)==="immutable",ce=mt,ue=ce.requery,fe=ce.signal,me=(function(ye,Se,Ee,Ae){var Ie=no["idb://".concat(ye,"/").concat(Se)];if(!Ie)return[];if(!(Se=Ie.queries[Ee]))return[null,!1,Ie,null];var ke=Se[(Ae.query?Ae.query.index.name:null)||""];if(!ke)return[null,!1,Ie,null];switch(Ee){case"query":var Me=ke.find(function(Ge){return Ge.req.limit===Ae.limit&&Ge.req.values===Ae.values&&hi(Ge.req.query.range,Ae.query.range)});return Me?[Me,!0,Ie,ke]:[ke.find(function(Ge){return("limit"in Ge.req?Ge.req.limit:1/0)>=Ae.limit&&(!Ae.values||Ge.req.values)&&ea(Ge.req.query.range,Ae.query.range)}),!1,Ie,ke];case"count":return Me=ke.find(function(Ge){return hi(Ge.req.query.range,Ae.query.range)}),[Me,!!Me,Ie,ke]}})(q,K,"query",te),xe=me[0],ce=me[1],Ce=me[2],pe=me[3];return xe&&ce?xe.obsSet=te.obsSet:(ce=Y.query(te).then(function(ye){var Se=ye.result;if(xe&&(xe.res=Se),se){for(var Ee=0,Ae=Se.length;Ee<Ae;++Ee)Object.freeze(Se[Ee]);Object.freeze(Se)}else ye.result=et(Se);return ye}).catch(function(ye){return pe&&xe&&we(pe,xe),Promise.reject(ye)}),xe={obsSet:te.obsSet,promise:ce,subscribers:new Set,type:"query",req:te,dirty:!1},pe?pe.push(xe):(pe=[xe],(Ce=Ce||(no["idb://".concat(q,"/").concat(K)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[te.query.index.name||""]=pe)),ta(xe,pe,ue,fe),xe.promise.then(function(ye){return{result:Ji(ye.result,te,Ce?.optimisticOps,Y,xe,se)}})}})}})}};function rs(M,q){return new Proxy(M,{get:function(K,Y,X){return Y==="db"?q:Reflect.get(K,Y,X)}})}var An=(Xt.prototype.version=function(M){if(isNaN(M)||M<.1)throw new Ue.Type("Given version is not a positive number");if(M=Math.round(10*M)/10,this.idbdb||this._state.isBeingOpened)throw new Ue.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,M);var q=this._versions,K=q.filter(function(Y){return Y._cfg.version===M})[0];return K||(K=new this.Version(M),q.push(K),q.sort(Fr),K.stores({}),this._state.autoSchema=!1,K)},Xt.prototype._whenReady=function(M){var q=this;return this.idbdb&&(this._state.openComplete||mt.letThrough||this._vip)?M():new ut(function(K,Y){if(q._state.openComplete)return Y(new Ue.DatabaseClosed(q._state.dbOpenError));if(!q._state.isBeingOpened){if(!q._state.autoOpen)return void Y(new Ue.DatabaseClosed);q.open().catch(_t)}q._state.dbReadyPromise.then(K,Y)}).then(M)},Xt.prototype.use=function(M){var q=M.stack,K=M.create,Y=M.level,X=M.name;return X&&this.unuse({stack:q,name:X}),M=this._middlewares[q]||(this._middlewares[q]=[]),M.push({stack:q,create:K,level:Y??10,name:X}),M.sort(function(te,se){return te.level-se.level}),this},Xt.prototype.unuse=function(M){var q=M.stack,K=M.name,Y=M.create;return q&&this._middlewares[q]&&(this._middlewares[q]=this._middlewares[q].filter(function(X){return Y?X.create!==Y:!!K&&X.name!==K})),this},Xt.prototype.open=function(){var M=this;return Nr(or,function(){return di(M)})},Xt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var M=this._state,q=Ir.indexOf(this);if(0<=q&&Ir.splice(q,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}M.isBeingOpened||(M.dbReadyPromise=new ut(function(K){M.dbReadyResolve=K}),M.openCanceller=new ut(function(K,Y){M.cancelOpen=Y}))},Xt.prototype.close=function(K){var q=(K===void 0?{disableAutoOpen:!0}:K).disableAutoOpen,K=this._state;q?(K.isBeingOpened&&K.cancelOpen(new Ue.DatabaseClosed),this._close(),K.autoOpen=!1,K.dbOpenError=new Ue.DatabaseClosed):(this._close(),K.autoOpen=this._options.autoOpen||K.isBeingOpened,K.openComplete=!1,K.dbOpenError=null)},Xt.prototype.delete=function(M){var q=this;M===void 0&&(M={disableAutoOpen:!0});var K=0<arguments.length&&typeof arguments[0]!="object",Y=this._state;return new ut(function(X,te){function se(){q.close(M);var ue=q._deps.indexedDB.deleteDatabase(q.name);ue.onsuccess=Ft(function(){var fe,me,xe;fe=q._deps,me=q.name,xe=fe.indexedDB,fe=fe.IDBKeyRange,Jo(xe)||me===qo||Zo(xe,fe).delete(me).catch(_t),X()}),ue.onerror=Rn(te),ue.onblocked=q._fireOnBlocked}if(K)throw new Ue.InvalidArgument("Invalid closeOptions argument to db.delete()");Y.isBeingOpened?Y.dbReadyPromise.then(se):se()})},Xt.prototype.backendDB=function(){return this.idbdb},Xt.prototype.isOpen=function(){return this.idbdb!==null},Xt.prototype.hasBeenClosed=function(){var M=this._state.dbOpenError;return M&&M.name==="DatabaseClosed"},Xt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Xt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Xt.prototype,"tables",{get:function(){var M=this;return $(this._allTables).map(function(q){return M._allTables[q]})},enumerable:!1,configurable:!0}),Xt.prototype.transaction=function(){var M=(function(q,K,Y){var X=arguments.length;if(X<2)throw new Ue.InvalidArgument("Too few arguments");for(var te=new Array(X-1);--X;)te[X-1]=arguments[X];return Y=te.pop(),[q,Le(te),Y]}).apply(this,arguments);return this._transaction.apply(this,M)},Xt.prototype._transaction=function(M,q,K){var Y=this,X=mt.trans;X&&X.db===this&&M.indexOf("!")===-1||(X=null);var te,se,ue=M.indexOf("?")!==-1;M=M.replace("!","").replace("?","");try{if(se=q.map(function(me){if(me=me instanceof Y.Table?me.name:me,typeof me!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return me}),M=="r"||M===xo)te=xo;else{if(M!="rw"&&M!=ni)throw new Ue.InvalidArgument("Invalid transaction mode: "+M);te=ni}if(X){if(X.mode===xo&&te===ni){if(!ue)throw new Ue.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");X=null}X&&se.forEach(function(me){if(X&&X.storeNames.indexOf(me)===-1){if(!ue)throw new Ue.SubTransaction("Table "+me+" not included in parent transaction.");X=null}}),ue&&X&&!X.active&&(X=null)}}catch(me){return X?X._promise(null,function(xe,ce){ce(me)}):Yt(me)}var fe=(function me(xe,ce,Ce,pe,ye){return ut.resolve().then(function(){var Se=mt.transless||mt,Ee=xe._createTransaction(ce,Ce,xe._dbSchema,pe);if(Ee.explicit=!0,Se={trans:Ee,transless:Se},pe)Ee.idbtrans=pe.idbtrans;else try{Ee.create(),Ee.idbtrans._explicit=!0,xe._state.PR1398_maxLoop=3}catch(ke){return ke.name===De.InvalidState&&xe.isOpen()&&0<--xe._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),xe.close({disableAutoOpen:!1}),xe.open().then(function(){return me(xe,ce,Ce,null,ye)})):Yt(ke)}var Ae,Ie=ie(ye);return Ie&&go(),Se=ut.follow(function(){var ke;(Ae=ye.call(Ee,Ee))&&(Ie?(ke=bn.bind(null,null),Ae.then(ke,ke)):typeof Ae.next=="function"&&typeof Ae.throw=="function"&&(Ae=fi(Ae)))},Se),(Ae&&typeof Ae.then=="function"?ut.resolve(Ae).then(function(ke){return Ee.active?ke:Yt(new Ue.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Se.then(function(){return Ae})).then(function(ke){return pe&&Ee._resolve(),Ee._completion.then(function(){return ke})}).catch(function(ke){return Ee._reject(ke),Yt(ke)})})}).bind(null,this,te,se,X,K);return X?X._promise(te,fe,"lock"):mt.trans?Nr(mt.transless,function(){return Y._whenReady(fe)}):this._whenReady(fe)},Xt.prototype.table=function(M){if(!k(this._allTables,M))throw new Ue.InvalidTable("Table ".concat(M," does not exist"));return this._allTables[M]},Xt);function Xt(M,q){var K=this;this._middlewares={},this.verno=0;var Y=Xt.dependencies;this._options=q=C({addons:Xt.addons,autoOpen:!0,indexedDB:Y.indexedDB,IDBKeyRange:Y.IDBKeyRange,cache:"cloned"},q),this._deps={indexedDB:q.indexedDB,IDBKeyRange:q.IDBKeyRange},Y=q.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var X,te,se,ue,fe,me={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:_t,dbReadyPromise:null,cancelOpen:_t,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:q.autoOpen};me.dbReadyPromise=new ut(function(ce){me.dbReadyResolve=ce}),me.openCanceller=new ut(function(ce,Ce){me.cancelOpen=Ce}),this._state=me,this.name=M,this.on=mr(this,"populate","blocked","versionchange","close",{ready:[Wn,_t]}),this.once=function(ce,Ce){var pe=function(){for(var ye=[],Se=0;Se<arguments.length;Se++)ye[Se]=arguments[Se];K.on(ce).unsubscribe(pe),Ce.apply(K,ye)};return K.on(ce,pe)},this.on.ready.subscribe=oe(this.on.ready.subscribe,function(ce){return function(Ce,pe){Xt.vip(function(){var ye,Se=K._state;Se.openComplete?(Se.dbOpenError||ut.resolve().then(Ce),pe&&ce(Ce)):Se.onReadyBeingFired?(Se.onReadyBeingFired.push(Ce),pe&&ce(Ce)):(ce(Ce),ye=K,pe||ce(function Ee(){ye.on.ready.unsubscribe(Ce),ye.on.ready.unsubscribe(Ee)}))})}}),this.Collection=(X=this,Lr(Ui.prototype,function(Ae,Ee){this.db=X;var pe=Uo,ye=null;if(Ee)try{pe=Ee()}catch(Ie){ye=Ie}var Se=Ae._ctx,Ee=Se.table,Ae=Ee.hook.reading.fire;this._ctx={table:Ee,index:Se.index,isPrimKey:!Se.index||Ee.schema.primKey.keyPath&&Se.index===Ee.schema.primKey.name,range:pe,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:ye,or:Se.or,valueMapper:Ae!==Ht?Ae:null}})),this.Table=(te=this,Lr(Vo.prototype,function(ce,Ce,pe){this.db=te,this._tx=pe,this.name=ce,this.schema=Ce,this.hook=te._allTables[ce]?te._allTables[ce].hook:mr(null,{creating:[Nn,_t],reading:[$n,Ht],updating:[vs,_t],deleting:[fr,_t]})})),this.Transaction=(se=this,Lr(Ga.prototype,function(ce,Ce,pe,ye,Se){var Ee=this;ce!=="readonly"&&Ce.forEach(function(Ae){Ae=(Ae=pe[Ae])===null||Ae===void 0?void 0:Ae.yProps,Ae&&(Ce=Ce.concat(Ae.map(function(Ie){return Ie.updatesTable})))}),this.db=se,this.mode=ce,this.storeNames=Ce,this.schema=pe,this.chromeTransactionDurability=ye,this.idbtrans=null,this.on=mr(this,"complete","error","abort"),this.parent=Se||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ut(function(Ae,Ie){Ee._resolve=Ae,Ee._reject=Ie}),this._completion.then(function(){Ee.active=!1,Ee.on.complete.fire()},function(Ae){var Ie=Ee.active;return Ee.active=!1,Ee.on.error.fire(Ae),Ee.parent?Ee.parent._reject(Ae):Ie&&Ee.idbtrans&&Ee.idbtrans.abort(),Yt(Ae)})})),this.Version=(ue=this,Lr(Xo.prototype,function(ce){this.db=ue,this._cfg={version:ce,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(fe=this,Lr(xr.prototype,function(ce,Ce,pe){if(this.db=fe,this._ctx={table:ce,index:Ce===":id"?null:Ce,or:pe},this._cmp=this._ascending=Rt,this._descending=function(ye,Se){return Rt(Se,ye)},this._max=function(ye,Se){return 0<Rt(ye,Se)?ye:Se},this._min=function(ye,Se){return Rt(ye,Se)<0?ye:Se},this._IDBKeyRange=fe._deps.IDBKeyRange,!this._IDBKeyRange)throw new Ue.MissingAPI})),this.on("versionchange",function(ce){0<ce.newVersion?console.warn("Another connection wants to upgrade database '".concat(K.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(K.name,"'. Closing db now to resume the delete request.")),K.close({disableAutoOpen:!1})}),this.on("blocked",function(ce){!ce.newVersion||ce.newVersion<ce.oldVersion?console.warn("Dexie.delete('".concat(K.name,"') was blocked")):console.warn("Upgrade '".concat(K.name,"' blocked by other connection holding version ").concat(ce.oldVersion/10))}),this._maxKey=vr(q.IDBKeyRange),this._createTransaction=function(ce,Ce,pe,ye){return new K.Transaction(ce,Ce,pe,K._options.chromeTransactionDurability,ye)},this._fireOnBlocked=function(ce){K.on("blocked").fire(ce),Ir.filter(function(Ce){return Ce.name===K.name&&Ce!==K&&!Ce._state.vcFired}).map(function(Ce){return Ce.on("versionchange").fire(ce)})},this.use(Za),this.use(na),this.use(Ja),this.use(Ya),this.use(Xa);var xe=new Proxy(this,{get:function(ce,Ce,pe){if(Ce==="_vip")return!0;if(Ce==="table")return function(Se){return rs(K.table(Se),xe)};var ye=Reflect.get(ce,Ce,pe);return ye instanceof Vo?rs(ye,xe):Ce==="tables"?ye.map(function(Se){return rs(Se,xe)}):Ce==="_createTransaction"?function(){return rs(ye.apply(this,arguments),xe)}:ye}});this.vip=xe,Y.forEach(function(ce){return ce(K)})}var ks,Fn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",ra=(Ls.prototype.subscribe=function(M,q,K){return this._subscribe(M&&typeof M!="function"?M:{next:M,error:q,complete:K})},Ls.prototype[Fn]=function(){return this},Ls);function Ls(M){this._subscribe=M}try{ks={indexedDB:O.indexedDB||O.mozIndexedDB||O.webkitIndexedDB||O.msIndexedDB,IDBKeyRange:O.IDBKeyRange||O.webkitIDBKeyRange}}catch{ks={indexedDB:null,IDBKeyRange:null}}function Co(M){var q,K=!1,Y=new ra(function(X){var te=ie(M),se,ue=!1,fe={},me={},xe={get closed(){return ue},unsubscribe:function(){ue||(ue=!0,se&&se.abort(),ce&&Dn.storagemutated.unsubscribe(pe))}};X.start&&X.start(xe);var ce=!1,Ce=function(){return ys(ye)},pe=function(Se){Ps(fe,Se),li(me,fe)&&Ce()},ye=function(){var Se,Ee,Ae;!ue&&ks.indexedDB&&(fe={},Se={},se&&se.abort(),se=new AbortController,Ae=(function(Ie){var ke=Qt();try{te&&go();var Me=Or(M,Ie);return Me=te?Me.finally(bn):Me}finally{ke&&hn()}})(Ee={subscr:Se,signal:se.signal,requery:Ce,querier:M,trans:null}),Promise.resolve(Ae).then(function(Ie){K=!0,q=Ie,ue||Ee.signal.aborted||(fe={},(function(ke){for(var Me in ke)if(k(ke,Me))return;return 1})(me=Se)||ce||(Dn(zo,pe),ce=!0),ys(function(){return!ue&&X.next&&X.next(Ie)}))},function(Ie){K=!1,["DatabaseClosedError","AbortError"].includes(Ie?.name)||ue||ys(function(){ue||X.error&&X.error(Ie)})}))};return setTimeout(Ce,0),xe});return Y.hasValue=function(){return K},Y.getValue=function(){return q},Y}var Yn=An;function mi(M){var q=Br;try{Br=!0,Dn.storagemutated.fire(M),ci(M,!0)}finally{Br=q}}H(Yn,C(C({},Ot),{delete:function(M){return new Yn(M,{addons:[]}).delete()},exists:function(M){return new Yn(M,{addons:[]}).open().then(function(q){return q.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(M){try{return q=Yn.dependencies,K=q.indexedDB,q=q.IDBKeyRange,(Jo(K)?Promise.resolve(K.databases()).then(function(Y){return Y.map(function(X){return X.name}).filter(function(X){return X!==qo})}):Zo(K,q).toCollection().primaryKeys()).then(M)}catch{return Yt(new Ue.MissingAPI)}var q,K},defineClass:function(){return function(M){D(this,M)}},ignoreTransaction:function(M){return mt.trans?Nr(mt.transless,M):M()},vip:eo,async:function(M){return function(){try{var q=fi(M.apply(this,arguments));return q&&typeof q.then=="function"?q:ut.resolve(q)}catch(K){return Yt(K)}}},spawn:function(M,q,K){try{var Y=fi(M.apply(K,q||[]));return Y&&typeof Y.then=="function"?Y:ut.resolve(Y)}catch(X){return Yt(X)}},currentTransaction:{get:function(){return mt.trans||null}},waitFor:function(M,q){return q=ut.resolve(typeof M=="function"?Yn.ignoreTransaction(M):M).timeout(q||6e4),mt.trans?mt.trans.waitFor(q):q},Promise:ut,debug:{get:function(){return Gt},set:function(M){po(M)}},derive:Q,extend:D,props:H,override:oe,Events:mr,on:Dn,liveQuery:Co,extendObservabilitySet:Ps,getByKeyPath:Te,setByKeyPath:re,delByKeyPath:function(M,q){typeof q=="string"?re(M,q,void 0):"length"in q&&[].map.call(q,function(K){re(M,K,void 0)})},shallowClone:he,deepClone:et,getObjectDiff:Ns,cmp:Rt,asap:ve,minKey:-1/0,addons:[],connections:Ir,errnames:De,dependencies:ks,cache:no,semVer:"4.2.0",version:"4.2.0".split(".").map(function(M){return parseInt(M)}).reduce(function(M,q,K){return M+q/Math.pow(10,2*K)})})),Yn.maxKey=vr(Yn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Dn(zo,function(M){Br||(M=new CustomEvent(Ss,{detail:M}),Br=!0,dispatchEvent(M),Br=!1)}),addEventListener(Ss,function(M){M=M.detail,Br||mi(M)}));var Er,Br=!1,gi=function(){};return typeof BroadcastChannel<"u"&&((gi=function(){(Er=new BroadcastChannel(Ss)).onmessage=function(M){return M.data&&mi(M.data)}})(),typeof Er.unref=="function"&&Er.unref(),Dn(zo,function(M){Br||Er.postMessage(M)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(M){if(!An.disableBfCache&&M.persisted){Gt&&console.debug("Dexie: handling persisted pagehide"),Er?.close();for(var q=0,K=Ir;q<K.length;q++)K[q].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(M){!An.disableBfCache&&M.persisted&&(Gt&&console.debug("Dexie: handling persisted pageshow"),gi(),mi({all:new ln(-1/0,[[]])}))})),ut.rejectionMapper=function(M,q){return!M||M instanceof Xe||M instanceof TypeError||M instanceof SyntaxError||!M.name||!Et[M.name]?M:(q=new Et[M.name](q||M.message,M),"stack"in M&&G(q,"stack",{get:function(){return this.inner.stack}}),q)},po(Gt),C(An,Object.freeze({__proto__:null,Dexie:An,liveQuery:Co,Entity:Fi,cmp:Rt,PropModification:Qr,replacePrefix:function(M,q){return new Qr({replacePrefix:[M,q]})},add:function(M){return new Qr({add:M})},remove:function(M){return new Qr({remove:M})},default:An,RangeSet:ln,mergeRanges:ns,rangesOverlap:Ki}),{default:An}),An})})(dexie_min$1)),dexie_min$1.exports}var dexie_minExports=requireDexie_min();const _Dexie=getDefaultExportFromCjs(dexie_minExports),DexieSymbol=Symbol.for("Dexie"),Dexie=globalThis[DexieSymbol]||(globalThis[DexieSymbol]=_Dexie);if(_Dexie.semVer!==Dexie.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${_Dexie.semVer} and ${Dexie.semVer}`);const{liveQuery,mergeRanges,rangesOverlap,RangeSet,cmp,Entity,PropModification,replacePrefix,add,remove,DexieYProvider}=Dexie;class QspiderDatabase extends Dexie{constructor(){super("QspiderDatabase"),this.version(2).stores({games:"id, title",gameResources:"++, game_id, &[game_id+path]",gameSaves:"++, game_id, &[game_id+key+slot], slot, [game_id+slot], [game_id+key]"})}}class WebStorage{constructor(){this.db=new QspiderDatabase}async prepareLoadConfig(y,w){return{url:`/qspider-files/${y}/`,entrypoint:w}}async getGames(){return(await this.db.games.toArray()).reduce((w,C)=>(w[C.id]=C,w),{})}async addGame(y,w){await this.db.games.put(w,y)}async updateGame(y,w){await this.db.games.update(y,w)}async removeGame(y){await this.db.transaction("rw",this.db.games,this.db.gameResources,async()=>{await this.db.games.delete(y),await this.db.gameResources.where("game_id").equals(y).delete()})}async addGameResource(y,w,C){const P=w.toLowerCase();await this.db.gameResources.where({game_id:y,path:P}).delete(),await this.db.gameResources.put({game_id:y,path:P,content:C})}async getGameResource(y,w){const C=w.toLowerCase();return(await this.db.gameResources.where({game_id:y,path:C}).first())?.content||null}async saveByKey(y,w,C){await this.db.gameSaves.where({game_id:y,key:w,slot:-1}).delete();const P={timestamp:Date.now(),game_id:y,key:w,slot:-1,data:C};await this.db.gameSaves.put(P)}async saveBySlot(y,w,C){await this.db.gameSaves.where({game_id:y,key:"",slot:w}).delete();const P={timestamp:Date.now(),game_id:y,key:"",slot:w,data:C};await this.db.gameSaves.put(P)}async hasSaveByKey(y,w){return await this.db.gameSaves.where({game_id:y,key:w}).count()>0}async hasSaveBySlot(y,w){return await this.db.gameSaves.where({game_id:y,slot:w}).count()>0}async getSaveDataByKey(y,w){return(await this.db.gameSaves.where({game_id:y,key:w}).first())?.data||null}async getSaveDataBySlot(y,w){return(await this.db.gameSaves.where({game_id:y,slot:w}).first())?.data||null}async getSavedSlots(y){return await this.db.gameSaves.where({game_id:y}).and(w=>w.slot>0).toArray()}async getNamedSaves(y){return await this.db.gameSaves.where({game_id:y}).and(w=>w.key!=="").toArray()}async clearSaveSlot(y,w){await this.db.gameSaves.where({game_id:y,key:"",slot:w}).delete()}async clearSaveKey(y,w){await this.db.gameSaves.where({game_id:y,key:w,slot:-1}).delete()}}let instance$1=null;function getStorage(){return instance$1||(instance$1=new WebStorage),instance$1}async function fetchTextContent(x,y){const w=`${x}${cleanPath(y)}`,C=await fetchProxyFallback(w);if(!C.ok)throw new Error("File not found");return await C.text()}async function fetchBinaryContent(x,y){const w=`${x}${cleanPath(y)}`,C=await fetchProxyFallback(w);if(!C.ok)throw new Error("File not found");return await C.arrayBuffer()}const CLASSIC_THEME="qspider:classic",AERO_THEME="qspider:aero",DEFAULT_LIST_FORMAT='<table><tr><td><img src="%IMAGE%"/></td><td style="width:100%;">%TEXT%</td></tr></table>',DEFAULT_SELECTED_LIST_FORMAT='<table><tr><td><img src="%IMAGE%"/></td><td style="width:100%;color:#0000FF;">%TEXT%</td></tr></table>',TEXT_PLACEHOLDER="%TEXT%",IMAGE_PLACEHOLDER="%IMAGE%",themeRegistry$=atom({},x=>({add(y,w){x.update(C=>({...C,[y]:w}))},reset(){x.update(y=>Object.entries(y).reduce((w,[C,P])=>(P.is_user_defined||(w[C]=P),w),{}))}})),currentTheme$=atom(CLASSIC_THEME),currentThemeData$=atom(x=>x(themeRegistry$)[x(currentTheme$)]??{}),defaultClassicTheme$=atom(x=>x(themeRegistry$)["qspider:classic"]),currentCssVariables$=atom(x=>x(currentThemeData$).css_variables??[]),currentCssLinks$=atom(x=>x(currentThemeData$).css_links??[]),currentScriptLinks$=atom(x=>x(currentThemeData$).script_links??[]),currentTranslations$=atom(x=>x(currentThemeData$).translations??[]);async function registerThemes(x){for(const y of x){const w=await fetchTextContent(baseUrl$.value,y),C=parseTheme(w);for(const[P,O]of Object.entries(C))themeRegistry$.actions.add(P,O)}}const defaultThemes=["themes/classic.html","themes/aero.html"];async function registerDefaultThemes(x){for(const y of defaultThemes){const w=await fetch(new URL(y,x).href).then(P=>P.text()),C=parseTheme(w,!1);for(const[P,O]of Object.entries(C))themeRegistry$.actions.add(P,O)}}const parser=new DOMParser;function parseTheme(x,y=!0){const w={},P=parser.parseFromString(x,"text/html").querySelectorAll("qspider-theme");for(const O of P){const $=O.getAttribute("name");if(!$){console.error("Malformed theme definition - missing theme name in qspider-theme tag");continue}w[$]={is_user_defined:y,css_variables:extractCssVariables(O),translations:extractTranslations(O),css_links:extractLinks(O,"css-link"),script_links:extractLinks(O,"script-link"),qsp_player:extractTagData(O,"qsp-player")}}return w}function extractTagData(x,y){const w=x.querySelector(y);if(w)return{attrs:extractAttributes(w),template:w.innerHTML.replace(/[ \t]*\r?\n[ \t]*/gm,"")}}function extractCssVariables(x){const y=[];for(const w of x.querySelectorAll("definitions qsp-css-variable")){const C=w.getAttribute("name"),P=w.getAttribute("from");!C||!P||y.push({name:C,from:P,defaultValue:w.getAttribute("default-value")||"",type:w.getAttribute("type"),unit:w.getAttribute("unit"),withSize:w.hasAttribute("with-size"),withContrast:w.hasAttribute("with-contrast"),withInverted:w.hasAttribute("with-inverted")})}return y}function extractTranslations(x){const y=[];for(const w of x.querySelectorAll("definitions qsp-translation")){const C=w.getAttribute("lang")||"",P=w.getAttribute("tkey")||"",O=w.getAttribute("value")||"";y.push({lang:C,tkey:P,value:O})}return y}function extractLinks(x,y){const w=[];for(const C of x.querySelectorAll(y)){const P=C.getAttribute("src");P&&w.push(P)}return w}const counterDelay$=atom(500),isPaused$=atom(!0),counterTimeout$=atom(),pauseStack=[];async function withCounterPaused(x){pauseStack.push(isPaused$.value);try{isPaused$.set(!0),await x()}finally{const y=pauseStack.pop()||!1;isPaused$.set(y)}}function scheduleCounter(){counterTimeout$.set(setTimeout(()=>{qspApi$.value?.execCounter(),scheduleCounter()},counterDelay$.value))}isPaused$.watch(x=>{x?clearTimeout(counterTimeout$.value):scheduleCounter()});counterDelay$.subscribe(()=>{clearTimeout(counterTimeout$.value),isPaused$.value||scheduleCounter()});var howler={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */var hasRequiredHowler;function requireHowler(){return hasRequiredHowler||(hasRequiredHowler=1,(function(x){(function(){var y=function(){this.init()};y.prototype={init:function(){var k=this||w;return k._counter=1e3,k._html5AudioPool=[],k.html5PoolSize=10,k._codecs={},k._howls=[],k._muted=!1,k._volume=1,k._canPlayEvent="canplaythrough",k._navigator=typeof window<"u"&&window.navigator?window.navigator:null,k.masterGain=null,k.noAudio=!1,k.usingWebAudio=!0,k.autoSuspend=!0,k.ctx=null,k.autoUnlock=!0,k._setup(),k},volume:function(k){var H=this||w;if(k=parseFloat(k),H.ctx||U(),typeof k<"u"&&k>=0&&k<=1){if(H._volume=k,H._muted)return H;H.usingWebAudio&&H.masterGain.gain.setValueAtTime(k,w.ctx.currentTime);for(var W=0;W<H._howls.length;W++)if(!H._howls[W]._webAudio)for(var G=H._howls[W]._getSoundIds(),Q=0;Q<G.length;Q++){var Z=H._howls[W]._soundById(G[Q]);Z&&Z._node&&(Z._node.volume=Z._volume*k)}return H}return H._volume},mute:function(k){var H=this||w;H.ctx||U(),H._muted=k,H.usingWebAudio&&H.masterGain.gain.setValueAtTime(k?0:H._volume,w.ctx.currentTime);for(var W=0;W<H._howls.length;W++)if(!H._howls[W]._webAudio)for(var G=H._howls[W]._getSoundIds(),Q=0;Q<G.length;Q++){var Z=H._howls[W]._soundById(G[Q]);Z&&Z._node&&(Z._node.muted=k?!0:Z._muted)}return H},stop:function(){for(var k=this||w,H=0;H<k._howls.length;H++)k._howls[H].stop();return k},unload:function(){for(var k=this||w,H=k._howls.length-1;H>=0;H--)k._howls[H].unload();return k.usingWebAudio&&k.ctx&&typeof k.ctx.close<"u"&&(k.ctx.close(),k.ctx=null,U()),k},codecs:function(k){return(this||w)._codecs[k.replace(/^x-/,"")]},_setup:function(){var k=this||w;if(k.state=k.ctx&&k.ctx.state||"suspended",k._autoSuspend(),!k.usingWebAudio)if(typeof Audio<"u")try{var H=new Audio;typeof H.oncanplaythrough>"u"&&(k._canPlayEvent="canplay")}catch{k.noAudio=!0}else k.noAudio=!0;try{var H=new Audio;H.muted&&(k.noAudio=!0)}catch{}return k.noAudio||k._setupCodecs(),k},_setupCodecs:function(){var k=this||w,H=null;try{H=typeof Audio<"u"?new Audio:null}catch{return k}if(!H||typeof H.canPlayType!="function")return k;var W=H.canPlayType("audio/mpeg;").replace(/^no$/,""),G=k._navigator?k._navigator.userAgent:"",Q=G.match(/OPR\/(\d+)/g),Z=Q&&parseInt(Q[0].split("/")[1],10)<33,J=G.indexOf("Safari")!==-1&&G.indexOf("Chrome")===-1,ne=G.match(/Version\/(.*?) /),oe=J&&ne&&parseInt(ne[1],10)<15;return k._codecs={mp3:!!(!Z&&(W||H.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!W,opus:!!H.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!H.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!H.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(H.canPlayType('audio/wav; codecs="1"')||H.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!H.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!H.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(H.canPlayType("audio/x-m4a;")||H.canPlayType("audio/m4a;")||H.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(H.canPlayType("audio/x-m4b;")||H.canPlayType("audio/m4b;")||H.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(H.canPlayType("audio/x-mp4;")||H.canPlayType("audio/mp4;")||H.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!oe&&H.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!oe&&H.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!H.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(H.canPlayType("audio/x-flac;")||H.canPlayType("audio/flac;")).replace(/^no$/,"")},k},_unlockAudio:function(){var k=this||w;if(!(k._audioUnlocked||!k.ctx)){k._audioUnlocked=!1,k.autoUnlock=!1,!k._mobileUnloaded&&k.ctx.sampleRate!==44100&&(k._mobileUnloaded=!0,k.unload()),k._scratchBuffer=k.ctx.createBuffer(1,1,22050);var H=function(W){for(;k._html5AudioPool.length<k.html5PoolSize;)try{var G=new Audio;G._unlocked=!0,k._releaseHtml5Audio(G)}catch{k.noAudio=!0;break}for(var Q=0;Q<k._howls.length;Q++)if(!k._howls[Q]._webAudio)for(var Z=k._howls[Q]._getSoundIds(),J=0;J<Z.length;J++){var ne=k._howls[Q]._soundById(Z[J]);ne&&ne._node&&!ne._node._unlocked&&(ne._node._unlocked=!0,ne._node.load())}k._autoResume();var oe=k.ctx.createBufferSource();oe.buffer=k._scratchBuffer,oe.connect(k.ctx.destination),typeof oe.start>"u"?oe.noteOn(0):oe.start(0),typeof k.ctx.resume=="function"&&k.ctx.resume(),oe.onended=function(){oe.disconnect(0),k._audioUnlocked=!0,document.removeEventListener("touchstart",H,!0),document.removeEventListener("touchend",H,!0),document.removeEventListener("click",H,!0),document.removeEventListener("keydown",H,!0);for(var ae=0;ae<k._howls.length;ae++)k._howls[ae]._emit("unlock")}};return document.addEventListener("touchstart",H,!0),document.addEventListener("touchend",H,!0),document.addEventListener("click",H,!0),document.addEventListener("keydown",H,!0),k}},_obtainHtml5Audio:function(){var k=this||w;if(k._html5AudioPool.length)return k._html5AudioPool.pop();var H=new Audio().play();return H&&typeof Promise<"u"&&(H instanceof Promise||typeof H.then=="function")&&H.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(k){var H=this||w;return k._unlocked&&H._html5AudioPool.push(k),H},_autoSuspend:function(){var k=this;if(!(!k.autoSuspend||!k.ctx||typeof k.ctx.suspend>"u"||!w.usingWebAudio)){for(var H=0;H<k._howls.length;H++)if(k._howls[H]._webAudio){for(var W=0;W<k._howls[H]._sounds.length;W++)if(!k._howls[H]._sounds[W]._paused)return k}return k._suspendTimer&&clearTimeout(k._suspendTimer),k._suspendTimer=setTimeout(function(){if(k.autoSuspend){k._suspendTimer=null,k.state="suspending";var G=function(){k.state="suspended",k._resumeAfterSuspend&&(delete k._resumeAfterSuspend,k._autoResume())};k.ctx.suspend().then(G,G)}},3e4),k}},_autoResume:function(){var k=this;if(!(!k.ctx||typeof k.ctx.resume>"u"||!w.usingWebAudio))return k.state==="running"&&k.ctx.state!=="interrupted"&&k._suspendTimer?(clearTimeout(k._suspendTimer),k._suspendTimer=null):k.state==="suspended"||k.state==="running"&&k.ctx.state==="interrupted"?(k.ctx.resume().then(function(){k.state="running";for(var H=0;H<k._howls.length;H++)k._howls[H]._emit("resume")}),k._suspendTimer&&(clearTimeout(k._suspendTimer),k._suspendTimer=null)):k.state==="suspending"&&(k._resumeAfterSuspend=!0),k}};var w=new y,C=function(k){var H=this;if(!k.src||k.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}H.init(k)};C.prototype={init:function(k){var H=this;return w.ctx||U(),H._autoplay=k.autoplay||!1,H._format=typeof k.format!="string"?k.format:[k.format],H._html5=k.html5||!1,H._muted=k.mute||!1,H._loop=k.loop||!1,H._pool=k.pool||5,H._preload=typeof k.preload=="boolean"||k.preload==="metadata"?k.preload:!0,H._rate=k.rate||1,H._sprite=k.sprite||{},H._src=typeof k.src!="string"?k.src:[k.src],H._volume=k.volume!==void 0?k.volume:1,H._xhr={method:k.xhr&&k.xhr.method?k.xhr.method:"GET",headers:k.xhr&&k.xhr.headers?k.xhr.headers:null,withCredentials:k.xhr&&k.xhr.withCredentials?k.xhr.withCredentials:!1},H._duration=0,H._state="unloaded",H._sounds=[],H._endTimers={},H._queue=[],H._playLock=!1,H._onend=k.onend?[{fn:k.onend}]:[],H._onfade=k.onfade?[{fn:k.onfade}]:[],H._onload=k.onload?[{fn:k.onload}]:[],H._onloaderror=k.onloaderror?[{fn:k.onloaderror}]:[],H._onplayerror=k.onplayerror?[{fn:k.onplayerror}]:[],H._onpause=k.onpause?[{fn:k.onpause}]:[],H._onplay=k.onplay?[{fn:k.onplay}]:[],H._onstop=k.onstop?[{fn:k.onstop}]:[],H._onmute=k.onmute?[{fn:k.onmute}]:[],H._onvolume=k.onvolume?[{fn:k.onvolume}]:[],H._onrate=k.onrate?[{fn:k.onrate}]:[],H._onseek=k.onseek?[{fn:k.onseek}]:[],H._onunlock=k.onunlock?[{fn:k.onunlock}]:[],H._onresume=[],H._webAudio=w.usingWebAudio&&!H._html5,typeof w.ctx<"u"&&w.ctx&&w.autoUnlock&&w._unlockAudio(),w._howls.push(H),H._autoplay&&H._queue.push({event:"play",action:function(){H.play()}}),H._preload&&H._preload!=="none"&&H.load(),H},load:function(){var k=this,H=null;if(w.noAudio){k._emit("loaderror",null,"No audio support.");return}typeof k._src=="string"&&(k._src=[k._src]);for(var W=0;W<k._src.length;W++){var G,Q;if(k._format&&k._format[W])G=k._format[W];else{if(Q=k._src[W],typeof Q!="string"){k._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}G=/^data:audio\/([^;,]+);/i.exec(Q),G||(G=/\.([^.]+)$/.exec(Q.split("?",1)[0])),G&&(G=G[1].toLowerCase())}if(G||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),G&&w.codecs(G)){H=k._src[W];break}}if(!H){k._emit("loaderror",null,"No codec support for selected audio sources.");return}return k._src=H,k._state="loading",window.location.protocol==="https:"&&H.slice(0,5)==="http:"&&(k._html5=!0,k._webAudio=!1),new P(k),k._webAudio&&$(k),k},play:function(k,H){var W=this,G=null;if(typeof k=="number")G=k,k=null;else{if(typeof k=="string"&&W._state==="loaded"&&!W._sprite[k])return null;if(typeof k>"u"&&(k="__default",!W._playLock)){for(var Q=0,Z=0;Z<W._sounds.length;Z++)W._sounds[Z]._paused&&!W._sounds[Z]._ended&&(Q++,G=W._sounds[Z]._id);Q===1?k=null:G=null}}var J=G?W._soundById(G):W._inactiveSound();if(!J)return null;if(G&&!k&&(k=J._sprite||"__default"),W._state!=="loaded"){J._sprite=k,J._ended=!1;var ne=J._id;return W._queue.push({event:"play",action:function(){W.play(ne)}}),ne}if(G&&!J._paused)return H||W._loadQueue("play"),J._id;W._webAudio&&w._autoResume();var oe=Math.max(0,J._seek>0?J._seek:W._sprite[k][0]/1e3),ae=Math.max(0,(W._sprite[k][0]+W._sprite[k][1])/1e3-oe),ve=ae*1e3/Math.abs(J._rate),Te=W._sprite[k][0]/1e3,re=(W._sprite[k][0]+W._sprite[k][1])/1e3;J._sprite=k,J._ended=!1;var he=function(){J._paused=!1,J._seek=oe,J._start=Te,J._stop=re,J._loop=!!(J._loop||W._sprite[k][2])};if(oe>=re){W._ended(J);return}var be=J._node;if(W._webAudio){var Le=function(){W._playLock=!1,he(),W._refreshBuffer(J);var je=J._muted||W._muted?0:J._volume;be.gain.setValueAtTime(je,w.ctx.currentTime),J._playStart=w.ctx.currentTime,typeof be.bufferSource.start>"u"?J._loop?be.bufferSource.noteGrainOn(0,oe,86400):be.bufferSource.noteGrainOn(0,oe,ae):J._loop?be.bufferSource.start(0,oe,86400):be.bufferSource.start(0,oe,ae),ve!==1/0&&(W._endTimers[J._id]=setTimeout(W._ended.bind(W,J),ve)),H||setTimeout(function(){W._emit("play",J._id),W._loadQueue()},0)};w.state==="running"&&w.ctx.state!=="interrupted"?Le():(W._playLock=!0,W.once("resume",Le),W._clearTimer(J._id))}else{var qe=function(){be.currentTime=oe,be.muted=J._muted||W._muted||w._muted||be.muted,be.volume=J._volume*w.volume(),be.playbackRate=J._rate;try{var je=be.play();if(je&&typeof Promise<"u"&&(je instanceof Promise||typeof je.then=="function")?(W._playLock=!0,he(),je.then(function(){W._playLock=!1,be._unlocked=!0,H?W._loadQueue():W._emit("play",J._id)}).catch(function(){W._playLock=!1,W._emit("playerror",J._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),J._ended=!0,J._paused=!0})):H||(W._playLock=!1,he(),W._emit("play",J._id)),be.playbackRate=J._rate,be.paused){W._emit("playerror",J._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}k!=="__default"||J._loop?W._endTimers[J._id]=setTimeout(W._ended.bind(W,J),ve):(W._endTimers[J._id]=function(){W._ended(J),be.removeEventListener("ended",W._endTimers[J._id],!1)},be.addEventListener("ended",W._endTimers[J._id],!1))}catch(Ke){W._emit("playerror",J._id,Ke)}};be.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(be.src=W._src,be.load());var Ye=window&&window.ejecta||!be.readyState&&w._navigator.isCocoonJS;if(be.readyState>=3||Ye)qe();else{W._playLock=!0,W._state="loading";var et=function(){W._state="loaded",qe(),be.removeEventListener(w._canPlayEvent,et,!1)};be.addEventListener(w._canPlayEvent,et,!1),W._clearTimer(J._id)}}return J._id},pause:function(k){var H=this;if(H._state!=="loaded"||H._playLock)return H._queue.push({event:"pause",action:function(){H.pause(k)}}),H;for(var W=H._getSoundIds(k),G=0;G<W.length;G++){H._clearTimer(W[G]);var Q=H._soundById(W[G]);if(Q&&!Q._paused&&(Q._seek=H.seek(W[G]),Q._rateSeek=0,Q._paused=!0,H._stopFade(W[G]),Q._node))if(H._webAudio){if(!Q._node.bufferSource)continue;typeof Q._node.bufferSource.stop>"u"?Q._node.bufferSource.noteOff(0):Q._node.bufferSource.stop(0),H._cleanBuffer(Q._node)}else(!isNaN(Q._node.duration)||Q._node.duration===1/0)&&Q._node.pause();arguments[1]||H._emit("pause",Q?Q._id:null)}return H},stop:function(k,H){var W=this;if(W._state!=="loaded"||W._playLock)return W._queue.push({event:"stop",action:function(){W.stop(k)}}),W;for(var G=W._getSoundIds(k),Q=0;Q<G.length;Q++){W._clearTimer(G[Q]);var Z=W._soundById(G[Q]);Z&&(Z._seek=Z._start||0,Z._rateSeek=0,Z._paused=!0,Z._ended=!0,W._stopFade(G[Q]),Z._node&&(W._webAudio?Z._node.bufferSource&&(typeof Z._node.bufferSource.stop>"u"?Z._node.bufferSource.noteOff(0):Z._node.bufferSource.stop(0),W._cleanBuffer(Z._node)):(!isNaN(Z._node.duration)||Z._node.duration===1/0)&&(Z._node.currentTime=Z._start||0,Z._node.pause(),Z._node.duration===1/0&&W._clearSound(Z._node))),H||W._emit("stop",Z._id))}return W},mute:function(k,H){var W=this;if(W._state!=="loaded"||W._playLock)return W._queue.push({event:"mute",action:function(){W.mute(k,H)}}),W;if(typeof H>"u")if(typeof k=="boolean")W._muted=k;else return W._muted;for(var G=W._getSoundIds(H),Q=0;Q<G.length;Q++){var Z=W._soundById(G[Q]);Z&&(Z._muted=k,Z._interval&&W._stopFade(Z._id),W._webAudio&&Z._node?Z._node.gain.setValueAtTime(k?0:Z._volume,w.ctx.currentTime):Z._node&&(Z._node.muted=w._muted?!0:k),W._emit("mute",Z._id))}return W},volume:function(){var k=this,H=arguments,W,G;if(H.length===0)return k._volume;if(H.length===1||H.length===2&&typeof H[1]>"u"){var Q=k._getSoundIds(),Z=Q.indexOf(H[0]);Z>=0?G=parseInt(H[0],10):W=parseFloat(H[0])}else H.length>=2&&(W=parseFloat(H[0]),G=parseInt(H[1],10));var J;if(typeof W<"u"&&W>=0&&W<=1){if(k._state!=="loaded"||k._playLock)return k._queue.push({event:"volume",action:function(){k.volume.apply(k,H)}}),k;typeof G>"u"&&(k._volume=W),G=k._getSoundIds(G);for(var ne=0;ne<G.length;ne++)J=k._soundById(G[ne]),J&&(J._volume=W,H[2]||k._stopFade(G[ne]),k._webAudio&&J._node&&!J._muted?J._node.gain.setValueAtTime(W,w.ctx.currentTime):J._node&&!J._muted&&(J._node.volume=W*w.volume()),k._emit("volume",J._id))}else return J=G?k._soundById(G):k._sounds[0],J?J._volume:0;return k},fade:function(k,H,W,G){var Q=this;if(Q._state!=="loaded"||Q._playLock)return Q._queue.push({event:"fade",action:function(){Q.fade(k,H,W,G)}}),Q;k=Math.min(Math.max(0,parseFloat(k)),1),H=Math.min(Math.max(0,parseFloat(H)),1),W=parseFloat(W),Q.volume(k,G);for(var Z=Q._getSoundIds(G),J=0;J<Z.length;J++){var ne=Q._soundById(Z[J]);if(ne){if(G||Q._stopFade(Z[J]),Q._webAudio&&!ne._muted){var oe=w.ctx.currentTime,ae=oe+W/1e3;ne._volume=k,ne._node.gain.setValueAtTime(k,oe),ne._node.gain.linearRampToValueAtTime(H,ae)}Q._startFadeInterval(ne,k,H,W,Z[J],typeof G>"u")}}return Q},_startFadeInterval:function(k,H,W,G,Q,Z){var J=this,ne=H,oe=W-H,ae=Math.abs(oe/.01),ve=Math.max(4,ae>0?G/ae:G),Te=Date.now();k._fadeTo=W,k._interval=setInterval(function(){var re=(Date.now()-Te)/G;Te=Date.now(),ne+=oe*re,ne=Math.round(ne*100)/100,oe<0?ne=Math.max(W,ne):ne=Math.min(W,ne),J._webAudio?k._volume=ne:J.volume(ne,k._id,!0),Z&&(J._volume=ne),(W<H&&ne<=W||W>H&&ne>=W)&&(clearInterval(k._interval),k._interval=null,k._fadeTo=null,J.volume(W,k._id),J._emit("fade",k._id))},ve)},_stopFade:function(k){var H=this,W=H._soundById(k);return W&&W._interval&&(H._webAudio&&W._node.gain.cancelScheduledValues(w.ctx.currentTime),clearInterval(W._interval),W._interval=null,H.volume(W._fadeTo,k),W._fadeTo=null,H._emit("fade",k)),H},loop:function(){var k=this,H=arguments,W,G,Q;if(H.length===0)return k._loop;if(H.length===1)if(typeof H[0]=="boolean")W=H[0],k._loop=W;else return Q=k._soundById(parseInt(H[0],10)),Q?Q._loop:!1;else H.length===2&&(W=H[0],G=parseInt(H[1],10));for(var Z=k._getSoundIds(G),J=0;J<Z.length;J++)Q=k._soundById(Z[J]),Q&&(Q._loop=W,k._webAudio&&Q._node&&Q._node.bufferSource&&(Q._node.bufferSource.loop=W,W&&(Q._node.bufferSource.loopStart=Q._start||0,Q._node.bufferSource.loopEnd=Q._stop,k.playing(Z[J])&&(k.pause(Z[J],!0),k.play(Z[J],!0)))));return k},rate:function(){var k=this,H=arguments,W,G;if(H.length===0)G=k._sounds[0]._id;else if(H.length===1){var Q=k._getSoundIds(),Z=Q.indexOf(H[0]);Z>=0?G=parseInt(H[0],10):W=parseFloat(H[0])}else H.length===2&&(W=parseFloat(H[0]),G=parseInt(H[1],10));var J;if(typeof W=="number"){if(k._state!=="loaded"||k._playLock)return k._queue.push({event:"rate",action:function(){k.rate.apply(k,H)}}),k;typeof G>"u"&&(k._rate=W),G=k._getSoundIds(G);for(var ne=0;ne<G.length;ne++)if(J=k._soundById(G[ne]),J){k.playing(G[ne])&&(J._rateSeek=k.seek(G[ne]),J._playStart=k._webAudio?w.ctx.currentTime:J._playStart),J._rate=W,k._webAudio&&J._node&&J._node.bufferSource?J._node.bufferSource.playbackRate.setValueAtTime(W,w.ctx.currentTime):J._node&&(J._node.playbackRate=W);var oe=k.seek(G[ne]),ae=(k._sprite[J._sprite][0]+k._sprite[J._sprite][1])/1e3-oe,ve=ae*1e3/Math.abs(J._rate);(k._endTimers[G[ne]]||!J._paused)&&(k._clearTimer(G[ne]),k._endTimers[G[ne]]=setTimeout(k._ended.bind(k,J),ve)),k._emit("rate",J._id)}}else return J=k._soundById(G),J?J._rate:k._rate;return k},seek:function(){var k=this,H=arguments,W,G;if(H.length===0)k._sounds.length&&(G=k._sounds[0]._id);else if(H.length===1){var Q=k._getSoundIds(),Z=Q.indexOf(H[0]);Z>=0?G=parseInt(H[0],10):k._sounds.length&&(G=k._sounds[0]._id,W=parseFloat(H[0]))}else H.length===2&&(W=parseFloat(H[0]),G=parseInt(H[1],10));if(typeof G>"u")return 0;if(typeof W=="number"&&(k._state!=="loaded"||k._playLock))return k._queue.push({event:"seek",action:function(){k.seek.apply(k,H)}}),k;var J=k._soundById(G);if(J)if(typeof W=="number"&&W>=0){var ne=k.playing(G);ne&&k.pause(G,!0),J._seek=W,J._ended=!1,k._clearTimer(G),!k._webAudio&&J._node&&!isNaN(J._node.duration)&&(J._node.currentTime=W);var oe=function(){ne&&k.play(G,!0),k._emit("seek",G)};if(ne&&!k._webAudio){var ae=function(){k._playLock?setTimeout(ae,0):oe()};setTimeout(ae,0)}else oe()}else if(k._webAudio){var ve=k.playing(G)?w.ctx.currentTime-J._playStart:0,Te=J._rateSeek?J._rateSeek-J._seek:0;return J._seek+(Te+ve*Math.abs(J._rate))}else return J._node.currentTime;return k},playing:function(k){var H=this;if(typeof k=="number"){var W=H._soundById(k);return W?!W._paused:!1}for(var G=0;G<H._sounds.length;G++)if(!H._sounds[G]._paused)return!0;return!1},duration:function(k){var H=this,W=H._duration,G=H._soundById(k);return G&&(W=H._sprite[G._sprite][1]/1e3),W},state:function(){return this._state},unload:function(){for(var k=this,H=k._sounds,W=0;W<H.length;W++)H[W]._paused||k.stop(H[W]._id),k._webAudio||(k._clearSound(H[W]._node),H[W]._node.removeEventListener("error",H[W]._errorFn,!1),H[W]._node.removeEventListener(w._canPlayEvent,H[W]._loadFn,!1),H[W]._node.removeEventListener("ended",H[W]._endFn,!1),w._releaseHtml5Audio(H[W]._node)),delete H[W]._node,k._clearTimer(H[W]._id);var G=w._howls.indexOf(k);G>=0&&w._howls.splice(G,1);var Q=!0;for(W=0;W<w._howls.length;W++)if(w._howls[W]._src===k._src||k._src.indexOf(w._howls[W]._src)>=0){Q=!1;break}return O&&Q&&delete O[k._src],w.noAudio=!1,k._state="unloaded",k._sounds=[],k=null,null},on:function(k,H,W,G){var Q=this,Z=Q["_on"+k];return typeof H=="function"&&Z.push(G?{id:W,fn:H,once:G}:{id:W,fn:H}),Q},off:function(k,H,W){var G=this,Q=G["_on"+k],Z=0;if(typeof H=="number"&&(W=H,H=null),H||W)for(Z=0;Z<Q.length;Z++){var J=W===Q[Z].id;if(H===Q[Z].fn&&J||!H&&J){Q.splice(Z,1);break}}else if(k)G["_on"+k]=[];else{var ne=Object.keys(G);for(Z=0;Z<ne.length;Z++)ne[Z].indexOf("_on")===0&&Array.isArray(G[ne[Z]])&&(G[ne[Z]]=[])}return G},once:function(k,H,W){var G=this;return G.on(k,H,W,1),G},_emit:function(k,H,W){for(var G=this,Q=G["_on"+k],Z=Q.length-1;Z>=0;Z--)(!Q[Z].id||Q[Z].id===H||k==="load")&&(setTimeout((function(J){J.call(this,H,W)}).bind(G,Q[Z].fn),0),Q[Z].once&&G.off(k,Q[Z].fn,Q[Z].id));return G._loadQueue(k),G},_loadQueue:function(k){var H=this;if(H._queue.length>0){var W=H._queue[0];W.event===k&&(H._queue.shift(),H._loadQueue()),k||W.action()}return H},_ended:function(k){var H=this,W=k._sprite;if(!H._webAudio&&k._node&&!k._node.paused&&!k._node.ended&&k._node.currentTime<k._stop)return setTimeout(H._ended.bind(H,k),100),H;var G=!!(k._loop||H._sprite[W][2]);if(H._emit("end",k._id),!H._webAudio&&G&&H.stop(k._id,!0).play(k._id),H._webAudio&&G){H._emit("play",k._id),k._seek=k._start||0,k._rateSeek=0,k._playStart=w.ctx.currentTime;var Q=(k._stop-k._start)*1e3/Math.abs(k._rate);H._endTimers[k._id]=setTimeout(H._ended.bind(H,k),Q)}return H._webAudio&&!G&&(k._paused=!0,k._ended=!0,k._seek=k._start||0,k._rateSeek=0,H._clearTimer(k._id),H._cleanBuffer(k._node),w._autoSuspend()),!H._webAudio&&!G&&H.stop(k._id,!0),H},_clearTimer:function(k){var H=this;if(H._endTimers[k]){if(typeof H._endTimers[k]!="function")clearTimeout(H._endTimers[k]);else{var W=H._soundById(k);W&&W._node&&W._node.removeEventListener("ended",H._endTimers[k],!1)}delete H._endTimers[k]}return H},_soundById:function(k){for(var H=this,W=0;W<H._sounds.length;W++)if(k===H._sounds[W]._id)return H._sounds[W];return null},_inactiveSound:function(){var k=this;k._drain();for(var H=0;H<k._sounds.length;H++)if(k._sounds[H]._ended)return k._sounds[H].reset();return new P(k)},_drain:function(){var k=this,H=k._pool,W=0,G=0;if(!(k._sounds.length<H)){for(G=0;G<k._sounds.length;G++)k._sounds[G]._ended&&W++;for(G=k._sounds.length-1;G>=0;G--){if(W<=H)return;k._sounds[G]._ended&&(k._webAudio&&k._sounds[G]._node&&k._sounds[G]._node.disconnect(0),k._sounds.splice(G,1),W--)}}},_getSoundIds:function(k){var H=this;if(typeof k>"u"){for(var W=[],G=0;G<H._sounds.length;G++)W.push(H._sounds[G]._id);return W}else return[k]},_refreshBuffer:function(k){var H=this;return k._node.bufferSource=w.ctx.createBufferSource(),k._node.bufferSource.buffer=O[H._src],k._panner?k._node.bufferSource.connect(k._panner):k._node.bufferSource.connect(k._node),k._node.bufferSource.loop=k._loop,k._loop&&(k._node.bufferSource.loopStart=k._start||0,k._node.bufferSource.loopEnd=k._stop||0),k._node.bufferSource.playbackRate.setValueAtTime(k._rate,w.ctx.currentTime),H},_cleanBuffer:function(k){var H=this,W=w._navigator&&w._navigator.vendor.indexOf("Apple")>=0;if(!k.bufferSource)return H;if(w._scratchBuffer&&k.bufferSource&&(k.bufferSource.onended=null,k.bufferSource.disconnect(0),W))try{k.bufferSource.buffer=w._scratchBuffer}catch{}return k.bufferSource=null,H},_clearSound:function(k){var H=/MSIE |Trident\//.test(w._navigator&&w._navigator.userAgent);H||(k.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var P=function(k){this._parent=k,this.init()};P.prototype={init:function(){var k=this,H=k._parent;return k._muted=H._muted,k._loop=H._loop,k._volume=H._volume,k._rate=H._rate,k._seek=0,k._paused=!0,k._ended=!0,k._sprite="__default",k._id=++w._counter,H._sounds.push(k),k.create(),k},create:function(){var k=this,H=k._parent,W=w._muted||k._muted||k._parent._muted?0:k._volume;return H._webAudio?(k._node=typeof w.ctx.createGain>"u"?w.ctx.createGainNode():w.ctx.createGain(),k._node.gain.setValueAtTime(W,w.ctx.currentTime),k._node.paused=!0,k._node.connect(w.masterGain)):w.noAudio||(k._node=w._obtainHtml5Audio(),k._errorFn=k._errorListener.bind(k),k._node.addEventListener("error",k._errorFn,!1),k._loadFn=k._loadListener.bind(k),k._node.addEventListener(w._canPlayEvent,k._loadFn,!1),k._endFn=k._endListener.bind(k),k._node.addEventListener("ended",k._endFn,!1),k._node.src=H._src,k._node.preload=H._preload===!0?"auto":H._preload,k._node.volume=W*w.volume(),k._node.load()),k},reset:function(){var k=this,H=k._parent;return k._muted=H._muted,k._loop=H._loop,k._volume=H._volume,k._rate=H._rate,k._seek=0,k._rateSeek=0,k._paused=!0,k._ended=!0,k._sprite="__default",k._id=++w._counter,k},_errorListener:function(){var k=this;k._parent._emit("loaderror",k._id,k._node.error?k._node.error.code:0),k._node.removeEventListener("error",k._errorFn,!1)},_loadListener:function(){var k=this,H=k._parent;H._duration=Math.ceil(k._node.duration*10)/10,Object.keys(H._sprite).length===0&&(H._sprite={__default:[0,H._duration*1e3]}),H._state!=="loaded"&&(H._state="loaded",H._emit("load"),H._loadQueue()),k._node.removeEventListener(w._canPlayEvent,k._loadFn,!1)},_endListener:function(){var k=this,H=k._parent;H._duration===1/0&&(H._duration=Math.ceil(k._node.duration*10)/10,H._sprite.__default[1]===1/0&&(H._sprite.__default[1]=H._duration*1e3),H._ended(k)),k._node.removeEventListener("ended",k._endFn,!1)}};var O={},$=function(k){var H=k._src;if(O[H]){k._duration=O[H].duration,B(k);return}if(/^data:[^;]+;base64,/.test(H)){for(var W=atob(H.split(",")[1]),G=new Uint8Array(W.length),Q=0;Q<W.length;++Q)G[Q]=W.charCodeAt(Q);D(G.buffer,k)}else{var Z=new XMLHttpRequest;Z.open(k._xhr.method,H,!0),Z.withCredentials=k._xhr.withCredentials,Z.responseType="arraybuffer",k._xhr.headers&&Object.keys(k._xhr.headers).forEach(function(J){Z.setRequestHeader(J,k._xhr.headers[J])}),Z.onload=function(){var J=(Z.status+"")[0];if(J!=="0"&&J!=="2"&&J!=="3"){k._emit("loaderror",null,"Failed loading audio file with status: "+Z.status+".");return}D(Z.response,k)},Z.onerror=function(){k._webAudio&&(k._html5=!0,k._webAudio=!1,k._sounds=[],delete O[H],k.load())},L(Z)}},L=function(k){try{k.send()}catch{k.onerror()}},D=function(k,H){var W=function(){H._emit("loaderror",null,"Decoding audio data failed.")},G=function(Q){Q&&H._sounds.length>0?(O[H._src]=Q,B(H,Q)):W()};typeof Promise<"u"&&w.ctx.decodeAudioData.length===1?w.ctx.decodeAudioData(k).then(G).catch(W):w.ctx.decodeAudioData(k,G,W)},B=function(k,H){H&&!k._duration&&(k._duration=H.duration),Object.keys(k._sprite).length===0&&(k._sprite={__default:[0,k._duration*1e3]}),k._state!=="loaded"&&(k._state="loaded",k._emit("load"),k._loadQueue())},U=function(){if(w.usingWebAudio){try{typeof AudioContext<"u"?w.ctx=new AudioContext:typeof webkitAudioContext<"u"?w.ctx=new webkitAudioContext:w.usingWebAudio=!1}catch{w.usingWebAudio=!1}w.ctx||(w.usingWebAudio=!1);var k=/iP(hone|od|ad)/.test(w._navigator&&w._navigator.platform),H=w._navigator&&w._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),W=H?parseInt(H[1],10):null;if(k&&W&&W<9){var G=/safari/.test(w._navigator&&w._navigator.userAgent.toLowerCase());w._navigator&&!G&&(w.usingWebAudio=!1)}w.usingWebAudio&&(w.masterGain=typeof w.ctx.createGain>"u"?w.ctx.createGainNode():w.ctx.createGain(),w.masterGain.gain.setValueAtTime(w._muted?0:w._volume,w.ctx.currentTime),w.masterGain.connect(w.ctx.destination)),w._setup()}};x.Howler=w,x.Howl=C,typeof commonjsGlobal<"u"?(commonjsGlobal.HowlerGlobal=y,commonjsGlobal.Howler=w,commonjsGlobal.Howl=C,commonjsGlobal.Sound=P):typeof window<"u"&&(window.HowlerGlobal=y,window.Howler=w,window.Howl=C,window.Sound=P)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(w){var C=this;if(!C.ctx||!C.ctx.listener)return C;for(var P=C._howls.length-1;P>=0;P--)C._howls[P].stereo(w);return C},HowlerGlobal.prototype.pos=function(w,C,P){var O=this;if(!O.ctx||!O.ctx.listener)return O;if(C=typeof C!="number"?O._pos[1]:C,P=typeof P!="number"?O._pos[2]:P,typeof w=="number")O._pos=[w,C,P],typeof O.ctx.listener.positionX<"u"?(O.ctx.listener.positionX.setTargetAtTime(O._pos[0],Howler.ctx.currentTime,.1),O.ctx.listener.positionY.setTargetAtTime(O._pos[1],Howler.ctx.currentTime,.1),O.ctx.listener.positionZ.setTargetAtTime(O._pos[2],Howler.ctx.currentTime,.1)):O.ctx.listener.setPosition(O._pos[0],O._pos[1],O._pos[2]);else return O._pos;return O},HowlerGlobal.prototype.orientation=function(w,C,P,O,$,L){var D=this;if(!D.ctx||!D.ctx.listener)return D;var B=D._orientation;if(C=typeof C!="number"?B[1]:C,P=typeof P!="number"?B[2]:P,O=typeof O!="number"?B[3]:O,$=typeof $!="number"?B[4]:$,L=typeof L!="number"?B[5]:L,typeof w=="number")D._orientation=[w,C,P,O,$,L],typeof D.ctx.listener.forwardX<"u"?(D.ctx.listener.forwardX.setTargetAtTime(w,Howler.ctx.currentTime,.1),D.ctx.listener.forwardY.setTargetAtTime(C,Howler.ctx.currentTime,.1),D.ctx.listener.forwardZ.setTargetAtTime(P,Howler.ctx.currentTime,.1),D.ctx.listener.upX.setTargetAtTime(O,Howler.ctx.currentTime,.1),D.ctx.listener.upY.setTargetAtTime($,Howler.ctx.currentTime,.1),D.ctx.listener.upZ.setTargetAtTime(L,Howler.ctx.currentTime,.1)):D.ctx.listener.setOrientation(w,C,P,O,$,L);else return B;return D},Howl.prototype.init=(function(w){return function(C){var P=this;return P._orientation=C.orientation||[1,0,0],P._stereo=C.stereo||null,P._pos=C.pos||null,P._pannerAttr={coneInnerAngle:typeof C.coneInnerAngle<"u"?C.coneInnerAngle:360,coneOuterAngle:typeof C.coneOuterAngle<"u"?C.coneOuterAngle:360,coneOuterGain:typeof C.coneOuterGain<"u"?C.coneOuterGain:0,distanceModel:typeof C.distanceModel<"u"?C.distanceModel:"inverse",maxDistance:typeof C.maxDistance<"u"?C.maxDistance:1e4,panningModel:typeof C.panningModel<"u"?C.panningModel:"HRTF",refDistance:typeof C.refDistance<"u"?C.refDistance:1,rolloffFactor:typeof C.rolloffFactor<"u"?C.rolloffFactor:1},P._onstereo=C.onstereo?[{fn:C.onstereo}]:[],P._onpos=C.onpos?[{fn:C.onpos}]:[],P._onorientation=C.onorientation?[{fn:C.onorientation}]:[],w.call(this,C)}})(Howl.prototype.init),Howl.prototype.stereo=function(w,C){var P=this;if(!P._webAudio)return P;if(P._state!=="loaded")return P._queue.push({event:"stereo",action:function(){P.stereo(w,C)}}),P;var O=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof C>"u")if(typeof w=="number")P._stereo=w,P._pos=[w,0,0];else return P._stereo;for(var $=P._getSoundIds(C),L=0;L<$.length;L++){var D=P._soundById($[L]);if(D)if(typeof w=="number")D._stereo=w,D._pos=[w,0,0],D._node&&(D._pannerAttr.panningModel="equalpower",(!D._panner||!D._panner.pan)&&y(D,O),O==="spatial"?typeof D._panner.positionX<"u"?(D._panner.positionX.setValueAtTime(w,Howler.ctx.currentTime),D._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),D._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):D._panner.setPosition(w,0,0):D._panner.pan.setValueAtTime(w,Howler.ctx.currentTime)),P._emit("stereo",D._id);else return D._stereo}return P},Howl.prototype.pos=function(w,C,P,O){var $=this;if(!$._webAudio)return $;if($._state!=="loaded")return $._queue.push({event:"pos",action:function(){$.pos(w,C,P,O)}}),$;if(C=typeof C!="number"?0:C,P=typeof P!="number"?-.5:P,typeof O>"u")if(typeof w=="number")$._pos=[w,C,P];else return $._pos;for(var L=$._getSoundIds(O),D=0;D<L.length;D++){var B=$._soundById(L[D]);if(B)if(typeof w=="number")B._pos=[w,C,P],B._node&&((!B._panner||B._panner.pan)&&y(B,"spatial"),typeof B._panner.positionX<"u"?(B._panner.positionX.setValueAtTime(w,Howler.ctx.currentTime),B._panner.positionY.setValueAtTime(C,Howler.ctx.currentTime),B._panner.positionZ.setValueAtTime(P,Howler.ctx.currentTime)):B._panner.setPosition(w,C,P)),$._emit("pos",B._id);else return B._pos}return $},Howl.prototype.orientation=function(w,C,P,O){var $=this;if(!$._webAudio)return $;if($._state!=="loaded")return $._queue.push({event:"orientation",action:function(){$.orientation(w,C,P,O)}}),$;if(C=typeof C!="number"?$._orientation[1]:C,P=typeof P!="number"?$._orientation[2]:P,typeof O>"u")if(typeof w=="number")$._orientation=[w,C,P];else return $._orientation;for(var L=$._getSoundIds(O),D=0;D<L.length;D++){var B=$._soundById(L[D]);if(B)if(typeof w=="number")B._orientation=[w,C,P],B._node&&(B._panner||(B._pos||(B._pos=$._pos||[0,0,-.5]),y(B,"spatial")),typeof B._panner.orientationX<"u"?(B._panner.orientationX.setValueAtTime(w,Howler.ctx.currentTime),B._panner.orientationY.setValueAtTime(C,Howler.ctx.currentTime),B._panner.orientationZ.setValueAtTime(P,Howler.ctx.currentTime)):B._panner.setOrientation(w,C,P)),$._emit("orientation",B._id);else return B._orientation}return $},Howl.prototype.pannerAttr=function(){var w=this,C=arguments,P,O,$;if(!w._webAudio)return w;if(C.length===0)return w._pannerAttr;if(C.length===1)if(typeof C[0]=="object")P=C[0],typeof O>"u"&&(P.pannerAttr||(P.pannerAttr={coneInnerAngle:P.coneInnerAngle,coneOuterAngle:P.coneOuterAngle,coneOuterGain:P.coneOuterGain,distanceModel:P.distanceModel,maxDistance:P.maxDistance,refDistance:P.refDistance,rolloffFactor:P.rolloffFactor,panningModel:P.panningModel}),w._pannerAttr={coneInnerAngle:typeof P.pannerAttr.coneInnerAngle<"u"?P.pannerAttr.coneInnerAngle:w._coneInnerAngle,coneOuterAngle:typeof P.pannerAttr.coneOuterAngle<"u"?P.pannerAttr.coneOuterAngle:w._coneOuterAngle,coneOuterGain:typeof P.pannerAttr.coneOuterGain<"u"?P.pannerAttr.coneOuterGain:w._coneOuterGain,distanceModel:typeof P.pannerAttr.distanceModel<"u"?P.pannerAttr.distanceModel:w._distanceModel,maxDistance:typeof P.pannerAttr.maxDistance<"u"?P.pannerAttr.maxDistance:w._maxDistance,refDistance:typeof P.pannerAttr.refDistance<"u"?P.pannerAttr.refDistance:w._refDistance,rolloffFactor:typeof P.pannerAttr.rolloffFactor<"u"?P.pannerAttr.rolloffFactor:w._rolloffFactor,panningModel:typeof P.pannerAttr.panningModel<"u"?P.pannerAttr.panningModel:w._panningModel});else return $=w._soundById(parseInt(C[0],10)),$?$._pannerAttr:w._pannerAttr;else C.length===2&&(P=C[0],O=parseInt(C[1],10));for(var L=w._getSoundIds(O),D=0;D<L.length;D++)if($=w._soundById(L[D]),$){var B=$._pannerAttr;B={coneInnerAngle:typeof P.coneInnerAngle<"u"?P.coneInnerAngle:B.coneInnerAngle,coneOuterAngle:typeof P.coneOuterAngle<"u"?P.coneOuterAngle:B.coneOuterAngle,coneOuterGain:typeof P.coneOuterGain<"u"?P.coneOuterGain:B.coneOuterGain,distanceModel:typeof P.distanceModel<"u"?P.distanceModel:B.distanceModel,maxDistance:typeof P.maxDistance<"u"?P.maxDistance:B.maxDistance,refDistance:typeof P.refDistance<"u"?P.refDistance:B.refDistance,rolloffFactor:typeof P.rolloffFactor<"u"?P.rolloffFactor:B.rolloffFactor,panningModel:typeof P.panningModel<"u"?P.panningModel:B.panningModel};var U=$._panner;U||($._pos||($._pos=w._pos||[0,0,-.5]),y($,"spatial"),U=$._panner),U.coneInnerAngle=B.coneInnerAngle,U.coneOuterAngle=B.coneOuterAngle,U.coneOuterGain=B.coneOuterGain,U.distanceModel=B.distanceModel,U.maxDistance=B.maxDistance,U.refDistance=B.refDistance,U.rolloffFactor=B.rolloffFactor,U.panningModel=B.panningModel}return w},Sound.prototype.init=(function(w){return function(){var C=this,P=C._parent;C._orientation=P._orientation,C._stereo=P._stereo,C._pos=P._pos,C._pannerAttr=P._pannerAttr,w.call(this),C._stereo?P.stereo(C._stereo):C._pos&&P.pos(C._pos[0],C._pos[1],C._pos[2],C._id)}})(Sound.prototype.init),Sound.prototype.reset=(function(w){return function(){var C=this,P=C._parent;return C._orientation=P._orientation,C._stereo=P._stereo,C._pos=P._pos,C._pannerAttr=P._pannerAttr,C._stereo?P.stereo(C._stereo):C._pos?P.pos(C._pos[0],C._pos[1],C._pos[2],C._id):C._panner&&(C._panner.disconnect(0),C._panner=void 0,P._refreshBuffer(C)),w.call(this)}})(Sound.prototype.reset);var y=function(w,C){C=C||"spatial",C==="spatial"?(w._panner=Howler.ctx.createPanner(),w._panner.coneInnerAngle=w._pannerAttr.coneInnerAngle,w._panner.coneOuterAngle=w._pannerAttr.coneOuterAngle,w._panner.coneOuterGain=w._pannerAttr.coneOuterGain,w._panner.distanceModel=w._pannerAttr.distanceModel,w._panner.maxDistance=w._pannerAttr.maxDistance,w._panner.refDistance=w._pannerAttr.refDistance,w._panner.rolloffFactor=w._pannerAttr.rolloffFactor,w._panner.panningModel=w._pannerAttr.panningModel,typeof w._panner.positionX<"u"?(w._panner.positionX.setValueAtTime(w._pos[0],Howler.ctx.currentTime),w._panner.positionY.setValueAtTime(w._pos[1],Howler.ctx.currentTime),w._panner.positionZ.setValueAtTime(w._pos[2],Howler.ctx.currentTime)):w._panner.setPosition(w._pos[0],w._pos[1],w._pos[2]),typeof w._panner.orientationX<"u"?(w._panner.orientationX.setValueAtTime(w._orientation[0],Howler.ctx.currentTime),w._panner.orientationY.setValueAtTime(w._orientation[1],Howler.ctx.currentTime),w._panner.orientationZ.setValueAtTime(w._orientation[2],Howler.ctx.currentTime)):w._panner.setOrientation(w._orientation[0],w._orientation[1],w._orientation[2])):(w._panner=Howler.ctx.createStereoPanner(),w._panner.pan.setValueAtTime(w._stereo,Howler.ctx.currentTime)),w._panner.connect(w._node),w._paused||w._parent.pause(w._id,!0).play(w._id,!0)}})()})(howler)),howler}var howlerExports=requireHowler();const normalizeVolume=x=>x>1?x*.01:x;let Sound$1=class Yc{constructor(y,w){this._state=0,this._error=null,this.isScheduled=!1,this.howl=new howlerExports.Howl({src:[y],volume:normalizeVolume(w),loop:!1,preload:!0,autoplay:!1,onload:()=>{this._state=2,this.isScheduled&&this.howl.play()},onloaderror:(C,P)=>{console.error(y,P),this._state=1,this._error=P},onplayerror:(C,P)=>{console.error(y,P),this._state=3,this._error=P},onplay:()=>{this._state=4},onend:()=>{this._state=6},onpause:()=>{this._state=5},onstop:()=>{this._state=6},onunlock:()=>{this._state===2&&this.isScheduled&&(this._state=4,this.howl.play())}})}static create(y,w){return new Yc(y,w)}get state(){return this._state}get error(){return this._error}get isPlaying(){return this._state===4||this._state===0}play(y){this.howl.volume(normalizeVolume(y)),this.isScheduled=!0,this.howl.state()==="loaded"&&!this.howl.playing()&&this.howl.play()}stop(){this.isScheduled=!1,this.howl.stop()}dispose(){this.isScheduled=!1,this.howl.stop(),this.howl.unload()}};const n=[1026,1027,8218,1107,8222,8230,8224,8225,8364,8240,1033,8249,1034,1036,1035,1039,1106,8216,8217,8220,8221,8226,8211,8212,32,8482,1113,8250,1114,1116,1115,1119,160,1038,1118,1032,164,1168,166,167,1025,169,1028,171,172,173,174,1031,176,177,1030,1110,1169,181,182,183,1105,8470,1108,187,1112,1029,1109,1111,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103];function t(x){return String.fromCharCode(x>=128?n[x-128]:x)}class e{constructor(y){this.cursor=0,this.content=void 0,this.view=void 0,this.isUnicode=void 0,this.content=y??new ArrayBuffer(256),this.view=new DataView(this.content),this.isUnicode=this.view.getUint8(1)===0}ensureSize(y){if(this.content.byteLength>=y)return;const w=new ArrayBuffer(2*this.content.byteLength);new Uint8Array(w).set(new Uint8Array(this.content)),this.content=w,this.view=new DataView(this.content)}finalize(){return this.content=this.content.slice(0,this.cursor),this.content}get eof(){return this.cursor>=this.content.byteLength}read(){const y=this.cursor;return this.cursor+=this.isUnicode?Uint16Array.BYTES_PER_ELEMENT:Uint8Array.BYTES_PER_ELEMENT,this.isUnicode?this.view.getUint16(y,!0):this.view.getUint8(y)}readLine(y=!0){const w=[];for(;!this.eof;){const C=this.read();if(C===13){this.read();break}w.push(y?C===-5?5:C+5:C)}return this.isUnicode?w.map(C=>String.fromCharCode(C)).join(""):w.map(t).join("")}write(y){this.ensureSize(this.cursor+Int16Array.BYTES_PER_ELEMENT);const w=this.cursor;this.cursor+=Int16Array.BYTES_PER_ELEMENT,this.view.setUint16(w,y,!0)}writeString(y,w=!0){const C=y.split("").map(P=>P.charCodeAt(0));for(const P of C.values())this.write(w?P===5?-5:P-5:P)}writeLine(y,w=!0){y&&this.writeString(y,w),this.writeString(`\r
`,!1)}seek(y){this.cursor=y}}const r=["'",'"'];function s(x){const y=[];let w=!1,C=null,P=[];const O=x.split(/\r?\n/);let $="",L=0;for(const D of O)if(w){if(!$&&!L&&D.startsWith("-")){w=!1,C&&(C.code=P,P=[],y.push(C),C=null);continue}P.push(D);const B=D.split("");for(let U=0;U<B.length;++U){const k=B[U];$?k==$&&(B[U+1]==$?U++:$=""):k=="{"?++L:k=="}"?L&&--L:r.includes(k)&&($=k)}}else D.startsWith("#")&&(w=!0,C={name:D.slice(1).trim(),description:[],code:[],actions:[]});return w&&C&&(C.code=P,y.push(C)),y}function o(x){const y=new e;y.writeLine("QSPGAME",!1),y.writeLine("@qsp/converters 1.0",!1),y.writeLine("No"),y.writeLine(String(x.length));for(const C of x){y.writeLine(C.name),y.writeLine(C.description.join(`\r
`)),y.writeLine(C.code.join(`\r
`)),y.writeLine(String(C.actions.length));for(const P of C.actions){var w;y.writeLine((w=P.image)!=null?w:""),y.writeLine(P.name),y.writeLine(P.code.join(`\r
`))}}return y.finalize()}function convertQsps(x){const y=new Uint8Array(x.slice(0,2)),w=y[0]===255&&y[1]===254?"utf-16le":"utf-8",P=new TextDecoder(w).decode(x);return o(s(P))}function prepareContent(x){return x.replace(/&gt([^;])/gi,(y,w)=>"& gt "+w).replace(/\\"/g,"&quot;")}function prepareList(x){return x.map(y=>({name:prepareContent(y.name),image:cleanPath(y.image)}))}function prepareObjectList(x){return x.map(y=>({name:prepareContent(y.name),image:cleanPath(y.image),title:prepareContent(y.title)}))}const clamp$2=function(x,y,w){return Math.min(Math.max(x,y),w)},VOLUME_STEP=10,sounds$=atom(new Map,x=>({isPlaying(y){const w=getFileKey(y);return!!x.value.get(w)?.isPlaying},play(y,w){const C=getFileKey(y);let P=x.value.get(C);P||(P=Sound$1.create(y,w),x.value.set(C,P)),P.play(w)},close(y){const w=getFileKey(y),C=x.value.get(w);C&&C.stop()},closeAll(){for(const y of x.value.values())y.stop()},clear(){for(const y of x.value.values())y.dispose();x.set(new Map)}})),muted$=atom(!1),volume$=atom(100,x=>({increase(){x.update(y=>clamp$2(y+VOLUME_STEP,0,100))},decrease(){x.update(y=>clamp$2(y-VOLUME_STEP,0,100))}}));muted$.watch(x=>{howlerExports.Howler.mute(x)});volume$.watch(x=>{howlerExports.Howler.volume(normalizeVolume(clamp$2(x,0,100)))});function getFileKey(x){return x.replace("/","__").toUpperCase()}function _extends(){return _extends=Object.assign||function(x){for(var y=1;y<arguments.length;y++){var w=arguments[y];for(var C in w)Object.prototype.hasOwnProperty.call(w,C)&&(x[C]=w[C])}return x},_extends.apply(this,arguments)}var Action;(function(x){x.Pop="POP",x.Push="PUSH",x.Replace="REPLACE"})(Action||(Action={}));var readOnly=function(x){return x},BeforeUnloadEventType="beforeunload",PopStateEventType="popstate";function createBrowserHistory(x){x===void 0&&(x={});var y=x,w=y.window,C=w===void 0?document.defaultView:w,P=C.history;function O(){var re=C.location,he=re.pathname,be=re.search,Le=re.hash,qe=P.state||{};return[qe.idx,readOnly({pathname:he,search:be,hash:Le,state:qe.usr||null,key:qe.key||"default"})]}var $=null;function L(){if($)W.call($),$=null;else{var re=Action.Pop,he=O(),be=he[0],Le=he[1];if(W.length){if(be!=null){var qe=U-be;qe&&($={action:re,location:Le,retry:function(){ve(qe*-1)}},ve(qe))}}else ne(re)}}C.addEventListener(PopStateEventType,L);var D=Action.Pop,B=O(),U=B[0],k=B[1],H=createEvents(),W=createEvents();U==null&&(U=0,P.replaceState(_extends({},P.state,{idx:U}),""));function G(re){return typeof re=="string"?re:createPath(re)}function Q(re,he){return he===void 0&&(he=null),readOnly(_extends({pathname:k.pathname,hash:"",search:""},typeof re=="string"?parsePath(re):re,{state:he,key:createKey()}))}function Z(re,he){return[{usr:re.state,key:re.key,idx:he},G(re)]}function J(re,he,be){return!W.length||(W.call({action:re,location:he,retry:be}),!1)}function ne(re){D=re;var he=O();U=he[0],k=he[1],H.call({action:D,location:k})}function oe(re,he){var be=Action.Push,Le=Q(re,he);function qe(){oe(re,he)}if(J(be,Le,qe)){var Ye=Z(Le,U+1),et=Ye[0],je=Ye[1];try{P.pushState(et,"",je)}catch{C.location.assign(je)}ne(be)}}function ae(re,he){var be=Action.Replace,Le=Q(re,he);function qe(){ae(re,he)}if(J(be,Le,qe)){var Ye=Z(Le,U),et=Ye[0],je=Ye[1];P.replaceState(et,"",je),ne(be)}}function ve(re){P.go(re)}var Te={get action(){return D},get location(){return k},createHref:G,push:oe,replace:ae,go:ve,back:function(){ve(-1)},forward:function(){ve(1)},listen:function(he){return H.push(he)},block:function(he){var be=W.push(he);return W.length===1&&C.addEventListener(BeforeUnloadEventType,promptBeforeUnload),function(){be(),W.length||C.removeEventListener(BeforeUnloadEventType,promptBeforeUnload)}}};return Te}function promptBeforeUnload(x){x.preventDefault(),x.returnValue=""}function createEvents(){var x=[];return{get length(){return x.length},push:function(w){return x.push(w),function(){x=x.filter(function(C){return C!==w})}},call:function(w){x.forEach(function(C){return C&&C(w)})}}}function createKey(){return Math.random().toString(36).substr(2,8)}function createPath(x){var y=x.pathname,w=y===void 0?"/":y,C=x.search,P=C===void 0?"":C,O=x.hash,$=O===void 0?"":O;return P&&P!=="?"&&(w+=P.charAt(0)==="?"?P:"?"+P),$&&$!=="#"&&(w+=$.charAt(0)==="#"?$:"#"+$),w}function parsePath(x){var y={};if(x){var w=x.indexOf("#");w>=0&&(y.hash=x.substr(w),x=x.substr(0,w));var C=x.indexOf("?");C>=0&&(y.search=x.substr(C),x=x.substr(0,C)),x&&(y.pathname=x)}return y}var browser=createBrowserHistory();const saveLoadedCallback$=create(),gameSavedCallback$=create(),saveSlots$=create([]),namedSlots$=create([]),requestedAction$=create(null),QUICK_SAVE_KEY="__quicksave_qspider__";async function loadSaveList(){const x=currentGameEntry$.value;if(!x){saveSlots$.set([]),namedSlots$.set([]);return}const y=await getStorage().getSavedSlots(x.id);saveSlots$.set(y||[]);const w=await getStorage().getNamedSaves(x.id);namedSlots$.set(w||[])}async function saveToSlot(x){const y=currentGameEntry$.value;if(!y)return;const w=qspApi$.value?.saveGame();w&&await getStorage().saveBySlot(y.id,x,w);const C=gameSavedCallback$.value;C?.(),gameSavedCallback$.set(null),requestedAction$.set(null),await loadSaveList()}async function saveToPath(x){const y=currentGameEntry$.value;if(!y)return;const w=qspApi$.value?.saveGame();w&&await getStorage().saveByKey(y.id,x,w);const C=gameSavedCallback$.value;C?.(),gameSavedCallback$.set(null),requestedAction$.set(null),await loadSaveList()}async function restoreFromSlot(x){const y=currentGameEntry$.value;if(!y)return;const w=await getStorage().getSaveDataBySlot(y.id,x),C=saveLoadedCallback$.value;C?.(),saveLoadedCallback$.set(null),requestedAction$.set(null),w&&qspApi$.value?.loadSave(w)}async function restoreFromPath(x){const y=currentGameEntry$.value;if(!y)return;const w=await getStorage().getSaveDataByKey(y.id,x),C=saveLoadedCallback$.value;C?.(),saveLoadedCallback$.set(null),requestedAction$.set(null),w&&qspApi$.value?.loadSave(w)}async function clearSlot(x){const y=currentGameEntry$.value;y&&(await getStorage().clearSaveSlot(y.id,x),await loadSaveList())}async function clearPath(x){const y=currentGameEntry$.value;y&&(await getStorage().clearSaveKey(y.id,x),await loadSaveList())}async function quickSave(){if(qspApi$.value?.readVariable("NOSAVE"))return;const y=currentGameEntry$.value;y&&await withCounterPaused(async()=>{const w=qspApi$.value?.saveGame();w&&await getStorage().saveByKey(y.id,QUICK_SAVE_KEY,w)})}async function quickLoad(){const x=currentGameEntry$.value;x&&await withCounterPaused(async()=>{const y=await getStorage().getSaveDataByKey(x.id,QUICK_SAVE_KEY);y&&(qspApi$.value?.loadSave(y),onRestore())})}async function onSaveCommand(x,y){const{slot_index:w,save_path:C}=y;switch(x){case"load":w>0?await restoreFromSlot(w):C&&await restoreFromPath(C),onRestore(),closePauseScreen();break;case"save":w>0?await saveToSlot(w):C&&await saveToPath(C),closePauseScreen();break;case"clear":w>0?clearSlot(w):C&&clearPath(C);break;default:console.error(`Unknown save action: ${x}`)}}const isPauseScreenVisible$=atom(!1),pauseScreenCurrentPanel$=atom("credits");function openPauseScreen(){const x=new URLSearchParams(browser.location.search);x.set("pause","true"),browser.push({search:x.toString()})}function onOpenPauseScreen(){isPauseScreenVisible$.set(!0)}function closePauseScreen(){if(window.history.length>1)return browser.back();const x=new URLSearchParams(browser.location.search);x.delete("pause"),browser.push({search:x.toString()})}function onClosePauseScreen(){isPauseScreenVisible$.set(!1),saveLoadedCallback$.value&&(saveLoadedCallback$.value(),saveLoadedCallback$.set(null)),gameSavedCallback$.value&&(gameSavedCallback$.value(),gameSavedCallback$.set(null))}isPauseScreenVisible$.subscribe(x=>{x?isPaused$.set(!0):isPaused$.set(!1)});var mousetrap={exports:{}},hasRequiredMousetrap;function requireMousetrap(){return hasRequiredMousetrap||(hasRequiredMousetrap=1,(function(x){(function(y,w,C){if(!y)return;for(var P={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},O={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},$={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},L={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},D,B=1;B<20;++B)P[111+B]="f"+B;for(B=0;B<=9;++B)P[B+96]=B.toString();function U(re,he,be){if(re.addEventListener){re.addEventListener(he,be,!1);return}re.attachEvent("on"+he,be)}function k(re){if(re.type=="keypress"){var he=String.fromCharCode(re.which);return re.shiftKey||(he=he.toLowerCase()),he}return P[re.which]?P[re.which]:O[re.which]?O[re.which]:String.fromCharCode(re.which).toLowerCase()}function H(re,he){return re.sort().join(",")===he.sort().join(",")}function W(re){var he=[];return re.shiftKey&&he.push("shift"),re.altKey&&he.push("alt"),re.ctrlKey&&he.push("ctrl"),re.metaKey&&he.push("meta"),he}function G(re){if(re.preventDefault){re.preventDefault();return}re.returnValue=!1}function Q(re){if(re.stopPropagation){re.stopPropagation();return}re.cancelBubble=!0}function Z(re){return re=="shift"||re=="ctrl"||re=="alt"||re=="meta"}function J(){if(!D){D={};for(var re in P)re>95&&re<112||P.hasOwnProperty(re)&&(D[P[re]]=re)}return D}function ne(re,he,be){return be||(be=J()[re]?"keydown":"keypress"),be=="keypress"&&he.length&&(be="keydown"),be}function oe(re){return re==="+"?["+"]:(re=re.replace(/\+{2}/g,"+plus"),re.split("+"))}function ae(re,he){var be,Le,qe,Ye=[];for(be=oe(re),qe=0;qe<be.length;++qe)Le=be[qe],L[Le]&&(Le=L[Le]),he&&he!="keypress"&&$[Le]&&(Le=$[Le],Ye.push("shift")),Z(Le)&&Ye.push(Le);return he=ne(Le,Ye,he),{key:Le,modifiers:Ye,action:he}}function ve(re,he){return re===null||re===w?!1:re===he?!0:ve(re.parentNode,he)}function Te(re){var he=this;if(re=re||w,!(he instanceof Te))return new Te(re);he.target=re,he._callbacks={},he._directMap={};var be={},Le,qe=!1,Ye=!1,et=!1;function je(ie){ie=ie||{};var Re=!1,Xe;for(Xe in be){if(ie[Xe]){Re=!0;continue}be[Xe]=0}Re||(et=!1)}function Ke(ie,Re,Xe,Ze,st,dt){var De,it,Ue=[],Et=Xe.type;if(!he._callbacks[ie])return[];for(Et=="keyup"&&Z(ie)&&(Re=[ie]),De=0;De<he._callbacks[ie].length;++De)if(it=he._callbacks[ie][De],!(!Ze&&it.seq&&be[it.seq]!=it.level)&&Et==it.action&&(Et=="keypress"&&!Xe.metaKey&&!Xe.ctrlKey||H(Re,it.modifiers))){var Ot=!Ze&&it.combo==st,_t=Ze&&it.seq==Ze&&it.level==dt;(Ot||_t)&&he._callbacks[ie].splice(De,1),Ue.push(it)}return Ue}function Ve(ie,Re,Xe,Ze){he.stopCallback(Re,Re.target||Re.srcElement,Xe,Ze)||ie(Re,Xe)===!1&&(G(Re),Q(Re))}he._handleKey=function(ie,Re,Xe){var Ze=Ke(ie,Re,Xe),st,dt={},De=0,it=!1;for(st=0;st<Ze.length;++st)Ze[st].seq&&(De=Math.max(De,Ze[st].level));for(st=0;st<Ze.length;++st){if(Ze[st].seq){if(Ze[st].level!=De)continue;it=!0,dt[Ze[st].seq]=1,Ve(Ze[st].callback,Xe,Ze[st].combo,Ze[st].seq);continue}it||Ve(Ze[st].callback,Xe,Ze[st].combo)}var Ue=Xe.type=="keypress"&&Ye;Xe.type==et&&!Z(ie)&&!Ue&&je(dt),Ye=it&&Xe.type=="keydown"};function We(ie){typeof ie.which!="number"&&(ie.which=ie.keyCode);var Re=k(ie);if(Re){if(ie.type=="keyup"&&qe===Re){qe=!1;return}he.handleKey(Re,W(ie),ie)}}function we(){clearTimeout(Le),Le=setTimeout(je,1e3)}function Oe(ie,Re,Xe,Ze){be[ie]=0;function st(Et){return function(){et=Et,++be[ie],we()}}function dt(Et){Ve(Xe,Et,ie),Ze!=="keyup"&&(qe=k(Et)),setTimeout(je,10)}for(var De=0;De<Re.length;++De){var it=De+1===Re.length,Ue=it?dt:st(Ze||ae(Re[De+1]).action);He(Re[De],Ue,Ze,ie,De)}}function He(ie,Re,Xe,Ze,st){he._directMap[ie+":"+Xe]=Re,ie=ie.replace(/\s+/g," ");var dt=ie.split(" "),De;if(dt.length>1){Oe(ie,dt,Re,Xe);return}De=ae(ie,Xe),he._callbacks[De.key]=he._callbacks[De.key]||[],Ke(De.key,De.modifiers,{type:De.action},Ze,ie,st),he._callbacks[De.key][Ze?"unshift":"push"]({callback:Re,modifiers:De.modifiers,action:De.action,seq:Ze,level:st,combo:ie})}he._bindMultiple=function(ie,Re,Xe){for(var Ze=0;Ze<ie.length;++Ze)He(ie[Ze],Re,Xe)},U(re,"keypress",We),U(re,"keydown",We),U(re,"keyup",We)}Te.prototype.bind=function(re,he,be){var Le=this;return re=re instanceof Array?re:[re],Le._bindMultiple.call(Le,re,he,be),Le},Te.prototype.unbind=function(re,he){var be=this;return be.bind.call(be,re,function(){},he)},Te.prototype.trigger=function(re,he){var be=this;return be._directMap[re+":"+he]&&be._directMap[re+":"+he]({},re),be},Te.prototype.reset=function(){var re=this;return re._callbacks={},re._directMap={},re},Te.prototype.stopCallback=function(re,he){var be=this;if((" "+he.className+" ").indexOf(" mousetrap ")>-1||ve(he,be.target))return!1;if("composedPath"in re&&typeof re.composedPath=="function"){var Le=re.composedPath()[0];Le!==re.target&&(he=Le)}return he.tagName=="INPUT"||he.tagName=="SELECT"||he.tagName=="TEXTAREA"||he.isContentEditable},Te.prototype.handleKey=function(){var re=this;return re._handleKey.apply(re,arguments)},Te.addKeycodes=function(re){for(var he in re)re.hasOwnProperty(he)&&(P[he]=re[he]);D=null},Te.init=function(){var re=Te(w);for(var he in re)he.charAt(0)!=="_"&&(Te[he]=(function(be){return function(){return re[be].apply(re,arguments)}})(he))},Te.init(),y.Mousetrap=Te,x.exports&&(x.exports=Te)})(typeof window<"u"?window:null,typeof window<"u"?document:null)})(mousetrap)),mousetrap.exports}var mousetrapExports=requireMousetrap();const Mousetrap=getDefaultExportFromCjs(mousetrapExports),globalHotKeys$=create([{when_paused:!1,description:"Action #1",keys:"1",on_press:{type:"action",index:0}},{when_paused:!1,description:"Action #2",keys:"2",on_press:{type:"action",index:1}},{when_paused:!1,description:"Action #3",keys:"3",on_press:{type:"action",index:2}},{when_paused:!1,description:"Action #4",keys:"4",on_press:{type:"action",index:3}},{when_paused:!1,description:"Action #5",keys:"5",on_press:{type:"action",index:4}},{when_paused:!1,description:"Action #6",keys:"6",on_press:{type:"action",index:5}},{when_paused:!1,description:"Action #7",keys:"7",on_press:{type:"action",index:6}},{when_paused:!1,description:"Action #8",keys:"8",on_press:{type:"action",index:7}},{when_paused:!1,description:"Action #9",keys:"9",on_press:{type:"action",index:8}},{when_paused:!1,keys:"space",description:"Single action",on_press:()=>isPaused$.value?void 0:(actions$.value.length===1&&(selectAction(0),execSelectedAction()),!1)},{when_paused:!0,description:"Restart",keys:"mod+r",on_press:{type:"game_action",action:"restart"}},{when_paused:!1,description:"Quicksave",keys:"f5",on_press:{type:"game_action",action:"quicksave"}},{when_paused:!1,description:"Quickload",keys:"f9",on_press:{type:"game_action",action:"quickload"}},{when_paused:!1,keys:"mod+s",description:"Save",on_press:()=>{if(!qspApi$.value?.readVariable("NOSAVE"))return requestedAction$.set("save"),onGameCommand("pause:saves"),!1}},{when_paused:!1,keys:"mod+o",description:"Load",on_press:()=>(requestedAction$.set("load"),onGameCommand("pause:saves"),!1)},{when_paused:!0,keys:"pageup",description:"Increase volume",on_press:()=>(volume$.actions.increase(),!1)},{when_paused:!0,keys:"pagedown",description:"Decrease volume",on_press:()=>(volume$.actions.decrease(),!1)},{when_paused:!0,description:"Mute",keys:"home",on_press:{type:"game_action",action:"mute"}},{when_paused:!0,description:"Unmute",keys:"end",on_press:{type:"game_action",action:"unmute"}},{when_paused:!1,keys:"f12",description:"Open QSP Debugger (F12)",on_press:()=>!0}]);function setupGlobalHotKeys(){for(const x of globalHotKeys$.value)Mousetrap.bind([x.keys],(y,w)=>{if(!(!x.when_paused&&isPaused$.value)){if(typeof x.on_press=="function")return x.on_press(y,w);if(x.on_press.type==="action"){if(canSelectAction(x.on_press.index))return selectAction(x.on_press.index),execSelectedAction(),!1}else if(x.on_press.type==="game_action")return onGameCommand(x.on_press.action),!1}})}function setupCustomHotKeys(x){for(const[y,w]of Object.entries(x))Mousetrap.bind(y,()=>{if(!isPaused$.value)return qspApi$.value?.execLoc(w),!1})}const prettySymbolsCommon={backspace:"BackSpace",tab:"Tab",enter:" Enter",capslock:"CapsLock",space:"Space",pageup:"PageUp",pagedown:"PageDown",end:"End",home:"Home",left:"",up:"",right:"",down:"",ins:"Insert",del:"Delete",plus:"+",f12:"F12",shift:"Shift",ctrl:"Ctrl",alt:"Alt",mod:"Ctrl"},prettySymbolsMacOs={shift:"",ctrl:"",alt:"",mod:""};function prettifyHotkeys(x){const y=[],w=x.split(" ");for(let C=0;C<w.length;C++){const P=w[C].split("+");for(let O=0;O<P.length;O++){let $=P[O];$ in prettySymbolsCommon&&($=prettySymbolsCommon[$]),windowManager.platform==="Macintosh"&&P[O]in prettySymbolsMacOs&&($=prettySymbolsMacOs[P[O]]),y.push({type:"key",symbol:$}),O<P.length-1&&y.push({type:"separator",symbol:"+"})}C<w.length-1&&y.push({type:"separator",symbol:" "})}return y}function clearHotkeys(){Mousetrap.reset()}var WxWidgetsDirection=(x=>(x[x.top=1]="top",x[x.right=2]="right",x[x.bottom=3]="bottom",x[x.left=4]="left",x[x.center=5]="center",x))(WxWidgetsDirection||{});const CAPTION_SIZE=20,qspGuiCfg$=atom(null);function buildLayoutTree(x){const y=getMaxLayer(x),w=x.filter(O=>O.floating&&O.name==="imgview"),C=x.filter(O=>!O.floating);let P=null;for(let O=0;O<=y;O++){const $=getLayerPanels(O,C);P={index:O,top:[],right:[],bottom:[],left:[],center:P||[]};for(const L of $)L.dir==="center"&&L.name!=="desc"||P[L.dir].push(L)}return{layer:P?cleanEmptyLayers(P):null,floating:w}}function cleanEmptyLayers(x){return Array.isArray(x.center)?x:!x.top.length&&!x.right.length&&!x.bottom.length&&!x.left.length?cleanEmptyLayers(x.center):(x.center=cleanEmptyLayers(x.center),x)}function convertLayer(x,y,w){return`<qsp-cl-layer>${convertDock("top",x.top,y,w)}${convertDock("left",x.left,y,w)}${Array.isArray(x.center)?convertDock("center",x.center,y,w):convertLayer(x.center,y,w)}${convertDock("right",x.right,y,w)}${convertDock("bottom",x.bottom,y,w)}</qsp-cl-layer>`}function convertDock(x,y,w,C){if(!y.length)return"";const P=y.map(B=>B.name!=="desc"?B.name:"").filter(Boolean),O=P.length>0?` visibility="${P.join("|")}"`:"",[$]=y,L=`${WxWidgetsDirection[$.dir]},${$.layer},${$.row}`;let D="";if(x!=="center")if(w[L])D=` size="${x==="bottom"||x==="top"?w[L]-CAPTION_SIZE:w[L]}"`;else{const B=x==="left"||x==="right"?"bestw":"besth";D=` size="${Math.max(...y.map(k=>k[B]))}"`}return`<qsp-cl-dock place="${x}"${O}${D}>${y.map(B=>convertPane(B,C,!1)).join("")}</qsp-cl-dock>`}function convertPane(x,y,w){return`<qsp-cl-pane visibility="${x.name!=="desc"?x.name:""}" proportion="${x.prop}">${extractFromDefaultTheme(x.name,y,w)}</qsp-cl-pane>`}function getMaxLayer(x){return Math.max(...x.map(({layer:y})=>y))}function getLayerPanels(x,y){return y.filter(w=>w.layer===x).sort((w,C)=>w.pos-C.pos)}const paneToTagMap={imgview:"qsp-view",acts:"qsp-actions",desc:"qsp-main",objs:"qsp-objects",vars:"qsp-stats",input:"qsp-cmd"};function extractFromDefaultTheme(x,y,w){const C=paneToTagMap[x];if(!C)return"";const P=new RegExp(`<${C}([\\s\\S]*?)</${C}>`,"im"),$=y.match(P)?.[0]??"";return w?$.replace(new RegExp(`<${C}(.*?)>`,"im"),`<${C} modal>`):$.replace(new RegExp(`<${C}(.*?)>`,"im"),`<${C}>`)}const GROUP_REGEXP=/\[(.*?)\]/i,LINE_REGEXP=/(.*?)=(.*)/i,DOCK_LINE=/dock_size\((.*?)\)=(.*)/,IS_FLOATABLE_MASK=1,asNumber=(x,y)=>({[x]:Number(y)}),asString=(x,y)=>({[x]:y}),converters={BackColor:asNumber,FontColor:asNumber,LinkColor:asNumber,FontSize:asNumber,FontName:asString,Panels:parsePanels,dir:(x,y)=>({[x]:WxWidgetsDirection[y]}),layer:asNumber,name:asString,pos:asNumber,row:asNumber,prop:asNumber,bestw:asNumber,besth:asNumber};function processData(x,y){const w=converters[x];return w?.(x,y)??{}}function parsePanels(x,y){const w=[],C={};for(const P of y.split("|").filter(Boolean))if(P!=="layout2")if(P.startsWith("dock_size")){const O=P.match(DOCK_LINE);if(O){const[,$,L]=O;$&&L&&(C[$]=Number(L))}}else{const O=P.split(";").map(extractLineData).reduce(($,[L,D])=>{if(L==="state")$.floating=(Number(D)&IS_FLOATABLE_MASK)!==0;else if(L&&D&&L in converters)return{...$,...processData(L,D)};return $},{});w.push(O)}return{Panels:w,Docks:C}}function extractLineData(x){const y=x.match(LINE_REGEXP);if(y){const[,w,C]=y;return[w,C]}return[]}function parseCfg(x){let y={};for(const w of x.split(/\r?\n/gim).filter(Boolean)){if(GROUP_REGEXP.test(w))continue;const[C,P]=extractLineData(w);C&&P&&C in converters&&(y={...y,...processData(C,P)})}return y}const isString$1=x=>typeof x=="string",defer=()=>{let x,y;const w=new Promise((C,P)=>{x=C,y=P});return w.resolve=x,w.reject=y,w},makeString=x=>x==null?"":""+x,copy=(x,y,w)=>{x.forEach(C=>{y[C]&&(w[C]=y[C])})},lastOfPathSeparatorRegExp=/###/g,cleanKey=x=>x&&x.indexOf("###")>-1?x.replace(lastOfPathSeparatorRegExp,"."):x,canNotTraverseDeeper=x=>!x||isString$1(x),getLastOfPath=(x,y,w)=>{const C=isString$1(y)?y.split("."):y;let P=0;for(;P<C.length-1;){if(canNotTraverseDeeper(x))return{};const O=cleanKey(C[P]);!x[O]&&w&&(x[O]=new w),Object.prototype.hasOwnProperty.call(x,O)?x=x[O]:x={},++P}return canNotTraverseDeeper(x)?{}:{obj:x,k:cleanKey(C[P])}},setPath=(x,y,w)=>{const{obj:C,k:P}=getLastOfPath(x,y,Object);if(C!==void 0||y.length===1){C[P]=w;return}let O=y[y.length-1],$=y.slice(0,y.length-1),L=getLastOfPath(x,$,Object);for(;L.obj===void 0&&$.length;)O=`${$[$.length-1]}.${O}`,$=$.slice(0,$.length-1),L=getLastOfPath(x,$,Object),L?.obj&&typeof L.obj[`${L.k}.${O}`]<"u"&&(L.obj=void 0);L.obj[`${L.k}.${O}`]=w},pushPath=(x,y,w,C)=>{const{obj:P,k:O}=getLastOfPath(x,y,Object);P[O]=P[O]||[],P[O].push(w)},getPath=(x,y)=>{const{obj:w,k:C}=getLastOfPath(x,y);if(w&&Object.prototype.hasOwnProperty.call(w,C))return w[C]},getPathWithDefaults=(x,y,w)=>{const C=getPath(x,w);return C!==void 0?C:getPath(y,w)},deepExtend=(x,y,w)=>{for(const C in y)C!=="__proto__"&&C!=="constructor"&&(C in x?isString$1(x[C])||x[C]instanceof String||isString$1(y[C])||y[C]instanceof String?w&&(x[C]=y[C]):deepExtend(x[C],y[C],w):x[C]=y[C]);return x},regexEscape=x=>x.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var _entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const escape=x=>isString$1(x)?x.replace(/[&<>"'\/]/g,y=>_entityMap[y]):x;class RegExpCache{constructor(y){this.capacity=y,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(y){const w=this.regExpMap.get(y);if(w!==void 0)return w;const C=new RegExp(y);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(y,C),this.regExpQueue.push(y),C}}const chars=[" ",",","?","!",";"],looksLikeObjectPathRegExpCache=new RegExpCache(20),looksLikeObjectPath=(x,y,w)=>{y=y||"",w=w||"";const C=chars.filter($=>y.indexOf($)<0&&w.indexOf($)<0);if(C.length===0)return!0;const P=looksLikeObjectPathRegExpCache.getRegExp(`(${C.map($=>$==="?"?"\\?":$).join("|")})`);let O=!P.test(x);if(!O){const $=x.indexOf(w);$>0&&!P.test(x.substring(0,$))&&(O=!0)}return O},deepFind=(x,y,w=".")=>{if(!x)return;if(x[y])return Object.prototype.hasOwnProperty.call(x,y)?x[y]:void 0;const C=y.split(w);let P=x;for(let O=0;O<C.length;){if(!P||typeof P!="object")return;let $,L="";for(let D=O;D<C.length;++D)if(D!==O&&(L+=w),L+=C[D],$=P[L],$!==void 0){if(["string","number","boolean"].indexOf(typeof $)>-1&&D<C.length-1)continue;O+=D-O+1;break}P=$}return P},getCleanedCode=x=>x?.replace("_","-"),consoleLogger={type:"logger",log(x){this.output("log",x)},warn(x){this.output("warn",x)},error(x){this.output("error",x)},output(x,y){console?.[x]?.apply?.(console,y)}};class Logger{constructor(y,w={}){this.init(y,w)}init(y,w={}){this.prefix=w.prefix||"i18next:",this.logger=y||consoleLogger,this.options=w,this.debug=w.debug}log(...y){return this.forward(y,"log","",!0)}warn(...y){return this.forward(y,"warn","",!0)}error(...y){return this.forward(y,"error","")}deprecate(...y){return this.forward(y,"warn","WARNING DEPRECATED: ",!0)}forward(y,w,C,P){return P&&!this.debug?null:(isString$1(y[0])&&(y[0]=`${C}${this.prefix} ${y[0]}`),this.logger[w](y))}create(y){return new Logger(this.logger,{prefix:`${this.prefix}:${y}:`,...this.options})}clone(y){return y=y||this.options,y.prefix=y.prefix||this.prefix,new Logger(this.logger,y)}}var baseLogger=new Logger;class EventEmitter{constructor(){this.observers={}}on(y,w){return y.split(" ").forEach(C=>{this.observers[C]||(this.observers[C]=new Map);const P=this.observers[C].get(w)||0;this.observers[C].set(w,P+1)}),this}off(y,w){if(this.observers[y]){if(!w){delete this.observers[y];return}this.observers[y].delete(w)}}emit(y,...w){this.observers[y]&&Array.from(this.observers[y].entries()).forEach(([P,O])=>{for(let $=0;$<O;$++)P(...w)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([P,O])=>{for(let $=0;$<O;$++)P.apply(P,[y,...w])})}}class ResourceStore extends EventEmitter{constructor(y,w={ns:["translation"],defaultNS:"translation"}){super(),this.data=y||{},this.options=w,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(y){this.options.ns.indexOf(y)<0&&this.options.ns.push(y)}removeNamespaces(y){const w=this.options.ns.indexOf(y);w>-1&&this.options.ns.splice(w,1)}getResource(y,w,C,P={}){const O=P.keySeparator!==void 0?P.keySeparator:this.options.keySeparator,$=P.ignoreJSONStructure!==void 0?P.ignoreJSONStructure:this.options.ignoreJSONStructure;let L;y.indexOf(".")>-1?L=y.split("."):(L=[y,w],C&&(Array.isArray(C)?L.push(...C):isString$1(C)&&O?L.push(...C.split(O)):L.push(C)));const D=getPath(this.data,L);return!D&&!w&&!C&&y.indexOf(".")>-1&&(y=L[0],w=L[1],C=L.slice(2).join(".")),D||!$||!isString$1(C)?D:deepFind(this.data?.[y]?.[w],C,O)}addResource(y,w,C,P,O={silent:!1}){const $=O.keySeparator!==void 0?O.keySeparator:this.options.keySeparator;let L=[y,w];C&&(L=L.concat($?C.split($):C)),y.indexOf(".")>-1&&(L=y.split("."),P=w,w=L[1]),this.addNamespaces(w),setPath(this.data,L,P),O.silent||this.emit("added",y,w,C,P)}addResources(y,w,C,P={silent:!1}){for(const O in C)(isString$1(C[O])||Array.isArray(C[O]))&&this.addResource(y,w,O,C[O],{silent:!0});P.silent||this.emit("added",y,w,C)}addResourceBundle(y,w,C,P,O,$={silent:!1,skipCopy:!1}){let L=[y,w];y.indexOf(".")>-1&&(L=y.split("."),P=C,C=w,w=L[1]),this.addNamespaces(w);let D=getPath(this.data,L)||{};$.skipCopy||(C=JSON.parse(JSON.stringify(C))),P?deepExtend(D,C,O):D={...D,...C},setPath(this.data,L,D),$.silent||this.emit("added",y,w,C)}removeResourceBundle(y,w){this.hasResourceBundle(y,w)&&delete this.data[y][w],this.removeNamespaces(w),this.emit("removed",y,w)}hasResourceBundle(y,w){return this.getResource(y,w)!==void 0}getResourceBundle(y,w){return w||(w=this.options.defaultNS),this.getResource(y,w)}getDataByLanguage(y){return this.data[y]}hasLanguageSomeTranslations(y){const w=this.getDataByLanguage(y);return!!(w&&Object.keys(w)||[]).find(P=>w[P]&&Object.keys(w[P]).length>0)}toJSON(){return this.data}}var postProcessor={processors:{},addPostProcessor(x){this.processors[x.name]=x},handle(x,y,w,C,P){return x.forEach(O=>{y=this.processors[O]?.process(y,w,C,P)??y}),y}};const PATH_KEY=Symbol("i18next/PATH_KEY");function createProxy(){const x=[],y=Object.create(null);let w;return y.get=(C,P)=>(w?.revoke?.(),P===PATH_KEY?x:(x.push(P),w=Proxy.revocable(C,y),w.proxy)),Proxy.revocable(Object.create(null),y).proxy}function keysFromSelector(x,y){const{[PATH_KEY]:w}=x(createProxy());return w.join(y?.keySeparator??".")}const checkedLoadedFor={},shouldHandleAsObject=x=>!isString$1(x)&&typeof x!="boolean"&&typeof x!="number";class Translator extends EventEmitter{constructor(y,w={}){super(),copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],y,this),this.options=w,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=baseLogger.create("translator")}changeLanguage(y){y&&(this.language=y)}exists(y,w={interpolation:{}}){const C={...w};return y==null?!1:this.resolve(y,C)?.res!==void 0}extractFromKey(y,w){let C=w.nsSeparator!==void 0?w.nsSeparator:this.options.nsSeparator;C===void 0&&(C=":");const P=w.keySeparator!==void 0?w.keySeparator:this.options.keySeparator;let O=w.ns||this.options.defaultNS||[];const $=C&&y.indexOf(C)>-1,L=!this.options.userDefinedKeySeparator&&!w.keySeparator&&!this.options.userDefinedNsSeparator&&!w.nsSeparator&&!looksLikeObjectPath(y,C,P);if($&&!L){const D=y.match(this.interpolator.nestingRegexp);if(D&&D.length>0)return{key:y,namespaces:isString$1(O)?[O]:O};const B=y.split(C);(C!==P||C===P&&this.options.ns.indexOf(B[0])>-1)&&(O=B.shift()),y=B.join(P)}return{key:y,namespaces:isString$1(O)?[O]:O}}translate(y,w,C){let P=typeof w=="object"?{...w}:w;if(typeof P!="object"&&this.options.overloadTranslationOptionHandler&&(P=this.options.overloadTranslationOptionHandler(arguments)),typeof P=="object"&&(P={...P}),P||(P={}),y==null)return"";typeof y=="function"&&(y=keysFromSelector(y,{...this.options,...P})),Array.isArray(y)||(y=[String(y)]);const O=P.returnDetails!==void 0?P.returnDetails:this.options.returnDetails,$=P.keySeparator!==void 0?P.keySeparator:this.options.keySeparator,{key:L,namespaces:D}=this.extractFromKey(y[y.length-1],P),B=D[D.length-1];let U=P.nsSeparator!==void 0?P.nsSeparator:this.options.nsSeparator;U===void 0&&(U=":");const k=P.lng||this.language,H=P.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(k?.toLowerCase()==="cimode")return H?O?{res:`${B}${U}${L}`,usedKey:L,exactUsedKey:L,usedLng:k,usedNS:B,usedParams:this.getUsedParamsDetails(P)}:`${B}${U}${L}`:O?{res:L,usedKey:L,exactUsedKey:L,usedLng:k,usedNS:B,usedParams:this.getUsedParamsDetails(P)}:L;const W=this.resolve(y,P);let G=W?.res;const Q=W?.usedKey||L,Z=W?.exactUsedKey||L,J=["[object Number]","[object Function]","[object RegExp]"],ne=P.joinArrays!==void 0?P.joinArrays:this.options.joinArrays,oe=!this.i18nFormat||this.i18nFormat.handleAsObject,ae=P.count!==void 0&&!isString$1(P.count),ve=Translator.hasDefaultValue(P),Te=ae?this.pluralResolver.getSuffix(k,P.count,P):"",re=P.ordinal&&ae?this.pluralResolver.getSuffix(k,P.count,{ordinal:!1}):"",he=ae&&!P.ordinal&&P.count===0,be=he&&P[`defaultValue${this.options.pluralSeparator}zero`]||P[`defaultValue${Te}`]||P[`defaultValue${re}`]||P.defaultValue;let Le=G;oe&&!G&&ve&&(Le=be);const qe=shouldHandleAsObject(Le),Ye=Object.prototype.toString.apply(Le);if(oe&&Le&&qe&&J.indexOf(Ye)<0&&!(isString$1(ne)&&Array.isArray(Le))){if(!P.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const et=this.options.returnedObjectHandler?this.options.returnedObjectHandler(Q,Le,{...P,ns:D}):`key '${L} (${this.language})' returned an object instead of string.`;return O?(W.res=et,W.usedParams=this.getUsedParamsDetails(P),W):et}if($){const et=Array.isArray(Le),je=et?[]:{},Ke=et?Z:Q;for(const Ve in Le)if(Object.prototype.hasOwnProperty.call(Le,Ve)){const We=`${Ke}${$}${Ve}`;ve&&!G?je[Ve]=this.translate(We,{...P,defaultValue:shouldHandleAsObject(be)?be[Ve]:void 0,joinArrays:!1,ns:D}):je[Ve]=this.translate(We,{...P,joinArrays:!1,ns:D}),je[Ve]===We&&(je[Ve]=Le[Ve])}G=je}}else if(oe&&isString$1(ne)&&Array.isArray(G))G=G.join(ne),G&&(G=this.extendTranslation(G,y,P,C));else{let et=!1,je=!1;!this.isValidLookup(G)&&ve&&(et=!0,G=be),this.isValidLookup(G)||(je=!0,G=L);const Ve=(P.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&je?void 0:G,We=ve&&be!==G&&this.options.updateMissing;if(je||et||We){if(this.logger.log(We?"updateKey":"missingKey",k,B,L,We?be:G),$){const ie=this.resolve(L,{...P,keySeparator:!1});ie&&ie.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let we=[];const Oe=this.languageUtils.getFallbackCodes(this.options.fallbackLng,P.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Oe&&Oe[0])for(let ie=0;ie<Oe.length;ie++)we.push(Oe[ie]);else this.options.saveMissingTo==="all"?we=this.languageUtils.toResolveHierarchy(P.lng||this.language):we.push(P.lng||this.language);const He=(ie,Re,Xe)=>{const Ze=ve&&Xe!==G?Xe:Ve;this.options.missingKeyHandler?this.options.missingKeyHandler(ie,B,Re,Ze,We,P):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(ie,B,Re,Ze,We,P),this.emit("missingKey",ie,B,Re,G)};this.options.saveMissing&&(this.options.saveMissingPlurals&&ae?we.forEach(ie=>{const Re=this.pluralResolver.getSuffixes(ie,P);he&&P[`defaultValue${this.options.pluralSeparator}zero`]&&Re.indexOf(`${this.options.pluralSeparator}zero`)<0&&Re.push(`${this.options.pluralSeparator}zero`),Re.forEach(Xe=>{He([ie],L+Xe,P[`defaultValue${Xe}`]||be)})}):He(we,L,be))}G=this.extendTranslation(G,y,P,W,C),je&&G===L&&this.options.appendNamespaceToMissingKey&&(G=`${B}${U}${L}`),(je||et)&&this.options.parseMissingKeyHandler&&(G=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${B}${U}${L}`:L,et?G:void 0,P))}return O?(W.res=G,W.usedParams=this.getUsedParamsDetails(P),W):G}extendTranslation(y,w,C,P,O){if(this.i18nFormat?.parse)y=this.i18nFormat.parse(y,{...this.options.interpolation.defaultVariables,...C},C.lng||this.language||P.usedLng,P.usedNS,P.usedKey,{resolved:P});else if(!C.skipInterpolation){C.interpolation&&this.interpolator.init({...C,interpolation:{...this.options.interpolation,...C.interpolation}});const D=isString$1(y)&&(C?.interpolation?.skipOnVariables!==void 0?C.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let B;if(D){const k=y.match(this.interpolator.nestingRegexp);B=k&&k.length}let U=C.replace&&!isString$1(C.replace)?C.replace:C;if(this.options.interpolation.defaultVariables&&(U={...this.options.interpolation.defaultVariables,...U}),y=this.interpolator.interpolate(y,U,C.lng||this.language||P.usedLng,C),D){const k=y.match(this.interpolator.nestingRegexp),H=k&&k.length;B<H&&(C.nest=!1)}!C.lng&&P&&P.res&&(C.lng=this.language||P.usedLng),C.nest!==!1&&(y=this.interpolator.nest(y,(...k)=>O?.[0]===k[0]&&!C.context?(this.logger.warn(`It seems you are nesting recursively key: ${k[0]} in key: ${w[0]}`),null):this.translate(...k,w),C)),C.interpolation&&this.interpolator.reset()}const $=C.postProcess||this.options.postProcess,L=isString$1($)?[$]:$;return y!=null&&L?.length&&C.applyPostProcessor!==!1&&(y=postProcessor.handle(L,y,w,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...P,usedParams:this.getUsedParamsDetails(C)},...C}:C,this)),y}resolve(y,w={}){let C,P,O,$,L;return isString$1(y)&&(y=[y]),y.forEach(D=>{if(this.isValidLookup(C))return;const B=this.extractFromKey(D,w),U=B.key;P=U;let k=B.namespaces;this.options.fallbackNS&&(k=k.concat(this.options.fallbackNS));const H=w.count!==void 0&&!isString$1(w.count),W=H&&!w.ordinal&&w.count===0,G=w.context!==void 0&&(isString$1(w.context)||typeof w.context=="number")&&w.context!=="",Q=w.lngs?w.lngs:this.languageUtils.toResolveHierarchy(w.lng||this.language,w.fallbackLng);k.forEach(Z=>{this.isValidLookup(C)||(L=Z,!checkedLoadedFor[`${Q[0]}-${Z}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(L)&&(checkedLoadedFor[`${Q[0]}-${Z}`]=!0,this.logger.warn(`key "${P}" for languages "${Q.join(", ")}" won't get resolved as namespace "${L}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),Q.forEach(J=>{if(this.isValidLookup(C))return;$=J;const ne=[U];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(ne,U,J,Z,w);else{let ae;H&&(ae=this.pluralResolver.getSuffix(J,w.count,w));const ve=`${this.options.pluralSeparator}zero`,Te=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(H&&(w.ordinal&&ae.indexOf(Te)===0&&ne.push(U+ae.replace(Te,this.options.pluralSeparator)),ne.push(U+ae),W&&ne.push(U+ve)),G){const re=`${U}${this.options.contextSeparator||"_"}${w.context}`;ne.push(re),H&&(w.ordinal&&ae.indexOf(Te)===0&&ne.push(re+ae.replace(Te,this.options.pluralSeparator)),ne.push(re+ae),W&&ne.push(re+ve))}}let oe;for(;oe=ne.pop();)this.isValidLookup(C)||(O=oe,C=this.getResource(J,Z,oe,w))}))})}),{res:C,usedKey:P,exactUsedKey:O,usedLng:$,usedNS:L}}isValidLookup(y){return y!==void 0&&!(!this.options.returnNull&&y===null)&&!(!this.options.returnEmptyString&&y==="")}getResource(y,w,C,P={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(y,w,C,P):this.resourceStore.getResource(y,w,C,P)}getUsedParamsDetails(y={}){const w=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],C=y.replace&&!isString$1(y.replace);let P=C?y.replace:y;if(C&&typeof y.count<"u"&&(P.count=y.count),this.options.interpolation.defaultVariables&&(P={...this.options.interpolation.defaultVariables,...P}),!C){P={...P};for(const O of w)delete P[O]}return P}static hasDefaultValue(y){const w="defaultValue";for(const C in y)if(Object.prototype.hasOwnProperty.call(y,C)&&w===C.substring(0,w.length)&&y[C]!==void 0)return!0;return!1}}class LanguageUtil{constructor(y){this.options=y,this.supportedLngs=this.options.supportedLngs||!1,this.logger=baseLogger.create("languageUtils")}getScriptPartFromCode(y){if(y=getCleanedCode(y),!y||y.indexOf("-")<0)return null;const w=y.split("-");return w.length===2||(w.pop(),w[w.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(w.join("-"))}getLanguagePartFromCode(y){if(y=getCleanedCode(y),!y||y.indexOf("-")<0)return y;const w=y.split("-");return this.formatLanguageCode(w[0])}formatLanguageCode(y){if(isString$1(y)&&y.indexOf("-")>-1){let w;try{w=Intl.getCanonicalLocales(y)[0]}catch{}return w&&this.options.lowerCaseLng&&(w=w.toLowerCase()),w||(this.options.lowerCaseLng?y.toLowerCase():y)}return this.options.cleanCode||this.options.lowerCaseLng?y.toLowerCase():y}isSupportedCode(y){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(y=this.getLanguagePartFromCode(y)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(y)>-1}getBestMatchFromCodes(y){if(!y)return null;let w;return y.forEach(C=>{if(w)return;const P=this.formatLanguageCode(C);(!this.options.supportedLngs||this.isSupportedCode(P))&&(w=P)}),!w&&this.options.supportedLngs&&y.forEach(C=>{if(w)return;const P=this.getScriptPartFromCode(C);if(this.isSupportedCode(P))return w=P;const O=this.getLanguagePartFromCode(C);if(this.isSupportedCode(O))return w=O;w=this.options.supportedLngs.find($=>{if($===O)return $;if(!($.indexOf("-")<0&&O.indexOf("-")<0)&&($.indexOf("-")>0&&O.indexOf("-")<0&&$.substring(0,$.indexOf("-"))===O||$.indexOf(O)===0&&O.length>1))return $})}),w||(w=this.getFallbackCodes(this.options.fallbackLng)[0]),w}getFallbackCodes(y,w){if(!y)return[];if(typeof y=="function"&&(y=y(w)),isString$1(y)&&(y=[y]),Array.isArray(y))return y;if(!w)return y.default||[];let C=y[w];return C||(C=y[this.getScriptPartFromCode(w)]),C||(C=y[this.formatLanguageCode(w)]),C||(C=y[this.getLanguagePartFromCode(w)]),C||(C=y.default),C||[]}toResolveHierarchy(y,w){const C=this.getFallbackCodes((w===!1?[]:w)||this.options.fallbackLng||[],y),P=[],O=$=>{$&&(this.isSupportedCode($)?P.push($):this.logger.warn(`rejecting language code not found in supportedLngs: ${$}`))};return isString$1(y)&&(y.indexOf("-")>-1||y.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&O(this.formatLanguageCode(y)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&O(this.getScriptPartFromCode(y)),this.options.load!=="currentOnly"&&O(this.getLanguagePartFromCode(y))):isString$1(y)&&O(this.formatLanguageCode(y)),C.forEach($=>{P.indexOf($)<0&&O(this.formatLanguageCode($))}),P}}const suffixesOrder={zero:0,one:1,two:2,few:3,many:4,other:5},dummyRule={select:x=>x===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class PluralResolver{constructor(y,w={}){this.languageUtils=y,this.options=w,this.logger=baseLogger.create("pluralResolver"),this.pluralRulesCache={}}addRule(y,w){this.rules[y]=w}clearCache(){this.pluralRulesCache={}}getRule(y,w={}){const C=getCleanedCode(y==="dev"?"en":y),P=w.ordinal?"ordinal":"cardinal",O=JSON.stringify({cleanedCode:C,type:P});if(O in this.pluralRulesCache)return this.pluralRulesCache[O];let $;try{$=new Intl.PluralRules(C,{type:P})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),dummyRule;if(!y.match(/-|_/))return dummyRule;const D=this.languageUtils.getLanguagePartFromCode(y);$=this.getRule(D,w)}return this.pluralRulesCache[O]=$,$}needsPlural(y,w={}){let C=this.getRule(y,w);return C||(C=this.getRule("dev",w)),C?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(y,w,C={}){return this.getSuffixes(y,C).map(P=>`${w}${P}`)}getSuffixes(y,w={}){let C=this.getRule(y,w);return C||(C=this.getRule("dev",w)),C?C.resolvedOptions().pluralCategories.sort((P,O)=>suffixesOrder[P]-suffixesOrder[O]).map(P=>`${this.options.prepend}${w.ordinal?`ordinal${this.options.prepend}`:""}${P}`):[]}getSuffix(y,w,C={}){const P=this.getRule(y,C);return P?`${this.options.prepend}${C.ordinal?`ordinal${this.options.prepend}`:""}${P.select(w)}`:(this.logger.warn(`no plural rule found for: ${y}`),this.getSuffix("dev",w,C))}}const deepFindWithDefaults=(x,y,w,C=".",P=!0)=>{let O=getPathWithDefaults(x,y,w);return!O&&P&&isString$1(w)&&(O=deepFind(x,w,C),O===void 0&&(O=deepFind(y,w,C))),O},regexSafe=x=>x.replace(/\$/g,"$$$$");class Interpolator{constructor(y={}){this.logger=baseLogger.create("interpolator"),this.options=y,this.format=y?.interpolation?.format||(w=>w),this.init(y)}init(y={}){y.interpolation||(y.interpolation={escapeValue:!0});const{escape:w,escapeValue:C,useRawValueToEscape:P,prefix:O,prefixEscaped:$,suffix:L,suffixEscaped:D,formatSeparator:B,unescapeSuffix:U,unescapePrefix:k,nestingPrefix:H,nestingPrefixEscaped:W,nestingSuffix:G,nestingSuffixEscaped:Q,nestingOptionsSeparator:Z,maxReplaces:J,alwaysFormat:ne}=y.interpolation;this.escape=w!==void 0?w:escape,this.escapeValue=C!==void 0?C:!0,this.useRawValueToEscape=P!==void 0?P:!1,this.prefix=O?regexEscape(O):$||"{{",this.suffix=L?regexEscape(L):D||"}}",this.formatSeparator=B||",",this.unescapePrefix=U?"":k||"-",this.unescapeSuffix=this.unescapePrefix?"":U||"",this.nestingPrefix=H?regexEscape(H):W||regexEscape("$t("),this.nestingSuffix=G?regexEscape(G):Q||regexEscape(")"),this.nestingOptionsSeparator=Z||",",this.maxReplaces=J||1e3,this.alwaysFormat=ne!==void 0?ne:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const y=(w,C)=>w?.source===C?(w.lastIndex=0,w):new RegExp(C,"g");this.regexp=y(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=y(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=y(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(y,w,C,P){let O,$,L;const D=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},B=W=>{if(W.indexOf(this.formatSeparator)<0){const J=deepFindWithDefaults(w,D,W,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(J,void 0,C,{...P,...w,interpolationkey:W}):J}const G=W.split(this.formatSeparator),Q=G.shift().trim(),Z=G.join(this.formatSeparator).trim();return this.format(deepFindWithDefaults(w,D,Q,this.options.keySeparator,this.options.ignoreJSONStructure),Z,C,{...P,...w,interpolationkey:Q})};this.resetRegExp();const U=P?.missingInterpolationHandler||this.options.missingInterpolationHandler,k=P?.interpolation?.skipOnVariables!==void 0?P.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:W=>regexSafe(W)},{regex:this.regexp,safeValue:W=>this.escapeValue?regexSafe(this.escape(W)):regexSafe(W)}].forEach(W=>{for(L=0;O=W.regex.exec(y);){const G=O[1].trim();if($=B(G),$===void 0)if(typeof U=="function"){const Z=U(y,O,P);$=isString$1(Z)?Z:""}else if(P&&Object.prototype.hasOwnProperty.call(P,G))$="";else if(k){$=O[0];continue}else this.logger.warn(`missed to pass in variable ${G} for interpolating ${y}`),$="";else!isString$1($)&&!this.useRawValueToEscape&&($=makeString($));const Q=W.safeValue($);if(y=y.replace(O[0],Q),k?(W.regex.lastIndex+=$.length,W.regex.lastIndex-=O[0].length):W.regex.lastIndex=0,L++,L>=this.maxReplaces)break}}),y}nest(y,w,C={}){let P,O,$;const L=(D,B)=>{const U=this.nestingOptionsSeparator;if(D.indexOf(U)<0)return D;const k=D.split(new RegExp(`${U}[ ]*{`));let H=`{${k[1]}`;D=k[0],H=this.interpolate(H,$);const W=H.match(/'/g),G=H.match(/"/g);((W?.length??0)%2===0&&!G||G.length%2!==0)&&(H=H.replace(/'/g,'"'));try{$=JSON.parse(H),B&&($={...B,...$})}catch(Q){return this.logger.warn(`failed parsing options string in nesting for key ${D}`,Q),`${D}${U}${H}`}return $.defaultValue&&$.defaultValue.indexOf(this.prefix)>-1&&delete $.defaultValue,D};for(;P=this.nestingRegexp.exec(y);){let D=[];$={...C},$=$.replace&&!isString$1($.replace)?$.replace:$,$.applyPostProcessor=!1,delete $.defaultValue;const B=/{.*}/.test(P[1])?P[1].lastIndexOf("}")+1:P[1].indexOf(this.formatSeparator);if(B!==-1&&(D=P[1].slice(B).split(this.formatSeparator).map(U=>U.trim()).filter(Boolean),P[1]=P[1].slice(0,B)),O=w(L.call(this,P[1].trim(),$),$),O&&P[0]===y&&!isString$1(O))return O;isString$1(O)||(O=makeString(O)),O||(this.logger.warn(`missed to resolve ${P[1]} for nesting ${y}`),O=""),D.length&&(O=D.reduce((U,k)=>this.format(U,k,C.lng,{...C,interpolationkey:P[1].trim()}),O.trim())),y=y.replace(P[0],O),this.regexp.lastIndex=0}return y}}const parseFormatStr=x=>{let y=x.toLowerCase().trim();const w={};if(x.indexOf("(")>-1){const C=x.split("(");y=C[0].toLowerCase().trim();const P=C[1].substring(0,C[1].length-1);y==="currency"&&P.indexOf(":")<0?w.currency||(w.currency=P.trim()):y==="relativetime"&&P.indexOf(":")<0?w.range||(w.range=P.trim()):P.split(";").forEach($=>{if($){const[L,...D]=$.split(":"),B=D.join(":").trim().replace(/^'+|'+$/g,""),U=L.trim();w[U]||(w[U]=B),B==="false"&&(w[U]=!1),B==="true"&&(w[U]=!0),isNaN(B)||(w[U]=parseInt(B,10))}})}return{formatName:y,formatOptions:w}},createCachedFormatter=x=>{const y={};return(w,C,P)=>{let O=P;P&&P.interpolationkey&&P.formatParams&&P.formatParams[P.interpolationkey]&&P[P.interpolationkey]&&(O={...O,[P.interpolationkey]:void 0});const $=C+JSON.stringify(O);let L=y[$];return L||(L=x(getCleanedCode(C),P),y[$]=L),L(w)}},createNonCachedFormatter=x=>(y,w,C)=>x(getCleanedCode(w),C)(y);class Formatter{constructor(y={}){this.logger=baseLogger.create("formatter"),this.options=y,this.init(y)}init(y,w={interpolation:{}}){this.formatSeparator=w.interpolation.formatSeparator||",";const C=w.cacheInBuiltFormats?createCachedFormatter:createNonCachedFormatter;this.formats={number:C((P,O)=>{const $=new Intl.NumberFormat(P,{...O});return L=>$.format(L)}),currency:C((P,O)=>{const $=new Intl.NumberFormat(P,{...O,style:"currency"});return L=>$.format(L)}),datetime:C((P,O)=>{const $=new Intl.DateTimeFormat(P,{...O});return L=>$.format(L)}),relativetime:C((P,O)=>{const $=new Intl.RelativeTimeFormat(P,{...O});return L=>$.format(L,O.range||"day")}),list:C((P,O)=>{const $=new Intl.ListFormat(P,{...O});return L=>$.format(L)})}}add(y,w){this.formats[y.toLowerCase().trim()]=w}addCached(y,w){this.formats[y.toLowerCase().trim()]=createCachedFormatter(w)}format(y,w,C,P={}){const O=w.split(this.formatSeparator);if(O.length>1&&O[0].indexOf("(")>1&&O[0].indexOf(")")<0&&O.find(L=>L.indexOf(")")>-1)){const L=O.findIndex(D=>D.indexOf(")")>-1);O[0]=[O[0],...O.splice(1,L)].join(this.formatSeparator)}return O.reduce((L,D)=>{const{formatName:B,formatOptions:U}=parseFormatStr(D);if(this.formats[B]){let k=L;try{const H=P?.formatParams?.[P.interpolationkey]||{},W=H.locale||H.lng||P.locale||P.lng||C;k=this.formats[B](L,W,{...U,...P,...H})}catch(H){this.logger.warn(H)}return k}else this.logger.warn(`there was no format function for ${B}`);return L},y)}}const removePending=(x,y)=>{x.pending[y]!==void 0&&(delete x.pending[y],x.pendingCount--)};class Connector extends EventEmitter{constructor(y,w,C,P={}){super(),this.backend=y,this.store=w,this.services=C,this.languageUtils=C.languageUtils,this.options=P,this.logger=baseLogger.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=P.maxParallelReads||10,this.readingCalls=0,this.maxRetries=P.maxRetries>=0?P.maxRetries:5,this.retryTimeout=P.retryTimeout>=1?P.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(C,P.backend,P)}queueLoad(y,w,C,P){const O={},$={},L={},D={};return y.forEach(B=>{let U=!0;w.forEach(k=>{const H=`${B}|${k}`;!C.reload&&this.store.hasResourceBundle(B,k)?this.state[H]=2:this.state[H]<0||(this.state[H]===1?$[H]===void 0&&($[H]=!0):(this.state[H]=1,U=!1,$[H]===void 0&&($[H]=!0),O[H]===void 0&&(O[H]=!0),D[k]===void 0&&(D[k]=!0)))}),U||(L[B]=!0)}),(Object.keys(O).length||Object.keys($).length)&&this.queue.push({pending:$,pendingCount:Object.keys($).length,loaded:{},errors:[],callback:P}),{toLoad:Object.keys(O),pending:Object.keys($),toLoadLanguages:Object.keys(L),toLoadNamespaces:Object.keys(D)}}loaded(y,w,C){const P=y.split("|"),O=P[0],$=P[1];w&&this.emit("failedLoading",O,$,w),!w&&C&&this.store.addResourceBundle(O,$,C,void 0,void 0,{skipCopy:!0}),this.state[y]=w?-1:2,w&&C&&(this.state[y]=0);const L={};this.queue.forEach(D=>{pushPath(D.loaded,[O],$),removePending(D,y),w&&D.errors.push(w),D.pendingCount===0&&!D.done&&(Object.keys(D.loaded).forEach(B=>{L[B]||(L[B]={});const U=D.loaded[B];U.length&&U.forEach(k=>{L[B][k]===void 0&&(L[B][k]=!0)})}),D.done=!0,D.errors.length?D.callback(D.errors):D.callback())}),this.emit("loaded",L),this.queue=this.queue.filter(D=>!D.done)}read(y,w,C,P=0,O=this.retryTimeout,$){if(!y.length)return $(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:y,ns:w,fcName:C,tried:P,wait:O,callback:$});return}this.readingCalls++;const L=(B,U)=>{if(this.readingCalls--,this.waitingReads.length>0){const k=this.waitingReads.shift();this.read(k.lng,k.ns,k.fcName,k.tried,k.wait,k.callback)}if(B&&U&&P<this.maxRetries){setTimeout(()=>{this.read.call(this,y,w,C,P+1,O*2,$)},O);return}$(B,U)},D=this.backend[C].bind(this.backend);if(D.length===2){try{const B=D(y,w);B&&typeof B.then=="function"?B.then(U=>L(null,U)).catch(L):L(null,B)}catch(B){L(B)}return}return D(y,w,L)}prepareLoading(y,w,C={},P){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),P&&P();isString$1(y)&&(y=this.languageUtils.toResolveHierarchy(y)),isString$1(w)&&(w=[w]);const O=this.queueLoad(y,w,C,P);if(!O.toLoad.length)return O.pending.length||P(),null;O.toLoad.forEach($=>{this.loadOne($)})}load(y,w,C){this.prepareLoading(y,w,{},C)}reload(y,w,C){this.prepareLoading(y,w,{reload:!0},C)}loadOne(y,w=""){const C=y.split("|"),P=C[0],O=C[1];this.read(P,O,"read",void 0,void 0,($,L)=>{$&&this.logger.warn(`${w}loading namespace ${O} for language ${P} failed`,$),!$&&L&&this.logger.log(`${w}loaded namespace ${O} for language ${P}`,L),this.loaded(y,$,L)})}saveMissing(y,w,C,P,O,$={},L=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(w)){this.logger.warn(`did not save key "${C}" as the namespace "${w}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(C==null||C==="")){if(this.backend?.create){const D={...$,isUpdate:O},B=this.backend.create.bind(this.backend);if(B.length<6)try{let U;B.length===5?U=B(y,w,C,P,D):U=B(y,w,C,P),U&&typeof U.then=="function"?U.then(k=>L(null,k)).catch(L):L(null,U)}catch(U){L(U)}else B(y,w,C,P,L,D)}!y||!y[0]||this.store.addResource(y[0],w,C,P)}}}const get=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:x=>{let y={};if(typeof x[1]=="object"&&(y=x[1]),isString$1(x[1])&&(y.defaultValue=x[1]),isString$1(x[2])&&(y.tDescription=x[2]),typeof x[2]=="object"||typeof x[3]=="object"){const w=x[3]||x[2];Object.keys(w).forEach(C=>{y[C]=w[C]})}return y},interpolation:{escapeValue:!0,format:x=>x,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),transformOptions=x=>(isString$1(x.ns)&&(x.ns=[x.ns]),isString$1(x.fallbackLng)&&(x.fallbackLng=[x.fallbackLng]),isString$1(x.fallbackNS)&&(x.fallbackNS=[x.fallbackNS]),x.supportedLngs?.indexOf?.("cimode")<0&&(x.supportedLngs=x.supportedLngs.concat(["cimode"])),typeof x.initImmediate=="boolean"&&(x.initAsync=x.initImmediate),x),noop$4=()=>{},bindMemberFunctions=x=>{Object.getOwnPropertyNames(Object.getPrototypeOf(x)).forEach(w=>{typeof x[w]=="function"&&(x[w]=x[w].bind(x))})};class I18n extends EventEmitter{constructor(y={},w){if(super(),this.options=transformOptions(y),this.services={},this.logger=baseLogger,this.modules={external:[]},bindMemberFunctions(this),w&&!this.isInitialized&&!y.isClone){if(!this.options.initAsync)return this.init(y,w),this;setTimeout(()=>{this.init(y,w)},0)}}init(y={},w){this.isInitializing=!0,typeof y=="function"&&(w=y,y={}),y.defaultNS==null&&y.ns&&(isString$1(y.ns)?y.defaultNS=y.ns:y.ns.indexOf("translation")<0&&(y.defaultNS=y.ns[0]));const C=get();this.options={...C,...this.options,...transformOptions(y)},this.options.interpolation={...C.interpolation,...this.options.interpolation},y.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=y.keySeparator),y.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=y.nsSeparator);const P=B=>B?typeof B=="function"?new B:B:null;if(!this.options.isClone){this.modules.logger?baseLogger.init(P(this.modules.logger),this.options):baseLogger.init(null,this.options);let B;this.modules.formatter?B=this.modules.formatter:B=Formatter;const U=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);const k=this.services;k.logger=baseLogger,k.resourceStore=this.store,k.languageUtils=U,k.pluralResolver=new PluralResolver(U,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==C.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),B&&(!this.options.interpolation.format||this.options.interpolation.format===C.interpolation.format)&&(k.formatter=P(B),k.formatter.init&&k.formatter.init(k,this.options),this.options.interpolation.format=k.formatter.format.bind(k.formatter)),k.interpolator=new Interpolator(this.options),k.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},k.backendConnector=new Connector(P(this.modules.backend),k.resourceStore,k,this.options),k.backendConnector.on("*",(W,...G)=>{this.emit(W,...G)}),this.modules.languageDetector&&(k.languageDetector=P(this.modules.languageDetector),k.languageDetector.init&&k.languageDetector.init(k,this.options.detection,this.options)),this.modules.i18nFormat&&(k.i18nFormat=P(this.modules.i18nFormat),k.i18nFormat.init&&k.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",(W,...G)=>{this.emit(W,...G)}),this.modules.external.forEach(W=>{W.init&&W.init(this)})}if(this.format=this.options.interpolation.format,w||(w=noop$4),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const B=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);B.length>0&&B[0]!=="dev"&&(this.options.lng=B[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(B=>{this[B]=(...U)=>this.store[B](...U)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(B=>{this[B]=(...U)=>(this.store[B](...U),this)});const L=defer(),D=()=>{const B=(U,k)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),L.resolve(k),w(U,k)};if(this.languages&&!this.isInitialized)return B(null,this.t.bind(this));this.changeLanguage(this.options.lng,B)};return this.options.resources||!this.options.initAsync?D():setTimeout(D,0),L}loadResources(y,w=noop$4){let C=w;const P=isString$1(y)?y:this.language;if(typeof y=="function"&&(C=y),!this.options.resources||this.options.partialBundledLanguages){if(P?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return C();const O=[],$=L=>{if(!L||L==="cimode")return;this.services.languageUtils.toResolveHierarchy(L).forEach(B=>{B!=="cimode"&&O.indexOf(B)<0&&O.push(B)})};P?$(P):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(D=>$(D)),this.options.preload?.forEach?.(L=>$(L)),this.services.backendConnector.load(O,this.options.ns,L=>{!L&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),C(L)})}else C(null)}reloadResources(y,w,C){const P=defer();return typeof y=="function"&&(C=y,y=void 0),typeof w=="function"&&(C=w,w=void 0),y||(y=this.languages),w||(w=this.options.ns),C||(C=noop$4),this.services.backendConnector.reload(y,w,O=>{P.resolve(),C(O)}),P}use(y){if(!y)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!y.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return y.type==="backend"&&(this.modules.backend=y),(y.type==="logger"||y.log&&y.warn&&y.error)&&(this.modules.logger=y),y.type==="languageDetector"&&(this.modules.languageDetector=y),y.type==="i18nFormat"&&(this.modules.i18nFormat=y),y.type==="postProcessor"&&postProcessor.addPostProcessor(y),y.type==="formatter"&&(this.modules.formatter=y),y.type==="3rdParty"&&this.modules.external.push(y),this}setResolvedLanguage(y){if(!(!y||!this.languages)&&!(["cimode","dev"].indexOf(y)>-1)){for(let w=0;w<this.languages.length;w++){const C=this.languages[w];if(!(["cimode","dev"].indexOf(C)>-1)&&this.store.hasLanguageSomeTranslations(C)){this.resolvedLanguage=C;break}}!this.resolvedLanguage&&this.languages.indexOf(y)<0&&this.store.hasLanguageSomeTranslations(y)&&(this.resolvedLanguage=y,this.languages.unshift(y))}}changeLanguage(y,w){this.isLanguageChangingTo=y;const C=defer();this.emit("languageChanging",y);const P=L=>{this.language=L,this.languages=this.services.languageUtils.toResolveHierarchy(L),this.resolvedLanguage=void 0,this.setResolvedLanguage(L)},O=(L,D)=>{D?this.isLanguageChangingTo===y&&(P(D),this.translator.changeLanguage(D),this.isLanguageChangingTo=void 0,this.emit("languageChanged",D),this.logger.log("languageChanged",D)):this.isLanguageChangingTo=void 0,C.resolve((...B)=>this.t(...B)),w&&w(L,(...B)=>this.t(...B))},$=L=>{!y&&!L&&this.services.languageDetector&&(L=[]);const D=isString$1(L)?L:L&&L[0],B=this.store.hasLanguageSomeTranslations(D)?D:this.services.languageUtils.getBestMatchFromCodes(isString$1(L)?[L]:L);B&&(this.language||P(B),this.translator.language||this.translator.changeLanguage(B),this.services.languageDetector?.cacheUserLanguage?.(B)),this.loadResources(B,U=>{O(U,B)})};return!y&&this.services.languageDetector&&!this.services.languageDetector.async?$(this.services.languageDetector.detect()):!y&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then($):this.services.languageDetector.detect($):$(y),C}getFixedT(y,w,C){const P=(O,$,...L)=>{let D;typeof $!="object"?D=this.options.overloadTranslationOptionHandler([O,$].concat(L)):D={...$},D.lng=D.lng||P.lng,D.lngs=D.lngs||P.lngs,D.ns=D.ns||P.ns,D.keyPrefix!==""&&(D.keyPrefix=D.keyPrefix||C||P.keyPrefix);const B=this.options.keySeparator||".";let U;return D.keyPrefix&&Array.isArray(O)?U=O.map(k=>(typeof k=="function"&&(k=keysFromSelector(k,{...this.options,...$})),`${D.keyPrefix}${B}${k}`)):(typeof O=="function"&&(O=keysFromSelector(O,{...this.options,...$})),U=D.keyPrefix?`${D.keyPrefix}${B}${O}`:O),this.t(U,D)};return isString$1(y)?P.lng=y:P.lngs=y,P.ns=w,P.keyPrefix=C,P}t(...y){return this.translator?.translate(...y)}exists(...y){return this.translator?.exists(...y)}setDefaultNamespace(y){this.options.defaultNS=y}hasLoadedNamespace(y,w={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const C=w.lng||this.resolvedLanguage||this.languages[0],P=this.options?this.options.fallbackLng:!1,O=this.languages[this.languages.length-1];if(C.toLowerCase()==="cimode")return!0;const $=(L,D)=>{const B=this.services.backendConnector.state[`${L}|${D}`];return B===-1||B===0||B===2};if(w.precheck){const L=w.precheck(this,$);if(L!==void 0)return L}return!!(this.hasResourceBundle(C,y)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||$(C,y)&&(!P||$(O,y)))}loadNamespaces(y,w){const C=defer();return this.options.ns?(isString$1(y)&&(y=[y]),y.forEach(P=>{this.options.ns.indexOf(P)<0&&this.options.ns.push(P)}),this.loadResources(P=>{C.resolve(),w&&w(P)}),C):(w&&w(),Promise.resolve())}loadLanguages(y,w){const C=defer();isString$1(y)&&(y=[y]);const P=this.options.preload||[],O=y.filter($=>P.indexOf($)<0&&this.services.languageUtils.isSupportedCode($));return O.length?(this.options.preload=P.concat(O),this.loadResources($=>{C.resolve(),w&&w($)}),C):(w&&w(),Promise.resolve())}dir(y){if(y||(y=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!y)return"rtl";try{const P=new Intl.Locale(y);if(P&&P.getTextInfo){const O=P.getTextInfo();if(O&&O.direction)return O.direction}}catch{}const w=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],C=this.services?.languageUtils||new LanguageUtil(get());return y.toLowerCase().indexOf("-latn")>1?"ltr":w.indexOf(C.getLanguagePartFromCode(y))>-1||y.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(y={},w){return new I18n(y,w)}cloneInstance(y={},w=noop$4){const C=y.forkResourceStore;C&&delete y.forkResourceStore;const P={...this.options,...y,isClone:!0},O=new I18n(P);if((y.debug!==void 0||y.prefix!==void 0)&&(O.logger=O.logger.clone(y)),["store","services","language"].forEach(L=>{O[L]=this[L]}),O.services={...this.services},O.services.utils={hasLoadedNamespace:O.hasLoadedNamespace.bind(O)},C){const L=Object.keys(this.store.data).reduce((D,B)=>(D[B]={...this.store.data[B]},D[B]=Object.keys(D[B]).reduce((U,k)=>(U[k]={...D[B][k]},U),D[B]),D),{});O.store=new ResourceStore(L,P),O.services.resourceStore=O.store}return O.translator=new Translator(O.services,P),O.translator.on("*",(L,...D)=>{O.emit(L,...D)}),O.init(P,w),O.translator.options=P,O.translator.backendConnector.services.utils={hasLoadedNamespace:O.hasLoadedNamespace.bind(O)},O}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const instance=I18n.createInstance();instance.createInstance=I18n.createInstance;instance.createInstance;instance.dir;instance.init;instance.loadResources;instance.reloadResources;instance.use;instance.changeLanguage;instance.getFixedT;instance.t;instance.exists;instance.setDefaultNamespace;instance.hasLoadedNamespace;instance.loadNamespaces;instance.loadLanguages;const warn=(x,y,w,C)=>{const P=[w,{code:y,...C||{}}];if(x?.services?.logger?.forward)return x.services.logger.forward(P,"warn","react-i18next::",!0);isString(P[0])&&(P[0]=`react-i18next:: ${P[0]}`),x?.services?.logger?.warn?x.services.logger.warn(...P):console?.warn&&console.warn(...P)},alreadyWarned={},warnOnce=(x,y,w,C)=>{isString(w)&&alreadyWarned[w]||(isString(w)&&(alreadyWarned[w]=new Date),warn(x,y,w,C))},loadedClb=(x,y)=>()=>{if(x.isInitialized)y();else{const w=()=>{setTimeout(()=>{x.off("initialized",w)},0),y()};x.on("initialized",w)}},loadNamespaces=(x,y,w)=>{x.loadNamespaces(y,loadedClb(x,w))},loadLanguages=(x,y,w,C)=>{if(isString(w)&&(w=[w]),x.options.preload&&x.options.preload.indexOf(y)>-1)return loadNamespaces(x,w,C);w.forEach(P=>{x.options.ns.indexOf(P)<0&&x.options.ns.push(P)}),x.loadLanguages(y,loadedClb(x,C))},hasLoadedNamespace=(x,y,w={})=>!y.languages||!y.languages.length?(warnOnce(y,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:y.languages}),!0):y.hasLoadedNamespace(x,{lng:w.lng,precheck:(C,P)=>{if(w.bindI18n&&w.bindI18n.indexOf("languageChanging")>-1&&C.services.backendConnector.backend&&C.isLanguageChangingTo&&!P(C.isLanguageChangingTo,x))return!1}}),isString=x=>typeof x=="string",isObject=x=>typeof x=="object"&&x!==null,matchHtmlEntity=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,htmlEntities={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},unescapeHtmlEntity=x=>htmlEntities[x],unescape=x=>x.replace(matchHtmlEntity,unescapeHtmlEntity);let defaultOptions={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape};const setDefaults=(x={})=>{defaultOptions={...defaultOptions,...x}},getDefaults$2=()=>defaultOptions;let i18nInstance;const setI18n=x=>{i18nInstance=x},getI18n=()=>i18nInstance,initReactI18next={type:"3rdParty",init(x){setDefaults(x.options.react),setI18n(x)}},I18nContext=reactExports.createContext();class ReportNamespaces{constructor(){this.usedNamespaces={}}addUsedNamespaces(y){y.forEach(w=>{this.usedNamespaces[w]||(this.usedNamespaces[w]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const usePrevious$2=(x,y)=>{const w=reactExports.useRef();return reactExports.useEffect(()=>{w.current=x},[x,y]),w.current},alwaysNewT=(x,y,w,C)=>x.getFixedT(y,w,C),useMemoizedT=(x,y,w,C)=>reactExports.useCallback(alwaysNewT(x,y,w,C),[x,y,w,C]),useTranslation=(x,y={})=>{const{i18n:w}=y,{i18n:C,defaultNS:P}=reactExports.useContext(I18nContext)||{},O=w||C||getI18n();if(O&&!O.reportNamespaces&&(O.reportNamespaces=new ReportNamespaces),!O){warnOnce(O,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const ae=(Te,re)=>isString(re)?re:isObject(re)&&isString(re.defaultValue)?re.defaultValue:Array.isArray(Te)?Te[Te.length-1]:Te,ve=[ae,{},!1];return ve.t=ae,ve.i18n={},ve.ready=!1,ve}O.options.react?.wait&&warnOnce(O,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const $={...getDefaults$2(),...O.options.react,...y},{useSuspense:L,keyPrefix:D}=$;let B=P||O.options?.defaultNS;B=isString(B)?[B]:B||["translation"],O.reportNamespaces.addUsedNamespaces?.(B);const U=(O.isInitialized||O.initializedStoreOnce)&&B.every(ae=>hasLoadedNamespace(ae,O,$)),k=useMemoizedT(O,y.lng||null,$.nsMode==="fallback"?B:B[0],D),H=()=>k,W=()=>alwaysNewT(O,y.lng||null,$.nsMode==="fallback"?B:B[0],D),[G,Q]=reactExports.useState(H);let Z=B.join();y.lng&&(Z=`${y.lng}${Z}`);const J=usePrevious$2(Z),ne=reactExports.useRef(!0);reactExports.useEffect(()=>{const{bindI18n:ae,bindI18nStore:ve}=$;ne.current=!0,!U&&!L&&(y.lng?loadLanguages(O,y.lng,B,()=>{ne.current&&Q(W)}):loadNamespaces(O,B,()=>{ne.current&&Q(W)})),U&&J&&J!==Z&&ne.current&&Q(W);const Te=()=>{ne.current&&Q(W)};return ae&&O?.on(ae,Te),ve&&O?.store.on(ve,Te),()=>{ne.current=!1,O&&ae&&ae?.split(" ").forEach(re=>O.off(re,Te)),ve&&O&&ve.split(" ").forEach(re=>O.store.off(re,Te))}},[O,Z]),reactExports.useEffect(()=>{ne.current&&U&&Q(H)},[O,D,U]);const oe=[G,O,U];if(oe.t=G,oe.i18n=O,oe.ready=U,U||!U&&!L)return oe;throw new Promise(ae=>{y.lng?loadLanguages(O,y.lng,B,()=>ae()):loadNamespaces(O,B,()=>ae())})};function _classCallCheck(x,y){if(!(x instanceof y))throw new TypeError("Cannot call a class as a function")}function _typeof(x){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},_typeof(x)}function toPrimitive(x,y){if(_typeof(x)!="object"||!x)return x;var w=x[Symbol.toPrimitive];if(w!==void 0){var C=w.call(x,y);if(_typeof(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(x)}function toPropertyKey(x){var y=toPrimitive(x,"string");return _typeof(y)=="symbol"?y:y+""}function _defineProperties(x,y){for(var w=0;w<y.length;w++){var C=y[w];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(x,toPropertyKey(C.key),C)}}function _createClass(x,y,w){return y&&_defineProperties(x.prototype,y),Object.defineProperty(x,"prototype",{writable:!1}),x}var arr=[],each$1=arr.forEach,slice$1=arr.slice;function defaults$3(x){return each$1.call(slice$1.call(arguments,1),function(y){if(y)for(var w in y)x[w]===void 0&&(x[w]=y[w])}),x}function createClassOnDemand(x){return x?typeof x=="function"?new x:x:null}function getDefaults$1(){return{handleEmptyResourcesAsFailed:!0,cacheHitMode:"none"}}function handleCorrectReadFunction(x,y,w,C){var P=x.read.bind(x);if(P.length===2){try{var O=P(y,w);O&&typeof O.then=="function"?O.then(function($){return C(null,$)}).catch(C):C(null,O)}catch($){C($)}return}P(y,w,C)}var Backend$1=(function(){function x(y){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};_classCallCheck(this,x),this.backends=[],this.type="backend",this.allOptions=C,this.init(y,w)}return _createClass(x,[{key:"init",value:function(w){var C=this,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=w,this.options=defaults$3(P,this.options||{},getDefaults$1()),this.allOptions=O,this.options.backends&&this.options.backends.forEach(function($,L){C.backends[L]=C.backends[L]||createClassOnDemand($),C.backends[L].init(w,C.options.backendOptions&&C.options.backendOptions[L]||{},O)}),this.services&&this.options.reloadInterval&&setInterval(function(){return C.reload()},this.options.reloadInterval)}},{key:"read",value:function(w,C,P){var O=this,$=this.backends.length,L=function B(U){if(U>=$)return P(new Error("non of the backend loaded data",!0));var k=U===$-1,H=O.options.handleEmptyResourcesAsFailed&&!k?0:-1,W=O.backends[U];W.read?handleCorrectReadFunction(W,w,C,function(G,Q,Z){if(!G&&Q&&Object.keys(Q).length>H){if(P(null,Q,U),D(U-1,Q),W.save&&O.options.cacheHitMode&&["refresh","refreshAndUpdateStore"].indexOf(O.options.cacheHitMode)>-1){if(Z&&O.options.refreshExpirationTime&&Z+O.options.refreshExpirationTime>Date.now())return;var J=O.backends[U+1];J&&J.read&&handleCorrectReadFunction(J,w,C,function(ne,oe){ne||oe&&(Object.keys(oe).length<=H||(D(U,oe),O.options.cacheHitMode==="refreshAndUpdateStore"&&O.services&&O.services.resourceStore&&O.services.resourceStore.addResourceBundle(w,C,oe)))})}}else B(U+1)}):B(U+1)},D=function B(U,k){if(!(U<0)){var H=O.backends[U];H.save&&H.save(w,C,k),B(U-1,k)}};L(0)}},{key:"create",value:function(w,C,P,O){var $=arguments.length>4&&arguments[4]!==void 0?arguments[4]:function(){},L=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};this.backends.forEach(function(D){if(D.create){var B=D.create.bind(D);if(B.length<6){try{var U;B.length===5?U=B(w,C,P,O,L):U=B(w,C,P,O),U&&typeof U.then=="function"?U.then(function(k){return $(null,k)}).catch($):$(null,U)}catch(k){$(k)}return}B(w,C,P,O,$,L)}})}},{key:"reload",value:function(){var w=this,C=this.services,P=C.backendConnector,O=C.languageUtils,$=C.logger,L=P.language;if(!(L&&L.toLowerCase()==="cimode")){var D=[],B=function(k){var H=O.toResolveHierarchy(k);H.forEach(function(W){D.indexOf(W)<0&&D.push(W)})};B(L),this.allOptions.preload&&this.allOptions.preload.forEach(function(U){return B(U)}),D.forEach(function(U){w.allOptions.ns.forEach(function(k){P.read(U,k,"read",null,null,function(H,W){H&&$.warn("loading namespace ".concat(k," for language ").concat(U," failed"),H),!H&&W&&$.log("loaded namespace ".concat(k," for language ").concat(U),W),P.loaded("".concat(U,"|").concat(k),H,W)})})})}}}]),x})();Backend$1.type="backend";const defaults$2={loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",multiSeparator:"+",allowMultiLoading:!1,fetch:typeof fetch>"u"?void 0:fetch,parse:JSON.parse,stringify:JSON.stringify,requestOptions:{}},arrify=x=>Array.isArray(x)?x:[x],normalize=(x,...y)=>typeof x=="function"?x(...y):x;class BackendError extends Error{retry=null;constructor(y,w=!1){super(y),this.retry=w}}class Backend{constructor(y,w){this.init(y,w)}type="backend";static type="backend";init(y,w={}){this.services=y,this.options={...defaults$2,...this.options,...w}}getLoadPath(y,w){return normalize(this.options.loadPath,y,w)}read(y,w,C){const P=this.getLoadPath(y,w),O=this.services.interpolator.interpolate(P,{lng:y,ns:w});this.loadUrl(O,C)}readMulti(y,w,C){const P=this.getLoadPath(y,w),{multiSeparator:O}=this.options,$=this.services.interpolator.interpolate(P,{lng:y.join(O),ns:w.join(O)});this.loadUrl($,C)}loadUrl(y,w){const{fetch:C,requestOptions:P,parse:O}=this.options;C(y,P).then($=>{const{ok:L,status:D}=$;if(!L){const B=D>=500&&D<600;throw new BackendError(`failed loading ${y}`,B)}return $.text()},()=>{throw new BackendError(`failed loading ${y}`)}).then($=>{try{return w(null,O($,y))}catch{throw new BackendError(`failed parsing ${y} to json`,!1)}}).catch($=>{$ instanceof BackendError&&w($.message,$.retry)})}create(y,w,C,P){const O={[C]:P||""};arrify(y).forEach($=>{const{addPath:L,requestOptions:D,fetch:B,stringify:U}=this.options,k=this.services.interpolator.interpolate(L,{lng:$,ns:w});try{B(k,{method:"POST",body:U(O),...D})}catch(H){console.error(H)}})}}const{slice,forEach}=[];function defaults$1(x){return forEach.call(slice.call(arguments,1),y=>{if(y)for(const w in y)x[w]===void 0&&(x[w]=y[w])}),x}function hasXSS(x){return typeof x!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(w=>w.test(x))}const fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,serializeCookie=function(x,y){const C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},P=encodeURIComponent(y);let O=`${x}=${P}`;if(C.maxAge>0){const $=C.maxAge-0;if(Number.isNaN($))throw new Error("maxAge should be a Number");O+=`; Max-Age=${Math.floor($)}`}if(C.domain){if(!fieldContentRegExp.test(C.domain))throw new TypeError("option domain is invalid");O+=`; Domain=${C.domain}`}if(C.path){if(!fieldContentRegExp.test(C.path))throw new TypeError("option path is invalid");O+=`; Path=${C.path}`}if(C.expires){if(typeof C.expires.toUTCString!="function")throw new TypeError("option expires is invalid");O+=`; Expires=${C.expires.toUTCString()}`}if(C.httpOnly&&(O+="; HttpOnly"),C.secure&&(O+="; Secure"),C.sameSite)switch(typeof C.sameSite=="string"?C.sameSite.toLowerCase():C.sameSite){case!0:O+="; SameSite=Strict";break;case"lax":O+="; SameSite=Lax";break;case"strict":O+="; SameSite=Strict";break;case"none":O+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return C.partitioned&&(O+="; Partitioned"),O},cookie={create(x,y,w,C){let P=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};w&&(P.expires=new Date,P.expires.setTime(P.expires.getTime()+w*60*1e3)),C&&(P.domain=C),document.cookie=serializeCookie(x,y,P)},read(x){const y=`${x}=`,w=document.cookie.split(";");for(let C=0;C<w.length;C++){let P=w[C];for(;P.charAt(0)===" ";)P=P.substring(1,P.length);if(P.indexOf(y)===0)return P.substring(y.length,P.length)}return null},remove(x,y){this.create(x,"",-1,y)}};var cookie$1={name:"cookie",lookup(x){let{lookupCookie:y}=x;if(y&&typeof document<"u")return cookie.read(y)||void 0},cacheUserLanguage(x,y){let{lookupCookie:w,cookieMinutes:C,cookieDomain:P,cookieOptions:O}=y;w&&typeof document<"u"&&cookie.create(w,x,C,P,O)}},querystring={name:"querystring",lookup(x){let{lookupQuerystring:y}=x,w;if(typeof window<"u"){let{search:C}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(C=window.location.hash.substring(window.location.hash.indexOf("?")));const O=C.substring(1).split("&");for(let $=0;$<O.length;$++){const L=O[$].indexOf("=");L>0&&O[$].substring(0,L)===y&&(w=O[$].substring(L+1))}}return w}},hash={name:"hash",lookup(x){let{lookupHash:y,lookupFromHashIndex:w}=x,C;if(typeof window<"u"){const{hash:P}=window.location;if(P&&P.length>2){const O=P.substring(1);if(y){const $=O.split("&");for(let L=0;L<$.length;L++){const D=$[L].indexOf("=");D>0&&$[L].substring(0,D)===y&&(C=$[L].substring(D+1))}}if(C)return C;if(!C&&w>-1){const $=P.match(/\/([a-zA-Z-]*)/g);return Array.isArray($)?$[typeof w=="number"?w:0]?.replace("/",""):void 0}}}return C}};let hasLocalStorageSupport=null;const localStorageAvailable=()=>{if(hasLocalStorageSupport!==null)return hasLocalStorageSupport;try{if(hasLocalStorageSupport=typeof window<"u"&&window.localStorage!==null,!hasLocalStorageSupport)return!1;const x="i18next.translate.boo";window.localStorage.setItem(x,"foo"),window.localStorage.removeItem(x)}catch{hasLocalStorageSupport=!1}return hasLocalStorageSupport};var localStorage$1={name:"localStorage",lookup(x){let{lookupLocalStorage:y}=x;if(y&&localStorageAvailable())return window.localStorage.getItem(y)||void 0},cacheUserLanguage(x,y){let{lookupLocalStorage:w}=y;w&&localStorageAvailable()&&window.localStorage.setItem(w,x)}};let hasSessionStorageSupport=null;const sessionStorageAvailable=()=>{if(hasSessionStorageSupport!==null)return hasSessionStorageSupport;try{if(hasSessionStorageSupport=typeof window<"u"&&window.sessionStorage!==null,!hasSessionStorageSupport)return!1;const x="i18next.translate.boo";window.sessionStorage.setItem(x,"foo"),window.sessionStorage.removeItem(x)}catch{hasSessionStorageSupport=!1}return hasSessionStorageSupport};var sessionStorage={name:"sessionStorage",lookup(x){let{lookupSessionStorage:y}=x;if(y&&sessionStorageAvailable())return window.sessionStorage.getItem(y)||void 0},cacheUserLanguage(x,y){let{lookupSessionStorage:w}=y;w&&sessionStorageAvailable()&&window.sessionStorage.setItem(w,x)}},navigator$1={name:"navigator",lookup(x){const y=[];if(typeof navigator<"u"){const{languages:w,userLanguage:C,language:P}=navigator;if(w)for(let O=0;O<w.length;O++)y.push(w[O]);C&&y.push(C),P&&y.push(P)}return y.length>0?y:void 0}},htmlTag={name:"htmlTag",lookup(x){let{htmlTag:y}=x,w;const C=y||(typeof document<"u"?document.documentElement:null);return C&&typeof C.getAttribute=="function"&&(w=C.getAttribute("lang")),w}},path={name:"path",lookup(x){let{lookupFromPathIndex:y}=x;if(typeof window>"u")return;const w=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(w)?w[typeof y=="number"?y:0]?.replace("/",""):void 0}},subdomain={name:"subdomain",lookup(x){let{lookupFromSubdomainIndex:y}=x;const w=typeof y=="number"?y+1:1,C=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(C)return C[w]}};let canCookies=!1;try{document.cookie,canCookies=!0}catch(x){}const order=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];canCookies||order.splice(1,1);const getDefaults=()=>({order,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:x=>x});class Browser{constructor(y){let w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(y,w)}init(){let y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=y,this.options=defaults$1(w,this.options||{},getDefaults()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=P=>P.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=C,this.addDetector(cookie$1),this.addDetector(querystring),this.addDetector(localStorage$1),this.addDetector(sessionStorage),this.addDetector(navigator$1),this.addDetector(htmlTag),this.addDetector(path),this.addDetector(subdomain),this.addDetector(hash)}addDetector(y){return this.detectors[y.name]=y,this}detect(){let y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,w=[];return y.forEach(C=>{if(this.detectors[C]){let P=this.detectors[C].lookup(this.options);P&&typeof P=="string"&&(P=[P]),P&&(w=w.concat(P))}}),w=w.filter(C=>C!=null&&!hasXSS(C)).map(C=>this.options.convertDetectedLanguage(C)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?w:w.length>0?w[0]:null}cacheUserLanguage(y){let w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;w&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(y)>-1||w.forEach(C=>{this.detectors[C]&&this.detectors[C].cacheUserLanguage(y,this.options)}))}}Browser.type="languageDetector";const locales=["en-US","en","ru-RU","uk-UA","zh"];instance.use(Backend$1).use(Browser).use(initReactI18next).init({fallbackLng:"en",supportedLngs:locales,defaultNS:"theme",fallbackNS:"translation",load:"currentOnly",debug:!0,interpolation:{escapeValue:!1},backend:{backends:[Backend],backendOptions:[{loadPath:new URL("locales/",window.location.href).href+"{{lng}}/{{ns}}.json"}]}});function loadThemeTranslations(x){const y={};for(const w of x){if(!locales.includes(w.lang))continue;const C=y[w.lang]??{};C[w.tkey]=w.value,y[w.lang]=C}for(const[w,C]of Object.entries(y))instance.addResourceBundle(w,"theme",C,!0,!0)}function unloadThemeTranslations(){for(const x of locales)instance.removeResourceBundle(x,"theme")}function formatDate(x){return new Intl.DateTimeFormat(instance.language,{dateStyle:"long",timeStyle:"short"}).format(x)}const baseInit$=atom(!1),initDeferred$=atom(defer$1()),initialBaseUrl$=atom("/"),input$=create({isOpen:!1,content:"",entered:"",onfinished:null},x=>{const y=x.focus(C=>C.isOpen),w=x.focus(C=>C.entered);return{open(C,P){isPaused$.set(!0),x.set({isOpen:!0,content:C,entered:"",onfinished:P})},enter(C){w.set(C)},finish(){y.value&&(y.set(!1),isPaused$.set(!1),x.value.onfinished?.(w.value))},close(){y.value&&(y.set(!1),isPaused$.set(!1),x.value.onfinished?.(""))},clear(){y.value&&(x.value.onfinished?.(""),isPaused$.set(!1)),x.set({isOpen:!1,content:"",entered:"",onfinished:null})}}}),selectedMenuItem$=atom(-1),menu$=atom({isOpen:!1,items:[],onselect:null},x=>{const y=x.focus(w=>w.isOpen);return{open(w,C){x.set({isOpen:!0,items:w,onselect:C})},select(w){y.set(!1),x.value.onselect?.(w),x.value.onselect=null},close(){y.set(!1),x.value.onselect?.(-1),x.value.onselect=null},clear(){y.value&&x.value.onselect?.(-1),x.set({isOpen:!1,items:[],onselect:null})}}}),msg$=create({isOpen:!1,content:"",onclosed:null},x=>{const y=x.focus(w=>w.isOpen);return{open(w,C){isPaused$.set(!0),x.set({isOpen:!0,content:w,onclosed:C})},close(){y.value&&(isPaused$.set(!1),y.set(!1),x.value.onclosed?.())},clear(){y.value&&(isPaused$.set(!1),x.value.onclosed?.()),x.set({isOpen:!1,content:"",onclosed:null})}}}),errorMessage$=atom(""),isErrorShown$=atom(!1);function showError(x){errorMessage$.set(x),isErrorShown$.set(!0)}const noticeMessage$=atom(""),isNoticeShown$=atom(!1);let noticeTimeout=null;function showNotice(x){noticeMessage$.set(x),isNoticeShown$.set(!0),noticeTimeout&&clearTimeout(noticeTimeout),noticeTimeout=setTimeout(()=>{isNoticeShown$.set(!1)},3e3)}const debugState$=atom({isEnabled:!1,isPaused:!1,currentRecord:null,resumeFunction:null,locations:[],selectedLocation:null,targetLine:null,breakpoints:[],executionHistory:[],eventLog:[],autoPauseOnLinks:!1}),isDebugEnabled$=debugState$.focus("isEnabled"),isDebugPaused$=debugState$.focus("isPaused");debugState$.focus("currentRecord");const debugResumeFunction$=debugState$.focus("resumeFunction"),canStep$=debugState$.map(x=>!!x.resumeFunction);debugState$.focus("locations");debugState$.focus("selectedLocation");debugState$.focus("breakpoints");debugState$.focus("executionHistory");debugState$.focus("eventLog");debugState$.focus("autoPauseOnLinks");const debuggerUIState$=atom(()=>{try{const x=localStorage.getItem("qsp-debugger-dock-position"),y=localStorage.getItem("qsp-debugger-size");return{isPanelOpen:!1,dockPosition:x||"bottom",size:y?JSON.parse(y):{width:600,height:400}}}catch{return{isPanelOpen:!1,dockPosition:"bottom",size:{width:600,height:400}}}}),isDebugPanelOpen$=debuggerUIState$.focus("isPanelOpen"),debugDockPosition$=debuggerUIState$.focus("dockPosition"),debugPanelSize$=debuggerUIState$.focus("size");debugDockPosition$.subscribe(x=>{try{localStorage.setItem("qsp-debugger-dock-position",x)}catch{}});debugPanelSize$.subscribe(x=>{try{localStorage.setItem("qsp-debugger-size",JSON.stringify(x))}catch{}});function executeResume(){const x=debugResumeFunction$.value;debugResumeFunction$.set(null),x&&setTimeout(()=>x(),0)}const debugActions={getDebugState:()=>debugState$.value,enableDebug:()=>{isDebugEnabled$.set(!0)},disableDebug:()=>{debugState$.update(x=>({...x,isEnabled:!1,isPaused:!1,currentRecord:null})),executeResume()},pauseExecution:()=>{isDebugPaused$.set(!0)},resumeExecution:()=>{isDebugPaused$.set(!1),executeResume()},stepExecution:()=>{executeResume()},setCurrentRecord:(x,y)=>{debugState$.update(P=>({...P,currentRecord:x,executionHistory:[...P.executionHistory.slice(-99),x]})),debugResumeFunction$.set(y);const w=debugState$.value;w.breakpoints.some(P=>P.enabled&&P.location===x.loc&&(P.line===void 0||P.line===x.line)&&(P.actionIndex===void 0||P.actionIndex===x.actIndex))||w.isPaused?debugState$.update(P=>({...P,isPaused:!0})):executeResume()},setLinkExecution:(x,y)=>{const w={code:x,loc:"[EXEC Link]",line:0,actIndex:-1};debugState$.update(C=>({...C,currentRecord:w,executionHistory:[...C.executionHistory.slice(-99),w],isPaused:!0})),debugResumeFunction$.set(()=>{debugState$.update(C=>({...C,currentRecord:null})),y()})},setLocations:x=>{debugState$.update(y=>({...y,locations:x}))},selectLocation:x=>{debugState$.update(y=>({...y,selectedLocation:x,targetLine:null}))},selectLocationWithLine:(x,y)=>{debugState$.update(w=>({...w,selectedLocation:x,targetLine:y}))},addBreakpoint:x=>{const y=`bp-${Date.now()}-${Math.random().toString(36).substring(2,11)}`;debugState$.update(w=>({...w,breakpoints:[...w.breakpoints,{...x,id:y}]}))},removeBreakpoint:x=>{debugState$.update(y=>({...y,breakpoints:y.breakpoints.filter(w=>w.id!==x)}))},toggleBreakpoint:x=>{debugState$.update(y=>({...y,breakpoints:y.breakpoints.map(w=>w.id===x?{...w,enabled:!w.enabled}:w)}))},clearExecutionHistory:()=>{debugState$.update(x=>({...x,executionHistory:[]}))},logEvent:(x,...y)=>{const w=y.filter(P=>typeof P!="function"),C={id:`event-${Date.now()}-${Math.random().toString(36).substring(2,11)}`,timestamp:Date.now(),event:x,args:w};debugState$.update(P=>({...P,eventLog:[...P.eventLog.slice(-199),C]}))},clearEventLog:()=>{debugState$.update(x=>({...x,eventLog:[]}))},clearAllBreakpoints:()=>{debugState$.update(x=>({...x,breakpoints:[]}))},toggleAutoPauseOnLinks:()=>{debugState$.update(x=>({...x,autoPauseOnLinks:!x.autoPauseOnLinks}))},openDebugPanel:()=>{isDebugPanelOpen$.set(!0)},closeDebugPanel:()=>{isDebugPanelOpen$.set(!1)},toggleDebugPanel:()=>{isDebugPanelOpen$.update(x=>!x)},setDockPosition:x=>{debugDockPosition$.set(x)},setPanelSize:x=>{debugPanelSize$.set(x)}},currentGameEntry$=atom(null),currentGame$=atom(),currentGameMode$=atom(x=>x(currentGame$)?.mode||"classic"),currentAeroWidth$=atom(x=>x(currentGame$)?.aero?.width??800),currentAeroHeight$=atom(x=>x(currentGame$)?.aero?.height??600),saveSlotsCount$=atom(x=>x(currentGame$)?.save_slots??9),onGameEnd$=atom(null),baseUrl$=atom("");async function runGame(x){if(!x)throw new Error("Game not found");try{baseUrl$.set(x.loadConfig.url);let y=x.loadConfig.descriptor||{id:x.id,mode:x.mode,title:x.title,file:""};try{const P=await fetchTextContent(baseUrl$.value,"game.cfg"),O=parseToml(P);if(O.game?.length===1)[y]=O.game;else{const $=O.game?.find(L=>L.id===x.id);if(!$)throw new Error("Config not found");y=$}}catch(P){console.error("Game config not loaded",P)}if(y?.mode==="classic"||!y?.mode)try{const P=await fetchTextContent(baseUrl$.value,"qspgui.cfg"),O=parseCfg(P);if(!O||!Object.keys(O).length)throw new Error("Invalid config file");qspGuiCfg$.set(O)}catch{}if(y.mode==="aero")if(y.aero)y.window={...y.window??{},...y.aero,resizable:!1};else try{const P=await fetchTextContent(baseUrl$.value,"config.xml"),L=new DOMParser().parseFromString(P,"application/xml").querySelector("game");if(L){const D=parseInt(L.getAttribute("width")||"800"),B=parseInt(L.getAttribute("height")||"600");y.aero={width:D,height:B},y.window={...y.window??{},width:D,height:B,resizable:!1}}}catch{y.aero={width:800,height:600},y.window={...y.window??{},width:800,height:600,resizable:!1}}windowManager.setTitle(x.title),setupGlobalHotKeys(),y?.hotkeys&&setupCustomHotKeys(y.hotkeys),y?.resources?.icon&&windowManager.setIcon(baseUrl$.value,y.resources.icon),loadAdditionalResources(y?.resources),y?.themes&&await registerThemes(y.themes),y?.defaultTheme?themeRegistry$.value[y.defaultTheme]?currentTheme$.set(y.defaultTheme):showNotice(`Theme ${y.defaultTheme} not found`):y?.mode==="aero"?currentTheme$.set(AERO_THEME):currentTheme$.set(CLASSIC_THEME),loadThemeTranslations(currentTranslations$.value),y&&applyWindowSettings(y.window);let w=await fetchBinaryContent(baseUrl$.value,x.loadConfig.entrypoint);if(!w)throw new Error("Failed to load game");x.loadConfig.entrypoint.toLowerCase().endsWith(".qsps")&&(w=convertQsps(w)),isPaused$.set(!1),qspApi$.value?.openGame(w,!0),qspApi$.value?.restartGame(),currentGameEntry$.set(x),y&&currentGame$.set(y),loadSaveList()}catch(y){console.error(y),showNotice(y instanceof Error?y.message:String(y)),stopCurrentGame()}}let wasResized=!1;async function applyWindowSettings(x){x&&(x.width&&x.height&&(await windowManager.resize(x.width,x.height),wasResized=!0),(x.resizable??!0)&&(x.minWidth&&x.minHeight&&await windowManager.setMinSize(x.minWidth,x.minHeight),x.maxWidth&&x.maxHeight&&await windowManager.setMaxSize(x.maxWidth,x.maxHeight)),x.fullscreen&&setTimeout(()=>windowManager.goFullscreen(),0))}baseUrl$.subscribe(x=>{const y=document.querySelector("#page-base");y.href=x||"/"});function stopCurrentGame(){baseUrl$.set(initialBaseUrl$.value),currentGameEntry$.set(null),currentGame$.set(null),qspGuiCfg$.set(null),onClosePauseScreen(),pauseScreenCurrentPanel$.set("credits"),isPaused$.set(!0),input$.actions.clear(),menu$.actions.clear(),msg$.actions.clear(),mainContent$.set(""),statsContent$.set(""),actions$.set([]),objects$.set([]),cmdText$.set(""),debugActions.disableDebug(),debugActions.clearExecutionHistory(),debugActions.clearEventLog(),debugActions.clearAllBreakpoints(),debugActions.selectLocation(null),windowManager.setTitle("qSpider"),windowManager.setIcon(initialBaseUrl$.value,"favicon.ico"),windowManager.unsetMaxSize(),windowManager.unsetMinSize(),wasResized&&windowManager.resize(1024,768),sounds$.actions.clear(),regions$.set({}),layers$.set({}),clearAdditionalResources(),clearHotkeys(),unloadThemeTranslations(),currentTheme$.set(CLASSIC_THEME),themeRegistry$.actions.reset(),window.dispatchEvent(new Event("game-unload")),wasResized=!1,onGameEnd$.value?.()}function onRestart(){reloadRegions(),reloadLayers()}function onRestore(){reloadRegions(),reloadLayers()}function onGameCommand(x){if(x.startsWith("pause:")){const[,y]=x.split(":");isPauseScreenVisible$.value||openPauseScreen(),pauseScreenCurrentPanel$.set(y)}else if(x.startsWith("scroll:")){const[,y,w]=x.split(":");switch(y){case"main":mainScroll$.update(C=>w==="top"?-1:Math.max(C,0)+1);break;case"stats":statsScroll$.update(C=>w==="top"?-1:Math.max(C,0)+1);break}}switch(x){case"quit":stopCurrentGame();break;case"restart":isPaused$.set(!0),qspApi$.value?.restartGame(),onRestart(),closePauseScreen(),pauseScreenCurrentPanel$.set("credits");break;case"resume":closePauseScreen();break;case"mute":muted$.set(!0);break;case"unmute":muted$.set(!1);break;case"toggle-mute":muted$.update(y=>!y);break;case"quicksave":quickSave();break;case"quickload":quickLoad();break}}const wait$=create(null),waitTimeout$=create();function finishWait(){const x=wait$.value;x&&(clearTimeout(waitTimeout$.value),isPaused$.set(!1),wait$.set(null),x.finish())}wait$.subscribe(x=>{x&&(clearTimeout(waitTimeout$.value),isPaused$.set(!0),waitTimeout$.set(setTimeout(()=>{finishWait()},x.ms)))});function parseArgs(x){const y=[];let w=!1,C=[];for(let P=0;P<x.length;P++){const O=x[P];O==="~"?w?(w=!1,y.push(C.join("")),C=[]):w=!0:!w&&O===","?(y.push(parseFloat(C.join(""))),C=[]):C.push(O)}return C.length&&y.push(parseFloat(C.join(""))),y}const qspiderCommands={"action:"(x){onGameCommand(x)},"event:"(x){setTimeout(()=>{const y=x.trim().match(/(.*?)(\[(.*?)\])/i);if(y){const w=y[1],C=parseArgs(y[3]);window.dispatchEvent(new CustomEvent("qspider-event",{detail:{name:w,args:C}}))}else window.dispatchEvent(new CustomEvent("qspider-event",{detail:{name:x.trim()}}))},0)},"change_theme:"(x){if(!themeRegistry$.value[x]){errorMessage$.set(`Theme ${x} is not registered`);return}currentTheme$.set(x)},"update_region:"(x){regions$.focus(w=>w[x]).set(qspApi$.value?.readVariableByKey("$qspider_region",x)??"")},"scroll_region:"(x){const[y,w]=x.split(":"),C=regionsScroll$.focus(P=>P[y]);w==="top"?C.set(-1):C.update((P=0)=>Math.max(P,0)+1)},"update_layer:"(x){layers$.focus(w=>w[x]).set(readLayerState(x))},update_layers(){const x=layers$.value??{},y={};for(const w of Object.keys(x))y[w]=readLayerState(w);layers$.set(y)},"fullscreen:"(x){x==="on"?windowManager.goFullscreen():windowManager.goWindowed()},quit(){stopCurrentGame()}},qspiderModuleContent=`# qspider_change_theme
! $args[0] - theme name
exec('qspider.change_theme:<<$args[0]>>')
---

# qspider_update_region
! $args[0] - region name
! $args[1] - content
$qspider_region[$args[0]] = $args[1]
exec('qspider.update_region:<<$args[0]>>')
---
# qspider_append_region
! $args[0] - region name
! $args[1] - content
$qspider_region[$args[0]] += $args[1]
exec('qspider.update_region:<<$args[0]>>')
---
# qspider_prepend_region
! $args[0] - region name
! $args[1] - content
$qspider_region[$args[0]] = $args[1] + $qspider_region[$args[0]]
exec('qspider.update_region:<<$args[0]>>')
---
# qspider_scroll_region
! $args[0] - region name
! $args[1] - direction (top or bottom)
exec('qspider.scroll_region:<<$args[0]>>:<<$args[1]>>')
---
# qspider_clear_region
! $args[0] - region name
! $args[1] - content
$qspider_region[$args[0]] = ''
exec('qspider.update_region:<<$args[0]>>')
---

# qspider_show_layer
! $args[0] - layer name
qspider_layers[$args[0]] = 1
exec('qspider.update_layer:<<$args[0]>>')
---

# qspider_hide_layer
! $args[0] - layer name
qspider_layers[$args[0]] = 0
exec('qspider.update_layer:<<$args[0]>>')
---

# qspider_show_only_layer
! $args[0] - layer name
killvar 'qspider_layers'
qspider_layers[$args[0]] = 1
exec('qspider.update_layers')
---

# qspider_quicksave
exec('qspider.action:quicksave')
---

# qspider_quickload
exec('qspider.action:quickload')
---

# qspider_restart
exec('qspider.action:restart')
---

# qspider_resume
exec('qspider.action:resume')
---

# qspider_quit
exec('qspider.action:quit')
---

# qspider_mute
exec('qspider.action:mute')
---

# qspider_unmute
exec('qspider.action:unmute')
---

# qspider_toggle_mute
exec('qspider.action:toggle-mute')
---

# qspider_open_pause_screen
! $args[0] - panel name
exec('qspider.action:pause:<<$args[0]>>')
---

# qspider_scroll
! $args[0] - panel (main or stats)
! $args[1] - direction (top or bottom)
exec('qspider.action:scroll:<<$args[0]>>:<<$args[1]>>')
---

#qspider_event
! $args[0] - event name
! any further args will be added as event args

local $event_args = ''
if ARRSIZE('$args') > 1:
  loop local i = 1 while i < ARRSIZE('$args') step i += 1:
    if LEN($event_args) > 0:  $event_args += ','
    if $args[i] <> '':
      $event_args += '~<<$args[i]>>~'
    else:
      $event_args += args[i]
    end
  end
end

if $event_args <> '':
  exec('qspider.event: <<$args[0]>>[<<$event_args>>]')
else:
  exec('qspider.event: <<$args[0]>>')
end
---
`,conditionAttributes=["equals","not-equals","is","is-not","contains","not-contains","greater","less","greater-or-equal","less-or-equal"];function checkCondition(x,y){const[w,C]=y;switch(w){case"equals":case"is":return String(x)===String(C);case"not-equals":case"is-not":return String(x)!==String(C);case"contains":return typeof x=="string"?x.includes(C):!1;case"not-contains":return typeof x=="string"?!x.includes(C):!1;case"greater":return typeof x=="number"?x>Number(C):x>C;case"less":return typeof x=="number"?x<Number(C):x<C;case"greater-or-equal":return typeof x=="number"?x>=Number(C):x>=C;case"less-or-equal":return typeof x=="number"?x<=Number(C):x<=C}return!1}const qspApi$=atom(),qspApiInitialized$=atom(!1),qspError$=atom(null),qspiderModule$=atom(o(s(qspiderModuleContent))),eventLogger={log(x,...y){debugActions.logEvent(x,...y)}};async function initQspApi(){const x=await fetch(wasmUrl).then(w=>w.arrayBuffer()),y=await r$1(x);console.log(`QSP version: ${y.version()} ${y.getCompiledDateTime()}`),y.registerEventLogger(eventLogger),qspApi$.set(y),qspApiInitialized$.set(!0)}function execCode(x){const y=qspApi$.value;if(!y)return;const w=debugActions.getDebugState();w.isEnabled&&(w.isPaused||w.autoPauseOnLinks)?debugActions.setLinkExecution(x,()=>{y.execCode(x)}):y.execCode(x)}function enableDebugMode(){qspApi$.value?.enableDebugMode(),debugActions.enableDebug()}function disableDebugMode(){qspApi$.value?.disableDebugMode(),debugActions.disableDebug()}function getLocationsList(){return qspApi$.value?.getLocationsList()||[]}function getLocationCode(x){return qspApi$.value?.getLocationCode(x)||[]}function getActionCode(x,y){return qspApi$.value?.getActionCode(x,y)||[]}function getLocationActions(x){return qspApi$.value?.getLocationActions(x)||[]}function getLocationDescription(x){return qspApi$.value?.getLocationDescription(x)||""}function onLinkClicked(x){x.toLowerCase().startsWith("exec:")?execCode(x.substring(5)):window.location.href=x}function useQspVariable(x,y,w,C){const[P,O]=reactExports.useState(C);return reactExports.useEffect(()=>{if(!x)return;const $=y?qspApi$.value?.watchVariableByKey(x,y,L=>O(L||C)):qspApi$.value?.watchVariableByIndex(x,w,L=>O(L||C));return()=>{$?.()}},[x,y,w,C]),P}function useQspExpression(x,y){const[w,C]=reactExports.useState(!1);return reactExports.useEffect(()=>{if(!x)return;const P=qspApi$.value?.watchVariable(x,O=>{C(checkCondition(O,y))});return()=>{P?.()}},[x,y]),w}qspApi$.subscribe(x=>{x.on("version",(y,w)=>{switch(y){case"player":return w("qSpider");case"platform":return w("browser")}return w(x.version())}),x.on("error",qspError$.set),x.on("system_cmd",y=>{if(!y.startsWith("qspider"))return;const[,w]=y.split(".");for(const[C,P]of Object.entries(qspiderCommands))if(w.trim().startsWith(C)){const O=w.replace(C,"");P(O)}}),x.on("is_play",(y,w)=>{w(sounds$.actions.isPlaying(y))}),x.on("play_file",(y,w,C)=>{sounds$.actions.play(y,w),C()}),x.on("close_file",(y,w)=>{y?sounds$.actions.close(y):sounds$.actions.closeAll(),w()}),x.on("timer",y=>{counterDelay$.set(y)}),x.on("open_game",async(y,w,C)=>{if(y==="qspider"){x.openGame(qspiderModule$.value,!1),C();return}withCounterPaused(async()=>{const P=await fetchBinaryContent(baseUrl$.value,y);let O=P;if(y.toLowerCase().endsWith(".qsps")&&(O=convertQsps(P)),w){const L=cleanPath(y);baseUrl$.update(D=>D+L.slice(0,L.lastIndexOf("/")+1))}x.openGame(O,w),C()})}),x.on("input",(y,w)=>{input$.actions.open(y,w)}),x.on("menu",(y,w)=>{menu$.actions.open(prepareList(y),w)}),x.on("msg",(y,w)=>{msg$.actions.open(y,w)}),x.on("main_changed",y=>{const w=mainContent$.value,C=prepareContent(y),P=!w||C!==w&&!C.startsWith(w);isNewLoc$.set(P),nextMainContent$.set(C),P?newLocHash$.set(String(hashString(nextMainContent$.value))):mainContent$.set(C)}),x.on("stats_changed",y=>{statsContent$.set(prepareContent(y))}),x.on("actions_changed",y=>{actions$.set(prepareList(y))}),x.on("objects_changed",y=>{objects$.set(prepareObjectList(y))}),x.on("user_input",y=>{cmdText$.set(y)}),x.on("view",y=>{y?view$.actions.open(y):view$.actions.close()}),x.on("panel_visibility",(y,w)=>{y&t$2.VARS&&isStatsVisible$.set(w),y&t$2.ACTS&&isActsVisible$.set(w),y&t$2.OBJS&&isObjsVisible$.set(w),y&t$2.INPUT&&isCmdVisible$.set(w)}),x.on("load_save",async(y,w)=>{if(!currentGameEntry$.value)return w();saveLoadedCallback$.set(()=>{w()}),y?await restoreFromPath(y):(requestedAction$.set("load"),onGameCommand("pause:saves"))}),x.on("save_game",async(y,w)=>{if(!currentGameEntry$.value)return w();gameSavedCallback$.set(()=>{w()}),y?await saveToPath(y):(requestedAction$.set("save"),onGameCommand("pause:saves"))}),x.on("wait",(y,w)=>{wait$.set({ms:y,finish:w})}),x.on("debug",(y,w)=>{debugActions.setCurrentRecord(y,w)})});function usePrevious$1(x){const y=reactExports.useRef();return reactExports.useEffect(()=>{y.current=x},[x]),y.current}const playerTheme$=create("light");function initTheme(){let x=localStorage.getItem("qspider-theme");!x&&window.matchMedia?.("(prefers-color-scheme: dark)").matches?x="dark":x="light",playerTheme$.set(x)}function toggleTheme(){playerTheme$.update(x=>x==="dark"?"light":"dark")}playerTheme$.subscribe(x=>{x==="dark"?document.body.classList.add("dark-theme"):document.body.classList.remove("dark-theme"),localStorage.setItem("qspider-theme",x)});const componentsRegistry$=atom(new Map,x=>({register(y,w){x.value.set(y,w)}})),useComponent=x=>componentsRegistry$.value.get(x)||(()=>null),edgeHasTranslation$=atom(!1),othersHasTranslation$=atom(!1),hasBrowserTranslation$=atom(x=>x(edgeHasTranslation$)||x(othersHasTranslation$)),originalLanguge=document.documentElement.lang,langObserver=new MutationObserver(()=>{othersHasTranslation$.set(document.documentElement.lang!==originalLanguge)});langObserver.observe(document.documentElement,{attributes:!0,attributeFilter:["lang"],childList:!1,characterData:!1});const[title]=document.getElementsByTagName("title"),titleObserver=new MutationObserver(()=>{edgeHasTranslation$.set(title.hasAttribute("_msttexthash"))});titleObserver.observe(title,{attributes:!0,attributeFilter:["_msttexthash"],childList:!1,characterData:!1});const codeInspectorState$=atom({locationInfoCache:new Map,isLoading:!1,error:null}),codeInspectorActions={refreshLocations:async()=>{codeInspectorState$.update(x=>({...x,isLoading:!0,error:null}));try{const x=getLocationsList();debugActions.setLocations(x),codeInspectorState$.update(y=>({...y,isLoading:!1}))}catch(x){codeInspectorState$.update(y=>({...y,isLoading:!1,error:x instanceof Error?x.message:"Failed to refresh locations"}))}},getLocationInfo:async x=>{const y=codeInspectorState$.value.locationInfoCache;if(y.has(x))return y.get(x)||null;codeInspectorState$.update(w=>({...w,isLoading:!0,error:null}));try{const w=getLocationCode(x),C=getLocationActions(x),P=getLocationDescription(x),O=C.map((L,D)=>getActionCode(x,D)),$={name:x,code:w,actions:O,description:P};return codeInspectorState$.update(L=>({...L,locationInfoCache:new Map(L.locationInfoCache).set(x,$),isLoading:!1})),$}catch(w){return codeInspectorState$.update(C=>({...C,isLoading:!1,error:w instanceof Error?w.message:"Failed to get location info"})),null}},clearCache:()=>{codeInspectorState$.update(x=>({...x,locationInfoCache:new Map}))},getActionCode:(x,y)=>{try{return getActionCode(x,y)}catch(w){return console.error("Failed to get action code:",w),[]}},searchInCode:x=>{const y=[],w=codeInspectorState$.value.locationInfoCache;for(const[C,P]of w){const O=[];P.code.forEach(($,L)=>{$.toLowerCase().includes(x.toLowerCase())&&O.push({line:L+1,text:$.trim()})}),P.actions.forEach(($,L)=>{$.forEach((D,B)=>{D.toLowerCase().includes(x.toLowerCase())&&O.push({line:B+1,text:`[Action ${L}] ${D.trim()}`})})}),O.length>0&&y.push({location:C,matches:O})}return y}},isCodeInspectorLoading$=codeInspectorState$.focus("isLoading"),codeInspectorError$=codeInspectorState$.focus("error"),fontSizeMap={"-2":"x-small","-1":"small","+0":"medium","+1":"large","+2":"x-large","+3":"xx-large","+4":"xxx-large",0:"medium",1:"x-small",2:"small",3:"medium",4:"large",5:"x-large",6:"xx-large",7:"xxx-large"},Font=({size:x,children:y,attrs:w})=>{const[,C,P]=useAttributes(w,"span"),O={...C,fontSize:x!=null?fontSizeMap[x]||"medium":"inherit"};return jsxRuntimeExports.jsx("span",{...P,style:O,children:y})},ATTRIBUTES_TO_PROPS$1=Object.freeze({class:"className",colspan:"colSpan",datetime:"dateTime",rowspan:"rowSpan",srclang:"srcLang",srcset:"srcSet",usemap:"useMap",cellspacing:"cellSpacing",cellpadding:"cellPadding",autoplay:"autoPlay","xlink:href":"xlinkHref","xmlns:xlink":"xmlnsXlink",for:"htmlFor",minlength:"minLength",maxlength:"maxLength"}),attributeToStyle={size:"fontSize",color:"color",face:"fontFace",valign:"verticalAlign",bgcolor:"backgroundColor",width:"width",height:"height"},imgAlignMap={texttop:"text-top",center:"middle",abscenter:"middle",bottom:"bottom"},attributeToStyleConverters={width:x=>/^\d+$/.test(x)?`${x}px`:x,height:x=>/^\d+$/.test(x)?`${x}px`:x,fontSize:x=>/^[+-]?\d+$/.test(x)?fontSizeMap[x]:x},attributesToStyle=(x,y)=>{const w={};for(const C of Object.keys(x)){const P=attributeToStyle[C];if(y==="img"&&C==="align"){const O=x[C]?.toLowerCase();if(O){const $=imgAlignMap[O];$&&(w.verticalAlign=$)}}if(P){const O=x[C];if(!O)continue;attributeToStyleConverters[P]?w[P]=attributeToStyleConverters[P](O):w[P]=O}}return w},supportedEvents=["click","mouseenter","mouseleave","contextmenu","dblclick","wheel"],eventsMap={click:"onClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},useAttributes=(x,y,w=y)=>{const C={};w.includes("-")&&(C["data-qsp"]=w.replace("qsp-",""));const{tag:P=y,style:O={},"qsp-command":$,"qsp-save-command":L,...D}=x;for(const[U,k]of Object.entries(D)){if(U.startsWith("on"))continue;if(U.startsWith("qsp-on")){const W=k.slice(5),[,G]=U.split(":");supportedEvents.includes(G)&&(C[eventsMap[G]]=Q=>{Q.preventDefault(),execCode(W)});continue}let H=ATTRIBUTES_TO_PROPS$1[U]||U;H.includes("-")&&!H.startsWith("aria-")&&!H.startsWith("data-")&&H!=="mask-type"&&(H=H.replace(/-([a-z])/g,function(W,G){return G.toUpperCase()})),C[H]=k}P.includes("-")&&C.className&&(C.class=C.className,delete C.className),P==="iframe"&&(C.sandbox="allow-scripts allow-same-origin"),$?(C.onClick=U=>{U.preventDefault(),onGameCommand($)},C["data-qsp-command"]=$):L&&(C["data-qsp-save-command"]=L,C.onClick=U=>{if(U.preventDefault(),!U.target)return;const k=getSaveContext(U.target);k&&onSaveCommand(L,k)});const B=attributesToStyle(x,P);return[P,{...O,...B},C]};function getSaveContext(x){const y=x.closest("[data-qsp-save]");if(!y)return console.error("qsp-save-command used on element outside of save tag"),null;const w="qspSaveIndex"in y.dataset?parseInt(y.dataset.qspSaveIndex??"-1",0):-1,C=y.dataset.qspSavePath??"";return{slot_index:w,save_path:C}}const Element$2=function({attributes:x={},className:y,children:w=null,selfClose:C=!1,tagName:P}){const O=P;return C?jsxRuntimeExports.jsx(O,{className:y,...x}):jsxRuntimeExports.jsx(O,{className:y,...x,children:w})},Markup=function(x){const{content:y}=x,w=y.length===1?y[0]:y;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:w})},TYPE_FLOW=1,TYPE_SECTION=2,TYPE_HEADING=4,TYPE_PHRASING=8,TYPE_EMBEDDED=16,TYPE_INTERACTIVE=32,TYPE_PALPABLE=64,tagConfigs={a:{content:TYPE_FLOW|TYPE_PHRASING,self:!1,type:TYPE_FLOW|TYPE_PHRASING|TYPE_INTERACTIVE|TYPE_PALPABLE},address:{invalid:["h1","h2","h3","h4","h5","h6","address","article","aside","section","div","header","footer"],self:!1},audio:{children:["track","source"]},br:{type:TYPE_FLOW|TYPE_PHRASING,void:!0},body:{content:TYPE_FLOW|TYPE_SECTION|TYPE_HEADING|TYPE_PHRASING|TYPE_EMBEDDED|TYPE_INTERACTIVE|TYPE_PALPABLE},button:{content:TYPE_PHRASING,type:TYPE_FLOW|TYPE_PHRASING|TYPE_INTERACTIVE|TYPE_PALPABLE},caption:{content:TYPE_FLOW,parent:["table"]},col:{parent:["colgroup"],void:!0},colgroup:{children:["col"],parent:["table"]},details:{children:["summary"],type:TYPE_FLOW|TYPE_INTERACTIVE|TYPE_PALPABLE},dd:{content:TYPE_FLOW,parent:["dl"]},dl:{children:["dt","dd"],type:TYPE_FLOW},dt:{content:TYPE_FLOW,invalid:["footer","header"],parent:["dl"]},figcaption:{content:TYPE_FLOW,parent:["figure"]},footer:{invalid:["footer","header"]},header:{invalid:["footer","header"]},hr:{type:TYPE_FLOW,void:!0},img:{void:!0},li:{content:TYPE_FLOW,parent:["ul","ol","menu"]},main:{self:!1},ol:{children:["li"],type:TYPE_FLOW},picture:{children:["source","img"],type:TYPE_FLOW|TYPE_PHRASING|TYPE_EMBEDDED},rb:{parent:["ruby","rtc"]},rp:{parent:["ruby","rtc"]},rt:{content:TYPE_PHRASING,parent:["ruby","rtc"]},rtc:{content:TYPE_PHRASING,parent:["ruby"]},ruby:{children:["rb","rp","rt","rtc"]},source:{parent:["audio","video","picture"],void:!0},summary:{content:TYPE_PHRASING,parent:["details"]},table:{children:["caption","colgroup","thead","tbody","tfoot","tr"],type:TYPE_FLOW},tbody:{parent:["table"],children:["tr"]},td:{content:TYPE_FLOW,parent:["tr"]},tfoot:{parent:["table"],children:["tr"]},th:{content:TYPE_FLOW,parent:["tr"]},thead:{parent:["table"],children:["tr"]},tr:{parent:["table","tbody","thead","tfoot"],children:["th","td"]},track:{parent:["audio","video"],void:!0},ul:{children:["li"],type:TYPE_FLOW},video:{children:["track","source"]},wbr:{type:TYPE_FLOW|TYPE_PHRASING,void:!0}};function createConfigBuilder(x){return y=>{tagConfigs[y]={...x,...tagConfigs[y]}}}["address","main","div","figure","p","pre"].forEach(createConfigBuilder({content:TYPE_FLOW,type:TYPE_FLOW|TYPE_PALPABLE}));["abbr","b","bdi","bdo","cite","code","data","dfn","em","i","kbd","mark","q","ruby","samp","strong","sub","sup","time","u","var"].forEach(createConfigBuilder({content:TYPE_PHRASING,type:TYPE_FLOW|TYPE_PHRASING|TYPE_PALPABLE}));["p","pre"].forEach(createConfigBuilder({content:TYPE_PHRASING,type:TYPE_FLOW|TYPE_PALPABLE}));["s","small","span","del","ins"].forEach(createConfigBuilder({content:TYPE_PHRASING,type:TYPE_FLOW|TYPE_PHRASING}));["article","aside","footer","header","nav","section","blockquote"].forEach(createConfigBuilder({content:TYPE_FLOW,type:TYPE_FLOW|TYPE_SECTION|TYPE_PALPABLE}));["h1","h2","h3","h4","h5","h6"].forEach(createConfigBuilder({content:TYPE_PHRASING,type:TYPE_FLOW|TYPE_HEADING|TYPE_PALPABLE}));["audio","canvas","iframe","img","video"].forEach(createConfigBuilder({type:TYPE_FLOW|TYPE_PHRASING|TYPE_EMBEDDED|TYPE_PALPABLE}));const TAGS=Object.freeze(tagConfigs),BANNED_TAG_LIST=["applet","base","body","command","embed","frame","frameset","head","html","link","meta","noscript","object","script","style","title"],ALLOWED_TAG_LIST=Object.keys(TAGS).filter(x=>x!=="canvas"&&x!=="iframe"),FILTER_ALLOW=1,FILTER_DENY=2,FILTER_CAST_NUMBER=3,FILTER_CAST_BOOL=4,FILTER_NO_CAST=5,ATTRIBUTES=Object.freeze({alt:FILTER_ALLOW,cite:FILTER_ALLOW,class:FILTER_ALLOW,colspan:FILTER_CAST_NUMBER,controls:FILTER_CAST_BOOL,datetime:FILTER_ALLOW,default:FILTER_CAST_BOOL,disabled:FILTER_CAST_BOOL,dir:FILTER_ALLOW,height:FILTER_ALLOW,href:FILTER_ALLOW,id:FILTER_ALLOW,kind:FILTER_ALLOW,label:FILTER_ALLOW,lang:FILTER_ALLOW,loading:FILTER_ALLOW,loop:FILTER_CAST_BOOL,media:FILTER_ALLOW,muted:FILTER_CAST_BOOL,poster:FILTER_ALLOW,rel:FILTER_ALLOW,role:FILTER_ALLOW,rowspan:FILTER_CAST_NUMBER,scope:FILTER_ALLOW,sizes:FILTER_ALLOW,span:FILTER_CAST_NUMBER,start:FILTER_CAST_NUMBER,style:FILTER_NO_CAST,src:FILTER_ALLOW,srclang:FILTER_ALLOW,srcset:FILTER_ALLOW,tabindex:FILTER_ALLOW,target:FILTER_ALLOW,title:FILTER_ALLOW,type:FILTER_ALLOW,width:FILTER_ALLOW}),ATTRIBUTES_TO_PROPS=Object.freeze({class:"className",colspan:"colSpan",datetime:"dateTime",rowspan:"rowSpan",srclang:"srcLang",srcset:"srcSet",tabindex:"tabIndex"});function isHtmlElement(x){return x.nodeType===1}function isTextNode(x){return x.nodeType===3}const ALLOWED_ATTRS=/^(aria-|data-|\w+:)/iu,domParser=new DOMParser;class HtmlParser{constructor(y={}){this.allowed=new Set(y.allowList??ALLOWED_TAG_LIST),this.banned=new Set(BANNED_TAG_LIST),this.blocked=new Set(y.blockList),this.transform=y.transform}parse(y,w=!0){if(!y)return[];const C=domParser.parseFromString(w?this.convertLineBreaks(y):y,"text/html");return C.body?this.parseNode(C.body,this.getTagConfig(C.body.nodeName.toLowerCase())):[]}parseNode(y,w){const C=[];let P=[],O=0;for(const $ of y.childNodes)if(isHtmlElement($)){const L=$.nodeName.toLowerCase(),D=this.getTagConfig(L);P.length>0&&(C.push(P.join("")),P=[]);let B;if(this.transform){B=this.parseNode($,D);const U=this.transform($,B,D);if(U===null)continue;if(typeof U<"u"){O++,C.push(React.cloneElement(U,{key:O}));continue}}if(this.banned.has(L))continue;if(this.isTagAllowed(L)&&this.canRenderChild(w,D)){const U=this.extractAttributes($),k={tagName:L};U&&(k.attributes=U),D.void&&(k.selfClose=D.void),++O,C.push(React.createElement(Element$2,{...k,key:O},B??this.parseNode($,D)))}else C.push(...this.parseNode($,D.tagName?D:w))}else if(isTextNode($)){const L=$.textContent;L&&P.push(L)}return P.length>0&&C.push(P.join("")),C}getTagConfig(y){const w={children:[],content:0,invalid:[],parent:[],self:!0,tagName:"",type:0,void:!1};return TAGS[y]?{...w,...TAGS[y],tagName:y}:w}convertLineBreaks(y){if(y.match(/<((?:\/[ a-z]+)|(?:[ a-z]+\/))>/gi))return y;let w=y.replace(/\r\n/g,`
`);return w=w.replace(/\n{3,}/g,`


`),w=w.replace(/\n/g,"<br/>"),w}canRenderChild(y,w){return!y.tagName||!w.tagName||y.void?!1:y.children.length>0?y.children.includes(w.tagName):y.invalid.length>0&&y.invalid.includes(w.tagName)?!1:w.parent.length>0?w.parent.includes(y.tagName):!y.self&&y.tagName===w.tagName?!1:!!(y&&y.content&w.type)}extractAttributes(y){const w={};let C=0;if(!isHtmlElement(y)||!y.attributes)return null;for(const P of y.attributes){const{name:O,value:$}=P,L=O.toLowerCase(),D=ATTRIBUTES[L]||ATTRIBUTES[O];if(!this.isSafe(y)||!L.match(ALLOWED_ATTRS)&&(!D||D===FILTER_DENY||L.startsWith("on")||$.replace(/(\s|\0|&#x0([9AD]);)/,"").match(/(javascript|vbscript|livescript|xss):/i)))continue;let B=L==="style"?this.extractStyleAttribute(y):$;D===FILTER_CAST_BOOL?B=!0:D===FILTER_CAST_NUMBER?B=Number.parseFloat(String(B)):D!==FILTER_NO_CAST&&(B=String(B)),w[ATTRIBUTES_TO_PROPS[L]||L]=B,C+=1}return C===0?null:w}extractStyleAttribute(y){const w={};return Array.from(y.style).forEach(C=>{const P=y.style[C];(typeof P=="string"||typeof P=="number")&&(w[C.replace(/-([a-z])/g,(O,$)=>String($).toUpperCase())]=P)}),w}isSafe(y){if(typeof HTMLAnchorElement<"u"&&y instanceof HTMLAnchorElement){if(y.getAttribute("href")?.startsWith("#"))return!0;const C=y.protocol.toLowerCase();return C===":"||C==="http:"||C==="https:"||C==="mailto:"||C==="tel:"}return!0}isTagAllowed(y){return!(this.banned.has(y)||this.blocked.has(y))}}const actionContext=reactExports.createContext({action:{name:[],image:""},index:-1}),QspActions=({attrs:x,children:y})=>{const[w,C,P]=useAttributes(x,"qsp-actions");return useAtomExports.useAtom(isActsVisible$)?jsxRuntimeExports.jsx(w,{style:C,...P,children:y}):null},QspActionsList=({attrs:x,children:y})=>{const w=useAtomExports.useAtom(actionsWithParsedName$),[C,P,O]=useAttributes(x,"qsp-actions-list");return jsxRuntimeExports.jsx(C,{style:P,...O,children:w.map(($,L)=>jsxRuntimeExports.jsx(actionContext.Provider,{value:{action:$,index:L},children:React.Children.map(y,D=>React.cloneElement(D))},$.key))})},QspActionItem=({attrs:x,children:y})=>{const w=useAtomExports.useAtom(selectedAction$),{action:C,index:P}=reactExports.useContext(actionContext),[O,$,{useFormat:L,...D}]=useAttributes(x,"qsp-action"),B={...$,"--action-image":C.image?`url("${C.image}")`:""},U=()=>{selectAction(P)},k=()=>{selectAction(-1)},H=G=>{G.preventDefault(),selectedAction$.value<0&&selectAction(P),execSelectedAction()},W=w===P;return jsxRuntimeExports.jsx(O,{...D,style:B,"data-qsp-selected":W?"":null,onMouseOver:U,onMouseLeave:k,onClick:H,children:y})},QspActionName=({attrs:x})=>{const[y,w,C]=useAttributes(x,"qsp-action-name"),{action:P}=reactExports.useContext(actionContext);return jsxRuntimeExports.jsx(y,{...C,style:w,children:jsxRuntimeExports.jsx(Markup,{content:P.name})})},QspActionImage=({attrs:x})=>{const{action:y}=reactExports.useContext(actionContext),[,w,C]=useAttributes(x,"img","qsp-action-image");return y.image?jsxRuntimeExports.jsx("img",{alt:"",style:w,...C,src:y.image}):null},QspActionIndex=({attrs:x})=>{const[y,w,C]=useAttributes(x,"qsp-action-index"),{index:P}=reactExports.useContext(actionContext);return jsxRuntimeExports.jsx(y,{...C,style:w,children:P+1})};function composeEventHandlers(x,y,{checkForDefaultPrevented:w=!0}={}){return function(P){if(x?.(P),w===!1||!P.defaultPrevented)return y?.(P)}}function setRef(x,y){if(typeof x=="function")return x(y);x!=null&&(x.current=y)}function composeRefs(...x){return y=>{let w=!1;const C=x.map(P=>{const O=setRef(P,y);return!w&&typeof O=="function"&&(w=!0),O});if(w)return()=>{for(let P=0;P<C.length;P++){const O=C[P];typeof O=="function"?O():setRef(x[P],null)}}}}function useComposedRefs(...x){return reactExports.useCallback(composeRefs(...x),x)}function createContext2(x,y){const w=reactExports.createContext(y),C=O=>{const{children:$,...L}=O,D=reactExports.useMemo(()=>L,Object.values(L));return jsxRuntimeExports.jsx(w.Provider,{value:D,children:$})};C.displayName=x+"Provider";function P(O){const $=reactExports.useContext(w);if($)return $;if(y!==void 0)return y;throw new Error(`\`${O}\` must be used within \`${x}\``)}return[C,P]}function createContextScope(x,y=[]){let w=[];function C(O,$){const L=reactExports.createContext($),D=w.length;w=[...w,$];const B=k=>{const{scope:H,children:W,...G}=k,Q=H?.[x]?.[D]||L,Z=reactExports.useMemo(()=>G,Object.values(G));return jsxRuntimeExports.jsx(Q.Provider,{value:Z,children:W})};B.displayName=O+"Provider";function U(k,H){const W=H?.[x]?.[D]||L,G=reactExports.useContext(W);if(G)return G;if($!==void 0)return $;throw new Error(`\`${k}\` must be used within \`${O}\``)}return[B,U]}const P=()=>{const O=w.map($=>reactExports.createContext($));return function(L){const D=L?.[x]||O;return reactExports.useMemo(()=>({[`__scope${x}`]:{...L,[x]:D}}),[L,D])}};return P.scopeName=x,[C,composeContextScopes(P,...y)]}function composeContextScopes(...x){const y=x[0];if(x.length===1)return y;const w=()=>{const C=x.map(P=>({useScope:P(),scopeName:P.scopeName}));return function(O){const $=C.reduce((L,{useScope:D,scopeName:B})=>{const k=D(O)[`__scope${B}`];return{...L,...k}},{});return reactExports.useMemo(()=>({[`__scope${y.scopeName}`]:$}),[$])}};return w.scopeName=y.scopeName,w}var useLayoutEffect2=globalThis?.document?reactExports.useLayoutEffect:()=>{},useReactId=React$1[" useId ".trim().toString()]||(()=>{}),count$1=0;function useId(x){const[y,w]=reactExports.useState(useReactId());return useLayoutEffect2(()=>{w(C=>C??String(count$1++))},[x]),x||(y?`radix-${y}`:"")}var useInsertionEffect=React$1[" useInsertionEffect ".trim().toString()]||useLayoutEffect2;function useControllableState({prop:x,defaultProp:y,onChange:w=()=>{},caller:C}){const[P,O,$]=useUncontrolledState({defaultProp:y,onChange:w}),L=x!==void 0,D=L?x:P;{const U=reactExports.useRef(x!==void 0);reactExports.useEffect(()=>{const k=U.current;k!==L&&console.warn(`${C} is changing from ${k?"controlled":"uncontrolled"} to ${L?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),U.current=L},[L,C])}const B=reactExports.useCallback(U=>{if(L){const k=isFunction(U)?U(x):U;k!==x&&$.current?.(k)}else O(U)},[L,x,O,$]);return[D,B]}function useUncontrolledState({defaultProp:x,onChange:y}){const[w,C]=reactExports.useState(x),P=reactExports.useRef(w),O=reactExports.useRef(y);return useInsertionEffect(()=>{O.current=y},[y]),reactExports.useEffect(()=>{P.current!==w&&(O.current?.(w),P.current=w)},[w,P]),[w,C,O]}function isFunction(x){return typeof x=="function"}var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs(reactDomExports);function createSlot(x){const y=createSlotClone(x),w=reactExports.forwardRef((C,P)=>{const{children:O,...$}=C,L=reactExports.Children.toArray(O),D=L.find(isSlottable);if(D){const B=D.props.children,U=L.map(k=>k===D?reactExports.Children.count(B)>1?reactExports.Children.only(null):reactExports.isValidElement(B)?B.props.children:null:k);return jsxRuntimeExports.jsx(y,{...$,ref:P,children:reactExports.isValidElement(B)?reactExports.cloneElement(B,void 0,U):null})}return jsxRuntimeExports.jsx(y,{...$,ref:P,children:O})});return w.displayName=`${x}.Slot`,w}function createSlotClone(x){const y=reactExports.forwardRef((w,C)=>{const{children:P,...O}=w;if(reactExports.isValidElement(P)){const $=getElementRef$1(P),L=mergeProps(O,P.props);return P.type!==reactExports.Fragment&&(L.ref=C?composeRefs(C,$):$),reactExports.cloneElement(P,L)}return reactExports.Children.count(P)>1?reactExports.Children.only(null):null});return y.displayName=`${x}.SlotClone`,y}var SLOTTABLE_IDENTIFIER=Symbol("radix.slottable");function createSlottable(x){const y=({children:w})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:w});return y.displayName=`${x}.Slottable`,y.__radixId=SLOTTABLE_IDENTIFIER,y}function isSlottable(x){return reactExports.isValidElement(x)&&typeof x.type=="function"&&"__radixId"in x.type&&x.type.__radixId===SLOTTABLE_IDENTIFIER}function mergeProps(x,y){const w={...y};for(const C in y){const P=x[C],O=y[C];/^on[A-Z]/.test(C)?P&&O?w[C]=(...L)=>{const D=O(...L);return P(...L),D}:P&&(w[C]=P):C==="style"?w[C]={...P,...O}:C==="className"&&(w[C]=[P,O].filter(Boolean).join(" "))}return{...x,...w}}function getElementRef$1(x){let y=Object.getOwnPropertyDescriptor(x.props,"ref")?.get,w=y&&"isReactWarning"in y&&y.isReactWarning;return w?x.ref:(y=Object.getOwnPropertyDescriptor(x,"ref")?.get,w=y&&"isReactWarning"in y&&y.isReactWarning,w?x.props.ref:x.props.ref||x.ref)}var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Primitive=NODES.reduce((x,y)=>{const w=createSlot(`Primitive.${y}`),C=reactExports.forwardRef((P,O)=>{const{asChild:$,...L}=P,D=$?w:y;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(D,{...L,ref:O})});return C.displayName=`Primitive.${y}`,{...x,[y]:C}},{});function dispatchDiscreteCustomEvent(x,y){x&&reactDomExports.flushSync(()=>x.dispatchEvent(y))}function useCallbackRef$1(x){const y=reactExports.useRef(x);return reactExports.useEffect(()=>{y.current=x}),reactExports.useMemo(()=>(...w)=>y.current?.(...w),[])}function useEscapeKeydown(x,y=globalThis?.document){const w=useCallbackRef$1(x);reactExports.useEffect(()=>{const C=P=>{P.key==="Escape"&&w(P)};return y.addEventListener("keydown",C,{capture:!0}),()=>y.removeEventListener("keydown",C,{capture:!0})},[w,y])}var DISMISSABLE_LAYER_NAME="DismissableLayer",CONTEXT_UPDATE="dismissableLayer.update",POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",FOCUS_OUTSIDE="dismissableLayer.focusOutside",originalBodyPointerEvents,DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DismissableLayer=reactExports.forwardRef((x,y)=>{const{disableOutsidePointerEvents:w=!1,onEscapeKeyDown:C,onPointerDownOutside:P,onFocusOutside:O,onInteractOutside:$,onDismiss:L,...D}=x,B=reactExports.useContext(DismissableLayerContext),[U,k]=reactExports.useState(null),H=U?.ownerDocument??globalThis?.document,[,W]=reactExports.useState({}),G=useComposedRefs(y,re=>k(re)),Q=Array.from(B.layers),[Z]=[...B.layersWithOutsidePointerEventsDisabled].slice(-1),J=Q.indexOf(Z),ne=U?Q.indexOf(U):-1,oe=B.layersWithOutsidePointerEventsDisabled.size>0,ae=ne>=J,ve=usePointerDownOutside(re=>{const he=re.target,be=[...B.branches].some(Le=>Le.contains(he));!ae||be||(P?.(re),$?.(re),re.defaultPrevented||L?.())},H),Te=useFocusOutside(re=>{const he=re.target;[...B.branches].some(Le=>Le.contains(he))||(O?.(re),$?.(re),re.defaultPrevented||L?.())},H);return useEscapeKeydown(re=>{ne===B.layers.size-1&&(C?.(re),!re.defaultPrevented&&L&&(re.preventDefault(),L()))},H),reactExports.useEffect(()=>{if(U)return w&&(B.layersWithOutsidePointerEventsDisabled.size===0&&(originalBodyPointerEvents=H.body.style.pointerEvents,H.body.style.pointerEvents="none"),B.layersWithOutsidePointerEventsDisabled.add(U)),B.layers.add(U),dispatchUpdate(),()=>{w&&B.layersWithOutsidePointerEventsDisabled.size===1&&(H.body.style.pointerEvents=originalBodyPointerEvents)}},[U,H,w,B]),reactExports.useEffect(()=>()=>{U&&(B.layers.delete(U),B.layersWithOutsidePointerEventsDisabled.delete(U),dispatchUpdate())},[U,B]),reactExports.useEffect(()=>{const re=()=>W({});return document.addEventListener(CONTEXT_UPDATE,re),()=>document.removeEventListener(CONTEXT_UPDATE,re)},[]),jsxRuntimeExports.jsx(Primitive.div,{...D,ref:G,style:{pointerEvents:oe?ae?"auto":"none":void 0,...x.style},onFocusCapture:composeEventHandlers(x.onFocusCapture,Te.onFocusCapture),onBlurCapture:composeEventHandlers(x.onBlurCapture,Te.onBlurCapture),onPointerDownCapture:composeEventHandlers(x.onPointerDownCapture,ve.onPointerDownCapture)})});DismissableLayer.displayName=DISMISSABLE_LAYER_NAME;var BRANCH_NAME="DismissableLayerBranch",DismissableLayerBranch=reactExports.forwardRef((x,y)=>{const w=reactExports.useContext(DismissableLayerContext),C=reactExports.useRef(null),P=useComposedRefs(y,C);return reactExports.useEffect(()=>{const O=C.current;if(O)return w.branches.add(O),()=>{w.branches.delete(O)}},[w.branches]),jsxRuntimeExports.jsx(Primitive.div,{...x,ref:P})});DismissableLayerBranch.displayName=BRANCH_NAME;function usePointerDownOutside(x,y=globalThis?.document){const w=useCallbackRef$1(x),C=reactExports.useRef(!1),P=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const O=L=>{if(L.target&&!C.current){let D=function(){handleAndDispatchCustomEvent$1(POINTER_DOWN_OUTSIDE,w,B,{discrete:!0})};const B={originalEvent:L};L.pointerType==="touch"?(y.removeEventListener("click",P.current),P.current=D,y.addEventListener("click",P.current,{once:!0})):D()}else y.removeEventListener("click",P.current);C.current=!1},$=window.setTimeout(()=>{y.addEventListener("pointerdown",O)},0);return()=>{window.clearTimeout($),y.removeEventListener("pointerdown",O),y.removeEventListener("click",P.current)}},[y,w]),{onPointerDownCapture:()=>C.current=!0}}function useFocusOutside(x,y=globalThis?.document){const w=useCallbackRef$1(x),C=reactExports.useRef(!1);return reactExports.useEffect(()=>{const P=O=>{O.target&&!C.current&&handleAndDispatchCustomEvent$1(FOCUS_OUTSIDE,w,{originalEvent:O},{discrete:!1})};return y.addEventListener("focusin",P),()=>y.removeEventListener("focusin",P)},[y,w]),{onFocusCapture:()=>C.current=!0,onBlurCapture:()=>C.current=!1}}function dispatchUpdate(){const x=new CustomEvent(CONTEXT_UPDATE);document.dispatchEvent(x)}function handleAndDispatchCustomEvent$1(x,y,w,{discrete:C}){const P=w.originalEvent.target,O=new CustomEvent(x,{bubbles:!1,cancelable:!0,detail:w});y&&P.addEventListener(x,y,{once:!0}),C?dispatchDiscreteCustomEvent(P,O):P.dispatchEvent(O)}var Root$7=DismissableLayer,Branch=DismissableLayerBranch,AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",EVENT_OPTIONS$1={bubbles:!1,cancelable:!0},FOCUS_SCOPE_NAME="FocusScope",FocusScope=reactExports.forwardRef((x,y)=>{const{loop:w=!1,trapped:C=!1,onMountAutoFocus:P,onUnmountAutoFocus:O,...$}=x,[L,D]=reactExports.useState(null),B=useCallbackRef$1(P),U=useCallbackRef$1(O),k=reactExports.useRef(null),H=useComposedRefs(y,Q=>D(Q)),W=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(C){let Q=function(oe){if(W.paused||!L)return;const ae=oe.target;L.contains(ae)?k.current=ae:focus(k.current,{select:!0})},Z=function(oe){if(W.paused||!L)return;const ae=oe.relatedTarget;ae!==null&&(L.contains(ae)||focus(k.current,{select:!0}))},J=function(oe){if(document.activeElement===document.body)for(const ve of oe)ve.removedNodes.length>0&&focus(L)};document.addEventListener("focusin",Q),document.addEventListener("focusout",Z);const ne=new MutationObserver(J);return L&&ne.observe(L,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",Q),document.removeEventListener("focusout",Z),ne.disconnect()}}},[C,L,W.paused]),reactExports.useEffect(()=>{if(L){focusScopesStack.add(W);const Q=document.activeElement;if(!L.contains(Q)){const J=new CustomEvent(AUTOFOCUS_ON_MOUNT,EVENT_OPTIONS$1);L.addEventListener(AUTOFOCUS_ON_MOUNT,B),L.dispatchEvent(J),J.defaultPrevented||(focusFirst$3(removeLinks(getTabbableCandidates$1(L)),{select:!0}),document.activeElement===Q&&focus(L))}return()=>{L.removeEventListener(AUTOFOCUS_ON_MOUNT,B),setTimeout(()=>{const J=new CustomEvent(AUTOFOCUS_ON_UNMOUNT,EVENT_OPTIONS$1);L.addEventListener(AUTOFOCUS_ON_UNMOUNT,U),L.dispatchEvent(J),J.defaultPrevented||focus(Q??document.body,{select:!0}),L.removeEventListener(AUTOFOCUS_ON_UNMOUNT,U),focusScopesStack.remove(W)},0)}}},[L,B,U,W]);const G=reactExports.useCallback(Q=>{if(!w&&!C||W.paused)return;const Z=Q.key==="Tab"&&!Q.altKey&&!Q.ctrlKey&&!Q.metaKey,J=document.activeElement;if(Z&&J){const ne=Q.currentTarget,[oe,ae]=getTabbableEdges(ne);oe&&ae?!Q.shiftKey&&J===ae?(Q.preventDefault(),w&&focus(oe,{select:!0})):Q.shiftKey&&J===oe&&(Q.preventDefault(),w&&focus(ae,{select:!0})):J===ne&&Q.preventDefault()}},[w,C,W.paused]);return jsxRuntimeExports.jsx(Primitive.div,{tabIndex:-1,...$,ref:H,onKeyDown:G})});FocusScope.displayName=FOCUS_SCOPE_NAME;function focusFirst$3(x,{select:y=!1}={}){const w=document.activeElement;for(const C of x)if(focus(C,{select:y}),document.activeElement!==w)return}function getTabbableEdges(x){const y=getTabbableCandidates$1(x),w=findVisible(y,x),C=findVisible(y.reverse(),x);return[w,C]}function getTabbableCandidates$1(x){const y=[],w=document.createTreeWalker(x,NodeFilter.SHOW_ELEMENT,{acceptNode:C=>{const P=C.tagName==="INPUT"&&C.type==="hidden";return C.disabled||C.hidden||P?NodeFilter.FILTER_SKIP:C.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;w.nextNode();)y.push(w.currentNode);return y}function findVisible(x,y){for(const w of x)if(!isHidden(w,{upTo:y}))return w}function isHidden(x,{upTo:y}){if(getComputedStyle(x).visibility==="hidden")return!0;for(;x;){if(y!==void 0&&x===y)return!1;if(getComputedStyle(x).display==="none")return!0;x=x.parentElement}return!1}function isSelectableInput(x){return x instanceof HTMLInputElement&&"select"in x}function focus(x,{select:y=!1}={}){if(x&&x.focus){const w=document.activeElement;x.focus({preventScroll:!0}),x!==w&&isSelectableInput(x)&&y&&x.select()}}var focusScopesStack=createFocusScopesStack();function createFocusScopesStack(){let x=[];return{add(y){const w=x[0];y!==w&&w?.pause(),x=arrayRemove(x,y),x.unshift(y)},remove(y){x=arrayRemove(x,y),x[0]?.resume()}}}function arrayRemove(x,y){const w=[...x],C=w.indexOf(y);return C!==-1&&w.splice(C,1),w}function removeLinks(x){return x.filter(y=>y.tagName!=="A")}var PORTAL_NAME$6="Portal",Portal$4=reactExports.forwardRef((x,y)=>{const{container:w,...C}=x,[P,O]=reactExports.useState(!1);useLayoutEffect2(()=>O(!0),[]);const $=w||P&&globalThis?.document?.body;return $?ReactDOM.createPortal(jsxRuntimeExports.jsx(Primitive.div,{...C,ref:y}),$):null});Portal$4.displayName=PORTAL_NAME$6;function useStateMachine$1(x,y){return reactExports.useReducer((w,C)=>y[w][C]??w,x)}var Presence=x=>{const{present:y,children:w}=x,C=usePresence(y),P=typeof w=="function"?w({present:C.isPresent}):reactExports.Children.only(w),O=useComposedRefs(C.ref,getElementRef(P));return typeof w=="function"||C.isPresent?reactExports.cloneElement(P,{ref:O}):null};Presence.displayName="Presence";function usePresence(x){const[y,w]=reactExports.useState(),C=reactExports.useRef(null),P=reactExports.useRef(x),O=reactExports.useRef("none"),$=x?"mounted":"unmounted",[L,D]=useStateMachine$1($,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const B=getAnimationName(C.current);O.current=L==="mounted"?B:"none"},[L]),useLayoutEffect2(()=>{const B=C.current,U=P.current;if(U!==x){const H=O.current,W=getAnimationName(B);x?D("MOUNT"):W==="none"||B?.display==="none"?D("UNMOUNT"):D(U&&H!==W?"ANIMATION_OUT":"UNMOUNT"),P.current=x}},[x,D]),useLayoutEffect2(()=>{if(y){let B;const U=y.ownerDocument.defaultView??window,k=W=>{const Q=getAnimationName(C.current).includes(CSS.escape(W.animationName));if(W.target===y&&Q&&(D("ANIMATION_END"),!P.current)){const Z=y.style.animationFillMode;y.style.animationFillMode="forwards",B=U.setTimeout(()=>{y.style.animationFillMode==="forwards"&&(y.style.animationFillMode=Z)})}},H=W=>{W.target===y&&(O.current=getAnimationName(C.current))};return y.addEventListener("animationstart",H),y.addEventListener("animationcancel",k),y.addEventListener("animationend",k),()=>{U.clearTimeout(B),y.removeEventListener("animationstart",H),y.removeEventListener("animationcancel",k),y.removeEventListener("animationend",k)}}else D("ANIMATION_END")},[y,D]),{isPresent:["mounted","unmountSuspended"].includes(L),ref:reactExports.useCallback(B=>{C.current=B?getComputedStyle(B):null,w(B)},[])}}function getAnimationName(x){return x?.animationName||"none"}function getElementRef(x){let y=Object.getOwnPropertyDescriptor(x.props,"ref")?.get,w=y&&"isReactWarning"in y&&y.isReactWarning;return w?x.ref:(y=Object.getOwnPropertyDescriptor(x,"ref")?.get,w=y&&"isReactWarning"in y&&y.isReactWarning,w?x.props.ref:x.props.ref||x.ref)}var count=0;function useFocusGuards(){reactExports.useEffect(()=>{const x=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",x[0]??createFocusGuard()),document.body.insertAdjacentElement("beforeend",x[1]??createFocusGuard()),count++,()=>{count===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(y=>y.remove()),count--}},[])}function createFocusGuard(){const x=document.createElement("span");return x.setAttribute("data-radix-focus-guard",""),x.tabIndex=0,x.style.outline="none",x.style.opacity="0",x.style.position="fixed",x.style.pointerEvents="none",x}var __assign=function(){return __assign=Object.assign||function(y){for(var w,C=1,P=arguments.length;C<P;C++){w=arguments[C];for(var O in w)Object.prototype.hasOwnProperty.call(w,O)&&(y[O]=w[O])}return y},__assign.apply(this,arguments)};function __rest(x,y){var w={};for(var C in x)Object.prototype.hasOwnProperty.call(x,C)&&y.indexOf(C)<0&&(w[C]=x[C]);if(x!=null&&typeof Object.getOwnPropertySymbols=="function")for(var P=0,C=Object.getOwnPropertySymbols(x);P<C.length;P++)y.indexOf(C[P])<0&&Object.prototype.propertyIsEnumerable.call(x,C[P])&&(w[C[P]]=x[C[P]]);return w}function __spreadArray(x,y,w){if(w||arguments.length===2)for(var C=0,P=y.length,O;C<P;C++)(O||!(C in y))&&(O||(O=Array.prototype.slice.call(y,0,C)),O[C]=y[C]);return x.concat(O||Array.prototype.slice.call(y))}typeof SuppressedError=="function"&&SuppressedError;var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(x,y){return typeof x=="function"?x(y):x&&(x.current=y),x}function useCallbackRef(x,y){var w=reactExports.useState(function(){return{value:x,callback:y,facade:{get current(){return w.value},set current(C){var P=w.value;P!==C&&(w.value=C,w.callback(C,P))}}}})[0];return w.callback=y,w.facade}var useIsomorphicLayoutEffect$1=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,currentValues=new WeakMap;function useMergeRefs(x,y){var w=useCallbackRef(null,function(C){return x.forEach(function(P){return assignRef(P,C)})});return useIsomorphicLayoutEffect$1(function(){var C=currentValues.get(w);if(C){var P=new Set(C),O=new Set(x),$=w.current;P.forEach(function(L){O.has(L)||assignRef(L,null)}),O.forEach(function(L){P.has(L)||assignRef(L,$)})}currentValues.set(w,x)},[x]),w}function ItoI(x){return x}function innerCreateMedium(x,y){y===void 0&&(y=ItoI);var w=[],C=!1,P={read:function(){if(C)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return w.length?w[w.length-1]:x},useMedium:function(O){var $=y(O,C);return w.push($),function(){w=w.filter(function(L){return L!==$})}},assignSyncMedium:function(O){for(C=!0;w.length;){var $=w;w=[],$.forEach(O)}w={push:function(L){return O(L)},filter:function(){return w}}},assignMedium:function(O){C=!0;var $=[];if(w.length){var L=w;w=[],L.forEach(O),$=w}var D=function(){var U=$;$=[],U.forEach(O)},B=function(){return Promise.resolve().then(D)};B(),w={push:function(U){$.push(U),B()},filter:function(U){return $=$.filter(U),w}}}};return P}function createSidecarMedium(x){x===void 0&&(x={});var y=innerCreateMedium(null);return y.options=__assign({async:!0,ssr:!1},x),y}var SideCar$1=function(x){var y=x.sideCar,w=__rest(x,["sideCar"]);if(!y)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var C=y.read();if(!C)throw new Error("Sidecar medium not found");return reactExports.createElement(C,__assign({},w))};SideCar$1.isSideCarExport=!0;function exportSidecar(x,y){return x.useMedium(y),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(x,y){var w=reactExports.useRef(null),C=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),P=C[0],O=C[1],$=x.forwardProps,L=x.children,D=x.className,B=x.removeScrollBar,U=x.enabled,k=x.shards,H=x.sideCar,W=x.noRelative,G=x.noIsolation,Q=x.inert,Z=x.allowPinchZoom,J=x.as,ne=J===void 0?"div":J,oe=x.gapMode,ae=__rest(x,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),ve=H,Te=useMergeRefs([w,y]),re=__assign(__assign({},ae),P);return reactExports.createElement(reactExports.Fragment,null,U&&reactExports.createElement(ve,{sideCar:effectCar,removeScrollBar:B,shards:k,noRelative:W,noIsolation:G,inert:Q,setCallbacks:O,allowPinchZoom:!!Z,lockRef:w,gapMode:oe}),$?reactExports.cloneElement(reactExports.Children.only(L),__assign(__assign({},re),{ref:Te})):reactExports.createElement(ne,__assign({},re,{className:D,ref:Te}),L))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var x=document.createElement("style");x.type="text/css";var y=getNonce();return y&&x.setAttribute("nonce",y),x}function injectStyles(x,y){x.styleSheet?x.styleSheet.cssText=y:x.appendChild(document.createTextNode(y))}function insertStyleTag(x){var y=document.head||document.getElementsByTagName("head")[0];y.appendChild(x)}var stylesheetSingleton=function(){var x=0,y=null;return{add:function(w){x==0&&(y=makeStyleTag())&&(injectStyles(y,w),insertStyleTag(y)),x++},remove:function(){x--,!x&&y&&(y.parentNode&&y.parentNode.removeChild(y),y=null)}}},styleHookSingleton=function(){var x=stylesheetSingleton();return function(y,w){reactExports.useEffect(function(){return x.add(y),function(){x.remove()}},[y&&w])}},styleSingleton=function(){var x=styleHookSingleton(),y=function(w){var C=w.styles,P=w.dynamic;return x(C,P),null};return y},zeroGap={left:0,top:0,right:0,gap:0},parse=function(x){return parseInt(x||"",10)||0},getOffset=function(x){var y=window.getComputedStyle(document.body),w=y[x==="padding"?"paddingLeft":"marginLeft"],C=y[x==="padding"?"paddingTop":"marginTop"],P=y[x==="padding"?"paddingRight":"marginRight"];return[parse(w),parse(C),parse(P)]},getGapWidth=function(x){if(x===void 0&&(x="margin"),typeof window>"u")return zeroGap;var y=getOffset(x),w=document.documentElement.clientWidth,C=window.innerWidth;return{left:y[0],top:y[1],right:y[2],gap:Math.max(0,C-w+y[2]-y[0])}},Style=styleSingleton(),lockAttribute="data-scroll-locked",getStyles=function(x,y,w,C){var P=x.left,O=x.top,$=x.right,L=x.gap;return w===void 0&&(w="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(C,`;
   padding-right: `).concat(L,"px ").concat(C,`;
  }
  body[`).concat(lockAttribute,`] {
    overflow: hidden `).concat(C,`;
    overscroll-behavior: contain;
    `).concat([y&&"position: relative ".concat(C,";"),w==="margin"&&`
    padding-left: `.concat(P,`px;
    padding-top: `).concat(O,`px;
    padding-right: `).concat($,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(L,"px ").concat(C,`;
    `),w==="padding"&&"padding-right: ".concat(L,"px ").concat(C,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(L,"px ").concat(C,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(L,"px ").concat(C,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(C,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(C,`;
  }
  
  body[`).concat(lockAttribute,`] {
    `).concat(removedBarSizeVariable,": ").concat(L,`px;
  }
`)},getCurrentUseCounter=function(){var x=parseInt(document.body.getAttribute(lockAttribute)||"0",10);return isFinite(x)?x:0},useLockAttribute=function(){reactExports.useEffect(function(){return document.body.setAttribute(lockAttribute,(getCurrentUseCounter()+1).toString()),function(){var x=getCurrentUseCounter()-1;x<=0?document.body.removeAttribute(lockAttribute):document.body.setAttribute(lockAttribute,x.toString())}},[])},RemoveScrollBar=function(x){var y=x.noRelative,w=x.noImportant,C=x.gapMode,P=C===void 0?"margin":C;useLockAttribute();var O=reactExports.useMemo(function(){return getGapWidth(P)},[P]);return reactExports.createElement(Style,{styles:getStyles(O,!y,P,w?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(x){return x.tagName==="TEXTAREA"},elementCanBeScrolled=function(x,y){if(!(x instanceof Element))return!1;var w=window.getComputedStyle(x);return w[y]!=="hidden"&&!(w.overflowY===w.overflowX&&!alwaysContainsScroll(x)&&w[y]==="visible")},elementCouldBeVScrolled=function(x){return elementCanBeScrolled(x,"overflowY")},elementCouldBeHScrolled=function(x){return elementCanBeScrolled(x,"overflowX")},locationCouldBeScrolled=function(x,y){var w=y.ownerDocument,C=y;do{typeof ShadowRoot<"u"&&C instanceof ShadowRoot&&(C=C.host);var P=elementCouldBeScrolled(x,C);if(P){var O=getScrollVariables(x,C),$=O[1],L=O[2];if($>L)return!0}C=C.parentNode}while(C&&C!==w.body);return!1},getVScrollVariables=function(x){var y=x.scrollTop,w=x.scrollHeight,C=x.clientHeight;return[y,w,C]},getHScrollVariables=function(x){var y=x.scrollLeft,w=x.scrollWidth,C=x.clientWidth;return[y,w,C]},elementCouldBeScrolled=function(x,y){return x==="v"?elementCouldBeVScrolled(y):elementCouldBeHScrolled(y)},getScrollVariables=function(x,y){return x==="v"?getVScrollVariables(y):getHScrollVariables(y)},getDirectionFactor=function(x,y){return x==="h"&&y==="rtl"?-1:1},handleScroll=function(x,y,w,C,P){var O=getDirectionFactor(x,window.getComputedStyle(y).direction),$=O*C,L=w.target,D=y.contains(L),B=!1,U=$>0,k=0,H=0;do{if(!L)break;var W=getScrollVariables(x,L),G=W[0],Q=W[1],Z=W[2],J=Q-Z-O*G;(G||J)&&elementCouldBeScrolled(x,L)&&(k+=J,H+=G);var ne=L.parentNode;L=ne&&ne.nodeType===Node.DOCUMENT_FRAGMENT_NODE?ne.host:ne}while(!D&&L!==document.body||D&&(y.contains(L)||y===L));return(U&&Math.abs(k)<1||!U&&Math.abs(H)<1)&&(B=!0),B},getTouchXY=function(x){return"changedTouches"in x?[x.changedTouches[0].clientX,x.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(x){return[x.deltaX,x.deltaY]},extractRef=function(x){return x&&"current"in x?x.current:x},deltaCompare=function(x,y){return x[0]===y[0]&&x[1]===y[1]},generateStyle=function(x){return`
  .block-interactivity-`.concat(x,` {pointer-events: none;}
  .allow-interactivity-`).concat(x,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(x){var y=reactExports.useRef([]),w=reactExports.useRef([0,0]),C=reactExports.useRef(),P=reactExports.useState(idCounter++)[0],O=reactExports.useState(styleSingleton)[0],$=reactExports.useRef(x);reactExports.useEffect(function(){$.current=x},[x]),reactExports.useEffect(function(){if(x.inert){document.body.classList.add("block-interactivity-".concat(P));var Q=__spreadArray([x.lockRef.current],(x.shards||[]).map(extractRef),!0).filter(Boolean);return Q.forEach(function(Z){return Z.classList.add("allow-interactivity-".concat(P))}),function(){document.body.classList.remove("block-interactivity-".concat(P)),Q.forEach(function(Z){return Z.classList.remove("allow-interactivity-".concat(P))})}}},[x.inert,x.lockRef.current,x.shards]);var L=reactExports.useCallback(function(Q,Z){if("touches"in Q&&Q.touches.length===2||Q.type==="wheel"&&Q.ctrlKey)return!$.current.allowPinchZoom;var J=getTouchXY(Q),ne=w.current,oe="deltaX"in Q?Q.deltaX:ne[0]-J[0],ae="deltaY"in Q?Q.deltaY:ne[1]-J[1],ve,Te=Q.target,re=Math.abs(oe)>Math.abs(ae)?"h":"v";if("touches"in Q&&re==="h"&&Te.type==="range")return!1;var he=locationCouldBeScrolled(re,Te);if(!he)return!0;if(he?ve=re:(ve=re==="v"?"h":"v",he=locationCouldBeScrolled(re,Te)),!he)return!1;if(!C.current&&"changedTouches"in Q&&(oe||ae)&&(C.current=ve),!ve)return!0;var be=C.current||ve;return handleScroll(be,Z,Q,be==="h"?oe:ae)},[]),D=reactExports.useCallback(function(Q){var Z=Q;if(!(!lockStack.length||lockStack[lockStack.length-1]!==O)){var J="deltaY"in Z?getDeltaXY(Z):getTouchXY(Z),ne=y.current.filter(function(ve){return ve.name===Z.type&&(ve.target===Z.target||Z.target===ve.shadowParent)&&deltaCompare(ve.delta,J)})[0];if(ne&&ne.should){Z.cancelable&&Z.preventDefault();return}if(!ne){var oe=($.current.shards||[]).map(extractRef).filter(Boolean).filter(function(ve){return ve.contains(Z.target)}),ae=oe.length>0?L(Z,oe[0]):!$.current.noIsolation;ae&&Z.cancelable&&Z.preventDefault()}}},[]),B=reactExports.useCallback(function(Q,Z,J,ne){var oe={name:Q,delta:Z,target:J,should:ne,shadowParent:getOutermostShadowParent(J)};y.current.push(oe),setTimeout(function(){y.current=y.current.filter(function(ae){return ae!==oe})},1)},[]),U=reactExports.useCallback(function(Q){w.current=getTouchXY(Q),C.current=void 0},[]),k=reactExports.useCallback(function(Q){B(Q.type,getDeltaXY(Q),Q.target,L(Q,x.lockRef.current))},[]),H=reactExports.useCallback(function(Q){B(Q.type,getTouchXY(Q),Q.target,L(Q,x.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(O),x.setCallbacks({onScrollCapture:k,onWheelCapture:k,onTouchMoveCapture:H}),document.addEventListener("wheel",D,nonPassive),document.addEventListener("touchmove",D,nonPassive),document.addEventListener("touchstart",U,nonPassive),function(){lockStack=lockStack.filter(function(Q){return Q!==O}),document.removeEventListener("wheel",D,nonPassive),document.removeEventListener("touchmove",D,nonPassive),document.removeEventListener("touchstart",U,nonPassive)}},[]);var W=x.removeScrollBar,G=x.inert;return reactExports.createElement(reactExports.Fragment,null,G?reactExports.createElement(O,{styles:generateStyle(P)}):null,W?reactExports.createElement(RemoveScrollBar,{noRelative:x.noRelative,gapMode:x.gapMode}):null)}function getOutermostShadowParent(x){for(var y=null;x!==null;)x instanceof ShadowRoot&&(y=x.host,x=x.host),x=x.parentNode;return y}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(x,y){return reactExports.createElement(RemoveScroll,__assign({},x,{ref:y,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;var getDefaultParent=function(x){if(typeof document>"u")return null;var y=Array.isArray(x)?x[0]:x;return y.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(x){return x&&(x.host||unwrapHost(x.parentNode))},correctTargets=function(x,y){return y.map(function(w){if(x.contains(w))return w;var C=unwrapHost(w);return C&&x.contains(C)?C:(console.error("aria-hidden",w,"in not contained inside",x,". Doing nothing"),null)}).filter(function(w){return!!w})},applyAttributeToOthers=function(x,y,w,C){var P=correctTargets(y,Array.isArray(x)?x:[x]);markerMap[w]||(markerMap[w]=new WeakMap);var O=markerMap[w],$=[],L=new Set,D=new Set(P),B=function(k){!k||L.has(k)||(L.add(k),B(k.parentNode))};P.forEach(B);var U=function(k){!k||D.has(k)||Array.prototype.forEach.call(k.children,function(H){if(L.has(H))U(H);else try{var W=H.getAttribute(C),G=W!==null&&W!=="false",Q=(counterMap.get(H)||0)+1,Z=(O.get(H)||0)+1;counterMap.set(H,Q),O.set(H,Z),$.push(H),Q===1&&G&&uncontrolledNodes.set(H,!0),Z===1&&H.setAttribute(w,"true"),G||H.setAttribute(C,"true")}catch(J){console.error("aria-hidden: cannot operate on ",H,J)}})};return U(y),L.clear(),lockCount++,function(){$.forEach(function(k){var H=counterMap.get(k)-1,W=O.get(k)-1;counterMap.set(k,H),O.set(k,W),H||(uncontrolledNodes.has(k)||k.removeAttribute(C),uncontrolledNodes.delete(k)),W||k.removeAttribute(w)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(x,y,w){w===void 0&&(w="data-aria-hidden");var C=Array.from(Array.isArray(x)?x:[x]),P=getDefaultParent(x);return P?(C.push.apply(C,Array.from(P.querySelectorAll("[aria-live], script"))),applyAttributeToOthers(C,P,w,"aria-hidden")):function(){return null}},DIALOG_NAME="Dialog",[createDialogContext,createDialogScope]=createContextScope(DIALOG_NAME),[DialogProvider,useDialogContext]=createDialogContext(DIALOG_NAME),Dialog=x=>{const{__scopeDialog:y,children:w,open:C,defaultOpen:P,onOpenChange:O,modal:$=!0}=x,L=reactExports.useRef(null),D=reactExports.useRef(null),[B,U]=useControllableState({prop:C,defaultProp:P??!1,onChange:O,caller:DIALOG_NAME});return jsxRuntimeExports.jsx(DialogProvider,{scope:y,triggerRef:L,contentRef:D,contentId:useId(),titleId:useId(),descriptionId:useId(),open:B,onOpenChange:U,onOpenToggle:reactExports.useCallback(()=>U(k=>!k),[U]),modal:$,children:w})};Dialog.displayName=DIALOG_NAME;var TRIGGER_NAME$4="DialogTrigger",DialogTrigger=reactExports.forwardRef((x,y)=>{const{__scopeDialog:w,...C}=x,P=useDialogContext(TRIGGER_NAME$4,w),O=useComposedRefs(y,P.triggerRef);return jsxRuntimeExports.jsx(Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":P.open,"aria-controls":P.contentId,"data-state":getState$1(P.open),...C,ref:O,onClick:composeEventHandlers(x.onClick,P.onOpenToggle)})});DialogTrigger.displayName=TRIGGER_NAME$4;var PORTAL_NAME$5="DialogPortal",[PortalProvider$2,usePortalContext$2]=createDialogContext(PORTAL_NAME$5,{forceMount:void 0}),DialogPortal=x=>{const{__scopeDialog:y,forceMount:w,children:C,container:P}=x,O=useDialogContext(PORTAL_NAME$5,y);return jsxRuntimeExports.jsx(PortalProvider$2,{scope:y,forceMount:w,children:reactExports.Children.map(C,$=>jsxRuntimeExports.jsx(Presence,{present:w||O.open,children:jsxRuntimeExports.jsx(Portal$4,{asChild:!0,container:P,children:$})}))})};DialogPortal.displayName=PORTAL_NAME$5;var OVERLAY_NAME$1="DialogOverlay",DialogOverlay=reactExports.forwardRef((x,y)=>{const w=usePortalContext$2(OVERLAY_NAME$1,x.__scopeDialog),{forceMount:C=w.forceMount,...P}=x,O=useDialogContext(OVERLAY_NAME$1,x.__scopeDialog);return O.modal?jsxRuntimeExports.jsx(Presence,{present:C||O.open,children:jsxRuntimeExports.jsx(DialogOverlayImpl,{...P,ref:y})}):null});DialogOverlay.displayName=OVERLAY_NAME$1;var Slot$2=createSlot("DialogOverlay.RemoveScroll"),DialogOverlayImpl=reactExports.forwardRef((x,y)=>{const{__scopeDialog:w,...C}=x,P=useDialogContext(OVERLAY_NAME$1,w);return jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot$2,allowPinchZoom:!0,shards:[P.contentRef],children:jsxRuntimeExports.jsx(Primitive.div,{"data-state":getState$1(P.open),...C,ref:y,style:{pointerEvents:"auto",...C.style}})})}),CONTENT_NAME$6="DialogContent",DialogContent=reactExports.forwardRef((x,y)=>{const w=usePortalContext$2(CONTENT_NAME$6,x.__scopeDialog),{forceMount:C=w.forceMount,...P}=x,O=useDialogContext(CONTENT_NAME$6,x.__scopeDialog);return jsxRuntimeExports.jsx(Presence,{present:C||O.open,children:O.modal?jsxRuntimeExports.jsx(DialogContentModal,{...P,ref:y}):jsxRuntimeExports.jsx(DialogContentNonModal,{...P,ref:y})})});DialogContent.displayName=CONTENT_NAME$6;var DialogContentModal=reactExports.forwardRef((x,y)=>{const w=useDialogContext(CONTENT_NAME$6,x.__scopeDialog),C=reactExports.useRef(null),P=useComposedRefs(y,w.contentRef,C);return reactExports.useEffect(()=>{const O=C.current;if(O)return hideOthers(O)},[]),jsxRuntimeExports.jsx(DialogContentImpl,{...x,ref:P,trapFocus:w.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:composeEventHandlers(x.onCloseAutoFocus,O=>{O.preventDefault(),w.triggerRef.current?.focus()}),onPointerDownOutside:composeEventHandlers(x.onPointerDownOutside,O=>{const $=O.detail.originalEvent,L=$.button===0&&$.ctrlKey===!0;($.button===2||L)&&O.preventDefault()}),onFocusOutside:composeEventHandlers(x.onFocusOutside,O=>O.preventDefault())})}),DialogContentNonModal=reactExports.forwardRef((x,y)=>{const w=useDialogContext(CONTENT_NAME$6,x.__scopeDialog),C=reactExports.useRef(!1),P=reactExports.useRef(!1);return jsxRuntimeExports.jsx(DialogContentImpl,{...x,ref:y,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:O=>{x.onCloseAutoFocus?.(O),O.defaultPrevented||(C.current||w.triggerRef.current?.focus(),O.preventDefault()),C.current=!1,P.current=!1},onInteractOutside:O=>{x.onInteractOutside?.(O),O.defaultPrevented||(C.current=!0,O.detail.originalEvent.type==="pointerdown"&&(P.current=!0));const $=O.target;w.triggerRef.current?.contains($)&&O.preventDefault(),O.detail.originalEvent.type==="focusin"&&P.current&&O.preventDefault()}})}),DialogContentImpl=reactExports.forwardRef((x,y)=>{const{__scopeDialog:w,trapFocus:C,onOpenAutoFocus:P,onCloseAutoFocus:O,...$}=x,L=useDialogContext(CONTENT_NAME$6,w),D=reactExports.useRef(null),B=useComposedRefs(y,D);return useFocusGuards(),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FocusScope,{asChild:!0,loop:!0,trapped:C,onMountAutoFocus:P,onUnmountAutoFocus:O,children:jsxRuntimeExports.jsx(DismissableLayer,{role:"dialog",id:L.contentId,"aria-describedby":L.descriptionId,"aria-labelledby":L.titleId,"data-state":getState$1(L.open),...$,ref:B,onDismiss:()=>L.onOpenChange(!1)})}),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TitleWarning,{titleId:L.titleId}),jsxRuntimeExports.jsx(DescriptionWarning$1,{contentRef:D,descriptionId:L.descriptionId})]})]})}),TITLE_NAME$2="DialogTitle",DialogTitle=reactExports.forwardRef((x,y)=>{const{__scopeDialog:w,...C}=x,P=useDialogContext(TITLE_NAME$2,w);return jsxRuntimeExports.jsx(Primitive.h2,{id:P.titleId,...C,ref:y})});DialogTitle.displayName=TITLE_NAME$2;var DESCRIPTION_NAME$2="DialogDescription",DialogDescription=reactExports.forwardRef((x,y)=>{const{__scopeDialog:w,...C}=x,P=useDialogContext(DESCRIPTION_NAME$2,w);return jsxRuntimeExports.jsx(Primitive.p,{id:P.descriptionId,...C,ref:y})});DialogDescription.displayName=DESCRIPTION_NAME$2;var CLOSE_NAME$1="DialogClose",DialogClose=reactExports.forwardRef((x,y)=>{const{__scopeDialog:w,...C}=x,P=useDialogContext(CLOSE_NAME$1,w);return jsxRuntimeExports.jsx(Primitive.button,{type:"button",...C,ref:y,onClick:composeEventHandlers(x.onClick,()=>P.onOpenChange(!1))})});DialogClose.displayName=CLOSE_NAME$1;function getState$1(x){return x?"open":"closed"}var TITLE_WARNING_NAME="DialogTitleWarning",[WarningProvider,useWarningContext]=createContext2(TITLE_WARNING_NAME,{contentName:CONTENT_NAME$6,titleName:TITLE_NAME$2,docsSlug:"dialog"}),TitleWarning=({titleId:x})=>{const y=useWarningContext(TITLE_WARNING_NAME),w=`\`${y.contentName}\` requires a \`${y.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${y.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${y.docsSlug}`;return reactExports.useEffect(()=>{x&&(document.getElementById(x)||console.error(w))},[w,x]),null},DESCRIPTION_WARNING_NAME="DialogDescriptionWarning",DescriptionWarning$1=({contentRef:x,descriptionId:y})=>{const C=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${useWarningContext(DESCRIPTION_WARNING_NAME).contentName}}.`;return reactExports.useEffect(()=>{const P=x.current?.getAttribute("aria-describedby");y&&P&&(document.getElementById(y)||console.warn(C))},[C,x,y]),null},Root$6=Dialog,Trigger$3=DialogTrigger,Portal$3=DialogPortal,Overlay=DialogOverlay,Content$1=DialogContent,Title=DialogTitle,Description$1=DialogDescription,Close$1=DialogClose;const noop$3=x=>{},buttonContext=reactExports.createContext({okAction:noop$3,cancelAction:noop$3}),QspCloseButton=({attrs:x,children:y})=>{const[,w,C]=useAttributes(x,"button","qsp-close-button");return jsxRuntimeExports.jsx(Close$1,{asChild:!0,children:jsxRuntimeExports.jsx("button",{style:w,...C,children:y})})},QspOkButton=({attrs:x,children:y})=>{const[,w,C]=useAttributes(x,"button","qsp-ok-button"),{okAction:P}=reactExports.useContext(buttonContext);return jsxRuntimeExports.jsx("button",{style:w,...C,onClick:P,children:y})},QspCancelButton=({attrs:x,children:y})=>{const[,w,C]=useAttributes(x,"button","qsp-cancel-button"),{cancelAction:P}=reactExports.useContext(buttonContext);return jsxRuntimeExports.jsx("button",{style:w,...C,onClick:P,children:y})},QspCmd=({attrs:x,children:y})=>{const[w,C,P]=useAttributes(x,"qsp-cmd"),O=useAtomExports.useAtom(isCmdVisible$),$=L=>{L.preventDefault(),submitUserInput()};return O?jsxRuntimeExports.jsx(w,{style:C,...P,children:jsxRuntimeExports.jsx("form",{onSubmit:$,children:y})}):null},QspCmdInput=({attrs:x})=>{const y=useAtomExports.useAtom(cmdText$),[,w,C]=useAttributes(x,"input","qsp-cmd-input"),P=O=>{cmdText$.set(O.target.value)};return jsxRuntimeExports.jsx("input",{style:w,...C,type:"text",value:y,onInput:P})};var DirectionContext=reactExports.createContext(void 0);function useDirection(x){const y=reactExports.useContext(DirectionContext);return x||y||"ltr"}function clamp$1(x,[y,w]){return Math.min(w,Math.max(y,x))}function useStateMachine(x,y){return reactExports.useReducer((w,C)=>y[w][C]??w,x)}var SCROLL_AREA_NAME="ScrollArea",[createScrollAreaContext]=createContextScope(SCROLL_AREA_NAME),[ScrollAreaProvider,useScrollAreaContext]=createScrollAreaContext(SCROLL_AREA_NAME),ScrollArea=reactExports.forwardRef((x,y)=>{const{__scopeScrollArea:w,type:C="hover",dir:P,scrollHideDelay:O=600,...$}=x,[L,D]=reactExports.useState(null),[B,U]=reactExports.useState(null),[k,H]=reactExports.useState(null),[W,G]=reactExports.useState(null),[Q,Z]=reactExports.useState(null),[J,ne]=reactExports.useState(0),[oe,ae]=reactExports.useState(0),[ve,Te]=reactExports.useState(!1),[re,he]=reactExports.useState(!1),be=useComposedRefs(y,qe=>D(qe)),Le=useDirection(P);return jsxRuntimeExports.jsx(ScrollAreaProvider,{scope:w,type:C,dir:Le,scrollHideDelay:O,scrollArea:L,viewport:B,onViewportChange:U,content:k,onContentChange:H,scrollbarX:W,onScrollbarXChange:G,scrollbarXEnabled:ve,onScrollbarXEnabledChange:Te,scrollbarY:Q,onScrollbarYChange:Z,scrollbarYEnabled:re,onScrollbarYEnabledChange:he,onCornerWidthChange:ne,onCornerHeightChange:ae,children:jsxRuntimeExports.jsx(Primitive.div,{dir:Le,...$,ref:be,style:{position:"relative","--radix-scroll-area-corner-width":J+"px","--radix-scroll-area-corner-height":oe+"px",...x.style}})})});ScrollArea.displayName=SCROLL_AREA_NAME;var VIEWPORT_NAME$2="ScrollAreaViewport",ScrollAreaViewport=reactExports.forwardRef((x,y)=>{const{__scopeScrollArea:w,children:C,nonce:P,...O}=x,$=useScrollAreaContext(VIEWPORT_NAME$2,w),L=reactExports.useRef(null),D=useComposedRefs(y,L,$.onViewportChange);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:P}),jsxRuntimeExports.jsx(Primitive.div,{"data-radix-scroll-area-viewport":"",...O,ref:D,style:{overflowX:$.scrollbarXEnabled?"scroll":"hidden",overflowY:$.scrollbarYEnabled?"scroll":"hidden",...x.style},children:jsxRuntimeExports.jsx("div",{ref:$.onContentChange,style:{minWidth:"100%",display:"table"},children:C})})]})});ScrollAreaViewport.displayName=VIEWPORT_NAME$2;var SCROLLBAR_NAME="ScrollAreaScrollbar",ScrollAreaScrollbar=reactExports.forwardRef((x,y)=>{const{forceMount:w,...C}=x,P=useScrollAreaContext(SCROLLBAR_NAME,x.__scopeScrollArea),{onScrollbarXEnabledChange:O,onScrollbarYEnabledChange:$}=P,L=x.orientation==="horizontal";return reactExports.useEffect(()=>(L?O(!0):$(!0),()=>{L?O(!1):$(!1)}),[L,O,$]),P.type==="hover"?jsxRuntimeExports.jsx(ScrollAreaScrollbarHover,{...C,ref:y,forceMount:w}):P.type==="scroll"?jsxRuntimeExports.jsx(ScrollAreaScrollbarScroll,{...C,ref:y,forceMount:w}):P.type==="auto"?jsxRuntimeExports.jsx(ScrollAreaScrollbarAuto,{...C,ref:y,forceMount:w}):P.type==="always"?jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{...C,ref:y}):null});ScrollAreaScrollbar.displayName=SCROLLBAR_NAME;var ScrollAreaScrollbarHover=reactExports.forwardRef((x,y)=>{const{forceMount:w,...C}=x,P=useScrollAreaContext(SCROLLBAR_NAME,x.__scopeScrollArea),[O,$]=reactExports.useState(!1);return reactExports.useEffect(()=>{const L=P.scrollArea;let D=0;if(L){const B=()=>{window.clearTimeout(D),$(!0)},U=()=>{D=window.setTimeout(()=>$(!1),P.scrollHideDelay)};return L.addEventListener("pointerenter",B),L.addEventListener("pointerleave",U),()=>{window.clearTimeout(D),L.removeEventListener("pointerenter",B),L.removeEventListener("pointerleave",U)}}},[P.scrollArea,P.scrollHideDelay]),jsxRuntimeExports.jsx(Presence,{present:w||O,children:jsxRuntimeExports.jsx(ScrollAreaScrollbarAuto,{"data-state":O?"visible":"hidden",...C,ref:y})})}),ScrollAreaScrollbarScroll=reactExports.forwardRef((x,y)=>{const{forceMount:w,...C}=x,P=useScrollAreaContext(SCROLLBAR_NAME,x.__scopeScrollArea),O=x.orientation==="horizontal",$=useDebounceCallback(()=>D("SCROLL_END"),100),[L,D]=useStateMachine("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return reactExports.useEffect(()=>{if(L==="idle"){const B=window.setTimeout(()=>D("HIDE"),P.scrollHideDelay);return()=>window.clearTimeout(B)}},[L,P.scrollHideDelay,D]),reactExports.useEffect(()=>{const B=P.viewport,U=O?"scrollLeft":"scrollTop";if(B){let k=B[U];const H=()=>{const W=B[U];k!==W&&(D("SCROLL"),$()),k=W};return B.addEventListener("scroll",H),()=>B.removeEventListener("scroll",H)}},[P.viewport,O,D,$]),jsxRuntimeExports.jsx(Presence,{present:w||L!=="hidden",children:jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{"data-state":L==="hidden"?"hidden":"visible",...C,ref:y,onPointerEnter:composeEventHandlers(x.onPointerEnter,()=>D("POINTER_ENTER")),onPointerLeave:composeEventHandlers(x.onPointerLeave,()=>D("POINTER_LEAVE"))})})}),ScrollAreaScrollbarAuto=reactExports.forwardRef((x,y)=>{const w=useScrollAreaContext(SCROLLBAR_NAME,x.__scopeScrollArea),{forceMount:C,...P}=x,[O,$]=reactExports.useState(!1),L=x.orientation==="horizontal",D=useDebounceCallback(()=>{if(w.viewport){const B=w.viewport.offsetWidth<w.viewport.scrollWidth,U=w.viewport.offsetHeight<w.viewport.scrollHeight;$(L?B:U)}},10);return useResizeObserver(w.viewport,D),useResizeObserver(w.content,D),jsxRuntimeExports.jsx(Presence,{present:C||O,children:jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{"data-state":O?"visible":"hidden",...P,ref:y})})}),ScrollAreaScrollbarVisible=reactExports.forwardRef((x,y)=>{const{orientation:w="vertical",...C}=x,P=useScrollAreaContext(SCROLLBAR_NAME,x.__scopeScrollArea),O=reactExports.useRef(null),$=reactExports.useRef(0),[L,D]=reactExports.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),B=getThumbRatio(L.viewport,L.content),U={...C,sizes:L,onSizesChange:D,hasThumb:B>0&&B<1,onThumbChange:H=>O.current=H,onThumbPointerUp:()=>$.current=0,onThumbPointerDown:H=>$.current=H};function k(H,W){return getScrollPositionFromPointer(H,$.current,L,W)}return w==="horizontal"?jsxRuntimeExports.jsx(ScrollAreaScrollbarX,{...U,ref:y,onThumbPositionChange:()=>{if(P.viewport&&O.current){const H=P.viewport.scrollLeft,W=getThumbOffsetFromScroll(H,L,P.dir);O.current.style.transform=`translate3d(${W}px, 0, 0)`}},onWheelScroll:H=>{P.viewport&&(P.viewport.scrollLeft=H)},onDragScroll:H=>{P.viewport&&(P.viewport.scrollLeft=k(H,P.dir))}}):w==="vertical"?jsxRuntimeExports.jsx(ScrollAreaScrollbarY,{...U,ref:y,onThumbPositionChange:()=>{if(P.viewport&&O.current){const H=P.viewport.scrollTop,W=getThumbOffsetFromScroll(H,L);O.current.style.transform=`translate3d(0, ${W}px, 0)`}},onWheelScroll:H=>{P.viewport&&(P.viewport.scrollTop=H)},onDragScroll:H=>{P.viewport&&(P.viewport.scrollTop=k(H))}}):null}),ScrollAreaScrollbarX=reactExports.forwardRef((x,y)=>{const{sizes:w,onSizesChange:C,...P}=x,O=useScrollAreaContext(SCROLLBAR_NAME,x.__scopeScrollArea),[$,L]=reactExports.useState(),D=reactExports.useRef(null),B=useComposedRefs(y,D,O.onScrollbarXChange);return reactExports.useEffect(()=>{D.current&&L(getComputedStyle(D.current))},[D]),jsxRuntimeExports.jsx(ScrollAreaScrollbarImpl,{"data-orientation":"horizontal",...P,ref:B,sizes:w,style:{bottom:0,left:O.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:O.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":getThumbSize(w)+"px",...x.style},onThumbPointerDown:U=>x.onThumbPointerDown(U.x),onDragScroll:U=>x.onDragScroll(U.x),onWheelScroll:(U,k)=>{if(O.viewport){const H=O.viewport.scrollLeft+U.deltaX;x.onWheelScroll(H),isScrollingWithinScrollbarBounds(H,k)&&U.preventDefault()}},onResize:()=>{D.current&&O.viewport&&$&&C({content:O.viewport.scrollWidth,viewport:O.viewport.offsetWidth,scrollbar:{size:D.current.clientWidth,paddingStart:toInt($.paddingLeft),paddingEnd:toInt($.paddingRight)}})}})}),ScrollAreaScrollbarY=reactExports.forwardRef((x,y)=>{const{sizes:w,onSizesChange:C,...P}=x,O=useScrollAreaContext(SCROLLBAR_NAME,x.__scopeScrollArea),[$,L]=reactExports.useState(),D=reactExports.useRef(null),B=useComposedRefs(y,D,O.onScrollbarYChange);return reactExports.useEffect(()=>{D.current&&L(getComputedStyle(D.current))},[D]),jsxRuntimeExports.jsx(ScrollAreaScrollbarImpl,{"data-orientation":"vertical",...P,ref:B,sizes:w,style:{top:0,right:O.dir==="ltr"?0:void 0,left:O.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":getThumbSize(w)+"px",...x.style},onThumbPointerDown:U=>x.onThumbPointerDown(U.y),onDragScroll:U=>x.onDragScroll(U.y),onWheelScroll:(U,k)=>{if(O.viewport){const H=O.viewport.scrollTop+U.deltaY;x.onWheelScroll(H),isScrollingWithinScrollbarBounds(H,k)&&U.preventDefault()}},onResize:()=>{D.current&&O.viewport&&$&&C({content:O.viewport.scrollHeight,viewport:O.viewport.offsetHeight,scrollbar:{size:D.current.clientHeight,paddingStart:toInt($.paddingTop),paddingEnd:toInt($.paddingBottom)}})}})}),[ScrollbarProvider,useScrollbarContext]=createScrollAreaContext(SCROLLBAR_NAME),ScrollAreaScrollbarImpl=reactExports.forwardRef((x,y)=>{const{__scopeScrollArea:w,sizes:C,hasThumb:P,onThumbChange:O,onThumbPointerUp:$,onThumbPointerDown:L,onThumbPositionChange:D,onDragScroll:B,onWheelScroll:U,onResize:k,...H}=x,W=useScrollAreaContext(SCROLLBAR_NAME,w),[G,Q]=reactExports.useState(null),Z=useComposedRefs(y,be=>Q(be)),J=reactExports.useRef(null),ne=reactExports.useRef(""),oe=W.viewport,ae=C.content-C.viewport,ve=useCallbackRef$1(U),Te=useCallbackRef$1(D),re=useDebounceCallback(k,10);function he(be){if(J.current){const Le=be.clientX-J.current.left,qe=be.clientY-J.current.top;B({x:Le,y:qe})}}return reactExports.useEffect(()=>{const be=Le=>{const qe=Le.target;G?.contains(qe)&&ve(Le,ae)};return document.addEventListener("wheel",be,{passive:!1}),()=>document.removeEventListener("wheel",be,{passive:!1})},[oe,G,ae,ve]),reactExports.useEffect(Te,[C,Te]),useResizeObserver(G,re),useResizeObserver(W.content,re),jsxRuntimeExports.jsx(ScrollbarProvider,{scope:w,scrollbar:G,hasThumb:P,onThumbChange:useCallbackRef$1(O),onThumbPointerUp:useCallbackRef$1($),onThumbPositionChange:Te,onThumbPointerDown:useCallbackRef$1(L),children:jsxRuntimeExports.jsx(Primitive.div,{...H,ref:Z,style:{position:"absolute",...H.style},onPointerDown:composeEventHandlers(x.onPointerDown,be=>{be.button===0&&(be.target.setPointerCapture(be.pointerId),J.current=G.getBoundingClientRect(),ne.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",W.viewport&&(W.viewport.style.scrollBehavior="auto"),he(be))}),onPointerMove:composeEventHandlers(x.onPointerMove,he),onPointerUp:composeEventHandlers(x.onPointerUp,be=>{const Le=be.target;Le.hasPointerCapture(be.pointerId)&&Le.releasePointerCapture(be.pointerId),document.body.style.webkitUserSelect=ne.current,W.viewport&&(W.viewport.style.scrollBehavior=""),J.current=null})})})}),THUMB_NAME$2="ScrollAreaThumb",ScrollAreaThumb=reactExports.forwardRef((x,y)=>{const{forceMount:w,...C}=x,P=useScrollbarContext(THUMB_NAME$2,x.__scopeScrollArea);return jsxRuntimeExports.jsx(Presence,{present:w||P.hasThumb,children:jsxRuntimeExports.jsx(ScrollAreaThumbImpl,{ref:y,...C})})}),ScrollAreaThumbImpl=reactExports.forwardRef((x,y)=>{const{__scopeScrollArea:w,style:C,...P}=x,O=useScrollAreaContext(THUMB_NAME$2,w),$=useScrollbarContext(THUMB_NAME$2,w),{onThumbPositionChange:L}=$,D=useComposedRefs(y,k=>$.onThumbChange(k)),B=reactExports.useRef(void 0),U=useDebounceCallback(()=>{B.current&&(B.current(),B.current=void 0)},100);return reactExports.useEffect(()=>{const k=O.viewport;if(k){const H=()=>{if(U(),!B.current){const W=addUnlinkedScrollListener(k,L);B.current=W,L()}};return L(),k.addEventListener("scroll",H),()=>k.removeEventListener("scroll",H)}},[O.viewport,U,L]),jsxRuntimeExports.jsx(Primitive.div,{"data-state":$.hasThumb?"visible":"hidden",...P,ref:D,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...C},onPointerDownCapture:composeEventHandlers(x.onPointerDownCapture,k=>{const W=k.target.getBoundingClientRect(),G=k.clientX-W.left,Q=k.clientY-W.top;$.onThumbPointerDown({x:G,y:Q})}),onPointerUp:composeEventHandlers(x.onPointerUp,$.onThumbPointerUp)})});ScrollAreaThumb.displayName=THUMB_NAME$2;var CORNER_NAME="ScrollAreaCorner",ScrollAreaCorner=reactExports.forwardRef((x,y)=>{const w=useScrollAreaContext(CORNER_NAME,x.__scopeScrollArea),C=!!(w.scrollbarX&&w.scrollbarY);return w.type!=="scroll"&&C?jsxRuntimeExports.jsx(ScrollAreaCornerImpl,{...x,ref:y}):null});ScrollAreaCorner.displayName=CORNER_NAME;var ScrollAreaCornerImpl=reactExports.forwardRef((x,y)=>{const{__scopeScrollArea:w,...C}=x,P=useScrollAreaContext(CORNER_NAME,w),[O,$]=reactExports.useState(0),[L,D]=reactExports.useState(0),B=!!(O&&L);return useResizeObserver(P.scrollbarX,()=>{const U=P.scrollbarX?.offsetHeight||0;P.onCornerHeightChange(U),D(U)}),useResizeObserver(P.scrollbarY,()=>{const U=P.scrollbarY?.offsetWidth||0;P.onCornerWidthChange(U),$(U)}),B?jsxRuntimeExports.jsx(Primitive.div,{...C,ref:y,style:{width:O,height:L,position:"absolute",right:P.dir==="ltr"?0:void 0,left:P.dir==="rtl"?0:void 0,bottom:0,...x.style}}):null});function toInt(x){return x?parseInt(x,10):0}function getThumbRatio(x,y){const w=x/y;return isNaN(w)?0:w}function getThumbSize(x){const y=getThumbRatio(x.viewport,x.content),w=x.scrollbar.paddingStart+x.scrollbar.paddingEnd,C=(x.scrollbar.size-w)*y;return Math.max(C,18)}function getScrollPositionFromPointer(x,y,w,C="ltr"){const P=getThumbSize(w),O=P/2,$=y||O,L=P-$,D=w.scrollbar.paddingStart+$,B=w.scrollbar.size-w.scrollbar.paddingEnd-L,U=w.content-w.viewport,k=C==="ltr"?[0,U]:[U*-1,0];return linearScale$1([D,B],k)(x)}function getThumbOffsetFromScroll(x,y,w="ltr"){const C=getThumbSize(y),P=y.scrollbar.paddingStart+y.scrollbar.paddingEnd,O=y.scrollbar.size-P,$=y.content-y.viewport,L=O-C,D=w==="ltr"?[0,$]:[$*-1,0],B=clamp$1(x,D);return linearScale$1([0,$],[0,L])(B)}function linearScale$1(x,y){return w=>{if(x[0]===x[1]||y[0]===y[1])return y[0];const C=(y[1]-y[0])/(x[1]-x[0]);return y[0]+C*(w-x[0])}}function isScrollingWithinScrollbarBounds(x,y){return x>0&&x<y}var addUnlinkedScrollListener=(x,y=()=>{})=>{let w={left:x.scrollLeft,top:x.scrollTop},C=0;return(function P(){const O={left:x.scrollLeft,top:x.scrollTop},$=w.left!==O.left,L=w.top!==O.top;($||L)&&y(),w=O,C=window.requestAnimationFrame(P)})(),()=>window.cancelAnimationFrame(C)};function useDebounceCallback(x,y){const w=useCallbackRef$1(x),C=reactExports.useRef(0);return reactExports.useEffect(()=>()=>window.clearTimeout(C.current),[]),reactExports.useCallback(()=>{window.clearTimeout(C.current),C.current=window.setTimeout(w,y)},[w,y])}function useResizeObserver(x,y){const w=useCallbackRef$1(y);useLayoutEffect2(()=>{let C=0;if(x){const P=new ResizeObserver(()=>{cancelAnimationFrame(C),C=window.requestAnimationFrame(w)});return P.observe(x),()=>{window.cancelAnimationFrame(C),P.unobserve(x)}}},[x,w])}var Root$5=ScrollArea,Viewport$2=ScrollAreaViewport,Scrollbar=ScrollAreaScrollbar,Thumb$2=ScrollAreaThumb,Corner=ScrollAreaCorner;const noopScrollAtom$=atom(0),scrollContext=reactExports.createContext(noopScrollAtom$),isScrollType=x=>typeof x=="string"&&["both","horizontal","vertical"].includes(x),QspScrollable=({children:x,attrs:y,scroll:w="both"})=>{const[,C,{className:P="",...O}]=useAttributes(y,"div","qsp-scrollable"),$=reactExports.useRef(null),L=useAtomExports.useAtom(reactExports.useContext(scrollContext)),D=useSetup(()=>atom(!1)),B=useAtomExports.useAtom(D),U=useSetup(()=>atom(!1)),k=useAtomExports.useAtom(U);return reactExports.useEffect(()=>{$.current&&L&&($.current.scrollTop=L>0?$.current.scrollHeight:0)},[L]),reactExports.useLayoutEffect(()=>{const H=$.current;if(!H)return;function W(){const Q=$.current?$.current.scrollTop>0:!1;D.value!==Q&&D.set(Q);const Z=$.current?$.current.offsetHeight+$.current.scrollTop<$.current.scrollHeight:!0;Z!==U.value&&U.set(Z)}W();const G=setInterval(W,300);return H.addEventListener("scroll",W,{passive:!0}),()=>{H.removeEventListener("scroll",W),clearInterval(G)}},[]),jsxRuntimeExports.jsxs(Root$5,{style:C,...O,className:P+" qsp-scroll-root","data-upscroll":B||void 0,"data-downscroll":k||void 0,children:[jsxRuntimeExports.jsx(Viewport$2,{ref:$,className:"qsp-scroll-area",children:x}),w==="both"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Scrollbar,{className:"qsp-scrollbar",orientation:"horizontal",children:jsxRuntimeExports.jsx(Thumb$2,{className:"qsp-scrollbar-thumb"})}),jsxRuntimeExports.jsx(Scrollbar,{className:"qsp-scrollbar",orientation:"vertical",children:jsxRuntimeExports.jsx(Thumb$2,{className:"qsp-scrollbar-thumb"})})]}):jsxRuntimeExports.jsx(Scrollbar,{className:"qsp-scrollbar",orientation:w,children:jsxRuntimeExports.jsx(Thumb$2,{className:"qsp-scrollbar-thumb"})}),jsxRuntimeExports.jsx(Corner,{className:"qsp-scrollbar-corner"})]})};var updateQueue=makeQueue(),raf=x=>schedule(x,updateQueue),writeQueue=makeQueue();raf.write=x=>schedule(x,writeQueue);var onStartQueue=makeQueue();raf.onStart=x=>schedule(x,onStartQueue);var onFrameQueue=makeQueue();raf.onFrame=x=>schedule(x,onFrameQueue);var onFinishQueue=makeQueue();raf.onFinish=x=>schedule(x,onFinishQueue);var timeouts=[];raf.setTimeout=(x,y)=>{const w=raf.now()+y,C=()=>{const O=timeouts.findIndex($=>$.cancel==C);~O&&timeouts.splice(O,1),pendingCount-=~O?1:0},P={time:w,handler:x,cancel:C};return timeouts.splice(findTimeout(w),0,P),pendingCount+=1,start(),P};var findTimeout=x=>~(~timeouts.findIndex(y=>y.time>x)||~timeouts.length);raf.cancel=x=>{onStartQueue.delete(x),onFrameQueue.delete(x),onFinishQueue.delete(x),updateQueue.delete(x),writeQueue.delete(x)};raf.sync=x=>{sync=!0,raf.batchedUpdates(x),sync=!1};raf.throttle=x=>{let y;function w(){try{x(...y)}finally{y=null}}function C(...P){y=P,raf.onStart(w)}return C.handler=x,C.cancel=()=>{onStartQueue.delete(w),y=null},C};var nativeRaf=typeof window<"u"?window.requestAnimationFrame:(()=>{});raf.use=x=>nativeRaf=x;raf.now=typeof performance<"u"?()=>performance.now():Date.now;raf.batchedUpdates=x=>x();raf.catch=console.error;raf.frameLoop="always";raf.advance=()=>{raf.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):update()};var ts=-1,pendingCount=0,sync=!1;function schedule(x,y){sync?(y.delete(x),x(0)):(y.add(x),start())}function start(){ts<0&&(ts=0,raf.frameLoop!=="demand"&&nativeRaf(loop))}function stop(){ts=-1}function loop(){~ts&&(nativeRaf(loop),raf.batchedUpdates(update))}function update(){const x=ts;ts=raf.now();const y=findTimeout(ts);if(y&&(eachSafely(timeouts.splice(0,y),w=>w.handler()),pendingCount-=y),!pendingCount){stop();return}onStartQueue.flush(),updateQueue.flush(x?Math.min(64,ts-x):16.667),onFrameQueue.flush(),writeQueue.flush(),onFinishQueue.flush()}function makeQueue(){let x=new Set,y=x;return{add(w){pendingCount+=y==x&&!x.has(w)?1:0,x.add(w)},delete(w){return pendingCount-=y==x&&x.has(w)?1:0,x.delete(w)},flush(w){y.size&&(x=new Set,pendingCount-=y.size,eachSafely(y,C=>C(w)&&x.add(C)),pendingCount+=x.size,y=x)}}}function eachSafely(x,y){x.forEach(w=>{try{y(w)}catch(C){raf.catch(C)}})}var __defProp=Object.defineProperty,__export=(x,y)=>{for(var w in y)__defProp(x,w,{get:y[w],enumerable:!0})},globals_exports={};__export(globals_exports,{assign:()=>assign,colors:()=>colors,createStringInterpolator:()=>createStringInterpolator,skipAnimation:()=>skipAnimation,to:()=>to,willAdvance:()=>willAdvance});function noop$2(){}var defineHidden=(x,y,w)=>Object.defineProperty(x,y,{value:w,writable:!0,configurable:!0}),is={arr:Array.isArray,obj:x=>!!x&&x.constructor.name==="Object",fun:x=>typeof x=="function",str:x=>typeof x=="string",num:x=>typeof x=="number",und:x=>x===void 0};function isEqual(x,y){if(is.arr(x)){if(!is.arr(y)||x.length!==y.length)return!1;for(let w=0;w<x.length;w++)if(x[w]!==y[w])return!1;return!0}return x===y}var each=(x,y)=>x.forEach(y);function eachProp(x,y,w){if(is.arr(x)){for(let C=0;C<x.length;C++)y.call(w,x[C],`${C}`);return}for(const C in x)x.hasOwnProperty(C)&&y.call(w,x[C],C)}var toArray=x=>is.und(x)?[]:is.arr(x)?x:[x];function flush(x,y){if(x.size){const w=Array.from(x);x.clear(),each(w,y)}}var flushCalls=(x,...y)=>flush(x,w=>w(...y)),isSSR=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),createStringInterpolator,to,colors=null,skipAnimation=!1,willAdvance=noop$2,assign=x=>{x.to&&(to=x.to),x.now&&(raf.now=x.now),x.colors!==void 0&&(colors=x.colors),x.skipAnimation!=null&&(skipAnimation=x.skipAnimation),x.createStringInterpolator&&(createStringInterpolator=x.createStringInterpolator),x.requestAnimationFrame&&raf.use(x.requestAnimationFrame),x.batchedUpdates&&(raf.batchedUpdates=x.batchedUpdates),x.willAdvance&&(willAdvance=x.willAdvance),x.frameLoop&&(raf.frameLoop=x.frameLoop)},startQueue=new Set,currentFrame=[],prevFrame=[],priority=0,frameLoop={get idle(){return!startQueue.size&&!currentFrame.length},start(x){priority>x.priority?(startQueue.add(x),raf.onStart(flushStartQueue)):(startSafely(x),raf(advance))},advance,sort(x){if(priority)raf.onFrame(()=>frameLoop.sort(x));else{const y=currentFrame.indexOf(x);~y&&(currentFrame.splice(y,1),startUnsafely(x))}},clear(){currentFrame=[],startQueue.clear()}};function flushStartQueue(){startQueue.forEach(startSafely),startQueue.clear(),raf(advance)}function startSafely(x){currentFrame.includes(x)||startUnsafely(x)}function startUnsafely(x){currentFrame.splice(findIndex(currentFrame,y=>y.priority>x.priority),0,x)}function advance(x){const y=prevFrame;for(let w=0;w<currentFrame.length;w++){const C=currentFrame[w];priority=C.priority,C.idle||(willAdvance(C),C.advance(x),C.idle||y.push(C))}return priority=0,prevFrame=currentFrame,prevFrame.length=0,currentFrame=y,currentFrame.length>0}function findIndex(x,y){const w=x.findIndex(y);return w<0?x.length:w}var colors2={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},NUMBER="[-+]?\\d*\\.?\\d+",PERCENTAGE=NUMBER+"%";function call(...x){return"\\(\\s*("+x.join(")\\s*,\\s*(")+")\\s*\\)"}var rgb=new RegExp("rgb"+call(NUMBER,NUMBER,NUMBER)),rgba=new RegExp("rgba"+call(NUMBER,NUMBER,NUMBER,NUMBER)),hsl=new RegExp("hsl"+call(NUMBER,PERCENTAGE,PERCENTAGE)),hsla=new RegExp("hsla"+call(NUMBER,PERCENTAGE,PERCENTAGE,NUMBER)),hex3=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6=/^#([0-9a-fA-F]{6})$/,hex8=/^#([0-9a-fA-F]{8})$/;function normalizeColor(x){let y;return typeof x=="number"?x>>>0===x&&x>=0&&x<=4294967295?x:null:(y=hex6.exec(x))?parseInt(y[1]+"ff",16)>>>0:colors&&colors[x]!==void 0?colors[x]:(y=rgb.exec(x))?(parse255(y[1])<<24|parse255(y[2])<<16|parse255(y[3])<<8|255)>>>0:(y=rgba.exec(x))?(parse255(y[1])<<24|parse255(y[2])<<16|parse255(y[3])<<8|parse1(y[4]))>>>0:(y=hex3.exec(x))?parseInt(y[1]+y[1]+y[2]+y[2]+y[3]+y[3]+"ff",16)>>>0:(y=hex8.exec(x))?parseInt(y[1],16)>>>0:(y=hex4.exec(x))?parseInt(y[1]+y[1]+y[2]+y[2]+y[3]+y[3]+y[4]+y[4],16)>>>0:(y=hsl.exec(x))?(hslToRgb(parse360(y[1]),parsePercentage(y[2]),parsePercentage(y[3]))|255)>>>0:(y=hsla.exec(x))?(hslToRgb(parse360(y[1]),parsePercentage(y[2]),parsePercentage(y[3]))|parse1(y[4]))>>>0:null}function hue2rgb(x,y,w){return w<0&&(w+=1),w>1&&(w-=1),w<1/6?x+(y-x)*6*w:w<1/2?y:w<2/3?x+(y-x)*(2/3-w)*6:x}function hslToRgb(x,y,w){const C=w<.5?w*(1+y):w+y-w*y,P=2*w-C,O=hue2rgb(P,C,x+1/3),$=hue2rgb(P,C,x),L=hue2rgb(P,C,x-1/3);return Math.round(O*255)<<24|Math.round($*255)<<16|Math.round(L*255)<<8}function parse255(x){const y=parseInt(x,10);return y<0?0:y>255?255:y}function parse360(x){return(parseFloat(x)%360+360)%360/360}function parse1(x){const y=parseFloat(x);return y<0?0:y>1?255:Math.round(y*255)}function parsePercentage(x){const y=parseFloat(x);return y<0?0:y>100?1:y/100}function colorToRgba(x){let y=normalizeColor(x);if(y===null)return x;y=y||0;const w=(y&4278190080)>>>24,C=(y&16711680)>>>16,P=(y&65280)>>>8,O=(y&255)/255;return`rgba(${w}, ${C}, ${P}, ${O})`}var createInterpolator=(x,y,w)=>{if(is.fun(x))return x;if(is.arr(x))return createInterpolator({range:x,output:y,extrapolate:w});if(is.str(x.output[0]))return createStringInterpolator(x);const C=x,P=C.output,O=C.range||[0,1],$=C.extrapolateLeft||C.extrapolate||"extend",L=C.extrapolateRight||C.extrapolate||"extend",D=C.easing||(B=>B);return B=>{const U=findRange(B,O);return interpolate(B,O[U],O[U+1],P[U],P[U+1],D,$,L,C.map)}};function interpolate(x,y,w,C,P,O,$,L,D){let B=D?D(x):x;if(B<y){if($==="identity")return B;$==="clamp"&&(B=y)}if(B>w){if(L==="identity")return B;L==="clamp"&&(B=w)}return C===P?C:y===w?x<=y?C:P:(y===-1/0?B=-B:w===1/0?B=B-y:B=(B-y)/(w-y),B=O(B),C===-1/0?B=-B:P===1/0?B=B+C:B=B*(P-C)+C,B)}function findRange(x,y){for(var w=1;w<y.length-1&&!(y[w]>=x);++w);return w-1}var easings={linear:x=>x},$get=Symbol.for("FluidValue.get"),$observers=Symbol.for("FluidValue.observers"),hasFluidValue=x=>!!(x&&x[$get]),getFluidValue=x=>x&&x[$get]?x[$get]():x,getFluidObservers=x=>x[$observers]||null;function callFluidObserver(x,y){x.eventObserved?x.eventObserved(y):x(y)}function callFluidObservers(x,y){const w=x[$observers];w&&w.forEach(C=>{callFluidObserver(C,y)})}var FluidValue=class{constructor(x){if(!x&&!(x=this.get))throw Error("Unknown getter");setFluidGetter(this,x)}},setFluidGetter=(x,y)=>setHidden(x,$get,y);function addFluidObserver(x,y){if(x[$get]){let w=x[$observers];w||setHidden(x,$observers,w=new Set),w.has(y)||(w.add(y),x.observerAdded&&x.observerAdded(w.size,y))}return y}function removeFluidObserver(x,y){const w=x[$observers];if(w&&w.has(y)){const C=w.size-1;C?w.delete(y):x[$observers]=null,x.observerRemoved&&x.observerRemoved(C,y)}}var setHidden=(x,y,w)=>Object.defineProperty(x,y,{value:w,writable:!0,configurable:!0}),numberRegex=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,colorRegex=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,unitRegex=new RegExp(`(${numberRegex.source})(%|[a-z]+)`,"i"),rgbaRegex=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,cssVariableRegex=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,variableToRgba=x=>{const[y,w]=parseCSSVariable(x);if(!y||isSSR())return x;const C=window.getComputedStyle(document.documentElement).getPropertyValue(y);if(C)return C.trim();if(w&&w.startsWith("--")){const P=window.getComputedStyle(document.documentElement).getPropertyValue(w);return P||x}else{if(w&&cssVariableRegex.test(w))return variableToRgba(w);if(w)return w}return x},parseCSSVariable=x=>{const y=cssVariableRegex.exec(x);if(!y)return[,];const[,w,C]=y;return[w,C]},namedColorRegex,rgbaRound=(x,y,w,C,P)=>`rgba(${Math.round(y)}, ${Math.round(w)}, ${Math.round(C)}, ${P})`,createStringInterpolator2=x=>{namedColorRegex||(namedColorRegex=colors?new RegExp(`(${Object.keys(colors).join("|")})(?!\\w)`,"g"):/^\b$/);const y=x.output.map(O=>getFluidValue(O).replace(cssVariableRegex,variableToRgba).replace(colorRegex,colorToRgba).replace(namedColorRegex,colorToRgba)),w=y.map(O=>O.match(numberRegex).map(Number)),P=w[0].map((O,$)=>w.map(L=>{if(!($ in L))throw Error('The arity of each "output" value must be equal');return L[$]})).map(O=>createInterpolator({...x,output:O}));return O=>{const $=!unitRegex.test(y[0])&&y.find(D=>unitRegex.test(D))?.replace(numberRegex,"");let L=0;return y[0].replace(numberRegex,()=>`${P[L++](O)}${$||""}`).replace(rgbaRegex,rgbaRound)}},prefix="react-spring: ",once=x=>{const y=x;let w=!1;if(typeof y!="function")throw new TypeError(`${prefix}once requires a function parameter`);return(...C)=>{w||(y(...C),w=!0)}},warnInterpolate=once(console.warn);function deprecateInterpolate(){warnInterpolate(`${prefix}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var warnDirectCall=once(console.warn);function deprecateDirectCall(){warnDirectCall(`${prefix}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function isAnimatedString(x){return is.str(x)&&(x[0]=="#"||/\d/.test(x)||!isSSR()&&cssVariableRegex.test(x)||x in(colors||{}))}var useIsomorphicLayoutEffect=isSSR()?reactExports.useEffect:reactExports.useLayoutEffect,useIsMounted=()=>{const x=reactExports.useRef(!1);return useIsomorphicLayoutEffect(()=>(x.current=!0,()=>{x.current=!1}),[]),x};function useForceUpdate(){const x=reactExports.useState()[1],y=useIsMounted();return()=>{y.current&&x(Math.random())}}var useOnce=x=>reactExports.useEffect(x,emptyDeps),emptyDeps=[];function usePrev(x){const y=reactExports.useRef(void 0);return reactExports.useEffect(()=>{y.current=x}),y.current}var $node=Symbol.for("Animated:node"),isAnimated=x=>!!x&&x[$node]===x,getAnimated=x=>x&&x[$node],setAnimated=(x,y)=>defineHidden(x,$node,y),getPayload=x=>x&&x[$node]&&x[$node].getPayload(),Animated=class{constructor(){setAnimated(this,this)}getPayload(){return this.payload||[]}},AnimatedValue=class Xc extends Animated{constructor(y){super(),this._value=y,this.done=!0,this.durationProgress=0,is.num(this._value)&&(this.lastPosition=this._value)}static create(y){return new Xc(y)}getPayload(){return[this]}getValue(){return this._value}setValue(y,w){return is.num(y)&&(this.lastPosition=y,w&&(y=Math.round(y/w)*w,this.done&&(this.lastPosition=y))),this._value===y?!1:(this._value=y,!0)}reset(){const{done:y}=this;this.done=!1,is.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,y&&(this.lastVelocity=null),this.v0=null)}},AnimatedString=class Zc extends AnimatedValue{constructor(y){super(0),this._string=null,this._toString=createInterpolator({output:[y,y]})}static create(y){return new Zc(y)}getValue(){const y=this._string;return y??(this._string=this._toString(this._value))}setValue(y){if(is.str(y)){if(y==this._string)return!1;this._string=y,this._value=1}else if(super.setValue(y))this._string=null;else return!1;return!0}reset(y){y&&(this._toString=createInterpolator({output:[this.getValue(),y]})),this._value=0,super.reset()}},TreeContext={dependencies:null},AnimatedObject=class extends Animated{constructor(x){super(),this.source=x,this.setValue(x)}getValue(x){const y={};return eachProp(this.source,(w,C)=>{isAnimated(w)?y[C]=w.getValue(x):hasFluidValue(w)?y[C]=getFluidValue(w):x||(y[C]=w)}),y}setValue(x){this.source=x,this.payload=this._makePayload(x)}reset(){this.payload&&each(this.payload,x=>x.reset())}_makePayload(x){if(x){const y=new Set;return eachProp(x,this._addToPayload,y),Array.from(y)}}_addToPayload(x){TreeContext.dependencies&&hasFluidValue(x)&&TreeContext.dependencies.add(x);const y=getPayload(x);y&&each(y,w=>this.add(w))}},AnimatedArray=class Jc extends AnimatedObject{constructor(y){super(y)}static create(y){return new Jc(y)}getValue(){return this.source.map(y=>y.getValue())}setValue(y){const w=this.getPayload();return y.length==w.length?w.map((C,P)=>C.setValue(y[P])).some(Boolean):(super.setValue(y.map(makeAnimated)),!0)}};function makeAnimated(x){return(isAnimatedString(x)?AnimatedString:AnimatedValue).create(x)}function getAnimatedType(x){const y=getAnimated(x);return y?y.constructor:is.arr(x)?AnimatedArray:isAnimatedString(x)?AnimatedString:AnimatedValue}var withAnimated=(x,y)=>{const w=!is.fun(x)||x.prototype&&x.prototype.isReactComponent;return reactExports.forwardRef((C,P)=>{const O=reactExports.useRef(null),$=w&&reactExports.useCallback(G=>{O.current=updateRef(P,G)},[P]),[L,D]=getAnimatedState(C,y),B=useForceUpdate(),U=()=>{const G=O.current;if(w&&!G)return;(G?y.applyAnimatedValues(G,L.getValue(!0)):!1)===!1&&B()},k=new PropsObserver(U,D),H=reactExports.useRef(void 0);useIsomorphicLayoutEffect(()=>(H.current=k,each(D,G=>addFluidObserver(G,k)),()=>{H.current&&(each(H.current.deps,G=>removeFluidObserver(G,H.current)),raf.cancel(H.current.update))})),reactExports.useEffect(U,[]),useOnce(()=>()=>{const G=H.current;each(G.deps,Q=>removeFluidObserver(Q,G))});const W=y.getComponentProps(L.getValue());return reactExports.createElement(x,{...W,ref:$})})},PropsObserver=class{constructor(x,y){this.update=x,this.deps=y}eventObserved(x){x.type=="change"&&raf.write(this.update)}};function getAnimatedState(x,y){const w=new Set;return TreeContext.dependencies=w,x.style&&(x={...x,style:y.createAnimatedStyle(x.style)}),x=new AnimatedObject(x),TreeContext.dependencies=null,[x,w]}function updateRef(x,y){return x&&(is.fun(x)?x(y):x.current=y),y}var cacheKey=Symbol.for("AnimatedComponent"),createHost=(x,{applyAnimatedValues:y=()=>!1,createAnimatedStyle:w=P=>new AnimatedObject(P),getComponentProps:C=P=>P}={})=>{const P={applyAnimatedValues:y,createAnimatedStyle:w,getComponentProps:C},O=$=>{const L=getDisplayName($)||"Anonymous";return is.str($)?$=O[$]||(O[$]=withAnimated($,P)):$=$[cacheKey]||($[cacheKey]=withAnimated($,P)),$.displayName=`Animated(${L})`,$};return eachProp(x,($,L)=>{is.arr(x)&&(L=getDisplayName($)),O[L]=O($)}),{animated:O}},getDisplayName=x=>is.str(x)?x:x&&is.str(x.displayName)?x.displayName:is.fun(x)&&x.name||null;function callProp(x,...y){return is.fun(x)?x(...y):x}var matchProp=(x,y)=>x===!0||!!(y&&x&&(is.fun(x)?x(y):toArray(x).includes(y))),resolveProp=(x,y)=>is.obj(x)?y&&x[y]:x,getDefaultProp=(x,y)=>x.default===!0?x[y]:x.default?x.default[y]:void 0,noopTransform=x=>x,getDefaultProps=(x,y=noopTransform)=>{let w=DEFAULT_PROPS;x.default&&x.default!==!0&&(x=x.default,w=Object.keys(x));const C={};for(const P of w){const O=y(x[P],P);is.und(O)||(C[P]=O)}return C},DEFAULT_PROPS=["config","onProps","onStart","onChange","onPause","onResume","onRest"],RESERVED_PROPS={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function getForwardProps(x){const y={};let w=0;if(eachProp(x,(C,P)=>{RESERVED_PROPS[P]||(y[P]=C,w++)}),w)return y}function inferTo(x){const y=getForwardProps(x);if(y){const w={to:y};return eachProp(x,(C,P)=>P in y||(w[P]=C)),w}return{...x}}function computeGoal(x){return x=getFluidValue(x),is.arr(x)?x.map(computeGoal):isAnimatedString(x)?globals_exports.createStringInterpolator({range:[0,1],output:[x,x]})(1):x}function hasProps(x){for(const y in x)return!0;return!1}function isAsyncTo(x){return is.fun(x)||is.arr(x)&&is.obj(x[0])}function detachRefs(x,y){x.ref?.delete(x),y?.delete(x)}function replaceRef(x,y){y&&x.ref!==y&&(x.ref?.delete(x),y.add(x),x.ref=y)}var config={default:{tension:170,friction:26}},defaults={...config.default,mass:1,damping:1,easing:easings.linear,clamp:!1},AnimationConfig=class{constructor(){this.velocity=0,Object.assign(this,defaults)}};function mergeConfig(x,y,w){w&&(w={...w},sanitizeConfig(w,y),y={...w,...y}),sanitizeConfig(x,y),Object.assign(x,y);for(const $ in defaults)x[$]==null&&(x[$]=defaults[$]);let{frequency:C,damping:P}=x;const{mass:O}=x;return is.und(C)||(C<.01&&(C=.01),P<0&&(P=0),x.tension=Math.pow(2*Math.PI/C,2)*O,x.friction=4*Math.PI*P*O/C),x}function sanitizeConfig(x,y){if(!is.und(y.decay))x.duration=void 0;else{const w=!is.und(y.tension)||!is.und(y.friction);(w||!is.und(y.frequency)||!is.und(y.damping)||!is.und(y.mass))&&(x.duration=void 0,x.decay=void 0),w&&(x.frequency=void 0)}}var emptyArray=[],Animation=class{constructor(){this.changed=!1,this.values=emptyArray,this.toValues=null,this.fromValues=emptyArray,this.config=new AnimationConfig,this.immediate=!1}};function scheduleProps(x,{key:y,props:w,defaultProps:C,state:P,actions:O}){return new Promise(($,L)=>{let D,B,U=matchProp(w.cancel??C?.cancel,y);if(U)W();else{is.und(w.pause)||(P.paused=matchProp(w.pause,y));let G=C?.pause;G!==!0&&(G=P.paused||matchProp(G,y)),D=callProp(w.delay||0,y),G?(P.resumeQueue.add(H),O.pause()):(O.resume(),H())}function k(){P.resumeQueue.add(H),P.timeouts.delete(B),B.cancel(),D=B.time-raf.now()}function H(){D>0&&!globals_exports.skipAnimation?(P.delayed=!0,B=raf.setTimeout(W,D),P.pauseQueue.add(k),P.timeouts.add(B)):W()}function W(){P.delayed&&(P.delayed=!1),P.pauseQueue.delete(k),P.timeouts.delete(B),x<=(P.cancelId||0)&&(U=!0);try{O.start({...w,callId:x,cancel:U},$)}catch(G){L(G)}}})}var getCombinedResult=(x,y)=>y.length==1?y[0]:y.some(w=>w.cancelled)?getCancelledResult(x.get()):y.every(w=>w.noop)?getNoopResult(x.get()):getFinishedResult(x.get(),y.every(w=>w.finished)),getNoopResult=x=>({value:x,noop:!0,finished:!0,cancelled:!1}),getFinishedResult=(x,y,w=!1)=>({value:x,finished:y,cancelled:w}),getCancelledResult=x=>({value:x,cancelled:!0,finished:!1});function runAsync(x,y,w,C){const{callId:P,parentId:O,onRest:$}=y,{asyncTo:L,promise:D}=w;return!O&&x===L&&!y.reset?D:w.promise=(async()=>{w.asyncId=P,w.asyncTo=x;const B=getDefaultProps(y,(Z,J)=>J==="onRest"?void 0:Z);let U,k;const H=new Promise((Z,J)=>(U=Z,k=J)),W=Z=>{const J=P<=(w.cancelId||0)&&getCancelledResult(C)||P!==w.asyncId&&getFinishedResult(C,!1);if(J)throw Z.result=J,k(Z),Z},G=(Z,J)=>{const ne=new BailSignal,oe=new SkipAnimationSignal;return(async()=>{if(globals_exports.skipAnimation)throw stopAsync(w),oe.result=getFinishedResult(C,!1),k(oe),oe;W(ne);const ae=is.obj(Z)?{...Z}:{...J,to:Z};ae.parentId=P,eachProp(B,(Te,re)=>{is.und(ae[re])&&(ae[re]=Te)});const ve=await C.start(ae);return W(ne),w.paused&&await new Promise(Te=>{w.resumeQueue.add(Te)}),ve})()};let Q;if(globals_exports.skipAnimation)return stopAsync(w),getFinishedResult(C,!1);try{let Z;is.arr(x)?Z=(async J=>{for(const ne of J)await G(ne)})(x):Z=Promise.resolve(x(G,C.stop.bind(C))),await Promise.all([Z.then(U),H]),Q=getFinishedResult(C.get(),!0,!1)}catch(Z){if(Z instanceof BailSignal)Q=Z.result;else if(Z instanceof SkipAnimationSignal)Q=Z.result;else throw Z}finally{P==w.asyncId&&(w.asyncId=O,w.asyncTo=O?L:void 0,w.promise=O?D:void 0)}return is.fun($)&&raf.batchedUpdates(()=>{$(Q,C,C.item)}),Q})()}function stopAsync(x,y){flush(x.timeouts,w=>w.cancel()),x.pauseQueue.clear(),x.resumeQueue.clear(),x.asyncId=x.asyncTo=x.promise=void 0,y&&(x.cancelId=y)}var BailSignal=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},SkipAnimationSignal=class extends Error{constructor(){super("SkipAnimationSignal")}},isFrameValue=x=>x instanceof FrameValue,nextId=1,FrameValue=class extends FluidValue{constructor(){super(...arguments),this.id=nextId++,this._priority=0}get priority(){return this._priority}set priority(x){this._priority!=x&&(this._priority=x,this._onPriorityChange(x))}get(){const x=getAnimated(this);return x&&x.getValue()}to(...x){return globals_exports.to(this,x)}interpolate(...x){return deprecateInterpolate(),globals_exports.to(this,x)}toJSON(){return this.get()}observerAdded(x){x==1&&this._attach()}observerRemoved(x){x==0&&this._detach()}_attach(){}_detach(){}_onChange(x,y=!1){callFluidObservers(this,{type:"change",parent:this,value:x,idle:y})}_onPriorityChange(x){this.idle||frameLoop.sort(this),callFluidObservers(this,{type:"priority",parent:this,priority:x})}},$P=Symbol.for("SpringPhase"),HAS_ANIMATED=1,IS_ANIMATING=2,IS_PAUSED=4,hasAnimated=x=>(x[$P]&HAS_ANIMATED)>0,isAnimating=x=>(x[$P]&IS_ANIMATING)>0,isPaused=x=>(x[$P]&IS_PAUSED)>0,setActiveBit=(x,y)=>y?x[$P]|=IS_ANIMATING|HAS_ANIMATED:x[$P]&=~IS_ANIMATING,setPausedBit=(x,y)=>y?x[$P]|=IS_PAUSED:x[$P]&=~IS_PAUSED,SpringValue=class extends FrameValue{constructor(x,y){if(super(),this.animation=new Animation,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!is.und(x)||!is.und(y)){const w=is.obj(x)?{...x}:{...y,from:x};is.und(w.default)&&(w.default=!0),this.start(w)}}get idle(){return!(isAnimating(this)||this._state.asyncTo)||isPaused(this)}get goal(){return getFluidValue(this.animation.to)}get velocity(){const x=getAnimated(this);return x instanceof AnimatedValue?x.lastVelocity||0:x.getPayload().map(y=>y.lastVelocity||0)}get hasAnimated(){return hasAnimated(this)}get isAnimating(){return isAnimating(this)}get isPaused(){return isPaused(this)}get isDelayed(){return this._state.delayed}advance(x){let y=!0,w=!1;const C=this.animation;let{toValues:P}=C;const{config:O}=C,$=getPayload(C.to);!$&&hasFluidValue(C.to)&&(P=toArray(getFluidValue(C.to))),C.values.forEach((B,U)=>{if(B.done)return;const k=B.constructor==AnimatedString?1:$?$[U].lastPosition:P[U];let H=C.immediate,W=k;if(!H){if(W=B.lastPosition,O.tension<=0){B.done=!0;return}let G=B.elapsedTime+=x;const Q=C.fromValues[U],Z=B.v0!=null?B.v0:B.v0=is.arr(O.velocity)?O.velocity[U]:O.velocity;let J;const ne=O.precision||(Q==k?.005:Math.min(1,Math.abs(k-Q)*.001));if(is.und(O.duration))if(O.decay){const oe=O.decay===!0?.998:O.decay,ae=Math.exp(-(1-oe)*G);W=Q+Z/(1-oe)*(1-ae),H=Math.abs(B.lastPosition-W)<=ne,J=Z*ae}else{J=B.lastVelocity==null?Z:B.lastVelocity;const oe=O.restVelocity||ne/10,ae=O.clamp?0:O.bounce,ve=!is.und(ae),Te=Q==k?B.v0>0:Q<k;let re,he=!1;const be=1,Le=Math.ceil(x/be);for(let qe=0;qe<Le&&(re=Math.abs(J)>oe,!(!re&&(H=Math.abs(k-W)<=ne,H)));++qe){ve&&(he=W==k||W>k==Te,he&&(J=-J*ae,W=k));const Ye=-O.tension*1e-6*(W-k),et=-O.friction*.001*J,je=(Ye+et)/O.mass;J=J+je*be,W=W+J*be}}else{let oe=1;O.duration>0&&(this._memoizedDuration!==O.duration&&(this._memoizedDuration=O.duration,B.durationProgress>0&&(B.elapsedTime=O.duration*B.durationProgress,G=B.elapsedTime+=x)),oe=(O.progress||0)+G/this._memoizedDuration,oe=oe>1?1:oe<0?0:oe,B.durationProgress=oe),W=Q+O.easing(oe)*(k-Q),J=(W-B.lastPosition)/x,H=oe==1}B.lastVelocity=J,Number.isNaN(W)&&(console.warn("Got NaN while animating:",this),H=!0)}$&&!$[U].done&&(H=!1),H?B.done=!0:y=!1,B.setValue(W,O.round)&&(w=!0)});const L=getAnimated(this),D=L.getValue();if(y){const B=getFluidValue(C.to);(D!==B||w)&&!O.decay?(L.setValue(B),this._onChange(B)):w&&O.decay&&this._onChange(D),this._stop()}else w&&this._onChange(D)}set(x){return raf.batchedUpdates(()=>{this._stop(),this._focus(x),this._set(x)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(isAnimating(this)){const{to:x,config:y}=this.animation;raf.batchedUpdates(()=>{this._onStart(),y.decay||this._set(x,!1),this._stop()})}return this}update(x){return(this.queue||(this.queue=[])).push(x),this}start(x,y){let w;return is.und(x)?(w=this.queue||[],this.queue=[]):w=[is.obj(x)?x:{...y,to:x}],Promise.all(w.map(C=>this._update(C))).then(C=>getCombinedResult(this,C))}stop(x){const{to:y}=this.animation;return this._focus(this.get()),stopAsync(this._state,x&&this._lastCallId),raf.batchedUpdates(()=>this._stop(y,x)),this}reset(){this._update({reset:!0})}eventObserved(x){x.type=="change"?this._start():x.type=="priority"&&(this.priority=x.priority+1)}_prepareNode(x){const y=this.key||"";let{to:w,from:C}=x;w=is.obj(w)?w[y]:w,(w==null||isAsyncTo(w))&&(w=void 0),C=is.obj(C)?C[y]:C,C==null&&(C=void 0);const P={to:w,from:C};return hasAnimated(this)||(x.reverse&&([w,C]=[C,w]),C=getFluidValue(C),is.und(C)?getAnimated(this)||this._set(w):this._set(C)),P}_update({...x},y){const{key:w,defaultProps:C}=this;x.default&&Object.assign(C,getDefaultProps(x,($,L)=>/^on/.test(L)?resolveProp($,w):$)),mergeActiveFn(this,x,"onProps"),sendEvent(this,"onProps",x,this);const P=this._prepareNode(x);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const O=this._state;return scheduleProps(++this._lastCallId,{key:w,props:x,defaultProps:C,state:O,actions:{pause:()=>{isPaused(this)||(setPausedBit(this,!0),flushCalls(O.pauseQueue),sendEvent(this,"onPause",getFinishedResult(this,checkFinished(this,this.animation.to)),this))},resume:()=>{isPaused(this)&&(setPausedBit(this,!1),isAnimating(this)&&this._resume(),flushCalls(O.resumeQueue),sendEvent(this,"onResume",getFinishedResult(this,checkFinished(this,this.animation.to)),this))},start:this._merge.bind(this,P)}}).then($=>{if(x.loop&&$.finished&&!(y&&$.noop)){const L=createLoopUpdate(x);if(L)return this._update(L,!0)}return $})}_merge(x,y,w){if(y.cancel)return this.stop(!0),w(getCancelledResult(this));const C=!is.und(x.to),P=!is.und(x.from);if(C||P)if(y.callId>this._lastToId)this._lastToId=y.callId;else return w(getCancelledResult(this));const{key:O,defaultProps:$,animation:L}=this,{to:D,from:B}=L;let{to:U=D,from:k=B}=x;P&&!C&&(!y.default||is.und(U))&&(U=k),y.reverse&&([U,k]=[k,U]);const H=!isEqual(k,B);H&&(L.from=k),k=getFluidValue(k);const W=!isEqual(U,D);W&&this._focus(U);const G=isAsyncTo(y.to),{config:Q}=L,{decay:Z,velocity:J}=Q;(C||P)&&(Q.velocity=0),y.config&&!G&&mergeConfig(Q,callProp(y.config,O),y.config!==$.config?callProp($.config,O):void 0);let ne=getAnimated(this);if(!ne||is.und(U))return w(getFinishedResult(this,!0));const oe=is.und(y.reset)?P&&!y.default:!is.und(k)&&matchProp(y.reset,O),ae=oe?k:this.get(),ve=computeGoal(U),Te=is.num(ve)||is.arr(ve)||isAnimatedString(ve),re=!G&&(!Te||matchProp($.immediate||y.immediate,O));if(W){const qe=getAnimatedType(U);if(qe!==ne.constructor)if(re)ne=this._set(ve);else throw Error(`Cannot animate between ${ne.constructor.name} and ${qe.name}, as the "to" prop suggests`)}const he=ne.constructor;let be=hasFluidValue(U),Le=!1;if(!be){const qe=oe||!hasAnimated(this)&&H;(W||qe)&&(Le=isEqual(computeGoal(ae),ve),be=!Le),(!isEqual(L.immediate,re)&&!re||!isEqual(Q.decay,Z)||!isEqual(Q.velocity,J))&&(be=!0)}if(Le&&isAnimating(this)&&(L.changed&&!oe?be=!0:be||this._stop(D)),!G&&((be||hasFluidValue(D))&&(L.values=ne.getPayload(),L.toValues=hasFluidValue(U)?null:he==AnimatedString?[1]:toArray(ve)),L.immediate!=re&&(L.immediate=re,!re&&!oe&&this._set(D)),be)){const{onRest:qe}=L;each(ACTIVE_EVENTS,et=>mergeActiveFn(this,y,et));const Ye=getFinishedResult(this,checkFinished(this,D));flushCalls(this._pendingCalls,Ye),this._pendingCalls.add(w),L.changed&&raf.batchedUpdates(()=>{L.changed=!oe,qe?.(Ye,this),oe?callProp($.onRest,Ye):L.onStart?.(Ye,this)})}oe&&this._set(ae),G?w(runAsync(y.to,y,this._state,this)):be?this._start():isAnimating(this)&&!W?this._pendingCalls.add(w):w(getNoopResult(ae))}_focus(x){const y=this.animation;x!==y.to&&(getFluidObservers(this)&&this._detach(),y.to=x,getFluidObservers(this)&&this._attach())}_attach(){let x=0;const{to:y}=this.animation;hasFluidValue(y)&&(addFluidObserver(y,this),isFrameValue(y)&&(x=y.priority+1)),this.priority=x}_detach(){const{to:x}=this.animation;hasFluidValue(x)&&removeFluidObserver(x,this)}_set(x,y=!0){const w=getFluidValue(x);if(!is.und(w)){const C=getAnimated(this);if(!C||!isEqual(w,C.getValue())){const P=getAnimatedType(w);!C||C.constructor!=P?setAnimated(this,P.create(w)):C.setValue(w),C&&raf.batchedUpdates(()=>{this._onChange(w,y)})}}return getAnimated(this)}_onStart(){const x=this.animation;x.changed||(x.changed=!0,sendEvent(this,"onStart",getFinishedResult(this,checkFinished(this,x.to)),this))}_onChange(x,y){y||(this._onStart(),callProp(this.animation.onChange,x,this)),callProp(this.defaultProps.onChange,x,this),super._onChange(x,y)}_start(){const x=this.animation;getAnimated(this).reset(getFluidValue(x.to)),x.immediate||(x.fromValues=x.values.map(y=>y.lastPosition)),isAnimating(this)||(setActiveBit(this,!0),isPaused(this)||this._resume())}_resume(){globals_exports.skipAnimation?this.finish():frameLoop.start(this)}_stop(x,y){if(isAnimating(this)){setActiveBit(this,!1);const w=this.animation;each(w.values,P=>{P.done=!0}),w.toValues&&(w.onChange=w.onPause=w.onResume=void 0),callFluidObservers(this,{type:"idle",parent:this});const C=y?getCancelledResult(this.get()):getFinishedResult(this.get(),checkFinished(this,x??w.to));flushCalls(this._pendingCalls,C),w.changed&&(w.changed=!1,sendEvent(this,"onRest",C,this))}}};function checkFinished(x,y){const w=computeGoal(y),C=computeGoal(x.get());return isEqual(C,w)}function createLoopUpdate(x,y=x.loop,w=x.to){const C=callProp(y);if(C){const P=C!==!0&&inferTo(C),O=(P||x).reverse,$=!P||P.reset;return createUpdate({...x,loop:y,default:!1,pause:void 0,to:!O||isAsyncTo(w)?w:void 0,from:$?x.from:void 0,reset:$,...P})}}function createUpdate(x){const{to:y,from:w}=x=inferTo(x),C=new Set;return is.obj(y)&&findDefined(y,C),is.obj(w)&&findDefined(w,C),x.keys=C.size?Array.from(C):null,x}function declareUpdate(x){const y=createUpdate(x);return is.und(y.default)&&(y.default=getDefaultProps(y)),y}function findDefined(x,y){eachProp(x,(w,C)=>w!=null&&y.add(C))}var ACTIVE_EVENTS=["onStart","onRest","onChange","onPause","onResume"];function mergeActiveFn(x,y,w){x.animation[w]=y[w]!==getDefaultProp(y,w)?resolveProp(y[w],x.key):void 0}function sendEvent(x,y,...w){x.animation[y]?.(...w),x.defaultProps[y]?.(...w)}var BATCHED_EVENTS=["onStart","onChange","onRest"],nextId2=1,Controller=class{constructor(x,y){this.id=nextId2++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),y&&(this._flush=y),x&&this.start({default:!0,...x})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(x=>x.idle&&!x.isDelayed&&!x.isPaused)}get item(){return this._item}set item(x){this._item=x}get(){const x={};return this.each((y,w)=>x[w]=y.get()),x}set(x){for(const y in x){const w=x[y];is.und(w)||this.springs[y].set(w)}}update(x){return x&&this.queue.push(createUpdate(x)),this}start(x){let{queue:y}=this;return x?y=toArray(x).map(createUpdate):this.queue=[],this._flush?this._flush(this,y):(prepareKeys(this,y),flushUpdateQueue(this,y))}stop(x,y){if(x!==!!x&&(y=x),y){const w=this.springs;each(toArray(y),C=>w[C].stop(!!x))}else stopAsync(this._state,this._lastAsyncId),this.each(w=>w.stop(!!x));return this}pause(x){if(is.und(x))this.start({pause:!0});else{const y=this.springs;each(toArray(x),w=>y[w].pause())}return this}resume(x){if(is.und(x))this.start({pause:!1});else{const y=this.springs;each(toArray(x),w=>y[w].resume())}return this}each(x){eachProp(this.springs,x)}_onFrame(){const{onStart:x,onChange:y,onRest:w}=this._events,C=this._active.size>0,P=this._changed.size>0;(C&&!this._started||P&&!this._started)&&(this._started=!0,flush(x,([L,D])=>{D.value=this.get(),L(D,this,this._item)}));const O=!C&&this._started,$=P||O&&w.size?this.get():null;P&&y.size&&flush(y,([L,D])=>{D.value=$,L(D,this,this._item)}),O&&(this._started=!1,flush(w,([L,D])=>{D.value=$,L(D,this,this._item)}))}eventObserved(x){if(x.type=="change")this._changed.add(x.parent),x.idle||this._active.add(x.parent);else if(x.type=="idle")this._active.delete(x.parent);else return;raf.onFrame(this._onFrame)}};function flushUpdateQueue(x,y){return Promise.all(y.map(w=>flushUpdate(x,w))).then(w=>getCombinedResult(x,w))}async function flushUpdate(x,y,w){const{keys:C,to:P,from:O,loop:$,onRest:L,onResolve:D}=y,B=is.obj(y.default)&&y.default;$&&(y.loop=!1),P===!1&&(y.to=null),O===!1&&(y.from=null);const U=is.arr(P)||is.fun(P)?P:void 0;U?(y.to=void 0,y.onRest=void 0,B&&(B.onRest=void 0)):each(BATCHED_EVENTS,Q=>{const Z=y[Q];if(is.fun(Z)){const J=x._events[Q];y[Q]=({finished:ne,cancelled:oe})=>{const ae=J.get(Z);ae?(ne||(ae.finished=!1),oe&&(ae.cancelled=!0)):J.set(Z,{value:null,finished:ne||!1,cancelled:oe||!1})},B&&(B[Q]=y[Q])}});const k=x._state;y.pause===!k.paused?(k.paused=y.pause,flushCalls(y.pause?k.pauseQueue:k.resumeQueue)):k.paused&&(y.pause=!0);const H=(C||Object.keys(x.springs)).map(Q=>x.springs[Q].start(y)),W=y.cancel===!0||getDefaultProp(y,"cancel")===!0;(U||W&&k.asyncId)&&H.push(scheduleProps(++x._lastAsyncId,{props:y,state:k,actions:{pause:noop$2,resume:noop$2,start(Q,Z){W?(stopAsync(k,x._lastAsyncId),Z(getCancelledResult(x))):(Q.onRest=L,Z(runAsync(U,Q,k,x)))}}})),k.paused&&await new Promise(Q=>{k.resumeQueue.add(Q)});const G=getCombinedResult(x,await Promise.all(H));if($&&G.finished&&!(w&&G.noop)){const Q=createLoopUpdate(y,$,P);if(Q)return prepareKeys(x,[Q]),flushUpdate(x,Q,!0)}return D&&raf.batchedUpdates(()=>D(G,x,x.item)),G}function getSprings(x,y){const w={...x.springs};return y&&each(toArray(y),C=>{is.und(C.keys)&&(C=createUpdate(C)),is.obj(C.to)||(C={...C,to:void 0}),prepareSprings(w,C,P=>createSpring(P))}),setSprings(x,w),w}function setSprings(x,y){eachProp(y,(w,C)=>{x.springs[C]||(x.springs[C]=w,addFluidObserver(w,x))})}function createSpring(x,y){const w=new SpringValue;return w.key=x,y&&addFluidObserver(w,y),w}function prepareSprings(x,y,w){y.keys&&each(y.keys,C=>{(x[C]||(x[C]=w(C)))._prepareNode(y)})}function prepareKeys(x,y){each(y,w=>{prepareSprings(x.springs,w,C=>createSpring(C,x))})}var SpringContext=reactExports.createContext({pause:!1,immediate:!1}),SpringRef=()=>{const x=[],y=function(C){deprecateDirectCall();const P=[];return each(x,(O,$)=>{if(is.und(C))P.push(O.start());else{const L=w(C,O,$);L&&P.push(O.start(L))}}),P};y.current=x,y.add=function(C){x.includes(C)||x.push(C)},y.delete=function(C){const P=x.indexOf(C);~P&&x.splice(P,1)},y.pause=function(){return each(x,C=>C.pause(...arguments)),this},y.resume=function(){return each(x,C=>C.resume(...arguments)),this},y.set=function(C){each(x,(P,O)=>{const $=is.fun(C)?C(O,P):C;$&&P.set($)})},y.start=function(C){const P=[];return each(x,(O,$)=>{if(is.und(C))P.push(O.start());else{const L=this._getProps(C,O,$);L&&P.push(O.start(L))}}),P},y.stop=function(){return each(x,C=>C.stop(...arguments)),this},y.update=function(C){return each(x,(P,O)=>P.update(this._getProps(C,P,O))),this};const w=function(C,P,O){return is.fun(C)?C(O,P):C};return y._getProps=w,y};function useSprings(x,y,w){const C=is.fun(y)&&y;C&&!w&&(w=[]);const P=reactExports.useMemo(()=>C||arguments.length==3?SpringRef():void 0,[]),O=reactExports.useRef(0),$=useForceUpdate(),L=reactExports.useMemo(()=>({ctrls:[],queue:[],flush(J,ne){const oe=getSprings(J,ne);return O.current>0&&!L.queue.length&&!Object.keys(oe).some(ve=>!J.springs[ve])?flushUpdateQueue(J,ne):new Promise(ve=>{setSprings(J,oe),L.queue.push(()=>{ve(flushUpdateQueue(J,ne))}),$()})}}),[]),D=reactExports.useRef([...L.ctrls]),B=reactExports.useRef([]),U=usePrev(x)||0;reactExports.useMemo(()=>{each(D.current.slice(x,U),J=>{detachRefs(J,P),J.stop(!0)}),D.current.length=x,k(U,x)},[x]),reactExports.useMemo(()=>{k(0,Math.min(U,x))},w);function k(J,ne){for(let oe=J;oe<ne;oe++){const ae=D.current[oe]||(D.current[oe]=new Controller(null,L.flush)),ve=C?C(oe,ae):y[oe];ve&&(B.current[oe]=declareUpdate(ve))}}const H=D.current.map((J,ne)=>getSprings(J,B.current[ne])),W=reactExports.useContext(SpringContext),G=usePrev(W),Q=W!==G&&hasProps(W);useIsomorphicLayoutEffect(()=>{O.current++,L.ctrls=D.current;const{queue:J}=L;J.length&&(L.queue=[],each(J,ne=>ne())),each(D.current,(ne,oe)=>{P?.add(ne),Q&&ne.start({default:W});const ae=B.current[oe];ae&&(replaceRef(ne,ae.ref),ne.ref?ne.queue.push(ae):ne.start(ae))})}),useOnce(()=>()=>{each(L.ctrls,J=>J.stop(!0))});const Z=H.map(J=>({...J}));return P?[Z,P]:Z}function useSpring(x,y){const w=is.fun(x),[[C],P]=useSprings(1,w?x:[x],w?[]:y);return w||arguments.length==2?[C,P]:C}function useTransition(x,y,w){const C=is.fun(y)&&y,{reset:P,sort:O,trail:$=0,expires:L=!0,exitBeforeEnter:D=!1,onDestroyed:B,ref:U,config:k}=C?C():y,H=reactExports.useMemo(()=>C||arguments.length==3?SpringRef():void 0,[]),W=toArray(x),G=[],Q=reactExports.useRef(null),Z=P?null:Q.current;useIsomorphicLayoutEffect(()=>{Q.current=G}),useOnce(()=>(each(G,je=>{H?.add(je.ctrl),je.ctrl.ref=H}),()=>{each(Q.current,je=>{je.expired&&clearTimeout(je.expirationId),detachRefs(je.ctrl,H),je.ctrl.stop(!0)})}));const J=getKeys(W,C?C():y,Z),ne=P&&Q.current||[];useIsomorphicLayoutEffect(()=>each(ne,({ctrl:je,item:Ke,key:Ve})=>{detachRefs(je,H),callProp(B,Ke,Ve)}));const oe=[];if(Z&&each(Z,(je,Ke)=>{je.expired?(clearTimeout(je.expirationId),ne.push(je)):(Ke=oe[Ke]=J.indexOf(je.key),~Ke&&(G[Ke]=je))}),each(W,(je,Ke)=>{G[Ke]||(G[Ke]={key:J[Ke],item:je,phase:"mount",ctrl:new Controller},G[Ke].ctrl.item=je)}),oe.length){let je=-1;const{leave:Ke}=C?C():y;each(oe,(Ve,We)=>{const we=Z[We];~Ve?(je=G.indexOf(we),G[je]={...we,item:W[Ve]}):Ke&&G.splice(++je,0,we)})}is.fun(O)&&G.sort((je,Ke)=>O(je.item,Ke.item));let ae=-$;const ve=useForceUpdate(),Te=getDefaultProps(y),re=new Map,he=reactExports.useRef(new Map),be=reactExports.useRef(!1);each(G,(je,Ke)=>{const Ve=je.key,We=je.phase,we=C?C():y;let Oe,He;const ie=callProp(we.delay||0,Ve);if(We=="mount")Oe=we.enter,He="enter";else{const st=J.indexOf(Ve)<0;if(We!="leave")if(st)Oe=we.leave,He="leave";else if(Oe=we.update)He="update";else return;else if(!st)Oe=we.enter,He="enter";else return}if(Oe=callProp(Oe,je.item,Ke),Oe=is.obj(Oe)?inferTo(Oe):{to:Oe},!Oe.config){const st=k||Te.config;Oe.config=callProp(st,je.item,Ke,He)}ae+=$;const Re={...Te,delay:ie+ae,ref:U,immediate:we.immediate,reset:!1,...Oe};if(He=="enter"&&is.und(Re.from)){const st=C?C():y,dt=is.und(st.initial)||Z?st.from:st.initial;Re.from=callProp(dt,je.item,Ke)}const{onResolve:Xe}=Re;Re.onResolve=st=>{callProp(Xe,st);const dt=Q.current,De=dt.find(it=>it.key===Ve);if(De&&!(st.cancelled&&De.phase!="update")&&De.ctrl.idle){const it=dt.every(Ue=>Ue.ctrl.idle);if(De.phase=="leave"){const Ue=callProp(L,De.item);if(Ue!==!1){const Et=Ue===!0?0:Ue;if(De.expired=!0,!it&&Et>0){Et<=2147483647&&(De.expirationId=setTimeout(ve,Et));return}}}it&&dt.some(Ue=>Ue.expired)&&(he.current.delete(De),D&&(be.current=!0),ve())}};const Ze=getSprings(je.ctrl,Re);He==="leave"&&D?he.current.set(je,{phase:He,springs:Ze,payload:Re}):re.set(je,{phase:He,springs:Ze,payload:Re})});const Le=reactExports.useContext(SpringContext),qe=usePrev(Le),Ye=Le!==qe&&hasProps(Le);useIsomorphicLayoutEffect(()=>{Ye&&each(G,je=>{je.ctrl.start({default:Le})})},[Le]),each(re,(je,Ke)=>{if(he.current.size){const Ve=G.findIndex(We=>We.key===Ke.key);G.splice(Ve,1)}}),useIsomorphicLayoutEffect(()=>{each(he.current.size?he.current:re,({phase:je,payload:Ke},Ve)=>{const{ctrl:We}=Ve;Ve.phase=je,H?.add(We),Ye&&je=="enter"&&We.start({default:Le}),Ke&&(replaceRef(We,Ke.ref),(We.ref||H)&&!be.current?We.update(Ke):(We.start(Ke),be.current&&(be.current=!1)))})},P?void 0:w);const et=je=>reactExports.createElement(reactExports.Fragment,null,G.map((Ke,Ve)=>{const{springs:We}=re.get(Ke)||Ke.ctrl,we=je({...We},Ke.item,Ke,Ve),Oe=is.str(Ke.key)||is.num(Ke.key)?Ke.key:Ke.ctrl.id,He=reactExports.version<"19.0.0",ie=we?.props??{},Re=He?we?.ref:ie?.ref;return we&&we.type?reactExports.createElement(we.type,{...ie,key:Oe,ref:Re}):we}));return H?[et,H]:et}var nextKey=1;function getKeys(x,{key:y,keys:w=y},C){if(w===null){const P=new Set;return x.map(O=>{const $=C&&C.find(L=>L.item===O&&L.phase!=="leave"&&!P.has(L));return $?(P.add($),$.key):nextKey++})}return is.und(w)?x:is.fun(w)?x.map(w):toArray(w)}var Interpolation=class extends FrameValue{constructor(x,y){super(),this.source=x,this.idle=!0,this._active=new Set,this.calc=createInterpolator(...y);const w=this._get(),C=getAnimatedType(w);setAnimated(this,C.create(w))}advance(x){const y=this._get(),w=this.get();isEqual(y,w)||(getAnimated(this).setValue(y),this._onChange(y,this.idle)),!this.idle&&checkIdle(this._active)&&becomeIdle(this)}_get(){const x=is.arr(this.source)?this.source.map(getFluidValue):toArray(getFluidValue(this.source));return this.calc(...x)}_start(){this.idle&&!checkIdle(this._active)&&(this.idle=!1,each(getPayload(this),x=>{x.done=!1}),globals_exports.skipAnimation?(raf.batchedUpdates(()=>this.advance()),becomeIdle(this)):frameLoop.start(this))}_attach(){let x=1;each(toArray(this.source),y=>{hasFluidValue(y)&&addFluidObserver(y,this),isFrameValue(y)&&(y.idle||this._active.add(y),x=Math.max(x,y.priority+1))}),this.priority=x,this._start()}_detach(){each(toArray(this.source),x=>{hasFluidValue(x)&&removeFluidObserver(x,this)}),this._active.clear(),becomeIdle(this)}eventObserved(x){x.type=="change"?x.idle?this.advance():(this._active.add(x.parent),this._start()):x.type=="idle"?this._active.delete(x.parent):x.type=="priority"&&(this.priority=toArray(this.source).reduce((y,w)=>Math.max(y,(isFrameValue(w)?w.priority:0)+1),0))}};function isIdle(x){return x.idle!==!1}function checkIdle(x){return!x.size||Array.from(x).every(isIdle)}function becomeIdle(x){x.idle||(x.idle=!0,each(getPayload(x),y=>{y.done=!0}),callFluidObservers(x,{type:"idle",parent:x}))}globals_exports.assign({createStringInterpolator:createStringInterpolator2,to:(x,y)=>new Interpolation(x,y)});var isCustomPropRE=/^--/;function dangerousStyleValue(x,y){return y==null||typeof y=="boolean"||y===""?"":typeof y=="number"&&y!==0&&!isCustomPropRE.test(x)&&!(isUnitlessNumber.hasOwnProperty(x)&&isUnitlessNumber[x])?y+"px":(""+y).trim()}var attributeCache={};function applyAnimatedValues(x,y){if(!x.nodeType||!x.setAttribute)return!1;const w=x.nodeName==="filter"||x.parentNode&&x.parentNode.nodeName==="filter",{className:C,style:P,children:O,scrollTop:$,scrollLeft:L,viewBox:D,...B}=y,U=Object.values(B),k=Object.keys(B).map(H=>w||x.hasAttribute(H)?H:attributeCache[H]||(attributeCache[H]=H.replace(/([A-Z])/g,W=>"-"+W.toLowerCase())));O!==void 0&&(x.textContent=O);for(const H in P)if(P.hasOwnProperty(H)){const W=dangerousStyleValue(H,P[H]);isCustomPropRE.test(H)?x.style.setProperty(H,W):x.style[H]=W}k.forEach((H,W)=>{x.setAttribute(H,U[W])}),C!==void 0&&(x.className=C),$!==void 0&&(x.scrollTop=$),L!==void 0&&(x.scrollLeft=L),D!==void 0&&x.setAttribute("viewBox",D)}var isUnitlessNumber={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},prefixKey=(x,y)=>x+y.charAt(0).toUpperCase()+y.substring(1),prefixes=["Webkit","Ms","Moz","O"];isUnitlessNumber=Object.keys(isUnitlessNumber).reduce((x,y)=>(prefixes.forEach(w=>x[prefixKey(w,y)]=x[y]),x),isUnitlessNumber);var domTransforms=/^(matrix|translate|scale|rotate|skew)/,pxTransforms=/^(translate)/,degTransforms=/^(rotate|skew)/,addUnit=(x,y)=>is.num(x)&&x!==0?x+y:x,isValueIdentity=(x,y)=>is.arr(x)?x.every(w=>isValueIdentity(w,y)):is.num(x)?x===y:parseFloat(x)===y,AnimatedStyle=class extends AnimatedObject{constructor({x,y,z:w,...C}){const P=[],O=[];(x||y||w)&&(P.push([x||0,y||0,w||0]),O.push($=>[`translate3d(${$.map(L=>addUnit(L,"px")).join(",")})`,isValueIdentity($,0)])),eachProp(C,($,L)=>{if(L==="transform")P.push([$||""]),O.push(D=>[D,D===""]);else if(domTransforms.test(L)){if(delete C[L],is.und($))return;const D=pxTransforms.test(L)?"px":degTransforms.test(L)?"deg":"";P.push(toArray($)),O.push(L==="rotate3d"?([B,U,k,H])=>[`rotate3d(${B},${U},${k},${addUnit(H,D)})`,isValueIdentity(H,0)]:B=>[`${L}(${B.map(U=>addUnit(U,D)).join(",")})`,isValueIdentity(B,L.startsWith("scale")?1:0)])}}),P.length&&(C.transform=new FluidTransform(P,O)),super(C)}},FluidTransform=class extends FluidValue{constructor(x,y){super(),this.inputs=x,this.transforms=y,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let x="",y=!0;return each(this.inputs,(w,C)=>{const P=getFluidValue(w[0]),[O,$]=this.transforms[C](is.arr(P)?P:w.map(getFluidValue));x+=" "+O,y=y&&$}),y?"none":x}observerAdded(x){x==1&&each(this.inputs,y=>each(y,w=>hasFluidValue(w)&&addFluidObserver(w,this)))}observerRemoved(x){x==0&&each(this.inputs,y=>each(y,w=>hasFluidValue(w)&&removeFluidObserver(w,this)))}eventObserved(x){x.type=="change"&&(this._value=null),callFluidObservers(this,x)}},primitives=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];globals_exports.assign({batchedUpdates:reactDomExports.unstable_batchedUpdates,createStringInterpolator:createStringInterpolator2,colors:colors2});var host=createHost(primitives,{applyAnimatedValues,createAnimatedStyle:x=>new AnimatedStyle(x),getComponentProps:({scrollTop:x,scrollLeft:y,...w})=>w}),animated=host.animated;function useFadeTransition(x){return useTransition(x,{from:{opacity:0,transform:"translate(0, -2%) scale(0.96)"},enter:{opacity:1,transform:"translate(0, 0) scale(1)"},leave:{opacity:0,transform:"translate(0, -2%) scale(0.96)"}})}const QspInput=({attrs:x,children:y})=>{const w=useAtomExports.useAtom(input$),[C,P,O]=useAttributes(x,"qsp-input"),$=useFadeTransition(w.isOpen);return jsxRuntimeExports.jsx(buttonContext.Provider,{value:{okAction:L=>{L.preventDefault(),input$.actions.finish()},cancelAction:L=>{L.preventDefault(),input$.actions.close()}},children:jsxRuntimeExports.jsx(Root$6,{open:w.isOpen,onOpenChange:()=>input$.actions.close(),children:$((L,D)=>D?jsxRuntimeExports.jsxs(Portal$3,{container:document.getElementById("portal-container"),children:[jsxRuntimeExports.jsx(Overlay,{className:"qsp-overlay"}),jsxRuntimeExports.jsx(Content$1,{forceMount:!0,asChild:!0,children:jsxRuntimeExports.jsx(animated.div,{style:L,className:"qsp-dialog-container",children:jsxRuntimeExports.jsx(C,{style:P,...O,children:jsxRuntimeExports.jsx("form",{onSubmit:B=>{B.preventDefault(),input$.actions.finish()},children:y})})})})]}):null)})})},QspInputContent=({attrs:x})=>{const{content:y,key:w}=useAtomExports.useAtom(parsedInputContent$),[C,P,{useFormat:O,...$}]=useAttributes(x,"qsp-input-content");return jsxRuntimeExports.jsx(Description$1,{asChild:!0,children:jsxRuntimeExports.jsx(QspScrollable,{attrs:{},children:reactExports.createElement(C,{style:P,...$,key:w},jsxRuntimeExports.jsx(Markup,{content:y}))})})},QspInputTag=({attrs:x})=>{const[,y,w]=useAttributes(x,"input","qsp-input-tag"),C=useAtomExports.useAtom(input$),P=O=>{input$.actions.enter(O.target.value)};return jsxRuntimeExports.jsx("input",{style:y,...w,type:"text",value:C.entered,onInput:P,autoFocus:!0})};function createCollection(x){const y=x+"CollectionProvider",[w,C]=createContextScope(y),[P,O]=w(y,{collectionRef:{current:null},itemMap:new Map}),$=Q=>{const{scope:Z,children:J}=Q,ne=React.useRef(null),oe=React.useRef(new Map).current;return jsxRuntimeExports.jsx(P,{scope:Z,itemMap:oe,collectionRef:ne,children:J})};$.displayName=y;const L=x+"CollectionSlot",D=createSlot(L),B=React.forwardRef((Q,Z)=>{const{scope:J,children:ne}=Q,oe=O(L,J),ae=useComposedRefs(Z,oe.collectionRef);return jsxRuntimeExports.jsx(D,{ref:ae,children:ne})});B.displayName=L;const U=x+"CollectionItemSlot",k="data-radix-collection-item",H=createSlot(U),W=React.forwardRef((Q,Z)=>{const{scope:J,children:ne,...oe}=Q,ae=React.useRef(null),ve=useComposedRefs(Z,ae),Te=O(U,J);return React.useEffect(()=>(Te.itemMap.set(ae,{ref:ae,...oe}),()=>void Te.itemMap.delete(ae))),jsxRuntimeExports.jsx(H,{[k]:"",ref:ve,children:ne})});W.displayName=U;function G(Q){const Z=O(x+"CollectionConsumer",Q);return React.useCallback(()=>{const ne=Z.collectionRef.current;if(!ne)return[];const oe=Array.from(ne.querySelectorAll(`[${k}]`));return Array.from(Z.itemMap.values()).sort((Te,re)=>oe.indexOf(Te.ref.current)-oe.indexOf(re.ref.current))},[Z.collectionRef,Z.itemMap])}return[{Provider:$,Slot:B,ItemSlot:W},G,C]}const sides=["top","right","bottom","left"],min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=x=>({x,y:x}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp(x,y,w){return max(x,min(y,w))}function evaluate(x,y){return typeof x=="function"?x(y):x}function getSide(x){return x.split("-")[0]}function getAlignment(x){return x.split("-")[1]}function getOppositeAxis(x){return x==="x"?"y":"x"}function getAxisLength(x){return x==="y"?"height":"width"}const yAxisSides=new Set(["top","bottom"]);function getSideAxis(x){return yAxisSides.has(getSide(x))?"y":"x"}function getAlignmentAxis(x){return getOppositeAxis(getSideAxis(x))}function getAlignmentSides(x,y,w){w===void 0&&(w=!1);const C=getAlignment(x),P=getAlignmentAxis(x),O=getAxisLength(P);let $=P==="x"?C===(w?"end":"start")?"right":"left":C==="start"?"bottom":"top";return y.reference[O]>y.floating[O]&&($=getOppositePlacement($)),[$,getOppositePlacement($)]}function getExpandedPlacements(x){const y=getOppositePlacement(x);return[getOppositeAlignmentPlacement(x),y,getOppositeAlignmentPlacement(y)]}function getOppositeAlignmentPlacement(x){return x.replace(/start|end/g,y=>oppositeAlignmentMap[y])}const lrPlacement=["left","right"],rlPlacement=["right","left"],tbPlacement=["top","bottom"],btPlacement=["bottom","top"];function getSideList(x,y,w){switch(x){case"top":case"bottom":return w?y?rlPlacement:lrPlacement:y?lrPlacement:rlPlacement;case"left":case"right":return y?tbPlacement:btPlacement;default:return[]}}function getOppositeAxisPlacements(x,y,w,C){const P=getAlignment(x);let O=getSideList(getSide(x),w==="start",C);return P&&(O=O.map($=>$+"-"+P),y&&(O=O.concat(O.map(getOppositeAlignmentPlacement)))),O}function getOppositePlacement(x){return x.replace(/left|right|bottom|top/g,y=>oppositeSideMap[y])}function expandPaddingObject(x){return{top:0,right:0,bottom:0,left:0,...x}}function getPaddingObject(x){return typeof x!="number"?expandPaddingObject(x):{top:x,right:x,bottom:x,left:x}}function rectToClientRect(x){const{x:y,y:w,width:C,height:P}=x;return{width:C,height:P,top:w,left:y,right:y+C,bottom:w+P,x:y,y:w}}function computeCoordsFromPlacement(x,y,w){let{reference:C,floating:P}=x;const O=getSideAxis(y),$=getAlignmentAxis(y),L=getAxisLength($),D=getSide(y),B=O==="y",U=C.x+C.width/2-P.width/2,k=C.y+C.height/2-P.height/2,H=C[L]/2-P[L]/2;let W;switch(D){case"top":W={x:U,y:C.y-P.height};break;case"bottom":W={x:U,y:C.y+C.height};break;case"right":W={x:C.x+C.width,y:k};break;case"left":W={x:C.x-P.width,y:k};break;default:W={x:C.x,y:C.y}}switch(getAlignment(y)){case"start":W[$]-=H*(w&&B?-1:1);break;case"end":W[$]+=H*(w&&B?-1:1);break}return W}const computePosition$1=async(x,y,w)=>{const{placement:C="bottom",strategy:P="absolute",middleware:O=[],platform:$}=w,L=O.filter(Boolean),D=await($.isRTL==null?void 0:$.isRTL(y));let B=await $.getElementRects({reference:x,floating:y,strategy:P}),{x:U,y:k}=computeCoordsFromPlacement(B,C,D),H=C,W={},G=0;for(let Q=0;Q<L.length;Q++){const{name:Z,fn:J}=L[Q],{x:ne,y:oe,data:ae,reset:ve}=await J({x:U,y:k,initialPlacement:C,placement:H,strategy:P,middlewareData:W,rects:B,platform:$,elements:{reference:x,floating:y}});U=ne??U,k=oe??k,W={...W,[Z]:{...W[Z],...ae}},ve&&G<=50&&(G++,typeof ve=="object"&&(ve.placement&&(H=ve.placement),ve.rects&&(B=ve.rects===!0?await $.getElementRects({reference:x,floating:y,strategy:P}):ve.rects),{x:U,y:k}=computeCoordsFromPlacement(B,H,D)),Q=-1)}return{x:U,y:k,placement:H,strategy:P,middlewareData:W}};async function detectOverflow(x,y){var w;y===void 0&&(y={});const{x:C,y:P,platform:O,rects:$,elements:L,strategy:D}=x,{boundary:B="clippingAncestors",rootBoundary:U="viewport",elementContext:k="floating",altBoundary:H=!1,padding:W=0}=evaluate(y,x),G=getPaddingObject(W),Z=L[H?k==="floating"?"reference":"floating":k],J=rectToClientRect(await O.getClippingRect({element:(w=await(O.isElement==null?void 0:O.isElement(Z)))==null||w?Z:Z.contextElement||await(O.getDocumentElement==null?void 0:O.getDocumentElement(L.floating)),boundary:B,rootBoundary:U,strategy:D})),ne=k==="floating"?{x:C,y:P,width:$.floating.width,height:$.floating.height}:$.reference,oe=await(O.getOffsetParent==null?void 0:O.getOffsetParent(L.floating)),ae=await(O.isElement==null?void 0:O.isElement(oe))?await(O.getScale==null?void 0:O.getScale(oe))||{x:1,y:1}:{x:1,y:1},ve=rectToClientRect(O.convertOffsetParentRelativeRectToViewportRelativeRect?await O.convertOffsetParentRelativeRectToViewportRelativeRect({elements:L,rect:ne,offsetParent:oe,strategy:D}):ne);return{top:(J.top-ve.top+G.top)/ae.y,bottom:(ve.bottom-J.bottom+G.bottom)/ae.y,left:(J.left-ve.left+G.left)/ae.x,right:(ve.right-J.right+G.right)/ae.x}}const arrow$3=x=>({name:"arrow",options:x,async fn(y){const{x:w,y:C,placement:P,rects:O,platform:$,elements:L,middlewareData:D}=y,{element:B,padding:U=0}=evaluate(x,y)||{};if(B==null)return{};const k=getPaddingObject(U),H={x:w,y:C},W=getAlignmentAxis(P),G=getAxisLength(W),Q=await $.getDimensions(B),Z=W==="y",J=Z?"top":"left",ne=Z?"bottom":"right",oe=Z?"clientHeight":"clientWidth",ae=O.reference[G]+O.reference[W]-H[W]-O.floating[G],ve=H[W]-O.reference[W],Te=await($.getOffsetParent==null?void 0:$.getOffsetParent(B));let re=Te?Te[oe]:0;(!re||!await($.isElement==null?void 0:$.isElement(Te)))&&(re=L.floating[oe]||O.floating[G]);const he=ae/2-ve/2,be=re/2-Q[G]/2-1,Le=min(k[J],be),qe=min(k[ne],be),Ye=Le,et=re-Q[G]-qe,je=re/2-Q[G]/2+he,Ke=clamp(Ye,je,et),Ve=!D.arrow&&getAlignment(P)!=null&&je!==Ke&&O.reference[G]/2-(je<Ye?Le:qe)-Q[G]/2<0,We=Ve?je<Ye?je-Ye:je-et:0;return{[W]:H[W]+We,data:{[W]:Ke,centerOffset:je-Ke-We,...Ve&&{alignmentOffset:We}},reset:Ve}}}),flip$2=function(x){return x===void 0&&(x={}),{name:"flip",options:x,async fn(y){var w,C;const{placement:P,middlewareData:O,rects:$,initialPlacement:L,platform:D,elements:B}=y,{mainAxis:U=!0,crossAxis:k=!0,fallbackPlacements:H,fallbackStrategy:W="bestFit",fallbackAxisSideDirection:G="none",flipAlignment:Q=!0,...Z}=evaluate(x,y);if((w=O.arrow)!=null&&w.alignmentOffset)return{};const J=getSide(P),ne=getSideAxis(L),oe=getSide(L)===L,ae=await(D.isRTL==null?void 0:D.isRTL(B.floating)),ve=H||(oe||!Q?[getOppositePlacement(L)]:getExpandedPlacements(L)),Te=G!=="none";!H&&Te&&ve.push(...getOppositeAxisPlacements(L,Q,G,ae));const re=[L,...ve],he=await detectOverflow(y,Z),be=[];let Le=((C=O.flip)==null?void 0:C.overflows)||[];if(U&&be.push(he[J]),k){const je=getAlignmentSides(P,$,ae);be.push(he[je[0]],he[je[1]])}if(Le=[...Le,{placement:P,overflows:be}],!be.every(je=>je<=0)){var qe,Ye;const je=(((qe=O.flip)==null?void 0:qe.index)||0)+1,Ke=re[je];if(Ke&&(!(k==="alignment"?ne!==getSideAxis(Ke):!1)||Le.every(we=>getSideAxis(we.placement)===ne?we.overflows[0]>0:!0)))return{data:{index:je,overflows:Le},reset:{placement:Ke}};let Ve=(Ye=Le.filter(We=>We.overflows[0]<=0).sort((We,we)=>We.overflows[1]-we.overflows[1])[0])==null?void 0:Ye.placement;if(!Ve)switch(W){case"bestFit":{var et;const We=(et=Le.filter(we=>{if(Te){const Oe=getSideAxis(we.placement);return Oe===ne||Oe==="y"}return!0}).map(we=>[we.placement,we.overflows.filter(Oe=>Oe>0).reduce((Oe,He)=>Oe+He,0)]).sort((we,Oe)=>we[1]-Oe[1])[0])==null?void 0:et[0];We&&(Ve=We);break}case"initialPlacement":Ve=L;break}if(P!==Ve)return{reset:{placement:Ve}}}return{}}}};function getSideOffsets(x,y){return{top:x.top-y.height,right:x.right-y.width,bottom:x.bottom-y.height,left:x.left-y.width}}function isAnySideFullyClipped(x){return sides.some(y=>x[y]>=0)}const hide$2=function(x){return x===void 0&&(x={}),{name:"hide",options:x,async fn(y){const{rects:w}=y,{strategy:C="referenceHidden",...P}=evaluate(x,y);switch(C){case"referenceHidden":{const O=await detectOverflow(y,{...P,elementContext:"reference"}),$=getSideOffsets(O,w.reference);return{data:{referenceHiddenOffsets:$,referenceHidden:isAnySideFullyClipped($)}}}case"escaped":{const O=await detectOverflow(y,{...P,altBoundary:!0}),$=getSideOffsets(O,w.floating);return{data:{escapedOffsets:$,escaped:isAnySideFullyClipped($)}}}default:return{}}}}},originSides=new Set(["left","top"]);async function convertValueToCoords(x,y){const{placement:w,platform:C,elements:P}=x,O=await(C.isRTL==null?void 0:C.isRTL(P.floating)),$=getSide(w),L=getAlignment(w),D=getSideAxis(w)==="y",B=originSides.has($)?-1:1,U=O&&D?-1:1,k=evaluate(y,x);let{mainAxis:H,crossAxis:W,alignmentAxis:G}=typeof k=="number"?{mainAxis:k,crossAxis:0,alignmentAxis:null}:{mainAxis:k.mainAxis||0,crossAxis:k.crossAxis||0,alignmentAxis:k.alignmentAxis};return L&&typeof G=="number"&&(W=L==="end"?G*-1:G),D?{x:W*U,y:H*B}:{x:H*B,y:W*U}}const offset$2=function(x){return x===void 0&&(x=0),{name:"offset",options:x,async fn(y){var w,C;const{x:P,y:O,placement:$,middlewareData:L}=y,D=await convertValueToCoords(y,x);return $===((w=L.offset)==null?void 0:w.placement)&&(C=L.arrow)!=null&&C.alignmentOffset?{}:{x:P+D.x,y:O+D.y,data:{...D,placement:$}}}}},shift$2=function(x){return x===void 0&&(x={}),{name:"shift",options:x,async fn(y){const{x:w,y:C,placement:P}=y,{mainAxis:O=!0,crossAxis:$=!1,limiter:L={fn:Z=>{let{x:J,y:ne}=Z;return{x:J,y:ne}}},...D}=evaluate(x,y),B={x:w,y:C},U=await detectOverflow(y,D),k=getSideAxis(getSide(P)),H=getOppositeAxis(k);let W=B[H],G=B[k];if(O){const Z=H==="y"?"top":"left",J=H==="y"?"bottom":"right",ne=W+U[Z],oe=W-U[J];W=clamp(ne,W,oe)}if($){const Z=k==="y"?"top":"left",J=k==="y"?"bottom":"right",ne=G+U[Z],oe=G-U[J];G=clamp(ne,G,oe)}const Q=L.fn({...y,[H]:W,[k]:G});return{...Q,data:{x:Q.x-w,y:Q.y-C,enabled:{[H]:O,[k]:$}}}}}},limitShift$2=function(x){return x===void 0&&(x={}),{options:x,fn(y){const{x:w,y:C,placement:P,rects:O,middlewareData:$}=y,{offset:L=0,mainAxis:D=!0,crossAxis:B=!0}=evaluate(x,y),U={x:w,y:C},k=getSideAxis(P),H=getOppositeAxis(k);let W=U[H],G=U[k];const Q=evaluate(L,y),Z=typeof Q=="number"?{mainAxis:Q,crossAxis:0}:{mainAxis:0,crossAxis:0,...Q};if(D){const oe=H==="y"?"height":"width",ae=O.reference[H]-O.floating[oe]+Z.mainAxis,ve=O.reference[H]+O.reference[oe]-Z.mainAxis;W<ae?W=ae:W>ve&&(W=ve)}if(B){var J,ne;const oe=H==="y"?"width":"height",ae=originSides.has(getSide(P)),ve=O.reference[k]-O.floating[oe]+(ae&&((J=$.offset)==null?void 0:J[k])||0)+(ae?0:Z.crossAxis),Te=O.reference[k]+O.reference[oe]+(ae?0:((ne=$.offset)==null?void 0:ne[k])||0)-(ae?Z.crossAxis:0);G<ve?G=ve:G>Te&&(G=Te)}return{[H]:W,[k]:G}}}},size$2=function(x){return x===void 0&&(x={}),{name:"size",options:x,async fn(y){var w,C;const{placement:P,rects:O,platform:$,elements:L}=y,{apply:D=()=>{},...B}=evaluate(x,y),U=await detectOverflow(y,B),k=getSide(P),H=getAlignment(P),W=getSideAxis(P)==="y",{width:G,height:Q}=O.floating;let Z,J;k==="top"||k==="bottom"?(Z=k,J=H===(await($.isRTL==null?void 0:$.isRTL(L.floating))?"start":"end")?"left":"right"):(J=k,Z=H==="end"?"top":"bottom");const ne=Q-U.top-U.bottom,oe=G-U.left-U.right,ae=min(Q-U[Z],ne),ve=min(G-U[J],oe),Te=!y.middlewareData.shift;let re=ae,he=ve;if((w=y.middlewareData.shift)!=null&&w.enabled.x&&(he=oe),(C=y.middlewareData.shift)!=null&&C.enabled.y&&(re=ne),Te&&!H){const Le=max(U.left,0),qe=max(U.right,0),Ye=max(U.top,0),et=max(U.bottom,0);W?he=G-2*(Le!==0||qe!==0?Le+qe:max(U.left,U.right)):re=Q-2*(Ye!==0||et!==0?Ye+et:max(U.top,U.bottom))}await D({...y,availableWidth:he,availableHeight:re});const be=await $.getDimensions(L.floating);return G!==be.width||Q!==be.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName(x){return isNode(x)?(x.nodeName||"").toLowerCase():"#document"}function getWindow(x){var y;return(x==null||(y=x.ownerDocument)==null?void 0:y.defaultView)||window}function getDocumentElement(x){var y;return(y=(isNode(x)?x.ownerDocument:x.document)||window.document)==null?void 0:y.documentElement}function isNode(x){return hasWindow()?x instanceof Node||x instanceof getWindow(x).Node:!1}function isElement(x){return hasWindow()?x instanceof Element||x instanceof getWindow(x).Element:!1}function isHTMLElement$1(x){return hasWindow()?x instanceof HTMLElement||x instanceof getWindow(x).HTMLElement:!1}function isShadowRoot(x){return!hasWindow()||typeof ShadowRoot>"u"?!1:x instanceof ShadowRoot||x instanceof getWindow(x).ShadowRoot}const invalidOverflowDisplayValues=new Set(["inline","contents"]);function isOverflowElement(x){const{overflow:y,overflowX:w,overflowY:C,display:P}=getComputedStyle$1(x);return/auto|scroll|overlay|hidden|clip/.test(y+C+w)&&!invalidOverflowDisplayValues.has(P)}const tableElements=new Set(["table","td","th"]);function isTableElement(x){return tableElements.has(getNodeName(x))}const topLayerSelectors=[":popover-open",":modal"];function isTopLayer(x){return topLayerSelectors.some(y=>{try{return x.matches(y)}catch{return!1}})}const transformProperties=["transform","translate","scale","rotate","perspective"],willChangeValues=["transform","translate","scale","rotate","perspective","filter"],containValues=["paint","layout","strict","content"];function isContainingBlock(x){const y=isWebKit(),w=isElement(x)?getComputedStyle$1(x):x;return transformProperties.some(C=>w[C]?w[C]!=="none":!1)||(w.containerType?w.containerType!=="normal":!1)||!y&&(w.backdropFilter?w.backdropFilter!=="none":!1)||!y&&(w.filter?w.filter!=="none":!1)||willChangeValues.some(C=>(w.willChange||"").includes(C))||containValues.some(C=>(w.contain||"").includes(C))}function getContainingBlock(x){let y=getParentNode(x);for(;isHTMLElement$1(y)&&!isLastTraversableNode(y);){if(isContainingBlock(y))return y;if(isTopLayer(y))return null;y=getParentNode(y)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const lastTraversableNodeNames=new Set(["html","body","#document"]);function isLastTraversableNode(x){return lastTraversableNodeNames.has(getNodeName(x))}function getComputedStyle$1(x){return getWindow(x).getComputedStyle(x)}function getNodeScroll(x){return isElement(x)?{scrollLeft:x.scrollLeft,scrollTop:x.scrollTop}:{scrollLeft:x.scrollX,scrollTop:x.scrollY}}function getParentNode(x){if(getNodeName(x)==="html")return x;const y=x.assignedSlot||x.parentNode||isShadowRoot(x)&&x.host||getDocumentElement(x);return isShadowRoot(y)?y.host:y}function getNearestOverflowAncestor(x){const y=getParentNode(x);return isLastTraversableNode(y)?x.ownerDocument?x.ownerDocument.body:x.body:isHTMLElement$1(y)&&isOverflowElement(y)?y:getNearestOverflowAncestor(y)}function getOverflowAncestors(x,y,w){var C;y===void 0&&(y=[]),w===void 0&&(w=!0);const P=getNearestOverflowAncestor(x),O=P===((C=x.ownerDocument)==null?void 0:C.body),$=getWindow(P);if(O){const L=getFrameElement($);return y.concat($,$.visualViewport||[],isOverflowElement(P)?P:[],L&&w?getOverflowAncestors(L):[])}return y.concat(P,getOverflowAncestors(P,[],w))}function getFrameElement(x){return x.parent&&Object.getPrototypeOf(x.parent)?x.frameElement:null}function getCssDimensions(x){const y=getComputedStyle$1(x);let w=parseFloat(y.width)||0,C=parseFloat(y.height)||0;const P=isHTMLElement$1(x),O=P?x.offsetWidth:w,$=P?x.offsetHeight:C,L=round(w)!==O||round(C)!==$;return L&&(w=O,C=$),{width:w,height:C,$:L}}function unwrapElement(x){return isElement(x)?x:x.contextElement}function getScale(x){const y=unwrapElement(x);if(!isHTMLElement$1(y))return createCoords(1);const w=y.getBoundingClientRect(),{width:C,height:P,$:O}=getCssDimensions(y);let $=(O?round(w.width):w.width)/C,L=(O?round(w.height):w.height)/P;return(!$||!Number.isFinite($))&&($=1),(!L||!Number.isFinite(L))&&(L=1),{x:$,y:L}}const noOffsets=createCoords(0);function getVisualOffsets(x){const y=getWindow(x);return!isWebKit()||!y.visualViewport?noOffsets:{x:y.visualViewport.offsetLeft,y:y.visualViewport.offsetTop}}function shouldAddVisualOffsets(x,y,w){return y===void 0&&(y=!1),!w||y&&w!==getWindow(x)?!1:y}function getBoundingClientRect(x,y,w,C){y===void 0&&(y=!1),w===void 0&&(w=!1);const P=x.getBoundingClientRect(),O=unwrapElement(x);let $=createCoords(1);y&&(C?isElement(C)&&($=getScale(C)):$=getScale(x));const L=shouldAddVisualOffsets(O,w,C)?getVisualOffsets(O):createCoords(0);let D=(P.left+L.x)/$.x,B=(P.top+L.y)/$.y,U=P.width/$.x,k=P.height/$.y;if(O){const H=getWindow(O),W=C&&isElement(C)?getWindow(C):C;let G=H,Q=getFrameElement(G);for(;Q&&C&&W!==G;){const Z=getScale(Q),J=Q.getBoundingClientRect(),ne=getComputedStyle$1(Q),oe=J.left+(Q.clientLeft+parseFloat(ne.paddingLeft))*Z.x,ae=J.top+(Q.clientTop+parseFloat(ne.paddingTop))*Z.y;D*=Z.x,B*=Z.y,U*=Z.x,k*=Z.y,D+=oe,B+=ae,G=getWindow(Q),Q=getFrameElement(G)}}return rectToClientRect({width:U,height:k,x:D,y:B})}function getWindowScrollBarX(x,y){const w=getNodeScroll(x).scrollLeft;return y?y.left+w:getBoundingClientRect(getDocumentElement(x)).left+w}function getHTMLOffset(x,y){const w=x.getBoundingClientRect(),C=w.left+y.scrollLeft-getWindowScrollBarX(x,w),P=w.top+y.scrollTop;return{x:C,y:P}}function convertOffsetParentRelativeRectToViewportRelativeRect(x){let{elements:y,rect:w,offsetParent:C,strategy:P}=x;const O=P==="fixed",$=getDocumentElement(C),L=y?isTopLayer(y.floating):!1;if(C===$||L&&O)return w;let D={scrollLeft:0,scrollTop:0},B=createCoords(1);const U=createCoords(0),k=isHTMLElement$1(C);if((k||!k&&!O)&&((getNodeName(C)!=="body"||isOverflowElement($))&&(D=getNodeScroll(C)),isHTMLElement$1(C))){const W=getBoundingClientRect(C);B=getScale(C),U.x=W.x+C.clientLeft,U.y=W.y+C.clientTop}const H=$&&!k&&!O?getHTMLOffset($,D):createCoords(0);return{width:w.width*B.x,height:w.height*B.y,x:w.x*B.x-D.scrollLeft*B.x+U.x+H.x,y:w.y*B.y-D.scrollTop*B.y+U.y+H.y}}function getClientRects(x){return Array.from(x.getClientRects())}function getDocumentRect(x){const y=getDocumentElement(x),w=getNodeScroll(x),C=x.ownerDocument.body,P=max(y.scrollWidth,y.clientWidth,C.scrollWidth,C.clientWidth),O=max(y.scrollHeight,y.clientHeight,C.scrollHeight,C.clientHeight);let $=-w.scrollLeft+getWindowScrollBarX(x);const L=-w.scrollTop;return getComputedStyle$1(C).direction==="rtl"&&($+=max(y.clientWidth,C.clientWidth)-P),{width:P,height:O,x:$,y:L}}const SCROLLBAR_MAX=25;function getViewportRect(x,y){const w=getWindow(x),C=getDocumentElement(x),P=w.visualViewport;let O=C.clientWidth,$=C.clientHeight,L=0,D=0;if(P){O=P.width,$=P.height;const U=isWebKit();(!U||U&&y==="fixed")&&(L=P.offsetLeft,D=P.offsetTop)}const B=getWindowScrollBarX(C);if(B<=0){const U=C.ownerDocument,k=U.body,H=getComputedStyle(k),W=U.compatMode==="CSS1Compat"&&parseFloat(H.marginLeft)+parseFloat(H.marginRight)||0,G=Math.abs(C.clientWidth-k.clientWidth-W);G<=SCROLLBAR_MAX&&(O-=G)}else B<=SCROLLBAR_MAX&&(O+=B);return{width:O,height:$,x:L,y:D}}const absoluteOrFixed=new Set(["absolute","fixed"]);function getInnerBoundingClientRect(x,y){const w=getBoundingClientRect(x,!0,y==="fixed"),C=w.top+x.clientTop,P=w.left+x.clientLeft,O=isHTMLElement$1(x)?getScale(x):createCoords(1),$=x.clientWidth*O.x,L=x.clientHeight*O.y,D=P*O.x,B=C*O.y;return{width:$,height:L,x:D,y:B}}function getClientRectFromClippingAncestor(x,y,w){let C;if(y==="viewport")C=getViewportRect(x,w);else if(y==="document")C=getDocumentRect(getDocumentElement(x));else if(isElement(y))C=getInnerBoundingClientRect(y,w);else{const P=getVisualOffsets(x);C={x:y.x-P.x,y:y.y-P.y,width:y.width,height:y.height}}return rectToClientRect(C)}function hasFixedPositionAncestor(x,y){const w=getParentNode(x);return w===y||!isElement(w)||isLastTraversableNode(w)?!1:getComputedStyle$1(w).position==="fixed"||hasFixedPositionAncestor(w,y)}function getClippingElementAncestors(x,y){const w=y.get(x);if(w)return w;let C=getOverflowAncestors(x,[],!1).filter(L=>isElement(L)&&getNodeName(L)!=="body"),P=null;const O=getComputedStyle$1(x).position==="fixed";let $=O?getParentNode(x):x;for(;isElement($)&&!isLastTraversableNode($);){const L=getComputedStyle$1($),D=isContainingBlock($);!D&&L.position==="fixed"&&(P=null),(O?!D&&!P:!D&&L.position==="static"&&!!P&&absoluteOrFixed.has(P.position)||isOverflowElement($)&&!D&&hasFixedPositionAncestor(x,$))?C=C.filter(U=>U!==$):P=L,$=getParentNode($)}return y.set(x,C),C}function getClippingRect(x){let{element:y,boundary:w,rootBoundary:C,strategy:P}=x;const $=[...w==="clippingAncestors"?isTopLayer(y)?[]:getClippingElementAncestors(y,this._c):[].concat(w),C],L=$[0],D=$.reduce((B,U)=>{const k=getClientRectFromClippingAncestor(y,U,P);return B.top=max(k.top,B.top),B.right=min(k.right,B.right),B.bottom=min(k.bottom,B.bottom),B.left=max(k.left,B.left),B},getClientRectFromClippingAncestor(y,L,P));return{width:D.right-D.left,height:D.bottom-D.top,x:D.left,y:D.top}}function getDimensions(x){const{width:y,height:w}=getCssDimensions(x);return{width:y,height:w}}function getRectRelativeToOffsetParent(x,y,w){const C=isHTMLElement$1(y),P=getDocumentElement(y),O=w==="fixed",$=getBoundingClientRect(x,!0,O,y);let L={scrollLeft:0,scrollTop:0};const D=createCoords(0);function B(){D.x=getWindowScrollBarX(P)}if(C||!C&&!O)if((getNodeName(y)!=="body"||isOverflowElement(P))&&(L=getNodeScroll(y)),C){const W=getBoundingClientRect(y,!0,O,y);D.x=W.x+y.clientLeft,D.y=W.y+y.clientTop}else P&&B();O&&!C&&P&&B();const U=P&&!C&&!O?getHTMLOffset(P,L):createCoords(0),k=$.left+L.scrollLeft-D.x-U.x,H=$.top+L.scrollTop-D.y-U.y;return{x:k,y:H,width:$.width,height:$.height}}function isStaticPositioned(x){return getComputedStyle$1(x).position==="static"}function getTrueOffsetParent(x,y){if(!isHTMLElement$1(x)||getComputedStyle$1(x).position==="fixed")return null;if(y)return y(x);let w=x.offsetParent;return getDocumentElement(x)===w&&(w=w.ownerDocument.body),w}function getOffsetParent(x,y){const w=getWindow(x);if(isTopLayer(x))return w;if(!isHTMLElement$1(x)){let P=getParentNode(x);for(;P&&!isLastTraversableNode(P);){if(isElement(P)&&!isStaticPositioned(P))return P;P=getParentNode(P)}return w}let C=getTrueOffsetParent(x,y);for(;C&&isTableElement(C)&&isStaticPositioned(C);)C=getTrueOffsetParent(C,y);return C&&isLastTraversableNode(C)&&isStaticPositioned(C)&&!isContainingBlock(C)?w:C||getContainingBlock(x)||w}const getElementRects=async function(x){const y=this.getOffsetParent||getOffsetParent,w=this.getDimensions,C=await w(x.floating);return{reference:getRectRelativeToOffsetParent(x.reference,await y(x.floating),x.strategy),floating:{x:0,y:0,width:C.width,height:C.height}}};function isRTL(x){return getComputedStyle$1(x).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function rectsAreEqual(x,y){return x.x===y.x&&x.y===y.y&&x.width===y.width&&x.height===y.height}function observeMove(x,y){let w=null,C;const P=getDocumentElement(x);function O(){var L;clearTimeout(C),(L=w)==null||L.disconnect(),w=null}function $(L,D){L===void 0&&(L=!1),D===void 0&&(D=1),O();const B=x.getBoundingClientRect(),{left:U,top:k,width:H,height:W}=B;if(L||y(),!H||!W)return;const G=floor(k),Q=floor(P.clientWidth-(U+H)),Z=floor(P.clientHeight-(k+W)),J=floor(U),oe={rootMargin:-G+"px "+-Q+"px "+-Z+"px "+-J+"px",threshold:max(0,min(1,D))||1};let ae=!0;function ve(Te){const re=Te[0].intersectionRatio;if(re!==D){if(!ae)return $();re?$(!1,re):C=setTimeout(()=>{$(!1,1e-7)},1e3)}re===1&&!rectsAreEqual(B,x.getBoundingClientRect())&&$(),ae=!1}try{w=new IntersectionObserver(ve,{...oe,root:P.ownerDocument})}catch{w=new IntersectionObserver(ve,oe)}w.observe(x)}return $(!0),O}function autoUpdate(x,y,w,C){C===void 0&&(C={});const{ancestorScroll:P=!0,ancestorResize:O=!0,elementResize:$=typeof ResizeObserver=="function",layoutShift:L=typeof IntersectionObserver=="function",animationFrame:D=!1}=C,B=unwrapElement(x),U=P||O?[...B?getOverflowAncestors(B):[],...getOverflowAncestors(y)]:[];U.forEach(J=>{P&&J.addEventListener("scroll",w,{passive:!0}),O&&J.addEventListener("resize",w)});const k=B&&L?observeMove(B,w):null;let H=-1,W=null;$&&(W=new ResizeObserver(J=>{let[ne]=J;ne&&ne.target===B&&W&&(W.unobserve(y),cancelAnimationFrame(H),H=requestAnimationFrame(()=>{var oe;(oe=W)==null||oe.observe(y)})),w()}),B&&!D&&W.observe(B),W.observe(y));let G,Q=D?getBoundingClientRect(x):null;D&&Z();function Z(){const J=getBoundingClientRect(x);Q&&!rectsAreEqual(Q,J)&&w(),Q=J,G=requestAnimationFrame(Z)}return w(),()=>{var J;U.forEach(ne=>{P&&ne.removeEventListener("scroll",w),O&&ne.removeEventListener("resize",w)}),k?.(),(J=W)==null||J.disconnect(),W=null,D&&cancelAnimationFrame(G)}}const offset$1=offset$2,shift$1=shift$2,flip$1=flip$2,size$1=size$2,hide$1=hide$2,arrow$2=arrow$3,limitShift$1=limitShift$2,computePosition=(x,y,w)=>{const C=new Map,P={platform,...w},O={...P.platform,_c:C};return computePosition$1(x,y,{...P,platform:O})};var isClient=typeof document<"u",noop$1=function x(){},index=isClient?reactExports.useLayoutEffect:noop$1;function deepEqual(x,y){if(x===y)return!0;if(typeof x!=typeof y)return!1;if(typeof x=="function"&&x.toString()===y.toString())return!0;let w,C,P;if(x&&y&&typeof x=="object"){if(Array.isArray(x)){if(w=x.length,w!==y.length)return!1;for(C=w;C--!==0;)if(!deepEqual(x[C],y[C]))return!1;return!0}if(P=Object.keys(x),w=P.length,w!==Object.keys(y).length)return!1;for(C=w;C--!==0;)if(!{}.hasOwnProperty.call(y,P[C]))return!1;for(C=w;C--!==0;){const O=P[C];if(!(O==="_owner"&&x.$$typeof)&&!deepEqual(x[O],y[O]))return!1}return!0}return x!==x&&y!==y}function getDPR(x){return typeof window>"u"?1:(x.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(x,y){const w=getDPR(x);return Math.round(y*w)/w}function useLatestRef(x){const y=reactExports.useRef(x);return index(()=>{y.current=x}),y}function useFloating(x){x===void 0&&(x={});const{placement:y="bottom",strategy:w="absolute",middleware:C=[],platform:P,elements:{reference:O,floating:$}={},transform:L=!0,whileElementsMounted:D,open:B}=x,[U,k]=reactExports.useState({x:0,y:0,strategy:w,placement:y,middlewareData:{},isPositioned:!1}),[H,W]=reactExports.useState(C);deepEqual(H,C)||W(C);const[G,Q]=reactExports.useState(null),[Z,J]=reactExports.useState(null),ne=reactExports.useCallback(we=>{we!==Te.current&&(Te.current=we,Q(we))},[]),oe=reactExports.useCallback(we=>{we!==re.current&&(re.current=we,J(we))},[]),ae=O||G,ve=$||Z,Te=reactExports.useRef(null),re=reactExports.useRef(null),he=reactExports.useRef(U),be=D!=null,Le=useLatestRef(D),qe=useLatestRef(P),Ye=useLatestRef(B),et=reactExports.useCallback(()=>{if(!Te.current||!re.current)return;const we={placement:y,strategy:w,middleware:H};qe.current&&(we.platform=qe.current),computePosition(Te.current,re.current,we).then(Oe=>{const He={...Oe,isPositioned:Ye.current!==!1};je.current&&!deepEqual(he.current,He)&&(he.current=He,reactDomExports.flushSync(()=>{k(He)}))})},[H,y,w,qe,Ye]);index(()=>{B===!1&&he.current.isPositioned&&(he.current.isPositioned=!1,k(we=>({...we,isPositioned:!1})))},[B]);const je=reactExports.useRef(!1);index(()=>(je.current=!0,()=>{je.current=!1}),[]),index(()=>{if(ae&&(Te.current=ae),ve&&(re.current=ve),ae&&ve){if(Le.current)return Le.current(ae,ve,et);et()}},[ae,ve,et,Le,be]);const Ke=reactExports.useMemo(()=>({reference:Te,floating:re,setReference:ne,setFloating:oe}),[ne,oe]),Ve=reactExports.useMemo(()=>({reference:ae,floating:ve}),[ae,ve]),We=reactExports.useMemo(()=>{const we={position:w,left:0,top:0};if(!Ve.floating)return we;const Oe=roundByDPR(Ve.floating,U.x),He=roundByDPR(Ve.floating,U.y);return L?{...we,transform:"translate("+Oe+"px, "+He+"px)",...getDPR(Ve.floating)>=1.5&&{willChange:"transform"}}:{position:w,left:Oe,top:He}},[w,L,Ve.floating,U.x,U.y]);return reactExports.useMemo(()=>({...U,update:et,refs:Ke,elements:Ve,floatingStyles:We}),[U,et,Ke,Ve,We])}const arrow$1=x=>{function y(w){return{}.hasOwnProperty.call(w,"current")}return{name:"arrow",options:x,fn(w){const{element:C,padding:P}=typeof x=="function"?x(w):x;return C&&y(C)?C.current!=null?arrow$2({element:C.current,padding:P}).fn(w):{}:C?arrow$2({element:C,padding:P}).fn(w):{}}}},offset=(x,y)=>({...offset$1(x),options:[x,y]}),shift=(x,y)=>({...shift$1(x),options:[x,y]}),limitShift=(x,y)=>({...limitShift$1(x),options:[x,y]}),flip=(x,y)=>({...flip$1(x),options:[x,y]}),size=(x,y)=>({...size$1(x),options:[x,y]}),hide=(x,y)=>({...hide$1(x),options:[x,y]}),arrow=(x,y)=>({...arrow$1(x),options:[x,y]});var NAME$1="Arrow",Arrow$1=reactExports.forwardRef((x,y)=>{const{children:w,width:C=10,height:P=5,...O}=x;return jsxRuntimeExports.jsx(Primitive.svg,{...O,ref:y,width:C,height:P,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:x.asChild?w:jsxRuntimeExports.jsx("polygon",{points:"0,0 30,0 15,10"})})});Arrow$1.displayName=NAME$1;var Root$4=Arrow$1;function useSize(x){const[y,w]=reactExports.useState(void 0);return useLayoutEffect2(()=>{if(x){w({width:x.offsetWidth,height:x.offsetHeight});const C=new ResizeObserver(P=>{if(!Array.isArray(P)||!P.length)return;const O=P[0];let $,L;if("borderBoxSize"in O){const D=O.borderBoxSize,B=Array.isArray(D)?D[0]:D;$=B.inlineSize,L=B.blockSize}else $=x.offsetWidth,L=x.offsetHeight;w({width:$,height:L})});return C.observe(x,{box:"border-box"}),()=>C.unobserve(x)}else w(void 0)},[x]),y}var POPPER_NAME="Popper",[createPopperContext,createPopperScope]=createContextScope(POPPER_NAME),[PopperProvider,usePopperContext]=createPopperContext(POPPER_NAME),Popper=x=>{const{__scopePopper:y,children:w}=x,[C,P]=reactExports.useState(null);return jsxRuntimeExports.jsx(PopperProvider,{scope:y,anchor:C,onAnchorChange:P,children:w})};Popper.displayName=POPPER_NAME;var ANCHOR_NAME$1="PopperAnchor",PopperAnchor=reactExports.forwardRef((x,y)=>{const{__scopePopper:w,virtualRef:C,...P}=x,O=usePopperContext(ANCHOR_NAME$1,w),$=reactExports.useRef(null),L=useComposedRefs(y,$),D=reactExports.useRef(null);return reactExports.useEffect(()=>{const B=D.current;D.current=C?.current||$.current,B!==D.current&&O.onAnchorChange(D.current)}),C?null:jsxRuntimeExports.jsx(Primitive.div,{...P,ref:L})});PopperAnchor.displayName=ANCHOR_NAME$1;var CONTENT_NAME$5="PopperContent",[PopperContentProvider,useContentContext]=createPopperContext(CONTENT_NAME$5),PopperContent=reactExports.forwardRef((x,y)=>{const{__scopePopper:w,side:C="bottom",sideOffset:P=0,align:O="center",alignOffset:$=0,arrowPadding:L=0,avoidCollisions:D=!0,collisionBoundary:B=[],collisionPadding:U=0,sticky:k="partial",hideWhenDetached:H=!1,updatePositionStrategy:W="optimized",onPlaced:G,...Q}=x,Z=usePopperContext(CONTENT_NAME$5,w),[J,ne]=reactExports.useState(null),oe=useComposedRefs(y,De=>ne(De)),[ae,ve]=reactExports.useState(null),Te=useSize(ae),re=Te?.width??0,he=Te?.height??0,be=C+(O!=="center"?"-"+O:""),Le=typeof U=="number"?U:{top:0,right:0,bottom:0,left:0,...U},qe=Array.isArray(B)?B:[B],Ye=qe.length>0,et={padding:Le,boundary:qe.filter(isNotNull),altBoundary:Ye},{refs:je,floatingStyles:Ke,placement:Ve,isPositioned:We,middlewareData:we}=useFloating({strategy:"fixed",placement:be,whileElementsMounted:(...De)=>autoUpdate(...De,{animationFrame:W==="always"}),elements:{reference:Z.anchor},middleware:[offset({mainAxis:P+he,alignmentAxis:$}),D&&shift({mainAxis:!0,crossAxis:!1,limiter:k==="partial"?limitShift():void 0,...et}),D&&flip({...et}),size({...et,apply:({elements:De,rects:it,availableWidth:Ue,availableHeight:Et})=>{const{width:Ot,height:_t}=it.reference,Ht=De.floating.style;Ht.setProperty("--radix-popper-available-width",`${Ue}px`),Ht.setProperty("--radix-popper-available-height",`${Et}px`),Ht.setProperty("--radix-popper-anchor-width",`${Ot}px`),Ht.setProperty("--radix-popper-anchor-height",`${_t}px`)}}),ae&&arrow({element:ae,padding:L}),transformOrigin({arrowWidth:re,arrowHeight:he}),H&&hide({strategy:"referenceHidden",...et})]}),[Oe,He]=getSideAndAlignFromPlacement(Ve),ie=useCallbackRef$1(G);useLayoutEffect2(()=>{We&&ie?.()},[We,ie]);const Re=we.arrow?.x,Xe=we.arrow?.y,Ze=we.arrow?.centerOffset!==0,[st,dt]=reactExports.useState();return useLayoutEffect2(()=>{J&&dt(window.getComputedStyle(J).zIndex)},[J]),jsxRuntimeExports.jsx("div",{ref:je.setFloating,"data-radix-popper-content-wrapper":"",style:{...Ke,transform:We?Ke.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:st,"--radix-popper-transform-origin":[we.transformOrigin?.x,we.transformOrigin?.y].join(" "),...we.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:x.dir,children:jsxRuntimeExports.jsx(PopperContentProvider,{scope:w,placedSide:Oe,onArrowChange:ve,arrowX:Re,arrowY:Xe,shouldHideArrow:Ze,children:jsxRuntimeExports.jsx(Primitive.div,{"data-side":Oe,"data-align":He,...Q,ref:oe,style:{...Q.style,animation:We?void 0:"none"}})})})});PopperContent.displayName=CONTENT_NAME$5;var ARROW_NAME$4="PopperArrow",OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow=reactExports.forwardRef(function x(y,w){const{__scopePopper:C,...P}=y,O=useContentContext(ARROW_NAME$4,C),$=OPPOSITE_SIDE[O.placedSide];return jsxRuntimeExports.jsx("span",{ref:O.onArrowChange,style:{position:"absolute",left:O.arrowX,top:O.arrowY,[$]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[O.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[O.placedSide],visibility:O.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Root$4,{...P,ref:w,style:{...P.style,display:"block"}})})});PopperArrow.displayName=ARROW_NAME$4;function isNotNull(x){return x!==null}var transformOrigin=x=>({name:"transformOrigin",options:x,fn(y){const{placement:w,rects:C,middlewareData:P}=y,$=P.arrow?.centerOffset!==0,L=$?0:x.arrowWidth,D=$?0:x.arrowHeight,[B,U]=getSideAndAlignFromPlacement(w),k={start:"0%",center:"50%",end:"100%"}[U],H=(P.arrow?.x??0)+L/2,W=(P.arrow?.y??0)+D/2;let G="",Q="";return B==="bottom"?(G=$?k:`${H}px`,Q=`${-D}px`):B==="top"?(G=$?k:`${H}px`,Q=`${C.floating.height+D}px`):B==="right"?(G=`${-D}px`,Q=$?k:`${W}px`):B==="left"&&(G=`${C.floating.width+D}px`,Q=$?k:`${W}px`),{data:{x:G,y:Q}}}});function getSideAndAlignFromPlacement(x){const[y,w="center"]=x.split("-");return[y,w]}var Root2$4=Popper,Anchor=PopperAnchor,Content=PopperContent,Arrow=PopperArrow,ENTRY_FOCUS="rovingFocusGroup.onEntryFocus",EVENT_OPTIONS={bubbles:!1,cancelable:!0},GROUP_NAME$3="RovingFocusGroup",[Collection$4,useCollection$4,createCollectionScope$4]=createCollection(GROUP_NAME$3),[createRovingFocusGroupContext,createRovingFocusGroupScope]=createContextScope(GROUP_NAME$3,[createCollectionScope$4]),[RovingFocusProvider,useRovingFocusContext]=createRovingFocusGroupContext(GROUP_NAME$3),RovingFocusGroup=reactExports.forwardRef((x,y)=>jsxRuntimeExports.jsx(Collection$4.Provider,{scope:x.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(Collection$4.Slot,{scope:x.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(RovingFocusGroupImpl,{...x,ref:y})})}));RovingFocusGroup.displayName=GROUP_NAME$3;var RovingFocusGroupImpl=reactExports.forwardRef((x,y)=>{const{__scopeRovingFocusGroup:w,orientation:C,loop:P=!1,dir:O,currentTabStopId:$,defaultCurrentTabStopId:L,onCurrentTabStopIdChange:D,onEntryFocus:B,preventScrollOnEntryFocus:U=!1,...k}=x,H=reactExports.useRef(null),W=useComposedRefs(y,H),G=useDirection(O),[Q,Z]=useControllableState({prop:$,defaultProp:L??null,onChange:D,caller:GROUP_NAME$3}),[J,ne]=reactExports.useState(!1),oe=useCallbackRef$1(B),ae=useCollection$4(w),ve=reactExports.useRef(!1),[Te,re]=reactExports.useState(0);return reactExports.useEffect(()=>{const he=H.current;if(he)return he.addEventListener(ENTRY_FOCUS,oe),()=>he.removeEventListener(ENTRY_FOCUS,oe)},[oe]),jsxRuntimeExports.jsx(RovingFocusProvider,{scope:w,orientation:C,dir:G,loop:P,currentTabStopId:Q,onItemFocus:reactExports.useCallback(he=>Z(he),[Z]),onItemShiftTab:reactExports.useCallback(()=>ne(!0),[]),onFocusableItemAdd:reactExports.useCallback(()=>re(he=>he+1),[]),onFocusableItemRemove:reactExports.useCallback(()=>re(he=>he-1),[]),children:jsxRuntimeExports.jsx(Primitive.div,{tabIndex:J||Te===0?-1:0,"data-orientation":C,...k,ref:W,style:{outline:"none",...x.style},onMouseDown:composeEventHandlers(x.onMouseDown,()=>{ve.current=!0}),onFocus:composeEventHandlers(x.onFocus,he=>{const be=!ve.current;if(he.target===he.currentTarget&&be&&!J){const Le=new CustomEvent(ENTRY_FOCUS,EVENT_OPTIONS);if(he.currentTarget.dispatchEvent(Le),!Le.defaultPrevented){const qe=ae().filter(Ve=>Ve.focusable),Ye=qe.find(Ve=>Ve.active),et=qe.find(Ve=>Ve.id===Q),Ke=[Ye,et,...qe].filter(Boolean).map(Ve=>Ve.ref.current);focusFirst$2(Ke,U)}}ve.current=!1}),onBlur:composeEventHandlers(x.onBlur,()=>ne(!1))})})}),ITEM_NAME$3="RovingFocusGroupItem",RovingFocusGroupItem=reactExports.forwardRef((x,y)=>{const{__scopeRovingFocusGroup:w,focusable:C=!0,active:P=!1,tabStopId:O,children:$,...L}=x,D=useId(),B=O||D,U=useRovingFocusContext(ITEM_NAME$3,w),k=U.currentTabStopId===B,H=useCollection$4(w),{onFocusableItemAdd:W,onFocusableItemRemove:G,currentTabStopId:Q}=U;return reactExports.useEffect(()=>{if(C)return W(),()=>G()},[C,W,G]),jsxRuntimeExports.jsx(Collection$4.ItemSlot,{scope:w,id:B,focusable:C,active:P,children:jsxRuntimeExports.jsx(Primitive.span,{tabIndex:k?0:-1,"data-orientation":U.orientation,...L,ref:y,onMouseDown:composeEventHandlers(x.onMouseDown,Z=>{C?U.onItemFocus(B):Z.preventDefault()}),onFocus:composeEventHandlers(x.onFocus,()=>U.onItemFocus(B)),onKeyDown:composeEventHandlers(x.onKeyDown,Z=>{if(Z.key==="Tab"&&Z.shiftKey){U.onItemShiftTab();return}if(Z.target!==Z.currentTarget)return;const J=getFocusIntent(Z,U.orientation,U.dir);if(J!==void 0){if(Z.metaKey||Z.ctrlKey||Z.altKey||Z.shiftKey)return;Z.preventDefault();let oe=H().filter(ae=>ae.focusable).map(ae=>ae.ref.current);if(J==="last")oe.reverse();else if(J==="prev"||J==="next"){J==="prev"&&oe.reverse();const ae=oe.indexOf(Z.currentTarget);oe=U.loop?wrapArray$2(oe,ae+1):oe.slice(ae+1)}setTimeout(()=>focusFirst$2(oe))}}),children:typeof $=="function"?$({isCurrentTabStop:k,hasTabStop:Q!=null}):$})})});RovingFocusGroupItem.displayName=ITEM_NAME$3;var MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function getDirectionAwareKey(x,y){return y!=="rtl"?x:x==="ArrowLeft"?"ArrowRight":x==="ArrowRight"?"ArrowLeft":x}function getFocusIntent(x,y,w){const C=getDirectionAwareKey(x.key,w);if(!(y==="vertical"&&["ArrowLeft","ArrowRight"].includes(C))&&!(y==="horizontal"&&["ArrowUp","ArrowDown"].includes(C)))return MAP_KEY_TO_FOCUS_INTENT[C]}function focusFirst$2(x,y=!1){const w=document.activeElement;for(const C of x)if(C===w||(C.focus({preventScroll:y}),document.activeElement!==w))return}function wrapArray$2(x,y){return x.map((w,C)=>x[(y+C)%x.length])}var Root$3=RovingFocusGroup,Item$1=RovingFocusGroupItem,SELECTION_KEYS$1=["Enter"," "],FIRST_KEYS=["ArrowDown","PageUp","Home"],LAST_KEYS=["ArrowUp","PageDown","End"],FIRST_LAST_KEYS=[...FIRST_KEYS,...LAST_KEYS],SUB_OPEN_KEYS={ltr:[...SELECTION_KEYS$1,"ArrowRight"],rtl:[...SELECTION_KEYS$1,"ArrowLeft"]},SUB_CLOSE_KEYS={ltr:["ArrowLeft"],rtl:["ArrowRight"]},MENU_NAME="Menu",[Collection$3,useCollection$3,createCollectionScope$3]=createCollection(MENU_NAME),[createMenuContext,createMenuScope]=createContextScope(MENU_NAME,[createCollectionScope$3,createPopperScope,createRovingFocusGroupScope]),usePopperScope$2=createPopperScope(),useRovingFocusGroupScope=createRovingFocusGroupScope(),[MenuProvider,useMenuContext]=createMenuContext(MENU_NAME),[MenuRootProvider,useMenuRootContext]=createMenuContext(MENU_NAME),Menu=x=>{const{__scopeMenu:y,open:w=!1,children:C,dir:P,onOpenChange:O,modal:$=!0}=x,L=usePopperScope$2(y),[D,B]=reactExports.useState(null),U=reactExports.useRef(!1),k=useCallbackRef$1(O),H=useDirection(P);return reactExports.useEffect(()=>{const W=()=>{U.current=!0,document.addEventListener("pointerdown",G,{capture:!0,once:!0}),document.addEventListener("pointermove",G,{capture:!0,once:!0})},G=()=>U.current=!1;return document.addEventListener("keydown",W,{capture:!0}),()=>{document.removeEventListener("keydown",W,{capture:!0}),document.removeEventListener("pointerdown",G,{capture:!0}),document.removeEventListener("pointermove",G,{capture:!0})}},[]),jsxRuntimeExports.jsx(Root2$4,{...L,children:jsxRuntimeExports.jsx(MenuProvider,{scope:y,open:w,onOpenChange:k,content:D,onContentChange:B,children:jsxRuntimeExports.jsx(MenuRootProvider,{scope:y,onClose:reactExports.useCallback(()=>k(!1),[k]),isUsingKeyboardRef:U,dir:H,modal:$,children:C})})})};Menu.displayName=MENU_NAME;var ANCHOR_NAME="MenuAnchor",MenuAnchor=reactExports.forwardRef((x,y)=>{const{__scopeMenu:w,...C}=x,P=usePopperScope$2(w);return jsxRuntimeExports.jsx(Anchor,{...P,...C,ref:y})});MenuAnchor.displayName=ANCHOR_NAME;var PORTAL_NAME$4="MenuPortal",[PortalProvider$1,usePortalContext$1]=createMenuContext(PORTAL_NAME$4,{forceMount:void 0}),MenuPortal=x=>{const{__scopeMenu:y,forceMount:w,children:C,container:P}=x,O=useMenuContext(PORTAL_NAME$4,y);return jsxRuntimeExports.jsx(PortalProvider$1,{scope:y,forceMount:w,children:jsxRuntimeExports.jsx(Presence,{present:w||O.open,children:jsxRuntimeExports.jsx(Portal$4,{asChild:!0,container:P,children:C})})})};MenuPortal.displayName=PORTAL_NAME$4;var CONTENT_NAME$4="MenuContent",[MenuContentProvider,useMenuContentContext]=createMenuContext(CONTENT_NAME$4),MenuContent=reactExports.forwardRef((x,y)=>{const w=usePortalContext$1(CONTENT_NAME$4,x.__scopeMenu),{forceMount:C=w.forceMount,...P}=x,O=useMenuContext(CONTENT_NAME$4,x.__scopeMenu),$=useMenuRootContext(CONTENT_NAME$4,x.__scopeMenu);return jsxRuntimeExports.jsx(Collection$3.Provider,{scope:x.__scopeMenu,children:jsxRuntimeExports.jsx(Presence,{present:C||O.open,children:jsxRuntimeExports.jsx(Collection$3.Slot,{scope:x.__scopeMenu,children:$.modal?jsxRuntimeExports.jsx(MenuRootContentModal,{...P,ref:y}):jsxRuntimeExports.jsx(MenuRootContentNonModal,{...P,ref:y})})})})}),MenuRootContentModal=reactExports.forwardRef((x,y)=>{const w=useMenuContext(CONTENT_NAME$4,x.__scopeMenu),C=reactExports.useRef(null),P=useComposedRefs(y,C);return reactExports.useEffect(()=>{const O=C.current;if(O)return hideOthers(O)},[]),jsxRuntimeExports.jsx(MenuContentImpl,{...x,ref:P,trapFocus:w.open,disableOutsidePointerEvents:w.open,disableOutsideScroll:!0,onFocusOutside:composeEventHandlers(x.onFocusOutside,O=>O.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>w.onOpenChange(!1)})}),MenuRootContentNonModal=reactExports.forwardRef((x,y)=>{const w=useMenuContext(CONTENT_NAME$4,x.__scopeMenu);return jsxRuntimeExports.jsx(MenuContentImpl,{...x,ref:y,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>w.onOpenChange(!1)})}),Slot$1=createSlot("MenuContent.ScrollLock"),MenuContentImpl=reactExports.forwardRef((x,y)=>{const{__scopeMenu:w,loop:C=!1,trapFocus:P,onOpenAutoFocus:O,onCloseAutoFocus:$,disableOutsidePointerEvents:L,onEntryFocus:D,onEscapeKeyDown:B,onPointerDownOutside:U,onFocusOutside:k,onInteractOutside:H,onDismiss:W,disableOutsideScroll:G,...Q}=x,Z=useMenuContext(CONTENT_NAME$4,w),J=useMenuRootContext(CONTENT_NAME$4,w),ne=usePopperScope$2(w),oe=useRovingFocusGroupScope(w),ae=useCollection$3(w),[ve,Te]=reactExports.useState(null),re=reactExports.useRef(null),he=useComposedRefs(y,re,Z.onContentChange),be=reactExports.useRef(0),Le=reactExports.useRef(""),qe=reactExports.useRef(0),Ye=reactExports.useRef(null),et=reactExports.useRef("right"),je=reactExports.useRef(0),Ke=G?ReactRemoveScroll:reactExports.Fragment,Ve=G?{as:Slot$1,allowPinchZoom:!0}:void 0,We=Oe=>{const He=Le.current+Oe,ie=ae().filter(De=>!De.disabled),Re=document.activeElement,Xe=ie.find(De=>De.ref.current===Re)?.textValue,Ze=ie.map(De=>De.textValue),st=getNextMatch(Ze,He,Xe),dt=ie.find(De=>De.textValue===st)?.ref.current;(function De(it){Le.current=it,window.clearTimeout(be.current),it!==""&&(be.current=window.setTimeout(()=>De(""),1e3))})(He),dt&&setTimeout(()=>dt.focus())};reactExports.useEffect(()=>()=>window.clearTimeout(be.current),[]),useFocusGuards();const we=reactExports.useCallback(Oe=>et.current===Ye.current?.side&&isPointerInGraceArea(Oe,Ye.current?.area),[]);return jsxRuntimeExports.jsx(MenuContentProvider,{scope:w,searchRef:Le,onItemEnter:reactExports.useCallback(Oe=>{we(Oe)&&Oe.preventDefault()},[we]),onItemLeave:reactExports.useCallback(Oe=>{we(Oe)||(re.current?.focus(),Te(null))},[we]),onTriggerLeave:reactExports.useCallback(Oe=>{we(Oe)&&Oe.preventDefault()},[we]),pointerGraceTimerRef:qe,onPointerGraceIntentChange:reactExports.useCallback(Oe=>{Ye.current=Oe},[]),children:jsxRuntimeExports.jsx(Ke,{...Ve,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:P,onMountAutoFocus:composeEventHandlers(O,Oe=>{Oe.preventDefault(),re.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:$,children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:L,onEscapeKeyDown:B,onPointerDownOutside:U,onFocusOutside:k,onInteractOutside:H,onDismiss:W,children:jsxRuntimeExports.jsx(Root$3,{asChild:!0,...oe,dir:J.dir,orientation:"vertical",loop:C,currentTabStopId:ve,onCurrentTabStopIdChange:Te,onEntryFocus:composeEventHandlers(D,Oe=>{J.isUsingKeyboardRef.current||Oe.preventDefault()}),preventScrollOnEntryFocus:!0,children:jsxRuntimeExports.jsx(Content,{role:"menu","aria-orientation":"vertical","data-state":getOpenState(Z.open),"data-radix-menu-content":"",dir:J.dir,...ne,...Q,ref:he,style:{outline:"none",...Q.style},onKeyDown:composeEventHandlers(Q.onKeyDown,Oe=>{const ie=Oe.target.closest("[data-radix-menu-content]")===Oe.currentTarget,Re=Oe.ctrlKey||Oe.altKey||Oe.metaKey,Xe=Oe.key.length===1;ie&&(Oe.key==="Tab"&&Oe.preventDefault(),!Re&&Xe&&We(Oe.key));const Ze=re.current;if(Oe.target!==Ze||!FIRST_LAST_KEYS.includes(Oe.key))return;Oe.preventDefault();const dt=ae().filter(De=>!De.disabled).map(De=>De.ref.current);LAST_KEYS.includes(Oe.key)&&dt.reverse(),focusFirst$1(dt)}),onBlur:composeEventHandlers(x.onBlur,Oe=>{Oe.currentTarget.contains(Oe.target)||(window.clearTimeout(be.current),Le.current="")}),onPointerMove:composeEventHandlers(x.onPointerMove,whenMouse(Oe=>{const He=Oe.target,ie=je.current!==Oe.clientX;if(Oe.currentTarget.contains(He)&&ie){const Re=Oe.clientX>je.current?"right":"left";et.current=Re,je.current=Oe.clientX}}))})})})})})})});MenuContent.displayName=CONTENT_NAME$4;var GROUP_NAME$2="MenuGroup",MenuGroup=reactExports.forwardRef((x,y)=>{const{__scopeMenu:w,...C}=x;return jsxRuntimeExports.jsx(Primitive.div,{role:"group",...C,ref:y})});MenuGroup.displayName=GROUP_NAME$2;var LABEL_NAME$2="MenuLabel",MenuLabel=reactExports.forwardRef((x,y)=>{const{__scopeMenu:w,...C}=x;return jsxRuntimeExports.jsx(Primitive.div,{...C,ref:y})});MenuLabel.displayName=LABEL_NAME$2;var ITEM_NAME$2="MenuItem",ITEM_SELECT="menu.itemSelect",MenuItem=reactExports.forwardRef((x,y)=>{const{disabled:w=!1,onSelect:C,...P}=x,O=reactExports.useRef(null),$=useMenuRootContext(ITEM_NAME$2,x.__scopeMenu),L=useMenuContentContext(ITEM_NAME$2,x.__scopeMenu),D=useComposedRefs(y,O),B=reactExports.useRef(!1),U=()=>{const k=O.current;if(!w&&k){const H=new CustomEvent(ITEM_SELECT,{bubbles:!0,cancelable:!0});k.addEventListener(ITEM_SELECT,W=>C?.(W),{once:!0}),dispatchDiscreteCustomEvent(k,H),H.defaultPrevented?B.current=!1:$.onClose()}};return jsxRuntimeExports.jsx(MenuItemImpl,{...P,ref:D,disabled:w,onClick:composeEventHandlers(x.onClick,U),onPointerDown:k=>{x.onPointerDown?.(k),B.current=!0},onPointerUp:composeEventHandlers(x.onPointerUp,k=>{B.current||k.currentTarget?.click()}),onKeyDown:composeEventHandlers(x.onKeyDown,k=>{const H=L.searchRef.current!=="";w||H&&k.key===" "||SELECTION_KEYS$1.includes(k.key)&&(k.currentTarget.click(),k.preventDefault())})})});MenuItem.displayName=ITEM_NAME$2;var MenuItemImpl=reactExports.forwardRef((x,y)=>{const{__scopeMenu:w,disabled:C=!1,textValue:P,...O}=x,$=useMenuContentContext(ITEM_NAME$2,w),L=useRovingFocusGroupScope(w),D=reactExports.useRef(null),B=useComposedRefs(y,D),[U,k]=reactExports.useState(!1),[H,W]=reactExports.useState("");return reactExports.useEffect(()=>{const G=D.current;G&&W((G.textContent??"").trim())},[O.children]),jsxRuntimeExports.jsx(Collection$3.ItemSlot,{scope:w,disabled:C,textValue:P??H,children:jsxRuntimeExports.jsx(Item$1,{asChild:!0,...L,focusable:!C,children:jsxRuntimeExports.jsx(Primitive.div,{role:"menuitem","data-highlighted":U?"":void 0,"aria-disabled":C||void 0,"data-disabled":C?"":void 0,...O,ref:B,onPointerMove:composeEventHandlers(x.onPointerMove,whenMouse(G=>{C?$.onItemLeave(G):($.onItemEnter(G),G.defaultPrevented||G.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:composeEventHandlers(x.onPointerLeave,whenMouse(G=>$.onItemLeave(G))),onFocus:composeEventHandlers(x.onFocus,()=>k(!0)),onBlur:composeEventHandlers(x.onBlur,()=>k(!1))})})})}),CHECKBOX_ITEM_NAME$1="MenuCheckboxItem",MenuCheckboxItem=reactExports.forwardRef((x,y)=>{const{checked:w=!1,onCheckedChange:C,...P}=x;return jsxRuntimeExports.jsx(ItemIndicatorProvider,{scope:x.__scopeMenu,checked:w,children:jsxRuntimeExports.jsx(MenuItem,{role:"menuitemcheckbox","aria-checked":isIndeterminate(w)?"mixed":w,...P,ref:y,"data-state":getCheckedState(w),onSelect:composeEventHandlers(P.onSelect,()=>C?.(isIndeterminate(w)?!0:!w),{checkForDefaultPrevented:!1})})})});MenuCheckboxItem.displayName=CHECKBOX_ITEM_NAME$1;var RADIO_GROUP_NAME$1="MenuRadioGroup",[RadioGroupProvider,useRadioGroupContext]=createMenuContext(RADIO_GROUP_NAME$1,{value:void 0,onValueChange:()=>{}}),MenuRadioGroup=reactExports.forwardRef((x,y)=>{const{value:w,onValueChange:C,...P}=x,O=useCallbackRef$1(C);return jsxRuntimeExports.jsx(RadioGroupProvider,{scope:x.__scopeMenu,value:w,onValueChange:O,children:jsxRuntimeExports.jsx(MenuGroup,{...P,ref:y})})});MenuRadioGroup.displayName=RADIO_GROUP_NAME$1;var RADIO_ITEM_NAME$1="MenuRadioItem",MenuRadioItem=reactExports.forwardRef((x,y)=>{const{value:w,...C}=x,P=useRadioGroupContext(RADIO_ITEM_NAME$1,x.__scopeMenu),O=w===P.value;return jsxRuntimeExports.jsx(ItemIndicatorProvider,{scope:x.__scopeMenu,checked:O,children:jsxRuntimeExports.jsx(MenuItem,{role:"menuitemradio","aria-checked":O,...C,ref:y,"data-state":getCheckedState(O),onSelect:composeEventHandlers(C.onSelect,()=>P.onValueChange?.(w),{checkForDefaultPrevented:!1})})})});MenuRadioItem.displayName=RADIO_ITEM_NAME$1;var ITEM_INDICATOR_NAME$1="MenuItemIndicator",[ItemIndicatorProvider,useItemIndicatorContext]=createMenuContext(ITEM_INDICATOR_NAME$1,{checked:!1}),MenuItemIndicator=reactExports.forwardRef((x,y)=>{const{__scopeMenu:w,forceMount:C,...P}=x,O=useItemIndicatorContext(ITEM_INDICATOR_NAME$1,w);return jsxRuntimeExports.jsx(Presence,{present:C||isIndeterminate(O.checked)||O.checked===!0,children:jsxRuntimeExports.jsx(Primitive.span,{...P,ref:y,"data-state":getCheckedState(O.checked)})})});MenuItemIndicator.displayName=ITEM_INDICATOR_NAME$1;var SEPARATOR_NAME$2="MenuSeparator",MenuSeparator=reactExports.forwardRef((x,y)=>{const{__scopeMenu:w,...C}=x;return jsxRuntimeExports.jsx(Primitive.div,{role:"separator","aria-orientation":"horizontal",...C,ref:y})});MenuSeparator.displayName=SEPARATOR_NAME$2;var ARROW_NAME$3="MenuArrow",MenuArrow=reactExports.forwardRef((x,y)=>{const{__scopeMenu:w,...C}=x,P=usePopperScope$2(w);return jsxRuntimeExports.jsx(Arrow,{...P,...C,ref:y})});MenuArrow.displayName=ARROW_NAME$3;var SUB_NAME="MenuSub",[MenuSubProvider,useMenuSubContext]=createMenuContext(SUB_NAME),SUB_TRIGGER_NAME$1="MenuSubTrigger",MenuSubTrigger=reactExports.forwardRef((x,y)=>{const w=useMenuContext(SUB_TRIGGER_NAME$1,x.__scopeMenu),C=useMenuRootContext(SUB_TRIGGER_NAME$1,x.__scopeMenu),P=useMenuSubContext(SUB_TRIGGER_NAME$1,x.__scopeMenu),O=useMenuContentContext(SUB_TRIGGER_NAME$1,x.__scopeMenu),$=reactExports.useRef(null),{pointerGraceTimerRef:L,onPointerGraceIntentChange:D}=O,B={__scopeMenu:x.__scopeMenu},U=reactExports.useCallback(()=>{$.current&&window.clearTimeout($.current),$.current=null},[]);return reactExports.useEffect(()=>U,[U]),reactExports.useEffect(()=>{const k=L.current;return()=>{window.clearTimeout(k),D(null)}},[L,D]),jsxRuntimeExports.jsx(MenuAnchor,{asChild:!0,...B,children:jsxRuntimeExports.jsx(MenuItemImpl,{id:P.triggerId,"aria-haspopup":"menu","aria-expanded":w.open,"aria-controls":P.contentId,"data-state":getOpenState(w.open),...x,ref:composeRefs(y,P.onTriggerChange),onClick:k=>{x.onClick?.(k),!(x.disabled||k.defaultPrevented)&&(k.currentTarget.focus(),w.open||w.onOpenChange(!0))},onPointerMove:composeEventHandlers(x.onPointerMove,whenMouse(k=>{O.onItemEnter(k),!k.defaultPrevented&&!x.disabled&&!w.open&&!$.current&&(O.onPointerGraceIntentChange(null),$.current=window.setTimeout(()=>{w.onOpenChange(!0),U()},100))})),onPointerLeave:composeEventHandlers(x.onPointerLeave,whenMouse(k=>{U();const H=w.content?.getBoundingClientRect();if(H){const W=w.content?.dataset.side,G=W==="right",Q=G?-5:5,Z=H[G?"left":"right"],J=H[G?"right":"left"];O.onPointerGraceIntentChange({area:[{x:k.clientX+Q,y:k.clientY},{x:Z,y:H.top},{x:J,y:H.top},{x:J,y:H.bottom},{x:Z,y:H.bottom}],side:W}),window.clearTimeout(L.current),L.current=window.setTimeout(()=>O.onPointerGraceIntentChange(null),300)}else{if(O.onTriggerLeave(k),k.defaultPrevented)return;O.onPointerGraceIntentChange(null)}})),onKeyDown:composeEventHandlers(x.onKeyDown,k=>{const H=O.searchRef.current!=="";x.disabled||H&&k.key===" "||SUB_OPEN_KEYS[C.dir].includes(k.key)&&(w.onOpenChange(!0),w.content?.focus(),k.preventDefault())})})})});MenuSubTrigger.displayName=SUB_TRIGGER_NAME$1;var SUB_CONTENT_NAME$1="MenuSubContent",MenuSubContent=reactExports.forwardRef((x,y)=>{const w=usePortalContext$1(CONTENT_NAME$4,x.__scopeMenu),{forceMount:C=w.forceMount,...P}=x,O=useMenuContext(CONTENT_NAME$4,x.__scopeMenu),$=useMenuRootContext(CONTENT_NAME$4,x.__scopeMenu),L=useMenuSubContext(SUB_CONTENT_NAME$1,x.__scopeMenu),D=reactExports.useRef(null),B=useComposedRefs(y,D);return jsxRuntimeExports.jsx(Collection$3.Provider,{scope:x.__scopeMenu,children:jsxRuntimeExports.jsx(Presence,{present:C||O.open,children:jsxRuntimeExports.jsx(Collection$3.Slot,{scope:x.__scopeMenu,children:jsxRuntimeExports.jsx(MenuContentImpl,{id:L.contentId,"aria-labelledby":L.triggerId,...P,ref:B,align:"start",side:$.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:U=>{$.isUsingKeyboardRef.current&&D.current?.focus(),U.preventDefault()},onCloseAutoFocus:U=>U.preventDefault(),onFocusOutside:composeEventHandlers(x.onFocusOutside,U=>{U.target!==L.trigger&&O.onOpenChange(!1)}),onEscapeKeyDown:composeEventHandlers(x.onEscapeKeyDown,U=>{$.onClose(),U.preventDefault()}),onKeyDown:composeEventHandlers(x.onKeyDown,U=>{const k=U.currentTarget.contains(U.target),H=SUB_CLOSE_KEYS[$.dir].includes(U.key);k&&H&&(O.onOpenChange(!1),L.trigger?.focus(),U.preventDefault())})})})})})});MenuSubContent.displayName=SUB_CONTENT_NAME$1;function getOpenState(x){return x?"open":"closed"}function isIndeterminate(x){return x==="indeterminate"}function getCheckedState(x){return isIndeterminate(x)?"indeterminate":x?"checked":"unchecked"}function focusFirst$1(x){const y=document.activeElement;for(const w of x)if(w===y||(w.focus(),document.activeElement!==y))return}function wrapArray$1(x,y){return x.map((w,C)=>x[(y+C)%x.length])}function getNextMatch(x,y,w){const P=y.length>1&&Array.from(y).every(B=>B===y[0])?y[0]:y,O=w?x.indexOf(w):-1;let $=wrapArray$1(x,Math.max(O,0));P.length===1&&($=$.filter(B=>B!==w));const D=$.find(B=>B.toLowerCase().startsWith(P.toLowerCase()));return D!==w?D:void 0}function isPointInPolygon$1(x,y){const{x:w,y:C}=x;let P=!1;for(let O=0,$=y.length-1;O<y.length;$=O++){const L=y[O],D=y[$],B=L.x,U=L.y,k=D.x,H=D.y;U>C!=H>C&&w<(k-B)*(C-U)/(H-U)+B&&(P=!P)}return P}function isPointerInGraceArea(x,y){if(!y)return!1;const w={x:x.clientX,y:x.clientY};return isPointInPolygon$1(w,y)}function whenMouse(x){return y=>y.pointerType==="mouse"?x(y):void 0}var Root3$1=Menu,Anchor2=MenuAnchor,Portal$2=MenuPortal,Content2$4=MenuContent,Group=MenuGroup,Label=MenuLabel,Item2$1=MenuItem,CheckboxItem=MenuCheckboxItem,RadioGroup=MenuRadioGroup,RadioItem=MenuRadioItem,ItemIndicator$1=MenuItemIndicator,Separator=MenuSeparator,Arrow2$1=MenuArrow,SubTrigger=MenuSubTrigger,SubContent=MenuSubContent,DROPDOWN_MENU_NAME="DropdownMenu",[createDropdownMenuContext]=createContextScope(DROPDOWN_MENU_NAME,[createMenuScope]),useMenuScope=createMenuScope(),[DropdownMenuProvider,useDropdownMenuContext]=createDropdownMenuContext(DROPDOWN_MENU_NAME),DropdownMenu=x=>{const{__scopeDropdownMenu:y,children:w,dir:C,open:P,defaultOpen:O,onOpenChange:$,modal:L=!0}=x,D=useMenuScope(y),B=reactExports.useRef(null),[U,k]=useControllableState({prop:P,defaultProp:O??!1,onChange:$,caller:DROPDOWN_MENU_NAME});return jsxRuntimeExports.jsx(DropdownMenuProvider,{scope:y,triggerId:useId(),triggerRef:B,contentId:useId(),open:U,onOpenChange:k,onOpenToggle:reactExports.useCallback(()=>k(H=>!H),[k]),modal:L,children:jsxRuntimeExports.jsx(Root3$1,{...D,open:U,onOpenChange:k,dir:C,modal:L,children:w})})};DropdownMenu.displayName=DROPDOWN_MENU_NAME;var TRIGGER_NAME$3="DropdownMenuTrigger",DropdownMenuTrigger=reactExports.forwardRef((x,y)=>{const{__scopeDropdownMenu:w,disabled:C=!1,...P}=x,O=useDropdownMenuContext(TRIGGER_NAME$3,w),$=useMenuScope(w);return jsxRuntimeExports.jsx(Anchor2,{asChild:!0,...$,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",id:O.triggerId,"aria-haspopup":"menu","aria-expanded":O.open,"aria-controls":O.open?O.contentId:void 0,"data-state":O.open?"open":"closed","data-disabled":C?"":void 0,disabled:C,...P,ref:composeRefs(y,O.triggerRef),onPointerDown:composeEventHandlers(x.onPointerDown,L=>{!C&&L.button===0&&L.ctrlKey===!1&&(O.onOpenToggle(),O.open||L.preventDefault())}),onKeyDown:composeEventHandlers(x.onKeyDown,L=>{C||(["Enter"," "].includes(L.key)&&O.onOpenToggle(),L.key==="ArrowDown"&&O.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(L.key)&&L.preventDefault())})})})});DropdownMenuTrigger.displayName=TRIGGER_NAME$3;var PORTAL_NAME$3="DropdownMenuPortal",DropdownMenuPortal=x=>{const{__scopeDropdownMenu:y,...w}=x,C=useMenuScope(y);return jsxRuntimeExports.jsx(Portal$2,{...C,...w})};DropdownMenuPortal.displayName=PORTAL_NAME$3;var CONTENT_NAME$3="DropdownMenuContent",DropdownMenuContent=reactExports.forwardRef((x,y)=>{const{__scopeDropdownMenu:w,...C}=x,P=useDropdownMenuContext(CONTENT_NAME$3,w),O=useMenuScope(w),$=reactExports.useRef(!1);return jsxRuntimeExports.jsx(Content2$4,{id:P.contentId,"aria-labelledby":P.triggerId,...O,...C,ref:y,onCloseAutoFocus:composeEventHandlers(x.onCloseAutoFocus,L=>{$.current||P.triggerRef.current?.focus(),$.current=!1,L.preventDefault()}),onInteractOutside:composeEventHandlers(x.onInteractOutside,L=>{const D=L.detail.originalEvent,B=D.button===0&&D.ctrlKey===!0,U=D.button===2||B;(!P.modal||U)&&($.current=!0)}),style:{...x.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DropdownMenuContent.displayName=CONTENT_NAME$3;var GROUP_NAME$1="DropdownMenuGroup",DropdownMenuGroup=reactExports.forwardRef((x,y)=>{const{__scopeDropdownMenu:w,...C}=x,P=useMenuScope(w);return jsxRuntimeExports.jsx(Group,{...P,...C,ref:y})});DropdownMenuGroup.displayName=GROUP_NAME$1;var LABEL_NAME$1="DropdownMenuLabel",DropdownMenuLabel=reactExports.forwardRef((x,y)=>{const{__scopeDropdownMenu:w,...C}=x,P=useMenuScope(w);return jsxRuntimeExports.jsx(Label,{...P,...C,ref:y})});DropdownMenuLabel.displayName=LABEL_NAME$1;var ITEM_NAME$1="DropdownMenuItem",DropdownMenuItem=reactExports.forwardRef((x,y)=>{const{__scopeDropdownMenu:w,...C}=x,P=useMenuScope(w);return jsxRuntimeExports.jsx(Item2$1,{...P,...C,ref:y})});DropdownMenuItem.displayName=ITEM_NAME$1;var CHECKBOX_ITEM_NAME="DropdownMenuCheckboxItem",DropdownMenuCheckboxItem=reactExports.forwardRef((x,y)=>{const{__scopeDropdownMenu:w,...C}=x,P=useMenuScope(w);return jsxRuntimeExports.jsx(CheckboxItem,{...P,...C,ref:y})});DropdownMenuCheckboxItem.displayName=CHECKBOX_ITEM_NAME;var RADIO_GROUP_NAME="DropdownMenuRadioGroup",DropdownMenuRadioGroup=reactExports.forwardRef((x,y)=>{const{__scopeDropdownMenu:w,...C}=x,P=useMenuScope(w);return jsxRuntimeExports.jsx(RadioGroup,{...P,...C,ref:y})});DropdownMenuRadioGroup.displayName=RADIO_GROUP_NAME;var RADIO_ITEM_NAME="DropdownMenuRadioItem",DropdownMenuRadioItem=reactExports.forwardRef((x,y)=>{const{__scopeDropdownMenu:w,...C}=x,P=useMenuScope(w);return jsxRuntimeExports.jsx(RadioItem,{...P,...C,ref:y})});DropdownMenuRadioItem.displayName=RADIO_ITEM_NAME;var INDICATOR_NAME="DropdownMenuItemIndicator",DropdownMenuItemIndicator=reactExports.forwardRef((x,y)=>{const{__scopeDropdownMenu:w,...C}=x,P=useMenuScope(w);return jsxRuntimeExports.jsx(ItemIndicator$1,{...P,...C,ref:y})});DropdownMenuItemIndicator.displayName=INDICATOR_NAME;var SEPARATOR_NAME$1="DropdownMenuSeparator",DropdownMenuSeparator=reactExports.forwardRef((x,y)=>{const{__scopeDropdownMenu:w,...C}=x,P=useMenuScope(w);return jsxRuntimeExports.jsx(Separator,{...P,...C,ref:y})});DropdownMenuSeparator.displayName=SEPARATOR_NAME$1;var ARROW_NAME$2="DropdownMenuArrow",DropdownMenuArrow=reactExports.forwardRef((x,y)=>{const{__scopeDropdownMenu:w,...C}=x,P=useMenuScope(w);return jsxRuntimeExports.jsx(Arrow2$1,{...P,...C,ref:y})});DropdownMenuArrow.displayName=ARROW_NAME$2;var SUB_TRIGGER_NAME="DropdownMenuSubTrigger",DropdownMenuSubTrigger=reactExports.forwardRef((x,y)=>{const{__scopeDropdownMenu:w,...C}=x,P=useMenuScope(w);return jsxRuntimeExports.jsx(SubTrigger,{...P,...C,ref:y})});DropdownMenuSubTrigger.displayName=SUB_TRIGGER_NAME;var SUB_CONTENT_NAME="DropdownMenuSubContent",DropdownMenuSubContent=reactExports.forwardRef((x,y)=>{const{__scopeDropdownMenu:w,...C}=x,P=useMenuScope(w);return jsxRuntimeExports.jsx(SubContent,{...P,...C,ref:y,style:{...x.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DropdownMenuSubContent.displayName=SUB_CONTENT_NAME;var Root2$3=DropdownMenu,Trigger$2=DropdownMenuTrigger,Portal2$1=DropdownMenuPortal,Content2$3=DropdownMenuContent,Item2=DropdownMenuItem;function useEventListener(x,y,w=window,C){const P=reactExports.useRef(),{capture:O,passive:$,once:L}=C||{};reactExports.useEffect(()=>{P.current=y},[y]),reactExports.useEffect(()=>{if(!(w&&w.addEventListener))return;const B=k=>{P.current&&P.current(k)},U={capture:O,passive:$,once:L};return w.addEventListener(x,B,U),()=>{w.removeEventListener(x,B)}},[x,w,O,$,L])}function useClickCoordinates(){const[x,y]=reactExports.useState({x:0,y:0}),w=reactExports.useCallback(({clientX:C,clientY:P})=>{y({x:C,y:P})},[y]);return useEventListener("mouseup",w),useEventListener("touchend",w),x}const menuContext=reactExports.createContext({item:{name:[],image:""},index:-1,displayIndex:-1}),QspMenu=({attrs:x,showAs:y,showAt:w,offsetX:C,offsetY:P,children:O})=>{const[$,L,D]=useAttributes(x,"qsp-menu"),B=useAtomExports.useAtom(menu$),U=useClickCoordinates(),k={position:"fixed"},H=useFadeTransition(B.isOpen);let W="start",G="bottom";if(y==="fixed"){const[Q,Z]=(w??"left top").split(" ");switch(Q){case"left":k.left=C;break;case"center":k.left=`calc(50% - ${C}px)`,W="center";break;case"right":k.right=C,W="end";break}switch(Z){case"top":k.top=P;break;case"center":k.top=`calc(50% - ${P}px)`,G="left";break;case"bottom":k.bottom=P,G="top";break}}else k.left=U.x??0,k.top=U.y??0;return jsxRuntimeExports.jsxs(Root2$3,{open:B.isOpen,onOpenChange:()=>menu$.actions.close(),children:[jsxRuntimeExports.jsx(Trigger$2,{asChild:!0,children:jsxRuntimeExports.jsx("div",{style:k})}),H((Q,Z)=>Z?jsxRuntimeExports.jsx(Portal2$1,{container:document.getElementById("portal-container"),children:jsxRuntimeExports.jsx(Content2$3,{forceMount:!0,asChild:!0,align:W,side:G,loop:!0,children:jsxRuntimeExports.jsx(animated.div,{style:Q,children:jsxRuntimeExports.jsx($,{style:L,...D,children:O})})})}):null)]})},QspMenuList=({attrs:x,children:y})=>{const w=useAtomExports.useAtom(menuWithParsedName$),[C,P,O]=useAttributes(x,"qsp-menu-list");let $=1;return jsxRuntimeExports.jsx(C,{style:P,...O,children:w.map((L,D)=>L.name[0]==="-"?jsxRuntimeExports.jsx("qsp-menu-separator",{},L.key):jsxRuntimeExports.jsx(menuContext.Provider,{value:{item:L,index:D,displayIndex:$++},children:React.Children.map(y,B=>React.cloneElement(B))},L.key))})},QspMenuItem=({attrs:x,children:y})=>{const[w,C]=reactExports.useState(!1),[P,O,{useFormat:$,...L}]=useAttributes(x,"qsp-menu-item"),{item:D,index:B}=reactExports.useContext(menuContext),U={...O,"--menu-item-image":D.image?`url("${D.image}")`:""},k=()=>{C(!0)},H=()=>{C(!1)},W=G=>{G.preventDefault(),menu$.actions.select(B)};return jsxRuntimeExports.jsx(Item2,{asChild:!0,children:jsxRuntimeExports.jsx(P,{...L,style:U,"data-qsp-selected":w?"":null,onClick:W,onMouseOver:k,onMouseLeave:H,children:y})})},QspMenuItemName=({attrs:x})=>{const{item:y}=reactExports.useContext(menuContext),[w,C,P]=useAttributes(x,"qsp-menu-name");return jsxRuntimeExports.jsx(w,{style:C,...P,children:jsxRuntimeExports.jsx(Markup,{content:y.name})})},QspMenuItemImage=({attrs:x})=>{const{item:y}=reactExports.useContext(menuContext),[,w,C]=useAttributes(x,"img","qsp-menu-image");return y.image?jsxRuntimeExports.jsx("img",{alt:"",...C,style:w,src:y.image}):null},QspMenuItemIndex=({attrs:x})=>{const{displayIndex:y}=reactExports.useContext(menuContext),[w,C,P]=useAttributes(x,"qsp-menu-index");return jsxRuntimeExports.jsx(w,{style:C,...P,children:y})},QspMsg=({attrs:x,children:y})=>{const[w,C,P]=useAttributes(x,"qsp-msg"),O=useAtomExports.useAtom(msg$),$=useFadeTransition(O.isOpen);function L(){msg$.actions.close()}return jsxRuntimeExports.jsx(buttonContext.Provider,{value:{okAction:L,cancelAction:L},children:jsxRuntimeExports.jsx(Root$6,{open:O.isOpen,onOpenChange:L,children:$((D,B)=>B?jsxRuntimeExports.jsxs(Portal$3,{container:document.getElementById("portal-container"),children:[jsxRuntimeExports.jsx(Overlay,{className:"qsp-overlay"}),jsxRuntimeExports.jsx(Content$1,{forceMount:!0,asChild:!0,children:jsxRuntimeExports.jsx(animated.div,{style:D,className:"qsp-dialog-container",children:jsxRuntimeExports.jsx(w,{style:C,...P,children:y})})})]}):null)})})},QspMsgContent=({attrs:x})=>{const{content:y,key:w}=useAtomExports.useAtom(parsedMsgContent$),[C,P,{useFormat:O,...$}]=useAttributes(x,"qsp-msg-content");return jsxRuntimeExports.jsx(Description$1,{asChild:!0,children:reactExports.createElement(C,{style:P,...$,key:w},jsxRuntimeExports.jsx(QspScrollable,{attrs:{},children:jsxRuntimeExports.jsx(Markup,{content:y})}))})},objectContext=reactExports.createContext({object:{name:[],image:""},index:-1}),QspObjects=({attrs:x,children:y})=>{const[w,C,P]=useAttributes(x,"qsp-objects");return useAtomExports.useAtom(isObjsVisible$)?jsxRuntimeExports.jsx(w,{style:C,...P,children:y}):null},QspObjectsList=({attrs:x,children:y})=>{const w=useAtomExports.useAtom(objectsWithParsedName$),[C,P,O]=useAttributes(x,"qsp-objects-list");return jsxRuntimeExports.jsx(C,{style:P,...O,children:w.map(($,L)=>jsxRuntimeExports.jsx(objectContext.Provider,{value:{object:$,index:L},children:React.Children.map(y,D=>React.cloneElement(D))},$.key))})},QspObjectItem=({attrs:x,children:y})=>{const[w,C]=reactExports.useState(!1),[P,O,{useFormat:$,...L}]=useAttributes(x,"qsp-object"),{object:D,index:B}=reactExports.useContext(objectContext),U={...O,"--object-image":D.image?`url("${D.image}")`:""},k=()=>{C(!0)},H=()=>{C(!1)},W=()=>{selectObject(B)};return jsxRuntimeExports.jsx(P,{...L,style:U,"data-qsp-selected":w?"":null,onClick:W,onMouseOver:k,onMouseLeave:H,children:y})},QspObjectName=({attrs:x})=>{const[y,w,C]=useAttributes(x,"qsp-object-name"),{object:P}=reactExports.useContext(objectContext);return jsxRuntimeExports.jsx(y,{...C,style:w,children:jsxRuntimeExports.jsx(Markup,{content:P.name})})},QspObjectImage=({attrs:x})=>{const{object:y}=reactExports.useContext(objectContext),[w,C,P]=useAttributes(x,"img","qsp-object-image");return y.image?jsxRuntimeExports.jsx(w,{...P,style:C,src:y.image}):null},QspObjectIndex=({attrs:x})=>{const{index:y}=reactExports.useContext(objectContext),[w,C,P]=useAttributes(x,"qsp-object-index");return jsxRuntimeExports.jsx(w,{...P,style:C,children:y+1})},QspPauseScreen=({attrs:x,children:y})=>{const w=useAtomExports.useAtom(isPauseScreenVisible$),C=useAtomExports.useAtom(currentGameEntry$),[P,O,$]=useAttributes(x,"qsp-pause-screen"),L=useFadeTransition(w);return jsxRuntimeExports.jsx(Root$6,{modal:!0,open:w,onOpenChange:D=>D?openPauseScreen():closePauseScreen(),children:L((D,B)=>B?jsxRuntimeExports.jsxs(Portal$3,{container:document.getElementById("portal-container"),children:[jsxRuntimeExports.jsx(Overlay,{className:"qsp-overlay"}),jsxRuntimeExports.jsx(Content$1,{forceMount:!0,asChild:!0,children:jsxRuntimeExports.jsx(animated.div,{className:"qsp-dialog-container",style:D,children:jsxRuntimeExports.jsxs("div",{className:"qsp-pause-dialog",children:[jsxRuntimeExports.jsx(Title,{children:C?.title||"Pause"}),jsxRuntimeExports.jsx(P,{style:O,...$,children:y})]})})})]}):null)})},QspPauseScreenContent=({attrs:x,children:y})=>{const[w,C,P]=useAttributes(x,"qsp-pause-screen-content"),O=useAtomExports.useAtom(requestedAction$);return jsxRuntimeExports.jsx(w,{style:C,...P,"data-requested-save-command":O,children:y})},slotContentContext=reactExports.createContext({index:-1}),baseSlots$=atom(x=>Array.from({length:x(saveSlotsCount$)},(y,w)=>w+1)),QspSlotsList=({attrs:x,children:y})=>{const w=useAtomExports.useAtom(baseSlots$),C=useAtomExports.useAtom(saveSlots$),[P,O,$]=useAttributes(x,"qsp-slots-list");return jsxRuntimeExports.jsx(P,{style:O,...$,children:w.map(L=>{const D=C.find(B=>B.slot===L);return jsxRuntimeExports.jsx(slotContentContext.Provider,{value:{index:L,date:D?.timestamp},children:React.Children.map(y,B=>React.cloneElement(B))},L)})})},QspSlot=({attrs:x,children:y})=>{const{index:w,date:C}=reactExports.useContext(slotContentContext),[P,O,$]=useAttributes(x,"qsp-save-slot"),L={...O,"--slot-index":`${w}`};return jsxRuntimeExports.jsx(P,{...$,style:L,"data-qsp-save":!0,"data-qsp-save-index":w,"data-save-empty":C?null:"",children:y})},QspSlotIndex=({attrs:x})=>{const{index:y}=reactExports.useContext(slotContentContext),[w,C,P]=useAttributes(x,"qsp-slot-index");return jsxRuntimeExports.jsx(w,{...P,style:C,children:y})},QspSlotDate=({children:x,attrs:y})=>{const{date:w}=reactExports.useContext(slotContentContext),[C,P,O]=useAttributes(y,"qsp-slot-date");return w?jsxRuntimeExports.jsx(C,{...O,style:P,children:formatDate(new Date(w))}):jsxRuntimeExports.jsx(C,{...O,style:P,children:x})},QspPauseScreenPanel=({name:x,attrs:y,children:w})=>{const[C,P,O]=useAttributes(y,"qsp-pause-screen-panel");return useAtomExports.useAtom(pauseScreenCurrentPanel$)===x?jsxRuntimeExports.jsx(C,{style:P,...O,children:w}):null},QspStats=({attrs:x,children:y})=>{const[w,C,P]=useAttributes(x,"qsp-stats"),O=useAtomExports.useAtom(isStatsVisible$),$=useAtomExports.useAtom(statsContent$),L=usePrevious$1($),D=useQspVariable("DISABLESCROLL","",0,0);return reactExports.useEffect(()=>{D||(L&&$!==L&&$.startsWith(L)?statsScroll$.update(B=>Math.max(B,0)+1):statsScroll$.set(-1))},[L,$]),O?jsxRuntimeExports.jsx(scrollContext.Provider,{value:statsScroll$,children:jsxRuntimeExports.jsx(w,{style:C,...P,children:y})}):null},QspStatsContent=({attrs:x})=>{const[y,w,{useFormat:C,...P}]=useAttributes(x,"qsp-stats-content"),{content:O,key:$}=useAtomExports.useAtom(parsedStatsContent$);return reactExports.createElement(y,{style:w,...P,key:$},jsxRuntimeExports.jsx(Markup,{content:O}))};var VISUALLY_HIDDEN_STYLES=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),NAME="VisuallyHidden",VisuallyHidden=reactExports.forwardRef((x,y)=>jsxRuntimeExports.jsx(Primitive.span,{...x,ref:y,style:{...VISUALLY_HIDDEN_STYLES,...x.style}}));VisuallyHidden.displayName=NAME;var Root$2=VisuallyHidden;const QspView=({attrs:x,modal:y,children:w})=>{const[C,P,O]=useAttributes(x,"qsp-view"),$=useAtomExports.useAtom(view$),L={...P,"--view-image":`url("${$.path}")`};if(y){const D=B=>{B.target.classList.contains("qsp-dialog-container")&&view$.actions.close()};return jsxRuntimeExports.jsx(Root$6,{open:$.isOpen,onOpenChange:()=>view$.actions.close(),children:jsxRuntimeExports.jsxs(Portal$3,{container:document.getElementById("portal-container"),children:[jsxRuntimeExports.jsx(Overlay,{className:"qsp-overlay"}),jsxRuntimeExports.jsxs(Content$1,{className:"qsp-dialog-container",onClick:D,children:[jsxRuntimeExports.jsxs(VisuallyHidden,{children:[jsxRuntimeExports.jsx(Title,{}),jsxRuntimeExports.jsx(Description$1,{})]}),jsxRuntimeExports.jsx(C,{...O,style:L,children:w})]})]})})}return jsxRuntimeExports.jsx(C,{...O,style:L,children:w})},QspViewImage=({attrs:x})=>{const[,y,w]=useAttributes(x,"img","qsp-view-image"),C=useAtomExports.useAtom(view$);return C.path?jsxRuntimeExports.jsx("img",{src:C.path,alt:"",style:y,...w}):null},Link=({exec:x,act:y,children:w,attrs:C})=>{const P=reactExports.useCallback(L=>{L.preventDefault(),L.stopPropagation(),x?execCode(x):y&&(selectAction(y-1),execSelectedAction())},[x,y]),[,O,$]=useAttributes(C,"a");return jsxRuntimeExports.jsx("a",{...$,style:O,href:"#",onClick:P,children:w})},HtmlLink=({children:x,attrs:y})=>{const[,w,{href:C,...P}]=useAttributes(y,"a"),O=$=>{if(P.onClick)return P.onClick($);C.startsWith("#")&&($.preventDefault(),C!=="#"&&(window.location.hash=C))};return jsxRuntimeExports.jsx("a",{target:"_blank",rel:"noreferrer",...P,style:w,href:C,onClick:O,children:x})},voidTags=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],TAGS_MAP={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient",textpath:"textPath"},Element$1=({attrs:x={},children:y=null,tagName:w})=>{const C=w in TAGS_MAP?TAGS_MAP[w]:w,[P,O,$]=useAttributes(x,C);return voidTags.includes(w)?jsxRuntimeExports.jsx(P,{style:O,...$}):jsxRuntimeExports.jsx(P,{style:O,...$,children:y})},QspT=({children:x})=>{const[y]=useTranslation();return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:y(x)})},QspMain=({attrs:x,children:y})=>{const[w,C,P]=useAttributes(x,"qsp-main"),O=useAtomExports.useAtom(mainContent$),$=useAtomExports.useAtom(isNewLoc$),L=useQspVariable("DISABLESCROLL","",0,0);return reactExports.useEffect(()=>{L||mainScroll$.update(D=>$?-1:Math.max(D,0)+1)},[$,O]),jsxRuntimeExports.jsx(scrollContext.Provider,{value:mainScroll$,children:jsxRuntimeExports.jsx(w,{style:C,...P,children:y})})},QspMainContent=({attrs:x})=>{const{key:y,content:w}=useAtomExports.useAtom(parsedMainContent$),C=useAtomExports.useAtom(newLocHash$),[P,O,{useFormat:$,...L}]=useAttributes(x,"qsp-main-content");return reactExports.useEffect(()=>{mainContent$.set(nextMainContent$.value)},[C]),reactExports.createElement(P,{style:O,...L,key:y},jsxRuntimeExports.jsx(Markup,{content:w}))};function useQspBind(x,y,w){return[useQspVariable(x,y,w,""),O=>{const L=O.target.type==="checkbox"?O.target.checked?O.target.value:"":O.target.value,D=[x];(y||w)&&(D.push("["),y?D.push(`"${y}"`):D.push(String(w)),D.push("]"));const B=D.join(""),U=B.startsWith("$")?`"${L}"`:L||0;qspApi$.value?.execCode(`${B} = ${U}`)}]}const QspBoundSelect=({attributes:x,style:y,bind:w,bindKey:C,bindIndex:P,children:O})=>{const[$,L]=useQspBind(w,C,P);return jsxRuntimeExports.jsx("select",{...x,style:y,value:$,onChange:L,children:O})},HtmlSelect=({attrs:x,children:y})=>{const[,w,{value:C,qspBind:P,qspBindKey:O,qspBindIndex:$,...L}]=useAttributes(x,"select");if(P){const D=parseInt($||"0",10);return jsxRuntimeExports.jsx(QspBoundSelect,{attributes:L,style:w,bind:P,bindKey:O,bindIndex:D,children:y})}return jsxRuntimeExports.jsx("select",{...L,style:w,defaultValue:C,children:y})},QspBoundTextarea=({attributes:x,style:y,bind:w,bindKey:C,bindIndex:P})=>{const[O,$]=useQspBind(w,C,P);return jsxRuntimeExports.jsx("textarea",{...x,style:y,value:O,onChange:$})},HtmlTextarea=({attrs:x})=>{const[,y,{value:w,qspBind:C,qspBindKey:P,qspBindIndex:O,...$}]=useAttributes(x,"textarea");if(C){const L=parseInt(O||"0",10);return jsxRuntimeExports.jsx(QspBoundTextarea,{attributes:$,style:y,bind:C,bindKey:P,bindIndex:L})}return jsxRuntimeExports.jsx("textarea",{...$,style:y,defaultValue:w})},QspBoundInput=({attributes:x,style:y,bind:w,bindKey:C,bindIndex:P,value:O})=>{const[$,L]=useQspBind(w,C,P),D=x.type||"text";return D==="radio"?jsxRuntimeExports.jsx("input",{...x,style:y,type:"radio",value:O,checked:$===O,onChange:L}):D==="checkbox"?jsxRuntimeExports.jsx("input",{...x,style:y,type:"checkbox",value:O,checked:!!$,onChange:L}):jsxRuntimeExports.jsx("input",{...x,style:y,value:$,onChange:L})},HtmlInput=({attrs:x})=>{const[,y,{value:w,qspBind:C,qspBindKey:P,qspBindIndex:O,...$}]=useAttributes(x,"input");if(C){const L=parseInt(O||"0",10);return jsxRuntimeExports.jsx(QspBoundInput,{attributes:$,style:y,bind:C,bindKey:P,bindIndex:L,value:w})}return jsxRuntimeExports.jsx("input",{...$,style:y,defaultValue:w})},HtmlForm=({attrs:x,children:y})=>{const[,w,C]=useAttributes(x,"form"),P=C["qspOn:submit"];delete C["qspOn:submit"];function O($){$.preventDefault(),P?.toLowerCase().startsWith("exec:")&&qspApi$.value?.execCode(P.substring(5))}return jsxRuntimeExports.jsx("form",{...C,style:w,onSubmit:O,children:y})},HtmlImg=({attrs:x,src:y})=>{const[,w,C]=useAttributes(x,"img");return jsxRuntimeExports.jsx("img",{src:y.replace("\\","/"),alt:"",style:w,...C})},QspLayer=x=>{const y=useSetup($=>{const L=atom(D=>D($).name);return atom(D=>D(layers$)[D(L)])},x),w=useAtomExports.useAtom(y),[C,P,O]=useAttributes(x.attrs,"qsp-layer");return reactExports.useEffect(()=>registerLayer(x.name),[]),w?(P.zIndex=x.index,jsxRuntimeExports.jsx(C,{...O,style:P,"data-layer-name":x.name,children:x.children})):null},QspRegion=x=>{const y=useSetup(L=>{const D=atom(B=>B(L).name);return atom(B=>templateParser.parse(B(regions$)[B(D)]))},x),w=useSetup(L=>{const D=atom(B=>B(L).name);return atom(B=>B(regionsScroll$)[B(D)]??0)},x),C=useAtomExports.useAtom(y),[P,O,$]=useAttributes(x.attrs,"qsp-region");return x.scrollable?jsxRuntimeExports.jsx(scrollContext.Provider,{value:w,children:jsxRuntimeExports.jsx(P,{"data-region-name":x.name,style:O,...$,children:jsxRuntimeExports.jsx(QspScrollable,{attrs:{},children:jsxRuntimeExports.jsx(Markup,{content:C})})})}):jsxRuntimeExports.jsx(P,{"data-region-name":x.name,style:O,...$,children:jsxRuntimeExports.jsx(Markup,{content:C})})},QspShow=({variable:x,condition:y,children:w})=>useQspExpression(x,y)?w:null,QspStyle=({from:x})=>{const y=useQspVariable(x,"",0,"");return y?jsxRuntimeExports.jsx("style",{"data-qsp-from":x,children:y}):null},QspVariable=({name:x,vkey:y="",index:w=0})=>{const C=x.startsWith("$")?"":0,P=useQspVariable(x,y,w,C);return jsxRuntimeExports.jsx("qsp-variable",{"data-name":x,"data-key":y||w,children:P})},namedSlotContentContext=reactExports.createContext({path:""}),QspNamedSlot=x=>{const{attrs:y,children:w,path:C}=x,[P,O,$]=useAttributes(y,"qsp-save-slot"),L=useSetup(B=>{const U=B.focus(k=>k.path);return atom(k=>{const H=k(U);return k(namedSlots$).find(G=>G.key===H)})},x),D=useAtomExports.useAtom(L);return jsxRuntimeExports.jsx(slotContentContext.Provider,{value:{index:-1,date:D?.timestamp},children:jsxRuntimeExports.jsx(namedSlotContentContext.Provider,{value:{path:x.path},children:jsxRuntimeExports.jsx(P,{...$,style:O,"data-qsp-save":!0,"data-qsp-save-path":C,"data-save-empty":D?null:"",children:w})})})};function usePrevious(x){const y=reactExports.useRef({value:x,previous:x});return reactExports.useMemo(()=>(y.current.value!==x&&(y.current.previous=y.current.value,y.current.value=x),y.current.previous),[x])}var PAGE_KEYS=["PageUp","PageDown"],ARROW_KEYS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],BACK_KEYS={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},SLIDER_NAME="Slider",[Collection$2,useCollection$2,createCollectionScope$2]=createCollection(SLIDER_NAME),[createSliderContext]=createContextScope(SLIDER_NAME,[createCollectionScope$2]),[SliderProvider,useSliderContext]=createSliderContext(SLIDER_NAME),Slider=reactExports.forwardRef((x,y)=>{const{name:w,min:C=0,max:P=100,step:O=1,orientation:$="horizontal",disabled:L=!1,minStepsBetweenThumbs:D=0,defaultValue:B=[C],value:U,onValueChange:k=()=>{},onValueCommit:H=()=>{},inverted:W=!1,form:G,...Q}=x,Z=reactExports.useRef(new Set),J=reactExports.useRef(0),oe=$==="horizontal"?SliderHorizontal:SliderVertical,[ae=[],ve]=useControllableState({prop:U,defaultProp:B,onChange:qe=>{[...Z.current][J.current]?.focus(),k(qe)}}),Te=reactExports.useRef(ae);function re(qe){const Ye=getClosestValueIndex(ae,qe);Le(qe,Ye)}function he(qe){Le(qe,J.current)}function be(){const qe=Te.current[J.current];ae[J.current]!==qe&&H(ae)}function Le(qe,Ye,{commit:et}={commit:!1}){const je=getDecimalCount(O),Ke=roundValue(Math.round((qe-C)/O)*O+C,je),Ve=clamp$1(Ke,[C,P]);ve((We=[])=>{const we=getNextSortedValues(We,Ve,Ye);if(hasMinStepsBetweenValues(we,D*O)){J.current=we.indexOf(Ve);const Oe=String(we)!==String(We);return Oe&&et&&H(we),Oe?we:We}else return We})}return jsxRuntimeExports.jsx(SliderProvider,{scope:x.__scopeSlider,name:w,disabled:L,min:C,max:P,valueIndexToChangeRef:J,thumbs:Z.current,values:ae,orientation:$,form:G,children:jsxRuntimeExports.jsx(Collection$2.Provider,{scope:x.__scopeSlider,children:jsxRuntimeExports.jsx(Collection$2.Slot,{scope:x.__scopeSlider,children:jsxRuntimeExports.jsx(oe,{"aria-disabled":L,"data-disabled":L?"":void 0,...Q,ref:y,onPointerDown:composeEventHandlers(Q.onPointerDown,()=>{L||(Te.current=ae)}),min:C,max:P,inverted:W,onSlideStart:L?void 0:re,onSlideMove:L?void 0:he,onSlideEnd:L?void 0:be,onHomeKeyDown:()=>!L&&Le(C,0,{commit:!0}),onEndKeyDown:()=>!L&&Le(P,ae.length-1,{commit:!0}),onStepKeyDown:({event:qe,direction:Ye})=>{if(!L){const Ke=PAGE_KEYS.includes(qe.key)||qe.shiftKey&&ARROW_KEYS.includes(qe.key)?10:1,Ve=J.current,We=ae[Ve],we=O*Ke*Ye;Le(We+we,Ve,{commit:!0})}}})})})})});Slider.displayName=SLIDER_NAME;var[SliderOrientationProvider,useSliderOrientationContext]=createSliderContext(SLIDER_NAME,{startEdge:"left",endEdge:"right",size:"width",direction:1}),SliderHorizontal=reactExports.forwardRef((x,y)=>{const{min:w,max:C,dir:P,inverted:O,onSlideStart:$,onSlideMove:L,onSlideEnd:D,onStepKeyDown:B,...U}=x,[k,H]=reactExports.useState(null),W=useComposedRefs(y,oe=>H(oe)),G=reactExports.useRef(void 0),Q=useDirection(P),Z=Q==="ltr",J=Z&&!O||!Z&&O;function ne(oe){const ae=G.current||k.getBoundingClientRect(),ve=[0,ae.width],re=linearScale(ve,J?[w,C]:[C,w]);return G.current=ae,re(oe-ae.left)}return jsxRuntimeExports.jsx(SliderOrientationProvider,{scope:x.__scopeSlider,startEdge:J?"left":"right",endEdge:J?"right":"left",direction:J?1:-1,size:"width",children:jsxRuntimeExports.jsx(SliderImpl,{dir:Q,"data-orientation":"horizontal",...U,ref:W,style:{...U.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:oe=>{const ae=ne(oe.clientX);$?.(ae)},onSlideMove:oe=>{const ae=ne(oe.clientX);L?.(ae)},onSlideEnd:()=>{G.current=void 0,D?.()},onStepKeyDown:oe=>{const ve=BACK_KEYS[J?"from-left":"from-right"].includes(oe.key);B?.({event:oe,direction:ve?-1:1})}})})}),SliderVertical=reactExports.forwardRef((x,y)=>{const{min:w,max:C,inverted:P,onSlideStart:O,onSlideMove:$,onSlideEnd:L,onStepKeyDown:D,...B}=x,U=reactExports.useRef(null),k=useComposedRefs(y,U),H=reactExports.useRef(void 0),W=!P;function G(Q){const Z=H.current||U.current.getBoundingClientRect(),J=[0,Z.height],oe=linearScale(J,W?[C,w]:[w,C]);return H.current=Z,oe(Q-Z.top)}return jsxRuntimeExports.jsx(SliderOrientationProvider,{scope:x.__scopeSlider,startEdge:W?"bottom":"top",endEdge:W?"top":"bottom",size:"height",direction:W?1:-1,children:jsxRuntimeExports.jsx(SliderImpl,{"data-orientation":"vertical",...B,ref:k,style:{...B.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:Q=>{const Z=G(Q.clientY);O?.(Z)},onSlideMove:Q=>{const Z=G(Q.clientY);$?.(Z)},onSlideEnd:()=>{H.current=void 0,L?.()},onStepKeyDown:Q=>{const J=BACK_KEYS[W?"from-bottom":"from-top"].includes(Q.key);D?.({event:Q,direction:J?-1:1})}})})}),SliderImpl=reactExports.forwardRef((x,y)=>{const{__scopeSlider:w,onSlideStart:C,onSlideMove:P,onSlideEnd:O,onHomeKeyDown:$,onEndKeyDown:L,onStepKeyDown:D,...B}=x,U=useSliderContext(SLIDER_NAME,w);return jsxRuntimeExports.jsx(Primitive.span,{...B,ref:y,onKeyDown:composeEventHandlers(x.onKeyDown,k=>{k.key==="Home"?($(k),k.preventDefault()):k.key==="End"?(L(k),k.preventDefault()):PAGE_KEYS.concat(ARROW_KEYS).includes(k.key)&&(D(k),k.preventDefault())}),onPointerDown:composeEventHandlers(x.onPointerDown,k=>{const H=k.target;H.setPointerCapture(k.pointerId),k.preventDefault(),U.thumbs.has(H)?H.focus():C(k)}),onPointerMove:composeEventHandlers(x.onPointerMove,k=>{k.target.hasPointerCapture(k.pointerId)&&P(k)}),onPointerUp:composeEventHandlers(x.onPointerUp,k=>{const H=k.target;H.hasPointerCapture(k.pointerId)&&(H.releasePointerCapture(k.pointerId),O(k))})})}),TRACK_NAME="SliderTrack",SliderTrack=reactExports.forwardRef((x,y)=>{const{__scopeSlider:w,...C}=x,P=useSliderContext(TRACK_NAME,w);return jsxRuntimeExports.jsx(Primitive.span,{"data-disabled":P.disabled?"":void 0,"data-orientation":P.orientation,...C,ref:y})});SliderTrack.displayName=TRACK_NAME;var RANGE_NAME="SliderRange",SliderRange=reactExports.forwardRef((x,y)=>{const{__scopeSlider:w,...C}=x,P=useSliderContext(RANGE_NAME,w),O=useSliderOrientationContext(RANGE_NAME,w),$=reactExports.useRef(null),L=useComposedRefs(y,$),D=P.values.length,B=P.values.map(H=>convertValueToPercentage(H,P.min,P.max)),U=D>1?Math.min(...B):0,k=100-Math.max(...B);return jsxRuntimeExports.jsx(Primitive.span,{"data-orientation":P.orientation,"data-disabled":P.disabled?"":void 0,...C,ref:L,style:{...x.style,[O.startEdge]:U+"%",[O.endEdge]:k+"%"}})});SliderRange.displayName=RANGE_NAME;var THUMB_NAME$1="SliderThumb",SliderThumb=reactExports.forwardRef((x,y)=>{const w=useCollection$2(x.__scopeSlider),[C,P]=reactExports.useState(null),O=useComposedRefs(y,L=>P(L)),$=reactExports.useMemo(()=>C?w().findIndex(L=>L.ref.current===C):-1,[w,C]);return jsxRuntimeExports.jsx(SliderThumbImpl,{...x,ref:O,index:$})}),SliderThumbImpl=reactExports.forwardRef((x,y)=>{const{__scopeSlider:w,index:C,name:P,...O}=x,$=useSliderContext(THUMB_NAME$1,w),L=useSliderOrientationContext(THUMB_NAME$1,w),[D,B]=reactExports.useState(null),U=useComposedRefs(y,ne=>B(ne)),k=D?$.form||!!D.closest("form"):!0,H=useSize(D),W=$.values[C],G=W===void 0?0:convertValueToPercentage(W,$.min,$.max),Q=getLabel(C,$.values.length),Z=H?.[L.size],J=Z?getThumbInBoundsOffset(Z,G,L.direction):0;return reactExports.useEffect(()=>{if(D)return $.thumbs.add(D),()=>{$.thumbs.delete(D)}},[D,$.thumbs]),jsxRuntimeExports.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[L.startEdge]:`calc(${G}% + ${J}px)`},children:[jsxRuntimeExports.jsx(Collection$2.ItemSlot,{scope:x.__scopeSlider,children:jsxRuntimeExports.jsx(Primitive.span,{role:"slider","aria-label":x["aria-label"]||Q,"aria-valuemin":$.min,"aria-valuenow":W,"aria-valuemax":$.max,"aria-orientation":$.orientation,"data-orientation":$.orientation,"data-disabled":$.disabled?"":void 0,tabIndex:$.disabled?void 0:0,...O,ref:U,style:W===void 0?{display:"none"}:x.style,onFocus:composeEventHandlers(x.onFocus,()=>{$.valueIndexToChangeRef.current=C})})}),k&&jsxRuntimeExports.jsx(SliderBubbleInput,{name:P??($.name?$.name+($.values.length>1?"[]":""):void 0),form:$.form,value:W},C)]})});SliderThumb.displayName=THUMB_NAME$1;var BUBBLE_INPUT_NAME$2="RadioBubbleInput",SliderBubbleInput=reactExports.forwardRef(({__scopeSlider:x,value:y,...w},C)=>{const P=reactExports.useRef(null),O=useComposedRefs(P,C),$=usePrevious(y);return reactExports.useEffect(()=>{const L=P.current;if(!L)return;const D=window.HTMLInputElement.prototype,U=Object.getOwnPropertyDescriptor(D,"value").set;if($!==y&&U){const k=new Event("input",{bubbles:!0});U.call(L,y),L.dispatchEvent(k)}},[$,y]),jsxRuntimeExports.jsx(Primitive.input,{style:{display:"none"},...w,ref:O,defaultValue:y})});SliderBubbleInput.displayName=BUBBLE_INPUT_NAME$2;function getNextSortedValues(x=[],y,w){const C=[...x];return C[w]=y,C.sort((P,O)=>P-O)}function convertValueToPercentage(x,y,w){const O=100/(w-y)*(x-y);return clamp$1(O,[0,100])}function getLabel(x,y){return y>2?`Value ${x+1} of ${y}`:y===2?["Minimum","Maximum"][x]:void 0}function getClosestValueIndex(x,y){if(x.length===1)return 0;const w=x.map(P=>Math.abs(P-y)),C=Math.min(...w);return w.indexOf(C)}function getThumbInBoundsOffset(x,y,w){const C=x/2,O=linearScale([0,50],[0,C]);return(C-O(y)*w)*w}function getStepsBetweenValues(x){return x.slice(0,-1).map((y,w)=>x[w+1]-y)}function hasMinStepsBetweenValues(x,y){if(y>0){const w=getStepsBetweenValues(x);return Math.min(...w)>=y}return!0}function linearScale(x,y){return w=>{if(x[0]===x[1]||y[0]===y[1])return y[0];const C=(y[1]-y[0])/(x[1]-x[0]);return y[0]+C*(w-x[0])}}function getDecimalCount(x){return(String(x).split(".")[1]||"").length}function roundValue(x,y){const w=Math.pow(10,y);return Math.round(x*w)/w}var Root$1=Slider,Track=SliderTrack,Range=SliderRange,Thumb$1=SliderThumb;const QspVolumeSlider=({attrs:x})=>{const y=useAtomExports.useAtom(volume$),[w]=useTranslation(),[,C,P]=useAttributes(x,"span");return jsxRuntimeExports.jsxs(Root$1,{className:"qsp-volume-root",defaultValue:[y],max:100,step:1,style:C,...P,onValueChange:([O])=>volume$.set(O),children:[jsxRuntimeExports.jsx(Track,{className:"qsp-volume-slider-track",children:jsxRuntimeExports.jsx(Range,{className:"qsp-volume-slider-range"})}),jsxRuntimeExports.jsx(Thumb$1,{className:"qsp-volume-slider-thumb","aria-label":w("Volume")||void 0})]})},QspMuteToggle=({attrs:x})=>{const[y]=useTranslation(),[w,C,P]=useAttributes(x,"qsp-mute-toggle"),O=useAtomExports.useAtom(muted$);return jsxRuntimeExports.jsx(w,{role:"button",style:C,...P,onClick:()=>muted$.update($=>!$),children:y(O?"Unmute":"Mute")})},QspGlobalHotkeys=({attrs:x})=>{const[y,w,C]=useAttributes(x,"qsp-global-hotkeys"),{t:P}=useTranslation(),O=useAtomExports.useAtom(globalHotKeys$);return jsxRuntimeExports.jsx(y,{style:w,...C,children:O.map(($,L)=>jsxRuntimeExports.jsxs("qsp-hotkey",{children:[jsxRuntimeExports.jsx("qsp-hotkey-description",{children:P($.description)}),jsxRuntimeExports.jsx("qsp-hotkey-keys",{children:prettifyHotkeys($.keys).map((D,B)=>D.type==="key"?jsxRuntimeExports.jsx("qsp-hotkey-key",{children:D.symbol},B):D.symbol)})]},L))})},QspGameHotkeys=({attrs:x})=>{const[y,w,C]=useAttributes(x,"qsp-game-hotkeys"),P=useAtomExports.useAtom(currentGame$);if(!P)return null;const{hotkeys:O}=P;return O?jsxRuntimeExports.jsx(y,{style:w,...C,children:Object.entries(O).map(([$,L],D)=>jsxRuntimeExports.jsxs("qsp-hotkey",{children:[jsxRuntimeExports.jsx("qsp-hotkey-description",{children:L}),jsxRuntimeExports.jsx("qsp-hotkey-keys",{children:prettifyHotkeys($).map((B,U)=>B.type==="key"?jsxRuntimeExports.jsx("qsp-hotkey-key",{children:B.symbol},U):B.symbol)})]},D))}):null},QspLocaleSelect=({attrs:x})=>{const{i18n:y}=useTranslation(),[,w,C]=useAttributes(x,"qsp-locale-select"),P=O=>{y.changeLanguage(O.target.value)};return jsxRuntimeExports.jsx("select",{value:y.language,...C,style:w,onChange:P,children:locales$1.map(O=>jsxRuntimeExports.jsx("option",{value:O.value,children:O.label},O.value))})},QspGameTitle=({attrs:x})=>{const[y]=useTranslation(),[w,C,P]=useAttributes(x,"qsp-game-title"),O=useAtomExports.useAtom(currentGameEntry$);return jsxRuntimeExports.jsx(w,{...P,style:C,children:O?.author||y("n/a")})},QspGameAuthor=({attrs:x})=>{const[y]=useTranslation(),[w,C,P]=useAttributes(x,"qsp-game-author"),O=useAtomExports.useAtom(currentGameEntry$);return jsxRuntimeExports.jsx(w,{...P,style:C,children:O?.author||y("n/a")})},QspGameVersion=({attrs:x})=>{const[y]=useTranslation(),[w,C,P]=useAttributes(x,"qsp-game-version"),O=useAtomExports.useAtom(currentGameEntry$);return jsxRuntimeExports.jsx(w,{...P,style:C,children:O?.version||y("n/a")})},QspGameDescription=({attrs:x})=>{const[y,w,C]=useAttributes(x,"qsp-game-description"),P=useAtomExports.useAtom(currentGameDescription$);return jsxRuntimeExports.jsx(y,{...C,style:w,children:jsxRuntimeExports.jsx(Markup,{content:P})})},defaultTransform=(x,y)=>{const w=x.tagName.toLowerCase(),C=extractAttributes(x);return jsxRuntimeExports.jsx(Element$1,{tagName:w,attrs:C,children:y})},defaultTransformers={"qsp-scrollable"(x,y){const{scroll:w,...C}=extractAttributes(x),P=isScrollType(w)?w:void 0;return jsxRuntimeExports.jsx(QspScrollable,{scroll:P,attrs:C,children:y})},"qsp-main"(x,y){return jsxRuntimeExports.jsx(QspMain,{attrs:extractAttributes(x),children:y})},"qsp-main-content"(x){return jsxRuntimeExports.jsx(QspMainContent,{attrs:extractAttributes(x)})},"qsp-stats"(x,y){const w=extractAttributes(x);return jsxRuntimeExports.jsx(QspStats,{attrs:w,children:y})},"qsp-stats-content"(x){return jsxRuntimeExports.jsx(QspStatsContent,{attrs:extractAttributes(x)})},"qsp-actions"(x,y){const w=extractAttributes(x);return jsxRuntimeExports.jsx(QspActions,{attrs:w,children:y})},"qsp-actions-list"(x,y){return jsxRuntimeExports.jsx(QspActionsList,{attrs:extractAttributes(x),children:y})},"qsp-action"(x,y){return jsxRuntimeExports.jsx(QspActionItem,{attrs:extractAttributes(x),children:y})},"qsp-action-name"(x){return jsxRuntimeExports.jsx(QspActionName,{attrs:extractAttributes(x)})},"qsp-action-image"(x){return jsxRuntimeExports.jsx(QspActionImage,{attrs:extractAttributes(x)})},"qsp-action-index"(x){return jsxRuntimeExports.jsx(QspActionIndex,{attrs:extractAttributes(x)})},"qsp-objects"(x,y){const w=extractAttributes(x);return jsxRuntimeExports.jsx(QspObjects,{attrs:w,children:y})},"qsp-objects-list"(x,y){return jsxRuntimeExports.jsx(QspObjectsList,{attrs:extractAttributes(x),children:y})},"qsp-object"(x,y){return jsxRuntimeExports.jsx(QspObjectItem,{attrs:extractAttributes(x),children:y})},"qsp-object-name"(x){return jsxRuntimeExports.jsx(QspObjectName,{attrs:extractAttributes(x)})},"qsp-object-image"(x){return jsxRuntimeExports.jsx(QspObjectImage,{attrs:extractAttributes(x)})},"qsp-object-index"(x){return jsxRuntimeExports.jsx(QspObjectIndex,{attrs:extractAttributes(x)})},"qsp-cmd"(x,y){const w=extractAttributes(x);return jsxRuntimeExports.jsx(QspCmd,{attrs:w,children:y})},"qsp-cmd-input"(x){const y=extractAttributes(x);return jsxRuntimeExports.jsx(QspCmdInput,{attrs:y})},"qsp-view"(x,y){const w=extractAttributes(x),C="modal"in w;return view$.actions.setIsModal(C),jsxRuntimeExports.jsx(QspView,{attrs:w,modal:C,children:y})},"qsp-view-image"(x){const y=extractAttributes(x);return jsxRuntimeExports.jsx(QspViewImage,{attrs:y})},"qsp-menu"(x,y){const{"show-as":w,"show-at":C,"offset-x":P,"offset-y":O,...$}=extractAttributes(x);return jsxRuntimeExports.jsx(QspMenu,{showAs:w,showAt:C,offsetX:P?parseInt(P,10):0,offsetY:O?parseInt(O,10):0,attrs:$,children:y})},"qsp-menu-list"(x,y){return jsxRuntimeExports.jsx(QspMenuList,{attrs:extractAttributes(x),children:y})},"qsp-menu-item"(x,y){return jsxRuntimeExports.jsx(QspMenuItem,{attrs:extractAttributes(x),children:y})},"qsp-menu-name"(x){return jsxRuntimeExports.jsx(QspMenuItemName,{attrs:extractAttributes(x)})},"qsp-menu-image"(x){return jsxRuntimeExports.jsx(QspMenuItemImage,{attrs:extractAttributes(x)})},"qsp-menu-index"(x){return jsxRuntimeExports.jsx(QspMenuItemIndex,{attrs:extractAttributes(x)})},"qsp-msg"(x,y){return jsxRuntimeExports.jsx(QspMsg,{attrs:extractAttributes(x),children:y})},"qsp-msg-content"(x){return jsxRuntimeExports.jsx(QspMsgContent,{attrs:extractAttributes(x)})},"qsp-input"(x,y){const w=extractAttributes(x);return jsxRuntimeExports.jsx(QspInput,{attrs:w,children:y})},"qsp-input-content"(x){return jsxRuntimeExports.jsx(QspInputContent,{attrs:extractAttributes(x)})},"qsp-input-tag"(x){const y=extractAttributes(x);return jsxRuntimeExports.jsx(QspInputTag,{attrs:y})},"qsp-close-button"(x,y){const w=extractAttributes(x);return jsxRuntimeExports.jsx(QspCloseButton,{attrs:w,children:y})},"qsp-ok-button"(x,y){const w=extractAttributes(x);return jsxRuntimeExports.jsx(QspOkButton,{attrs:w,children:y})},"qsp-cancel-button"(x,y){const w=extractAttributes(x);return jsxRuntimeExports.jsx(QspCancelButton,{attrs:w,children:y})},"qsp-pause-screen"(x,y){const w=extractAttributes(x);return jsxRuntimeExports.jsx(QspPauseScreen,{attrs:w,children:y})},"qsp-pause-screen-content"(x,y){const w=extractAttributes(x);return jsxRuntimeExports.jsx(QspPauseScreenContent,{attrs:w,children:y})},"qsp-pause-screen-panel"(x,y){const{name:w,...C}=extractAttributes(x);return w?jsxRuntimeExports.jsx(QspPauseScreenPanel,{name:w,attrs:C,children:y}):null},"qsp-slots-list"(x,y){return jsxRuntimeExports.jsx(QspSlotsList,{attrs:extractAttributes(x),children:y})},"qsp-save-slot"(x,y){return jsxRuntimeExports.jsx(QspSlot,{attrs:extractAttributes(x),index:-1,children:y})},"qsp-save-file"(x,y){const{path:w,...C}=extractAttributes(x);return jsxRuntimeExports.jsx(QspNamedSlot,{attrs:C,path:w,children:y})},"qsp-quick-save"(x,y){return jsxRuntimeExports.jsx(QspNamedSlot,{attrs:extractAttributes(x),path:QUICK_SAVE_KEY,children:y})},"qsp-slot-index"(x){return jsxRuntimeExports.jsx(QspSlotIndex,{attrs:extractAttributes(x)})},"qsp-slot-date"(x,y){return jsxRuntimeExports.jsx(QspSlotDate,{attrs:extractAttributes(x),children:y})},"qsp-variable"(x){const{name:y,key:w,index:C}=extractAttributes(x);return jsxRuntimeExports.jsx(QspVariable,{name:y,vkey:w,index:C?parseInt(C,10):void 0})},"qsp-region"(x){const{name:y,...w}=extractAttributes(x),C="scrollable"in w;return jsxRuntimeExports.jsx(QspRegion,{name:y,scrollable:C,attrs:w})},"qsp-layer"(x,y){const{name:w,index:C,...P}=extractAttributes(x);return jsxRuntimeExports.jsx(QspLayer,{name:w,index:parseInt(C),attrs:P,children:y})},"qsp-show"(x,y){const w=x.getAttribute("when")||"";let C=["is-not",w.startsWith("$")?"":"0"];for(const P of conditionAttributes)x.hasAttribute(P)&&(C=[P,x.getAttribute(P)||""]);return jsxRuntimeExports.jsx(QspShow,{variable:w,condition:C,children:y})},"qsp-style"(x){const y=x.getAttribute("from")||"";return jsxRuntimeExports.jsx(QspStyle,{from:y})},"qsp-t"(x){const y=x.innerText;return jsxRuntimeExports.jsx(QspT,{children:y})},a:(x,y)=>{const{href:w,...C}=extractAttributes(x);if(w){if(w.toLowerCase().startsWith("exec:"))return jsxRuntimeExports.jsx(Link,{attrs:C,exec:w.substring(5),children:y});if(parseInt(w)>0)return jsxRuntimeExports.jsx(Link,{attrs:C,act:parseInt(w),children:y})}const P={href:w,...C};return jsxRuntimeExports.jsx(HtmlLink,{attrs:P,children:y})},select(x,y){return jsxRuntimeExports.jsx(HtmlSelect,{attrs:extractAttributes(x),children:y})},textarea(x){const y=extractAttributes(x);return y.value=x.innerText,jsxRuntimeExports.jsx(HtmlTextarea,{attrs:y})},input(x){return jsxRuntimeExports.jsx(HtmlInput,{attrs:extractAttributes(x)})},img(x){const{src:y,...w}=extractAttributes(x);return jsxRuntimeExports.jsx(HtmlImg,{src:y,attrs:w})},form(x,y){return jsxRuntimeExports.jsx(HtmlForm,{attrs:extractAttributes(x),children:y})},"qsp-volume-slider"(x){return jsxRuntimeExports.jsx(QspVolumeSlider,{attrs:extractAttributes(x)})},"qsp-mute-toggle"(x){return jsxRuntimeExports.jsx(QspMuteToggle,{attrs:extractAttributes(x)})},"qsp-global-hotkeys"(x){return jsxRuntimeExports.jsx(QspGlobalHotkeys,{attrs:extractAttributes(x)})},"qsp-game-hotkeys"(x){return jsxRuntimeExports.jsx(QspGameHotkeys,{attrs:extractAttributes(x)})},"qsp-locale-select"(x){return jsxRuntimeExports.jsx(QspLocaleSelect,{attrs:extractAttributes(x)})},"qsp-game-title"(x){return jsxRuntimeExports.jsx(QspGameTitle,{attrs:extractAttributes(x)})},"qsp-game-author"(x){return jsxRuntimeExports.jsx(QspGameAuthor,{attrs:extractAttributes(x)})},"qsp-game-version"(x){return jsxRuntimeExports.jsx(QspGameVersion,{attrs:extractAttributes(x)})},"qsp-game-description"(x){return jsxRuntimeExports.jsx(QspGameDescription,{attrs:extractAttributes(x)})}},Strike=({children:x,attrs:y})=>{const[,w,C]=useAttributes(y,"span"),P={...w,textDecoration:"line-through"};return jsxRuntimeExports.jsx("span",{...C,style:P,children:x})},Big=({children:x,attrs:y})=>{const[,w,C]=useAttributes(y,"span"),P={...w,fontSize:"larger"};return jsxRuntimeExports.jsx("span",{...C,style:P,children:x})},Tt=({children:x,attrs:y})=>{const[,w,C]=useAttributes(y,"span"),P={...w,fontFamily:"monospace"};return jsxRuntimeExports.jsx("span",{...C,style:P,children:x})},Hr=({attrs:x,width:y,size:w,noshade:C})=>{const[,P,O]=useAttributes(x,"hr"),$={...P,borderWidth:Number(w)>0?"1px":"1px 0 0 0",borderStyle:C?"solid":"inset",borderColor:"rgb(128, 128, 128)",borderRadius:"1px",height:`${w||"0"}px`,margin:"0.5em auto",width:y||"100%",backgroundColor:C?"rgb(128, 128, 128)":"transparent"};return jsxRuntimeExports.jsx("div",{...O,style:$})},Table=({border:x,cellspacing:y,cellpadding:w,align:C,valign:P,attrs:O,children:$})=>{const[,L,{className:D,...B}]=useAttributes(O,"table"),U={...L,textAlign:C??"left",verticalAlign:P??"top","--table-border-width":`${x||0}px`,"--table-cellspacing":`${y||0}px`,"--table-cellpadding":`${w||0}px`},k=D?`${D} classic-table`:"classic-table";return jsxRuntimeExports.jsx("table",{...B,style:U,className:k,children:$})},Area=({href:x,attrs:y})=>{const w=reactExports.useCallback(O=>{O.preventDefault(),O.stopPropagation(),onLinkClicked(x)},[x]),[,C,P]=useAttributes(y,"area");return jsxRuntimeExports.jsx("area",{...P,style:C,href:"#",onClick:w,alt:""})},Video=({children:x,attrs:y})=>{const[,w,C]=useAttributes(y,"video");return jsxRuntimeExports.jsx("video",{style:w,...C,preload:"auto",loop:!0,autoPlay:!0,children:x})},QspCL=({children:x})=>{const y=useAtomExports.useAtom(qspGuiLayout$);return y?jsxRuntimeExports.jsx("qsp-cl",{children:jsxRuntimeExports.jsx(Markup,{content:y})}):jsxRuntimeExports.jsx("qsp-cl",{children:x})},QspCLLayer=x=>{const y=useSetup(C=>{const P=C?.focus(L=>L.children),O=atom(L=>{const D={};return React.Children.forEach(L(P),B=>{reactExports.isValidElement(B)&&B.type===QspCLDock&&(D[B.props.place]={visibility:B.props.visibility,size:B.props.size})}),D}),$=atom(L=>{const D=L(O),B={};for(const[U,k]of Object.entries(D))(k.visibility?.split("|").some(W=>{const G=penelAtoms[W];return G?L(G):!1})??!0)&&(B[U]=k);return B});return atom(L=>{const D=L($),B=["center"];let U="1fr",k=1,H="1fr";return D.left&&(B[0]="left "+B[0],k++,U=`${D.left.size}px `+U),D.right&&(B[0]+=" right",k++,U+=` ${D.right.size}px`),D.top&&(H=`${D.top.size}px `+H,B.unshift("top ".repeat(k).trim())),D.bottom&&(H+=` ${D.bottom.size}px`,B.push("bottom ".repeat(k).trim())),{gridTemplateColumns:U,gridTemplateRows:H,gridTemplateAreas:'"'+B.join('" "')+'"'}})},x),w=useAtomExports.useAtom(y);return jsxRuntimeExports.jsx("qsp-cl-layer",{style:w,children:x.children})},penelAtoms={input:isCmdVisible$,imgview:view$.focus(x=>x.isOpen),objs:isObjsVisible$,acts:isActsVisible$,vars:isStatsVisible$},QspCLDock=x=>{const y=useSetup(C=>atom(P=>{const O=C.focus(L=>L.visibility),$=P(O);return $?$.split("|").some(L=>{const D=penelAtoms[L];return D?P(D):!1}):!0}),x);return useAtomExports.useAtom(y)?jsxRuntimeExports.jsx("qsp-cl-dock",{"data-place":x.place,children:x.children}):null},QspCLPane=x=>{const y=useSetup(C=>atom(P=>{const O=C.focus(D=>D.visibility),$=P(O);if(!$)return!0;const L=penelAtoms[$];return L?P(L):!1}),x);return useAtomExports.useAtom(y)?jsxRuntimeExports.jsx("qsp-cl-pane",{style:{flexGrow:x.proportion},children:x.children}):null},QspCLDefaults=()=>{const x=useAtomExports.useAtom(qspGuiCfg$);if(!x)return null;const y=[];if(x.BackColor){const C=convertColor(x.BackColor,!1);if(C){const P=invertColor(C);y.push(`--cl-background-color: ${C}`),y.push(`--cl-background-color-contrast: ${getContrastColor(C)}`),y.push(`--cl-background-color-inverted: ${P}`),y.push(`--cl-background-color-inverted-contrast: ${getContrastColor(P)}`)}}if(x.FontColor){const C=convertColor(x.FontColor,!1);C&&y.push(`--cl-color: ${C}`)}if(x.LinkColor){const C=convertColor(x.LinkColor,!1);C&&y.push(`--cl-link-color: ${C}`)}x.FontSize&&y.push(`--cl-font-size: ${x.FontSize}pt`),x.FontName&&y.push(`--cl-font-name: ${x.FontName}`);const w=`qsp-game-root, #portal-container {${y.join(";")}}`;return jsxRuntimeExports.jsx("style",{children:w})},classicTransformers={font:(x,y)=>jsxRuntimeExports.jsx(Font,{size:x.getAttribute("size"),attrs:extractAttributes(x),children:y}),big:(x,y)=>jsxRuntimeExports.jsx(Big,{attrs:extractAttributes(x),children:y}),hr:x=>{const{width:y,size:w,noshade:C,...P}=extractAttributes(x);return jsxRuntimeExports.jsx(Hr,{attrs:P,width:y,size:w,noshade:!!C})},tt:(x,y)=>jsxRuntimeExports.jsx(Tt,{attrs:extractAttributes(x),children:y}),strike:(x,y)=>jsxRuntimeExports.jsx(Strike,{attrs:extractAttributes(x),children:y}),tbody:(x,y)=>jsxRuntimeExports.jsx("tbody",{children:y.filter(w=>typeof w!="string")}),table:(x,y)=>{const{border:w="0",cellspacing:C="0",cellpadding:P="1",align:O,valign:$,...L}=extractAttributes(x);return jsxRuntimeExports.jsx(Table,{align:O,valign:$,border:Number(w),cellspacing:Number(C),cellpadding:Number(P),attrs:L,children:y.filter(D=>typeof D!="string")})},area:x=>{const{href:y,...w}=extractAttributes(x);return jsxRuntimeExports.jsx(Area,{href:y||"",attrs:w})},video:(x,y)=>jsxRuntimeExports.jsx(Video,{attrs:extractAttributes(x),children:y}),"qsp-cl":(x,y)=>jsxRuntimeExports.jsx(QspCL,{children:y}),"qsp-cl-layer":(x,y)=>jsxRuntimeExports.jsx(QspCLLayer,{children:y}),"qsp-cl-dock":(x,y)=>{const w=x.getAttribute("place")||"center",C=x.getAttribute("visibility"),P=x.getAttribute("size")??0;return jsxRuntimeExports.jsx(QspCLDock,{place:w,visibility:C,size:Number(P),children:y})},"qsp-cl-pane":(x,y)=>{const w=x.getAttribute("proportion")??1,C=x.getAttribute("visibility");return jsxRuntimeExports.jsx(QspCLPane,{visibility:C,proportion:Number(w),children:y})},"qsp-cl-defaults"(){return jsxRuntimeExports.jsx(QspCLDefaults,{})}},AERO_EFFECTS={fade:{from:{opacity:0},enter:{opacity:1},leave:{opacity:0}},blur:{from:{opacity:0,filter:"blur(15px)"},enter:{opacity:1,filter:"blur(0px)"},leave:{opacity:0,filter:"blur(15px)"}},l_slide:{from:{transform:"translate3d(-100%, 0, 0)"},enter:{transform:"translate3d(0%, 0, 0)"},leave:{transform:"translate3d(-100%, 0, 0)"}},r_slide:{from:{transform:"translate3d(100%, 0, 0)"},enter:{transform:"translate3d(0%, 0, 0)"},leave:{transform:"translate3d(100%, 0, 0)"}},u_slide:{from:{transform:"translate3d(0, 100%, 0)"},enter:{transform:"translate3d(0, 0%, 0)"},leave:{transform:"translate3d(0, 100%, 0)"}},d_slide:{from:{transform:"translate3d(0, -100%, 0)"},enter:{transform:"translate3d(0, 0%, 0)"},leave:{transform:"translate3d(0, -100%, 0)"}},iris:{from:{clipPath:"circle(0% at center)"},enter:{clipPath:"circle(120% at center)"},leave:{clipPath:"circle(0% at center)"}},photo:{from:{opacity:0,boxShadow:"inset 0 0 0 1000px #fff"},enter:{opacity:1,boxShadow:"inset 0 0 0 0px #fff"},leave:{opacity:0,boxShadow:"inset 0 0 0 1000px #fff"}},rotate:{from:{transform:"rotate3d(0, 0, 1, -90deg)",opacity:0},enter:{transform:"rotate3d(0, 0, 1, 0deg)",opacity:1},leave:{transform:"rotate3d(0, 0, 1, -90deg)",opacity:0}},v_squeeze:{from:{transform:"scale(0, 1.5)",opacity:0,transformOrigin:"center"},enter:{transform:"scale(1, 1)",opacity:1,transformOrigin:"center"},leave:{transform:"scale(0, 1.5)",opacity:0,transformOrigin:"center"}},h_squeeze:{from:{transform:"scale(1.5, 0)",opacity:0,transformOrigin:"center"},enter:{transform:"scale(1, 1)",opacity:1,transformOrigin:"center"},leave:{transform:"scale(1.5, 0)",opacity:0,transformOrigin:"center"}},zoom:{from:{transform:"scale(0, 0)",opacity:0,transformOrigin:"center"},enter:{transform:"scale(1, 1)",opacity:1,transformOrigin:"center"},leave:{transform:"scale(0, 0)",opacity:0,transformOrigin:"center"}},wipe1:{from:{clipPath:"polygon(0 0, 0 0%, 0% 0%, 0% 0)"},enter:{clipPath:"polygon(0 0, 0 100%, 100% 100%, 100% 0)"},leave:{clipPath:"polygon(0 0, 0 0%, 0% 0%, 0% 0)"}},wipe2:{from:{clipPath:"polygon(100% 0, 100% 0%, 100% 0%, 100% 0)"},enter:{clipPath:"polygon(0% 0, 0% 100%, 100% 100%, 100% 0)"},leave:{clipPath:"polygon(100% 0, 100% 0, 100% 0%, 100% 0)"}},wipe3:{from:{clipPath:"polygon(100% 100%, 100% 100%, 100% 100%, 100% 100%)"},enter:{clipPath:"polygon(0% 0%, 0% 100%, 100% 100%, 100% 0%)"},leave:{clipPath:"polygon(100% 100%, 100% 100%, 100% 100%, 100% 100%)"}},wipe4:{from:{clipPath:"polygon(0% 100%, 0% 100%, 0% 100%, 0% 100%)"},enter:{clipPath:"polygon(0% 0%, 0% 100%, 100% 100%, 100% 0%)"},leave:{clipPath:"polygon(0% 100%, 0% 100%, 0% 100%, 0% 100%)"}},quake:{from:{transform:"translate3d(0px, 0px, 0)",opacity:0},enter:[{transform:"translate3d(-2px, 3px, 0)",opacity:.1},{transform:"translate3d(4px, -5px, 0)",opacity:.2},{transform:"translate3d(-8px, 6px, 0)",opacity:.3},{transform:"translate3d(8px, -3px, 0)",opacity:.4},{transform:"translate3d(-8px, 6px, 0)",opacity:.5},{transform:"translate3d(8px, -3px, 0)",opacity:.6},{transform:"translate3d(-8px, 6px, 0)",opacity:.7},{transform:"translate3d(4px, -5px, 0)",opacity:.8},{transform:"translate3d(-2px, 3px, 0)",opacity:.9}],leave:[{transform:"translate3d(-2px, 3px, 0)",opacity:.9},{transform:"translate3d(4px, -5px, 0)",opacity:.8},{transform:"translate3d(-8px, 6px, 0)",opacity:.7},{transform:"translate3d(8px, -3px, 0)",opacity:.6},{transform:"translate3d(-8px, 6px, 0)",opacity:.5},{transform:"translate3d(8px, -3px, 0)",opacity:.4},{transform:"translate3d(-8px, 6px, 0)",opacity:.3},{transform:"translate3d(4px, -5px, 0)",opacity:.2},{transform:"translate3d(-2px, 3px, 0)",opacity:.1}]}};function useAeroEffect(x,y,w){const C=useQspVariable(y,"",0,"");let P=useQspVariable(w,"",0,500);const O=AERO_EFFECTS[C]??{};return O.enter&&Array.isArray(O.enter)&&(P/=O.enter.length),useTransition(x,{...O,config:{duration:P}})}const AeroQspMenu=({attrs:x,children:y})=>{const[w,C,P]=useAttributes(x,"qsp-menu"),O=useAtomExports.useAtom(menu$),$=useClickCoordinates(),L=useQspVariable("FIXED_SIZE_MENU","",0,0),D=useQspVariable("MENU_X","",0,-1),B=useQspVariable("MENU_Y","",0,-1),U=useAeroEffect(O.isOpen,"$MENU_EFFECT","MENU_EFFECT_TIME"),k=D<0||B<0,H=k?$.x:D,W=k?$.y:B;let G=P.className||"";return L&&(G+=" aero-fixed-menu"),jsxRuntimeExports.jsxs(Root2$3,{open:O.isOpen,onOpenChange:()=>menu$.actions.close(),children:[jsxRuntimeExports.jsx(Trigger$2,{asChild:!0,children:jsxRuntimeExports.jsx("div",{"data-menu-trigger":!0,style:{position:"absolute",left:H,top:W}})}),U((Q,Z)=>Z?jsxRuntimeExports.jsx(Portal2$1,{forceMount:!0,container:document.getElementById("portal-container"),children:jsxRuntimeExports.jsx(Content2$3,{align:"start",forceMount:!0,asChild:!0,children:jsxRuntimeExports.jsx(animated.div,{style:Q,children:jsxRuntimeExports.jsx(w,{style:C,...P,className:G.trim(),children:y})})})}):null)]})},AeroQspMenuList=({attrs:x,children:y})=>{const w=useAtomExports.useAtom(aeroMenuWithParsedName$),[C,P,O]=useAttributes(x,"qsp-menu-list");let $=1;return jsxRuntimeExports.jsx(C,{style:P,...O,children:w.map((L,D)=>L.name[0]==="-"?jsxRuntimeExports.jsx("qsp-menu-separator",{},L.key):jsxRuntimeExports.jsx(menuContext.Provider,{value:{item:L,index:D,displayIndex:$++},children:React.Children.map(y,B=>React.cloneElement(B))},L.key))})},AeroQspMenuItem=({attrs:x})=>{const{item:y,index:w}=reactExports.useContext(menuContext),[C,P,{useFormat:O,useSelectedFormat:$,...L}]=useAttributes(x,"qsp-menu-item"),D={...P,"--menu-item-image":y.image?`url("${y.image}")`:""},B=()=>{selectedMenuItem$.set(w)},U=()=>{selectedMenuItem$.set(-1)},k=H=>{H.preventDefault(),menu$.actions.select(w)};return jsxRuntimeExports.jsx(Item2,{asChild:!0,children:jsxRuntimeExports.jsx(C,{...L,style:D,onClick:k,onMouseOver:B,onMouseLeave:U,children:jsxRuntimeExports.jsx(Markup,{content:y.name})})})},AeroStyles=()=>{const x=useAtomExports.useAtom(currentAeroWidth$),y=useAtomExports.useAtom(currentAeroHeight$),w=`
  qsp-game-root, #portal-container {
    --aero-player-width: ${x}px;
    --aero-player-height: ${y}px;
  }`;return jsxRuntimeExports.jsx("style",{children:w})},AeroQspView=({attrs:x,children:y})=>{const[w,C,P]=useAttributes(x,"qsp-view"),O=useAtomExports.useAtom(view$),$=useQspVariable("ALWAYS_SHOW_VIEW","",0,0),L=useAeroEffect(O.isOpen,"$VIEW_EFFECT","VIEW_EFFECT_TIME"),D={...C,"--view-image":`url("${O.path}")`},B=()=>{$||view$.actions.close()};return L((U,k)=>k?jsxRuntimeExports.jsx(animated.div,{style:U,children:jsxRuntimeExports.jsx(w,{...P,style:D,onClick:B,children:y})}):null)},AeroQspActionsList=({attrs:x,children:y})=>{const w=useAtomExports.useAtom(aeroActionsWithParsedName$),[C,P,O]=useAttributes(x,"qsp-actions-list");return jsxRuntimeExports.jsx(C,{style:P,...O,children:w.map(($,L)=>jsxRuntimeExports.jsx(actionContext.Provider,{value:{action:$,index:L},children:React.Children.map(y,D=>React.cloneElement(D))},$.key))})},AeroQspActionItem=({attrs:x})=>{const{action:y,index:w}=reactExports.useContext(actionContext),[C,P,{useFormat:O,useSelectedFormat:$,...L}]=useAttributes(x,"qsp-action"),D=y.image?y.image:"",B={...P,"--action-image":y.image?`url("${D}")`:""},U=()=>{selectAction(w)},k=()=>{selectAction(-1)},H=W=>{W.preventDefault(),selectedAction$.value<0&&selectAction(w),execSelectedAction()};return jsxRuntimeExports.jsx(C,{...L,style:B,onMouseOver:U,onMouseLeave:k,onClick:H,children:jsxRuntimeExports.jsx(Markup,{content:y.name})})},AeroQspStatsContent=({attrs:x})=>{const[y,w,{useFormat:C,...P}]=useAttributes(x,"qsp-stats-content"),{content:O,key:$}=useAtomExports.useAtom(aeroParsedStatsContent$);return reactExports.createElement(y,{style:w,...P,key:$},jsxRuntimeExports.jsx(Markup,{content:O}))},AeroQspMainContent=({attrs:x})=>{const{content:y,key:w}=useAtomExports.useAtom(aeroParsedMainContent$),[C,P,{useFormat:O,...$}]=useAttributes(x,"qsp-main-content");return reactExports.createElement(C,{style:P,...$,key:w},jsxRuntimeExports.jsx(Markup,{content:y}))},AeroOverlay=reactExports.forwardRef(()=>{const x=useQspVariable("DISABLESHADE","",0,0),y=useSpring({from:{opacity:0},to:{opacity:.8}});return x?null:jsxRuntimeExports.jsx(Overlay,{forceMount:!0,asChild:!0,children:jsxRuntimeExports.jsx(animated.div,{style:y,className:"qsp-overlay"})})}),AeroQspMsg=({attrs:x,children:y})=>{const[w,C,P]=useAttributes(x,"qsp-msg"),O=useAtomExports.useAtom(msg$),$=useClickCoordinates(),L=useQspVariable("MSG_X","",0,200),D=useQspVariable("MSG_Y","",0,165),B=useAeroEffect(O.isOpen,"$MSG_EFFECT","MSG_EFFECT_TIME"),U=L<0||D<0,k={"--aero-msg-x":`${U?$.x:L}px`,"--aero-msg-y":`${U?$.y:D}px`},H=`qsp-dialog-container${U?" at-mouse":""}`;function W(){msg$.actions.close()}return jsxRuntimeExports.jsx(buttonContext.Provider,{value:{okAction:W,cancelAction:W},children:jsxRuntimeExports.jsx(Root$6,{open:O.isOpen,onOpenChange:W,children:B((G,Q)=>Q?jsxRuntimeExports.jsxs(Portal$3,{forceMount:!0,container:document.getElementById("portal-container"),children:[jsxRuntimeExports.jsx(AeroOverlay,{}),jsxRuntimeExports.jsx(Content$1,{forceMount:!0,asChild:!0,style:k,children:jsxRuntimeExports.jsx(animated.div,{style:G,className:H,children:jsxRuntimeExports.jsx(w,{style:C,...P,children:y})})})]}):null)})})},AeroQspMsgContent=({attrs:x})=>{const{content:y,key:w}=useAtomExports.useAtom(aeroParsedMsgContent$),[C,P,{useFormat:O,...$}]=useAttributes(x,"qsp-msg-content");return reactExports.createElement(C,{style:P,...$,key:w},jsxRuntimeExports.jsx(QspScrollable,{attrs:{},children:jsxRuntimeExports.jsx(Markup,{content:y})}))},AeroQspInput=({attrs:x,children:y})=>{const w=useAtomExports.useAtom(input$),[C,P,O]=useAttributes(x,"qsp-input"),$=useClickCoordinates(),L=useQspVariable("INPUT_X","",0,200),D=useQspVariable("INPUT_Y","",0,165),B=useAeroEffect(w.isOpen,"$INPUT_EFFECT","INPUT_EFFECT_TIME"),U=L<0||D<0,k={"--aero-input-x":`${U?$.x:L}px`,"--aero-input-y":`${U?$.y:D}px`},H=`qsp-dialog-container${U?" at-mouse":""}`;return jsxRuntimeExports.jsx(buttonContext.Provider,{value:{okAction:W=>{W.preventDefault(),input$.actions.finish()},cancelAction:W=>{W.preventDefault(),input$.actions.close()}},children:jsxRuntimeExports.jsx(Root$6,{open:w.isOpen,onOpenChange:()=>input$.actions.close(),children:B((W,G)=>G?jsxRuntimeExports.jsxs(Portal$3,{forceMount:!0,container:document.getElementById("portal-container"),children:[jsxRuntimeExports.jsx(AeroOverlay,{}),jsxRuntimeExports.jsx(Content$1,{forceMount:!0,asChild:!0,style:k,children:jsxRuntimeExports.jsx(animated.div,{style:W,className:H,children:jsxRuntimeExports.jsx("form",{onSubmit:Q=>{Q.preventDefault(),input$.actions.finish()},children:jsxRuntimeExports.jsx(C,{style:P,...O,children:y})})})})]}):null)})})},AeroQspInputContent=({attrs:x})=>{const{content:y,key:w}=useAtomExports.useAtom(aeroParsedInputContent$),[C,P,{useFormat:O,...$}]=useAttributes(x,"qsp-input-content");return jsxRuntimeExports.jsx(Description$1,{asChild:!0,children:reactExports.createElement(C,{style:P,...$,key:w},jsxRuntimeExports.jsx(QspScrollable,{attrs:{},children:jsxRuntimeExports.jsx(Markup,{content:y})}))})},AeroQspObjectsList=({attrs:x,children:y})=>{const w=useAtomExports.useAtom(aeroObjectsWithParsedName$),[C,P,O]=useAttributes(x,"qsp-objects-list");return jsxRuntimeExports.jsx(C,{style:P,...O,children:w.map(($,L)=>jsxRuntimeExports.jsx(objectContext.Provider,{value:{object:$,index:L},children:React.Children.map(y,D=>React.cloneElement(D))},$.key))})},AeroQspObjectItem=({attrs:x})=>{const[y,w,{useFormat:C,useSelectedFormat:P,...O}]=useAttributes(x,"qsp-object"),{object:$,index:L}=reactExports.useContext(objectContext),D={...w,"--object-image":$.image?`url("${$.image}")`:""},B=()=>{selectedObject$.set(L)},U=()=>{selectedObject$.set(-1)},k=()=>{selectObject(L)};return jsxRuntimeExports.jsx(y,{...O,style:D,onClick:k,onMouseOver:B,onMouseLeave:U,children:jsxRuntimeExports.jsx(Markup,{content:$.name})})},AeroNewlocEffect=({children:x})=>{const y=useQspVariable("$NEWLOC_EFFECT","",0,"");let w=useQspVariable("NEWLOC_EFFECT_TIME","",0,500);const C=!!useQspVariable("NEWLOC_EFFECT_SEQ","",0,0),P=AERO_EFFECTS[y]??{};P.enter&&Array.isArray(P.enter)&&(w/=P.enter.length);const O=useAtomExports.useAtom(newLocHash$),$=useTransition(O,{...P,key:O,exitBeforeEnter:C,...C?{}:{leave:{...P.leave,config:{duration:0}}},config:{duration:w},onRest(){mainContent$.set(nextMainContent$.value)}});return reactExports.useEffect(()=>{(!y||!C)&&mainContent$.set(nextMainContent$.value)},[y,O]),y?$((L,D)=>jsxRuntimeExports.jsx(animated.div,{style:L,children:x},D)):x},aeroTransformers={"aero-newloc-effect"(x,y){return jsxRuntimeExports.jsx(AeroNewlocEffect,{children:y})},"aero-styles"(){return jsxRuntimeExports.jsx(AeroStyles,{})},"qsp-main-content"(x){return jsxRuntimeExports.jsx(AeroQspMainContent,{attrs:extractAttributes(x)})},"qsp-stats-content"(x){return jsxRuntimeExports.jsx(AeroQspStatsContent,{attrs:extractAttributes(x)})},"qsp-actions-list"(x,y){return jsxRuntimeExports.jsx(AeroQspActionsList,{attrs:extractAttributes(x),children:y})},"qsp-action"(x){return jsxRuntimeExports.jsx(AeroQspActionItem,{attrs:extractAttributes(x)})},"qsp-objects-list"(x,y){return jsxRuntimeExports.jsx(AeroQspObjectsList,{attrs:extractAttributes(x),children:y})},"qsp-object"(x,y){return jsxRuntimeExports.jsx(AeroQspObjectItem,{attrs:extractAttributes(x),children:y})},"qsp-menu"(x,y){const w=extractAttributes(x);return jsxRuntimeExports.jsx(AeroQspMenu,{attrs:w,children:y})},"qsp-menu-list"(x,y){return jsxRuntimeExports.jsx(AeroQspMenuList,{attrs:extractAttributes(x),children:y})},"qsp-menu-item"(x,y){const w=extractAttributes(x);return jsxRuntimeExports.jsx(AeroQspMenuItem,{attrs:w,children:y})},"qsp-msg"(x,y){return jsxRuntimeExports.jsx(AeroQspMsg,{attrs:extractAttributes(x),children:y})},"qsp-msg-content"(x){return jsxRuntimeExports.jsx(AeroQspMsgContent,{attrs:extractAttributes(x)})},"qsp-input"(x,y){const w=extractAttributes(x);return jsxRuntimeExports.jsx(AeroQspInput,{attrs:w,children:y})},"qsp-input-content"(x){return jsxRuntimeExports.jsx(AeroQspInputContent,{attrs:extractAttributes(x)})},"qsp-view"(x,y){const w=extractAttributes(x);return jsxRuntimeExports.jsx(AeroQspView,{attrs:w,modal:"modal"in w,children:y})}},currentTransformers$=atom(x=>{switch(x(currentGameMode$)){case"classic":return{...defaultTransformers,...classicTransformers};case"aero":return{...defaultTransformers,...classicTransformers,...aeroTransformers};case"qspider":default:return defaultTransformers}}),transform=(x,y,w)=>{const C=currentTransformers$.value[x.tagName.toLowerCase()];return C?C(x,y,w):defaultTransform(x,y)},templateParser=new HtmlParser({transform}),currentGameDescription$=atom(x=>{const y=x(currentGameEntry$);return y?.description?templateParser.parse(y.description):[]}),playerTemplate$=atom(x=>{const w=x(currentThemeData$).qsp_player??{template:"",attrs:{}},{attrs:C,template:P}=w;return{attrs:C,template:templateParser.parse(P,!1)}}),qspGuiLayout$=atom(x=>{const y=x(qspGuiCfg$);if(!y)return null;const w=x(defaultClassicTheme$).qsp_player?.template??"",C=buildLayoutTree(y.Panels);let P="";C.layer&&(P+=convertLayer(C.layer,y.Docks,w));for(const O of C.floating)P+=convertPane(O,w,!0);return templateParser.parse(P,!1)});let mainContentKey=0;const parsedMainContent$=atom(x=>{const y=x(mainContent$);return x(hasBrowserTranslation$)||(mainContentKey=0),{content:templateParser.parse(y),key:mainContentKey++}});let statsContentKey=0;const parsedStatsContent$=atom(x=>{const y=x(statsContent$);return x(hasBrowserTranslation$)||(statsContentKey=0),{content:templateParser.parse(y),key:statsContentKey++}});let msgKey=0;const parsedMsgContent$=atom(x=>{const y=x(msg$);return x(hasBrowserTranslation$)||(msgKey=0),{content:templateParser.parse(y.content),key:msgKey++}});let inputKey=0;const parsedInputContent$=atom(x=>{const y=x(input$);return x(hasBrowserTranslation$)||(inputKey=0),{content:templateParser.parse(y.content),key:inputKey++}});let actionsKey=0;const actionsWithParsedName$=atom(x=>{const y=x(actions$);return x(hasBrowserTranslation$)||(actionsKey=0),y.map(w=>({...w,name:templateParser.parse(w.name),key:actionsKey++}))});let objectsKey=0;const objectsWithParsedName$=atom(x=>{const y=x(objects$);return x(hasBrowserTranslation$)||(objectsKey=0),y.map(w=>({...w,name:templateParser.parse(w.title||w.name),key:objectsKey++}))});let menuKey=0;const menuWithParsedName$=atom(x=>{const y=x(menu$);return x(hasBrowserTranslation$)||(menuKey=0),y.items.map(w=>({...w,name:templateParser.parse(w.name),key:menuKey++}))});function createVariableAtom(x,y){const w=atom(y??"");return qspApi$.watch(C=>{C?.watchVariable(x,P=>{w.set(P||y||"")})}),w}const mainFormat$=createVariableAtom("$MAIN_FORMAT"),aeroParsedMainContent$=atom(x=>{let y=x(mainContent$);const w=x(mainFormat$);return w&&(y=w.replace(TEXT_PLACEHOLDER,y)),x(hasBrowserTranslation$)||(mainContentKey=0),{content:templateParser.parse(y),key:mainContentKey++}}),statsFormat$=createVariableAtom("$STATS_FORMAT"),aeroParsedStatsContent$=atom(x=>{let y=x(statsContent$);const w=x(statsFormat$);return w&&(y=w.replace(TEXT_PLACEHOLDER,y)),x(hasBrowserTranslation$)||(statsContentKey=0),{content:templateParser.parse(y),key:statsContentKey++}}),inputFormat$=createVariableAtom("$INPUT_FORMAT"),aeroParsedInputContent$=atom(x=>{let y=x(input$).content;const w=x(inputFormat$);return w&&(y=w.replace(TEXT_PLACEHOLDER,y)),x(hasBrowserTranslation$)||(inputKey=0),{content:templateParser.parse(y),key:inputKey++}}),msgFormat$=createVariableAtom("$MSG_FORMAT"),aeroParsedMsgContent$=atom(x=>{let y=x(msg$).content;const w=x(msgFormat$);return w&&(y=w.replace(TEXT_PLACEHOLDER,y)),x(hasBrowserTranslation$)||(msgKey=0),{content:templateParser.parse(y),key:msgKey++}}),actionFormat$=createVariableAtom("$ACTION_FORMAT",DEFAULT_LIST_FORMAT),selectedActionFormat$=createVariableAtom("$SEL_ACTION_FORMAT",DEFAULT_SELECTED_LIST_FORMAT),aeroActionsWithParsedName$=atom(x=>{const y=x(actions$),w=x(actionFormat$),C=x(selectedActionFormat$),P=x(selectedAction$);return x(hasBrowserTranslation$)||(actionsKey=0),y.map((O,$)=>{const L=$===P?C:w;return{...O,name:templateParser.parse(L.replace(TEXT_PLACEHOLDER,O.name).replace(IMAGE_PLACEHOLDER,O.image||"")),key:actionsKey++}})}),objectsFormat$=createVariableAtom("$OBJECT_FORMAT",DEFAULT_LIST_FORMAT),selectedObjectFormat$=createVariableAtom("$SEL_OBJECT_FORMAT",DEFAULT_SELECTED_LIST_FORMAT),aeroObjectsWithParsedName$=atom(x=>{const y=x(objects$),w=x(objectsFormat$),C=x(selectedObjectFormat$),P=x(selectedObject$);return x(hasBrowserTranslation$)||(objectsKey=0),y.map((O,$)=>{const L=$===P?C:w,D=O.title||O.name;return{...O,name:templateParser.parse(L.replace(TEXT_PLACEHOLDER,D).replace(IMAGE_PLACEHOLDER,O.image||"")),key:objectsKey++}})}),menuFormat$=createVariableAtom("$MENU_FORMAT",DEFAULT_LIST_FORMAT),selectedMenuFormat$=createVariableAtom("$SEL_MENU_FORMAT",DEFAULT_SELECTED_LIST_FORMAT),aeroMenuWithParsedName$=atom(x=>{const y=x(menu$),w=x(menuFormat$),C=x(selectedMenuFormat$),P=x(selectedMenuItem$);return x(hasBrowserTranslation$)||(menuKey=0),y.items.map((O,$)=>{const L=$===P?C:w;return{...O,name:templateParser.parse(L.replace(TEXT_PLACEHOLDER,O.name).replace(IMAGE_PLACEHOLDER,O.image||"")),key:menuKey++}})}),QspPlayer=()=>{const{attrs:x,template:y}=useAtomExports.useAtom(playerTemplate$),[w,C,P]=useAttributes(x,"qsp-player");return jsxRuntimeExports.jsx(w,{style:C,...P,children:jsxRuntimeExports.jsx(Markup,{content:y})})},loadingMessage$=atom(""),QspiderLoader=()=>{const x=useAtomExports.useAtom(loadingMessage$);return jsxRuntimeExports.jsxs("div",{className:"q-loader",children:[jsxRuntimeExports.jsxs("div",{className:"q-book",children:[jsxRuntimeExports.jsxs("div",{className:"q-inner",children:[jsxRuntimeExports.jsx("div",{className:"q-left"})," ",jsxRuntimeExports.jsx("div",{className:"q-middle"})," ",jsxRuntimeExports.jsx("div",{className:"q-right"})]}),jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{}),jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})," ",jsxRuntimeExports.jsx("li",{})]})]}),x&&jsxRuntimeExports.jsx("div",{className:"q-loader__message",children:x})]})},ClickCoordinates=()=>{const{x,y}=useClickCoordinates(),w=`qsp-game-root {--mouse-x: ${x}px;--mouse-y:${y}px;}`;return jsxRuntimeExports.jsx("style",{children:w})};var ROOT_NAME="AlertDialog",[createAlertDialogContext]=createContextScope(ROOT_NAME,[createDialogScope]),useDialogScope=createDialogScope(),AlertDialog=x=>{const{__scopeAlertDialog:y,...w}=x,C=useDialogScope(y);return jsxRuntimeExports.jsx(Root$6,{...C,...w,modal:!0})};AlertDialog.displayName=ROOT_NAME;var TRIGGER_NAME$2="AlertDialogTrigger",AlertDialogTrigger=reactExports.forwardRef((x,y)=>{const{__scopeAlertDialog:w,...C}=x,P=useDialogScope(w);return jsxRuntimeExports.jsx(Trigger$3,{...P,...C,ref:y})});AlertDialogTrigger.displayName=TRIGGER_NAME$2;var PORTAL_NAME$2="AlertDialogPortal",AlertDialogPortal=x=>{const{__scopeAlertDialog:y,...w}=x,C=useDialogScope(y);return jsxRuntimeExports.jsx(Portal$3,{...C,...w})};AlertDialogPortal.displayName=PORTAL_NAME$2;var OVERLAY_NAME="AlertDialogOverlay",AlertDialogOverlay=reactExports.forwardRef((x,y)=>{const{__scopeAlertDialog:w,...C}=x,P=useDialogScope(w);return jsxRuntimeExports.jsx(Overlay,{...P,...C,ref:y})});AlertDialogOverlay.displayName=OVERLAY_NAME;var CONTENT_NAME$2="AlertDialogContent",[AlertDialogContentProvider,useAlertDialogContentContext]=createAlertDialogContext(CONTENT_NAME$2),Slottable$1=createSlottable("AlertDialogContent"),AlertDialogContent=reactExports.forwardRef((x,y)=>{const{__scopeAlertDialog:w,children:C,...P}=x,O=useDialogScope(w),$=reactExports.useRef(null),L=useComposedRefs(y,$),D=reactExports.useRef(null);return jsxRuntimeExports.jsx(WarningProvider,{contentName:CONTENT_NAME$2,titleName:TITLE_NAME$1,docsSlug:"alert-dialog",children:jsxRuntimeExports.jsx(AlertDialogContentProvider,{scope:w,cancelRef:D,children:jsxRuntimeExports.jsxs(Content$1,{role:"alertdialog",...O,...P,ref:L,onOpenAutoFocus:composeEventHandlers(P.onOpenAutoFocus,B=>{B.preventDefault(),D.current?.focus({preventScroll:!0})}),onPointerDownOutside:B=>B.preventDefault(),onInteractOutside:B=>B.preventDefault(),children:[jsxRuntimeExports.jsx(Slottable$1,{children:C}),jsxRuntimeExports.jsx(DescriptionWarning,{contentRef:$})]})})})});AlertDialogContent.displayName=CONTENT_NAME$2;var TITLE_NAME$1="AlertDialogTitle",AlertDialogTitle=reactExports.forwardRef((x,y)=>{const{__scopeAlertDialog:w,...C}=x,P=useDialogScope(w);return jsxRuntimeExports.jsx(Title,{...P,...C,ref:y})});AlertDialogTitle.displayName=TITLE_NAME$1;var DESCRIPTION_NAME$1="AlertDialogDescription",AlertDialogDescription=reactExports.forwardRef((x,y)=>{const{__scopeAlertDialog:w,...C}=x,P=useDialogScope(w);return jsxRuntimeExports.jsx(Description$1,{...P,...C,ref:y})});AlertDialogDescription.displayName=DESCRIPTION_NAME$1;var ACTION_NAME$1="AlertDialogAction",AlertDialogAction=reactExports.forwardRef((x,y)=>{const{__scopeAlertDialog:w,...C}=x,P=useDialogScope(w);return jsxRuntimeExports.jsx(Close$1,{...P,...C,ref:y})});AlertDialogAction.displayName=ACTION_NAME$1;var CANCEL_NAME="AlertDialogCancel",AlertDialogCancel=reactExports.forwardRef((x,y)=>{const{__scopeAlertDialog:w,...C}=x,{cancelRef:P}=useAlertDialogContentContext(CANCEL_NAME,w),O=useDialogScope(w),$=useComposedRefs(y,P);return jsxRuntimeExports.jsx(Close$1,{...O,...C,ref:$})});AlertDialogCancel.displayName=CANCEL_NAME;var DescriptionWarning=({contentRef:x})=>{const y=`\`${CONTENT_NAME$2}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${CONTENT_NAME$2}\` by passing a \`${DESCRIPTION_NAME$1}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${CONTENT_NAME$2}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return reactExports.useEffect(()=>{document.getElementById(x.current?.getAttribute("aria-describedby"))||console.warn(y)},[y,x]),null},Root2$2=AlertDialog,Portal2=AlertDialogPortal,Overlay2=AlertDialogOverlay,Content2$2=AlertDialogContent,Cancel=AlertDialogCancel,Title2=AlertDialogTitle,Description2=AlertDialogDescription;const QspErrorAlert=()=>{const x=useAtomExports.useAtom(qspError$),{t:y}=useTranslation();return x?jsxRuntimeExports.jsx(Root2$2,{open:!0,onOpenChange:()=>qspError$.set(null),children:jsxRuntimeExports.jsxs(Portal2,{container:document.getElementById("portal-container"),children:[jsxRuntimeExports.jsx(Overlay2,{className:"qsp-overlay"}),jsxRuntimeExports.jsx(Content2$2,{className:"qsp-dialog-container qsp-error-container",children:jsxRuntimeExports.jsxs("div",{className:"qsp-error",children:[jsxRuntimeExports.jsx(Title2,{children:y("Error")}),jsxRuntimeExports.jsxs(Description2,{children:[y("Error"),": ",y(x.description),jsxRuntimeExports.jsx("br",{}),x.errorCode>=0?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[y("Error code"),": ",x.errorCode,jsxRuntimeExports.jsx("br",{})]}):"",x.location&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[y("Location"),": ",x.location,jsxRuntimeExports.jsx("br",{})]}),x.actionIndex>=0?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[y("Action index"),": ",x.actionIndex," ",jsxRuntimeExports.jsx("br",{})]}):"",x.line>=0?y("Line")+": "+x.line:"",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("code",{children:x.lineSrc})]}),jsxRuntimeExports.jsx("div",{className:"qsp-dialog-buttons",children:jsxRuntimeExports.jsx(Cancel,{className:"qsp-button",children:y("Close")})})]})})]})}):null},QspCSSVariables=()=>{const x=useAtomExports.useAtom(currentCssVariables$);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:x.map(y=>jsxRuntimeExports.jsx(QspCssVariable,{definition:y},y.name))})},imageSizes$=atom({}),QspCssVariableResource=x=>{const y=useSetup(L=>{const D=L.focus(B=>B.url);return D.watch(B=>{if(B=prepareUrl(B),!!B&&!imageSizes$.value[B]){const U=document.createElement("img");U.onload=()=>{const k={width:U.naturalWidth,height:U.naturalHeight};imageSizes$.update(H=>({...H,[B]:k}))},U.src=B}}),atom(B=>{const U=prepareUrl(B(D));return B(imageSizes$)[U]??{width:0,height:0}})},x),w=useAtomExports.useAtom(y);let{url:C}=x;C=prepareUrl(C);const{name:P}=x,O=x.withSize?`${P}-w: ${w.width}px; ${P}-h: ${w.height}px`:"",$=`qsp-game-root, #portal-container {${P}: ${C?`url("${C}")`:"none"};${O}}`;return jsxRuntimeExports.jsx("style",{children:$})};function prepareUrl(x){return x.startsWith("qspider:")?x=x.replace("qspider:",initialBaseUrl$.value):x=baseUrl$.value+x,x.replace("\\","/")}const QspCssVariable=({definition:x})=>{const y=useQspVariable(x.from,"",0,""),w=[];if(x.type==="color"){const P=y?convertColor(Number(y)):x.defaultValue;if(P&&(w.push(`${x.name}: ${P}`),x.withContrast&&w.push(`${x.name}-contrast: ${getContrastColor(P)}`),x.withInverted)){const O=invertColor(P);w.push(`${x.name}-inverted: ${O}`),x.withContrast&&w.push(`${x.name}-inverted-contrast: ${getContrastColor(O)}`)}}else if(x.type==="unit"){const P=`${y||x.defaultValue}${x.unit||""}`;w.push(`${x.name}: ${P}`)}else{if(x.type==="resource")return!y&&!x.defaultValue?null:jsxRuntimeExports.jsx(QspCssVariableResource,{name:x.name,url:y||x.defaultValue,withSize:x.withSize});y&&w.push(`${x.name}: ${y}`)}if(!w.length)return null;const C=`qsp-game-root, #portal-container {${w.join("; ")}}`;return jsxRuntimeExports.jsx("style",{children:C})},WaitLock=()=>{const x=useAtomExports.useAtom(wait$);return useEventListener("keypress",y=>{wait$.value&&(y.preventDefault(),y.stopPropagation(),finishWait())},document),x?jsxRuntimeExports.jsx("div",{className:"wait-lock",onClick:finishWait}):null},QspCSSLinks=()=>{const x=useAtomExports.useAtom(currentCssLinks$),y=useAtomExports.useAtom(initialBaseUrl$);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:x.map(w=>jsxRuntimeExports.jsx("link",{rel:"stylesheet",href:w.startsWith("qspider:")?w.replace("qspider:",y):w},w))})},QspScriptLinks=()=>{const x=useAtomExports.useAtom(currentScriptLinks$),y=useAtomExports.useAtom(initialBaseUrl$);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:x.map(w=>jsxRuntimeExports.jsx("script",{src:w.startsWith("qspider:")?w.replace("qspider:",y):w},w))})};function _objectWithoutPropertiesLoose(x,y){if(x==null)return{};var w={},C=Object.keys(x),P,O;for(O=0;O<C.length;O++)P=C[O],!(y.indexOf(P)>=0)&&(w[P]=x[P]);return w}var _excluded$T=["color"],CheckIcon=reactExports.forwardRef(function(x,y){var w=x.color,C=w===void 0?"currentColor":w,P=_objectWithoutPropertiesLoose(x,_excluded$T);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},P,{ref:y}),reactExports.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:C,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$W=["color"],ChevronDownIcon=reactExports.forwardRef(function(x,y){var w=x.color,C=w===void 0?"currentColor":w,P=_objectWithoutPropertiesLoose(x,_excluded$W);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},P,{ref:y}),reactExports.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:C,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$Z=["color"],ChevronUpIcon=reactExports.forwardRef(function(x,y){var w=x.color,C=w===void 0?"currentColor":w,P=_objectWithoutPropertiesLoose(x,_excluded$Z);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},P,{ref:y}),reactExports.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:C,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$1q=["color"],Cross1Icon=reactExports.forwardRef(function(x,y){var w=x.color,C=w===void 0?"currentColor":w,P=_objectWithoutPropertiesLoose(x,_excluded$1q);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},P,{ref:y}),reactExports.createElement("path",{d:"M12.8536 2.85355C13.0488 2.65829 13.0488 2.34171 12.8536 2.14645C12.6583 1.95118 12.3417 1.95118 12.1464 2.14645L7.5 6.79289L2.85355 2.14645C2.65829 1.95118 2.34171 1.95118 2.14645 2.14645C1.95118 2.34171 1.95118 2.65829 2.14645 2.85355L6.79289 7.5L2.14645 12.1464C1.95118 12.3417 1.95118 12.6583 2.14645 12.8536C2.34171 13.0488 2.65829 13.0488 2.85355 12.8536L7.5 8.20711L12.1464 12.8536C12.3417 13.0488 12.6583 13.0488 12.8536 12.8536C13.0488 12.6583 13.0488 12.3417 12.8536 12.1464L8.20711 7.5L12.8536 2.85355Z",fill:C,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$1L=["color"],DoubleArrowDownIcon=reactExports.forwardRef(function(x,y){var w=x.color,C=w===void 0?"currentColor":w,P=_objectWithoutPropertiesLoose(x,_excluded$1L);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},P,{ref:y}),reactExports.createElement("path",{d:"M3.85355 2.14645C3.65829 1.95118 3.34171 1.95118 3.14645 2.14645C2.95118 2.34171 2.95118 2.65829 3.14645 2.85355L7.14645 6.85355C7.34171 7.04882 7.65829 7.04882 7.85355 6.85355L11.8536 2.85355C12.0488 2.65829 12.0488 2.34171 11.8536 2.14645C11.6583 1.95118 11.3417 1.95118 11.1464 2.14645L7.5 5.79289L3.85355 2.14645ZM3.85355 8.14645C3.65829 7.95118 3.34171 7.95118 3.14645 8.14645C2.95118 8.34171 2.95118 8.65829 3.14645 8.85355L7.14645 12.8536C7.34171 13.0488 7.65829 13.0488 7.85355 12.8536L11.8536 8.85355C12.0488 8.65829 12.0488 8.34171 11.8536 8.14645C11.6583 7.95118 11.3417 7.95118 11.1464 8.14645L7.5 11.7929L3.85355 8.14645Z",fill:C,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$1O=["color"],DoubleArrowUpIcon=reactExports.forwardRef(function(x,y){var w=x.color,C=w===void 0?"currentColor":w,P=_objectWithoutPropertiesLoose(x,_excluded$1O);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},P,{ref:y}),reactExports.createElement("path",{d:"M11.1464 6.85355C11.3417 7.04882 11.6583 7.04882 11.8536 6.85355C12.0488 6.65829 12.0488 6.34171 11.8536 6.14645L7.85355 2.14645C7.65829 1.95118 7.34171 1.95118 7.14645 2.14645L3.14645 6.14645C2.95118 6.34171 2.95118 6.65829 3.14645 6.85355C3.34171 7.04882 3.65829 7.04882 3.85355 6.85355L7.5 3.20711L11.1464 6.85355ZM11.1464 12.8536C11.3417 13.0488 11.6583 13.0488 11.8536 12.8536C12.0488 12.6583 12.0488 12.3417 11.8536 12.1464L7.85355 8.14645C7.65829 7.95118 7.34171 7.95118 7.14645 8.14645L3.14645 12.1464C2.95118 12.3417 2.95118 12.6583 3.14645 12.8536C3.34171 13.0488 3.65829 13.0488 3.85355 12.8536L7.5 9.20711L11.1464 12.8536Z",fill:C,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$3m=["color"],PauseIcon=reactExports.forwardRef(function(x,y){var w=x.color,C=w===void 0?"currentColor":w,P=_objectWithoutPropertiesLoose(x,_excluded$3m);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},P,{ref:y}),reactExports.createElement("path",{d:"M6.04995 2.74998C6.04995 2.44623 5.80371 2.19998 5.49995 2.19998C5.19619 2.19998 4.94995 2.44623 4.94995 2.74998V12.25C4.94995 12.5537 5.19619 12.8 5.49995 12.8C5.80371 12.8 6.04995 12.5537 6.04995 12.25V2.74998ZM10.05 2.74998C10.05 2.44623 9.80371 2.19998 9.49995 2.19998C9.19619 2.19998 8.94995 2.44623 8.94995 2.74998V12.25C8.94995 12.5537 9.19619 12.8 9.49995 12.8C9.80371 12.8 10.05 12.5537 10.05 12.25V2.74998Z",fill:C,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$4i=["color"],SunIcon=reactExports.forwardRef(function(x,y){var w=x.color,C=w===void 0?"currentColor":w,P=_objectWithoutPropertiesLoose(x,_excluded$4i);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},P,{ref:y}),reactExports.createElement("path",{d:"M7.5 0C7.77614 0 8 0.223858 8 0.5V2.5C8 2.77614 7.77614 3 7.5 3C7.22386 3 7 2.77614 7 2.5V0.5C7 0.223858 7.22386 0 7.5 0ZM2.1967 2.1967C2.39196 2.00144 2.70854 2.00144 2.90381 2.1967L4.31802 3.61091C4.51328 3.80617 4.51328 4.12276 4.31802 4.31802C4.12276 4.51328 3.80617 4.51328 3.61091 4.31802L2.1967 2.90381C2.00144 2.70854 2.00144 2.39196 2.1967 2.1967ZM0.5 7C0.223858 7 0 7.22386 0 7.5C0 7.77614 0.223858 8 0.5 8H2.5C2.77614 8 3 7.77614 3 7.5C3 7.22386 2.77614 7 2.5 7H0.5ZM2.1967 12.8033C2.00144 12.608 2.00144 12.2915 2.1967 12.0962L3.61091 10.682C3.80617 10.4867 4.12276 10.4867 4.31802 10.682C4.51328 10.8772 4.51328 11.1938 4.31802 11.3891L2.90381 12.8033C2.70854 12.9986 2.39196 12.9986 2.1967 12.8033ZM12.5 7C12.2239 7 12 7.22386 12 7.5C12 7.77614 12.2239 8 12.5 8H14.5C14.7761 8 15 7.77614 15 7.5C15 7.22386 14.7761 7 14.5 7H12.5ZM10.682 4.31802C10.4867 4.12276 10.4867 3.80617 10.682 3.61091L12.0962 2.1967C12.2915 2.00144 12.608 2.00144 12.8033 2.1967C12.9986 2.39196 12.9986 2.70854 12.8033 2.90381L11.3891 4.31802C11.1938 4.51328 10.8772 4.51328 10.682 4.31802ZM8 12.5C8 12.2239 7.77614 12 7.5 12C7.22386 12 7 12.2239 7 12.5V14.5C7 14.7761 7.22386 15 7.5 15C7.77614 15 8 14.7761 8 14.5V12.5ZM10.682 10.682C10.8772 10.4867 11.1938 10.4867 11.3891 10.682L12.8033 12.0962C12.9986 12.2915 12.9986 12.608 12.8033 12.8033C12.608 12.9986 12.2915 12.9986 12.0962 12.8033L10.682 11.3891C10.4867 11.1938 10.4867 10.8772 10.682 10.682ZM5.5 7.5C5.5 6.39543 6.39543 5.5 7.5 5.5C8.60457 5.5 9.5 6.39543 9.5 7.5C9.5 8.60457 8.60457 9.5 7.5 9.5C6.39543 9.5 5.5 8.60457 5.5 7.5ZM7.5 4.5C5.84315 4.5 4.5 5.84315 4.5 7.5C4.5 9.15685 5.84315 10.5 7.5 10.5C9.15685 10.5 10.5 9.15685 10.5 7.5C10.5 5.84315 9.15685 4.5 7.5 4.5Z",fill:C,fillRule:"evenodd",clipRule:"evenodd"}))}),_excluded$4N=["color"],UpdateIcon=reactExports.forwardRef(function(x,y){var w=x.color,C=w===void 0?"currentColor":w,P=_objectWithoutPropertiesLoose(x,_excluded$4N);return reactExports.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},P,{ref:y}),reactExports.createElement("path",{d:"M1.90321 7.29677C1.90321 10.341 4.11041 12.4147 6.58893 12.8439C6.87255 12.893 7.06266 13.1627 7.01355 13.4464C6.96444 13.73 6.69471 13.9201 6.41109 13.871C3.49942 13.3668 0.86084 10.9127 0.86084 7.29677C0.860839 5.76009 1.55996 4.55245 2.37639 3.63377C2.96124 2.97568 3.63034 2.44135 4.16846 2.03202L2.53205 2.03202C2.25591 2.03202 2.03205 1.80816 2.03205 1.53202C2.03205 1.25588 2.25591 1.03202 2.53205 1.03202L5.53205 1.03202C5.80819 1.03202 6.03205 1.25588 6.03205 1.53202L6.03205 4.53202C6.03205 4.80816 5.80819 5.03202 5.53205 5.03202C5.25591 5.03202 5.03205 4.80816 5.03205 4.53202L5.03205 2.68645L5.03054 2.68759L5.03045 2.68766L5.03044 2.68767L5.03043 2.68767C4.45896 3.11868 3.76059 3.64538 3.15554 4.3262C2.44102 5.13021 1.90321 6.10154 1.90321 7.29677ZM13.0109 7.70321C13.0109 4.69115 10.8505 2.6296 8.40384 2.17029C8.12093 2.11718 7.93465 1.84479 7.98776 1.56188C8.04087 1.27898 8.31326 1.0927 8.59616 1.14581C11.4704 1.68541 14.0532 4.12605 14.0532 7.70321C14.0532 9.23988 13.3541 10.4475 12.5377 11.3662C11.9528 12.0243 11.2837 12.5586 10.7456 12.968L12.3821 12.968C12.6582 12.968 12.8821 13.1918 12.8821 13.468C12.8821 13.7441 12.6582 13.968 12.3821 13.968L9.38205 13.968C9.10591 13.968 8.88205 13.7441 8.88205 13.468L8.88205 10.468C8.88205 10.1918 9.10591 9.96796 9.38205 9.96796C9.65819 9.96796 9.88205 10.1918 9.88205 10.468L9.88205 12.3135L9.88362 12.3123C10.4551 11.8813 11.1535 11.3546 11.7585 10.6738C12.4731 9.86976 13.0109 8.89844 13.0109 7.70321Z",fill:C,fillRule:"evenodd",clipRule:"evenodd"}))}),noop=function(){};function on(x){for(var y=[],w=1;w<arguments.length;w++)y[w-1]=arguments[w];x&&x.addEventListener&&x.addEventListener.apply(x,y)}function off(x){for(var y=[],w=1;w<arguments.length;w++)y[w-1]=arguments[w];x&&x.removeEventListener&&x.removeEventListener.apply(x,y)}var isBrowser=typeof window<"u",defaultTarget=isBrowser?window:null,isListenerType1=function(x){return!!x.addEventListener},isListenerType2=function(x){return!!x.on},useEvent=function(x,y,w,C){w===void 0&&(w=defaultTarget),reactExports.useEffect(function(){if(y&&w)return isListenerType1(w)?on(w,x,y,C):isListenerType2(w)&&w.on(x,y,C),function(){isListenerType1(w)?off(w,x,y,C):isListenerType2(w)&&w.off(x,y,C)}},[x,y,w,JSON.stringify(C)])},useLocalStorage=function(x,y,w){if(!isBrowser)return[y,noop,noop];var C=JSON.parse,P=reactExports.useRef(function(U){try{var k=w?w.raw?String:w.serializer:JSON.stringify,H=localStorage.getItem(U);return H!==null?C(H):(y&&localStorage.setItem(U,k(y)),y)}catch{return y}}),O=reactExports.useState(function(){return P.current(x)}),$=O[0],L=O[1];reactExports.useLayoutEffect(function(){return L(P.current(x))},[x]);var D=reactExports.useCallback(function(U){try{var k=typeof U=="function"?U($):U;if(typeof k>"u")return;var H=void 0;w||(H=JSON.stringify(k)),localStorage.setItem(x,H),L(C(H))}catch{}},[x,L]),B=reactExports.useCallback(function(){try{localStorage.removeItem(x),L(void 0)}catch{}},[x,L]);return[$,D,B]};const TouchPauseButton=()=>{const[x,y]=useLocalStorage("qspider-pause-button-offset",0),[w,C]=reactExports.useState(!1),[P,O]=reactExports.useState(0);function $(B){O(B.touches[0].clientX-(x||0)),C(!0)}const L=reactExports.useCallback(B=>{w&&y(B.touches[0].clientX-P)},[w,y,P]);useEvent("touchmove",L);const D=reactExports.useCallback(()=>{w&&C(!1)},[w]);return useEvent("touchend",D),jsxRuntimeExports.jsx("div",{className:"qsp-touch-pause-button",children:jsxRuntimeExports.jsx("button",{onTouchStart:$,onTouchMove:L,onClick:openPauseScreen,style:{transform:`translateX(${x}px)`},children:jsxRuntimeExports.jsx(PauseIcon,{})})})},handler=throttle(x=>{if(x.key==="Escape"){if(!currentGameEntry$.value||wait$.value||msg$.value.isOpen||input$.value.isOpen||menu$.value.isOpen||isPauseScreenVisible$.value||view$.value.isOpen&&view$.value.isModal)return;x.preventDefault(),x.stopPropagation(),qspApi$.value?.readVariable("NOSAVE")&&requestedAction$.set("load"),openPauseScreen()}},10),GameRunner=()=>{const x=useAtomExports.useAtom(currentGameEntry$);return useEventListener("keydown",handler,document,{capture:!0}),x?jsxRuntimeExports.jsxs("qsp-game-root",{children:[jsxRuntimeExports.jsx(ClickCoordinates,{}),jsxRuntimeExports.jsx(QspCSSVariables,{}),jsxRuntimeExports.jsx(QspCSSLinks,{}),jsxRuntimeExports.jsx(QspPlayer,{}),jsxRuntimeExports.jsx(WaitLock,{}),jsxRuntimeExports.jsx(QspErrorAlert,{}),jsxRuntimeExports.jsx(QspScriptLinks,{}),isTouchDevice()&&jsxRuntimeExports.jsx(TouchPauseButton,{})]}):jsxRuntimeExports.jsx(QspiderLoader,{})};function navigateTo(x){browser.push(`?${x}`)}function goToGame(x){browser.push(`${initialBaseUrl$.value}?run=${x}`,{pause:!1})}const currentMode$=atom("shelf"),games$=atom({},x=>({add(y,w){getStorage().addGame(y,w).catch(console.error),x.update(C=>({...C,[y]:w}))},update(y,w){getStorage().updateGame(y,w).catch(console.error),x.update(C=>({...C,[y]:{...C[y]||{},...w}}))},remove(y){getStorage().removeGame(y).catch(console.error),x.update(w=>{const{[y]:C,...P}=w;return P})}})),gamesList$=atom(x=>Object.values(x(games$)).sort((y,w)=>y.title.localeCompare(w.title))),gameSourceMap$=atom(x=>{const y=new Map;for(const w of Object.values(x(games$)))if(w.meta?.source){const C=y.get(w.meta.source)??new Set;C.add(w.meta.source_id),y.set(w.meta.source,C)}return y});browser.listen(({location:x})=>{processLocationChange(x.search)});async function processLocationChange(x){const y=new URLSearchParams(x),w=y.get("run");if(w){if(currentGame$.value?.id===w){y.has("pause")?onOpenPauseScreen():onClosePauseScreen();return}await initDeferred$.value.promise;const C=games$.value[w];await runGame(C),y.has("pause")&&onOpenPauseScreen(),currentMode$.set("game")}else y.has("catalog")?(currentGameEntry$.value&&stopCurrentGame(),currentMode$.set("catalog")):(currentGameEntry$.value&&stopCurrentGame(),currentMode$.set("shelf"))}async function loadGamesFromStorage(){const x=await getStorage().getGames();x&&games$.set(x)}const SevenZipWasmUrl=""+new URL("7zz-CgkXYLdN.wasm",import.meta.url).href,isSupportedArchive=x=>{const y=new Uint8Array(x);return isZip(y)||isRar(y)||is7zip(y)},isZip=x=>x[0]===80&&x[1]===75&&(x[2]===3||x[2]===5||x[2]===7)&&(x[3]===4||x[3]===6||x[3]===8),isRar=x=>x[0]===82&&x[1]===97&&x[2]===114&&x[3]===33,is7zip=x=>x[0]===55&&x[1]===122&&x[2]===188&&x[3]===175&&x[4]===39&&x[5]===28;let sevenZip=null;async function initSevenZip(){if(sevenZip)return sevenZip;const x=(await __vitePreload(async()=>{const{default:w}=await import("./7zz.es6-hHtCdnYb.js");return{default:w}},[],import.meta.url)).default;sevenZip=await x({wasmBinary:await fetch(SevenZipWasmUrl).then(w=>w.arrayBuffer())});const y=sevenZip.FS.chmod;return sevenZip.FS.chmod=function(w,C,P){C&&y(w,C,P)},sevenZip}const read7zip=async x=>{const y=await initSevenZip(),w="archive.tmp",C=new Uint8Array(x),P=y.FS.open(w,"w+");y.FS.write(P,C,0,C.length),y.FS.close(P),y.FS.mkdir("game"),y.callMain(["x",w,"-ogame","-y","-r"]),y.FS.chdir("game");const O=readExtractedDirectory(y.FS,".");return removeDirRecursive(y.FS,"game"),y.FS.rmdir("game"),y.FS.unlink(w),O},readSupportedArchive=x=>read7zip(x),folderToSkip=new Set([".","..","__MACOSX"]),filesToSkip=new Set([".DS_Store"]);function readExtractedDirectory(x,y){const w={type:"dir",name:y,content:[]};x.chdir(y);for(const C of x.readdir(".")){if(folderToSkip.has(C)||filesToSkip.has(C))continue;const{mode:P}=x.lookupPath(C).node;x.isFile(P)?w.content.push({type:"file",name:C,data:x.readFile(C)}):x.isDir(P)&&w.content.push(readExtractedDirectory(x,C))}return x.chdir(".."),w}function removeDirRecursive(x,y){x.chdir(y);for(const w of x.readdir(".")){if(w==="."||w==="..")continue;const{mode:C}=x.lookupPath(w).node;x.isFile(C)?x.unlink(w):x.isDir(C)&&(removeDirRecursive(x,w),x.rmdir(w))}x.chdir("..")}async function importArchive(x,y,w){const C=getStorage();if(!C)throw new Error("missing storage");if(!isSupportedArchive(y))throw new Error("unsupporter archive format");const P=await readSupportedArchive(y),O=findRootDescriptorFolder(P);if(O){const[L,D]=O,B=await readGameDescriptor(D);for(const U of B)try{const k=getGameFolder(L,U.file);await storeFolderContent(U.id,k);const H=k.content.find(W=>W.type==="file"&&W.name===GAME_DESCRIPTOR_NAME);if(H){const[W]=await readGameDescriptor(H.data);Object.assign(U,W)}else{const W=stringify({game:[U]});await C.addGameResource(U.id,GAME_DESCRIPTOR_NAME,new TextEncoder().encode(W).buffer)}}catch(k){console.error(k)}return Promise.all(B.map(async U=>{const k=U.file.slice(U.file.lastIndexOf("/")+1),H=await C.prepareLoadConfig(U.id,k);let W=U.resources?.icon;return W&&(W=`${H.url}${W}`),{id:U.id,mode:U.mode,title:U.title,author:U.author,ported_by:U.ported_by,version:U.version,description:U.description,icon:W,loadConfig:{...H,descriptor:U}}}))}const $=findRootGameFileFolder(P);if($){const[L,D]=$,B=w?.id||cyrb53(x);if(await storeFolderContent(B,L),w){const H=stringify({game:[w]});await C.addGameResource(B,GAME_DESCRIPTOR_NAME,new TextEncoder().encode(H).buffer)}const U=await C.prepareLoadConfig(B,D);let k=w?.resources?.icon;return k&&(k=`${U.url}${k}`),[{id:B,title:w?.title||decodeURI(x.slice(x.lastIndexOf("/")+1)),mode:w?.mode||(x.endsWith("aqsp")?"aero":"classic"),author:w?.author,ported_by:w?.ported_by,version:w?.version,description:w?.description,icon:k,loadConfig:U}]}throw new Error("Game files not found inside archive")}function findRootDescriptorFolder(x){for(const y of x.content)if(y.type==="file"&&y.name===GAME_DESCRIPTOR_NAME)return[x,y.data];for(const y of x.content)if(y.type==="dir"){const w=findRootDescriptorFolder(y);if(w)return w}return null}function findRootGameFileFolder(x){let y=null,w=null;for(const C of x.content)C.type==="file"&&((C.name.endsWith(".qsp")||C.name.endsWith(".gam"))&&(y=C.name),C.name.endsWith(".qsps")&&(w=C.name));if(y)return[x,y];if(w)return[x,w];for(const C of x.content)if(C.type==="dir"){const P=findRootGameFileFolder(C);if(P)return P}return null}function getGameFolder(x,y){const w=y.split("/");w.pop();let C=x;for(const P of w){const O=C.content.find($=>$.type==="dir"&&$.name===P);if(!O)throw new Error(`Failed to find game file ${y} in archvive`);C=O}return C}async function readGameDescriptor(x){const w=await new Blob([x.slice()]).text();return parseToml(w).game}async function storeFolderContent(x,y,w=""){const C=getStorage();for(const P of y.content)if(P.type==="dir")await storeFolderContent(x,P,`${w}${P.name}/`);else{if(P.name===".DS_Store")continue;await C.addGameResource(x,`${w}${P.name}`,P.data.slice().buffer)}}async function importUrl(x,y,w){const C=new URL(x);C.hash="",C.search="";const P=C.toString(),O=await fetchProxyFallback(x).then(D=>{if(!D.ok)throw new Error(`Failed to load url ${x}`);return D.arrayBuffer()});if(isSupportedArchive(O))return importArchive(y||P,O,w);const $=P.slice(0,P.lastIndexOf("/")+1),L=P.replace($,"");if(L.endsWith(".cfg")){const D=new TextDecoder().decode(O),B=parseToml(D),U=[];for(const k of B.game){const H=`${$}${k.file}`;U.push(...await importUrl(H,k.file,k))}return U}else{const D=`${$}game.cfg`;try{const B=await fetchProxyFallback(D).then(H=>H.text()),k=parseToml(B).game.find(H=>H.file===L);if(!k)throw new Error("Config not found");return[{id:k.id,mode:k.mode,title:k.title,author:k.author,ported_by:k.ported_by,version:k.version,description:k.description,loadConfig:{url:$,entrypoint:k.file}}]}catch{return[{id:w?.id||cyrb53(P),title:w?.title||L,mode:w?.mode||"classic",author:w?.author,ported_by:w?.ported_by,version:w?.version,description:w?.description,loadConfig:{url:$,entrypoint:L,descriptor:w}}]}}}async function importFile(x,y){const w=getStorage();if(!w)throw new Error("missing storage");if(isSupportedArchive(y))return importArchive(x,y);const C=cyrb53(x);return await w.addGameResource(C,x,y),[{id:cyrb53(x),title:x,mode:"classic",loadConfig:await w.prepareLoadConfig(C,x)}]}const qspCatalogList$=atom([]),qspAuthorFilter$=atom(""),qspSortByField$=atom("title"),qspSortDirection$=atom("asc"),qspTitleSearch$=atom(""),onlyAero$=atom(!1),qspCatalogPreparedList$=atom(x=>{const y=x(qspCatalogList$),w=x(qspAuthorFilter$),C=x(qspSortByField$),P=x(qspSortDirection$),O=x(qspTitleSearch$).toLocaleLowerCase(),$=x(onlyAero$);let L=w?y.filter(D=>D.author.includes(w)):y.slice();return $&&(L=L.filter(D=>D.file_ext==="aqsp")),O&&(L=L.filter(D=>D.title.toLocaleLowerCase().includes(O))),L.sort(sortByField(C)),P==="desc"&&L.reverse(),L}),qspAuthors$=atom(x=>{const y=x(qspCatalogList$),w=new Set;for(const C of y){const P=C.author.split(",");for(const O of P)O.trim()&&w.add(O.trim())}return[...w].sort((C,P)=>C.localeCompare(P))}),catalogLoading$=atom("pending"),sourceName="org.qsp.games",CATALOG_URL="https://catalog.qspider.xyz/",GAMEKIT_URL="https://github.com/QSPFoundation/gamekit/releases/latest/download/games_package.zip",catalogLoadingDeferred=defer$1();async function loadQspCatalog(){if(catalogLoading$.value==="loading")return catalogLoadingDeferred.promise;catalogLoading$.value="loading";try{const x=await fetch(CATALOG_URL);if(!x.ok)throw new Error("Failed to load catalog");const y=await x.json();qspCatalogList$.value=y,catalogLoading$.value="loaded"}catch{catalogLoading$.value="failed"}return catalogLoadingDeferred.resolve(),catalogLoadingDeferred.promise}async function moveToShelf(x){try{const y=await importUrl(`${CATALOG_URL}game-source?id=${x.id}`,`qsp-game-${x.id}.${x.file_ext}`);for(const w of y)w.title=x.title,w.description=x.description,w.icon=`https://qsp.su/gamestock/image.php?name=${x.icon}`,w.author=x.author,w.ported_by=x.ported_by,w.version=x.version,w.meta={source:"org.qsp.games",source_id:String(x.id),source_date:x.mod_date},games$.actions.add(w.id,w),showNotice(instance.t("{{ name }} added to shelf",{name:x.title}));return y}catch(y){console.error(y),showError(`Failed to load source for game ${x.title}`)}return[]}async function importGameKit(){try{const x=await importUrl(GAMEKIT_URL,"games_package.zip");for(const y of x)games$.actions.add(y.id,y);showNotice(instance.t("{{ count }} games added to shelf",{count:x.length}))}catch(x){console.error(x),showError("Failed to load gamekit")}}function toggleSortDirection(){qspSortDirection$.update(x=>x==="asc"?"desc":"asc")}function sortByField(x){return(y,w)=>{const C=y[x],P=w[x];return typeof C=="number"&&typeof P=="number"?C-P:typeof C=="string"&&typeof P=="string"?C.localeCompare(P):C===P?0:C<P?1:-1}}const GameCard=x=>{const{game:y}=x,w=useSetup(U=>{const k=U.focus(H=>H.game.description);return atom(H=>templateParser.parse(H(k)??""))},x),{t:C}=useTranslation(),P=reactExports.useCallback(()=>{games$.actions.remove(y.id)},[y.id]),O=useSetup(U=>{const k=U.focus(H=>H.game);return atom(H=>{const W=H(k).meta?.source_id;if(!W)return null;const G=parseInt(W);return H(qspCatalogList$).find(Q=>Q.id===G)})},x),$=useAtomExports.useAtom(O),L=useAtomExports.useAtom(w),D=y.meta&&$?y.meta.source_date<$.mod_date:!1,B=()=>{!D||!$||moveToShelf($)};return jsxRuntimeExports.jsx(Root$6,{children:jsxRuntimeExports.jsxs("div",{className:"game-shelf__card","data-qa":`game-${y.id}`,children:[jsxRuntimeExports.jsxs("div",{className:"game-shelf__card-content",children:[jsxRuntimeExports.jsx("button",{type:"button",className:"q-ghost-button q-remove-game-button",title:"Remove from Game Shelf",onClick:P,children:jsxRuntimeExports.jsx(Cross1Icon,{})}),jsxRuntimeExports.jsxs("h3",{className:"game-shelf__card-title",children:[y.icon&&jsxRuntimeExports.jsx("img",{alt:"",src:y.icon,loading:"lazy"}),y.title]})]}),jsxRuntimeExports.jsxs("div",{className:"game-shelf__card-details",children:[y.author&&jsxRuntimeExports.jsxs("div",{className:"game-shelf__card-details-row",children:[C("Author"),": ",y.author]}),y.ported_by&&jsxRuntimeExports.jsxs("div",{className:"game-shelf__card-details-row",children:[C("Ported by"),": ",y.ported_by]}),y.version&&jsxRuntimeExports.jsxs("div",{className:"game-shelf__card-details-row",children:[C("Version"),": ",y.version]})]}),D&&jsxRuntimeExports.jsxs("div",{className:"game-shelf__card-actions",children:[C("Game has been updated in catalog"),jsxRuntimeExports.jsx("button",{className:"q-button",onClick:B,children:C("Update on shelf")})]}),jsxRuntimeExports.jsxs("div",{className:"game-shelf__card-actions",children:[y.description?jsxRuntimeExports.jsx(Trigger$3,{asChild:!0,children:jsxRuntimeExports.jsx("button",{className:"q-ghost-button",children:C("Read Description")})}):jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("a",{href:"#",onClick:U=>{U.preventDefault(),goToGame(y.id)},children:C("Run")})]}),y.description&&jsxRuntimeExports.jsxs(Portal$3,{children:[jsxRuntimeExports.jsx(Overlay,{className:"qspider-dialog-overlay"}),jsxRuntimeExports.jsxs(Content$1,{className:"qspider-dialog-content",children:[jsxRuntimeExports.jsxs(Root$5,{className:"qspider-scroll-root",children:[jsxRuntimeExports.jsx(Viewport$2,{className:"qspider-scroll-area",children:jsxRuntimeExports.jsx(Markup,{content:L})}),jsxRuntimeExports.jsx(Scrollbar,{className:"qspider-scroll-bar",orientation:"vertical",children:jsxRuntimeExports.jsx(Thumb$2,{className:"qspider-scroll-thumb"})})]}),jsxRuntimeExports.jsx(Close$1,{className:"q-ghost-button q-dialog-close","aria-label":"Close",children:jsxRuntimeExports.jsx(Cross1Icon,{})})]})]})]})})},GameShelf=()=>{const x=useAtomExports.useAtom(gamesList$),{t:y}=useTranslation();return jsxRuntimeExports.jsx("div",{className:"game-shelf",children:x.length>0?jsxRuntimeExports.jsx("div",{className:"game-shelf__list",children:x.map(w=>jsxRuntimeExports.jsx(GameCard,{game:w},w.id))}):jsxRuntimeExports.jsx("div",{className:"game-shelf__empty",children:y("Game shelf is empty")})})},sizes=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],byteSize=1024;function formatBytes(x,y=2){if(x===0)return"0 Bytes";const w=Math.floor(Math.log(x)/Math.log(byteSize));return parseFloat((x/Math.pow(byteSize,w)).toFixed(y))+" "+sizes[w]}const CatalogGameCard=x=>{const{t:y}=useTranslation(),w=useSetup(k=>{const H=k.focus(W=>W.game.id);return atom(W=>{const G=W(gameSourceMap$).get(sourceName),Q=String(W(H));return G?.has(Q)})},x),C=useSetup(k=>{const H=k.focus(W=>W.game.description);return atom(W=>templateParser.parse(W(H)))},x),P=useAtomExports.useAtom(w),O=useAtomExports.useAtom(C),{game:$}=x,L=$.icon?$.icon.substring($.icon.lastIndexOf("com_sobi2")):null,[D,B]=reactExports.useState(!1),U=reactExports.useCallback(async()=>{B(!0),await moveToShelf($),B(!1)},[$]);return jsxRuntimeExports.jsx(Root$6,{children:jsxRuntimeExports.jsxs("div",{className:"q-catalog__card","data-id":$.id,children:[jsxRuntimeExports.jsxs("h5",{className:"q-title",children:[$.icon&&jsxRuntimeExports.jsx("img",{alt:"",src:"https://qsp.su/gamestock/image.php?name="+L,loading:"lazy"}),$.title]}),jsxRuntimeExports.jsxs("div",{className:"q-catalog__card-details",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"q-catalog__card-details-row",children:[y("Author"),": ",$.author]}),$.ported_by&&jsxRuntimeExports.jsxs("div",{className:"q-catalog__card-details-row",children:[y("Ported by"),": ",$.ported_by]}),jsxRuntimeExports.jsxs("div",{className:"q-catalog__card-details-row",children:[y("Version"),": ",$.version]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"q-catalog__card-details-row",children:[y("Size"),": ",formatBytes($.file_size)]}),jsxRuntimeExports.jsxs("div",{className:"q-catalog__card-details-row",children:[y("Type"),": ",$.file_ext]}),jsxRuntimeExports.jsxs("div",{className:"q-catalog__card-details-row",children:[y("Last update"),": ",formatDate(new Date($.mod_date))]})]})]}),jsxRuntimeExports.jsxs("div",{className:"q-catalog__card-buttons",children:[$.description?jsxRuntimeExports.jsx(Trigger$3,{asChild:!0,children:jsxRuntimeExports.jsx("button",{className:"q-ghost-button",children:y("Read Description")})}):jsxRuntimeExports.jsx("div",{}),P?jsxRuntimeExports.jsx("span",{children:y("On Shelf")}):jsxRuntimeExports.jsx("button",{className:"q-button",disabled:D,onClick:U,children:D?jsxRuntimeExports.jsx("span",{className:"q-spin",children:jsxRuntimeExports.jsx(UpdateIcon,{})}):y("Add to shelf")})]}),$.description?jsxRuntimeExports.jsxs(Portal$3,{children:[jsxRuntimeExports.jsx(Overlay,{className:"qspider-dialog-overlay"}),jsxRuntimeExports.jsxs(Content$1,{className:"qspider-dialog-content",children:[jsxRuntimeExports.jsxs(Root$5,{className:"qspider-scroll-root",children:[jsxRuntimeExports.jsx(Viewport$2,{className:"qspider-scroll-area",children:jsxRuntimeExports.jsx(Markup,{content:O})}),jsxRuntimeExports.jsx(Scrollbar,{className:"qspider-scroll-bar",orientation:"vertical",children:jsxRuntimeExports.jsx(Thumb$2,{className:"qspider-scroll-thumb"})})]}),jsxRuntimeExports.jsx(Close$1,{className:"q-ghost-button q-dialog-close","aria-label":"Close",children:jsxRuntimeExports.jsx(Cross1Icon,{})})]})]}):null]})})};var OPEN_KEYS=[" ","Enter","ArrowUp","ArrowDown"],SELECTION_KEYS=[" ","Enter"],SELECT_NAME="Select",[Collection$1,useCollection$1,createCollectionScope$1]=createCollection(SELECT_NAME),[createSelectContext]=createContextScope(SELECT_NAME,[createCollectionScope$1,createPopperScope]),usePopperScope$1=createPopperScope(),[SelectProvider,useSelectContext]=createSelectContext(SELECT_NAME),[SelectNativeOptionsProvider,useSelectNativeOptionsContext]=createSelectContext(SELECT_NAME),Select$1=x=>{const{__scopeSelect:y,children:w,open:C,defaultOpen:P,onOpenChange:O,value:$,defaultValue:L,onValueChange:D,dir:B,name:U,autoComplete:k,disabled:H,required:W,form:G}=x,Q=usePopperScope$1(y),[Z,J]=reactExports.useState(null),[ne,oe]=reactExports.useState(null),[ae,ve]=reactExports.useState(!1),Te=useDirection(B),[re,he]=useControllableState({prop:C,defaultProp:P??!1,onChange:O,caller:SELECT_NAME}),[be,Le]=useControllableState({prop:$,defaultProp:L,onChange:D,caller:SELECT_NAME}),qe=reactExports.useRef(null),Ye=Z?G||!!Z.closest("form"):!0,[et,je]=reactExports.useState(new Set),Ke=Array.from(et).map(Ve=>Ve.props.value).join(";");return jsxRuntimeExports.jsx(Root2$4,{...Q,children:jsxRuntimeExports.jsxs(SelectProvider,{required:W,scope:y,trigger:Z,onTriggerChange:J,valueNode:ne,onValueNodeChange:oe,valueNodeHasChildren:ae,onValueNodeHasChildrenChange:ve,contentId:useId(),value:be,onValueChange:Le,open:re,onOpenChange:he,dir:Te,triggerPointerDownPosRef:qe,disabled:H,children:[jsxRuntimeExports.jsx(Collection$1.Provider,{scope:y,children:jsxRuntimeExports.jsx(SelectNativeOptionsProvider,{scope:x.__scopeSelect,onNativeOptionAdd:reactExports.useCallback(Ve=>{je(We=>new Set(We).add(Ve))},[]),onNativeOptionRemove:reactExports.useCallback(Ve=>{je(We=>{const we=new Set(We);return we.delete(Ve),we})},[]),children:w})}),Ye?jsxRuntimeExports.jsxs(SelectBubbleInput,{"aria-hidden":!0,required:W,tabIndex:-1,name:U,autoComplete:k,value:be,onChange:Ve=>Le(Ve.target.value),disabled:H,form:G,children:[be===void 0?jsxRuntimeExports.jsx("option",{value:""}):null,Array.from(et)]},Ke):null]})})};Select$1.displayName=SELECT_NAME;var TRIGGER_NAME$1="SelectTrigger",SelectTrigger=reactExports.forwardRef((x,y)=>{const{__scopeSelect:w,disabled:C=!1,...P}=x,O=usePopperScope$1(w),$=useSelectContext(TRIGGER_NAME$1,w),L=$.disabled||C,D=useComposedRefs(y,$.onTriggerChange),B=useCollection$1(w),U=reactExports.useRef("touch"),[k,H,W]=useTypeaheadSearch(Q=>{const Z=B().filter(oe=>!oe.disabled),J=Z.find(oe=>oe.value===$.value),ne=findNextItem(Z,Q,J);ne!==void 0&&$.onValueChange(ne.value)}),G=Q=>{L||($.onOpenChange(!0),W()),Q&&($.triggerPointerDownPosRef.current={x:Math.round(Q.pageX),y:Math.round(Q.pageY)})};return jsxRuntimeExports.jsx(Anchor,{asChild:!0,...O,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"combobox","aria-controls":$.contentId,"aria-expanded":$.open,"aria-required":$.required,"aria-autocomplete":"none",dir:$.dir,"data-state":$.open?"open":"closed",disabled:L,"data-disabled":L?"":void 0,"data-placeholder":shouldShowPlaceholder($.value)?"":void 0,...P,ref:D,onClick:composeEventHandlers(P.onClick,Q=>{Q.currentTarget.focus(),U.current!=="mouse"&&G(Q)}),onPointerDown:composeEventHandlers(P.onPointerDown,Q=>{U.current=Q.pointerType;const Z=Q.target;Z.hasPointerCapture(Q.pointerId)&&Z.releasePointerCapture(Q.pointerId),Q.button===0&&Q.ctrlKey===!1&&Q.pointerType==="mouse"&&(G(Q),Q.preventDefault())}),onKeyDown:composeEventHandlers(P.onKeyDown,Q=>{const Z=k.current!=="";!(Q.ctrlKey||Q.altKey||Q.metaKey)&&Q.key.length===1&&H(Q.key),!(Z&&Q.key===" ")&&OPEN_KEYS.includes(Q.key)&&(G(),Q.preventDefault())})})})});SelectTrigger.displayName=TRIGGER_NAME$1;var VALUE_NAME="SelectValue",SelectValue=reactExports.forwardRef((x,y)=>{const{__scopeSelect:w,className:C,style:P,children:O,placeholder:$="",...L}=x,D=useSelectContext(VALUE_NAME,w),{onValueNodeHasChildrenChange:B}=D,U=O!==void 0,k=useComposedRefs(y,D.onValueNodeChange);return useLayoutEffect2(()=>{B(U)},[B,U]),jsxRuntimeExports.jsx(Primitive.span,{...L,ref:k,style:{pointerEvents:"none"},children:shouldShowPlaceholder(D.value)?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:$}):O})});SelectValue.displayName=VALUE_NAME;var ICON_NAME="SelectIcon",SelectIcon=reactExports.forwardRef((x,y)=>{const{__scopeSelect:w,children:C,...P}=x;return jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...P,ref:y,children:C||""})});SelectIcon.displayName=ICON_NAME;var PORTAL_NAME$1="SelectPortal",SelectPortal=x=>jsxRuntimeExports.jsx(Portal$4,{asChild:!0,...x});SelectPortal.displayName=PORTAL_NAME$1;var CONTENT_NAME$1="SelectContent",SelectContent=reactExports.forwardRef((x,y)=>{const w=useSelectContext(CONTENT_NAME$1,x.__scopeSelect),[C,P]=reactExports.useState();if(useLayoutEffect2(()=>{P(new DocumentFragment)},[]),!w.open){const O=C;return O?reactDomExports.createPortal(jsxRuntimeExports.jsx(SelectContentProvider,{scope:x.__scopeSelect,children:jsxRuntimeExports.jsx(Collection$1.Slot,{scope:x.__scopeSelect,children:jsxRuntimeExports.jsx("div",{children:x.children})})}),O):null}return jsxRuntimeExports.jsx(SelectContentImpl,{...x,ref:y})});SelectContent.displayName=CONTENT_NAME$1;var CONTENT_MARGIN=10,[SelectContentProvider,useSelectContentContext]=createSelectContext(CONTENT_NAME$1),CONTENT_IMPL_NAME="SelectContentImpl",Slot=createSlot("SelectContent.RemoveScroll"),SelectContentImpl=reactExports.forwardRef((x,y)=>{const{__scopeSelect:w,position:C="item-aligned",onCloseAutoFocus:P,onEscapeKeyDown:O,onPointerDownOutside:$,side:L,sideOffset:D,align:B,alignOffset:U,arrowPadding:k,collisionBoundary:H,collisionPadding:W,sticky:G,hideWhenDetached:Q,avoidCollisions:Z,...J}=x,ne=useSelectContext(CONTENT_NAME$1,w),[oe,ae]=reactExports.useState(null),[ve,Te]=reactExports.useState(null),re=useComposedRefs(y,De=>ae(De)),[he,be]=reactExports.useState(null),[Le,qe]=reactExports.useState(null),Ye=useCollection$1(w),[et,je]=reactExports.useState(!1),Ke=reactExports.useRef(!1);reactExports.useEffect(()=>{if(oe)return hideOthers(oe)},[oe]),useFocusGuards();const Ve=reactExports.useCallback(De=>{const[it,...Ue]=Ye().map(_t=>_t.ref.current),[Et]=Ue.slice(-1),Ot=document.activeElement;for(const _t of De)if(_t===Ot||(_t?.scrollIntoView({block:"nearest"}),_t===it&&ve&&(ve.scrollTop=0),_t===Et&&ve&&(ve.scrollTop=ve.scrollHeight),_t?.focus(),document.activeElement!==Ot))return},[Ye,ve]),We=reactExports.useCallback(()=>Ve([he,oe]),[Ve,he,oe]);reactExports.useEffect(()=>{et&&We()},[et,We]);const{onOpenChange:we,triggerPointerDownPosRef:Oe}=ne;reactExports.useEffect(()=>{if(oe){let De={x:0,y:0};const it=Et=>{De={x:Math.abs(Math.round(Et.pageX)-(Oe.current?.x??0)),y:Math.abs(Math.round(Et.pageY)-(Oe.current?.y??0))}},Ue=Et=>{De.x<=10&&De.y<=10?Et.preventDefault():oe.contains(Et.target)||we(!1),document.removeEventListener("pointermove",it),Oe.current=null};return Oe.current!==null&&(document.addEventListener("pointermove",it),document.addEventListener("pointerup",Ue,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",it),document.removeEventListener("pointerup",Ue,{capture:!0})}}},[oe,we,Oe]),reactExports.useEffect(()=>{const De=()=>we(!1);return window.addEventListener("blur",De),window.addEventListener("resize",De),()=>{window.removeEventListener("blur",De),window.removeEventListener("resize",De)}},[we]);const[He,ie]=useTypeaheadSearch(De=>{const it=Ye().filter(Ot=>!Ot.disabled),Ue=it.find(Ot=>Ot.ref.current===document.activeElement),Et=findNextItem(it,De,Ue);Et&&setTimeout(()=>Et.ref.current.focus())}),Re=reactExports.useCallback((De,it,Ue)=>{const Et=!Ke.current&&!Ue;(ne.value!==void 0&&ne.value===it||Et)&&(be(De),Et&&(Ke.current=!0))},[ne.value]),Xe=reactExports.useCallback(()=>oe?.focus(),[oe]),Ze=reactExports.useCallback((De,it,Ue)=>{const Et=!Ke.current&&!Ue;(ne.value!==void 0&&ne.value===it||Et)&&qe(De)},[ne.value]),st=C==="popper"?SelectPopperPosition:SelectItemAlignedPosition,dt=st===SelectPopperPosition?{side:L,sideOffset:D,align:B,alignOffset:U,arrowPadding:k,collisionBoundary:H,collisionPadding:W,sticky:G,hideWhenDetached:Q,avoidCollisions:Z}:{};return jsxRuntimeExports.jsx(SelectContentProvider,{scope:w,content:oe,viewport:ve,onViewportChange:Te,itemRefCallback:Re,selectedItem:he,onItemLeave:Xe,itemTextRefCallback:Ze,focusSelectedItem:We,selectedItemText:Le,position:C,isPositioned:et,searchRef:He,children:jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot,allowPinchZoom:!0,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:ne.open,onMountAutoFocus:De=>{De.preventDefault()},onUnmountAutoFocus:composeEventHandlers(P,De=>{ne.trigger?.focus({preventScroll:!0}),De.preventDefault()}),children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:O,onPointerDownOutside:$,onFocusOutside:De=>De.preventDefault(),onDismiss:()=>ne.onOpenChange(!1),children:jsxRuntimeExports.jsx(st,{role:"listbox",id:ne.contentId,"data-state":ne.open?"open":"closed",dir:ne.dir,onContextMenu:De=>De.preventDefault(),...J,...dt,onPlaced:()=>je(!0),ref:re,style:{display:"flex",flexDirection:"column",outline:"none",...J.style},onKeyDown:composeEventHandlers(J.onKeyDown,De=>{const it=De.ctrlKey||De.altKey||De.metaKey;if(De.key==="Tab"&&De.preventDefault(),!it&&De.key.length===1&&ie(De.key),["ArrowUp","ArrowDown","Home","End"].includes(De.key)){let Et=Ye().filter(Ot=>!Ot.disabled).map(Ot=>Ot.ref.current);if(["ArrowUp","End"].includes(De.key)&&(Et=Et.slice().reverse()),["ArrowUp","ArrowDown"].includes(De.key)){const Ot=De.target,_t=Et.indexOf(Ot);Et=Et.slice(_t+1)}setTimeout(()=>Ve(Et)),De.preventDefault()}})})})})})})});SelectContentImpl.displayName=CONTENT_IMPL_NAME;var ITEM_ALIGNED_POSITION_NAME="SelectItemAlignedPosition",SelectItemAlignedPosition=reactExports.forwardRef((x,y)=>{const{__scopeSelect:w,onPlaced:C,...P}=x,O=useSelectContext(CONTENT_NAME$1,w),$=useSelectContentContext(CONTENT_NAME$1,w),[L,D]=reactExports.useState(null),[B,U]=reactExports.useState(null),k=useComposedRefs(y,re=>U(re)),H=useCollection$1(w),W=reactExports.useRef(!1),G=reactExports.useRef(!0),{viewport:Q,selectedItem:Z,selectedItemText:J,focusSelectedItem:ne}=$,oe=reactExports.useCallback(()=>{if(O.trigger&&O.valueNode&&L&&B&&Q&&Z&&J){const re=O.trigger.getBoundingClientRect(),he=B.getBoundingClientRect(),be=O.valueNode.getBoundingClientRect(),Le=J.getBoundingClientRect();if(O.dir!=="rtl"){const Ot=Le.left-he.left,_t=be.left-Ot,Ht=re.left-_t,$n=re.width+Ht,yn=Math.max($n,he.width),Nn=window.innerWidth-CONTENT_MARGIN,fr=clamp$1(_t,[CONTENT_MARGIN,Math.max(CONTENT_MARGIN,Nn-yn)]);L.style.minWidth=$n+"px",L.style.left=fr+"px"}else{const Ot=he.right-Le.right,_t=window.innerWidth-be.right-Ot,Ht=window.innerWidth-re.right-_t,$n=re.width+Ht,yn=Math.max($n,he.width),Nn=window.innerWidth-CONTENT_MARGIN,fr=clamp$1(_t,[CONTENT_MARGIN,Math.max(CONTENT_MARGIN,Nn-yn)]);L.style.minWidth=$n+"px",L.style.right=fr+"px"}const qe=H(),Ye=window.innerHeight-CONTENT_MARGIN*2,et=Q.scrollHeight,je=window.getComputedStyle(B),Ke=parseInt(je.borderTopWidth,10),Ve=parseInt(je.paddingTop,10),We=parseInt(je.borderBottomWidth,10),we=parseInt(je.paddingBottom,10),Oe=Ke+Ve+et+we+We,He=Math.min(Z.offsetHeight*5,Oe),ie=window.getComputedStyle(Q),Re=parseInt(ie.paddingTop,10),Xe=parseInt(ie.paddingBottom,10),Ze=re.top+re.height/2-CONTENT_MARGIN,st=Ye-Ze,dt=Z.offsetHeight/2,De=Z.offsetTop+dt,it=Ke+Ve+De,Ue=Oe-it;if(it<=Ze){const Ot=qe.length>0&&Z===qe[qe.length-1].ref.current;L.style.bottom="0px";const _t=B.clientHeight-Q.offsetTop-Q.offsetHeight,Ht=Math.max(st,dt+(Ot?Xe:0)+_t+We),$n=it+Ht;L.style.height=$n+"px"}else{const Ot=qe.length>0&&Z===qe[0].ref.current;L.style.top="0px";const Ht=Math.max(Ze,Ke+Q.offsetTop+(Ot?Re:0)+dt)+Ue;L.style.height=Ht+"px",Q.scrollTop=it-Ze+Q.offsetTop}L.style.margin=`${CONTENT_MARGIN}px 0`,L.style.minHeight=He+"px",L.style.maxHeight=Ye+"px",C?.(),requestAnimationFrame(()=>W.current=!0)}},[H,O.trigger,O.valueNode,L,B,Q,Z,J,O.dir,C]);useLayoutEffect2(()=>oe(),[oe]);const[ae,ve]=reactExports.useState();useLayoutEffect2(()=>{B&&ve(window.getComputedStyle(B).zIndex)},[B]);const Te=reactExports.useCallback(re=>{re&&G.current===!0&&(oe(),ne?.(),G.current=!1)},[oe,ne]);return jsxRuntimeExports.jsx(SelectViewportProvider,{scope:w,contentWrapper:L,shouldExpandOnScrollRef:W,onScrollButtonChange:Te,children:jsxRuntimeExports.jsx("div",{ref:D,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:ae},children:jsxRuntimeExports.jsx(Primitive.div,{...P,ref:k,style:{boxSizing:"border-box",maxHeight:"100%",...P.style}})})})});SelectItemAlignedPosition.displayName=ITEM_ALIGNED_POSITION_NAME;var POPPER_POSITION_NAME="SelectPopperPosition",SelectPopperPosition=reactExports.forwardRef((x,y)=>{const{__scopeSelect:w,align:C="start",collisionPadding:P=CONTENT_MARGIN,...O}=x,$=usePopperScope$1(w);return jsxRuntimeExports.jsx(Content,{...$,...O,ref:y,align:C,collisionPadding:P,style:{boxSizing:"border-box",...O.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});SelectPopperPosition.displayName=POPPER_POSITION_NAME;var[SelectViewportProvider,useSelectViewportContext]=createSelectContext(CONTENT_NAME$1,{}),VIEWPORT_NAME$1="SelectViewport",SelectViewport=reactExports.forwardRef((x,y)=>{const{__scopeSelect:w,nonce:C,...P}=x,O=useSelectContentContext(VIEWPORT_NAME$1,w),$=useSelectViewportContext(VIEWPORT_NAME$1,w),L=useComposedRefs(y,O.onViewportChange),D=reactExports.useRef(0);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:C}),jsxRuntimeExports.jsx(Collection$1.Slot,{scope:w,children:jsxRuntimeExports.jsx(Primitive.div,{"data-radix-select-viewport":"",role:"presentation",...P,ref:L,style:{position:"relative",flex:1,overflow:"hidden auto",...P.style},onScroll:composeEventHandlers(P.onScroll,B=>{const U=B.currentTarget,{contentWrapper:k,shouldExpandOnScrollRef:H}=$;if(H?.current&&k){const W=Math.abs(D.current-U.scrollTop);if(W>0){const G=window.innerHeight-CONTENT_MARGIN*2,Q=parseFloat(k.style.minHeight),Z=parseFloat(k.style.height),J=Math.max(Q,Z);if(J<G){const ne=J+W,oe=Math.min(G,ne),ae=ne-oe;k.style.height=oe+"px",k.style.bottom==="0px"&&(U.scrollTop=ae>0?ae:0,k.style.justifyContent="flex-end")}}}D.current=U.scrollTop})})})]})});SelectViewport.displayName=VIEWPORT_NAME$1;var GROUP_NAME="SelectGroup",[SelectGroupContextProvider,useSelectGroupContext]=createSelectContext(GROUP_NAME),SelectGroup=reactExports.forwardRef((x,y)=>{const{__scopeSelect:w,...C}=x,P=useId();return jsxRuntimeExports.jsx(SelectGroupContextProvider,{scope:w,id:P,children:jsxRuntimeExports.jsx(Primitive.div,{role:"group","aria-labelledby":P,...C,ref:y})})});SelectGroup.displayName=GROUP_NAME;var LABEL_NAME="SelectLabel",SelectLabel=reactExports.forwardRef((x,y)=>{const{__scopeSelect:w,...C}=x,P=useSelectGroupContext(LABEL_NAME,w);return jsxRuntimeExports.jsx(Primitive.div,{id:P.id,...C,ref:y})});SelectLabel.displayName=LABEL_NAME;var ITEM_NAME="SelectItem",[SelectItemContextProvider,useSelectItemContext]=createSelectContext(ITEM_NAME),SelectItem$1=reactExports.forwardRef((x,y)=>{const{__scopeSelect:w,value:C,disabled:P=!1,textValue:O,...$}=x,L=useSelectContext(ITEM_NAME,w),D=useSelectContentContext(ITEM_NAME,w),B=L.value===C,[U,k]=reactExports.useState(O??""),[H,W]=reactExports.useState(!1),G=useComposedRefs(y,ne=>D.itemRefCallback?.(ne,C,P)),Q=useId(),Z=reactExports.useRef("touch"),J=()=>{P||(L.onValueChange(C),L.onOpenChange(!1))};if(C==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return jsxRuntimeExports.jsx(SelectItemContextProvider,{scope:w,value:C,disabled:P,textId:Q,isSelected:B,onItemTextChange:reactExports.useCallback(ne=>{k(oe=>oe||(ne?.textContent??"").trim())},[]),children:jsxRuntimeExports.jsx(Collection$1.ItemSlot,{scope:w,value:C,disabled:P,textValue:U,children:jsxRuntimeExports.jsx(Primitive.div,{role:"option","aria-labelledby":Q,"data-highlighted":H?"":void 0,"aria-selected":B&&H,"data-state":B?"checked":"unchecked","aria-disabled":P||void 0,"data-disabled":P?"":void 0,tabIndex:P?void 0:-1,...$,ref:G,onFocus:composeEventHandlers($.onFocus,()=>W(!0)),onBlur:composeEventHandlers($.onBlur,()=>W(!1)),onClick:composeEventHandlers($.onClick,()=>{Z.current!=="mouse"&&J()}),onPointerUp:composeEventHandlers($.onPointerUp,()=>{Z.current==="mouse"&&J()}),onPointerDown:composeEventHandlers($.onPointerDown,ne=>{Z.current=ne.pointerType}),onPointerMove:composeEventHandlers($.onPointerMove,ne=>{Z.current=ne.pointerType,P?D.onItemLeave?.():Z.current==="mouse"&&ne.currentTarget.focus({preventScroll:!0})}),onPointerLeave:composeEventHandlers($.onPointerLeave,ne=>{ne.currentTarget===document.activeElement&&D.onItemLeave?.()}),onKeyDown:composeEventHandlers($.onKeyDown,ne=>{D.searchRef?.current!==""&&ne.key===" "||(SELECTION_KEYS.includes(ne.key)&&J(),ne.key===" "&&ne.preventDefault())})})})})});SelectItem$1.displayName=ITEM_NAME;var ITEM_TEXT_NAME="SelectItemText",SelectItemText=reactExports.forwardRef((x,y)=>{const{__scopeSelect:w,className:C,style:P,...O}=x,$=useSelectContext(ITEM_TEXT_NAME,w),L=useSelectContentContext(ITEM_TEXT_NAME,w),D=useSelectItemContext(ITEM_TEXT_NAME,w),B=useSelectNativeOptionsContext(ITEM_TEXT_NAME,w),[U,k]=reactExports.useState(null),H=useComposedRefs(y,J=>k(J),D.onItemTextChange,J=>L.itemTextRefCallback?.(J,D.value,D.disabled)),W=U?.textContent,G=reactExports.useMemo(()=>jsxRuntimeExports.jsx("option",{value:D.value,disabled:D.disabled,children:W},D.value),[D.disabled,D.value,W]),{onNativeOptionAdd:Q,onNativeOptionRemove:Z}=B;return useLayoutEffect2(()=>(Q(G),()=>Z(G)),[Q,Z,G]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Primitive.span,{id:D.textId,...O,ref:H}),D.isSelected&&$.valueNode&&!$.valueNodeHasChildren?reactDomExports.createPortal(O.children,$.valueNode):null]})});SelectItemText.displayName=ITEM_TEXT_NAME;var ITEM_INDICATOR_NAME="SelectItemIndicator",SelectItemIndicator=reactExports.forwardRef((x,y)=>{const{__scopeSelect:w,...C}=x;return useSelectItemContext(ITEM_INDICATOR_NAME,w).isSelected?jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...C,ref:y}):null});SelectItemIndicator.displayName=ITEM_INDICATOR_NAME;var SCROLL_UP_BUTTON_NAME="SelectScrollUpButton",SelectScrollUpButton=reactExports.forwardRef((x,y)=>{const w=useSelectContentContext(SCROLL_UP_BUTTON_NAME,x.__scopeSelect),C=useSelectViewportContext(SCROLL_UP_BUTTON_NAME,x.__scopeSelect),[P,O]=reactExports.useState(!1),$=useComposedRefs(y,C.onScrollButtonChange);return useLayoutEffect2(()=>{if(w.viewport&&w.isPositioned){let L=function(){const B=D.scrollTop>0;O(B)};const D=w.viewport;return L(),D.addEventListener("scroll",L),()=>D.removeEventListener("scroll",L)}},[w.viewport,w.isPositioned]),P?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{...x,ref:$,onAutoScroll:()=>{const{viewport:L,selectedItem:D}=w;L&&D&&(L.scrollTop=L.scrollTop-D.offsetHeight)}}):null});SelectScrollUpButton.displayName=SCROLL_UP_BUTTON_NAME;var SCROLL_DOWN_BUTTON_NAME="SelectScrollDownButton",SelectScrollDownButton=reactExports.forwardRef((x,y)=>{const w=useSelectContentContext(SCROLL_DOWN_BUTTON_NAME,x.__scopeSelect),C=useSelectViewportContext(SCROLL_DOWN_BUTTON_NAME,x.__scopeSelect),[P,O]=reactExports.useState(!1),$=useComposedRefs(y,C.onScrollButtonChange);return useLayoutEffect2(()=>{if(w.viewport&&w.isPositioned){let L=function(){const B=D.scrollHeight-D.clientHeight,U=Math.ceil(D.scrollTop)<B;O(U)};const D=w.viewport;return L(),D.addEventListener("scroll",L),()=>D.removeEventListener("scroll",L)}},[w.viewport,w.isPositioned]),P?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{...x,ref:$,onAutoScroll:()=>{const{viewport:L,selectedItem:D}=w;L&&D&&(L.scrollTop=L.scrollTop+D.offsetHeight)}}):null});SelectScrollDownButton.displayName=SCROLL_DOWN_BUTTON_NAME;var SelectScrollButtonImpl=reactExports.forwardRef((x,y)=>{const{__scopeSelect:w,onAutoScroll:C,...P}=x,O=useSelectContentContext("SelectScrollButton",w),$=reactExports.useRef(null),L=useCollection$1(w),D=reactExports.useCallback(()=>{$.current!==null&&(window.clearInterval($.current),$.current=null)},[]);return reactExports.useEffect(()=>()=>D(),[D]),useLayoutEffect2(()=>{L().find(U=>U.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[L]),jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...P,ref:y,style:{flexShrink:0,...P.style},onPointerDown:composeEventHandlers(P.onPointerDown,()=>{$.current===null&&($.current=window.setInterval(C,50))}),onPointerMove:composeEventHandlers(P.onPointerMove,()=>{O.onItemLeave?.(),$.current===null&&($.current=window.setInterval(C,50))}),onPointerLeave:composeEventHandlers(P.onPointerLeave,()=>{D()})})}),SEPARATOR_NAME="SelectSeparator",SelectSeparator=reactExports.forwardRef((x,y)=>{const{__scopeSelect:w,...C}=x;return jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...C,ref:y})});SelectSeparator.displayName=SEPARATOR_NAME;var ARROW_NAME$1="SelectArrow",SelectArrow=reactExports.forwardRef((x,y)=>{const{__scopeSelect:w,...C}=x,P=usePopperScope$1(w),O=useSelectContext(ARROW_NAME$1,w),$=useSelectContentContext(ARROW_NAME$1,w);return O.open&&$.position==="popper"?jsxRuntimeExports.jsx(Arrow,{...P,...C,ref:y}):null});SelectArrow.displayName=ARROW_NAME$1;var BUBBLE_INPUT_NAME$1="SelectBubbleInput",SelectBubbleInput=reactExports.forwardRef(({__scopeSelect:x,value:y,...w},C)=>{const P=reactExports.useRef(null),O=useComposedRefs(C,P),$=usePrevious(y);return reactExports.useEffect(()=>{const L=P.current;if(!L)return;const D=window.HTMLSelectElement.prototype,U=Object.getOwnPropertyDescriptor(D,"value").set;if($!==y&&U){const k=new Event("change",{bubbles:!0});U.call(L,y),L.dispatchEvent(k)}},[$,y]),jsxRuntimeExports.jsx(Primitive.select,{...w,style:{...VISUALLY_HIDDEN_STYLES,...w.style},ref:O,defaultValue:y})});SelectBubbleInput.displayName=BUBBLE_INPUT_NAME$1;function shouldShowPlaceholder(x){return x===""||x===void 0}function useTypeaheadSearch(x){const y=useCallbackRef$1(x),w=reactExports.useRef(""),C=reactExports.useRef(0),P=reactExports.useCallback($=>{const L=w.current+$;y(L),(function D(B){w.current=B,window.clearTimeout(C.current),B!==""&&(C.current=window.setTimeout(()=>D(""),1e3))})(L)},[y]),O=reactExports.useCallback(()=>{w.current="",window.clearTimeout(C.current)},[]);return reactExports.useEffect(()=>()=>window.clearTimeout(C.current),[]),[w,P,O]}function findNextItem(x,y,w){const P=y.length>1&&Array.from(y).every(B=>B===y[0])?y[0]:y,O=w?x.indexOf(w):-1;let $=wrapArray(x,Math.max(O,0));P.length===1&&($=$.filter(B=>B!==w));const D=$.find(B=>B.textValue.toLowerCase().startsWith(P.toLowerCase()));return D!==w?D:void 0}function wrapArray(x,y){return x.map((w,C)=>x[(y+C)%x.length])}var Root2$1=Select$1,Trigger$1=SelectTrigger,Value=SelectValue,Icon=SelectIcon,Portal$1=SelectPortal,Content2$1=SelectContent,Viewport$1=SelectViewport,Item=SelectItem$1,ItemText=SelectItemText,ItemIndicator=SelectItemIndicator,ScrollUpButton=SelectScrollUpButton,ScrollDownButton=SelectScrollDownButton;const SelectItem=({children:x,...y})=>jsxRuntimeExports.jsxs(Item,{className:"q-select-item",...y,children:[jsxRuntimeExports.jsx(ItemText,{children:x}),jsxRuntimeExports.jsx(ItemIndicator,{className:"q-select-item-indicator",children:jsxRuntimeExports.jsx(CheckIcon,{})})]}),Select=({options:x,placeholder:y,label:w,value:C,name:P,onValueChange:O})=>jsxRuntimeExports.jsxs(Root2$1,{value:C,onValueChange:O,name:P,children:[jsxRuntimeExports.jsxs(Trigger$1,{className:"q-select","aria-label":w,children:[jsxRuntimeExports.jsx(Value,{placeholder:y}),jsxRuntimeExports.jsx(Icon,{className:"q-select-icon",children:jsxRuntimeExports.jsx(ChevronDownIcon,{})})]}),jsxRuntimeExports.jsx(Portal$1,{children:jsxRuntimeExports.jsxs(Content2$1,{className:"q-select-content",children:[jsxRuntimeExports.jsx(ScrollUpButton,{className:"q-select-scroll-button",children:jsxRuntimeExports.jsx(ChevronUpIcon,{})}),jsxRuntimeExports.jsx(Viewport$1,{className:"SelectViewport",children:x.map($=>jsxRuntimeExports.jsx(SelectItem,{value:$.value,children:$.label},$.value))}),jsxRuntimeExports.jsx(ScrollDownButton,{className:"q-select-scroll-button",children:jsxRuntimeExports.jsx(ChevronDownIcon,{})})]})})]});var[createTooltipContext]=createContextScope("Tooltip",[createPopperScope]),usePopperScope=createPopperScope(),PROVIDER_NAME$1="TooltipProvider",DEFAULT_DELAY_DURATION=700,TOOLTIP_OPEN="tooltip.open",[TooltipProviderContextProvider,useTooltipProviderContext]=createTooltipContext(PROVIDER_NAME$1),TooltipProvider=x=>{const{__scopeTooltip:y,delayDuration:w=DEFAULT_DELAY_DURATION,skipDelayDuration:C=300,disableHoverableContent:P=!1,children:O}=x,$=reactExports.useRef(!0),L=reactExports.useRef(!1),D=reactExports.useRef(0);return reactExports.useEffect(()=>{const B=D.current;return()=>window.clearTimeout(B)},[]),jsxRuntimeExports.jsx(TooltipProviderContextProvider,{scope:y,isOpenDelayedRef:$,delayDuration:w,onOpen:reactExports.useCallback(()=>{window.clearTimeout(D.current),$.current=!1},[]),onClose:reactExports.useCallback(()=>{window.clearTimeout(D.current),D.current=window.setTimeout(()=>$.current=!0,C)},[C]),isPointerInTransitRef:L,onPointerInTransitChange:reactExports.useCallback(B=>{L.current=B},[]),disableHoverableContent:P,children:O})};TooltipProvider.displayName=PROVIDER_NAME$1;var TOOLTIP_NAME="Tooltip",[TooltipContextProvider,useTooltipContext]=createTooltipContext(TOOLTIP_NAME),Tooltip$1=x=>{const{__scopeTooltip:y,children:w,open:C,defaultOpen:P,onOpenChange:O,disableHoverableContent:$,delayDuration:L}=x,D=useTooltipProviderContext(TOOLTIP_NAME,x.__scopeTooltip),B=usePopperScope(y),[U,k]=reactExports.useState(null),H=useId(),W=reactExports.useRef(0),G=$??D.disableHoverableContent,Q=L??D.delayDuration,Z=reactExports.useRef(!1),[J,ne]=useControllableState({prop:C,defaultProp:P??!1,onChange:re=>{re?(D.onOpen(),document.dispatchEvent(new CustomEvent(TOOLTIP_OPEN))):D.onClose(),O?.(re)},caller:TOOLTIP_NAME}),oe=reactExports.useMemo(()=>J?Z.current?"delayed-open":"instant-open":"closed",[J]),ae=reactExports.useCallback(()=>{window.clearTimeout(W.current),W.current=0,Z.current=!1,ne(!0)},[ne]),ve=reactExports.useCallback(()=>{window.clearTimeout(W.current),W.current=0,ne(!1)},[ne]),Te=reactExports.useCallback(()=>{window.clearTimeout(W.current),W.current=window.setTimeout(()=>{Z.current=!0,ne(!0),W.current=0},Q)},[Q,ne]);return reactExports.useEffect(()=>()=>{W.current&&(window.clearTimeout(W.current),W.current=0)},[]),jsxRuntimeExports.jsx(Root2$4,{...B,children:jsxRuntimeExports.jsx(TooltipContextProvider,{scope:y,contentId:H,open:J,stateAttribute:oe,trigger:U,onTriggerChange:k,onTriggerEnter:reactExports.useCallback(()=>{D.isOpenDelayedRef.current?Te():ae()},[D.isOpenDelayedRef,Te,ae]),onTriggerLeave:reactExports.useCallback(()=>{G?ve():(window.clearTimeout(W.current),W.current=0)},[ve,G]),onOpen:ae,onClose:ve,disableHoverableContent:G,children:w})})};Tooltip$1.displayName=TOOLTIP_NAME;var TRIGGER_NAME="TooltipTrigger",TooltipTrigger=reactExports.forwardRef((x,y)=>{const{__scopeTooltip:w,...C}=x,P=useTooltipContext(TRIGGER_NAME,w),O=useTooltipProviderContext(TRIGGER_NAME,w),$=usePopperScope(w),L=reactExports.useRef(null),D=useComposedRefs(y,L,P.onTriggerChange),B=reactExports.useRef(!1),U=reactExports.useRef(!1),k=reactExports.useCallback(()=>B.current=!1,[]);return reactExports.useEffect(()=>()=>document.removeEventListener("pointerup",k),[k]),jsxRuntimeExports.jsx(Anchor,{asChild:!0,...$,children:jsxRuntimeExports.jsx(Primitive.button,{"aria-describedby":P.open?P.contentId:void 0,"data-state":P.stateAttribute,...C,ref:D,onPointerMove:composeEventHandlers(x.onPointerMove,H=>{H.pointerType!=="touch"&&!U.current&&!O.isPointerInTransitRef.current&&(P.onTriggerEnter(),U.current=!0)}),onPointerLeave:composeEventHandlers(x.onPointerLeave,()=>{P.onTriggerLeave(),U.current=!1}),onPointerDown:composeEventHandlers(x.onPointerDown,()=>{P.open&&P.onClose(),B.current=!0,document.addEventListener("pointerup",k,{once:!0})}),onFocus:composeEventHandlers(x.onFocus,()=>{B.current||P.onOpen()}),onBlur:composeEventHandlers(x.onBlur,P.onClose),onClick:composeEventHandlers(x.onClick,P.onClose)})})});TooltipTrigger.displayName=TRIGGER_NAME;var PORTAL_NAME="TooltipPortal",[PortalProvider,usePortalContext]=createTooltipContext(PORTAL_NAME,{forceMount:void 0}),TooltipPortal=x=>{const{__scopeTooltip:y,forceMount:w,children:C,container:P}=x,O=useTooltipContext(PORTAL_NAME,y);return jsxRuntimeExports.jsx(PortalProvider,{scope:y,forceMount:w,children:jsxRuntimeExports.jsx(Presence,{present:w||O.open,children:jsxRuntimeExports.jsx(Portal$4,{asChild:!0,container:P,children:C})})})};TooltipPortal.displayName=PORTAL_NAME;var CONTENT_NAME="TooltipContent",TooltipContent=reactExports.forwardRef((x,y)=>{const w=usePortalContext(CONTENT_NAME,x.__scopeTooltip),{forceMount:C=w.forceMount,side:P="top",...O}=x,$=useTooltipContext(CONTENT_NAME,x.__scopeTooltip);return jsxRuntimeExports.jsx(Presence,{present:C||$.open,children:$.disableHoverableContent?jsxRuntimeExports.jsx(TooltipContentImpl,{side:P,...O,ref:y}):jsxRuntimeExports.jsx(TooltipContentHoverable,{side:P,...O,ref:y})})}),TooltipContentHoverable=reactExports.forwardRef((x,y)=>{const w=useTooltipContext(CONTENT_NAME,x.__scopeTooltip),C=useTooltipProviderContext(CONTENT_NAME,x.__scopeTooltip),P=reactExports.useRef(null),O=useComposedRefs(y,P),[$,L]=reactExports.useState(null),{trigger:D,onClose:B}=w,U=P.current,{onPointerInTransitChange:k}=C,H=reactExports.useCallback(()=>{L(null),k(!1)},[k]),W=reactExports.useCallback((G,Q)=>{const Z=G.currentTarget,J={x:G.clientX,y:G.clientY},ne=getExitSideFromRect(J,Z.getBoundingClientRect()),oe=getPaddedExitPoints(J,ne),ae=getPointsFromRect(Q.getBoundingClientRect()),ve=getHull([...oe,...ae]);L(ve),k(!0)},[k]);return reactExports.useEffect(()=>()=>H(),[H]),reactExports.useEffect(()=>{if(D&&U){const G=Z=>W(Z,U),Q=Z=>W(Z,D);return D.addEventListener("pointerleave",G),U.addEventListener("pointerleave",Q),()=>{D.removeEventListener("pointerleave",G),U.removeEventListener("pointerleave",Q)}}},[D,U,W,H]),reactExports.useEffect(()=>{if($){const G=Q=>{const Z=Q.target,J={x:Q.clientX,y:Q.clientY},ne=D?.contains(Z)||U?.contains(Z),oe=!isPointInPolygon(J,$);ne?H():oe&&(H(),B())};return document.addEventListener("pointermove",G),()=>document.removeEventListener("pointermove",G)}},[D,U,$,B,H]),jsxRuntimeExports.jsx(TooltipContentImpl,{...x,ref:O})}),[VisuallyHiddenContentContextProvider,useVisuallyHiddenContentContext]=createTooltipContext(TOOLTIP_NAME,{isInside:!1}),Slottable=createSlottable("TooltipContent"),TooltipContentImpl=reactExports.forwardRef((x,y)=>{const{__scopeTooltip:w,children:C,"aria-label":P,onEscapeKeyDown:O,onPointerDownOutside:$,...L}=x,D=useTooltipContext(CONTENT_NAME,w),B=usePopperScope(w),{onClose:U}=D;return reactExports.useEffect(()=>(document.addEventListener(TOOLTIP_OPEN,U),()=>document.removeEventListener(TOOLTIP_OPEN,U)),[U]),reactExports.useEffect(()=>{if(D.trigger){const k=H=>{H.target?.contains(D.trigger)&&U()};return window.addEventListener("scroll",k,{capture:!0}),()=>window.removeEventListener("scroll",k,{capture:!0})}},[D.trigger,U]),jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:O,onPointerDownOutside:$,onFocusOutside:k=>k.preventDefault(),onDismiss:U,children:jsxRuntimeExports.jsxs(Content,{"data-state":D.stateAttribute,...B,...L,ref:y,style:{...L.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[jsxRuntimeExports.jsx(Slottable,{children:C}),jsxRuntimeExports.jsx(VisuallyHiddenContentContextProvider,{scope:w,isInside:!0,children:jsxRuntimeExports.jsx(Root$2,{id:D.contentId,role:"tooltip",children:P||C})})]})})});TooltipContent.displayName=CONTENT_NAME;var ARROW_NAME="TooltipArrow",TooltipArrow=reactExports.forwardRef((x,y)=>{const{__scopeTooltip:w,...C}=x,P=usePopperScope(w);return useVisuallyHiddenContentContext(ARROW_NAME,w).isInside?null:jsxRuntimeExports.jsx(Arrow,{...P,...C,ref:y})});TooltipArrow.displayName=ARROW_NAME;function getExitSideFromRect(x,y){const w=Math.abs(y.top-x.y),C=Math.abs(y.bottom-x.y),P=Math.abs(y.right-x.x),O=Math.abs(y.left-x.x);switch(Math.min(w,C,P,O)){case O:return"left";case P:return"right";case w:return"top";case C:return"bottom";default:throw new Error("unreachable")}}function getPaddedExitPoints(x,y,w=5){const C=[];switch(y){case"top":C.push({x:x.x-w,y:x.y+w},{x:x.x+w,y:x.y+w});break;case"bottom":C.push({x:x.x-w,y:x.y-w},{x:x.x+w,y:x.y-w});break;case"left":C.push({x:x.x+w,y:x.y-w},{x:x.x+w,y:x.y+w});break;case"right":C.push({x:x.x-w,y:x.y-w},{x:x.x-w,y:x.y+w});break}return C}function getPointsFromRect(x){const{top:y,right:w,bottom:C,left:P}=x;return[{x:P,y},{x:w,y},{x:w,y:C},{x:P,y:C}]}function isPointInPolygon(x,y){const{x:w,y:C}=x;let P=!1;for(let O=0,$=y.length-1;O<y.length;$=O++){const L=y[O],D=y[$],B=L.x,U=L.y,k=D.x,H=D.y;U>C!=H>C&&w<(k-B)*(C-U)/(H-U)+B&&(P=!P)}return P}function getHull(x){const y=x.slice();return y.sort((w,C)=>w.x<C.x?-1:w.x>C.x?1:w.y<C.y?-1:w.y>C.y?1:0),getHullPresorted(y)}function getHullPresorted(x){if(x.length<=1)return x.slice();const y=[];for(let C=0;C<x.length;C++){const P=x[C];for(;y.length>=2;){const O=y[y.length-1],$=y[y.length-2];if((O.x-$.x)*(P.y-$.y)>=(O.y-$.y)*(P.x-$.x))y.pop();else break}y.push(P)}y.pop();const w=[];for(let C=x.length-1;C>=0;C--){const P=x[C];for(;w.length>=2;){const O=w[w.length-1],$=w[w.length-2];if((O.x-$.x)*(P.y-$.y)>=(O.y-$.y)*(P.x-$.x))w.pop();else break}w.push(P)}return w.pop(),y.length===1&&w.length===1&&y[0].x===w[0].x&&y[0].y===w[0].y?y:y.concat(w)}var Provider$1=TooltipProvider,Root3=Tooltip$1,Trigger=TooltipTrigger,Portal=TooltipPortal,Content2=TooltipContent,Arrow2=TooltipArrow;const Tooltip=({children:x,content:y})=>jsxRuntimeExports.jsx(Provider$1,{children:jsxRuntimeExports.jsxs(Root3,{children:[jsxRuntimeExports.jsx(Trigger,{asChild:!0,children:x}),jsxRuntimeExports.jsx(Portal,{container:document.getElementById("portal-container"),children:jsxRuntimeExports.jsxs(Content2,{className:"q-tooltip",sideOffset:5,children:[y,jsxRuntimeExports.jsx(Arrow2,{className:"q-tooltip-arrow"})]})})]})});var SWITCH_NAME="Switch",[createSwitchContext]=createContextScope(SWITCH_NAME),[SwitchProvider,useSwitchContext]=createSwitchContext(SWITCH_NAME),Switch$1=reactExports.forwardRef((x,y)=>{const{__scopeSwitch:w,name:C,checked:P,defaultChecked:O,required:$,disabled:L,value:D="on",onCheckedChange:B,form:U,...k}=x,[H,W]=reactExports.useState(null),G=useComposedRefs(y,oe=>W(oe)),Q=reactExports.useRef(!1),Z=H?U||!!H.closest("form"):!0,[J,ne]=useControllableState({prop:P,defaultProp:O??!1,onChange:B,caller:SWITCH_NAME});return jsxRuntimeExports.jsxs(SwitchProvider,{scope:w,checked:J,disabled:L,children:[jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"switch","aria-checked":J,"aria-required":$,"data-state":getState(J),"data-disabled":L?"":void 0,disabled:L,value:D,...k,ref:G,onClick:composeEventHandlers(x.onClick,oe=>{ne(ae=>!ae),Z&&(Q.current=oe.isPropagationStopped(),Q.current||oe.stopPropagation())})}),Z&&jsxRuntimeExports.jsx(SwitchBubbleInput,{control:H,bubbles:!Q.current,name:C,value:D,checked:J,required:$,disabled:L,form:U,style:{transform:"translateX(-100%)"}})]})});Switch$1.displayName=SWITCH_NAME;var THUMB_NAME="SwitchThumb",SwitchThumb=reactExports.forwardRef((x,y)=>{const{__scopeSwitch:w,...C}=x,P=useSwitchContext(THUMB_NAME,w);return jsxRuntimeExports.jsx(Primitive.span,{"data-state":getState(P.checked),"data-disabled":P.disabled?"":void 0,...C,ref:y})});SwitchThumb.displayName=THUMB_NAME;var BUBBLE_INPUT_NAME="SwitchBubbleInput",SwitchBubbleInput=reactExports.forwardRef(({__scopeSwitch:x,control:y,checked:w,bubbles:C=!0,...P},O)=>{const $=reactExports.useRef(null),L=useComposedRefs($,O),D=usePrevious(w),B=useSize(y);return reactExports.useEffect(()=>{const U=$.current;if(!U)return;const k=window.HTMLInputElement.prototype,W=Object.getOwnPropertyDescriptor(k,"checked").set;if(D!==w&&W){const G=new Event("click",{bubbles:C});W.call(U,w),U.dispatchEvent(G)}},[D,w,C]),jsxRuntimeExports.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:w,...P,tabIndex:-1,ref:L,style:{...P.style,...B,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});SwitchBubbleInput.displayName=BUBBLE_INPUT_NAME;function getState(x){return x?"checked":"unchecked"}var Root=Switch$1,Thumb=SwitchThumb;const Switch=({checked:x,disabled:y,onChange:w})=>jsxRuntimeExports.jsx(Root,{className:"q-switch",checked:x,disabled:y,onCheckedChange:w,children:jsxRuntimeExports.jsx(Thumb,{className:"q-switch-thumb"})}),sortOptions=[{label:"Title",value:"title"},{label:"Size",value:"file_size"},{label:"Last Updated",value:"mod_date"}];loadQspCatalog();const QspCatalog=()=>{const{t:x}=useTranslation(),y=useAtomExports.useAtom(catalogLoading$),w=useAtomExports.useAtom(qspCatalogPreparedList$),C=useAtomExports.useAtom(qspAuthors$),P=useAtomExports.useAtom(qspAuthorFilter$),O=useAtomExports.useAtom(qspSortByField$),$=useAtomExports.useAtom(qspSortDirection$),L=useAtomExports.useAtom(qspTitleSearch$),D=useAtomExports.useAtom(onlyAero$);return(y==="pending"||y==="loading")&&!w.length?jsxRuntimeExports.jsx(QspiderLoader,{}):y==="failed"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[x("Loading failed"),jsxRuntimeExports.jsx("button",{onClick:()=>{loadQspCatalog()},children:x("Retry")})]}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"q-catalog__filterbar",children:[jsxRuntimeExports.jsxs("div",{className:"q-catalog__filterbar-block",children:[jsxRuntimeExports.jsxs("label",{children:[x("Filter by Author"),":"]}),jsxRuntimeExports.jsxs("div",{className:"q-catalog__filterbar-group",children:[jsxRuntimeExports.jsx(Select,{name:"author-filter",options:C.map(B=>({label:B,value:B})),placeholder:"",label:"Author",value:P,onValueChange:B=>qspAuthorFilter$.set(B)}),P?jsxRuntimeExports.jsx(Tooltip,{content:x("Clear Author filter"),children:jsxRuntimeExports.jsx("button",{className:"q-ghost-button","aria-label":x("Clear Author filter")??"",onClick:()=>qspAuthorFilter$.set(""),children:jsxRuntimeExports.jsx(Cross1Icon,{})})}):null]})]}),jsxRuntimeExports.jsxs("div",{className:"q-catalog__filterbar-block",children:[jsxRuntimeExports.jsxs("label",{children:[x("Sort by"),":"]}),jsxRuntimeExports.jsxs("div",{className:"q-catalog__filterbar-group",children:[jsxRuntimeExports.jsx(Select,{options:sortOptions.map(B=>({...B,label:x(B.label)})),placeholder:x("Sort by"),label:x("Sort field"),value:O,onValueChange:B=>qspSortByField$.set(B)}),jsxRuntimeExports.jsx(Tooltip,{content:$==="asc"?x("Sort Ascending")||"":x("Sort Descending")||"",children:jsxRuntimeExports.jsx("button",{className:"q-ghost-button",onClick:toggleSortDirection,"aria-label":$==="asc"?x("Sort Ascending")||"":x("Sort Descending")||"",children:$==="asc"?jsxRuntimeExports.jsx(DoubleArrowDownIcon,{}):jsxRuntimeExports.jsx(DoubleArrowUpIcon,{})})})]})]}),jsxRuntimeExports.jsxs("div",{className:"q-catalog__filterbar-block",children:[jsxRuntimeExports.jsx("label",{htmlFor:"only-aero",children:x("Aero games")}),jsxRuntimeExports.jsx(Switch,{checked:D,onChange:B=>onlyAero$.set(B)})]}),jsxRuntimeExports.jsxs("div",{className:"q-catalog__filterbar-block",children:[jsxRuntimeExports.jsxs("label",{htmlFor:"search-input",children:[x("Search"),":"]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("input",{name:"search-input",type:"text",className:"q-input",value:L,onInput:B=>qspTitleSearch$.set(B.target.value)})})]})]}),jsxRuntimeExports.jsx("div",{className:"q-catalog__list",children:w.map(B=>jsxRuntimeExports.jsx(CatalogGameCard,{game:B},B.id))})]})},QspiderThemeSwitch=()=>{const{t:x}=useTranslation();return jsxRuntimeExports.jsx(Tooltip,{content:x("Toggle theme")??"",children:jsxRuntimeExports.jsx("button",{className:"q-ghost-button","aria-label":x("toggle a light and dark color scheme")??"",onClick:toggleTheme,children:jsxRuntimeExports.jsx(SunIcon,{})})})},LocaleSelector=()=>{const{i18n:x}=useTranslation();return jsxRuntimeExports.jsx(Select,{options:locales$1,placeholder:"",label:"",value:x.language,onValueChange:y=>{x.changeLanguage(y)}})},QspiderVersionModal=({children:x})=>{const y=qspApi$.value?.version();return jsxRuntimeExports.jsxs(Root$6,{children:[jsxRuntimeExports.jsx(Trigger$3,{asChild:!0,children:x}),jsxRuntimeExports.jsx(Overlay,{className:"qspider-dialog-overlay"}),jsxRuntimeExports.jsxs(Content$1,{className:"qspider-dialog-content",children:[jsxRuntimeExports.jsxs(VisuallyHidden,{children:[jsxRuntimeExports.jsx(Title,{children:"qSpider version"}),jsxRuntimeExports.jsx(Description$1,{})]}),jsxRuntimeExports.jsx("div",{className:"qspider-logo",children:"spider"}),jsxRuntimeExports.jsxs("div",{children:["Version: ","1.3.1"]}),jsxRuntimeExports.jsxs("div",{children:["QSP version: ",y]})]})]})},QspiderPlayer=()=>{const{t:x}=useTranslation(),y=useComponent(ProvidedComponents.OpenGameButton),w=useAtomExports.useAtom(currentMode$);return jsxRuntimeExports.jsxs("div",{className:"qspider-player",children:[jsxRuntimeExports.jsxs("nav",{className:"qspider-navbar",children:[jsxRuntimeExports.jsx(QspiderVersionModal,{children:jsxRuntimeExports.jsx("div",{className:"qspider-logo",children:"spider"})}),jsxRuntimeExports.jsxs("div",{className:"qspider-nav",children:[jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:"#",onClick:C=>{C.preventDefault(),navigateTo("")},className:w==="shelf"?"qspider-active":"",children:x("Game Shelf")})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:"#",onClick:C=>{C.preventDefault(),navigateTo("catalog")},className:w==="catalog"?"qspider-active":"",children:x("Qsp Game Catalog")})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:"#",onClick:C=>{C.preventDefault(),importGameKit()},children:x("Gamekit")})})]}),jsxRuntimeExports.jsxs("div",{className:"qspider-block",children:[jsxRuntimeExports.jsx(y,{}),jsxRuntimeExports.jsx(LocaleSelector,{}),jsxRuntimeExports.jsx(QspiderThemeSwitch,{})]})]})]}),jsxRuntimeExports.jsxs("main",{className:"qspider-player-main",children:[w==="shelf"&&jsxRuntimeExports.jsx(GameShelf,{}),w==="catalog"&&jsxRuntimeExports.jsx(QspCatalog,{})]})]})},PlayerWithShelf=()=>useAtomExports.useAtom(currentMode$)==="game"?jsxRuntimeExports.jsx(GameRunner,{}):jsxRuntimeExports.jsx(QspiderPlayer,{});var PROVIDER_NAME="ToastProvider",[Collection,useCollection,createCollectionScope]=createCollection("Toast"),[createToastContext]=createContextScope("Toast",[createCollectionScope]),[ToastProviderProvider,useToastProviderContext]=createToastContext(PROVIDER_NAME),ToastProvider=x=>{const{__scopeToast:y,label:w="Notification",duration:C=5e3,swipeDirection:P="right",swipeThreshold:O=50,children:$}=x,[L,D]=reactExports.useState(null),[B,U]=reactExports.useState(0),k=reactExports.useRef(!1),H=reactExports.useRef(!1);return w.trim()||console.error(`Invalid prop \`label\` supplied to \`${PROVIDER_NAME}\`. Expected non-empty \`string\`.`),jsxRuntimeExports.jsx(Collection.Provider,{scope:y,children:jsxRuntimeExports.jsx(ToastProviderProvider,{scope:y,label:w,duration:C,swipeDirection:P,swipeThreshold:O,toastCount:B,viewport:L,onViewportChange:D,onToastAdd:reactExports.useCallback(()=>U(W=>W+1),[]),onToastRemove:reactExports.useCallback(()=>U(W=>W-1),[]),isFocusedToastEscapeKeyDownRef:k,isClosePausedRef:H,children:$})})};ToastProvider.displayName=PROVIDER_NAME;var VIEWPORT_NAME="ToastViewport",VIEWPORT_DEFAULT_HOTKEY=["F8"],VIEWPORT_PAUSE="toast.viewportPause",VIEWPORT_RESUME="toast.viewportResume",ToastViewport=reactExports.forwardRef((x,y)=>{const{__scopeToast:w,hotkey:C=VIEWPORT_DEFAULT_HOTKEY,label:P="Notifications ({hotkey})",...O}=x,$=useToastProviderContext(VIEWPORT_NAME,w),L=useCollection(w),D=reactExports.useRef(null),B=reactExports.useRef(null),U=reactExports.useRef(null),k=reactExports.useRef(null),H=useComposedRefs(y,k,$.onViewportChange),W=C.join("+").replace(/Key/g,"").replace(/Digit/g,""),G=$.toastCount>0;reactExports.useEffect(()=>{const Z=J=>{C.length!==0&&C.every(oe=>J[oe]||J.code===oe)&&k.current?.focus()};return document.addEventListener("keydown",Z),()=>document.removeEventListener("keydown",Z)},[C]),reactExports.useEffect(()=>{const Z=D.current,J=k.current;if(G&&Z&&J){const ne=()=>{if(!$.isClosePausedRef.current){const Te=new CustomEvent(VIEWPORT_PAUSE);J.dispatchEvent(Te),$.isClosePausedRef.current=!0}},oe=()=>{if($.isClosePausedRef.current){const Te=new CustomEvent(VIEWPORT_RESUME);J.dispatchEvent(Te),$.isClosePausedRef.current=!1}},ae=Te=>{!Z.contains(Te.relatedTarget)&&oe()},ve=()=>{Z.contains(document.activeElement)||oe()};return Z.addEventListener("focusin",ne),Z.addEventListener("focusout",ae),Z.addEventListener("pointermove",ne),Z.addEventListener("pointerleave",ve),window.addEventListener("blur",ne),window.addEventListener("focus",oe),()=>{Z.removeEventListener("focusin",ne),Z.removeEventListener("focusout",ae),Z.removeEventListener("pointermove",ne),Z.removeEventListener("pointerleave",ve),window.removeEventListener("blur",ne),window.removeEventListener("focus",oe)}}},[G,$.isClosePausedRef]);const Q=reactExports.useCallback(({tabbingDirection:Z})=>{const ne=L().map(oe=>{const ae=oe.ref.current,ve=[ae,...getTabbableCandidates(ae)];return Z==="forwards"?ve:ve.reverse()});return(Z==="forwards"?ne.reverse():ne).flat()},[L]);return reactExports.useEffect(()=>{const Z=k.current;if(Z){const J=ne=>{const oe=ne.altKey||ne.ctrlKey||ne.metaKey;if(ne.key==="Tab"&&!oe){const ve=document.activeElement,Te=ne.shiftKey;if(ne.target===Z&&Te){B.current?.focus();return}const be=Q({tabbingDirection:Te?"backwards":"forwards"}),Le=be.findIndex(qe=>qe===ve);focusFirst(be.slice(Le+1))?ne.preventDefault():Te?B.current?.focus():U.current?.focus()}};return Z.addEventListener("keydown",J),()=>Z.removeEventListener("keydown",J)}},[L,Q]),jsxRuntimeExports.jsxs(Branch,{ref:D,role:"region","aria-label":P.replace("{hotkey}",W),tabIndex:-1,style:{pointerEvents:G?void 0:"none"},children:[G&&jsxRuntimeExports.jsx(FocusProxy,{ref:B,onFocusFromOutsideViewport:()=>{const Z=Q({tabbingDirection:"forwards"});focusFirst(Z)}}),jsxRuntimeExports.jsx(Collection.Slot,{scope:w,children:jsxRuntimeExports.jsx(Primitive.ol,{tabIndex:-1,...O,ref:H})}),G&&jsxRuntimeExports.jsx(FocusProxy,{ref:U,onFocusFromOutsideViewport:()=>{const Z=Q({tabbingDirection:"backwards"});focusFirst(Z)}})]})});ToastViewport.displayName=VIEWPORT_NAME;var FOCUS_PROXY_NAME="ToastFocusProxy",FocusProxy=reactExports.forwardRef((x,y)=>{const{__scopeToast:w,onFocusFromOutsideViewport:C,...P}=x,O=useToastProviderContext(FOCUS_PROXY_NAME,w);return jsxRuntimeExports.jsx(VisuallyHidden,{tabIndex:0,...P,ref:y,style:{position:"fixed"},onFocus:$=>{const L=$.relatedTarget;!O.viewport?.contains(L)&&C()}})});FocusProxy.displayName=FOCUS_PROXY_NAME;var TOAST_NAME="Toast",TOAST_SWIPE_START="toast.swipeStart",TOAST_SWIPE_MOVE="toast.swipeMove",TOAST_SWIPE_CANCEL="toast.swipeCancel",TOAST_SWIPE_END="toast.swipeEnd",Toast=reactExports.forwardRef((x,y)=>{const{forceMount:w,open:C,defaultOpen:P,onOpenChange:O,...$}=x,[L,D]=useControllableState({prop:C,defaultProp:P??!0,onChange:O,caller:TOAST_NAME});return jsxRuntimeExports.jsx(Presence,{present:w||L,children:jsxRuntimeExports.jsx(ToastImpl,{open:L,...$,ref:y,onClose:()=>D(!1),onPause:useCallbackRef$1(x.onPause),onResume:useCallbackRef$1(x.onResume),onSwipeStart:composeEventHandlers(x.onSwipeStart,B=>{B.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:composeEventHandlers(x.onSwipeMove,B=>{const{x:U,y:k}=B.detail.delta;B.currentTarget.setAttribute("data-swipe","move"),B.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${U}px`),B.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${k}px`)}),onSwipeCancel:composeEventHandlers(x.onSwipeCancel,B=>{B.currentTarget.setAttribute("data-swipe","cancel"),B.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),B.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),B.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),B.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:composeEventHandlers(x.onSwipeEnd,B=>{const{x:U,y:k}=B.detail.delta;B.currentTarget.setAttribute("data-swipe","end"),B.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),B.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),B.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${U}px`),B.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${k}px`),D(!1)})})})});Toast.displayName=TOAST_NAME;var[ToastInteractiveProvider,useToastInteractiveContext]=createToastContext(TOAST_NAME,{onClose(){}}),ToastImpl=reactExports.forwardRef((x,y)=>{const{__scopeToast:w,type:C="foreground",duration:P,open:O,onClose:$,onEscapeKeyDown:L,onPause:D,onResume:B,onSwipeStart:U,onSwipeMove:k,onSwipeCancel:H,onSwipeEnd:W,...G}=x,Q=useToastProviderContext(TOAST_NAME,w),[Z,J]=reactExports.useState(null),ne=useComposedRefs(y,je=>J(je)),oe=reactExports.useRef(null),ae=reactExports.useRef(null),ve=P||Q.duration,Te=reactExports.useRef(0),re=reactExports.useRef(ve),he=reactExports.useRef(0),{onToastAdd:be,onToastRemove:Le}=Q,qe=useCallbackRef$1(()=>{Z?.contains(document.activeElement)&&Q.viewport?.focus(),$()}),Ye=reactExports.useCallback(je=>{!je||je===1/0||(window.clearTimeout(he.current),Te.current=new Date().getTime(),he.current=window.setTimeout(qe,je))},[qe]);reactExports.useEffect(()=>{const je=Q.viewport;if(je){const Ke=()=>{Ye(re.current),B?.()},Ve=()=>{const We=new Date().getTime()-Te.current;re.current=re.current-We,window.clearTimeout(he.current),D?.()};return je.addEventListener(VIEWPORT_PAUSE,Ve),je.addEventListener(VIEWPORT_RESUME,Ke),()=>{je.removeEventListener(VIEWPORT_PAUSE,Ve),je.removeEventListener(VIEWPORT_RESUME,Ke)}}},[Q.viewport,ve,D,B,Ye]),reactExports.useEffect(()=>{O&&!Q.isClosePausedRef.current&&Ye(ve)},[O,ve,Q.isClosePausedRef,Ye]),reactExports.useEffect(()=>(be(),()=>Le()),[be,Le]);const et=reactExports.useMemo(()=>Z?getAnnounceTextContent(Z):null,[Z]);return Q.viewport?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[et&&jsxRuntimeExports.jsx(ToastAnnounce,{__scopeToast:w,role:"status","aria-live":C==="foreground"?"assertive":"polite",children:et}),jsxRuntimeExports.jsx(ToastInteractiveProvider,{scope:w,onClose:qe,children:reactDomExports.createPortal(jsxRuntimeExports.jsx(Collection.ItemSlot,{scope:w,children:jsxRuntimeExports.jsx(Root$7,{asChild:!0,onEscapeKeyDown:composeEventHandlers(L,()=>{Q.isFocusedToastEscapeKeyDownRef.current||qe(),Q.isFocusedToastEscapeKeyDownRef.current=!1}),children:jsxRuntimeExports.jsx(Primitive.li,{tabIndex:0,"data-state":O?"open":"closed","data-swipe-direction":Q.swipeDirection,...G,ref:ne,style:{userSelect:"none",touchAction:"none",...x.style},onKeyDown:composeEventHandlers(x.onKeyDown,je=>{je.key==="Escape"&&(L?.(je.nativeEvent),je.nativeEvent.defaultPrevented||(Q.isFocusedToastEscapeKeyDownRef.current=!0,qe()))}),onPointerDown:composeEventHandlers(x.onPointerDown,je=>{je.button===0&&(oe.current={x:je.clientX,y:je.clientY})}),onPointerMove:composeEventHandlers(x.onPointerMove,je=>{if(!oe.current)return;const Ke=je.clientX-oe.current.x,Ve=je.clientY-oe.current.y,We=!!ae.current,we=["left","right"].includes(Q.swipeDirection),Oe=["left","up"].includes(Q.swipeDirection)?Math.min:Math.max,He=we?Oe(0,Ke):0,ie=we?0:Oe(0,Ve),Re=je.pointerType==="touch"?10:2,Xe={x:He,y:ie},Ze={originalEvent:je,delta:Xe};We?(ae.current=Xe,handleAndDispatchCustomEvent(TOAST_SWIPE_MOVE,k,Ze,{discrete:!1})):isDeltaInDirection(Xe,Q.swipeDirection,Re)?(ae.current=Xe,handleAndDispatchCustomEvent(TOAST_SWIPE_START,U,Ze,{discrete:!1}),je.target.setPointerCapture(je.pointerId)):(Math.abs(Ke)>Re||Math.abs(Ve)>Re)&&(oe.current=null)}),onPointerUp:composeEventHandlers(x.onPointerUp,je=>{const Ke=ae.current,Ve=je.target;if(Ve.hasPointerCapture(je.pointerId)&&Ve.releasePointerCapture(je.pointerId),ae.current=null,oe.current=null,Ke){const We=je.currentTarget,we={originalEvent:je,delta:Ke};isDeltaInDirection(Ke,Q.swipeDirection,Q.swipeThreshold)?handleAndDispatchCustomEvent(TOAST_SWIPE_END,W,we,{discrete:!0}):handleAndDispatchCustomEvent(TOAST_SWIPE_CANCEL,H,we,{discrete:!0}),We.addEventListener("click",Oe=>Oe.preventDefault(),{once:!0})}})})})}),Q.viewport)})]}):null}),ToastAnnounce=x=>{const{__scopeToast:y,children:w,...C}=x,P=useToastProviderContext(TOAST_NAME,y),[O,$]=reactExports.useState(!1),[L,D]=reactExports.useState(!1);return useNextFrame(()=>$(!0)),reactExports.useEffect(()=>{const B=window.setTimeout(()=>D(!0),1e3);return()=>window.clearTimeout(B)},[]),L?null:jsxRuntimeExports.jsx(Portal$4,{asChild:!0,children:jsxRuntimeExports.jsx(VisuallyHidden,{...C,children:O&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[P.label," ",w]})})})},TITLE_NAME="ToastTitle",ToastTitle=reactExports.forwardRef((x,y)=>{const{__scopeToast:w,...C}=x;return jsxRuntimeExports.jsx(Primitive.div,{...C,ref:y})});ToastTitle.displayName=TITLE_NAME;var DESCRIPTION_NAME="ToastDescription",ToastDescription=reactExports.forwardRef((x,y)=>{const{__scopeToast:w,...C}=x;return jsxRuntimeExports.jsx(Primitive.div,{...C,ref:y})});ToastDescription.displayName=DESCRIPTION_NAME;var ACTION_NAME="ToastAction",ToastAction=reactExports.forwardRef((x,y)=>{const{altText:w,...C}=x;return w.trim()?jsxRuntimeExports.jsx(ToastAnnounceExclude,{altText:w,asChild:!0,children:jsxRuntimeExports.jsx(ToastClose,{...C,ref:y})}):(console.error(`Invalid prop \`altText\` supplied to \`${ACTION_NAME}\`. Expected non-empty \`string\`.`),null)});ToastAction.displayName=ACTION_NAME;var CLOSE_NAME="ToastClose",ToastClose=reactExports.forwardRef((x,y)=>{const{__scopeToast:w,...C}=x,P=useToastInteractiveContext(CLOSE_NAME,w);return jsxRuntimeExports.jsx(ToastAnnounceExclude,{asChild:!0,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",...C,ref:y,onClick:composeEventHandlers(x.onClick,P.onClose)})})});ToastClose.displayName=CLOSE_NAME;var ToastAnnounceExclude=reactExports.forwardRef((x,y)=>{const{__scopeToast:w,altText:C,...P}=x;return jsxRuntimeExports.jsx(Primitive.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":C||void 0,...P,ref:y})});function getAnnounceTextContent(x){const y=[];return Array.from(x.childNodes).forEach(C=>{if(C.nodeType===C.TEXT_NODE&&C.textContent&&y.push(C.textContent),isHTMLElement(C)){const P=C.ariaHidden||C.hidden||C.style.display==="none",O=C.dataset.radixToastAnnounceExclude==="";if(!P)if(O){const $=C.dataset.radixToastAnnounceAlt;$&&y.push($)}else y.push(...getAnnounceTextContent(C))}}),y}function handleAndDispatchCustomEvent(x,y,w,{discrete:C}){const P=w.originalEvent.currentTarget,O=new CustomEvent(x,{bubbles:!0,cancelable:!0,detail:w});y&&P.addEventListener(x,y,{once:!0}),C?dispatchDiscreteCustomEvent(P,O):P.dispatchEvent(O)}var isDeltaInDirection=(x,y,w=0)=>{const C=Math.abs(x.x),P=Math.abs(x.y),O=C>P;return y==="left"||y==="right"?O&&C>w:!O&&P>w};function useNextFrame(x=()=>{}){const y=useCallbackRef$1(x);useLayoutEffect2(()=>{let w=0,C=0;return w=window.requestAnimationFrame(()=>C=window.requestAnimationFrame(y)),()=>{window.cancelAnimationFrame(w),window.cancelAnimationFrame(C)}},[y])}function isHTMLElement(x){return x.nodeType===x.ELEMENT_NODE}function getTabbableCandidates(x){const y=[],w=document.createTreeWalker(x,NodeFilter.SHOW_ELEMENT,{acceptNode:C=>{const P=C.tagName==="INPUT"&&C.type==="hidden";return C.disabled||C.hidden||P?NodeFilter.FILTER_SKIP:C.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;w.nextNode();)y.push(w.currentNode);return y}function focusFirst(x){const y=document.activeElement;return x.some(w=>w===y?!0:(w.focus(),document.activeElement!==y))}var Provider=ToastProvider,Viewport=ToastViewport,Root2=Toast,Description=ToastDescription,Close=ToastClose;const ErrorAlert=()=>{const{t:x}=useTranslation(),y=useAtomExports.useAtom(isErrorShown$),w=useAtomExports.useAtom(errorMessage$);return y?jsxRuntimeExports.jsxs(Provider,{children:[jsxRuntimeExports.jsxs(Root2,{className:"qsp-toast-root error",open:y,onOpenChange:()=>isErrorShown$.set(!1),children:[jsxRuntimeExports.jsx(Description,{className:"qsp-toast-description",children:x(w)}),jsxRuntimeExports.jsx(Close,{className:"q-ghost-button",children:jsxRuntimeExports.jsx(Cross1Icon,{})})]}),jsxRuntimeExports.jsx(Viewport,{className:"qsp-toast-viewport"})]}):null},NoticeToast=()=>{const x=useAtomExports.useAtom(isNoticeShown$),y=useAtomExports.useAtom(noticeMessage$),{t:w}=useTranslation();return x?jsxRuntimeExports.jsxs(Provider,{children:[jsxRuntimeExports.jsx(Root2,{className:"qsp-toast-root",open:x,children:jsxRuntimeExports.jsx(Description,{className:"qsp-toast-description",children:w(y)})}),jsxRuntimeExports.jsx(Viewport,{className:"qsp-toast-viewport"})]}):null},DebugPanel=reactExports.lazy(()=>__vitePreload(()=>import("./debug-panel-WdNhSIiA.js"),[],import.meta.url).then(x=>({default:x.DebugPanel}))),Debugger=({children:x})=>{const y=useAtomExports.useAtom(currentGameEntry$),w=useAtomExports.useAtom(isDebugPanelOpen$),C=useAtomExports.useAtom(debugDockPosition$);return reactExports.useEffect(()=>{y||debugActions.closeDebugPanel()},[y]),reactExports.useEffect(()=>{const P=O=>{y&&O.key==="F12"&&(O.preventDefault(),debugActions.toggleDebugPanel())};return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[y]),jsxRuntimeExports.jsxs("div",{className:`qsp-debugger-layout ${w?"debugger-open":""} ${w?`debugger-${C}`:""}`,children:[jsxRuntimeExports.jsx("div",{className:"qsp-debugger-main-content",children:x}),w&&y&&jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx("div",{className:"qsp-debugger-loading",children:"Loading debugger..."}),children:jsxRuntimeExports.jsx(DebugPanel,{})})]})};async function init(){initialBaseUrl$.set(prepareBaseUrl(window.location.href)),onGameEnd$.set(()=>navigateTo("")),initTheme(),await loadGamesFromStorage();const x=window.location.search,y=new URLSearchParams(x),w=y.get("config"),P=y.get("game")||w;let O=null;if(P){const L=await importUrl(P);for(const D of L)games$.value[D.id]||games$.actions.add(D.id,D);O=L[0].id}const $=y.get("catalogId");if($){let L;for(const[D,B]of Object.entries(games$.value))if(B.meta?.source_id===$){L=D;break}if(L)O=L;else{await loadQspCatalog();const D=qspCatalogList$.value.find(B=>B.id===Number($));if(D){loadingMessage$.set(instance.t("Loading game from catalog..."));const[B]=await moveToShelf(D);B&&(O=B.id),loadingMessage$.set("")}else showError(instance.t("Game with id {{catalogId}} not found in catalog",{catalogId:$}))}}initDeferred$.value.resolve(),await initQspApi(),await registerDefaultThemes(initialBaseUrl$.value),O?goToGame(O):await processLocationChange(window.location.search),baseInit$.set(!0)}const OpenGameButton=()=>{const{t:x}=useTranslation(),y=reactExports.useCallback(w=>{const C=w.target.files?.[0];if(!C)return;const P=new FileReader;P.onload=async function(O){const $=O.target?.result;try{const L=await importFile(C.name,$);for(const D of L)games$.actions.add(D.id,D);if(L.length>1)showNotice(x("{{ count }} games added to shelf",{count:L.length}));else{const D=L[0].id;D&&goToGame(D)}}catch(L){showError(L instanceof Error?L.message:String(L))}},P.readAsArrayBuffer(C)},[]);return jsxRuntimeExports.jsxs("label",{className:"q-button q-open-game-button",htmlFor:"openGame",children:[x("Open game"),jsxRuntimeExports.jsx("input",{type:"file",id:"openGame",accept:".zip, .aqsp, .qsp, .qsps, .gam, .rar, .7z",onChange:y})]})};componentsRegistry$.actions.register(ProvidedComponents.OpenGameButton,OpenGameButton);init();const App=()=>useAtomExports.useAtom(baseInit$)?jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(QspiderLoader,{}),children:jsxRuntimeExports.jsx(QspiderRoot,{children:jsxRuntimeExports.jsxs(Debugger,{children:[jsxRuntimeExports.jsx(PlayerWithShelf,{}),jsxRuntimeExports.jsx(ErrorAlert,{}),jsxRuntimeExports.jsx(NoticeToast,{})]})})}):jsxRuntimeExports.jsx(QspiderLoader,{});console.log("qSpider version: 1.3.1");const root=ReactDOM$1.createRoot(document.getElementById("root"));root.render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));"serviceWorker"in navigator&&new l$1(new URL("./service-worker.js",window.location.href).toString(),{type:"classic"}).register();export{Arrow2 as A,Content2$1 as B,Content2 as C,ChevronUpIcon as D,Viewport$1 as E,Item as F,ItemText as G,ItemIndicator as H,Item$1 as I,CheckIcon as J,ScrollDownButton as K,qspApi$ as L,isCodeInspectorLoading$ as M,codeInspectorError$ as N,isDebugPanelOpen$ as O,Portal as P,debugDockPosition$ as Q,Root3 as R,ScrollUpButton as S,Trigger as T,debugPanelSize$ as U,Value as V,__vitePreload as _,useControllableState as a,useId as b,createContextScope as c,Primitive as d,createRovingFocusGroupScope as e,Root$3 as f,composeEventHandlers as g,Presence as h,useTranslation as i,jsxRuntimeExports as j,useAtomExports as k,debugState$ as l,canStep$ as m,Provider$1 as n,debugActions as o,disableDebugMode as p,enableDebugMode as q,reactExports as r,React as s,codeInspectorActions as t,useDirection as u,Root2$1 as v,Trigger$1 as w,Icon as x,ChevronDownIcon as y,Portal$1 as z};
